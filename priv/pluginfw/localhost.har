{
  "log": {
    "version": "1.2",
    "creator": {
      "name": "WebInspector",
      "version": "537.36"
    },
    "pages": [
      {
        "startedDateTime": "2015-06-09T16:53:03.398Z",
        "id": "page_2",
        "title": "http://localhost:9001/p/bla",
        "pageTimings": {
          "onContentLoad": 1775.1739999994243,
          "onLoad": 1775.00499999951
        }
      }
    ],
    "entries": [
      {
        "startedDateTime": "2015-06-09T16:53:03.398Z",
        "time": 28.66399999948044,
        "request": {
          "method": "GET",
          "url": "http://localhost:9001/p/bla",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "DNT",
              "value": "1"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, sdch"
            },
            {
              "name": "Host",
              "value": "localhost:9001"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.8,de;q=0.6"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.81 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8"
            },
            {
              "name": "Referer",
              "value": "http://localhost:9001/"
            },
            {
              "name": "Cookie",
              "value": "prefs=%7B%22useMonospaceFont%22%3Atrue%7D; token=t.ltaoBcvzTd2Qbc9Uqjas; express_sid=s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            }
          ],
          "queryString": [],
          "cookies": [
            {
              "name": "prefs",
              "value": "%7B%22useMonospaceFont%22%3Atrue%7D",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "token",
              "value": "t.ltaoBcvzTd2Qbc9Uqjas",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "express_sid",
              "value": "s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo",
              "expires": null,
              "httpOnly": false,
              "secure": false
            }
          ],
          "headersSize": 579,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Date",
              "value": "Tue, 09 Jun 2015 16:53:03 GMT"
            },
            {
              "name": "Server",
              "value": "Etherpad d11c92c (http://etherpad.org)"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            },
            {
              "name": "ETag",
              "value": "W/\"DDMQrxo0ESeIPsaN4V4AqQ==\""
            },
            {
              "name": "Content-Type",
              "value": "text/html; charset=utf-8"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Content-Length",
              "value": "33427"
            },
            {
              "name": "X-UA-Compatible",
              "value": "IE=Edge,chrome=1"
            }
          ],
          "cookies": [],
          "content": {
            "size": 33427,
            "mimeType": "text/html",
            "compression": 0,
            "text": "\n<!doctype html>\n\n<html>\n\n\n        <title>Etherpad</title>\n        <script>\n          /*\n          |@licstart  The following is the entire license notice for the\n          JavaScript code in this page.|\n\n          Copyright 2011 Peter Martischka, Primary Technology.\n\n          Licensed under the Apache License, Version 2.0 (the \"License\");\n          you may not use this file except in compliance with the License.\n          You may obtain a copy of the License at\n\n             http://www.apache.org/licenses/LICENSE-2.0\n\n          Unless required by applicable law or agreed to in writing, software\n          distributed under the License is distributed on an \"AS IS\" BASIS,\n          WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n          See the License for the specific language governing permissions and\n          limitations under the License.\n\n          |@licend  The above is the entire license notice\n          for the JavaScript code in this page.|\n          */\n        </script>\n\n        <meta charset=\"utf-8\">\n        <meta name=\"robots\" content=\"noindex, nofollow\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0\">\n        <link rel=\"shortcut icon\" href=\"../favicon.ico\">\n\n        \n        <link href=\"../static/css/pad.css\" rel=\"stylesheet\">\n\n        \n        <link href=\"../static/custom/pad.css\" rel=\"stylesheet\">\n        \n\n        <style title=\"dynamicsyntax\"></style>\n        \n\n        <link rel=\"localizations\" type=\"application/l10n+json\" href=\"../locales.json\" />\n        <script type=\"text/javascript\" src=\"../static/js/html10n.js\"></script>\n        <script type=\"text/javascript\" src=\"../static/js/l10n.js\"></script>\n\n        <!-- head and body had been removed intentionally -->\n\n        \n        <div id=\"editbar\" class=\"toolbar\" title=\"Toolbar (Alt F9)\">\n            <div id=\"overlay\">\n                <div id=\"overlay-inner\"></div>\n            </div>\n\n            <ul class=\"menu_left\" role=\"toolbar\">\n                \n                <li data-type=\"button\" data-key=\"bold\"><a class=\"grouped-left\" data-l10n-id=\"pad.toolbar.bold.title\"><button class=\" buttonicon buttonicon-bold\" data-l10n-id=\"pad.toolbar.bold.title\"></button></a></li>\n<li data-type=\"button\" data-key=\"italic\"><a class=\"grouped-middle\" data-l10n-id=\"pad.toolbar.italic.title\"><button class=\" buttonicon buttonicon-italic\" data-l10n-id=\"pad.toolbar.italic.title\"></button></a></li>\n<li data-type=\"button\" data-key=\"underline\"><a class=\"grouped-middle\" data-l10n-id=\"pad.toolbar.underline.title\"><button class=\" buttonicon buttonicon-underline\" data-l10n-id=\"pad.toolbar.underline.title\"></button></a></li>\n<li data-type=\"button\" data-key=\"strikethrough\"><a class=\"grouped-right\" data-l10n-id=\"pad.toolbar.strikethrough.title\"><button class=\" buttonicon buttonicon-strikethrough\" data-l10n-id=\"pad.toolbar.strikethrough.title\"></button></a></li><li class=\"separator\"></li><li data-type=\"button\" data-key=\"insertorderedlist\"><a class=\"grouped-left\" data-l10n-id=\"pad.toolbar.ol.title\"><button class=\" buttonicon buttonicon-insertorderedlist\" data-l10n-id=\"pad.toolbar.ol.title\"></button></a></li>\n<li data-type=\"button\" data-key=\"insertunorderedlist\"><a class=\"grouped-middle\" data-l10n-id=\"pad.toolbar.ul.title\"><button class=\" buttonicon buttonicon-insertunorderedlist\" data-l10n-id=\"pad.toolbar.ul.title\"></button></a></li>\n<li data-type=\"button\" data-key=\"indent\"><a class=\"grouped-middle\" data-l10n-id=\"pad.toolbar.indent.title\"><button class=\" buttonicon buttonicon-indent\" data-l10n-id=\"pad.toolbar.indent.title\"></button></a></li>\n<li data-type=\"button\" data-key=\"outdent\"><a class=\"grouped-right\" data-l10n-id=\"pad.toolbar.unindent.title\"><button class=\" buttonicon buttonicon-outdent\" data-l10n-id=\"pad.toolbar.unindent.title\"></button></a></li><li class=\"separator\"></li><li data-type=\"button\" data-key=\"undo\"><a class=\"grouped-left\" data-l10n-id=\"pad.toolbar.undo.title\"><button class=\" buttonicon buttonicon-undo\" data-l10n-id=\"pad.toolbar.undo.title\"></button></a></li>\n<li data-type=\"button\" data-key=\"redo\"><a class=\"grouped-right\" data-l10n-id=\"pad.toolbar.redo.title\"><button class=\" buttonicon buttonicon-redo\" data-l10n-id=\"pad.toolbar.redo.title\"></button></a></li><li class=\"separator\"></li><li data-type=\"button\" data-key=\"clearauthorship\"><a class=\"\" data-l10n-id=\"pad.toolbar.clearAuthorship.title\"><button class=\" buttonicon buttonicon-clearauthorship\" data-l10n-id=\"pad.toolbar.clearAuthorship.title\"></button></a></li>\n                <li class=\"separator acl-write\"></li>\n<li id=\"headings\" class=\"acl-write\">\n    <select id=\"heading-selection\">\n        <option value=\"dummy\" selected data-l10n-id=\"ep_headings.style\">Style</option>\n        <option value=\"-1\" data-l10n-id=\"ep_headings.normal\">Normal</option>\n        <option value=\"0\" data-l10n-id=\"ep_headings.h1\">Heading 1</option>\n        <option value=\"1\" data-l10n-id=\"ep_headings.h2\">Heading 2</option>\n        <option value=\"2\" data-l10n-id=\"ep_headings.h3\">Heading 3</option>\n        <option value=\"3\" data-l10n-id=\"ep_headings.h4\">Heading 4</option>\n        <option value=\"4\" data-l10n-id=\"ep_headings.h5\">Heading 5</option>\n        <option value=\"5\" data-l10n-id=\"ep_headings.h6\">Heading 6</option>\n        <option value=\"6\" data-l10n-id=\"ep_headings.code\">Code</option>\n        \n    </select>\n</li>\n            </ul>\n            <ul class=\"menu_right\" role=\"toolbar\">\n                \n                <li data-type=\"button\" data-key=\"import_export\"><a class=\"grouped-left\" data-l10n-id=\"pad.toolbar.import_export.title\"><button class=\" buttonicon buttonicon-import_export\" data-l10n-id=\"pad.toolbar.import_export.title\"></button></a></li>\n<li data-type=\"button\" data-key=\"showTimeSlider\"><a class=\"grouped-middle\" data-l10n-id=\"pad.toolbar.timeslider.title\"><button class=\" buttonicon buttonicon-history\" data-l10n-id=\"pad.toolbar.timeslider.title\"></button></a></li>\n<li data-type=\"button\" data-key=\"savedRevision\"><a class=\"grouped-right\" data-l10n-id=\"pad.toolbar.savedRevision.title\"><button class=\" buttonicon buttonicon-savedRevision\" data-l10n-id=\"pad.toolbar.savedRevision.title\"></button></a></li><li class=\"separator\"></li><li data-type=\"button\" data-key=\"settings\"><a class=\"grouped-left\" data-l10n-id=\"pad.toolbar.settings.title\"><button class=\" buttonicon buttonicon-settings\" data-l10n-id=\"pad.toolbar.settings.title\"></button></a></li>\n<li data-type=\"button\" data-key=\"embed\"><a class=\"grouped-right\" data-l10n-id=\"pad.toolbar.embed.title\"><button class=\" buttonicon buttonicon-embed\" data-l10n-id=\"pad.toolbar.embed.title\"></button></a></li><li class=\"separator\"></li><li data-type=\"button\" data-key=\"showusers\"><a class=\"\" data-l10n-id=\"pad.toolbar.showusers.title\"><button class=\" buttonicon buttonicon-showusers\" data-l10n-id=\"pad.toolbar.showusers.title\"></button></a></li>\n                \n            </ul>\n        </div>\n        \n\n        <div id=\"users\">\n            \n            <div id=\"connectionstatus\"></div>\n            <div id=\"myuser\">\n                <div id=\"mycolorpicker\">\n                    <div id=\"colorpicker\"></div>\n                    <button id=\"mycolorpickersave\" data-l10n-id=\"pad.colorpicker.save\"></button>\n                    <button id=\"mycolorpickercancel\" data-l10n-id=\"pad.colorpicker.cancel\"></button>\n                    <span id=\"mycolorpickerpreview\" class=\"myswatchboxhoverable\"></span>\n                </div>\n                <div id=\"myswatchbox\"><div id=\"myswatch\"></div></div>\n                <div id=\"myusernameform\"><input type=\"text\" id=\"myusernameedit\" disabled=\"disabled\" data-l10n-id=\"pad.userlist.entername\"></div>\n                <div id=\"mystatusform\"><input type=\"text\" id=\"mystatusedit\" disabled=\"disabled\"></div>\n            </div>\n            <div id=\"otherusers\" aria-role=\"document\">\n                <div id=\"guestprompts\"></div>\n                <table id=\"otheruserstable\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\">\n                    <tr><td></td></tr>\n                </table>\n                <div id=\"nootherusers\"></div>\n            </div>\n            <div id=\"userlistbuttonarea\"></div>\n            \n        </div>\n\n        <div id=\"editorcontainerbox\">\n            <div id=\"editorcontainer\"></div>\n            <div id=\"editorloadingbox\">\n              <div id=\"passwordRequired\">\n                <p data-l10n-id=\"pad.passwordRequired\">You need a password to access this pad</p>\n                <form class='passForm' method='POST'>\n                  <input id='passwordinput' type='password' name='password'><input type='submit' value='Submit'>\n                </form>\n              </div>\n              <div id=\"permissionDenied\">\n                <p data-l10n-id=\"pad.permissionDenied\">You do not have permission to access this pad</p>\n              </div>\n              <div id=\"wrongPassword\">\n                <p data-l10n-id=\"pad.wrongPassword\">Your password was wrong</p>\n              </div>\n              <div id=\"noCookie\">\n                <p data-l10n-id=\"pad.noCookie\">Cookie could not be found. Please allow cookies in your browser!</p>\n              </div>\n              \n              <p data-l10n-id=\"pad.loading\" id=\"loading\">Loading...</p>\n              \n              <noscript><strong>Sorry, you have to enable Javascript in order to use this.</strong></noscript>\n            </div>\n        </div>\n\n        <div id=\"settings\" class=\"popup\">\n            <h1 data-l10n-id=\"pad.settings.padSettings\"></h1>\n            <div class=\"column\">\n                \n                <h2 data-l10n-id=\"pad.settings.myView\"></h2>\n                <p>\n                    <input type=\"checkbox\" id=\"options-stickychat\" onClick=\"chat.stickToScreen();\">\n                    <label for=\"options-stickychat\" data-l10n-id=\"pad.settings.stickychat\"></label>\n                </p>\n                <p>\n                    <input type=\"checkbox\" id=\"options-chatandusers\" onClick=\"chat.chatAndUsers();\">\n                    <label for=\"options-chatandusers\" data-l10n-id=\"pad.settings.chatandusers\"></label>\n                </p>\n                <p>\n                    <input type=\"checkbox\" id=\"options-colorscheck\">\n                    <label for=\"options-colorscheck\" data-l10n-id=\"pad.settings.colorcheck\"></label>\n                </p>\n                <p>\n                    <input type=\"checkbox\" id=\"options-linenoscheck\" checked>\n                    <label for=\"options-linenoscheck\" data-l10n-id=\"pad.settings.linenocheck\"></label>\n                </p>\n                <p>\n                    <input type=\"checkbox\" id=\"options-rtlcheck\">\n                    <label for=\"options-rtlcheck\" data-l10n-id=\"pad.settings.rtlcheck\"></label>\n                </p>\n                \n                <table>\n                    \n                    <tr>\n                        <td>\n                            <label for=\"viewfontmenu\" data-l10n-id=\"pad.settings.fontType\">Font type:</label>\n                        </td>\n                        <td>\n                            <select id=\"viewfontmenu\">\n                                <option value=\"normal\" data-l10n-id=\"pad.settings.fontType.normal\"></option>\n                                <option value=\"monospace\" data-l10n-id=\"pad.settings.fontType.monospaced\"></option>\n                                <option value=\"opendyslexic\" data-l10n-id=\"pad.settings.fontType.opendyslexic\"></option>\n                                <option value=\"comicsans\" data-l10n-id=\"pad.settings.fontType.comicsans\"></option>\n                                <option value=\"georgia\" data-l10n-id=\"pad.settings.fontType.georgia\"></option>\n                                <option value=\"impact\" data-l10n-id=\"pad.settings.fontType.impact\"></option>\n                                <option value=\"lucida\" data-l10n-id=\"pad.settings.fontType.lucida\"></option>\n                                <option value=\"lucidasans\" data-l10n-id=\"pad.settings.fontType.lucidasans\"></option>\n                                <option value=\"palatino\" data-l10n-id=\"pad.settings.fontType.palatino\"></option>\n                                <option value=\"tahoma\" data-l10n-id=\"pad.settings.fontType.tahoma\"></option>\n                                <option value=\"timesnewroman\" data-l10n-id=\"pad.settings.fontType.timesnewroman\"></option>\n                                <option value=\"trebuchet\" data-l10n-id=\"pad.settings.fontType.trebuchet\"></option>\n                                <option value=\"verdana\" data-l10n-id=\"pad.settings.fontType.verdana\"></option>\n                                <option value=\"symbol\" data-l10n-id=\"pad.settings.fontType.symbol\"></option>\n                                <option value=\"webdings\" data-l10n-id=\"pad.settings.fontType.webdings\"></option>\n                                <option value=\"wingdings\" data-l10n-id=\"pad.settings.fontType.wingdings\"></option>\n                                <option value=\"sansserif\" data-l10n-id=\"pad.settings.fontType.sansserif\"></option>\n                                <option value=\"serif\" data-l10n-id=\"pad.settings.fontType.serif\"></option>\n                            </select>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            <label for=\"languagemenu\" data-l10n-id=\"pad.settings.language\">Language:</label>\n                        </td>\n                        <td>\n                            <select id=\"languagemenu\">\n                                \n                                <option value=\"af\">Afrikaans</option>\n                                \n                                <option value=\"ar\">العربية</option>\n                                \n                                <option value=\"ast\">asturianu</option>\n                                \n                                <option value=\"az\">azərbaycanca</option>\n                                \n                                <option value=\"azb\">تورکجه</option>\n                                \n                                <option value=\"bcc\">بلوچی مکرانی</option>\n                                \n                                <option value=\"be-tarask\">беларуская (тарашкевіца)‎</option>\n                                \n                                <option value=\"bn\">বাংলা</option>\n                                \n                                <option value=\"br\">brezhoneg</option>\n                                \n                                <option value=\"ca\">català</option>\n                                \n                                <option value=\"cs\">česky</option>\n                                \n                                <option value=\"da\">dansk</option>\n                                \n                                <option value=\"de\">Deutsch</option>\n                                \n                                <option value=\"diq\">Zazaki</option>\n                                \n                                <option value=\"dsb\">dolnoserbski</option>\n                                \n                                <option value=\"el\">Ελληνικά</option>\n                                \n                                <option value=\"en-gb\">British English</option>\n                                \n                                <option value=\"en\">English</option>\n                                \n                                <option value=\"eo\">Esperanto</option>\n                                \n                                <option value=\"es\">español</option>\n                                \n                                <option value=\"et\">eesti</option>\n                                \n                                <option value=\"eu\">euskara</option>\n                                \n                                <option value=\"fa\">فارسی</option>\n                                \n                                <option value=\"fi\">suomi</option>\n                                \n                                <option value=\"fo\">føroyskt</option>\n                                \n                                <option value=\"fr\">français</option>\n                                \n                                <option value=\"gl\">galego</option>\n                                \n                                <option value=\"he\">עברית</option>\n                                \n                                <option value=\"hsb\">hornjoserbsce</option>\n                                \n                                <option value=\"hu\">magyar</option>\n                                \n                                <option value=\"ia\">interlingua</option>\n                                \n                                <option value=\"is\">íslenska</option>\n                                \n                                <option value=\"it\">italiano</option>\n                                \n                                <option value=\"ja\">日本語</option>\n                                \n                                <option value=\"km\">ភាសាខ្មែរ</option>\n                                \n                                <option value=\"ko\">한국어</option>\n                                \n                                <option value=\"ksh\">Ripoarisch</option>\n                                \n                                <option value=\"ku-latn\">Kurdî (latînî)‎</option>\n                                \n                                <option value=\"lb\">Lëtzebuergesch</option>\n                                \n                                <option value=\"lt\">lietuvių</option>\n                                \n                                <option value=\"lv\">latviešu</option>\n                                \n                                <option value=\"map-bms\">Basa Banyumasan</option>\n                                \n                                <option value=\"mk\">македонски</option>\n                                \n                                <option value=\"ml\">മലയാളം</option>\n                                \n                                <option value=\"mn\">монгол</option>\n                                \n                                <option value=\"mr\">मराठी</option>\n                                \n                                <option value=\"ms\">Bahasa Melayu</option>\n                                \n                                <option value=\"nap\">Nnapulitano</option>\n                                \n                                <option value=\"nb\">norsk (bokmål)‎</option>\n                                \n                                <option value=\"nds\">Plattdüütsch</option>\n                                \n                                <option value=\"ne\">नेपाली</option>\n                                \n                                <option value=\"nl\">Nederlands</option>\n                                \n                                <option value=\"nn\">norsk (nynorsk)‎</option>\n                                \n                                <option value=\"oc\">occitan</option>\n                                \n                                <option value=\"os\">Ирон</option>\n                                \n                                <option value=\"pa\">ਪੰਜਾਬੀ</option>\n                                \n                                <option value=\"pl\">polski</option>\n                                \n                                <option value=\"ps\">پښتو</option>\n                                \n                                <option value=\"pt-br\">português do Brasil</option>\n                                \n                                <option value=\"pt\">português</option>\n                                \n                                <option value=\"ro\">română</option>\n                                \n                                <option value=\"ru\">русский</option>\n                                \n                                <option value=\"sco\">Scots</option>\n                                \n                                <option value=\"sk\">slovenčina</option>\n                                \n                                <option value=\"sl\">slovenščina</option>\n                                \n                                <option value=\"sq\">shqip</option>\n                                \n                                <option value=\"sr-ec\">српски (ћирилица)‎</option>\n                                \n                                <option value=\"sv\">svenska</option>\n                                \n                                <option value=\"te\">తెలుగు</option>\n                                \n                                <option value=\"tr\">Türkçe</option>\n                                \n                                <option value=\"uk\">українська</option>\n                                \n                                <option value=\"vi\">Tiếng Việt</option>\n                                \n                                <option value=\"zh-hans\">中文（简体）‎</option>\n                                \n                                <option value=\"zh-hant\">中文（繁體）‎</option>\n                                \n                            </select>\n                        </td>\n                    </tr>\n                    \n                </table>\n            </div>\n            <div class=\"column\">\n                \n                <h2 data-l10n-id=\"pad.settings.globalView\"></h2>\n                \n            </div>\n        </div>\n\n        <div id=\"import_export\" class=\"popup\">\n            <h1 data-l10n-id=\"pad.importExport.import_export\"></h1>\n            <div class=\"column acl-write\">\n                \n                <h2 data-l10n-id=\"pad.importExport.import\"></h2>\n                <div class=\"importmessage\" id=\"importmessageabiword\" data-l10n-id=\"pad.importExport.abiword.innerHTML\"></div><br>\n                <form id=\"importform\" method=\"post\" action=\"\" target=\"importiframe\" enctype=\"multipart/form-data\">\n                    <div class=\"importformdiv\" id=\"importformfilediv\">\n                        <input type=\"file\" name=\"file\" size=\"10\" id=\"importfileinput\">\n                        <div class=\"importmessage\" id=\"importmessagefail\"></div>\n                    </div>\n                    <div id=\"import\"></div>\n                    <div class=\"importmessage\" id=\"importmessagesuccess\" data-l10n-id=\"pad.importExport.importSuccessful\"></div>\n                    <div class=\"importformdiv\" id=\"importformsubmitdiv\">\n                        <span class=\"nowrap\">\n                            <input type=\"submit\" name=\"submit\" value=\"Import Now\" disabled=\"disabled\" id=\"importsubmitinput\">\n                            <div alt=\"\" id=\"importstatusball\" class=\"loadingAnimation\" align=\"top\"></div>\n                        </span>\n                    </div>\n                </form>\n                \n            </div>\n            <div class=\"column\" id=\"exportColumn\">\n                <h2 data-l10n-id=\"pad.importExport.export\"></h2>\n                \n                <a id=\"exportetherpada\" target=\"_blank\" class=\"exportlink\"><div class=\"exporttype\" id=\"exportetherpad\" data-l10n-id=\"pad.importExport.exportetherpad\"></div></a>\n                <a id=\"exporthtmla\" target=\"_blank\" class=\"exportlink\"><div class=\"exporttype\" id=\"exporthtml\" data-l10n-id=\"pad.importExport.exporthtml\"></div></a>\n                <a id=\"exportplaina\" target=\"_blank\" class=\"exportlink\"><div class=\"exporttype\" id=\"exportplain\" data-l10n-id=\"pad.importExport.exportplain\"></div></a>\n                <a id=\"exportworda\" target=\"_blank\" class=\"exportlink\"><div class=\"exporttype\" id=\"exportword\" data-l10n-id=\"pad.importExport.exportword\"></div></a>\n                <a id=\"exportpdfa\" target=\"_blank\" class=\"exportlink\"><div class=\"exporttype\" id=\"exportpdf\" data-l10n-id=\"pad.importExport.exportpdf\"></div></a>\n                <a id=\"exportopena\" target=\"_blank\" class=\"exportlink\"><div class=\"exporttype\" id=\"exportopen\" data-l10n-id=\"pad.importExport.exportopen\"></div></a>\n                \n            </div>\n        </div>\n\n        <div id=\"connectivity\" class=\"popup\">\n            \n                <div class=\"connected visible\">\n                  <h2 data-l10n-id=\"pad.modals.connected\"></h2>\n                </div>\n                <div class=\"reconnecting\">\n                  <h1 data-l10n-id=\"pad.modals.reconnecting\"></h1>\n                  <p class='loadingAnimation'></p>\n                </div>\n                <div class=\"userdup\">\n                  <h1 data-l10n-id=\"pad.modals.userdup\"></h1>\n                  <h2 data-l10n-id=\"pad.modals.userdup.explanation\"></h2>\n                  <p data-l10n-id=\"pad.modals.userdup.advice\"></p>\n                  <button id=\"forcereconnect\" data-l10n-id=\"pad.modals.forcereconnect\"></button>\n                </div>\n                <div class=\"unauth\">\n                  <h1 data-l10n-id=\"pad.modals.unauth\"></h1>\n                  <p data-l10n-id=\"pad.modals.unauth.explanation\"></p>\n                  <button id=\"forcereconnect\" data-l10n-id=\"pad.modals.forcereconnect\"></button>\n                </div>\n                <div class=\"looping\">\n                  <h1 data-l10n-id=\"pad.modals.disconnected\"></h1>\n                  <h2 data-l10n-id=\"pad.modals.looping.explanation\"></h2>\n                  <p data-l10n-id=\"pad.modals.looping.cause\"></p>\n                </div>\n                <div class=\"initsocketfail\">\n                  <h1 data-l10n-id=\"pad.modals.initsocketfail\"></h1>\n                  <h2 data-l10n-id=\"pad.modals.initsocketfail.explanation\"></h2>\n                  <p data-l10n-id=\"pad.modals.initsocketfail.cause\"></p>\n                </div>\n                <div class=\"slowcommit\">\n                  <h1 data-l10n-id=\"pad.modals.disconnected\"></h1>\n                  <h2 data-l10n-id=\"pad.modals.slowcommit.explanation\"></h2>\n                  <p data-l10n-id=\"pad.modals.slowcommit.cause\"></p>\n                  <button id=\"forcereconnect\" data-l10n-id=\"pad.modals.forcereconnect\"></button>\n                </div>\n                <div class=\"badChangeset\">\n                  <h1 data-l10n-id=\"pad.modals.disconnected\"></h1>\n                  <h2 data-l10n-id=\"pad.modals.badChangeset.explanation\"></h2>\n                  <p data-l10n-id=\"pad.modals.badChangeset.cause\"></p>\n                  <button id=\"forcereconnect\" data-l10n-id=\"pad.modals.forcereconnect\"></button>\n                </div>\n                <div class=\"corruptPad\">\n                  <h1 data-l10n-id=\"pad.modals.disconnected\"></h1>\n                  <h2 data-l10n-id=\"pad.modals.corruptPad.explanation\"></h2>\n                  <p data-l10n-id=\"pad.modals.corruptPad.cause\"></p>\n                </div>\n                <div class=\"deleted\">\n                  <h1 data-l10n-id=\"pad.modals.deleted\"></h1>\n                  <p data-l10n-id=\"pad.modals.deleted.explanation\"></p>\n                </div>\n                <div class=\"disconnected\">\n                  \n                  <h1 data-l10n-id=\"pad.modals.disconnected\"></h1>\n                  <h2 data-l10n-id=\"pad.modals.disconnected.explanation\"></h2>\n                  <p data-l10n-id=\"pad.modals.disconnected.cause\"></p>\n                  <button id=\"forcereconnect\" data-l10n-id=\"pad.modals.forcereconnect\"></button>\n                  \n                </div>\n                <form id=\"reconnectform\" method=\"post\" action=\"/ep/pad/reconnect\" accept-charset=\"UTF-8\" style=\"display: none;\">\n                    <input type=\"hidden\" class=\"padId\" name=\"padId\">\n                    <input type=\"hidden\" class=\"diagnosticInfo\" name=\"diagnosticInfo\">\n                    <input type=\"hidden\" class=\"missedChanges\" name=\"missedChanges\">\n                </form>\n            \n        </div>\n\n        <div id=\"embed\" class=\"popup\">\n            \n            <div id=\"embedreadonly\" class=\"right acl-write\">\n                <input type=\"checkbox\" id=\"readonlyinput\">\n                <label for=\"readonlyinput\" data-l10n-id=\"pad.share.readonly\"></label>\n            </div>\n            <h1 data-l10n-id=\"pad.share\"></h1>\n            <div id=\"linkcode\">\n                <h2 data-l10n-id=\"pad.share.link\"></h2>\n                <input id=\"linkinput\" type=\"text\" value=\"\" onclick=\"this.select()\">\n            </div>\n            <br>\n            <div id=\"embedcode\">\n                <h2 data-l10n-id=\"pad.share.emebdcode\"></h2>\n                <input id=\"embedinput\" type=\"text\" value=\"\" onclick=\"this.select()\">\n            </div>\n            \n        </div>\n\n        <div id=\"chaticon\" onclick=\"chat.show();return false;\" title=\"Chat (Alt C)\">\n            <span id=\"chatlabel\" data-l10n-id=\"pad.chat\"></span>\n            <span class=\"buttonicon buttonicon-chat\"></span>\n            <span id=\"chatcounter\">0</span>\n        </div>\n\n        <div id=\"chatbox\">\n            <div id=\"titlebar\"><span id =\"titlelabel\" data-l10n-id=\"pad.chat\"></span>\n              <a id=\"titlecross\" onClick=\"chat.hide();return false;\">-&nbsp;</a>\n              <a id=\"titlesticky\" onClick=\"chat.stickToScreen(true);$('#options-stickychat').prop('checked', true);return false;\" title=\"Stick chat to screen\">█&nbsp;&nbsp;</a>\n            </div>\n            <div id=\"chattext\" class=\"authorColors\" aria-live=\"polite\" aria-relevant=\"additions removals text\" role=\"log\" aria-atomic=\"false\">\n                <div alt=\"loading..\" id=\"chatloadmessagesball\" class=\"chatloadmessages loadingAnimation\" align=\"top\"></div>\n                <button id=\"chatloadmessagesbutton\" class=\"chatloadmessages\" data-l10n-id=\"pad.chat.loadmessages\"></button>\n            </div>\n            <div id=\"chatinputbox\">\n                <form>\n                    <input id=\"chatinput\" type=\"text\" maxlength=\"999\">\n                </form>\n            </div>\n        </div>\n\n        <div id=\"focusprotector\">&nbsp;</div>\n\n        \n\n        \n        <script type=\"text/javascript\">\n            (function() {\n              // Display errors on page load to the user\n              // (Gets overridden by padutils.setupGlobalExceptionHandler)\n              var originalHandler = window.onerror;\n              window.onerror = function(msg, url, line) {\n                var box   = document.getElementById('editorloadingbox');\n                box.innerHTML = '<p><b>An error occured while loading the pad</b></p>'\n                              + '<p><b>'+msg+'</b> '\n                              + '<small>in '+ url +' (line '+ line +')</small></p>';\n                // call original error handler\n                if(typeof(originalHandler) == 'function') originalHandler.call(null, arguments);\n              };\n            })();\n        </script>\n\n        <script type=\"text/javascript\" src=\"../static/js/require-kernel.js\"></script>\n        <script type=\"text/javascript\" src=\"../socket.io/socket.io.js\"></script>\n\n        <!-- Include base packages manually (this help with debugging) -->\n        <script type=\"text/javascript\" src=\"../javascripts/lib/ep_etherpad-lite/static/js/pad.js?callback=require.define\"></script>\n        <script type=\"text/javascript\" src=\"../javascripts/lib/ep_etherpad-lite/static/js/ace2_common.js?callback=require.define\"></script>\n\n        \n        <script type=\"text/javascript\" src=\"../static/custom/pad.js\"></script>\n        \n\n        <!-- Bootstrap page -->\n        <script type=\"text/javascript\">\n            var clientVars = {};\n            (function () {\n              var pathComponents = location.pathname.split('/');\n\n              // Strip 'p' and the padname from the pathname and set as baseURL\n              var baseURL = pathComponents.slice(0,pathComponents.length-2).join('/') + '/';\n\n              require.setRootURI(baseURL + \"javascripts/src\");\n              require.setLibraryURI(baseURL + \"javascripts/lib\");\n              require.setGlobalKeyPath(\"require\");\n\n              $ = jQuery = require('ep_etherpad-lite/static/js/rjquery').jQuery; // Expose jQuery #HACK\n              browser = require('ep_etherpad-lite/static/js/browser').browser;\n              if ((!browser.msie) && (!(browser.mozilla && browser.version.indexOf(\"1.8.\") == 0))) {\n                document.domain = document.domain; // for comet\n              }\n\n              var plugins = require('ep_etherpad-lite/static/js/pluginfw/client_plugins');\n              var hooks = require('ep_etherpad-lite/static/js/pluginfw/hooks');\n\n              plugins.baseURL = baseURL;\n              plugins.update(function () {\n                hooks.plugins = plugins;\n\n                // Call documentReady hook\n                $(function() {\n                  hooks.aCallAll('documentReady');\n                });\n\n                var pad = require('ep_etherpad-lite/static/js/pad');\n                pad.baseURL = baseURL;\n                pad.init();\n              });\n\n              /* TODO: These globals shouldn't exist. */\n              pad = require('ep_etherpad-lite/static/js/pad').pad;\n              chat = require('ep_etherpad-lite/static/js/chat').chat;\n              padeditbar = require('ep_etherpad-lite/static/js/pad_editbar').padeditbar;\n              padimpexp = require('ep_etherpad-lite/static/js/pad_impexp').padimpexp;\n            }());\n        </script>\n        \n</html>\n"
          },
          "redirectURL": "",
          "headersSize": 285,
          "bodySize": 33427,
          "_transferSize": 33712
        },
        "cache": {},
        "timings": {
          "blocked": 2.14299999970535,
          "dns": -1,
          "connect": -1,
          "send": 0.09399999999005004,
          "wait": 23.3390000003055,
          "receive": 3.087999999479539,
          "ssl": -1
        },
        "connection": "3611",
        "pageref": "page_2"
      },
      {
        "startedDateTime": "2015-06-09T16:53:03.677Z",
        "time": 567.3759999999675,
        "request": {
          "method": "GET",
          "url": "http://localhost:9001/static/css/pad.css",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "DNT",
              "value": "1"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, sdch"
            },
            {
              "name": "Host",
              "value": "localhost:9001"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.8,de;q=0.6"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.81 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "text/css,*/*;q=0.1"
            },
            {
              "name": "Referer",
              "value": "http://localhost:9001/p/bla"
            },
            {
              "name": "Cookie",
              "value": "token=t.ltaoBcvzTd2Qbc9Uqjas; express_sid=s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "If-Modified-Since",
              "value": "Mon, 01 Jun 2015 14:19:04 GMT"
            }
          ],
          "queryString": [],
          "cookies": [
            {
              "name": "token",
              "value": "t.ltaoBcvzTd2Qbc9Uqjas",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "express_sid",
              "value": "s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo",
              "expires": null,
              "httpOnly": false,
              "secure": false
            }
          ],
          "headersSize": 548,
          "bodySize": 0
        },
        "response": {
          "status": 304,
          "statusText": "Not Modified",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "date",
              "value": "Tue, 09 Jun 2015 16:53:04 GMT"
            },
            {
              "name": "last-modified",
              "value": "Mon, 01 Jun 2015 14:19:04 GMT"
            },
            {
              "name": "Server",
              "value": "Etherpad d11c92c (http://etherpad.org)"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            },
            {
              "name": "cache-control",
              "value": "max-age=21600"
            },
            {
              "name": "X-UA-Compatible",
              "value": "IE=Edge,chrome=1"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "expires",
              "value": "Tue, 09 Jun 2015 22:53:04 GMT"
            }
          ],
          "cookies": [],
          "content": {
            "size": 18518,
            "mimeType": "text/css",
            "text": ".toolbar ul,iframe{position:absolute}#myusernameform .editactive,#myusernameform .editempty,.usertdname input.editactive,.usertdname input.editempty{background:#fff;border-top:1px solid #c3c3c3;border-left:1px solid #c3c3c3;border-bottom:1px solid #e6e6e6;border-right:1px solid #e6e6e6}#chatcounter,#chatlabel,#otheruserstable td,.buttonicon{vertical-align:middle}#chaticon a,#chatlabel,#titlecross,#titlesticky,.exporttype,.popup a,.toolbar ul li a{text-decoration:none}#chatlabel,#nootherusers,#titlebar,.throbbold{font-weight:700}*,body,html,p{margin:0;padding:0}.clear{clear:both}html{font-size:62.5%;width:100%}body,textarea{font-family:Helvetica,Arial,sans-serif}.readonly .acl-write{display:none}#users{background:-webkit-linear-gradient(#F7F7F7,#EEE);background:-moz-linear-gradient(#F7F7F7,#EEE);background:-ms-linear-gradient(#F7F7F7,#EEE);background:-o-linear-gradient(#F7F7F7,#EEE);background:linear-gradient(#F7F7F7,#EEE);width:160px;color:#fff;padding:5px;border-radius:0 0 6px 6px;border:1px solid #ccc}#users,.toolbar{background:#f7f7f7}#otherusers{max-height:400px;overflow:auto}a img{border:0}.toolbar{background:-webkit-linear-gradient(#f7f7f7,#f1f1f1 80%);background:-moz-linear-gradient(#f7f7f7,#f1f1f1 80%);background:-o-linear-gradient(#f7f7f7,#f1f1f1 80%);background:-ms-linear-gradient(#f7f7f7,#f1f1f1 80%);background:linear-gradient(#f7f7f7,#f1f1f1 80%);border-bottom:1px solid #ccc;overflow:hidden;padding-top:4px;width:100%;white-space:nowrap;height:32px}.toolbar ul{list-style:none;padding-right:3px;padding-left:1px;z-index:2;overflow:hidden;float:left}.toolbar ul li{float:left;margin-left:2px;height:32px}.toolbar ul li.separator{border:inherit;background:inherit;visibility:hidden;width:0;padding:5px;height:22px}.toolbar ul li a:hover{text-decoration:none;background:#fff;background:-webkit-linear-gradient(#f4f4f4,#e4e4e4);background:-moz-linear-gradient(#f4f4f4,#e4e4e4);background:-o-linear-gradient(#f4f4f4,#e4e4e4);background:-ms-linear-gradient(#f4f4f4,#e4e4e4);background:linear-gradient(#f4f4f4,#e4e4e4)}.toolbar ul li .activeButton,.toolbar ul li a:active{background:#eee;background:-webkit-linear-gradient(#ddd,#fff);background:-moz-linear-gradient(#ddd,#fff);background:-o-linear-gradient(#ddd,#fff);background:-ms-linear-gradient(#ddd,#fff);background:linear-gradient(#ddd,#fff);-webkit-box-shadow:0 0 8px rgba(0,0,0,.1)inset;-moz-box-shadow:0 0 8px rgba(0,0,0,.1)inset;box-shadow:0 0 8px rgba(0,0,0,.1)inset}.toolbar ul li a{background:#fff;background:-webkit-linear-gradient(#fff,#f0f0f0);background:-moz-linear-gradient(#fff,#f0f0f0);background:-o-linear-gradient(#fff,#f0f0f0);background:-ms-linear-gradient(#fff,#f0f0f0);background:linear-gradient(#fff,#f0f0f0);border:1px solid #ccc;border-radius:3px;color:#ccc;cursor:pointer;display:inline-block;min-height:18px;overflow:hidden;padding:4px 5px;text-align:center;min-width:18px}#connectivity *,#editbar,#mystatusedit,table#otheruserstable{display:none}.toolbar ul li a .buttonicon{position:relative;top:1px}.toolbar ul li a .buttontext{font-size:14px;border:none;background:0 0;margin-top:1px;color:#666}.buttontext::-moz-focus-inner{padding:0;border:0}.buttontext:focus{border:1px solid #666!important}.toolbar ul li a.grouped-left{border-radius:3px 0 0 3px}.toolbar ul li a.grouped-middle{border-radius:0;margin-left:-2px;border-left:0}.toolbar ul li a.grouped-right{border-radius:0 3px 3px 0;margin-left:-2px;border-left:0}.toolbar ul li a.selected{background:#eee!important;background:-webkit-linear-gradient(#EEE,#F0F0F0)!important;background:-moz-linear-gradient(#EEE,#F0F0F0)!important;background:-o-linear-gradient(#EEE,#F0F0F0)!important;background:-ms-linear-gradient(#EEE,#F0F0F0)!important;background:linear-gradient(#EEE,#F0F0F0)!important}.toolbar ul li select{background:#fff;padding:4px;line-height:22px;height:28px;border-radius:3px;border:1px solid #ccc;outline:0}.toolbar ul.menu_left{left:0;right:250px}.toolbar ul.menu_right{right:0}li[data-key=showusers]>a{min-width:30px;text-align:left}li[data-key=showusers]>a #online_count{color:#777;font-size:11px;position:relative;top:2px;padding-left:2px}#chatbox,#chatinputbox,#chattext,#editorcontainer,#editorcontainerbox,#editorloadingbox,#mycolorpicker,#mycolorpickercancel,#mycolorpickerpreview,#mycolorpickersave,#padeditor,#padmain,#padpage,.toolbar #overlay{position:absolute}#editorcontainer{top:37px;left:0;right:0;bottom:0;z-index:1}#editorcontainer iframe{height:100%;width:100%;padding:0;margin:0;left:0}#editorloadingbox{padding-top:100px;padding-bottom:100px;font-size:2.5em;color:#aaa;text-align:center;width:100%;height:30px;z-index:100}#editorloadingbox .passForm,#editorloadingbox button,#editorloadingbox input{padding:10px}.loadingAnimation{-webkit-animation:loadingAnimation 2s infinite linear;animation:loadingAnimation 2s infinite linear;font-family:fontawesome-etherpad;font-size:24px;z-index:150;width:25px;height:25px}.loadingAnimation:before{content:\"\\e80e\"}@-webkit-keyframes loadingAnimation{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes loadingAnimation{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}#editorcontainerbox{bottom:0;top:0;width:100%}#padpage{top:0;bottom:0;width:100%}#padmain{margin-top:0;top:63px!important;left:0;right:0;bottom:0;zoom:1}#padeditor{bottom:0;left:0;right:0;top:0;zoom:1}#myswatchbox{position:absolute;left:5px;top:5px;width:24px;height:24px;background:0 0;cursor:pointer}#myswatch{width:100%;height:100%;background:0 0}#mycolorpicker{width:232px;height:265px;left:-250px;top:0;z-index:101;display:none;border-radius:0 0 6px 6px;background:#f7f7f7;border:1px solid #ccc;border-top:0;padding-left:10px;padding-top:10px}#mycolorpickersave{left:10px;font-weight:700}#mycolorpickercancel{left:85px}#mycolorpickercancel,#mycolorpickersave{background:#fff;background:-webkit-linear-gradient(#fff,#ccc);background:-moz-linear-gradient(#fff,#ccc);background:-o-linear-gradient(#fff,#ccc);background:-ms-linear-gradient(#fff,#ccc);background:linear-gradient(#fff,#ccc);border:1px solid #ccc;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-size:12px;cursor:pointer;color:#000;overflow:hidden;padding:4px;top:240px;text-align:center;width:60px}#titlecross,#titlesticky{color:#555;text-align:right}#chatbox,#chaticon{border-top-right-radius:5px;border-top-left-radius:5px}#mycolorpickerpreview{left:207px;top:240px;width:16px;height:16px;padding:4px;overflow:hidden;color:#fff;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px}#myusernameform{margin-left:30px}#myusernameedit{font-size:1.3em;padding:3px;height:18px;margin:0;width:122px;background:0 0}#myusernameform input.editable{border:1px solid #444}#myuser .myusernameedithoverable:hover{background:#fff;color:#000}#mystatusform{margin-left:35px;margin-top:5px}#mystatusedit{font-size:1.2em;color:#777;font-style:italic;padding:2px;height:14px;margin:0;border:1px solid #bbb;width:199px;background:0 0}#myusernameform .editactive,#myusernameform .editempty{color:#000}#myusernameform .editempty{color:#333}#myswatchbox,#myusernameedit,#otheruserstable .swatch{border:1px solid #ccc!important;color:#333}#nootherusers{padding:10px;font-size:1.2em;color:#eee}#nootherusers a{color:#3C88FF}#otheruserstable td{height:26px;padding:0 2px;color:#333}#otheruserstable .swatch{border:1px solid #000;width:13px;height:13px;overflow:hidden;margin:0 4px;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.usertdswatch{width:1%}.usertdname{font-size:1.3em;color:#444}.usertdstatus{font-size:1.1em;font-style:italic;color:#999}.usertdactivity{font-size:1.1em;color:#777}.usertdname input{border:1px solid #bbb;width:80px;padding:2px}#chatbox,#chaticon{border-right:1px solid #999;border-top:1px solid #999;border-left:1px solid #999}.usertdname input.editempty{color:#888;font-style:italic}#connectivity{z-index:600!important}#connectivity .visible,#connectivity .visible *{display:block}#reconnect_form button{font-size:12pt;padding:5px}.toolbar #overlay{z-index:500;display:none;background-repeat:repeat-both;width:100%;height:inherit;left:0;top:0}* html #overlay,.exporttype{background-repeat:no-repeat}* html #overlay{-ms-filter:\"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)\";filter:alpha(opacity=100);opacity:1;background-image:none}#chatbox{bottom:0;right:20px;width:180px;height:200px;z-index:400;background-color:#f7f7f7;padding:3px 3px 10px;display:none}#chaticon,#chattext{background-color:#fff}#chattext{border:1px solid #fff;-ms-overflow-y:scroll;overflow-y:scroll;font-size:12px;right:0;left:0;top:25px;bottom:25px;z-index:1002}#chattext p{padding:3px;-ms-overflow-x:hidden;overflow-x:hidden;word-wrap:break-word}.chatloadmessages{margin:5px auto;display:block}#chatloadmessagesbutton{line-height:1.8em}#chatloadmessagesball{display:none}#chatinputbox{padding:3px 2px;bottom:0;right:0;left:3px}#chatlabel{font-size:13px;color:#555;margin-right:3px}#chatinput{border:1px solid #BBB;width:100%;float:right}#chaticon{z-index:400;position:fixed;bottom:0;right:20px;padding:5px;cursor:pointer}.chatAndUsers,.chatAndUsersChat,.stickyChat{border-left:1px solid #ccc!important}#chatcounter{color:#777;font-size:10px}#titlebar{line-height:16px;color:#555;position:relative;bottom:2px}#titlelabel{font-size:13px;margin:4px 0 0 4px;position:absolute}#titlesticky{font-size:10px;padding-top:2px;float:right;cursor:pointer}#titlecross{font-size:25px;float:right;cursor:pointer}.time{float:right;color:#333;font-style:italic;font-size:10px;margin-left:3px;margin-right:3px;margin-top:2px}#exportColumn{margin-top:20px}.exporttype{margin-top:4px;color:#333;padding-bottom:2px;display:inline;padding-left:5px;font-family:Arial}.buttonicon,.exportlink{font-family:fontawesome-etherpad}.exportlink{display:block;margin:5px;color:#666}#chatthrob,#importmessageabiword,#importmessagesuccess,#importstatusball{display:none}#exporthtmla:before{content:\"\\e826\"}#exportplaina:before{content:\"\\e802\"}#exportworda:before{content:\"\\e804\"}#exportpdfa:before{content:\"\\e803\"}#exportetherpada:before{content:\"\\e806\"}#exportopena:before{content:\"\\e805\"}#importmessageabiword{color:#900;font-size:small}#importsubmitinput{margin-top:12px;padding:2px 4px}#chatthrob{position:absolute;bottom:40px;font-size:14px;width:150px;height:40px;right:20px;z-index:200;color:#fff;background-color:#000;background-color:rgba(0,0,0,.7);padding:10px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;-ms-filter:\"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)\";filter:alpha(opacity=80);opacity:.8}.buttonicon{width:16px;height:16px;display:inline-block;border:none;padding:0;background:0 0;font-size:15px;font-style:normal;font-weight:400;color:#666;cursor:pointer}[class*=\" icon-\"]:before,[class^=icon-]:before,[data-icon]:before{font-weight:400!important;font-family:fontawesome-etherpad!important;line-height:1;font-style:normal!important}.buttonicon::-moz-focus-inner{padding:0;border:0}.buttonicon:focus{border:1px solid #666}.popup,.popup select{border:1px solid #ccc}.buttonicon-bold:before{content:\"\\e81c\"}.buttonicon-italic:before{content:\"\\e81d\"}.buttonicon-underline:before{content:\"\\e817\"}.buttonicon-strikethrough:before{content:\"\\e818\"}.buttonicon-insertorderedlist:before{content:\"\\e816\"}.buttonicon-insertunorderedlist:before{content:\"\\e815\"}.buttonicon-indent:before{content:\"\\e814\"}.buttonicon-outdent:before{content:\"\\e813\"}.buttonicon-undo:before{content:\"\\e823\"}.buttonicon-redo:before{content:\"\\e824\"}.buttonicon-clearauthorship:before{content:\"\\e80d\"}.buttonicon-settings:before{content:\"\\e833\"}.buttonicon-import_export:before{content:\"\\e834\"}.buttonicon-embed:before{content:\"\\e827\"}.buttonicon-history:before{content:\"\\e837\"}.buttonicon-chat:before{content:\"\\e829\"}.buttonicon-showusers:before{content:\"\\e808\"}.buttonicon-savedRevision:before{content:\"\\e835\"}#focusprotector{z-index:100;position:absolute;bottom:0;top:0;left:0;right:0;background-color:#fff;-ms-filter:\"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)\";filter:alpha(opacity=1);opacity:.01;display:none}.rtl{direction:RTL}input[type=checkbox]{vertical-align:-1px}.right{float:right}.popup{font-size:12px;width:80%;max-width:500px;padding:10px;border-radius:0 0 6px 6px;border-top:none;background:#f7f7f7;background:-webkit-linear-gradient(#F7F7F7,#EEE);background:-moz-linear-gradient(#F7F7F7,#EEE);background:-ms-linear-gradient(#F7F7F7,#EEE);background:-o-linear-gradient(#F7F7F7,#EEE);background:linear-gradient(#F7F7F7,#EEE);-webkit-box-shadow:0 0 8px #888;-moz-box-shadow:0 0 8px #888;box-shadow:0 2px 4px #ddd;color:#222}.popup input[type=text]{width:100%;padding:5px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:10px}#users input[type=text],.popup input[type=text]{outline:0}.popup button{padding:5px;font-size:14px}.popup h1{color:#555;font-size:18px}.popup h2{color:#777;font-size:15px}.popup p{margin:5px 0}.popup select{background:#fff;padding:2px;height:24px;border-radius:3px;outline:0;width:120px}.chatAndUsers,.chatAndUsersChat,.stickyChat{border:none!important}.chatAndUsers,.stickyChat{border-radius:0!important}.column{float:left;width:50%}#connectivity,#embed,#import_export,#settings,#users{position:absolute;top:38px;right:20px;display:none;z-index:500}.chatAndUsers,.chatAndUsersChat{width:182px!important;right:0!important}.stickyChat{background-color:#f1f1f1!important;right:0!important;top:37px;-webkit-border-radius:0!important;-moz-border-radius:0!important;height:auto!important;width:185px!important}.chatAndUsers{display:block!important;border-bottom:1px solid #ccc!important;height:155px!important}#noCookie,#passwordRequired,#permissionDenied,#wrongPassword,.chatAndUsersChat>div>#titlecross{display:none}.chatAndUsers>#otherusers{max-height:100px;overflow-y:auto}.chatAndUsersChat{bottom:0!important;margin:165px 0 0;padding:5px!important}@media screen and (max-width:600px){.toolbar ul li.separator{display:none}.toolbar ul li a{padding:4px 1px}.toolbar ul.menu_left{left:0;right:150px}}@media all and (max-width:400px){#gritter-notice-wrapper{max-height:172px;overflow:hidden;width:100%!important;background-color:#ccc;bottom:20px;left:0;right:0;color:#000}.gritter-close{display:block!important;left:auto!important;right:5px}#gritter-notice-wrapper.bottom-right{left:0!important;bottom:30px!important;right:0!important}.gritter-item p{color:#000;font-size:16px}.gritter-title{text-shadow:none!important;color:#000}.gritter-item{padding:2px 11px 8px 4px}.gritter-item-wrapper{margin:0}.gritter-item-wrapper>div{background:0 0}#editorcontainer{top:68px}#editbar{height:62px}.toolbar ul.menu_left{left:0;right:100px}.toolbar ul.menu_right{right:0}.popup{width:100%;max-width:300px;top:72px!important}}@media only screen and (min-device-width:320px)and (max-device-width:720px){#users{top:auto;right:0!important;bottom:33px;border-radius:0!important;height:55px!important;overflow:auto}#mycolorpicker{left:-73px;top:auto!important;bottom:33px!important}#editorcontainer{margin-bottom:33px}.toolbar ul.menu_left{right:0}.toolbar ul.menu_right{background:#f7f7f7;background:-webkit-linear-gradient(#f7f7f7,#f1f1f1 80%);background:-moz-linear-gradient(#f7f7f7,#f1f1f1 80%);background:-o-linear-gradient(#f7f7f7,#f1f1f1 80%);background:-ms-linear-gradient(#f7f7f7,#f1f1f1 80%);background:linear-gradient(#f7f7f7,#f1f1f1 80%);width:100%;right:0!important;overflow:hidden;height:32px;position:fixed;bottom:0;border-top:1px solid #ccc}.toolbar ul.menu_right>li:last-child{float:right}.toolbar ul.menu_right>li a{border-radius:0;border:none;background:0 0;margin:0;padding:8px}.toolbar ul li a.selected{background:0 0!important}li[data-key=showusers]>a{margin-top:-10px;padding-top:2px!important;line-height:20px;vertical-align:top!important}#chaticon{position:absolute;right:48px}.popup{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;box-sizing:border-box;width:100%}#connectivity,#embed,#import_export,#settings{top:auto;left:0;bottom:33px;right:0}.toolbar ul li .separator{display:none}#online_count{line-height:24px}#chatbox{position:absolute;bottom:33px!important;margin:65px 0 0}#gritter-notice-wrapper{bottom:43px!important;right:10px!important}}#gritter-notice-wrapper{position:fixed;top:20px;right:20px;width:301px;z-index:9999;background-color:#666}#gritter-notice-wrapper.bottom-right{top:auto;left:auto;bottom:20px;right:20px}.gritter-item-wrapper{position:relative;margin:0 0 10px}.gritter-top{height:10px}.hover .gritter-top{background-position:right -30px}.gritter-bottom{height:8px;margin:0}.hover .gritter-bottom{background-position:bottom right}.gritter-item{display:block;color:#eee;padding:2px 11px 8px;font-size:11px;font-family:verdana}.hover .gritter-item{background-position:right -40px}.gritter-item p{padding:0;margin:0}.gritter-close{display:none;position:absolute;top:5px;left:3px;cursor:pointer;width:30px;height:30px}.gritter-title{font-size:14px;font-weight:700;padding:0 0 7px;display:block;text-shadow:1px 1px 0 #000}.gritter-image{width:48px;height:48px;float:left}.gritter-with-image,.gritter-without-image{padding:0 0 5px}.gritter-with-image{width:220px;float:right}.gritter-close,.gritter-light .gritter-bottom,.gritter-light .gritter-item,.gritter-light .gritter-top{color:#222}.gritter-light .gritter-title{text-shadow:none}@font-face{font-family:opendyslexic;src:url(../../static/font/opendyslexic.otf)format(\"opentype\")}@font-face{font-family:fontawesome-etherpad;src:url(../font/fontawesome-etherpad.eot);src:url(../font/fontawesome-etherpad.eot?#iefix)format(\"embedded-opentype\"),url(../font/fontawesome-etherpad.woff)format(\"woff\"),url(../font/fontawesome-etherpad.ttf)format(\"truetype\"),url(../font/fontawesome-etherpad.svg#fontawesome-etherpad)format(\"svg\");font-weight:400;font-style:normal}[data-icon]:before{content:attr(data-icon);font-variant:normal!important;text-transform:none!important;speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}[class*=\" icon-\"]:before,[class^=icon-]:before{font-variant:normal!important;text-transform:none!important;speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.hideControlsEditor{top:0!important}.hideControlsEditbar{display:none!important}"
          },
          "redirectURL": "",
          "headersSize": 312,
          "bodySize": 0,
          "_transferSize": 312
        },
        "cache": {},
        "timings": {
          "blocked": 560.339000000568,
          "dns": -1,
          "connect": -1,
          "send": 0.10500000007493782,
          "wait": 2.789999999549991,
          "receive": 4.141999999774498,
          "ssl": -1
        },
        "connection": "3611",
        "pageref": "page_2"
      },
      {
        "startedDateTime": "2015-06-09T16:53:03.677Z",
        "time": 578.9940000004208,
        "request": {
          "method": "GET",
          "url": "http://localhost:9001/static/custom/pad.css",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "DNT",
              "value": "1"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, sdch"
            },
            {
              "name": "Host",
              "value": "localhost:9001"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.8,de;q=0.6"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.81 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "text/css,*/*;q=0.1"
            },
            {
              "name": "Referer",
              "value": "http://localhost:9001/p/bla"
            },
            {
              "name": "Cookie",
              "value": "token=t.ltaoBcvzTd2Qbc9Uqjas; express_sid=s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "If-Modified-Since",
              "value": "Mon, 01 Jun 2015 14:22:49 GMT"
            }
          ],
          "queryString": [],
          "cookies": [
            {
              "name": "token",
              "value": "t.ltaoBcvzTd2Qbc9Uqjas",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "express_sid",
              "value": "s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo",
              "expires": null,
              "httpOnly": false,
              "secure": false
            }
          ],
          "headersSize": 551,
          "bodySize": 0
        },
        "response": {
          "status": 304,
          "statusText": "Not Modified",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "date",
              "value": "Tue, 09 Jun 2015 16:53:04 GMT"
            },
            {
              "name": "last-modified",
              "value": "Mon, 01 Jun 2015 14:22:49 GMT"
            },
            {
              "name": "Server",
              "value": "Etherpad d11c92c (http://etherpad.org)"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            },
            {
              "name": "cache-control",
              "value": "max-age=21600"
            },
            {
              "name": "X-UA-Compatible",
              "value": "IE=Edge,chrome=1"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "expires",
              "value": "Tue, 09 Jun 2015 22:53:04 GMT"
            }
          ],
          "cookies": [],
          "content": {
            "size": 0,
            "mimeType": "text/css",
            "text": ""
          },
          "redirectURL": "",
          "headersSize": 312,
          "bodySize": 0,
          "_transferSize": 312
        },
        "cache": {},
        "timings": {
          "blocked": 574.155000000246,
          "dns": -1,
          "connect": -1,
          "send": 0.13099999978305732,
          "wait": 2.7049999998779413,
          "receive": 2.0030000005137936,
          "ssl": -1
        },
        "connection": "3611",
        "pageref": "page_2"
      },
      {
        "startedDateTime": "2015-06-09T16:53:03.677Z",
        "time": 0,
        "request": {
          "method": "GET",
          "url": "http://localhost:9001/static/js/html10n.js",
          "httpVersion": "unknown",
          "headers": [
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.81 Safari/537.36"
            }
          ],
          "queryString": [],
          "cookies": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "unknown",
          "headers": [
            {
              "name": "date",
              "value": "Tue, 09 Jun 2015 16:47:41 GMT"
            },
            {
              "name": "last-modified",
              "value": "Mon, 01 Jun 2015 14:19:04 GMT"
            },
            {
              "name": "Server",
              "value": "Etherpad d11c92c (http://etherpad.org)"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            },
            {
              "name": "Content-Type",
              "value": "text/javascript; charset=utf-8"
            },
            {
              "name": "cache-control",
              "value": "max-age=21600"
            },
            {
              "name": "X-UA-Compatible",
              "value": "IE=Edge,chrome=1"
            },
            {
              "name": "expires",
              "value": "Tue, 09 Jun 2015 22:46:10 GMT"
            }
          ],
          "cookies": [],
          "content": {
            "size": 25957,
            "mimeType": "text/javascript",
            "text": "/**\n * Copyright (c) 2012 Marcel Klehr\n * Copyright (c) 2011-2012 Fabien Cazenave, Mozilla\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to\n * deal in the Software without restriction, including without limitation the\n * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n * sell copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\nwindow.html10n = (function(window, document, undefined) {\n  \n  // fix console\n  (function() {\n    var noop = function() {};\n    var names = [\"log\", \"debug\", \"info\", \"warn\", \"error\", \"assert\", \"dir\", \"dirxml\", \"group\", \"groupEnd\", \"time\", \"timeEnd\", \"count\", \"trace\", \"profile\", \"profileEnd\"];\n    var console = (window.console = window.console || {});\n    for (var i = 0; i < names.length; ++i) {\n      if (!console[names[i]]) {\n        console[names[i]] = noop;\n      }\n    }\n  }());\n\n  // fix Array#forEach in IE\n  // taken from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach\n  if (!Array.prototype.forEach) {\n    Array.prototype.forEach = function(fn, scope) {\n      for(var i = 0, len = this.length; i < len; ++i) {\n        if (i in this) {\n          fn.call(scope, this[i], i, this);\n        }\n      }\n    };\n  }\n\n  // fix Array#indexOf in, guess what, IE! <3\n  // taken from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf\n  if (!Array.prototype.indexOf) {\n    Array.prototype.indexOf = function (searchElement /*, fromIndex */ ) {\n      \"use strict\";\n      if (this == null) {\n        throw new TypeError();\n      }\n      var t = Object(this);\n      var len = t.length >>> 0;\n      if (len === 0) {\n        return -1;\n      }\n      var n = 0;\n      if (arguments.length > 1) {\n        n = Number(arguments[1]);\n        if (n != n) { // shortcut for verifying if it's NaN\n            n = 0;\n        } else if (n != 0 && n != Infinity && n != -Infinity) {\n            n = (n > 0 || -1) * Math.floor(Math.abs(n));\n        }\n      }\n      if (n >= len) {\n        return -1;\n      }\n      var k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);\n      for (; k < len; k++) {\n        if (k in t && t[k] === searchElement) {\n            return k;\n        }\n      }\n      return -1;\n    }\n  }\n    \n  /**\n   * MicroEvent - to make any js object an event emitter (server or browser)\n   */\n\n  var MicroEvent = function(){}\n  MicroEvent.prototype = {\n    bind: function(event, fct){\n      this._events = this._events || {};\n      this._events[event] = this._events[event] || [];\n      this._events[event].push(fct);\n    },\n    unbind: function(event, fct){\n      this._events = this._events || {};\n      if( event in this._events === false  ) return;\n      this._events[event].splice(this._events[event].indexOf(fct), 1);\n    },\n    trigger: function(event /* , args... */){\n      this._events = this._events || {};\n      if( event in this._events === false  ) return;\n      for(var i = 0; i < this._events[event].length; i++){\n        this._events[event][i].apply(this, Array.prototype.slice.call(arguments, 1))\n      }\n    }\n  };\n  /**\n   * mixin will delegate all MicroEvent.js function in the destination object\n   * @param {Object} the object which will support MicroEvent\n   */\n  MicroEvent.mixin = function(destObject){\n    var props = ['bind', 'unbind', 'trigger'];\n    if(!destObject) return;\n    for(var i = 0; i < props.length; i ++){\n      destObject[props[i]] = MicroEvent.prototype[props[i]];\n    }\n  }\n  \n  /**\n   * Loader\n   * The loader is responsible for loading\n   * and caching all necessary resources\n   */\n  function Loader(resources) {\n    this.resources = resources\n    this.cache = {} // file => contents\n    this.langs = {} // lang => strings\n  }\n  \n  Loader.prototype.load = function(lang, cb) {\n    if(this.langs[lang]) return cb()\n\n    if (this.resources.length > 0) {\n      var reqs = 0;\n      for (var i=0, n=this.resources.length; i < n; i++) {\n        this.fetch(this.resources[i], lang, function(e) {\n          reqs++;\n          if(e) console.warn(e)\n          \n          if (reqs < n) return;// Call back once all reqs are completed\n          cb && cb()\n        })\n      }\n    }\n  }\n  \n  Loader.prototype.fetch = function(href, lang, cb) {\n    var that = this\n    \n    if (this.cache[href]) {\n      this.parse(lang, href, this.cache[href], cb)\n      return;\n    }\n    \n    var xhr = new XMLHttpRequest()\n    xhr.open('GET', href, /*async: */true)\n    if (xhr.overrideMimeType) {\n      xhr.overrideMimeType('application/json; charset=utf-8');\n    }\n    xhr.onreadystatechange = function() {\n      if (xhr.readyState == 4) {\n        if (xhr.status == 200 || xhr.status === 0) {\n          var data = JSON.parse(xhr.responseText)\n          that.cache[href] = data\n          // Pass on the contents for parsing\n          that.parse(lang, href, data, cb)\n        } else {\n          cb(new Error('Failed to load '+href))\n        }\n      }\n    };\n    xhr.send(null);\n  }\n  \n  Loader.prototype.parse = function(lang, currHref, data, cb) {\n    if ('object' != typeof data) {\n      cb(new Error('A file couldn\\'t be parsed as json.'))\n      return\n    }\n\n    // dat alng ain't here, man!\n    if (!data[lang]) {\n      var msg = 'Couldn\\'t find translations for '+lang\n        , l\n      if(~lang.indexOf('-')) lang = lang.split('-')[0] // then let's try related langs\n      for(l in data) {\n        if(lang != l && l.indexOf(lang) === 0 && data[l]) {\n          lang = l\n          break;\n        }\n      }\n      if(lang != l) return cb(new Error(msg))\n    }\n    \n    if ('string' == typeof data[lang]) {\n      // Import rule\n\n      // absolute path\n      var importUrl = data[lang]\n\n      // relative path\n      if(data[lang].indexOf(\"http\") != 0 && data[lang].indexOf(\"/\") != 0) {  \n        importUrl = currHref+\"/../\"+data[lang]\n      }\n\n      this.fetch(importUrl, lang, cb)\n      return\n    }\n\n    if ('object' != typeof data[lang]) {\n      cb(new Error('Translations should be specified as JSON objects!'))\n      return\n    }\n\n    this.langs[lang] = data[lang]\n    // TODO: Also store accompanying langs\n    cb()\n  }\n  \n  \n  /**\n   * The html10n object\n   */\n  var html10n = \n  { language : null\n  }\n  MicroEvent.mixin(html10n)\n  \n  html10n.macros = {}\n\n  html10n.rtl = [\"ar\",\"dv\",\"fa\",\"ha\",\"he\",\"ks\",\"ku\",\"ps\",\"ur\",\"yi\"]\n  \n  /**\n   * Get rules for plural forms (shared with JetPack), see:\n   * http://unicode.org/repos/cldr-tmp/trunk/diff/supplemental/language_plural_rules.html\n   * https://github.com/mozilla/addon-sdk/blob/master/python-lib/plural-rules-generator.p\n   *\n   * @param {string} lang\n   *    locale (language) used.\n   *\n   * @return {Function}\n   *    returns a function that gives the plural form name for a given integer:\n   *       var fun = getPluralRules('en');\n   *       fun(1)    -> 'one'\n   *       fun(0)    -> 'other'\n   *       fun(1000) -> 'other'.\n   */\n  function getPluralRules(lang) {\n    var locales2rules = {\n      'af': 3,\n      'ak': 4,\n      'am': 4,\n      'ar': 1,\n      'asa': 3,\n      'az': 0,\n      'be': 11,\n      'bem': 3,\n      'bez': 3,\n      'bg': 3,\n      'bh': 4,\n      'bm': 0,\n      'bn': 3,\n      'bo': 0,\n      'br': 20,\n      'brx': 3,\n      'bs': 11,\n      'ca': 3,\n      'cgg': 3,\n      'chr': 3,\n      'cs': 12,\n      'cy': 17,\n      'da': 3,\n      'de': 3,\n      'dv': 3,\n      'dz': 0,\n      'ee': 3,\n      'el': 3,\n      'en': 3,\n      'eo': 3,\n      'es': 3,\n      'et': 3,\n      'eu': 3,\n      'fa': 0,\n      'ff': 5,\n      'fi': 3,\n      'fil': 4,\n      'fo': 3,\n      'fr': 5,\n      'fur': 3,\n      'fy': 3,\n      'ga': 8,\n      'gd': 24,\n      'gl': 3,\n      'gsw': 3,\n      'gu': 3,\n      'guw': 4,\n      'gv': 23,\n      'ha': 3,\n      'haw': 3,\n      'he': 2,\n      'hi': 4,\n      'hr': 11,\n      'hu': 0,\n      'id': 0,\n      'ig': 0,\n      'ii': 0,\n      'is': 3,\n      'it': 3,\n      'iu': 7,\n      'ja': 0,\n      'jmc': 3,\n      'jv': 0,\n      'ka': 0,\n      'kab': 5,\n      'kaj': 3,\n      'kcg': 3,\n      'kde': 0,\n      'kea': 0,\n      'kk': 3,\n      'kl': 3,\n      'km': 0,\n      'kn': 0,\n      'ko': 0,\n      'ksb': 3,\n      'ksh': 21,\n      'ku': 3,\n      'kw': 7,\n      'lag': 18,\n      'lb': 3,\n      'lg': 3,\n      'ln': 4,\n      'lo': 0,\n      'lt': 10,\n      'lv': 6,\n      'mas': 3,\n      'mg': 4,\n      'mk': 16,\n      'ml': 3,\n      'mn': 3,\n      'mo': 9,\n      'mr': 3,\n      'ms': 0,\n      'mt': 15,\n      'my': 0,\n      'nah': 3,\n      'naq': 7,\n      'nb': 3,\n      'nd': 3,\n      'ne': 3,\n      'nl': 3,\n      'nn': 3,\n      'no': 3,\n      'nr': 3,\n      'nso': 4,\n      'ny': 3,\n      'nyn': 3,\n      'om': 3,\n      'or': 3,\n      'pa': 3,\n      'pap': 3,\n      'pl': 13,\n      'ps': 3,\n      'pt': 3,\n      'rm': 3,\n      'ro': 9,\n      'rof': 3,\n      'ru': 11,\n      'rwk': 3,\n      'sah': 0,\n      'saq': 3,\n      'se': 7,\n      'seh': 3,\n      'ses': 0,\n      'sg': 0,\n      'sh': 11,\n      'shi': 19,\n      'sk': 12,\n      'sl': 14,\n      'sma': 7,\n      'smi': 7,\n      'smj': 7,\n      'smn': 7,\n      'sms': 7,\n      'sn': 3,\n      'so': 3,\n      'sq': 3,\n      'sr': 11,\n      'ss': 3,\n      'ssy': 3,\n      'st': 3,\n      'sv': 3,\n      'sw': 3,\n      'syr': 3,\n      'ta': 3,\n      'te': 3,\n      'teo': 3,\n      'th': 0,\n      'ti': 4,\n      'tig': 3,\n      'tk': 3,\n      'tl': 4,\n      'tn': 3,\n      'to': 0,\n      'tr': 0,\n      'ts': 3,\n      'tzm': 22,\n      'uk': 11,\n      'ur': 3,\n      've': 3,\n      'vi': 0,\n      'vun': 3,\n      'wa': 4,\n      'wae': 3,\n      'wo': 0,\n      'xh': 3,\n      'xog': 3,\n      'yo': 0,\n      'zh': 0,\n      'zu': 3\n    };\n\n    // utility functions for plural rules methods\n    function isIn(n, list) {\n      return list.indexOf(n) !== -1;\n    }\n    function isBetween(n, start, end) {\n      return start <= n && n <= end;\n    }\n\n    // list of all plural rules methods:\n    // map an integer to the plural form name to use\n    var pluralRules = {\n      '0': function(n) {\n        return 'other';\n      },\n      '1': function(n) {\n        if ((isBetween((n % 100), 3, 10)))\n          return 'few';\n        if (n === 0)\n          return 'zero';\n        if ((isBetween((n % 100), 11, 99)))\n          return 'many';\n        if (n == 2)\n          return 'two';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '2': function(n) {\n        if (n !== 0 && (n % 10) === 0)\n          return 'many';\n        if (n == 2)\n          return 'two';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '3': function(n) {\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '4': function(n) {\n        if ((isBetween(n, 0, 1)))\n          return 'one';\n        return 'other';\n      },\n      '5': function(n) {\n        if ((isBetween(n, 0, 2)) && n != 2)\n          return 'one';\n        return 'other';\n      },\n      '6': function(n) {\n        if (n === 0)\n          return 'zero';\n        if ((n % 10) == 1 && (n % 100) != 11)\n          return 'one';\n        return 'other';\n      },\n      '7': function(n) {\n        if (n == 2)\n          return 'two';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '8': function(n) {\n        if ((isBetween(n, 3, 6)))\n          return 'few';\n        if ((isBetween(n, 7, 10)))\n          return 'many';\n        if (n == 2)\n          return 'two';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '9': function(n) {\n        if (n === 0 || n != 1 && (isBetween((n % 100), 1, 19)))\n          return 'few';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '10': function(n) {\n        if ((isBetween((n % 10), 2, 9)) && !(isBetween((n % 100), 11, 19)))\n          return 'few';\n        if ((n % 10) == 1 && !(isBetween((n % 100), 11, 19)))\n          return 'one';\n        return 'other';\n      },\n      '11': function(n) {\n        if ((isBetween((n % 10), 2, 4)) && !(isBetween((n % 100), 12, 14)))\n          return 'few';\n        if ((n % 10) === 0 ||\n            (isBetween((n % 10), 5, 9)) ||\n            (isBetween((n % 100), 11, 14)))\n          return 'many';\n        if ((n % 10) == 1 && (n % 100) != 11)\n          return 'one';\n        return 'other';\n      },\n      '12': function(n) {\n        if ((isBetween(n, 2, 4)))\n          return 'few';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '13': function(n) {\n        if ((isBetween((n % 10), 2, 4)) && !(isBetween((n % 100), 12, 14)))\n          return 'few';\n        if (n != 1 && (isBetween((n % 10), 0, 1)) ||\n            (isBetween((n % 10), 5, 9)) ||\n            (isBetween((n % 100), 12, 14)))\n          return 'many';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '14': function(n) {\n        if ((isBetween((n % 100), 3, 4)))\n          return 'few';\n        if ((n % 100) == 2)\n          return 'two';\n        if ((n % 100) == 1)\n          return 'one';\n        return 'other';\n      },\n      '15': function(n) {\n        if (n === 0 || (isBetween((n % 100), 2, 10)))\n          return 'few';\n        if ((isBetween((n % 100), 11, 19)))\n          return 'many';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '16': function(n) {\n        if ((n % 10) == 1 && n != 11)\n          return 'one';\n        return 'other';\n      },\n      '17': function(n) {\n        if (n == 3)\n          return 'few';\n        if (n === 0)\n          return 'zero';\n        if (n == 6)\n          return 'many';\n        if (n == 2)\n          return 'two';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '18': function(n) {\n        if (n === 0)\n          return 'zero';\n        if ((isBetween(n, 0, 2)) && n !== 0 && n != 2)\n          return 'one';\n        return 'other';\n      },\n      '19': function(n) {\n        if ((isBetween(n, 2, 10)))\n          return 'few';\n        if ((isBetween(n, 0, 1)))\n          return 'one';\n        return 'other';\n      },\n      '20': function(n) {\n        if ((isBetween((n % 10), 3, 4) || ((n % 10) == 9)) && !(\n            isBetween((n % 100), 10, 19) ||\n            isBetween((n % 100), 70, 79) ||\n            isBetween((n % 100), 90, 99)\n            ))\n          return 'few';\n        if ((n % 1000000) === 0 && n !== 0)\n          return 'many';\n        if ((n % 10) == 2 && !isIn((n % 100), [12, 72, 92]))\n          return 'two';\n        if ((n % 10) == 1 && !isIn((n % 100), [11, 71, 91]))\n          return 'one';\n        return 'other';\n      },\n      '21': function(n) {\n        if (n === 0)\n          return 'zero';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '22': function(n) {\n        if ((isBetween(n, 0, 1)) || (isBetween(n, 11, 99)))\n          return 'one';\n        return 'other';\n      },\n      '23': function(n) {\n        if ((isBetween((n % 10), 1, 2)) || (n % 20) === 0)\n          return 'one';\n        return 'other';\n      },\n      '24': function(n) {\n        if ((isBetween(n, 3, 10) || isBetween(n, 13, 19)))\n          return 'few';\n        if (isIn(n, [2, 12]))\n          return 'two';\n        if (isIn(n, [1, 11]))\n          return 'one';\n        return 'other';\n      }\n    };\n\n    // return a function that gives the plural form name for a given integer\n    var index = locales2rules[lang.replace(/-.*$/, '')];\n    if (!(index in pluralRules)) {\n      console.warn('plural form unknown for [' + lang + ']');\n      return function() { return 'other'; };\n    }\n    return pluralRules[index];\n  }\n\n  /**\n   * pre-defined 'plural' macro\n   */\n  html10n.macros.plural = function(key, param, opts) {\n    var str\n      , n = parseFloat(param);\n    if (isNaN(n))\n      return;\n\n    // initialize _pluralRules\n    if (!this._pluralRules)\n      this._pluralRules = getPluralRules(html10n.language);\n    var index = this._pluralRules(n);\n\n    // try to find a [zero|one|two] key if it's defined\n    if (n === 0 && ('zero') in opts) {\n      str = opts['zero'];\n    } else if (n == 1 && ('one') in opts) {\n      str = opts['one'];\n    } else if (n == 2 && ('two') in opts) {\n      str = opts['two'];\n    } else if (index in opts) {\n      str = opts[index];\n    }\n\n    return str;\n  };\n  \n  /**\n   * Localize a document\n   * @param langs An array of lang codes defining fallbacks\n   */\n  html10n.localize = function(langs) {\n    var that = this\n    // if only one string => create an array\n    if ('string' == typeof langs) langs = [langs]\n\n    // Expand two-part locale specs\n    var i=0\n    langs.forEach(function(lang) {\n      if(!lang) return;\n      langs[i++] = lang;\n      if(~lang.indexOf('-')) langs[i++] = lang.substr(0, lang.indexOf('-'));\n    })\n\n    this.build(langs, function(er, translations) {\n      html10n.translations = translations\n      html10n.translateElement(translations)\n      that.trigger('localized')\n    })\n  }\n\n  /**\n   * Triggers the translation process\n   * for an element\n   * @param translations A hash of all translation strings\n   * @param element A DOM element, if omitted, the document element will be used\n   */\n  html10n.translateElement = function(translations, element) {\n    element = element || document.documentElement\n\n    var children = element? getTranslatableChildren(element) : document.childNodes;\n    for (var i=0, n=children.length; i < n; i++) {\n      this.translateNode(translations, children[i])\n    }\n\n    // translate element itself if necessary\n    this.translateNode(translations, element)\n  }\n  \n  function asyncForEach(list, iterator, cb) {\n    var i = 0\n      , n = list.length\n    iterator(list[i], i, function each(err) {\n      if(err) console.error(err)\n      i++\n      if (i < n) return iterator(list[i],i, each);\n      cb()\n    })\n  }\n  \n  function getTranslatableChildren(element) {\n    if(!document.querySelectorAll) {\n      if (!element) return []\n      var nodes = element.getElementsByTagName('*')\n        , l10nElements = []\n      for (var i=0, n=nodes.length; i < n; i++) {\n        if (nodes[i].getAttribute('data-l10n-id'))\n          l10nElements.push(nodes[i]);\n      }\n      return l10nElements\n    }\n    return element.querySelectorAll('*[data-l10n-id]')\n  }\n  \n  html10n.get = function(id, args) {\n    var translations = html10n.translations\n    if(!translations) return console.warn('No translations available (yet)')\n    if(!translations[id]) return console.warn('Could not find string '+id)\n    \n    // apply macros\n    var str = translations[id]\n    \n    str = substMacros(id, str, args)\n    \n    // apply args\n    str = substArguments(str, args)\n    \n    return str\n  }\n  \n  // replace {{arguments}} with their values or the\n  // associated translation string (based on its key)\n  function substArguments(str, args) {\n    var reArgs = /\\{\\{\\s*([a-zA-Z\\.]+)\\s*\\}\\}/\n      , match\n    \n    while (match = reArgs.exec(str)) {\n      if (!match || match.length < 2)\n        return str // argument key not found\n\n      var arg = match[1]\n        , sub = ''\n      if (arg in args) {\n        sub = args[arg]\n      } else if (arg in translations) {\n        sub = translations[arg]\n      } else {\n        console.warn('Could not find argument {{' + arg + '}}')\n        return str\n      }\n\n      str = str.substring(0, match.index) + sub + str.substr(match.index + match[0].length)\n    }\n    \n    return str\n  }\n  \n  // replace {[macros]} with their values\n  function substMacros(key, str, args) {\n    var regex = /\\{\\[\\s*([a-zA-Z]+)\\(([a-zA-Z]+)\\)((\\s*([a-zA-Z]+)\\: ?([ a-zA-Z{}]+),?)+)*\\s*\\]\\}/ //.exec('{[ plural(n) other: are {{n}}, one: is ]}')\n      , match\n    \n    while(match = regex.exec(str)) {\n      // a macro has been found\n      // Note: at the moment, only one parameter is supported\n      var macroName = match[1]\n        , paramName = match[2]\n        , optv = match[3]\n        , opts = {}\n      \n      if (!(macroName in html10n.macros)) continue\n      \n      if(optv) {\n        optv.match(/(?=\\s*)([a-zA-Z]+)\\: ?([ a-zA-Z{}]+)(?=,?)/g).forEach(function(arg) {\n          var parts = arg.split(':')\n            , name = parts[0]\n            , value = parts[1].trim()\n          opts[name] = value\n        })\n      }\n      \n      var param\n      if (args && paramName in args) {\n        param = args[paramName]\n      } else if (paramName in html10n.translations) {\n        param = translations[paramName]\n      }\n\n      // there's no macro parser: it has to be defined in html10n.macros\n      var macro = html10n.macros[macroName]\n      str = str.substr(0, match.index) + macro(key, param, opts) + str.substr(match.index+match[0].length)\n    }\n    \n    return str\n  }\n  \n  /**\n   * Applies translations to a DOM node (recursive)\n   */\n  html10n.translateNode = function(translations, node) {\n    var str = {}\n\n    // get id\n    str.id = node.getAttribute('data-l10n-id')\n    if (!str.id) return\n\n    if(!translations[str.id]) return console.warn('Couldn\\'t find translation key '+str.id)\n\n    // get args\n    if(window.JSON) {\n      str.args = JSON.parse(node.getAttribute('data-l10n-args'))\n    }else{\n      try{\n        str.args = eval(node.getAttribute('data-l10n-args'))\n      }catch(e) {\n        console.warn('Couldn\\'t parse args for '+str.id)\n      }\n    }\n    \n    str.str = html10n.get(str.id, str.args)\n    \n    // get attribute name to apply str to\n    var prop\n      , index = str.id.lastIndexOf('.')\n      , attrList = // allowed attributes\n       { \"title\": 1\n       , \"innerHTML\": 1\n       , \"alt\": 1\n       , \"textContent\": 1\n       , \"value\": 1\n       }\n    if (index > 0 && str.id.substr(index + 1) in attrList) { // an attribute has been specified\n      prop = str.id.substr(index + 1)\n    } else { // no attribute: assuming text content by default\n      prop = document.body.textContent ? 'textContent' : 'innerText'\n    }\n\n    // Apply translation\n    if (node.children.length === 0 || prop != 'textContent') {\n      node[prop] = str.str\n    } else {\n      var children = node.childNodes,\n          found = false\n      for (var i=0, n=children.length; i < n; i++) {\n        if (children[i].nodeType === 3 && /\\S/.test(children[i].textContent)) {\n          if (!found) {\n            children[i].nodeValue = str.str\n            found = true\n          } else {\n            children[i].nodeValue = ''\n          }\n        }\n      }\n      if (!found) {\n        console.warn('Unexpected error: could not translate element content for key '+str.id, node)\n      }\n    }\n  }\n  \n  /**\n   * Builds a translation object from a list of langs (loads the necessary translations)\n   * @param langs Array - a list of langs sorted by priority (default langs should go last)\n   */\n  html10n.build = function(langs, cb) {\n    var that = this\n      , build = {}\n\n    asyncForEach(langs, function (lang, i, next) {\n      if(!lang) return next();\n      that.loader.load(lang, next)\n    }, function() {\n      var lang\n      langs.reverse()\n      \n      // loop through the priority array...\n      for (var i=0, n=langs.length; i < n; i++) {\n        lang = langs[i]\n        \n        if(!lang) continue;\n        if(!(lang in that.loader.langs)) {// uh, we don't have this lang availbable..\n          // then check for related langs\n          if(~lang.indexOf('-')) lang = lang.split('-')[0];\n          for(var l in that.loader.langs) {\n            if(lang != l && l.indexOf(lang) === 0) {\n              lang = l\n              break;\n            }\n          }\n          if(lang != l) continue;\n        }\n        \n        // ... and apply all strings of the current lang in the list\n        // to our build object\n        for (var string in that.loader.langs[lang]) {\n          build[string] = that.loader.langs[lang][string]\n        }\n        \n        // the last applied lang will be exposed as the\n        // lang the page was translated to\n        that.language = lang\n      }\n      cb(null, build)\n    })\n  }\n  \n  /**\n   * Returns the language that was last applied to the translations hash\n   * thus overriding most of the formerly applied langs\n   */\n  html10n.getLanguage = function() {\n    return this.language;\n  }\n\n  /**\n   * Returns the direction of the language returned be html10n#getLanguage\n   */\n  html10n.getDirection = function() {\n    if(!this.language) return\n    var langCode = this.language.indexOf('-') == -1? this.language : this.language.substr(0, this.language.indexOf('-'))\n    return html10n.rtl.indexOf(langCode) == -1? 'ltr' : 'rtl'\n  }\n\n  /**\n   * Index all <link>s\n   */\n  html10n.index = function () {\n    // Find all <link>s\n    var links = document.getElementsByTagName('link')\n       , resources = []\n    for (var i=0, n=links.length; i < n; i++) {\n      if (links[i].type != 'application/l10n+json')\n        continue;\n      resources.push(links[i].href)\n    }\n    this.loader = new Loader(resources)\n    this.trigger('indexed')\n  }\n  \n  if (document.addEventListener) // modern browsers and IE9+\n   document.addEventListener('DOMContentLoaded', function() {\n     html10n.index()\n   }, false)\n  else if (window.attachEvent)\n    window.attachEvent('onload', function() {\n     html10n.index()\n   }, false)\n\n  // gettext-like shortcut\n  if (window._ === undefined)\n    window._ = html10n.get;\n\n  return html10n\n})(window, document)\n"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 0,
          "_transferSize": 0
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": 0,
          "wait": 0,
          "receive": 0,
          "ssl": -1
        },
        "connection": "3300",
        "pageref": "page_2"
      },
      {
        "startedDateTime": "2015-06-09T16:53:03.678Z",
        "time": 0,
        "request": {
          "method": "GET",
          "url": "http://localhost:9001/static/js/l10n.js",
          "httpVersion": "unknown",
          "headers": [
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.81 Safari/537.36"
            }
          ],
          "queryString": [],
          "cookies": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "unknown",
          "headers": [
            {
              "name": "date",
              "value": "Tue, 09 Jun 2015 16:47:41 GMT"
            },
            {
              "name": "last-modified",
              "value": "Mon, 01 Jun 2015 14:19:04 GMT"
            },
            {
              "name": "Server",
              "value": "Etherpad d11c92c (http://etherpad.org)"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            },
            {
              "name": "Content-Type",
              "value": "text/javascript; charset=utf-8"
            },
            {
              "name": "cache-control",
              "value": "max-age=21600"
            },
            {
              "name": "X-UA-Compatible",
              "value": "IE=Edge,chrome=1"
            },
            {
              "name": "expires",
              "value": "Tue, 09 Jun 2015 22:46:10 GMT"
            }
          ],
          "cookies": [],
          "content": {
            "size": 464,
            "mimeType": "text/javascript",
            "text": "(function(document) {\n  // Set language for l10n\n  var language = document.cookie.match(/language=((\\w{2,3})(-\\w+)?)/);\n  if(language) language = language[1];\n\n  html10n.bind('indexed', function() {\n    html10n.localize([language, navigator.language, navigator.userLanguage, 'en'])\n  })\n  \n  html10n.bind('localized', function() {\n    document.documentElement.lang = html10n.getLanguage()\n    document.documentElement.dir = html10n.getDirection()\n  })\n})(document)"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 0,
          "_transferSize": 0
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": 0,
          "wait": 0,
          "receive": 0,
          "ssl": -1
        },
        "connection": "3300",
        "pageref": "page_2"
      },
      {
        "startedDateTime": "2015-06-09T16:53:03.686Z",
        "time": 634.2140000006111,
        "request": {
          "method": "GET",
          "url": "http://localhost:9001/static/js/require-kernel.js",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "DNT",
              "value": "1"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, sdch"
            },
            {
              "name": "Host",
              "value": "localhost:9001"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.8,de;q=0.6"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.81 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Referer",
              "value": "http://localhost:9001/p/bla"
            },
            {
              "name": "Cookie",
              "value": "token=t.ltaoBcvzTd2Qbc9Uqjas; express_sid=s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "If-Modified-Since",
              "value": "Fri, 05 Jun 2015 10:35:54 GMT"
            }
          ],
          "queryString": [],
          "cookies": [
            {
              "name": "token",
              "value": "t.ltaoBcvzTd2Qbc9Uqjas",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "express_sid",
              "value": "s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo",
              "expires": null,
              "httpOnly": false,
              "secure": false
            }
          ],
          "headersSize": 542,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "date",
              "value": "Tue, 09 Jun 2015 16:53:04 GMT"
            },
            {
              "name": "last-modified",
              "value": "Tue, 09 Jun 2015 16:45:36 GMT"
            },
            {
              "name": "Server",
              "value": "Etherpad d11c92c (http://etherpad.org)"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            },
            {
              "name": "Transfer-Encoding",
              "value": "chunked"
            },
            {
              "name": "Content-Type",
              "value": "text/javascript; charset=utf-8"
            },
            {
              "name": "cache-control",
              "value": "max-age=21600"
            },
            {
              "name": "X-UA-Compatible",
              "value": "IE=Edge,chrome=1"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "expires",
              "value": "Tue, 09 Jun 2015 22:53:04 GMT"
            }
          ],
          "cookies": [],
          "content": {
            "size": 19418,
            "mimeType": "text/javascript",
            "compression": -13,
            "text": "var require = (function () {\n/*!\n\n  require-kernel\n\n  Created by Chad Weider on 01/04/11.\n  Released to the Public Domain on 17/01/12.\n\n*/\n\n  /* Storage */\n  var main = null; // Reference to main module in `modules`.\n  var modules = {}; // Repository of module objects build from `definitions`.\n  var definitions = {}; // Functions that construct `modules`.\n  var loadingModules = {}; // Locks for detecting circular dependencies.\n  var definitionWaiters = {}; // Locks for clearing duplicate requires.\n  var fetchRequests = []; // Queue of pending requests.\n  var currentRequests = 0; // Synchronization for parallel requests.\n  var maximumRequests = 2; // The maximum number of parallel requests.\n  var deferred = []; // A list of callbacks that can be evaluated eventually.\n  var deferredScheduled = false; // If deferred functions will be executed.\n\n  var syncLock = undefined;\n  var globalKeyPath = undefined;\n\n  var rootURI = undefined;\n  var libraryURI = undefined;\n\n  var JSONP_TIMEOUT = 60 * 1000;\n\n  function CircularDependencyError(message) {\n    this.name = \"CircularDependencyError\";\n    this.message = message;\n  };\n  CircularDependencyError.prototype = Error.prototype;\n  function ArgumentError(message) {\n    this.name = \"ArgumentError\";\n    this.message = message;\n  };\n  ArgumentError.prototype = Error.prototype;\n\n  /* Utility */\n  function hasOwnProperty(object, key) {\n    // Object-independent because an object may define `hasOwnProperty`.\n    return Object.prototype.hasOwnProperty.call(object, key);\n  }\n\n  /* Deferral */\n  function defer(f_1, f_2, f_n) {\n    deferred.push.apply(deferred, arguments);\n  }\n\n  function _flushDefer() {\n    // Let exceptions happen, but don't allow them to break notification.\n    try {\n      while (deferred.length) {\n        var continuation = deferred.shift();\n        continuation();\n      }\n      deferredScheduled = false;\n    } finally {\n      deferredScheduled = deferred.length > 0;\n      deferred.length && setTimeout(_flushDefer, 0);\n    }\n  }\n\n  function flushDefer() {\n    if (!deferredScheduled && deferred.length > 0) {\n      if (syncLock) {\n        // Only asynchronous operations will wait on this condition so schedule\n        // and don't interfere with the synchronous operation in progress.\n        deferredScheduled = true;\n        setTimeout(_flushDefer, 0);\n      } else {\n        _flushDefer();\n      }\n    }\n  }\n\n  function flushDeferAfter(f) {\n    try {\n      deferredScheduled = true;\n      f();\n      deferredScheduled = false;\n      flushDefer();\n    } finally {\n      deferredScheduled = false;\n      deferred.length && setTimeout(flushDefer, 0);\n    }\n  }\n\n  // See RFC 2396 Appendix B\n  var URI_EXPRESSION =\n      /^(([^:\\/?#]+):)?(\\/\\/([^\\/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n  function parseURI(uri) {\n    var match = uri.match(URI_EXPRESSION);\n    var location = match && {\n      scheme: match[2],\n      host: match[4],\n      path: match[5],\n      query: match[7],\n      fragment: match[9]\n    };\n    return location;\n  }\n\n  function joinURI(location) {\n    var uri = \"\";\n    if (location.scheme)\n      uri += location.scheme + ':';\n    if (location.host)\n      uri += \"//\" + location.host\n    if (location.host && location.path && location.path.charAt(0) != '/')\n      url += \"/\"\n    if (location.path)\n      uri += location.path\n    if (location.query)\n      uri += \"?\" + location.query\n    if (uri.fragment)\n      uri += \"#\" + location.fragment\n\n    return uri;\n  }\n\n  function isSameDomain(uri) {\n    var host_uri =\n      (typeof location == \"undefined\") ? {} : parseURI(location.toString());\n    var uri = parseURI(uri);\n\n    return (!uri.scheme && !uri.host)\n        || (uri.scheme === host_uri.scheme) && (uri.host === host_uri.host);\n  }\n\n  function mirroredURIForURI(uri) {\n    var host_uri =\n      (typeof location == \"undefined\") ? {} : parseURI(location.toString());\n    var uri = parseURI(uri);\n\n    uri.scheme = host_uri.scheme;\n    uri.host = host_uri.host;\n    return joinURI(uri);\n  }\n\n  function normalizePath(path) {\n    var pathComponents1 = path.split('/');\n    var pathComponents2 = [];\n\n    var component;\n    for (var i = 0, ii = pathComponents1.length; i < ii; i++) {\n      component = pathComponents1[i];\n      switch (component) {\n        case '':\n          if (i == 0 || i == ii - 1) {\n            // This indicates a leading or trailing slash.\n            pathComponents2.push(component);\n          }\n          break;\n        case '.':\n          // Always skip.\n          break;\n        case '..':\n          if (pathComponents2.length > 1\n            || (pathComponents2.length == 1\n              && pathComponents2[0] != ''\n              && pathComponents2[0] != '.')) {\n            pathComponents2.pop();\n            break;\n          }\n        default:\n          pathComponents2.push(component);\n      }\n    }\n\n    return pathComponents2.join('/');\n  }\n\n  function fullyQualifyPath(path, basePath) {\n    var fullyQualifiedPath = path;\n    if (path.charAt(0) == '.'\n      && (path.charAt(1) == '/'\n        || (path.charAt(1) == '.' && path.charAt(2) == '/'))) {\n      if (!basePath) {\n        basePath = '';\n      } else if (basePath.charAt(basePath.length-1) != '/') {\n        basePath += '/';\n      }\n      fullyQualifiedPath = basePath + path;\n    }\n    return fullyQualifiedPath;\n  }\n\n  function setRootURI(URI) {\n    if (!URI) {\n      throw new ArgumentError(\"Invalid root URI.\");\n    }\n    rootURI = (URI.charAt(URI.length-1) == '/' ? URI.slice(0,-1) : URI);\n  }\n\n  function setLibraryURI(URI) {\n    libraryURI = (URI.charAt(URI.length-1) == '/' ? URI : URI + '/');\n  }\n\n  function URIForModulePath(path) {\n    var components = path.split('/');\n    for (var i = 0, ii = components.length; i < ii; i++) {\n      components[i] = encodeURIComponent(components[i]);\n    }\n    path = components.join('/')\n\n    if (path.charAt(0) == '/') {\n      if (!rootURI) {\n        throw new Error(\"Attempt to retrieve the root module \"\n          + \"\\\"\"+ path + \"\\\" but no root URI is defined.\");\n      }\n      return rootURI + path;\n    } else {\n      if (!libraryURI) {\n        throw new Error(\"Attempt to retrieve the library module \"\n          + \"\\\"\"+ path + \"\\\" but no libary URI is defined.\");\n      }\n      return libraryURI + path;\n    }\n  }\n\n  function _compileFunction(code, filename) {\n    return new Function(code);\n  }\n\n  function compileFunction(code, filename) {\n    var compileFunction = rootRequire._compileFunction || _compileFunction;\n    return compileFunction.apply(this, arguments);\n  }\n\n  /* Remote */\n  function setRequestMaximum (value) {\n    value == parseInt(value);\n    if (value > 0) {\n      maximumRequests = value;\n      checkScheduledfetchDefines();\n    } else {\n      throw new ArgumentError(\"Value must be a positive integer.\")\n    }\n  }\n\n  function setGlobalKeyPath (value) {\n    globalKeyPath = value;\n  }\n\n  var XMLHttpFactories = [\n    function () {return new XMLHttpRequest()},\n    function () {return new ActiveXObject(\"Msxml2.XMLHTTP\")},\n    function () {return new ActiveXObject(\"Msxml3.XMLHTTP\")},\n    function () {return new ActiveXObject(\"Microsoft.XMLHTTP\")}\n  ];\n\n  function createXMLHTTPObject() {\n    var xmlhttp = false;\n    for (var i = 0, ii = XMLHttpFactories.length; i < ii; i++) {\n      try {\n        xmlhttp = XMLHttpFactories[i]();\n      } catch (error) {\n        continue;\n      }\n      break;\n    }\n    return xmlhttp;\n  }\n\n  function getXHR(uri, async, callback, request) {\n    var request = request || createXMLHTTPObject();\n    if (!request) {\n      throw new Error(\"Error making remote request.\")\n    }\n\n    function onComplete(request) {\n      // Build module constructor.\n      if (request.status == 200) {\n        callback(undefined, request.responseText);\n      } else {\n        callback(true, undefined);\n      }\n    }\n\n    request.open('GET', uri, !!(async));\n    if (async) {\n      request.onreadystatechange = function (event) {\n        if (request.readyState == 4) {\n          onComplete(request);\n        }\n      };\n      request.send(null);\n    } else {\n      request.send(null);\n      onComplete(request);\n    }\n  }\n\n  function getXDR(uri, callback) {\n    var xdr = new XDomainRequest();\n    xdr.open('GET', uri);\n    xdr.error(function () {\n      callback(true, undefined);\n    });\n    xdr.onload(function () {\n      callback(undefined, request.responseText);\n    });\n    xdr.send();\n  }\n\n  function fetchDefineXHR(path, async) {\n    // If cross domain and request doesn't support such requests, go straight\n    // to mirroring.\n\n    var _globalKeyPath = globalKeyPath;\n\n    var callback = function (error, text) {\n      if (error) {\n        define(path, null);\n      } else {\n        if (_globalKeyPath) {\n          compileFunction(text, path)();\n        } else {\n          var definition = compileFunction(\n              'return (function (require, exports, module) {'\n            + text + '\\n'\n            + '})', path)();\n          define(path, definition);\n        }\n      }\n    }\n\n    var uri = URIForModulePath(path);\n    if (_globalKeyPath) {\n      uri += '?callback=' + encodeURIComponent(globalKeyPath + '.define');\n    }\n    if (isSameDomain(uri)) {\n      getXHR(uri, async, callback);\n    } else {\n      var request = createXMLHTTPObject();\n      if (request && request.withCredentials !== undefined) {\n        getXHR(uri, async, callback, request);\n      } else if (async && (typeof XDomainRequest != \"undefined\")) {\n        getXDR(uri, callback);\n      } else {\n        getXHR(mirroredURIForURI(uri), async, callback);\n      }\n    }\n  }\n\n  function fetchDefineJSONP(path) {\n    var head = document.head\n      || document.getElementsByTagName('head')[0]\n      || document.documentElement;\n    var script = document.createElement('script');\n    if (script.async !== undefined) {\n      script.async = \"true\";\n    } else {\n      script.defer = \"true\";\n    }\n    script.type = \"application/javascript\";\n    script.src = URIForModulePath(path)\n      + '?callback=' + encodeURIComponent(globalKeyPath + '.define');\n\n    // Handle failure of JSONP request.\n    if (JSONP_TIMEOUT < Infinity) {\n      var timeoutId = setTimeout(function () {\n        timeoutId = undefined;\n        define(path, null);\n      }, JSONP_TIMEOUT);\n      definitionWaiters[path].unshift(function () {\n        timeoutId === undefined && clearTimeout(timeoutId);\n      });\n    }\n\n    head.insertBefore(script, head.firstChild);\n  }\n\n  /* Modules */\n  function fetchModule(path, continuation) {\n    if (hasOwnProperty(definitionWaiters, path)) {\n      definitionWaiters[path].push(continuation);\n    } else {\n      definitionWaiters[path] = [continuation];\n      schedulefetchDefine(path);\n    }\n  }\n\n  function schedulefetchDefine(path) {\n    fetchRequests.push(path);\n    checkScheduledfetchDefines();\n  }\n\n  function checkScheduledfetchDefines() {\n    if (fetchRequests.length > 0 && currentRequests < maximumRequests) {\n      var fetchRequest = fetchRequests.pop();\n      currentRequests++;\n      definitionWaiters[fetchRequest].unshift(function () {\n        currentRequests--;\n        checkScheduledfetchDefines();\n      });\n      if (globalKeyPath\n        && typeof document !== 'undefined'\n          && document.readyState\n            && /^loaded|complete$/.test(document.readyState)) {\n        fetchDefineJSONP(fetchRequest);\n      } else {\n        fetchDefineXHR(fetchRequest, true);\n      }\n    }\n  }\n\n  function fetchModuleSync(path, continuation) {\n    fetchDefineXHR(path, false);\n    continuation();\n  }\n\n  function moduleIsLoaded(path) {\n    return hasOwnProperty(modules, path);\n  }\n\n  function loadModule(path, continuation) {\n    // If it's a function then it hasn't been exported yet. Run function and\n    //  then replace with exports result.\n    if (!moduleIsLoaded(path)) {\n      if (hasOwnProperty(loadingModules, path)) {\n        throw new CircularDependencyError(\"Encountered circular dependency.\");\n      } else if (!moduleIsDefined(path)) {\n        throw new Error(\"Attempt to load undefined module.\");\n      } else if (definitions[path] === null) {\n        continuation(null);\n      } else {\n        var definition = definitions[path];\n        var _module = {id: path, exports: {}};\n        var _require = requireRelativeTo(path);\n        if (!main) {\n          main = _module;\n        }\n        try {\n          loadingModules[path] = true;\n          definition(_require, _module.exports, _module);\n          modules[path] = _module;\n          delete loadingModules[path];\n          continuation(_module);\n        } finally {\n          delete loadingModules[path];\n        }\n      }\n    } else {\n      var module = modules[path];\n      continuation(module);\n    }\n  }\n\n  function _moduleAtPath(path, fetchFunc, continuation) {\n    // hack fix temporary in for etherpad #2505\n    if(path === \"ep_etherpad-lite/static/js/pad.js\") path = \"ep_etherpad-lite/static/js/pad\";\n    // Making the below change saves on 2 http requests\n    // and also 1 per plugin and nothing seems to b0rk?\n    // This code is run on the client only\n    // var suffixes = ['', '.js', '/index.js'];\n    var suffixes = ['.js', '/index.js'];\n    if (path.charAt(path.length - 1) == '/') {\n      suffixes = ['index.js'];\n    }\n    var i = 0, ii = suffixes.length;\n    var _find = function (i) {\n      if (i < ii) {\n        var path_ = path + suffixes[i];\n        var after = function () {\n          loadModule(path_, function (module) {\n            if (module === null) {\n              _find(i + 1);\n            } else {\n              continuation(module);\n            }\n          });\n        }\n\n        if (!moduleIsDefined(path_)) {\n          fetchFunc(path_, after);\n        } else {\n          after();\n        }\n\n      } else {\n        continuation(null);\n      }\n    };\n    _find(0);\n  }\n\n  function moduleAtPath(path, continuation) {\n    defer(function () {\n      _moduleAtPath(path, fetchModule, continuation);\n    });\n  }\n\n  function moduleAtPathSync(path) {\n    var module;\n    var oldSyncLock = syncLock;\n    syncLock = true;\n\n    // HACK TODO\n    // This is completely the wrong way to do it but for now it shows it works\n    if(path == \"async\"){\n      // console.warn(\"path is async and we're doing a ghetto fix\");\n      path = \"async/lib/async\";\n    }\n\n    // HACK TODO\n    // This is completely the wrong way to do it but for now it shows it works\n    if(path == \"underscore\"){\n      // console.warn(\"path is async and we're doing a ghetto fix\");\n      path = \"underscore/underscore\";\n    }\n\n    // HACK TODO\n    // This is completely the wrong way to do it but for now it shows it works\n    if(path == \"unorm\"){\n      // console.warn(\"path is async and we're doing a ghetto fix\");\n      path = \"unorm/lib/unorm\";\n    }\n\n    try {\n      _moduleAtPath(path, fetchModuleSync, function (_module) {\n        module = _module;\n      });\n    } finally {\n      syncLock = oldSyncLock;\n    }\n    return module;\n  }\n\n  /* Definition */\n  function moduleIsDefined(path) {\n    return hasOwnProperty(definitions, path);\n  }\n\n  function defineModule(path, module) {\n    if (typeof path != 'string'\n      || !((typeof module == 'function') || module === null)) {\n      throw new ArgumentError(\n          \"Definition must be a (string, function) pair.\");\n    }\n\n    if (moduleIsDefined(path)) {\n      // Drop import silently\n    } else {\n      definitions[path] = module;\n    }\n  }\n\n  function defineModules(moduleMap) {\n    if (typeof moduleMap != 'object') {\n      throw new ArgumentError(\"Mapping must be an object.\");\n    }\n    for (var path in moduleMap) {\n      if (hasOwnProperty(moduleMap, path)) {\n        defineModule(path, moduleMap[path]);\n      }\n    }\n  }\n\n  function define(fullyQualifiedPathOrModuleMap, module) {\n    var moduleMap;\n    if (arguments.length == 1) {\n      moduleMap = fullyQualifiedPathOrModuleMap;\n      defineModules(moduleMap);\n    } else if (arguments.length == 2) {\n      var path = fullyQualifiedPathOrModuleMap;\n      defineModule(fullyQualifiedPathOrModuleMap, module);\n      moduleMap = {};\n      moduleMap[path] = module;\n    } else {\n      throw new ArgumentError(\"Expected 1 or 2 arguments, but got \"\n          + arguments.length + \".\");\n    }\n\n    // With all modules installed satisfy those conditions for all waiters.\n    for (var path in moduleMap) {\n      if (hasOwnProperty(moduleMap, path)\n        && hasOwnProperty(definitionWaiters, path)) {\n        defer.apply(this, definitionWaiters[path]);\n        delete definitionWaiters[path];\n      }\n    }\n\n    flushDefer();\n  }\n\n  /* Require */\n  function _designatedRequire(path, continuation) {\n    if (continuation === undefined) {\n      var module = moduleAtPathSync(path);\n      if (!module) {\n        throw new Error(\"The module at \\\"\" + path + \"\\\" does not exist.\");\n      }\n      return module.exports;\n    } else {\n      if (!(typeof continuation == 'function')) {\n        throw new ArgumentError(\"Continuation must be a function.\");\n      }\n\n      flushDeferAfter(function () {\n        moduleAtPath(path, function (module) {\n          continuation(module && module.exports);\n        });\n      });\n    }\n  }\n\n  function designatedRequire(path, continuation) {\n    var designatedRequire =\n        rootRequire._designatedRequire || _designatedRequire;\n    return designatedRequire.apply(this, arguments);\n  }\n\n  function requireRelative(basePath, qualifiedPath, continuation) {\n    qualifiedPath = qualifiedPath.toString();\n    var path = normalizePath(fullyQualifyPath(qualifiedPath, basePath));\n    return designatedRequire(path, continuation);\n  }\n\n  function requireRelativeN(basePath, qualifiedPaths, continuation) {\n    if (!(typeof continuation == 'function')) {\n      throw new ArgumentError(\"Final argument must be a continuation.\");\n    } else {\n      // Copy and validate parameters\n      var _qualifiedPaths = [];\n      for (var i = 0, ii = qualifiedPaths.length; i < ii; i++) {\n        _qualifiedPaths[i] = qualifiedPaths[i].toString();\n      }\n      var results = [];\n      function _require(result) {\n        results.push(result);\n        if (qualifiedPaths.length > 0) {\n          requireRelative(basePath, qualifiedPaths.shift(), _require);\n        } else {\n          continuation.apply(this, results);\n        }\n      }\n      for (var i = 0, ii = qualifiedPaths.length; i < ii; i++) {\n        requireRelative(basePath, _qualifiedPaths[i], _require);\n      }\n    }\n  }\n\n  var requireRelativeTo = function (basePath) {\n    basePath = basePath.replace(/[^\\/]+$/, '');\n    function require(qualifiedPath, continuation) {\n      if (arguments.length > 2) {\n        var qualifiedPaths = Array.prototype.slice.call(arguments, 0, -1);\n        var continuation = arguments[arguments.length-1];\n        return requireRelativeN(basePath, qualifiedPaths, continuation);\n      } else {\n        return requireRelative(basePath, qualifiedPath, continuation);\n      }\n    }\n    require.main = main;\n\n    return require;\n  }\n\n  var rootRequire = requireRelativeTo('/');\n\n  /* Private internals */\n  rootRequire._modules = modules;\n  rootRequire._definitions = definitions;\n  rootRequire._designatedRequire = _designatedRequire;\n  rootRequire._compileFunction = _compileFunction;\n\n  /* Public interface */\n  rootRequire.define = define;\n  rootRequire.setRequestMaximum = setRequestMaximum;\n  rootRequire.setGlobalKeyPath = setGlobalKeyPath;\n  rootRequire.setRootURI = setRootURI;\n  rootRequire.setLibraryURI = setLibraryURI;\n\n  return rootRequire;\n}())\n;\n"
          },
          "redirectURL": "",
          "headersSize": 376,
          "bodySize": 19431,
          "_transferSize": 19807
        },
        "cache": {},
        "timings": {
          "blocked": 590.471999999863,
          "dns": -1,
          "connect": -1,
          "send": 0.11900000026798807,
          "wait": 4.72300000001303,
          "receive": 38.90000000046712,
          "ssl": -1
        },
        "connection": "3611",
        "pageref": "page_2"
      },
      {
        "startedDateTime": "2015-06-09T16:53:03.686Z",
        "time": 609.2630000002828,
        "request": {
          "method": "GET",
          "url": "http://localhost:9001/socket.io/socket.io.js",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "If-None-Match",
              "value": "1.3.5"
            },
            {
              "name": "DNT",
              "value": "1"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, sdch"
            },
            {
              "name": "Host",
              "value": "localhost:9001"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.8,de;q=0.6"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.81 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Referer",
              "value": "http://localhost:9001/p/bla"
            },
            {
              "name": "Cookie",
              "value": "token=t.ltaoBcvzTd2Qbc9Uqjas; express_sid=s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            }
          ],
          "queryString": [],
          "cookies": [
            {
              "name": "token",
              "value": "t.ltaoBcvzTd2Qbc9Uqjas",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "express_sid",
              "value": "s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo",
              "expires": null,
              "httpOnly": false,
              "secure": false
            }
          ],
          "headersSize": 509,
          "bodySize": 0
        },
        "response": {
          "status": 304,
          "statusText": "Not Modified",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Date",
              "value": "Tue, 09 Jun 2015 16:53:04 GMT"
            }
          ],
          "cookies": [],
          "content": {
            "size": 173966,
            "mimeType": "application/javascript",
            "text": "!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.io=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\nmodule.exports = _dereq_('./lib/');\n\n},{\"./lib/\":2}],2:[function(_dereq_,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar url = _dereq_('./url');\nvar parser = _dereq_('socket.io-parser');\nvar Manager = _dereq_('./manager');\nvar debug = _dereq_('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup(uri, opts) {\n  if (typeof uri == 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var io;\n\n  if (opts.forceNew || opts['force new connection'] || false === opts.multiplex) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n\n  return io.socket(parsed.path);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = _dereq_('./manager');\nexports.Socket = _dereq_('./socket');\n\n},{\"./manager\":3,\"./socket\":5,\"./url\":6,\"debug\":10,\"socket.io-parser\":46}],3:[function(_dereq_,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar url = _dereq_('./url');\nvar eio = _dereq_('engine.io-client');\nvar Socket = _dereq_('./socket');\nvar Emitter = _dereq_('component-emitter');\nvar parser = _dereq_('socket.io-parser');\nvar on = _dereq_('./on');\nvar bind = _dereq_('component-bind');\nvar object = _dereq_('object-component');\nvar debug = _dereq_('debug')('socket.io-client:manager');\nvar indexOf = _dereq_('indexof');\nvar Backoff = _dereq_('backo2');\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager(uri, opts){\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' == typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connected = [];\n  this.encoding = false;\n  this.packetBuffer = [];\n  this.encoder = new parser.Encoder();\n  this.decoder = new parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function() {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function(){\n  for (var nsp in this.nsps) {\n    this.nsps[nsp].id = this.engine.id;\n  }\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function(v){\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function(v){\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function(v){\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function(v){\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function(v){\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function(v){\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function() {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function(fn){\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function() {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function(data){\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    // set timer\n    var timer = setTimeout(function(){\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function(){\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function(){\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function(data){\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function(packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function(err){\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function(nsp){\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connect', function(){\n      socket.id = self.engine.id;\n      if (!~indexOf(self.connected, socket)) {\n        self.connected.push(socket);\n      }\n    });\n  }\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function(socket){\n  var index = indexOf(this.connected, socket);\n  if (~index) this.connected.splice(index, 1);\n  if (this.connected.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function(packet){\n  debug('writing packet %j', packet);\n  var self = this;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function(encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i]);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function() {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function(){\n  var sub;\n  while (sub = this.subs.shift()) sub.destroy();\n\n  this.packetBuffer = [];\n  this.encoding = false;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function(){\n  this.skipReconnect = true;\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.engine && this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function(reason){\n  debug('close');\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function(){\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function(){\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function(err){\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function(){\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function(){\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n\n},{\"./on\":4,\"./socket\":5,\"./url\":6,\"backo2\":7,\"component-bind\":8,\"component-emitter\":9,\"debug\":10,\"engine.io-client\":11,\"indexof\":42,\"object-component\":43,\"socket.io-parser\":46}],4:[function(_dereq_,module,exports){\n\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on(obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function(){\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n\n},{}],5:[function(_dereq_,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar parser = _dereq_('socket.io-parser');\nvar Emitter = _dereq_('component-emitter');\nvar toArray = _dereq_('to-array');\nvar on = _dereq_('./on');\nvar bind = _dereq_('component-bind');\nvar debug = _dereq_('debug')('socket.io-client:socket');\nvar hasBin = _dereq_('has-binary');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket(io, nsp){\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  if (this.io.autoConnect) this.open();\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function() {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function(){\n  if (this.connected) return this;\n\n  this.subEvents();\n  this.io.open(); // ensure open\n  if ('open' == this.io.readyState) this.onopen();\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function(){\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function(ev){\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var parserType = parser.EVENT; // default\n  if (hasBin(args)) { parserType = parser.BINARY_EVENT; } // binary\n  var packet = { type: parserType, data: args };\n\n  // event ack callback\n  if ('function' == typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function(packet){\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function(){\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' != this.nsp) {\n    this.packet({ type: parser.CONNECT });\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function(reason){\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function(packet){\n  if (packet.nsp != this.nsp) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function(packet){\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function(id){\n  var self = this;\n  var sent = false;\n  return function(){\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    var type = hasBin(args) ? parser.BINARY_ACK : parser.ACK;\n    self.packet({\n      type: type,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function(packet){\n  debug('calling ack %s with %j', packet.id, packet.data);\n  var fn = this.acks[packet.id];\n  fn.apply(this, packet.data);\n  delete this.acks[packet.id];\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function(){\n  this.connected = true;\n  this.disconnected = false;\n  this.emit('connect');\n  this.emitBuffered();\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function(){\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function(){\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function(){\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function(){\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n},{\"./on\":4,\"component-bind\":8,\"component-emitter\":9,\"debug\":10,\"has-binary\":38,\"socket.io-parser\":46,\"to-array\":50}],6:[function(_dereq_,module,exports){\n(function (global){\n\n/**\n * Module dependencies.\n */\n\nvar parseuri = _dereq_('parseuri');\nvar debug = _dereq_('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url(uri, loc){\n  var obj = uri;\n\n  // default to window.location\n  var loc = loc || global.location;\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' == typeof uri) {\n    if ('/' == uri.charAt(0)) {\n      if ('/' == uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.hostname + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' != typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    }\n    else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  // define unique id\n  obj.id = obj.protocol + '://' + obj.host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + obj.host + (loc && loc.port == obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"debug\":10,\"parseuri\":44}],7:[function(_dereq_,module,exports){\n\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n\n},{}],8:[function(_dereq_,module,exports){\n/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n\n},{}],9:[function(_dereq_,module,exports){\n\n/**\n * Expose `Emitter`.\n */\n\nmodule.exports = Emitter;\n\n/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nfunction Emitter(obj) {\n  if (obj) return mixin(obj);\n};\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks[event] = this._callbacks[event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  var self = this;\n  this._callbacks = this._callbacks || {};\n\n  function on() {\n    self.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks[event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks[event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n  var args = [].slice.call(arguments, 1)\n    , callbacks = this._callbacks[event];\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks[event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n\n},{}],10:[function(_dereq_,module,exports){\n\n/**\n * Expose `debug()` as the module.\n */\n\nmodule.exports = debug;\n\n/**\n * Create a debugger with the given `name`.\n *\n * @param {String} name\n * @return {Type}\n * @api public\n */\n\nfunction debug(name) {\n  if (!debug.enabled(name)) return function(){};\n\n  return function(fmt){\n    fmt = coerce(fmt);\n\n    var curr = new Date;\n    var ms = curr - (debug[name] || curr);\n    debug[name] = curr;\n\n    fmt = name\n      + ' '\n      + fmt\n      + ' +' + debug.humanize(ms);\n\n    // This hackery is required for IE8\n    // where `console.log` doesn't have 'apply'\n    window.console\n      && console.log\n      && Function.prototype.apply.call(console.log, console, arguments);\n  }\n}\n\n/**\n * The currently active debug mode names.\n */\n\ndebug.names = [];\ndebug.skips = [];\n\n/**\n * Enables a debug mode by name. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} name\n * @api public\n */\n\ndebug.enable = function(name) {\n  try {\n    localStorage.debug = name;\n  } catch(e){}\n\n  var split = (name || '').split(/[\\s,]+/)\n    , len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    name = split[i].replace('*', '.*?');\n    if (name[0] === '-') {\n      debug.skips.push(new RegExp('^' + name.substr(1) + '$'));\n    }\n    else {\n      debug.names.push(new RegExp('^' + name + '$'));\n    }\n  }\n};\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\ndebug.disable = function(){\n  debug.enable('');\n};\n\n/**\n * Humanize the given `ms`.\n *\n * @param {Number} m\n * @return {String}\n * @api private\n */\n\ndebug.humanize = function(ms) {\n  var sec = 1000\n    , min = 60 * 1000\n    , hour = 60 * min;\n\n  if (ms >= hour) return (ms / hour).toFixed(1) + 'h';\n  if (ms >= min) return (ms / min).toFixed(1) + 'm';\n  if (ms >= sec) return (ms / sec | 0) + 's';\n  return ms + 'ms';\n};\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\ndebug.enabled = function(name) {\n  for (var i = 0, len = debug.skips.length; i < len; i++) {\n    if (debug.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (var i = 0, len = debug.names.length; i < len; i++) {\n    if (debug.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n};\n\n/**\n * Coerce `val`.\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n\n// persist\n\ntry {\n  if (window.localStorage) debug.enable(localStorage.debug);\n} catch(e){}\n\n},{}],11:[function(_dereq_,module,exports){\n\nmodule.exports =  _dereq_('./lib/');\n\n},{\"./lib/\":12}],12:[function(_dereq_,module,exports){\n\nmodule.exports = _dereq_('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = _dereq_('engine.io-parser');\n\n},{\"./socket\":13,\"engine.io-parser\":25}],13:[function(_dereq_,module,exports){\n(function (global){\n/**\n * Module dependencies.\n */\n\nvar transports = _dereq_('./transports');\nvar Emitter = _dereq_('component-emitter');\nvar debug = _dereq_('debug')('engine.io-client:socket');\nvar index = _dereq_('indexof');\nvar parser = _dereq_('engine.io-parser');\nvar parseuri = _dereq_('parseuri');\nvar parsejson = _dereq_('parsejson');\nvar parseqs = _dereq_('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Noop function.\n *\n * @api private\n */\n\nfunction noop(){}\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket(uri, opts){\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' == typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.host = uri.host;\n    opts.secure = uri.protocol == 'https' || uri.protocol == 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  }\n\n  this.secure = null != opts.secure ? opts.secure :\n    (global.location && 'https:' == location.protocol);\n\n  if (opts.host) {\n    var pieces = opts.host.split(':');\n    opts.hostname = pieces.shift();\n    if (pieces.length) {\n      opts.port = pieces.pop();\n    } else if (!opts.port) {\n      // if no port is specified manually, use the protocol default\n      opts.port = this.secure ? '443' : '80';\n    }\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (global.location ? location.hostname : 'localhost');\n  this.port = opts.port || (global.location && location.port ?\n       location.port :\n       (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' == typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.callbackBuffer = [];\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || null;\n  this.key = opts.key || null;\n  this.passphrase = opts.passphrase || null;\n  this.cert = opts.cert || null;\n  this.ca = opts.ca || null;\n  this.ciphers = opts.ciphers || null;\n  this.rejectUnauthorized = opts.rejectUnauthorized || null;\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = _dereq_('./transport');\nSocket.transports = _dereq_('./transports');\nSocket.parser = _dereq_('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    agent: this.agent,\n    hostname: this.hostname,\n    port: this.port,\n    secure: this.secure,\n    path: this.path,\n    query: query,\n    forceJSONP: this.forceJSONP,\n    jsonp: this.jsonp,\n    forceBase64: this.forceBase64,\n    enablesXDR: this.enablesXDR,\n    timestampRequests: this.timestampRequests,\n    timestampParam: this.timestampParam,\n    policyPort: this.policyPort,\n    socket: this,\n    pfx: this.pfx,\n    key: this.key,\n    passphrase: this.passphrase,\n    cert: this.cert,\n    ca: this.ca,\n    ciphers: this.ciphers,\n    rejectUnauthorized: this.rejectUnauthorized\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') != -1) {\n    transport = 'websocket';\n  } else if (0 == this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function() {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  var transport;\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function(transport){\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function(){\n    self.onDrain();\n  })\n  .on('packet', function(packet){\n    self.onPacket(packet);\n  })\n  .on('error', function(e){\n    self.onError(e);\n  })\n  .on('close', function(){\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 })\n    , failed = false\n    , self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen(){\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' == msg.type && 'probe' == msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' == transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' == self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport() {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  //Handle any error that happens while probing\n  function onerror(err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose(){\n    onerror(\"transport closed\");\n  }\n\n  //When the socket is closed while we're probing\n  function onclose(){\n    onerror(\"socket closed\");\n  }\n\n  //When the socket is upgraded while we're probing\n  function onupgrade(to){\n    if (transport && to.name != transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  //Remove all listeners on the transport and on self\n  function cleanup(){\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' == this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' == this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' == this.readyState || 'open' == this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(parsejson(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.emit('error', err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if  ('closed' == this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' == self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api public\n*/\n\nSocket.prototype.ping = function () {\n  this.sendPacket('ping');\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function() {\n  for (var i = 0; i < this.prevBufferLen; i++) {\n    if (this.callbackBuffer[i]) {\n      this.callbackBuffer[i]();\n    }\n  }\n\n  this.writeBuffer.splice(0, this.prevBufferLen);\n  this.callbackBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (this.writeBuffer.length == 0) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' != this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, fn) {\n  this.sendPacket('message', msg, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, fn) {\n  if ('closing' == this.readyState || 'closed' == this.readyState) {\n    return;\n  }\n\n  var packet = { type: type, data: data };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  this.callbackBuffer.push(fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' == this.readyState || 'open' == this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    function close() {\n      self.onClose('forced close');\n      debug('socket closing - telling transport to close');\n      self.transport.close();\n    }\n\n    function cleanupAndClose() {\n      self.removeListener('upgrade', cleanupAndClose);\n      self.removeListener('upgradeError', cleanupAndClose);\n      close();\n    }\n\n    function waitForUpgrade() {\n      // wait for upgrade to finish since we can't send packets while pausing a transport\n      self.once('upgrade', cleanupAndClose);\n      self.once('upgradeError', cleanupAndClose);\n    }\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function() {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' == this.readyState || 'open' == this.readyState || 'closing' == this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // clean buffers in next tick, so developers can still\n    // grab the buffers on `close` event\n    setTimeout(function() {\n      self.writeBuffer = [];\n      self.callbackBuffer = [];\n      self.prevBufferLen = 0;\n    }, 0);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i<j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./transport\":14,\"./transports\":15,\"component-emitter\":9,\"debug\":22,\"engine.io-parser\":25,\"indexof\":42,\"parsejson\":34,\"parseqs\":35,\"parseuri\":36}],14:[function(_dereq_,module,exports){\n/**\n * Module dependencies.\n */\n\nvar parser = _dereq_('engine.io-parser');\nvar Emitter = _dereq_('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * A counter used to prevent collisions in the timestamps used\n * for cache busting.\n */\n\nTransport.timestamps = 0;\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' == this.readyState || '' == this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' == this.readyState || 'open' == this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function(packets){\n  if ('open' == this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function(data){\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n\n},{\"component-emitter\":9,\"engine.io-parser\":25}],15:[function(_dereq_,module,exports){\n(function (global){\n/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = _dereq_('xmlhttprequest');\nvar XHR = _dereq_('./polling-xhr');\nvar JSONP = _dereq_('./polling-jsonp');\nvar websocket = _dereq_('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling(opts){\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (global.location) {\n    var isSSL = 'https:' == location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname != location.hostname || port != opts.port;\n    xs = opts.secure != isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./polling-jsonp\":16,\"./polling-xhr\":17,\"./websocket\":19,\"xmlhttprequest\":20}],16:[function(_dereq_,module,exports){\n(function (global){\n\n/**\n * Module requirements.\n */\n\nvar Polling = _dereq_('./polling');\nvar inherit = _dereq_('component-inherit');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Callbacks count.\n */\n\nvar index = 0;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    if (!global.___eio) global.___eio = [];\n    callbacks = global.___eio;\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (global.document && global.addEventListener) {\n    global.addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function(e){\n    self.onError('jsonp poll error',e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  insertAt.parentNode.insertBefore(script, insertAt);\n  this.script = script;\n\n  var isUAgecko = 'undefined' != typeof navigator && /gecko/i.test(navigator.userAgent);\n  \n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"'+ self.iframeId +'\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch(e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function(){\n      if (self.iframe.readyState == 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./polling\":18,\"component-inherit\":21}],17:[function(_dereq_,module,exports){\n(function (global){\n/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = _dereq_('xmlhttprequest');\nvar Polling = _dereq_('./polling');\nvar Emitter = _dereq_('component-emitter');\nvar inherit = _dereq_('component-inherit');\nvar debug = _dereq_('debug')('engine.io-client:polling-xhr');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty(){}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR(opts){\n  Polling.call(this, opts);\n\n  if (global.location) {\n    var isSSL = 'https:' == location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = opts.hostname != global.location.hostname ||\n      port != opts.port;\n    this.xs = opts.secure != isSSL;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function(opts){\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function(data, fn){\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function(err){\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function(){\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function(data){\n    self.onData(data);\n  });\n  req.on('error', function(err){\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request(opts){\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined != opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function(){\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    if (this.supportsBinary) {\n      // This has to be done after open because Firefox is stupid\n      // http://stackoverflow.com/questions/13216903/get-binary-data-with-xmlhttprequest-in-a-firefox-extension\n      xhr.responseType = 'arraybuffer';\n    }\n\n    if ('POST' == this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = true;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function(){\n        self.onLoad();\n      };\n      xhr.onerror = function(){\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function(){\n        if (4 != xhr.readyState) return;\n        if (200 == xhr.status || 1223 == xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function(){\n            self.onError(xhr.status);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function() {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (global.document) {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function(){\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function(data){\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function(err){\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function(fromError){\n  if ('undefined' == typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch(e) {}\n  }\n\n  if (global.document) {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function(){\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type').split(';')[0];\n    } catch (e) {}\n    if (contentType === 'application/octet-stream') {\n      data = this.xhr.response;\n    } else {\n      if (!this.supportsBinary) {\n        data = this.xhr.responseText;\n      } else {\n        data = 'ok';\n      }\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function(){\n  return 'undefined' !== typeof global.XDomainRequest && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function(){\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nif (global.document) {\n  Request.requestsCount = 0;\n  Request.requests = {};\n  if (global.attachEvent) {\n    global.attachEvent('onunload', unloadHandler);\n  } else if (global.addEventListener) {\n    global.addEventListener('beforeunload', unloadHandler, false);\n  }\n}\n\nfunction unloadHandler() {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./polling\":18,\"component-emitter\":9,\"component-inherit\":21,\"debug\":22,\"xmlhttprequest\":20}],18:[function(_dereq_,module,exports){\n/**\n * Module dependencies.\n */\n\nvar Transport = _dereq_('../transport');\nvar parseqs = _dereq_('parseqs');\nvar parser = _dereq_('engine.io-parser');\nvar inherit = _dereq_('component-inherit');\nvar debug = _dereq_('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function() {\n  var XMLHttpRequest = _dereq_('xmlhttprequest');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling(opts){\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function(){\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function(onPause){\n  var pending = 0;\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause(){\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function(){\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function(){\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function(){\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function(data){\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function(packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' == self.readyState) {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' == packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' != this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' == this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function(){\n  var self = this;\n\n  function close(){\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' == this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function(packets){\n  var self = this;\n  this.writable = false;\n  var callbackfn = function() {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  var self = this;\n  parser.encodePayload(packets, this.supportsBinary, function(data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function(){\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = +new Date + '-' + Transport.timestamps++;\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' == schema && this.port != 443) ||\n     ('http' == schema && this.port != 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  return schema + '://' + this.hostname + port + this.path + query;\n};\n\n},{\"../transport\":14,\"component-inherit\":21,\"debug\":22,\"engine.io-parser\":25,\"parseqs\":35,\"xmlhttprequest\":20}],19:[function(_dereq_,module,exports){\n/**\n * Module dependencies.\n */\n\nvar Transport = _dereq_('../transport');\nvar parser = _dereq_('engine.io-parser');\nvar parseqs = _dereq_('parseqs');\nvar inherit = _dereq_('component-inherit');\nvar debug = _dereq_('debug')('engine.io-client:websocket');\n\n/**\n * `ws` exposes a WebSocket-compatible interface in\n * Node, or the `WebSocket` or `MozWebSocket` globals\n * in the browser.\n */\n\nvar WebSocket = _dereq_('ws');\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS(opts){\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function(){\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var self = this;\n  var uri = this.uri();\n  var protocols = void(0);\n  var opts = { agent: this.agent };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  this.ws = new WebSocket(uri, protocols, opts);\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  this.ws.binaryType = 'arraybuffer';\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function(){\n  var self = this;\n\n  this.ws.onopen = function(){\n    self.onOpen();\n  };\n  this.ws.onclose = function(){\n    self.onClose();\n  };\n  this.ws.onmessage = function(ev){\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function(e){\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Override `onData` to use a timer on iOS.\n * See: https://gist.github.com/mloughran/2052006\n *\n * @api private\n */\n\nif ('undefined' != typeof navigator\n  && /iPad|iPhone|iPod/i.test(navigator.userAgent)) {\n  WS.prototype.onData = function(data){\n    var self = this;\n    setTimeout(function(){\n      Transport.prototype.onData.call(self, data);\n    }, 0);\n  };\n}\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function(packets){\n  var self = this;\n  this.writable = false;\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  for (var i = 0, l = packets.length; i < l; i++) {\n    parser.encodePacket(packets[i], this.supportsBinary, function(data) {\n      //Sometimes the websocket has already been closed but the browser didn't\n      //have a chance of informing us about it yet, in that case send will\n      //throw an error\n      try {\n        self.ws.send(data);\n      } catch (e){\n        debug('websocket closed before onclose event');\n      }\n    });\n  }\n\n  function ondrain() {\n    self.writable = true;\n    self.emit('drain');\n  }\n  // fake drain\n  // defer to next tick to allow Socket to clear writeBuffer\n  setTimeout(ondrain, 0);\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function(){\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function(){\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function(){\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' == schema && this.port != 443)\n    || ('ws' == schema && this.port != 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = +new Date;\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  return schema + '://' + this.hostname + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function(){\n  return !!WebSocket && !('__initialize' in WebSocket && this.name === WS.prototype.name);\n};\n\n},{\"../transport\":14,\"component-inherit\":21,\"debug\":22,\"engine.io-parser\":25,\"parseqs\":35,\"ws\":37}],20:[function(_dereq_,module,exports){\n// browser shim for xmlhttprequest module\nvar hasCORS = _dereq_('has-cors');\n\nmodule.exports = function(opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' != typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' != typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new ActiveXObject('Microsoft.XMLHTTP');\n    } catch(e) { }\n  }\n}\n\n},{\"has-cors\":40}],21:[function(_dereq_,module,exports){\n\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};\n},{}],22:[function(_dereq_,module,exports){\n\n/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = _dereq_('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  'lightseagreen',\n  'forestgreen',\n  'goldenrod',\n  'dodgerblue',\n  'darkorchid',\n  'crimson'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  return ('WebkitAppearance' in document.documentElement.style) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (window.console && (console.firebug || (console.exception && console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31);\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  return JSON.stringify(v);\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs() {\n  var args = arguments;\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return args;\n\n  var c = 'color: ' + this.color;\n  args = [args[0], c, 'color: inherit'].concat(Array.prototype.slice.call(args, 1));\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-z%]/g, function(match) {\n    if ('%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n  return args;\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // This hackery is required for IE8,\n  // where the `console.log` function doesn't have 'apply'\n  return 'object' == typeof console\n    && 'function' == typeof console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      localStorage.removeItem('debug');\n    } else {\n      localStorage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = localStorage.debug;\n  } catch(e) {}\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n},{\"./debug\":23}],23:[function(_dereq_,module,exports){\n\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = debug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = _dereq_('ms');\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lowercased letter, i.e. \"n\".\n */\n\nexports.formatters = {};\n\n/**\n * Previously assigned color.\n */\n\nvar prevColor = 0;\n\n/**\n * Previous log timestamp.\n */\n\nvar prevTime;\n\n/**\n * Select a color.\n *\n * @return {Number}\n * @api private\n */\n\nfunction selectColor() {\n  return exports.colors[prevColor++ % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction debug(namespace) {\n\n  // define the `disabled` version\n  function disabled() {\n  }\n  disabled.enabled = false;\n\n  // define the `enabled` version\n  function enabled() {\n\n    var self = enabled;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // add the `color` if not set\n    if (null == self.useColors) self.useColors = exports.useColors();\n    if (null == self.color && self.useColors) self.color = selectColor();\n\n    var args = Array.prototype.slice.call(arguments);\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %o\n      args = ['%o'].concat(args);\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    if ('function' === typeof exports.formatArgs) {\n      args = exports.formatArgs.apply(self, args);\n    }\n    var logFn = enabled.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n  enabled.enabled = true;\n\n  var fn = exports.enabled(namespace) ? enabled : disabled;\n\n  fn.namespace = namespace;\n\n  return fn;\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  var split = (namespaces || '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n\n},{\"ms\":24}],24:[function(_dereq_,module,exports){\n/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} options\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options){\n  options = options || {};\n  if ('string' == typeof val) return parse(val);\n  return options.long\n    ? long(val)\n    : short(val);\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  var match = /^((?:\\d+)?\\.?\\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(str);\n  if (!match) return;\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 's':\n      return n * s;\n    case 'ms':\n      return n;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction short(ms) {\n  if (ms >= d) return Math.round(ms / d) + 'd';\n  if (ms >= h) return Math.round(ms / h) + 'h';\n  if (ms >= m) return Math.round(ms / m) + 'm';\n  if (ms >= s) return Math.round(ms / s) + 's';\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction long(ms) {\n  return plural(ms, d, 'day')\n    || plural(ms, h, 'hour')\n    || plural(ms, m, 'minute')\n    || plural(ms, s, 'second')\n    || ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) return;\n  if (ms < n * 1.5) return Math.floor(ms / n) + ' ' + name;\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n\n},{}],25:[function(_dereq_,module,exports){\n(function (global){\n/**\n * Module dependencies.\n */\n\nvar keys = _dereq_('./keys');\nvar hasBinary = _dereq_('has-binary');\nvar sliceBuffer = _dereq_('arraybuffer.slice');\nvar base64encoder = _dereq_('base64-arraybuffer');\nvar after = _dereq_('after');\nvar utf8 = _dereq_('utf8');\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = navigator.userAgent.match(/Android/i);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = _dereq_('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if ('function' == typeof supportsBinary) {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if ('function' == typeof utf8encode) {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (global.ArrayBuffer && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (Blob && data instanceof global.Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data)) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    packet.data = fr.result;\n    exports.encodePacket(packet, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (Blob && packet.data instanceof Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += global.btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  // String data\n  if (typeof data == 'string' || data === undefined) {\n    if (data.charAt(0) == 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      try {\n        data = utf8.decode(data);\n      } catch (e) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!global.ArrayBuffer) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary == 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, true, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data != 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data == '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = ''\n    , n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (':' != chr) {\n      length += chr;\n    } else {\n      if ('' == length || (length != (n = Number(length)))) {\n        // parser error - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      msg = data.substr(i + 1, n);\n\n      if (length != msg.length) {\n        // parser error - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      if (msg.length) {\n        packet = exports.decodePacket(msg, binaryType, true);\n\n        if (err.type == packet.type && err.data == packet.data) {\n          // parser error in individual packet - ignoring payload\n          return callback(err, 0, 1);\n        }\n\n        var ret = callback(packet, i + n, l);\n        if (false === ret) return;\n      }\n\n      // advance cursor\n      i += n;\n      length = '';\n    }\n  }\n\n  if (length != '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  var numberTooLong = false;\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] == 255) break;\n\n      if (msgLength.length > 310) {\n        numberTooLong = true;\n        break;\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    if(numberTooLong) return callback(err, 0, 1);\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./keys\":26,\"after\":27,\"arraybuffer.slice\":28,\"base64-arraybuffer\":29,\"blob\":30,\"has-binary\":31,\"utf8\":33}],26:[function(_dereq_,module,exports){\n\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n\n},{}],27:[function(_dereq_,module,exports){\nmodule.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n\n},{}],28:[function(_dereq_,module,exports){\n/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n\n},{}],29:[function(_dereq_,module,exports){\n/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(chars){\n  \"use strict\";\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = chars.indexOf(base64[i]);\n      encoded2 = chars.indexOf(base64[i+1]);\n      encoded3 = chars.indexOf(base64[i+2]);\n      encoded4 = chars.indexOf(base64[i+3]);\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");\n\n},{}],30:[function(_dereq_,module,exports){\n(function (global){\n/**\n * Create a blob builder even when vendor prefixes exist\n */\n\nvar BlobBuilder = global.BlobBuilder\n  || global.WebKitBlobBuilder\n  || global.MSBlobBuilder\n  || global.MozBlobBuilder;\n\n/**\n * Check if Blob constructor is supported\n */\n\nvar blobSupported = (function() {\n  try {\n    var b = new Blob(['hi']);\n    return b.size == 2;\n  } catch(e) {\n    return false;\n  }\n})();\n\n/**\n * Check if BlobBuilder is supported\n */\n\nvar blobBuilderSupported = BlobBuilder\n  && BlobBuilder.prototype.append\n  && BlobBuilder.prototype.getBlob;\n\nfunction BlobBuilderConstructor(ary, options) {\n  options = options || {};\n\n  var bb = new BlobBuilder();\n  for (var i = 0; i < ary.length; i++) {\n    bb.append(ary[i]);\n  }\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\n};\n\nmodule.exports = (function() {\n  if (blobSupported) {\n    return global.Blob;\n  } else if (blobBuilderSupported) {\n    return BlobBuilderConstructor;\n  } else {\n    return undefined;\n  }\n})();\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],31:[function(_dereq_,module,exports){\n(function (global){\n\n/*\n * Module requirements.\n */\n\nvar isArray = _dereq_('isarray');\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Right now only Buffer and ArrayBuffer are supported..\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary(data) {\n\n  function _hasBinary(obj) {\n    if (!obj) return false;\n\n    if ( (global.Buffer && global.Buffer.isBuffer(obj)) ||\n         (global.ArrayBuffer && obj instanceof ArrayBuffer) ||\n         (global.Blob && obj instanceof Blob) ||\n         (global.File && obj instanceof File)\n        ) {\n      return true;\n    }\n\n    if (isArray(obj)) {\n      for (var i = 0; i < obj.length; i++) {\n          if (_hasBinary(obj[i])) {\n              return true;\n          }\n      }\n    } else if (obj && 'object' == typeof obj) {\n      if (obj.toJSON) {\n        obj = obj.toJSON();\n      }\n\n      for (var key in obj) {\n        if (obj.hasOwnProperty(key) && _hasBinary(obj[key])) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  return _hasBinary(data);\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"isarray\":32}],32:[function(_dereq_,module,exports){\nmodule.exports = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n\n},{}],33:[function(_dereq_,module,exports){\n(function (global){\n/*! http://mths.be/utf8js v2.0.0 by @mathias */\n;(function(root) {\n\n\t// Detect free variables `exports`\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code,\n\t// and use it as `root`\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar stringFromCharCode = String.fromCharCode;\n\n\t// Taken from http://mths.be/punycode\n\tfunction ucs2decode(string) {\n\t\tvar output = [];\n\t\tvar counter = 0;\n\t\tvar length = string.length;\n\t\tvar value;\n\t\tvar extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t// Taken from http://mths.be/punycode\n\tfunction ucs2encode(array) {\n\t\tvar length = array.length;\n\t\tvar index = -1;\n\t\tvar value;\n\t\tvar output = '';\n\t\twhile (++index < length) {\n\t\t\tvalue = array[index];\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t}\n\t\treturn output;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction createByte(codePoint, shift) {\n\t\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n\t}\n\n\tfunction encodeCodePoint(codePoint) {\n\t\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\t\treturn stringFromCharCode(codePoint);\n\t\t}\n\t\tvar symbol = '';\n\t\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t\t}\n\t\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\t\tsymbol += createByte(codePoint, 12);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\t\treturn symbol;\n\t}\n\n\tfunction utf8encode(string) {\n\t\tvar codePoints = ucs2decode(string);\n\n\t\t// console.log(JSON.stringify(codePoints.map(function(x) {\n\t\t// \treturn 'U+' + x.toString(16).toUpperCase();\n\t\t// })));\n\n\t\tvar length = codePoints.length;\n\t\tvar index = -1;\n\t\tvar codePoint;\n\t\tvar byteString = '';\n\t\twhile (++index < length) {\n\t\t\tcodePoint = codePoints[index];\n\t\t\tbyteString += encodeCodePoint(codePoint);\n\t\t}\n\t\treturn byteString;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction readContinuationByte() {\n\t\tif (byteIndex >= byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\tif ((continuationByte & 0xC0) == 0x80) {\n\t\t\treturn continuationByte & 0x3F;\n\t\t}\n\n\t\t// If we end up here, it’s not a continuation byte\n\t\tthrow Error('Invalid continuation byte');\n\t}\n\n\tfunction decodeSymbol() {\n\t\tvar byte1;\n\t\tvar byte2;\n\t\tvar byte3;\n\t\tvar byte4;\n\t\tvar codePoint;\n\n\t\tif (byteIndex > byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tif (byteIndex == byteCount) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Read first byte\n\t\tbyte1 = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\t// 1-byte sequence (no continuation bytes)\n\t\tif ((byte1 & 0x80) == 0) {\n\t\t\treturn byte1;\n\t\t}\n\n\t\t// 2-byte sequence\n\t\tif ((byte1 & 0xE0) == 0xC0) {\n\t\t\tvar byte2 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\t\tif (codePoint >= 0x80) {\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 3-byte sequence (may include unpaired surrogates)\n\t\tif ((byte1 & 0xF0) == 0xE0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\t\tif (codePoint >= 0x0800) {\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 4-byte sequence\n\t\tif ((byte1 & 0xF8) == 0xF0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tbyte4 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 0x12) | (byte2 << 0x0C) |\n\t\t\t\t(byte3 << 0x06) | byte4;\n\t\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\t\treturn codePoint;\n\t\t\t}\n\t\t}\n\n\t\tthrow Error('Invalid UTF-8 detected');\n\t}\n\n\tvar byteArray;\n\tvar byteCount;\n\tvar byteIndex;\n\tfunction utf8decode(byteString) {\n\t\tbyteArray = ucs2decode(byteString);\n\t\tbyteCount = byteArray.length;\n\t\tbyteIndex = 0;\n\t\tvar codePoints = [];\n\t\tvar tmp;\n\t\twhile ((tmp = decodeSymbol()) !== false) {\n\t\t\tcodePoints.push(tmp);\n\t\t}\n\t\treturn ucs2encode(codePoints);\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar utf8 = {\n\t\t'version': '2.0.0',\n\t\t'encode': utf8encode,\n\t\t'decode': utf8decode\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn utf8;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = utf8;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tvar object = {};\n\t\t\tvar hasOwnProperty = object.hasOwnProperty;\n\t\t\tfor (var key in utf8) {\n\t\t\t\thasOwnProperty.call(utf8, key) && (freeExports[key] = utf8[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.utf8 = utf8;\n\t}\n\n}(this));\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],34:[function(_dereq_,module,exports){\n(function (global){\n/**\n * JSON parse.\n *\n * @see Based on jQuery#parseJSON (MIT) and JSON2\n * @api private\n */\n\nvar rvalidchars = /^[\\],:{}\\s]*$/;\nvar rvalidescape = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\nvar rvalidtokens = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\nvar rvalidbraces = /(?:^|:|,)(?:\\s*\\[)+/g;\nvar rtrimLeft = /^\\s+/;\nvar rtrimRight = /\\s+$/;\n\nmodule.exports = function parsejson(data) {\n  if ('string' != typeof data || !data) {\n    return null;\n  }\n\n  data = data.replace(rtrimLeft, '').replace(rtrimRight, '');\n\n  // Attempt to parse using the native JSON parser first\n  if (global.JSON && JSON.parse) {\n    return JSON.parse(data);\n  }\n\n  if (rvalidchars.test(data.replace(rvalidescape, '@')\n      .replace(rvalidtokens, ']')\n      .replace(rvalidbraces, ''))) {\n    return (new Function('return ' + data))();\n  }\n};\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],35:[function(_dereq_,module,exports){\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n\n},{}],36:[function(_dereq_,module,exports){\n/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    return uri;\n};\n\n},{}],37:[function(_dereq_,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar global = (function() { return this; })();\n\n/**\n * WebSocket constructor.\n */\n\nvar WebSocket = global.WebSocket || global.MozWebSocket;\n\n/**\n * Module exports.\n */\n\nmodule.exports = WebSocket ? ws : null;\n\n/**\n * WebSocket constructor.\n *\n * The third `opts` options object gets ignored in web browsers, since it's\n * non-standard, and throws a TypeError if passed to the constructor.\n * See: https://github.com/einaros/ws/issues/227\n *\n * @param {String} uri\n * @param {Array} protocols (optional)\n * @param {Object) opts (optional)\n * @api public\n */\n\nfunction ws(uri, protocols, opts) {\n  var instance;\n  if (protocols) {\n    instance = new WebSocket(uri, protocols);\n  } else {\n    instance = new WebSocket(uri);\n  }\n  return instance;\n}\n\nif (WebSocket) ws.prototype = WebSocket.prototype;\n\n},{}],38:[function(_dereq_,module,exports){\n(function (global){\n\n/*\n * Module requirements.\n */\n\nvar isArray = _dereq_('isarray');\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Right now only Buffer and ArrayBuffer are supported..\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary(data) {\n\n  function _hasBinary(obj) {\n    if (!obj) return false;\n\n    if ( (global.Buffer && global.Buffer.isBuffer(obj)) ||\n         (global.ArrayBuffer && obj instanceof ArrayBuffer) ||\n         (global.Blob && obj instanceof Blob) ||\n         (global.File && obj instanceof File)\n        ) {\n      return true;\n    }\n\n    if (isArray(obj)) {\n      for (var i = 0; i < obj.length; i++) {\n          if (_hasBinary(obj[i])) {\n              return true;\n          }\n      }\n    } else if (obj && 'object' == typeof obj) {\n      if (obj.toJSON) {\n        obj = obj.toJSON();\n      }\n\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && _hasBinary(obj[key])) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  return _hasBinary(data);\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"isarray\":39}],39:[function(_dereq_,module,exports){\nmodule.exports=_dereq_(32)\n},{}],40:[function(_dereq_,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar global = _dereq_('global');\n\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = 'XMLHttpRequest' in global &&\n    'withCredentials' in new global.XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n\n},{\"global\":41}],41:[function(_dereq_,module,exports){\n\n/**\n * Returns `this`. Execute this without a \"context\" (i.e. without it being\n * attached to an object of the left-hand side), and `this` points to the\n * \"global\" scope of the current JS execution.\n */\n\nmodule.exports = (function () { return this; })();\n\n},{}],42:[function(_dereq_,module,exports){\n\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};\n},{}],43:[function(_dereq_,module,exports){\n\n/**\n * HOP ref.\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Return own keys in `obj`.\n *\n * @param {Object} obj\n * @return {Array}\n * @api public\n */\n\nexports.keys = Object.keys || function(obj){\n  var keys = [];\n  for (var key in obj) {\n    if (has.call(obj, key)) {\n      keys.push(key);\n    }\n  }\n  return keys;\n};\n\n/**\n * Return own values in `obj`.\n *\n * @param {Object} obj\n * @return {Array}\n * @api public\n */\n\nexports.values = function(obj){\n  var vals = [];\n  for (var key in obj) {\n    if (has.call(obj, key)) {\n      vals.push(obj[key]);\n    }\n  }\n  return vals;\n};\n\n/**\n * Merge `b` into `a`.\n *\n * @param {Object} a\n * @param {Object} b\n * @return {Object} a\n * @api public\n */\n\nexports.merge = function(a, b){\n  for (var key in b) {\n    if (has.call(b, key)) {\n      a[key] = b[key];\n    }\n  }\n  return a;\n};\n\n/**\n * Return length of `obj`.\n *\n * @param {Object} obj\n * @return {Number}\n * @api public\n */\n\nexports.length = function(obj){\n  return exports.keys(obj).length;\n};\n\n/**\n * Check if `obj` is empty.\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api public\n */\n\nexports.isEmpty = function(obj){\n  return 0 == exports.length(obj);\n};\n},{}],44:[function(_dereq_,module,exports){\n/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host'\n  , 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n  var m = re.exec(str || '')\n    , uri = {}\n    , i = 14;\n\n  while (i--) {\n    uri[parts[i]] = m[i] || '';\n  }\n\n  return uri;\n};\n\n},{}],45:[function(_dereq_,module,exports){\n(function (global){\n/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = _dereq_('isarray');\nvar isBuf = _dereq_('./is-buffer');\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet){\n  var buffers = [];\n  var packetData = packet.data;\n\n  function _deconstructPacket(data) {\n    if (!data) return data;\n\n    if (isBuf(data)) {\n      var placeholder = { _placeholder: true, num: buffers.length };\n      buffers.push(data);\n      return placeholder;\n    } else if (isArray(data)) {\n      var newData = new Array(data.length);\n      for (var i = 0; i < data.length; i++) {\n        newData[i] = _deconstructPacket(data[i]);\n      }\n      return newData;\n    } else if ('object' == typeof data && !(data instanceof Date)) {\n      var newData = {};\n      for (var key in data) {\n        newData[key] = _deconstructPacket(data[key]);\n      }\n      return newData;\n    }\n    return data;\n  }\n\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  var curPlaceHolder = 0;\n\n  function _reconstructPacket(data) {\n    if (data && data._placeholder) {\n      var buf = buffers[data.num]; // appropriate buffer (should be natural order anyway)\n      return buf;\n    } else if (isArray(data)) {\n      for (var i = 0; i < data.length; i++) {\n        data[i] = _reconstructPacket(data[i]);\n      }\n      return data;\n    } else if (data && 'object' == typeof data) {\n      for (var key in data) {\n        data[key] = _reconstructPacket(data[key]);\n      }\n      return data;\n    }\n    return data;\n  }\n\n  packet.data = _reconstructPacket(packet.data);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((global.Blob && obj instanceof Blob) ||\n        (global.File && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (obj && 'object' == typeof obj && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./is-buffer\":47,\"isarray\":48}],46:[function(_dereq_,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar debug = _dereq_('debug')('socket.io-parser');\nvar json = _dereq_('json3');\nvar isArray = _dereq_('isarray');\nvar Emitter = _dereq_('component-emitter');\nvar binary = _dereq_('./binary');\nvar isBuf = _dereq_('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'BINARY_EVENT',\n  'ACK',\n  'BINARY_ACK',\n  'ERROR'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {\n    encodeAsBinary(obj, callback);\n  }\n  else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n  var str = '';\n  var nsp = false;\n\n  // first is type\n  str += obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {\n    str += obj.attachments;\n    str += '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' != obj.nsp) {\n    nsp = true;\n    str += obj.nsp;\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    if (nsp) {\n      str += ',';\n      nsp = false;\n    }\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    if (nsp) str += ',';\n    str += json.stringify(obj.data);\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an ecoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if ('string' == typeof obj) {\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT == packet.type || exports.BINARY_ACK == packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  }\n  else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  }\n  else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var p = {};\n  var i = 0;\n\n  // look up type\n  p.type = Number(str.charAt(0));\n  if (null == exports.types[p.type]) return error();\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT == p.type || exports.BINARY_ACK == p.type) {\n    var buf = '';\n    while (str.charAt(++i) != '-') {\n      buf += str.charAt(i);\n      if (i == str.length) break;\n    }\n    if (buf != Number(buf) || str.charAt(i) != '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' == str.charAt(i + 1)) {\n    p.nsp = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' == c) break;\n      p.nsp += c;\n      if (i == str.length) break;\n    }\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    p.id = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      p.id += str.charAt(i);\n      if (i == str.length) break;\n    }\n    p.id = Number(p.id);\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    try {\n      p.data = json.parse(str.substr(i));\n    } catch(e){\n      return error();\n    }\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length == this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error(data){\n  return {\n    type: exports.ERROR,\n    data: 'parser error'\n  };\n}\n\n},{\"./binary\":45,\"./is-buffer\":47,\"component-emitter\":9,\"debug\":10,\"isarray\":48,\"json3\":49}],47:[function(_dereq_,module,exports){\n(function (global){\n\nmodule.exports = isBuf;\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (global.Buffer && global.Buffer.isBuffer(obj)) ||\n         (global.ArrayBuffer && obj instanceof ArrayBuffer);\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],48:[function(_dereq_,module,exports){\nmodule.exports=_dereq_(32)\n},{}],49:[function(_dereq_,module,exports){\n/*! JSON v3.2.6 | http://bestiejs.github.io/json3 | Copyright 2012-2013, Kit Cambridge | http://kit.mit-license.org */\n;(function (window) {\n  // Convenience aliases.\n  var getClass = {}.toString, isProperty, forEach, undef;\n\n  // Detect the `define` function exposed by asynchronous module loaders. The\n  // strict `define` check is necessary for compatibility with `r.js`.\n  var isLoader = typeof define === \"function\" && define.amd;\n\n  // Detect native implementations.\n  var nativeJSON = typeof JSON == \"object\" && JSON;\n\n  // Set up the JSON 3 namespace, preferring the CommonJS `exports` object if\n  // available.\n  var JSON3 = typeof exports == \"object\" && exports && !exports.nodeType && exports;\n\n  if (JSON3 && nativeJSON) {\n    // Explicitly delegate to the native `stringify` and `parse`\n    // implementations in CommonJS environments.\n    JSON3.stringify = nativeJSON.stringify;\n    JSON3.parse = nativeJSON.parse;\n  } else {\n    // Export for web browsers, JavaScript engines, and asynchronous module\n    // loaders, using the global `JSON` object if available.\n    JSON3 = window.JSON = nativeJSON || {};\n  }\n\n  // Test the `Date#getUTC*` methods. Based on work by @Yaffle.\n  var isExtended = new Date(-3509827334573292);\n  try {\n    // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\n    // results for certain dates in Opera >= 10.53.\n    isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&\n      // Safari < 2.0.2 stores the internal millisecond time value correctly,\n      // but clips the values returned by the date methods to the range of\n      // signed 32-bit integers ([-2 ** 31, 2 ** 31 - 1]).\n      isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\n  } catch (exception) {}\n\n  // Internal: Determines whether the native `JSON.stringify` and `parse`\n  // implementations are spec-compliant. Based on work by Ken Snyder.\n  function has(name) {\n    if (has[name] !== undef) {\n      // Return cached feature test result.\n      return has[name];\n    }\n\n    var isSupported;\n    if (name == \"bug-string-char-index\") {\n      // IE <= 7 doesn't support accessing string characters using square\n      // bracket notation. IE 8 only supports this for primitives.\n      isSupported = \"a\"[0] != \"a\";\n    } else if (name == \"json\") {\n      // Indicates whether both `JSON.stringify` and `JSON.parse` are\n      // supported.\n      isSupported = has(\"json-stringify\") && has(\"json-parse\");\n    } else {\n      var value, serialized = '{\"a\":[1,true,false,null,\"\\\\u0000\\\\b\\\\n\\\\f\\\\r\\\\t\"]}';\n      // Test `JSON.stringify`.\n      if (name == \"json-stringify\") {\n        var stringify = JSON3.stringify, stringifySupported = typeof stringify == \"function\" && isExtended;\n        if (stringifySupported) {\n          // A test function object with a custom `toJSON` method.\n          (value = function () {\n            return 1;\n          }).toJSON = value;\n          try {\n            stringifySupported =\n              // Firefox 3.1b1 and b2 serialize string, number, and boolean\n              // primitives as object literals.\n              stringify(0) === \"0\" &&\n              // FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object\n              // literals.\n              stringify(new Number()) === \"0\" &&\n              stringify(new String()) == '\"\"' &&\n              // FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or\n              // does not define a canonical JSON representation (this applies to\n              // objects with `toJSON` properties as well, *unless* they are nested\n              // within an object or array).\n              stringify(getClass) === undef &&\n              // IE 8 serializes `undefined` as `\"undefined\"`. Safari <= 5.1.7 and\n              // FF 3.1b3 pass this test.\n              stringify(undef) === undef &&\n              // Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,\n              // respectively, if the value is omitted entirely.\n              stringify() === undef &&\n              // FF 3.1b1, 2 throw an error if the given value is not a number,\n              // string, array, object, Boolean, or `null` literal. This applies to\n              // objects with custom `toJSON` methods as well, unless they are nested\n              // inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`\n              // methods entirely.\n              stringify(value) === \"1\" &&\n              stringify([value]) == \"[1]\" &&\n              // Prototype <= 1.6.1 serializes `[undefined]` as `\"[]\"` instead of\n              // `\"[null]\"`.\n              stringify([undef]) == \"[null]\" &&\n              // YUI 3.0.0b1 fails to serialize `null` literals.\n              stringify(null) == \"null\" &&\n              // FF 3.1b1, 2 halts serialization if an array contains a function:\n              // `[1, true, getClass, 1]` serializes as \"[1,true,],\". FF 3.1b3\n              // elides non-JSON values from objects and arrays, unless they\n              // define custom `toJSON` methods.\n              stringify([undef, getClass, null]) == \"[null,null,null]\" &&\n              // Simple serialization test. FF 3.1b1 uses Unicode escape sequences\n              // where character escape codes are expected (e.g., `\\b` => `\\u0008`).\n              stringify({ \"a\": [value, true, false, null, \"\\x00\\b\\n\\f\\r\\t\"] }) == serialized &&\n              // FF 3.1b1 and b2 ignore the `filter` and `width` arguments.\n              stringify(null, value) === \"1\" &&\n              stringify([1, 2], null, 1) == \"[\\n 1,\\n 2\\n]\" &&\n              // JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly\n              // serialize extended years.\n              stringify(new Date(-8.64e15)) == '\"-271821-04-20T00:00:00.000Z\"' &&\n              // The milliseconds are optional in ES 5, but required in 5.1.\n              stringify(new Date(8.64e15)) == '\"+275760-09-13T00:00:00.000Z\"' &&\n              // Firefox <= 11.0 incorrectly serializes years prior to 0 as negative\n              // four-digit years instead of six-digit years. Credits: @Yaffle.\n              stringify(new Date(-621987552e5)) == '\"-000001-01-01T00:00:00.000Z\"' &&\n              // Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond\n              // values less than 1000. Credits: @Yaffle.\n              stringify(new Date(-1)) == '\"1969-12-31T23:59:59.999Z\"';\n          } catch (exception) {\n            stringifySupported = false;\n          }\n        }\n        isSupported = stringifySupported;\n      }\n      // Test `JSON.parse`.\n      if (name == \"json-parse\") {\n        var parse = JSON3.parse;\n        if (typeof parse == \"function\") {\n          try {\n            // FF 3.1b1, b2 will throw an exception if a bare literal is provided.\n            // Conforming implementations should also coerce the initial argument to\n            // a string prior to parsing.\n            if (parse(\"0\") === 0 && !parse(false)) {\n              // Simple parsing test.\n              value = parse(serialized);\n              var parseSupported = value[\"a\"].length == 5 && value[\"a\"][0] === 1;\n              if (parseSupported) {\n                try {\n                  // Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.\n                  parseSupported = !parse('\"\\t\"');\n                } catch (exception) {}\n                if (parseSupported) {\n                  try {\n                    // FF 4.0 and 4.0.1 allow leading `+` signs and leading\n                    // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow\n                    // certain octal literals.\n                    parseSupported = parse(\"01\") !== 1;\n                  } catch (exception) {}\n                }\n                if (parseSupported) {\n                  try {\n                    // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal\n                    // points. These environments, along with FF 3.1b1 and 2,\n                    // also allow trailing commas in JSON objects and arrays.\n                    parseSupported = parse(\"1.\") !== 1;\n                  } catch (exception) {}\n                }\n              }\n            }\n          } catch (exception) {\n            parseSupported = false;\n          }\n        }\n        isSupported = parseSupported;\n      }\n    }\n    return has[name] = !!isSupported;\n  }\n\n  if (!has(\"json\")) {\n    // Common `[[Class]]` name aliases.\n    var functionClass = \"[object Function]\";\n    var dateClass = \"[object Date]\";\n    var numberClass = \"[object Number]\";\n    var stringClass = \"[object String]\";\n    var arrayClass = \"[object Array]\";\n    var booleanClass = \"[object Boolean]\";\n\n    // Detect incomplete support for accessing string characters by index.\n    var charIndexBuggy = has(\"bug-string-char-index\");\n\n    // Define additional utility methods if the `Date` methods are buggy.\n    if (!isExtended) {\n      var floor = Math.floor;\n      // A mapping between the months of the year and the number of days between\n      // January 1st and the first of the respective month.\n      var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n      // Internal: Calculates the number of days between the Unix epoch and the\n      // first day of the given month.\n      var getDay = function (year, month) {\n        return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\n      };\n    }\n\n    // Internal: Determines if a property is a direct property of the given\n    // object. Delegates to the native `Object#hasOwnProperty` method.\n    if (!(isProperty = {}.hasOwnProperty)) {\n      isProperty = function (property) {\n        var members = {}, constructor;\n        if ((members.__proto__ = null, members.__proto__ = {\n          // The *proto* property cannot be set multiple times in recent\n          // versions of Firefox and SeaMonkey.\n          \"toString\": 1\n        }, members).toString != getClass) {\n          // Safari <= 2.0.3 doesn't implement `Object#hasOwnProperty`, but\n          // supports the mutable *proto* property.\n          isProperty = function (property) {\n            // Capture and break the object's prototype chain (see section 8.6.2\n            // of the ES 5.1 spec). The parenthesized expression prevents an\n            // unsafe transformation by the Closure Compiler.\n            var original = this.__proto__, result = property in (this.__proto__ = null, this);\n            // Restore the original prototype chain.\n            this.__proto__ = original;\n            return result;\n          };\n        } else {\n          // Capture a reference to the top-level `Object` constructor.\n          constructor = members.constructor;\n          // Use the `constructor` property to simulate `Object#hasOwnProperty` in\n          // other environments.\n          isProperty = function (property) {\n            var parent = (this.constructor || constructor).prototype;\n            return property in this && !(property in parent && this[property] === parent[property]);\n          };\n        }\n        members = null;\n        return isProperty.call(this, property);\n      };\n    }\n\n    // Internal: A set of primitive types used by `isHostType`.\n    var PrimitiveTypes = {\n      'boolean': 1,\n      'number': 1,\n      'string': 1,\n      'undefined': 1\n    };\n\n    // Internal: Determines if the given object `property` value is a\n    // non-primitive.\n    var isHostType = function (object, property) {\n      var type = typeof object[property];\n      return type == 'object' ? !!object[property] : !PrimitiveTypes[type];\n    };\n\n    // Internal: Normalizes the `for...in` iteration algorithm across\n    // environments. Each enumerated key is yielded to a `callback` function.\n    forEach = function (object, callback) {\n      var size = 0, Properties, members, property;\n\n      // Tests for bugs in the current environment's `for...in` algorithm. The\n      // `valueOf` property inherits the non-enumerable flag from\n      // `Object.prototype` in older versions of IE, Netscape, and Mozilla.\n      (Properties = function () {\n        this.valueOf = 0;\n      }).prototype.valueOf = 0;\n\n      // Iterate over a new instance of the `Properties` class.\n      members = new Properties();\n      for (property in members) {\n        // Ignore all properties inherited from `Object.prototype`.\n        if (isProperty.call(members, property)) {\n          size++;\n        }\n      }\n      Properties = members = null;\n\n      // Normalize the iteration algorithm.\n      if (!size) {\n        // A list of non-enumerable properties inherited from `Object.prototype`.\n        members = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"];\n        // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\n        // properties.\n        forEach = function (object, callback) {\n          var isFunction = getClass.call(object) == functionClass, property, length;\n          var hasProperty = !isFunction && typeof object.constructor != 'function' && isHostType(object, 'hasOwnProperty') ? object.hasOwnProperty : isProperty;\n          for (property in object) {\n            // Gecko <= 1.0 enumerates the `prototype` property of functions under\n            // certain conditions; IE does not.\n            if (!(isFunction && property == \"prototype\") && hasProperty.call(object, property)) {\n              callback(property);\n            }\n          }\n          // Manually invoke the callback for each non-enumerable property.\n          for (length = members.length; property = members[--length]; hasProperty.call(object, property) && callback(property));\n        };\n      } else if (size == 2) {\n        // Safari <= 2.0.4 enumerates shadowed properties twice.\n        forEach = function (object, callback) {\n          // Create a set of iterated properties.\n          var members = {}, isFunction = getClass.call(object) == functionClass, property;\n          for (property in object) {\n            // Store each property name to prevent double enumeration. The\n            // `prototype` property of functions is not enumerated due to cross-\n            // environment inconsistencies.\n            if (!(isFunction && property == \"prototype\") && !isProperty.call(members, property) && (members[property] = 1) && isProperty.call(object, property)) {\n              callback(property);\n            }\n          }\n        };\n      } else {\n        // No bugs detected; use the standard `for...in` algorithm.\n        forEach = function (object, callback) {\n          var isFunction = getClass.call(object) == functionClass, property, isConstructor;\n          for (property in object) {\n            if (!(isFunction && property == \"prototype\") && isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\n              callback(property);\n            }\n          }\n          // Manually invoke the callback for the `constructor` property due to\n          // cross-environment inconsistencies.\n          if (isConstructor || isProperty.call(object, (property = \"constructor\"))) {\n            callback(property);\n          }\n        };\n      }\n      return forEach(object, callback);\n    };\n\n    // Public: Serializes a JavaScript `value` as a JSON string. The optional\n    // `filter` argument may specify either a function that alters how object and\n    // array members are serialized, or an array of strings and numbers that\n    // indicates which properties should be serialized. The optional `width`\n    // argument may be either a string or number that specifies the indentation\n    // level of the output.\n    if (!has(\"json-stringify\")) {\n      // Internal: A map of control characters and their escaped equivalents.\n      var Escapes = {\n        92: \"\\\\\\\\\",\n        34: '\\\\\"',\n        8: \"\\\\b\",\n        12: \"\\\\f\",\n        10: \"\\\\n\",\n        13: \"\\\\r\",\n        9: \"\\\\t\"\n      };\n\n      // Internal: Converts `value` into a zero-padded string such that its\n      // length is at least equal to `width`. The `width` must be <= 6.\n      var leadingZeroes = \"000000\";\n      var toPaddedString = function (width, value) {\n        // The `|| 0` expression is necessary to work around a bug in\n        // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\n        return (leadingZeroes + (value || 0)).slice(-width);\n      };\n\n      // Internal: Double-quotes a string `value`, replacing all ASCII control\n      // characters (characters with code unit values between 0 and 31) with\n      // their escaped equivalents. This is an implementation of the\n      // `Quote(value)` operation defined in ES 5.1 section 15.12.3.\n      var unicodePrefix = \"\\\\u00\";\n      var quote = function (value) {\n        var result = '\"', index = 0, length = value.length, isLarge = length > 10 && charIndexBuggy, symbols;\n        if (isLarge) {\n          symbols = value.split(\"\");\n        }\n        for (; index < length; index++) {\n          var charCode = value.charCodeAt(index);\n          // If the character is a control character, append its Unicode or\n          // shorthand escape sequence; otherwise, append the character as-is.\n          switch (charCode) {\n            case 8: case 9: case 10: case 12: case 13: case 34: case 92:\n              result += Escapes[charCode];\n              break;\n            default:\n              if (charCode < 32) {\n                result += unicodePrefix + toPaddedString(2, charCode.toString(16));\n                break;\n              }\n              result += isLarge ? symbols[index] : charIndexBuggy ? value.charAt(index) : value[index];\n          }\n        }\n        return result + '\"';\n      };\n\n      // Internal: Recursively serializes an object. Implements the\n      // `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\n      var serialize = function (property, object, callback, properties, whitespace, indentation, stack) {\n        var value, className, year, month, date, time, hours, minutes, seconds, milliseconds, results, element, index, length, prefix, result;\n        try {\n          // Necessary for host object support.\n          value = object[property];\n        } catch (exception) {}\n        if (typeof value == \"object\" && value) {\n          className = getClass.call(value);\n          if (className == dateClass && !isProperty.call(value, \"toJSON\")) {\n            if (value > -1 / 0 && value < 1 / 0) {\n              // Dates are serialized according to the `Date#toJSON` method\n              // specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15\n              // for the ISO 8601 date time string format.\n              if (getDay) {\n                // Manually compute the year, month, date, hours, minutes,\n                // seconds, and milliseconds if the `getUTC*` methods are\n                // buggy. Adapted from @Yaffle's `date-shim` project.\n                date = floor(value / 864e5);\n                for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++);\n                for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++);\n                date = 1 + date - getDay(year, month);\n                // The `time` value specifies the time within the day (see ES\n                // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used\n                // to compute `A modulo B`, as the `%` operator does not\n                // correspond to the `modulo` operation for negative numbers.\n                time = (value % 864e5 + 864e5) % 864e5;\n                // The hours, minutes, seconds, and milliseconds are obtained by\n                // decomposing the time within the day. See section 15.9.1.10.\n                hours = floor(time / 36e5) % 24;\n                minutes = floor(time / 6e4) % 60;\n                seconds = floor(time / 1e3) % 60;\n                milliseconds = time % 1e3;\n              } else {\n                year = value.getUTCFullYear();\n                month = value.getUTCMonth();\n                date = value.getUTCDate();\n                hours = value.getUTCHours();\n                minutes = value.getUTCMinutes();\n                seconds = value.getUTCSeconds();\n                milliseconds = value.getUTCMilliseconds();\n              }\n              // Serialize extended years correctly.\n              value = (year <= 0 || year >= 1e4 ? (year < 0 ? \"-\" : \"+\") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) +\n                \"-\" + toPaddedString(2, month + 1) + \"-\" + toPaddedString(2, date) +\n                // Months, dates, hours, minutes, and seconds should have two\n                // digits; milliseconds should have three.\n                \"T\" + toPaddedString(2, hours) + \":\" + toPaddedString(2, minutes) + \":\" + toPaddedString(2, seconds) +\n                // Milliseconds are optional in ES 5.0, but required in 5.1.\n                \".\" + toPaddedString(3, milliseconds) + \"Z\";\n            } else {\n              value = null;\n            }\n          } else if (typeof value.toJSON == \"function\" && ((className != numberClass && className != stringClass && className != arrayClass) || isProperty.call(value, \"toJSON\"))) {\n            // Prototype <= 1.6.1 adds non-standard `toJSON` methods to the\n            // `Number`, `String`, `Date`, and `Array` prototypes. JSON 3\n            // ignores all `toJSON` methods on these objects unless they are\n            // defined directly on an instance.\n            value = value.toJSON(property);\n          }\n        }\n        if (callback) {\n          // If a replacement function was provided, call it to obtain the value\n          // for serialization.\n          value = callback.call(object, property, value);\n        }\n        if (value === null) {\n          return \"null\";\n        }\n        className = getClass.call(value);\n        if (className == booleanClass) {\n          // Booleans are represented literally.\n          return \"\" + value;\n        } else if (className == numberClass) {\n          // JSON numbers must be finite. `Infinity` and `NaN` are serialized as\n          // `\"null\"`.\n          return value > -1 / 0 && value < 1 / 0 ? \"\" + value : \"null\";\n        } else if (className == stringClass) {\n          // Strings are double-quoted and escaped.\n          return quote(\"\" + value);\n        }\n        // Recursively serialize objects and arrays.\n        if (typeof value == \"object\") {\n          // Check for cyclic structures. This is a linear search; performance\n          // is inversely proportional to the number of unique nested objects.\n          for (length = stack.length; length--;) {\n            if (stack[length] === value) {\n              // Cyclic structures cannot be serialized by `JSON.stringify`.\n              throw TypeError();\n            }\n          }\n          // Add the object to the stack of traversed objects.\n          stack.push(value);\n          results = [];\n          // Save the current indentation level and indent one additional level.\n          prefix = indentation;\n          indentation += whitespace;\n          if (className == arrayClass) {\n            // Recursively serialize array elements.\n            for (index = 0, length = value.length; index < length; index++) {\n              element = serialize(index, value, callback, properties, whitespace, indentation, stack);\n              results.push(element === undef ? \"null\" : element);\n            }\n            result = results.length ? (whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : (\"[\" + results.join(\",\") + \"]\")) : \"[]\";\n          } else {\n            // Recursively serialize object members. Members are selected from\n            // either a user-specified list of property names, or the object\n            // itself.\n            forEach(properties || value, function (property) {\n              var element = serialize(property, value, callback, properties, whitespace, indentation, stack);\n              if (element !== undef) {\n                // According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\n                // is not the empty string, let `member` {quote(property) + \":\"}\n                // be the concatenation of `member` and the `space` character.\"\n                // The \"`space` character\" refers to the literal space\n                // character, not the `space` {width} argument provided to\n                // `JSON.stringify`.\n                results.push(quote(property) + \":\" + (whitespace ? \" \" : \"\") + element);\n              }\n            });\n            result = results.length ? (whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : (\"{\" + results.join(\",\") + \"}\")) : \"{}\";\n          }\n          // Remove the object from the traversed object stack.\n          stack.pop();\n          return result;\n        }\n      };\n\n      // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n      JSON3.stringify = function (source, filter, width) {\n        var whitespace, callback, properties, className;\n        if (typeof filter == \"function\" || typeof filter == \"object\" && filter) {\n          if ((className = getClass.call(filter)) == functionClass) {\n            callback = filter;\n          } else if (className == arrayClass) {\n            // Convert the property names array into a makeshift set.\n            properties = {};\n            for (var index = 0, length = filter.length, value; index < length; value = filter[index++], ((className = getClass.call(value)), className == stringClass || className == numberClass) && (properties[value] = 1));\n          }\n        }\n        if (width) {\n          if ((className = getClass.call(width)) == numberClass) {\n            // Convert the `width` to an integer and create a string containing\n            // `width` number of space characters.\n            if ((width -= width % 1) > 0) {\n              for (whitespace = \"\", width > 10 && (width = 10); whitespace.length < width; whitespace += \" \");\n            }\n          } else if (className == stringClass) {\n            whitespace = width.length <= 10 ? width : width.slice(0, 10);\n          }\n        }\n        // Opera <= 7.54u2 discards the values associated with empty string keys\n        // (`\"\"`) only if they are used directly within an object member list\n        // (e.g., `!(\"\" in { \"\": 1})`).\n        return serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\n      };\n    }\n\n    // Public: Parses a JSON source string.\n    if (!has(\"json-parse\")) {\n      var fromCharCode = String.fromCharCode;\n\n      // Internal: A map of escaped control characters and their unescaped\n      // equivalents.\n      var Unescapes = {\n        92: \"\\\\\",\n        34: '\"',\n        47: \"/\",\n        98: \"\\b\",\n        116: \"\\t\",\n        110: \"\\n\",\n        102: \"\\f\",\n        114: \"\\r\"\n      };\n\n      // Internal: Stores the parser state.\n      var Index, Source;\n\n      // Internal: Resets the parser state and throws a `SyntaxError`.\n      var abort = function() {\n        Index = Source = null;\n        throw SyntaxError();\n      };\n\n      // Internal: Returns the next token, or `\"$\"` if the parser has reached\n      // the end of the source string. A token may be a string, number, `null`\n      // literal, or Boolean literal.\n      var lex = function () {\n        var source = Source, length = source.length, value, begin, position, isSigned, charCode;\n        while (Index < length) {\n          charCode = source.charCodeAt(Index);\n          switch (charCode) {\n            case 9: case 10: case 13: case 32:\n              // Skip whitespace tokens, including tabs, carriage returns, line\n              // feeds, and space characters.\n              Index++;\n              break;\n            case 123: case 125: case 91: case 93: case 58: case 44:\n              // Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at\n              // the current position.\n              value = charIndexBuggy ? source.charAt(Index) : source[Index];\n              Index++;\n              return value;\n            case 34:\n              // `\"` delimits a JSON string; advance to the next character and\n              // begin parsing the string. String tokens are prefixed with the\n              // sentinel `@` character to distinguish them from punctuators and\n              // end-of-string tokens.\n              for (value = \"@\", Index++; Index < length;) {\n                charCode = source.charCodeAt(Index);\n                if (charCode < 32) {\n                  // Unescaped ASCII control characters (those with a code unit\n                  // less than the space character) are not permitted.\n                  abort();\n                } else if (charCode == 92) {\n                  // A reverse solidus (`\\`) marks the beginning of an escaped\n                  // control character (including `\"`, `\\`, and `/`) or Unicode\n                  // escape sequence.\n                  charCode = source.charCodeAt(++Index);\n                  switch (charCode) {\n                    case 92: case 34: case 47: case 98: case 116: case 110: case 102: case 114:\n                      // Revive escaped control characters.\n                      value += Unescapes[charCode];\n                      Index++;\n                      break;\n                    case 117:\n                      // `\\u` marks the beginning of a Unicode escape sequence.\n                      // Advance to the first character and validate the\n                      // four-digit code point.\n                      begin = ++Index;\n                      for (position = Index + 4; Index < position; Index++) {\n                        charCode = source.charCodeAt(Index);\n                        // A valid sequence comprises four hexdigits (case-\n                        // insensitive) that form a single hexadecimal value.\n                        if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {\n                          // Invalid Unicode escape sequence.\n                          abort();\n                        }\n                      }\n                      // Revive the escaped character.\n                      value += fromCharCode(\"0x\" + source.slice(begin, Index));\n                      break;\n                    default:\n                      // Invalid escape sequence.\n                      abort();\n                  }\n                } else {\n                  if (charCode == 34) {\n                    // An unescaped double-quote character marks the end of the\n                    // string.\n                    break;\n                  }\n                  charCode = source.charCodeAt(Index);\n                  begin = Index;\n                  // Optimize for the common case where a string is valid.\n                  while (charCode >= 32 && charCode != 92 && charCode != 34) {\n                    charCode = source.charCodeAt(++Index);\n                  }\n                  // Append the string as-is.\n                  value += source.slice(begin, Index);\n                }\n              }\n              if (source.charCodeAt(Index) == 34) {\n                // Advance to the next character and return the revived string.\n                Index++;\n                return value;\n              }\n              // Unterminated string.\n              abort();\n            default:\n              // Parse numbers and literals.\n              begin = Index;\n              // Advance past the negative sign, if one is specified.\n              if (charCode == 45) {\n                isSigned = true;\n                charCode = source.charCodeAt(++Index);\n              }\n              // Parse an integer or floating-point value.\n              if (charCode >= 48 && charCode <= 57) {\n                // Leading zeroes are interpreted as octal literals.\n                if (charCode == 48 && ((charCode = source.charCodeAt(Index + 1)), charCode >= 48 && charCode <= 57)) {\n                  // Illegal octal literal.\n                  abort();\n                }\n                isSigned = false;\n                // Parse the integer component.\n                for (; Index < length && ((charCode = source.charCodeAt(Index)), charCode >= 48 && charCode <= 57); Index++);\n                // Floats cannot contain a leading decimal point; however, this\n                // case is already accounted for by the parser.\n                if (source.charCodeAt(Index) == 46) {\n                  position = ++Index;\n                  // Parse the decimal component.\n                  for (; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n                  if (position == Index) {\n                    // Illegal trailing decimal.\n                    abort();\n                  }\n                  Index = position;\n                }\n                // Parse exponents. The `e` denoting the exponent is\n                // case-insensitive.\n                charCode = source.charCodeAt(Index);\n                if (charCode == 101 || charCode == 69) {\n                  charCode = source.charCodeAt(++Index);\n                  // Skip past the sign following the exponent, if one is\n                  // specified.\n                  if (charCode == 43 || charCode == 45) {\n                    Index++;\n                  }\n                  // Parse the exponential component.\n                  for (position = Index; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n                  if (position == Index) {\n                    // Illegal empty exponent.\n                    abort();\n                  }\n                  Index = position;\n                }\n                // Coerce the parsed value to a JavaScript number.\n                return +source.slice(begin, Index);\n              }\n              // A negative sign may only precede numbers.\n              if (isSigned) {\n                abort();\n              }\n              // `true`, `false`, and `null` literals.\n              if (source.slice(Index, Index + 4) == \"true\") {\n                Index += 4;\n                return true;\n              } else if (source.slice(Index, Index + 5) == \"false\") {\n                Index += 5;\n                return false;\n              } else if (source.slice(Index, Index + 4) == \"null\") {\n                Index += 4;\n                return null;\n              }\n              // Unrecognized token.\n              abort();\n          }\n        }\n        // Return the sentinel `$` character if the parser has reached the end\n        // of the source string.\n        return \"$\";\n      };\n\n      // Internal: Parses a JSON `value` token.\n      var get = function (value) {\n        var results, hasMembers;\n        if (value == \"$\") {\n          // Unexpected end of input.\n          abort();\n        }\n        if (typeof value == \"string\") {\n          if ((charIndexBuggy ? value.charAt(0) : value[0]) == \"@\") {\n            // Remove the sentinel `@` character.\n            return value.slice(1);\n          }\n          // Parse object and array literals.\n          if (value == \"[\") {\n            // Parses a JSON array, returning a new JavaScript array.\n            results = [];\n            for (;; hasMembers || (hasMembers = true)) {\n              value = lex();\n              // A closing square bracket marks the end of the array literal.\n              if (value == \"]\") {\n                break;\n              }\n              // If the array literal contains elements, the current token\n              // should be a comma separating the previous element from the\n              // next.\n              if (hasMembers) {\n                if (value == \",\") {\n                  value = lex();\n                  if (value == \"]\") {\n                    // Unexpected trailing `,` in array literal.\n                    abort();\n                  }\n                } else {\n                  // A `,` must separate each array element.\n                  abort();\n                }\n              }\n              // Elisions and leading commas are not permitted.\n              if (value == \",\") {\n                abort();\n              }\n              results.push(get(value));\n            }\n            return results;\n          } else if (value == \"{\") {\n            // Parses a JSON object, returning a new JavaScript object.\n            results = {};\n            for (;; hasMembers || (hasMembers = true)) {\n              value = lex();\n              // A closing curly brace marks the end of the object literal.\n              if (value == \"}\") {\n                break;\n              }\n              // If the object literal contains members, the current token\n              // should be a comma separator.\n              if (hasMembers) {\n                if (value == \",\") {\n                  value = lex();\n                  if (value == \"}\") {\n                    // Unexpected trailing `,` in object literal.\n                    abort();\n                  }\n                } else {\n                  // A `,` must separate each object member.\n                  abort();\n                }\n              }\n              // Leading commas are not permitted, object property names must be\n              // double-quoted strings, and a `:` must separate each property\n              // name and value.\n              if (value == \",\" || typeof value != \"string\" || (charIndexBuggy ? value.charAt(0) : value[0]) != \"@\" || lex() != \":\") {\n                abort();\n              }\n              results[value.slice(1)] = get(lex());\n            }\n            return results;\n          }\n          // Unexpected token encountered.\n          abort();\n        }\n        return value;\n      };\n\n      // Internal: Updates a traversed object member.\n      var update = function(source, property, callback) {\n        var element = walk(source, property, callback);\n        if (element === undef) {\n          delete source[property];\n        } else {\n          source[property] = element;\n        }\n      };\n\n      // Internal: Recursively traverses a parsed JSON object, invoking the\n      // `callback` function for each value. This is an implementation of the\n      // `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\n      var walk = function (source, property, callback) {\n        var value = source[property], length;\n        if (typeof value == \"object\" && value) {\n          // `forEach` can't be used to traverse an array in Opera <= 8.54\n          // because its `Object#hasOwnProperty` implementation returns `false`\n          // for array indices (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\n          if (getClass.call(value) == arrayClass) {\n            for (length = value.length; length--;) {\n              update(value, length, callback);\n            }\n          } else {\n            forEach(value, function (property) {\n              update(value, property, callback);\n            });\n          }\n        }\n        return callback.call(source, property, value);\n      };\n\n      // Public: `JSON.parse`. See ES 5.1 section 15.12.2.\n      JSON3.parse = function (source, callback) {\n        var result, value;\n        Index = 0;\n        Source = \"\" + source;\n        result = get(lex());\n        // If a JSON string contains multiple tokens, it is invalid.\n        if (lex() != \"$\") {\n          abort();\n        }\n        // Reset the parser state.\n        Index = Source = null;\n        return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\n      };\n    }\n  }\n\n  // Export for asynchronous module loaders.\n  if (isLoader) {\n    define(function () {\n      return JSON3;\n    });\n  }\n}(this));\n\n},{}],50:[function(_dereq_,module,exports){\nmodule.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n\n},{}]},{},[1])\n(1)\n});\n"
          },
          "redirectURL": "",
          "headersSize": 90,
          "bodySize": 0,
          "_transferSize": 90
        },
        "cache": {},
        "timings": {
          "blocked": 601.802999999563,
          "dns": 0.009000000319019819,
          "connect": 0.3520000000199843,
          "send": 0.1270000002480174,
          "wait": 1.7199999992959647,
          "receive": 5.2520000008368015,
          "ssl": -1
        },
        "connection": "3652",
        "pageref": "page_2"
      },
      {
        "startedDateTime": "2015-06-09T16:53:03.686Z",
        "time": 1153.1589999995049,
        "request": {
          "method": "GET",
          "url": "http://localhost:9001/javascripts/lib/ep_etherpad-lite/static/js/pad.js?callback=require.define",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "DNT",
              "value": "1"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, sdch"
            },
            {
              "name": "Host",
              "value": "localhost:9001"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.8,de;q=0.6"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.81 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Referer",
              "value": "http://localhost:9001/p/bla"
            },
            {
              "name": "Cookie",
              "value": "token=t.ltaoBcvzTd2Qbc9Uqjas; express_sid=s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "If-Modified-Since",
              "value": "Wed, 03 Jun 2015 18:13:43 GMT"
            }
          ],
          "queryString": [
            {
              "name": "callback",
              "value": "require.define"
            }
          ],
          "cookies": [
            {
              "name": "token",
              "value": "t.ltaoBcvzTd2Qbc9Uqjas",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "express_sid",
              "value": "s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo",
              "expires": null,
              "httpOnly": false,
              "secure": false
            }
          ],
          "headersSize": 588,
          "bodySize": 0
        },
        "response": {
          "status": 304,
          "statusText": "Not Modified",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "date",
              "value": "Tue, 09 Jun 2015 16:53:04 GMT"
            },
            {
              "name": "x-content-type-options",
              "value": "nosniff"
            },
            {
              "name": "last-modified",
              "value": "Wed, 03 Jun 2015 18:13:43 GMT"
            },
            {
              "name": "Server",
              "value": "Etherpad d11c92c (http://etherpad.org)"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            },
            {
              "name": "content-type",
              "value": "application/javascript; charset=utf-8"
            },
            {
              "name": "cache-control",
              "value": "max-age=21600"
            },
            {
              "name": "X-UA-Compatible",
              "value": "IE=Edge,chrome=1"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "expires",
              "value": "Tue, 09 Jun 2015 22:53:04 GMT"
            }
          ],
          "cookies": [],
          "content": {
            "size": 273633,
            "mimeType": "application/javascript",
            "text": "require.define({\n  \"ep_etherpad-lite/static/js/pad.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code. \n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n/**\n * Copyright 2009 Google Inc., 2011 Peter 'Pita' Martischka (Primary Technology Ltd)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* global $, window */\n\nvar socket;\n\n// These jQuery things should create local references, but for now `require()`\n// assigns to the global `$` and augments it with plugins.\nrequire('./jquery');\nrequire('./farbtastic');\nrequire('./excanvas');\nJSON = require('./json2');\n\nvar chat = require('./chat').chat;\nvar getCollabClient = require('./collab_client').getCollabClient;\nvar padconnectionstatus = require('./pad_connectionstatus').padconnectionstatus;\nvar padcookie = require('./pad_cookie').padcookie;\nvar padeditbar = require('./pad_editbar').padeditbar;\nvar padeditor = require('./pad_editor').padeditor;\nvar padimpexp = require('./pad_impexp').padimpexp;\nvar padmodals = require('./pad_modals').padmodals;\nvar padsavedrevs = require('./pad_savedrevs');\nvar paduserlist = require('./pad_userlist').paduserlist;\nvar padutils = require('./pad_utils').padutils;\nvar colorutils = require('./colorutils').colorutils;\nvar createCookie = require('./pad_utils').createCookie;\nvar readCookie = require('./pad_utils').readCookie;\nvar randomString = require('./pad_utils').randomString;\nvar gritter = require('./gritter').gritter;\n\nvar hooks = require('./pluginfw/hooks');\n\nvar receivedClientVars = false;\n\nfunction createCookie(name, value, days, path){ /* Warning Internet Explorer doesn't use this it uses the one from pad_utils.js */\n  if (days)\n  {\n    var date = new Date();\n    date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n    var expires = \"; expires=\" + date.toGMTString();\n  }\n  else{\n    var expires = \"\";\n  }\n  \n  if(!path){ // If the path isn't set then just whack the cookie on the root path\n    path = \"/\";\n  }\n  \n  //Check if the browser is IE and if so make sure the full path is set in the cookie\n  if((navigator.appName == 'Microsoft Internet Explorer') || ((navigator.appName == 'Netscape') && (new RegExp(\"Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})\").exec(navigator.userAgent) != null))){\n    document.cookie = name + \"=\" + value + expires + \"; path=\"+document.location;\n  }\n  else{\n    document.cookie = name + \"=\" + value + expires + \"; path=\" + path;\n  }\n}\n\nfunction readCookie(name)\n{\n  var nameEQ = name + \"=\";\n  var ca = document.cookie.split(';');\n  for (var i = 0; i < ca.length; i++)\n  {\n    var c = ca[i];\n    while (c.charAt(0) == ' ') c = c.substring(1, c.length);\n    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);\n  }\n  return null;\n}\n\nfunction randomString()\n{\n  var chars = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\";\n  var string_length = 20;\n  var randomstring = '';\n  for (var i = 0; i < string_length; i++)\n  {\n    var rnum = Math.floor(Math.random() * chars.length);\n    randomstring += chars.substring(rnum, rnum + 1);\n  }\n  return \"t.\" + randomstring;\n}\n\n// This array represents all GET-parameters which can be used to change a setting.\n//   name:     the parameter-name, eg  `?noColors=true`  =>  `noColors`\n//   checkVal: the callback is only executed when\n//                * the parameter was supplied and matches checkVal\n//                * the parameter was supplied and checkVal is null\n//   callback: the function to call when all above succeeds, `val` is the value supplied by the user\nvar getParameters = [\n  { name: \"noColors\",         checkVal: \"true\",  callback: function(val) { settings.noColors = true; $('#clearAuthorship').hide(); } },\n  { name: \"showControls\",     checkVal: \"false\", callback: function(val) { $('#editbar').addClass('hideControlsEditbar'); $('#editorcontainer').addClass('hideControlsEditor'); } },\n  { name: \"showChat\",         checkVal: \"false\", callback: function(val) { $('#chaticon').hide(); } },\n  { name: \"showLineNumbers\",  checkVal: \"false\", callback: function(val) { settings.LineNumbersDisabled = true; } },\n  { name: \"useMonospaceFont\", checkVal: \"true\",  callback: function(val) { settings.useMonospaceFontGlobal = true; } },\n  // If the username is set as a parameter we should set a global value that we can call once we have initiated the pad.\n  { name: \"userName\",         checkVal: null,    callback: function(val) { settings.globalUserName = decodeURIComponent(val); } },\n  // If the userColor is set as a parameter, set a global value to use once we have initiated the pad.\n  { name: \"userColor\",        checkVal: null,    callback: function(val) { settings.globalUserColor = decodeURIComponent(val); } },\n  { name: \"rtl\",              checkVal: \"true\",  callback: function(val) { settings.rtlIsTrue = true } },\n  { name: \"alwaysShowChat\",   checkVal: \"true\",  callback: function(val) { chat.stickToScreen(); } },\n  { name: \"chatAndUsers\",     checkVal: \"true\",  callback: function(val) { chat.chatAndUsers(); } },\n  { name: \"lang\",             checkVal: null,    callback: function(val) { window.html10n.localize([val, 'en']); } }\n];\n\nfunction getParams()\n{\n  // Tries server enforced options first..\n  for(var i = 0; i < getParameters.length; i++)\n  {\n   var setting = getParameters[i];\n    var value = clientVars.padOptions[setting.name];\n    if(value.toString() === setting.checkVal)\n    {\n      setting.callback(value);\n    }\n  }\n  \n  // Then URL applied stuff\n  var params = getUrlVars()\n  \n  for(var i = 0; i < getParameters.length; i++)\n  {\n    var setting = getParameters[i];\n    var value = params[setting.name];\n    \n    if(value && (value == setting.checkVal || setting.checkVal == null))\n    {\n      setting.callback(value);\n    }\n  }\n}\n\nfunction getUrlVars()\n{\n  var vars = [], hash;\n  var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');\n  for(var i = 0; i < hashes.length; i++)\n  {\n    hash = hashes[i].split('=');\n    vars.push(hash[0]);\n    vars[hash[0]] = hash[1];\n  }\n  return vars;\n}\n\nfunction savePassword()\n{\n  //set the password cookie\n  createCookie(\"password\",$(\"#passwordinput\").val(),null,document.location.pathname);\n  //reload\n  document.location=document.location;\n  return false;\n}\n\nfunction sendClientReady(isReconnect, messageType)\n{\n  messageType = typeof messageType !== 'undefined' ? messageType : 'CLIENT_READY';\n  var padId = document.location.pathname.substring(document.location.pathname.lastIndexOf(\"/\") + 1);\n  padId = decodeURIComponent(padId); // unescape neccesary due to Safari and Opera interpretation of spaces\n\n  if(!isReconnect)\n  {\n    var titleArray = document.title.split('|');\n    var title = titleArray[titleArray.length - 1];\n    document.title = padId.replace(/_+/g, ' ') + \" | \" + title;\n  }\n\n  var token = readCookie(\"token\");\n  if (token == null)\n  {\n    token = \"t.\" + randomString();\n    createCookie(\"token\", token, 60);\n  }\n  \n  var sessionID = decodeURIComponent(readCookie(\"sessionID\"));\n  var password = readCookie(\"password\");\n\n  var msg = {\n    \"component\": \"pad\",\n    \"type\": messageType,\n    \"padId\": padId,\n    \"sessionID\": sessionID,\n    \"password\": password,\n    \"token\": token,\n    \"protocolVersion\": 2\n  };\n  \n  //this is a reconnect, lets tell the server our revisionnumber\n  if(isReconnect == true)\n  {\n    msg.client_rev=pad.collabClient.getCurrentRevisionNumber();\n    msg.reconnect=true;\n  }\n  \n  socket.json.send(msg);\n}\n\nfunction handshake()\n{\n  var loc = document.location;\n  //get the correct port\n  var port = loc.port == \"\" ? (loc.protocol == \"https:\" ? 443 : 80) : loc.port;\n  //create the url\n  var url = loc.protocol + \"//\" + loc.hostname + \":\" + port + \"/\";\n  //find out in which subfolder we are\n  var resource =  exports.baseURL.substring(1)  + \"socket.io\";\n  //connect\n  socket = pad.socket = io.connect(url, {\n    // Allow deployers to host Etherpad on a non-root path\n    'path': exports.baseURL + \"socket.io\",\n    'resource': resource,\n    'max reconnection attempts': 3,\n    'sync disconnect on unload' : false\n  });\n\n  var disconnectTimeout;\n\n  socket.once('connect', function () {\n    sendClientReady(false);\n  });\n  \n  socket.on('reconnect', function () {\n    //reconnect is before the timeout, lets stop the timeout\n    if(disconnectTimeout)\n    {\n      clearTimeout(disconnectTimeout);\n    }\n\n    pad.collabClient.setChannelState(\"CONNECTED\");\n    pad.sendClientReady(true);\n  });\n  \n  socket.on('disconnect', function (reason) {\n    if(reason == \"booted\"){\n      pad.collabClient.setChannelState(\"DISCONNECTED\");\n    } else {\n      function disconnectEvent()\n      {\n        pad.collabClient.setChannelState(\"DISCONNECTED\", \"reconnect_timeout\");\n      }\n      \n      pad.collabClient.setChannelState(\"RECONNECTING\");\n      \n      disconnectTimeout = setTimeout(disconnectEvent, 20000);\n    }\n  });\n\n  var initalized = false;\n\n  socket.on('message', function(obj)\n  {\n    //the access was not granted, give the user a message\n    if(obj.accessStatus)\n    {\n      if(!receivedClientVars){\n        $('.passForm').submit(require(module.id).savePassword);\n      }\n\n      if(obj.accessStatus == \"deny\")\n      {\n        $('#loading').hide();\n        $(\"#permissionDenied\").show();\n\n        if(receivedClientVars)\n        {\n          // got kicked\n          $(\"#editorcontainer\").hide();\n          $(\"#editorloadingbox\").show();\n        }\n      }\n      else if(obj.accessStatus == \"needPassword\")\n      {\n        $('#loading').hide();\n        $('#passwordRequired').show();\n        $(\"#passwordinput\").focus();\n      }\n      else if(obj.accessStatus == \"wrongPassword\")\n      {\n        $('#loading').hide();\n        $('#wrongPassword').show();\n        $('#passwordRequired').show();\n        $(\"#passwordinput\").focus();\n      }\n    }\n    \n    //if we haven't recieved the clientVars yet, then this message should it be\n    else if (!receivedClientVars && obj.type == \"CLIENT_VARS\")\n    {\n      //log the message\n      if (window.console) console.log(obj);\n\n      receivedClientVars = true;\n\n      //set some client vars\n      clientVars = obj.data;\n      clientVars.userAgent = \"Anonymous\";\n      clientVars.collab_client_vars.clientAgent = \"Anonymous\";\n \n      //initalize the pad\n      pad._afterHandshake();\n      initalized = true;\n\n      if(clientVars.readonly){\n        chat.hide();\n        $('#myusernameedit').attr(\"disabled\", true);\n        $('#chatinput').attr(\"disabled\", true);\n        $('#chaticon').hide();\n        $('#options-chatandusers').parent().hide();\n        $('#options-stickychat').parent().hide();\n      }\n\n      $(\"body\").addClass(clientVars.readonly ? \"readonly\" : \"readwrite\")\n\n      padeditor.ace.callWithAce(function (ace) {\n        ace.ace_setEditable(!clientVars.readonly);\n      });\n\n      // If the LineNumbersDisabled value is set to true then we need to hide the Line Numbers\n      if (settings.LineNumbersDisabled == true)\n      {\n        pad.changeViewOption('showLineNumbers', false);\n      }\n\n      // If the noColors value is set to true then we need to hide the background colors on the ace spans\n      if (settings.noColors == true)\n      {\n        pad.changeViewOption('noColors', true);\n      }\n      \n      if (settings.rtlIsTrue == true)\n      {\n        pad.changeViewOption('rtlIsTrue', true);\n      }\n\n      // If the Monospacefont value is set to true then change it to monospace.\n      if (settings.useMonospaceFontGlobal == true)\n      {\n        pad.changeViewOption('useMonospaceFont', true);\n      }\n      // if the globalUserName value is set we need to tell the server and the client about the new authorname\n      if (settings.globalUserName !== false)\n      {\n        pad.notifyChangeName(settings.globalUserName); // Notifies the server\n        pad.myUserInfo.name = settings.globalUserName;\n        $('#myusernameedit').val(settings.globalUserName); // Updates the current users UI\n      }\n      if (settings.globalUserColor !== false && colorutils.isCssHex(settings.globalUserColor))\n      {\n\n        // Add a 'globalUserColor' property to myUserInfo, so collabClient knows we have a query parameter.\n        pad.myUserInfo.globalUserColor = settings.globalUserColor;\n        pad.notifyChangeColor(settings.globalUserColor); // Updates pad.myUserInfo.colorId\n        paduserlist.setMyUserInfo(pad.myUserInfo);\n      }\n    }\n    //This handles every Message after the clientVars\n    else\n    {\n      //this message advices the client to disconnect\n      if (obj.disconnect)\n      {\n        console.warn(\"FORCED TO DISCONNECT\");\n        console.warn(obj);\n        padconnectionstatus.disconnected(obj.disconnect);\n        socket.disconnect();\n        return;\n      }\n      else\n      {\n        pad.collabClient.handleMessageFromServer(obj);\n      }\n    }\n  });\n  // Bind the colorpicker\n  var fb = $('#colorpicker').farbtastic({ callback: '#mycolorpickerpreview', width: 220});\n  // Bind the read only button  \n  $('#readonlyinput').on('click',function(){\n    padeditbar.setEmbedLinks();\n  });\n}\n\n$.extend($.gritter.options, { \n  position: 'bottom-right', // defaults to 'top-right' but can be 'bottom-left', 'bottom-right', 'top-left', 'top-right' (added in 1.7.1)\n  fade: false, // dont fade, too jerky on mobile\n  time: 6000 // hang on the screen for...\n});\n\nvar pad = {\n  // don't access these directly from outside this file, except\n  // for debugging\n  collabClient: null,\n  myUserInfo: null,\n  diagnosticInfo: {},\n  initTime: 0,\n  clientTimeOffset: null,\n  padOptions: {},\n\n  // these don't require init; clientVars should all go through here\n  getPadId: function()\n  {\n    return clientVars.padId;\n  },\n  getClientIp: function()\n  {\n    return clientVars.clientIp;\n  },\n  getColorPalette: function()\n  {\n    return clientVars.colorPalette;\n  },\n  getDisplayUserAgent: function()\n  {\n    return padutils.uaDisplay(clientVars.userAgent);\n  },\n  getIsDebugEnabled: function()\n  {\n    return clientVars.debugEnabled;\n  },\n  getPrivilege: function(name)\n  {\n    return clientVars.accountPrivs[name];\n  },\n  getUserIsGuest: function()\n  {\n    return clientVars.userIsGuest;\n  },\n  getUserId: function()\n  {\n    return pad.myUserInfo.userId;\n  },\n  getUserName: function()\n  {\n    return pad.myUserInfo.name;\n  },\n  userList: function()\n  {\n    return paduserlist.users();\n  },\n  sendClientReady: function(isReconnect, messageType)\n  {\n    messageType = typeof messageType !== 'undefined' ? messageType : 'CLIENT_READY';\n    sendClientReady(isReconnect, messageType);\n  },\n  switchToPad: function(padId)\n  {\n    var newHref = new RegExp(/.*\\/p\\/[^\\/]+/).exec(document.location.pathname) || clientVars.padId;\n    newHref = newHref[0];    \n    if (options != null){\n      newHref = newHref + '?' + options;\n    }\n\n    if(window.history && window.history.pushState)\n    {\n      $('#chattext p').remove(); //clear the chat messages\n      window.history.pushState(\"\", \"\", newHref);      \n      receivedClientVars = false;\n      sendClientReady(false, 'SWITCH_TO_PAD');\n    }\n    else // fallback\n    {\n      window.location.href = newHref;\n    }\n  },\n  sendClientMessage: function(msg)\n  {\n    pad.collabClient.sendClientMessage(msg);\n  },\n  createCookie: createCookie,\n\n  init: function()\n  {\n    padutils.setupGlobalExceptionHandler();\n\n    $(document).ready(function()\n    {\n      // start the custom js\n      if (typeof customStart == \"function\") customStart();\n      handshake();\n\n      // To use etherpad you have to allow cookies.\n      // This will check if the creation of a test-cookie has success.\n      // Otherwise it shows up a message to the user.\n      createCookie(\"test\", \"test\");\n      if (!readCookie(\"test\"))\n      {\n        $('#loading').hide();\n        $('#noCookie').show();\n      }\n    });\n  },\n  _afterHandshake: function()\n  {\n    pad.clientTimeOffset = new Date().getTime() - clientVars.serverTimestamp;\n  \n    //initialize the chat\n    chat.init(this);\n    getParams();\n\n    padcookie.init(); // initialize the cookies\n    pad.initTime = +(new Date());\n    pad.padOptions = clientVars.initialOptions;\n\n    if ((!browser.msie) && (!(browser.firefox && browser.version.indexOf(\"1.8.\") == 0)))\n    {\n      document.domain = document.domain; // for comet\n    }\n\n    // for IE\n    if (browser.msie)\n    {\n      try\n      {\n        document.execCommand(\"BackgroundImageCache\", false, true);\n      }\n      catch (e)\n      {}\n    }\n\n    // order of inits is important here:\n    pad.myUserInfo = {\n      userId: clientVars.userId,\n      name: clientVars.userName,\n      ip: pad.getClientIp(),\n      colorId: clientVars.userColor,\n      userAgent: pad.getDisplayUserAgent()\n    };\n\n    padimpexp.init(this);\n    padsavedrevs.init(this);\n\n    padeditor.init(postAceInit, pad.padOptions.view || {}, this);\n\n    paduserlist.init(pad.myUserInfo, this);\n    padconnectionstatus.init();\n    padmodals.init(this);\n\n    pad.collabClient = getCollabClient(padeditor.ace, clientVars.collab_client_vars, pad.myUserInfo, {\n      colorPalette: pad.getColorPalette()\n    }, pad);\n    pad.collabClient.setOnUserJoin(pad.handleUserJoin);\n    pad.collabClient.setOnUpdateUserInfo(pad.handleUserUpdate);\n    pad.collabClient.setOnUserLeave(pad.handleUserLeave);\n    pad.collabClient.setOnClientMessage(pad.handleClientMessage);\n    pad.collabClient.setOnServerMessage(pad.handleServerMessage);\n    pad.collabClient.setOnChannelStateChange(pad.handleChannelStateChange);\n    pad.collabClient.setOnInternalAction(pad.handleCollabAction);\n\n    // load initial chat-messages\n    if(clientVars.chatHead != -1)\n    {\n      var chatHead = clientVars.chatHead;\n      var start = Math.max(chatHead - 100, 0);\n      pad.collabClient.sendMessage({\"type\": \"GET_CHAT_MESSAGES\", \"start\": start, \"end\": chatHead});\n    }\n    else // there are no messages\n    {\n      $(\"#chatloadmessagesbutton\").css(\"display\", \"none\");\n    }\n\n    function postAceInit()\n    {\n      padeditbar.init();\n      setTimeout(function()\n      {\n        padeditor.ace.focus();\n      }, 0);\n      if(padcookie.getPref(\"chatAlwaysVisible\")){ // if we have a cookie for always showing chat then show it\n        chat.stickToScreen(true); // stick it to the screen\n        $('#options-stickychat').prop(\"checked\", true); // set the checkbox to on\n      }\n      if(padcookie.getPref(\"chatAndUsers\")){ // if we have a cookie for always showing chat then show it\n        chat.chatAndUsers(true); // stick it to the screen\n        $('#options-chatandusers').prop(\"checked\", true); // set the checkbox to on\n      }\n      if(padcookie.getPref(\"showAuthorshipColors\") == false){\n        pad.changeViewOption('showAuthorColors', false);\n      }\n      if(padcookie.getPref(\"showLineNumbers\") == false){\n        pad.changeViewOption('showLineNumbers', false);\n      }\n      if(padcookie.getPref(\"rtlIsTrue\") == true){\n        pad.changeViewOption('rtlIsTrue', true);\n      }\n\n      var fonts = ['useMonospaceFont', 'useOpenDyslexicFont', 'useComicSansFont', 'useCourierNewFont', 'useGeorgiaFont', 'useImpactFont',\n        'useLucidaFont', 'useLucidaSansFont', 'usePalatinoFont', 'useTahomaFont', 'useTimesNewRomanFont',\n        'useTrebuchetFont', 'useVerdanaFont', 'useSymbolFont', 'useWebdingsFont', 'useWingDingsFont', 'useSansSerifFont',\n        'useSerifFont'];\n\n      $.each(fonts, function(i, font){\n        if(padcookie.getPref(font) == true){\n          pad.changeViewOption(font, true);\n        }\n      })\n\n      hooks.aCallAll(\"postAceInit\", {ace: padeditor.ace, pad: pad});\n    }\n  },\n  dispose: function()\n  {\n    padeditor.dispose();\n  },\n  notifyChangeName: function(newName)\n  {\n    pad.myUserInfo.name = newName;\n    pad.collabClient.updateUserInfo(pad.myUserInfo);\n  },\n  notifyChangeColor: function(newColorId)\n  {\n    pad.myUserInfo.colorId = newColorId;\n    pad.collabClient.updateUserInfo(pad.myUserInfo);\n  },\n  changePadOption: function(key, value)\n  {\n    var options = {};\n    options[key] = value;\n    pad.handleOptionsChange(options);\n    pad.collabClient.sendClientMessage(\n    {\n      type: 'padoptions',\n      options: options,\n      changedBy: pad.myUserInfo.name || \"unnamed\"\n    });\n  },\n  changeViewOption: function(key, value)\n  {\n    var options = {\n      view: {}\n    };\n    options.view[key] = value;\n    pad.handleOptionsChange(options);\n  },\n  handleOptionsChange: function(opts)\n  {\n    // opts object is a full set of options or just\n    // some options to change\n    if (opts.view)\n    {\n      if (!pad.padOptions.view)\n      {\n        pad.padOptions.view = {};\n      }\n      for (var k in opts.view)\n      {\n        pad.padOptions.view[k] = opts.view[k];\n        padcookie.setPref(k, opts.view[k]);\n      }\n      padeditor.setViewOptions(pad.padOptions.view);\n    }\n    if (opts.guestPolicy)\n    {\n      // order important here\n      pad.padOptions.guestPolicy = opts.guestPolicy;\n    }\n  },\n  getPadOptions: function()\n  {\n    // caller shouldn't mutate the object\n    return pad.padOptions;\n  },\n  isPadPublic: function()\n  {\n    return pad.getPadOptions().guestPolicy == 'allow';\n  },\n  suggestUserName: function(userId, name)\n  {\n    pad.collabClient.sendClientMessage(\n    {\n      type: 'suggestUserName',\n      unnamedId: userId,\n      newName: name\n    });\n  },\n  handleUserJoin: function(userInfo)\n  {\n    paduserlist.userJoinOrUpdate(userInfo);\n  },\n  handleUserUpdate: function(userInfo)\n  {\n    paduserlist.userJoinOrUpdate(userInfo);\n  },\n  handleUserLeave: function(userInfo)\n  {\n    paduserlist.userLeave(userInfo);\n  },\n  handleClientMessage: function(msg)\n  {\n    if (msg.type == 'suggestUserName')\n    {\n      if (msg.unnamedId == pad.myUserInfo.userId && msg.newName && !pad.myUserInfo.name)\n      {\n        pad.notifyChangeName(msg.newName);\n        paduserlist.setMyUserInfo(pad.myUserInfo);\n      }\n    }\n    else if (msg.type == 'newRevisionList')\n    {\n      padsavedrevs.newRevisionList(msg.revisionList);\n    }\n    else if (msg.type == 'revisionLabel')\n    {\n      padsavedrevs.newRevisionList(msg.revisionList);\n    }\n    else if (msg.type == 'padoptions')\n    {\n      var opts = msg.options;\n      pad.handleOptionsChange(opts);\n    }\n    else if (msg.type == 'guestanswer')\n    {\n      // someone answered a prompt, remove it\n      paduserlist.removeGuestPrompt(msg.guestId);\n    }\n  },\n  dmesg: function(m)\n  {\n    if (pad.getIsDebugEnabled())\n    {\n      var djs = $('#djs').get(0);\n      var wasAtBottom = (djs.scrollTop - (djs.scrollHeight - $(djs).height()) >= -20);\n      $('#djs').append('<p>' + m + '</p>');\n      if (wasAtBottom)\n      {\n        djs.scrollTop = djs.scrollHeight;\n      }\n    }\n  },\n  handleServerMessage: function(m)\n  {\n    if (m.type == 'NOTICE')\n    {\n      if (m.text)\n      {\n        alertBar.displayMessage(function(abar)\n        {\n          abar.find(\"#servermsgdate\").text(\" (\" + padutils.simpleDateTime(new Date) + \")\");\n          abar.find(\"#servermsgtext\").text(m.text);\n        });\n      }\n      if (m.js)\n      {\n        window['ev' + 'al'](m.js);\n      }\n    }\n    else if (m.type == 'GUEST_PROMPT')\n    {\n      paduserlist.showGuestPrompt(m.userId, m.displayName);\n    }\n  },\n  handleChannelStateChange: function(newState, message)\n  {\n    var oldFullyConnected = !! padconnectionstatus.isFullyConnected();\n    var wasConnecting = (padconnectionstatus.getStatus().what == 'connecting');\n    if (newState == \"CONNECTED\")\n    {\n      padconnectionstatus.connected();\n    }\n    else if (newState == \"RECONNECTING\")\n    {\n      padconnectionstatus.reconnecting();\n    }\n    else if (newState == \"DISCONNECTED\")\n    {\n      pad.diagnosticInfo.disconnectedMessage = message;\n      pad.diagnosticInfo.padId = pad.getPadId();\n      pad.diagnosticInfo.socket = {};\n      \n      //we filter non objects from the socket object and put them in the diagnosticInfo \n      //this ensures we have no cyclic data - this allows us to stringify the data\n      for(var i in socket.socket)\n      {\n        var value = socket.socket[i];\n        var type = typeof value;\n        \n        if(type == \"string\" || type == \"number\")\n        {\n          pad.diagnosticInfo.socket[i] = value;\n        }\n      }\n    \n      pad.asyncSendDiagnosticInfo();\n      if (typeof window.ajlog == \"string\")\n      {\n        window.ajlog += (\"Disconnected: \" + message + '\\n');\n      }\n      padeditor.disable();\n      padeditbar.disable();\n      padimpexp.disable();\n\n      padconnectionstatus.disconnected(message);\n    }\n    var newFullyConnected = !! padconnectionstatus.isFullyConnected();\n    if (newFullyConnected != oldFullyConnected)\n    {\n      pad.handleIsFullyConnected(newFullyConnected, wasConnecting);\n    }\n  },\n  handleIsFullyConnected: function(isConnected, isInitialConnect)\n  {\n    pad.determineChatVisibility(isConnected && !isInitialConnect);\n    pad.determineChatAndUsersVisibility(isConnected && !isInitialConnect);\n    pad.determineAuthorshipColorsVisibility();\n    setTimeout(function(){\n      padeditbar.toggleDropDown(\"none\");\n    }, 1000);\n  },\n  determineChatVisibility: function(asNowConnectedFeedback){\n    var chatVisCookie = padcookie.getPref('chatAlwaysVisible');\n    if(chatVisCookie){ // if the cookie is set for chat always visible\n      chat.stickToScreen(true); // stick it to the screen\n      $('#options-stickychat').prop(\"checked\", true); // set the checkbox to on\n    }\n    else{\n      $('#options-stickychat').prop(\"checked\", false); // set the checkbox for off\n    }\n  },\n  determineChatAndUsersVisibility: function(asNowConnectedFeedback){\n    var chatAUVisCookie = padcookie.getPref('chatAndUsersVisible');\n    if(chatAUVisCookie){ // if the cookie is set for chat always visible\n      chat.chatAndUsers(true); // stick it to the screen\n      $('#options-chatandusers').prop(\"checked\", true); // set the checkbox to on\n    }\n    else{\n      $('#options-chatandusers').prop(\"checked\", false); // set the checkbox for off\n    }\n  },\n  determineAuthorshipColorsVisibility: function(){\n    var authColCookie = padcookie.getPref('showAuthorshipColors');\n    if (authColCookie){\n      pad.changeViewOption('showAuthorColors', true);\n      $('#options-colorscheck').prop(\"checked\", true);\n    }\n    else {\n      $('#options-colorscheck').prop(\"checked\", false);\n    }\n  },\n  handleCollabAction: function(action)\n  {\n    if (action == \"commitPerformed\")\n    {\n      padeditbar.setSyncStatus(\"syncing\");\n    }\n    else if (action == \"newlyIdle\")\n    {\n      padeditbar.setSyncStatus(\"done\");\n    }\n  },\n  hideServerMessage: function()\n  {\n    alertBar.hideMessage();\n  },\n  asyncSendDiagnosticInfo: function()\n  {\n    window.setTimeout(function()\n    {\n      $.ajax(\n      {\n        type: 'post',\n        url: '/ep/pad/connection-diagnostic-info',\n        data: {\n          diagnosticInfo: JSON.stringify(pad.diagnosticInfo)\n        },\n        success: function()\n        {},\n        error: function()\n        {}\n      });\n    }, 0);\n  },\n  forceReconnect: function()\n  {\n    $('form#reconnectform input.padId').val(pad.getPadId());\n    pad.diagnosticInfo.collabDiagnosticInfo = pad.collabClient.getDiagnosticInfo();\n    $('form#reconnectform input.diagnosticInfo').val(JSON.stringify(pad.diagnosticInfo));\n    $('form#reconnectform input.missedChanges').val(JSON.stringify(pad.collabClient.getMissedChanges()));\n    $('form#reconnectform').submit();\n  },\n  // this is called from code put into a frame from the server:\n  handleImportExportFrameCall: function(callName, varargs)\n  {\n    padimpexp.handleFrameCall.call(padimpexp, callName, Array.prototype.slice.call(arguments, 1));\n  },\n  callWhenNotCommitting: function(f)\n  {\n    pad.collabClient.callWhenNotCommitting(f);\n  },\n  getCollabRevisionNumber: function()\n  {\n    return pad.collabClient.getCurrentRevisionNumber();\n  },\n  isFullyConnected: function()\n  {\n    return padconnectionstatus.isFullyConnected();\n  },\n  addHistoricalAuthors: function(data)\n  {\n    if (!pad.collabClient)\n    {\n      window.setTimeout(function()\n      {\n        pad.addHistoricalAuthors(data);\n      }, 1000);\n    }\n    else\n    {\n      pad.collabClient.addHistoricalAuthors(data);\n    }\n  }\n};\n\nvar alertBar = (function()\n{\n\n  var animator = padutils.makeShowHideAnimator(arriveAtAnimationState, false, 25, 400);\n\n  function arriveAtAnimationState(state)\n  {\n    if (state == -1)\n    {\n      $(\"#alertbar\").css('opacity', 0).css('display', 'block');\n    }\n    else if (state == 0)\n    {\n      $(\"#alertbar\").css('opacity', 1);\n    }\n    else if (state == 1)\n    {\n      $(\"#alertbar\").css('opacity', 0).css('display', 'none');\n    }\n    else if (state < 0)\n    {\n      $(\"#alertbar\").css('opacity', state + 1);\n    }\n    else if (state > 0)\n    {\n      $(\"#alertbar\").css('opacity', 1 - state);\n    }\n  }\n\n  var self = {\n    displayMessage: function(setupFunc)\n    {\n      animator.show();\n      setupFunc($(\"#alertbar\"));\n    },\n    hideMessage: function()\n    {\n      animator.hide();\n    }\n  };\n  return self;\n}());\n\nfunction init() {\n  return pad.init();\n}\n\nvar settings = {\n  LineNumbersDisabled: false\n, noColors: false\n, useMonospaceFontGlobal: false\n, globalUserName: false\n, globalUserColor: false\n, rtlIsTrue: false\n};\n\npad.settings = settings;\nexports.baseURL = '';\nexports.settings = settings;\nexports.createCookie = createCookie;\nexports.readCookie = readCookie;\nexports.randomString = randomString;\nexports.getParams = getParams;\nexports.getUrlVars = getUrlVars;\nexports.savePassword = savePassword;\nexports.handshake = handshake;\nexports.pad = pad;\nexports.init = init;\nexports.alertBar = alertBar;\n\n}\n, \"ep_etherpad-lite/static/js/pad_utils.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code. \n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar Security = require('./security');\n\n/**\n * Generates a random String with the given length. Is needed to generate the Author, Group, readonly, session Ids\n */\n\nfunction randomString(len)\n{\n  var chars = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\";\n  var randomstring = '';\n  len = len || 20\n  for (var i = 0; i < len; i++)\n  {\n    var rnum = Math.floor(Math.random() * chars.length);\n    randomstring += chars.substring(rnum, rnum + 1);\n  }\n  return randomstring;\n}\n\nfunction createCookie(name, value, days, path){ /* Used by IE */\n  if (days)\n  {\n    var date = new Date();\n    date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n    var expires = \"; expires=\" + date.toGMTString();\n  }\n  else{\n    var expires = \"\";\n  }\n\n  if(!path){ // IF the Path of the cookie isn't set then just create it on root\n    path = \"/\";\n  }\n\n  //Check if the browser is IE and if so make sure the full path is set in the cookie\n  if((navigator.appName == 'Microsoft Internet Explorer') || ((navigator.appName == 'Netscape') && (new RegExp(\"Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})\").exec(navigator.userAgent) != null))){\n    document.cookie = name + \"=\" + value + expires + \"; path=/\"; /* Note this bodge fix for IE is temporary until auth is rewritten */\n  }\n  else{\n    document.cookie = name + \"=\" + value + expires + \"; path=\" + path;\n  }\n\n}\n\nfunction readCookie(name)\n{\n  var nameEQ = name + \"=\";\n  var ca = document.cookie.split(';');\n  for (var i = 0; i < ca.length; i++)\n  {\n    var c = ca[i];\n    while (c.charAt(0) == ' ') c = c.substring(1, c.length);\n    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);\n  }\n  return null;\n}\n\nvar padutils = {\n  escapeHtml: function(x)\n  {\n    return Security.escapeHTML(String(x));\n  },\n  uniqueId: function()\n  {\n    var pad = require('./pad').pad; // Sidestep circular dependency\n    function encodeNum(n, width)\n    {\n      // returns string that is exactly 'width' chars, padding with zeros\n      // and taking rightmost digits\n      return (Array(width + 1).join('0') + Number(n).toString(35)).slice(-width);\n    }\n    return [pad.getClientIp(), encodeNum(+new Date, 7), encodeNum(Math.floor(Math.random() * 1e9), 4)].join('.');\n  },\n  uaDisplay: function(ua)\n  {\n    var m;\n\n    function clean(a)\n    {\n      var maxlen = 16;\n      a = a.replace(/[^a-zA-Z0-9\\.]/g, '');\n      if (a.length > maxlen)\n      {\n        a = a.substr(0, maxlen);\n      }\n      return a;\n    }\n\n    function checkver(name)\n    {\n      var m = ua.match(RegExp(name + '\\\\/([\\\\d\\\\.]+)'));\n      if (m && m.length > 1)\n      {\n        return clean(name + m[1]);\n      }\n      return null;\n    }\n\n    // firefox\n    if (checkver('Firefox'))\n    {\n      return checkver('Firefox');\n    }\n\n    // misc browsers, including IE\n    m = ua.match(/compatible; ([^;]+);/);\n    if (m && m.length > 1)\n    {\n      return clean(m[1]);\n    }\n\n    // iphone\n    if (ua.match(/\\(iPhone;/))\n    {\n      return 'iPhone';\n    }\n\n    // chrome\n    if (checkver('Chrome'))\n    {\n      return checkver('Chrome');\n    }\n\n    // safari\n    m = ua.match(/Safari\\/[\\d\\.]+/);\n    if (m)\n    {\n      var v = '?';\n      m = ua.match(/Version\\/([\\d\\.]+)/);\n      if (m && m.length > 1)\n      {\n        v = m[1];\n      }\n      return clean('Safari' + v);\n    }\n\n    // everything else\n    var x = ua.split(' ')[0];\n    return clean(x);\n  },\n  // e.g. \"Thu Jun 18 2009 13:09\"\n  simpleDateTime: function(date)\n  {\n    var d = new Date(+date); // accept either number or date\n    var dayOfWeek = (['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'])[d.getDay()];\n    var month = (['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'])[d.getMonth()];\n    var dayOfMonth = d.getDate();\n    var year = d.getFullYear();\n    var hourmin = d.getHours() + \":\" + (\"0\" + d.getMinutes()).slice(-2);\n    return dayOfWeek + ' ' + month + ' ' + dayOfMonth + ' ' + year + ' ' + hourmin;\n  },\n  findURLs: function(text)\n  {\n    // copied from ACE\n    var _REGEX_WORDCHAR = /[\\u0030-\\u0039\\u0041-\\u005A\\u0061-\\u007A\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u00FF\\u0100-\\u1FFF\\u3040-\\u9FFF\\uF900-\\uFDFF\\uFE70-\\uFEFE\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFDC]/;\n    var _REGEX_URLCHAR = new RegExp('(' + /[-:@a-zA-Z0-9_.,~%+\\/?=&#;()$]/.source + '|' + _REGEX_WORDCHAR.source + ')');\n    var _REGEX_URL = new RegExp(/(?:(?:https?|s?ftp|ftps|file|nfs):\\/\\/|mailto:)/.source + _REGEX_URLCHAR.source + '*(?![:.,;])' + _REGEX_URLCHAR.source, 'g');\n\n    // returns null if no URLs, or [[startIndex1, url1], [startIndex2, url2], ...]\n\n\n    function _findURLs(text)\n    {\n      _REGEX_URL.lastIndex = 0;\n      var urls = null;\n      var execResult;\n      while ((execResult = _REGEX_URL.exec(text)))\n      {\n        urls = (urls || []);\n        var startIndex = execResult.index;\n        var url = execResult[0];\n        urls.push([startIndex, url]);\n      }\n\n      return urls;\n    }\n\n    return _findURLs(text);\n  },\n  escapeHtmlWithClickableLinks: function(text, target)\n  {\n    var idx = 0;\n    var pieces = [];\n    var urls = padutils.findURLs(text);\n\n    function advanceTo(i)\n    {\n      if (i > idx)\n      {\n        pieces.push(Security.escapeHTML(text.substring(idx, i)));\n        idx = i;\n      }\n    }\n    if (urls)\n    {\n      for (var j = 0; j < urls.length; j++)\n      {\n        var startIndex = urls[j][0];\n        var href = urls[j][1];\n        advanceTo(startIndex);\n        pieces.push('<a ', (target ? 'target=\"' + Security.escapeHTMLAttribute(target) + '\" ' : ''), 'href=\"', Security.escapeHTMLAttribute(href), '\">');\n        advanceTo(startIndex + href.length);\n        pieces.push('</a>');\n      }\n    }\n    advanceTo(text.length);\n    return pieces.join('');\n  },\n  bindEnterAndEscape: function(node, onEnter, onEscape)\n  {\n\n    // Use keypress instead of keyup in bindEnterAndEscape\n    // Keyup event is fired on enter in IME (Input Method Editor), But\n    // keypress is not. So, I changed to use keypress instead of keyup.\n    // It is work on Windows (IE8, Chrome 6.0.472), CentOs (Firefox 3.0) and Mac OSX (Firefox 3.6.10, Chrome 6.0.472, Safari 5.0).\n    if (onEnter)\n    {\n      node.keypress(function(evt)\n      {\n        if (evt.which == 13)\n        {\n          onEnter(evt);\n        }\n      });\n    }\n\n    if (onEscape)\n    {\n      node.keydown(function(evt)\n      {\n        if (evt.which == 27)\n        {\n          onEscape(evt);\n        }\n      });\n    }\n  },\n  timediff: function(d)\n  {\n    var pad = require('./pad').pad; // Sidestep circular dependency\n    function format(n, word)\n    {\n      n = Math.round(n);\n      return ('' + n + ' ' + word + (n != 1 ? 's' : '') + ' ago');\n    }\n    d = Math.max(0, (+(new Date) - (+d) - pad.clientTimeOffset) / 1000);\n    if (d < 60)\n    {\n      return format(d, 'second');\n    }\n    d /= 60;\n    if (d < 60)\n    {\n      return format(d, 'minute');\n    }\n    d /= 60;\n    if (d < 24)\n    {\n      return format(d, 'hour');\n    }\n    d /= 24;\n    return format(d, 'day');\n  },\n  makeAnimationScheduler: function(funcToAnimateOneStep, stepTime, stepsAtOnce)\n  {\n    if (stepsAtOnce === undefined)\n    {\n      stepsAtOnce = 1;\n    }\n\n    var animationTimer = null;\n\n    function scheduleAnimation()\n    {\n      if (!animationTimer)\n      {\n        animationTimer = window.setTimeout(function()\n        {\n          animationTimer = null;\n          var n = stepsAtOnce;\n          var moreToDo = true;\n          while (moreToDo && n > 0)\n          {\n            moreToDo = funcToAnimateOneStep();\n            n--;\n          }\n          if (moreToDo)\n          {\n            // more to do\n            scheduleAnimation();\n          }\n        }, stepTime * stepsAtOnce);\n      }\n    }\n    return {\n      scheduleAnimation: scheduleAnimation\n    };\n  },\n  makeShowHideAnimator: function(funcToArriveAtState, initiallyShown, fps, totalMs)\n  {\n    var animationState = (initiallyShown ? 0 : -2); // -2 hidden, -1 to 0 fade in, 0 to 1 fade out\n    var animationFrameDelay = 1000 / fps;\n    var animationStep = animationFrameDelay / totalMs;\n\n    var scheduleAnimation = padutils.makeAnimationScheduler(animateOneStep, animationFrameDelay).scheduleAnimation;\n\n    function doShow()\n    {\n      animationState = -1;\n      funcToArriveAtState(animationState);\n      scheduleAnimation();\n    }\n\n    function doQuickShow()\n    { // start showing without losing any fade-in progress\n      if (animationState < -1)\n      {\n        animationState = -1;\n      }\n      else if (animationState <= 0)\n      {\n        animationState = animationState;\n      }\n      else\n      {\n        animationState = Math.max(-1, Math.min(0, -animationState));\n      }\n      funcToArriveAtState(animationState);\n      scheduleAnimation();\n    }\n\n    function doHide()\n    {\n      if (animationState >= -1 && animationState <= 0)\n      {\n        animationState = 1e-6;\n        scheduleAnimation();\n      }\n    }\n\n    function animateOneStep()\n    {\n      if (animationState < -1 || animationState == 0)\n      {\n        return false;\n      }\n      else if (animationState < 0)\n      {\n        // animate show\n        animationState += animationStep;\n        if (animationState >= 0)\n        {\n          animationState = 0;\n          funcToArriveAtState(animationState);\n          return false;\n        }\n        else\n        {\n          funcToArriveAtState(animationState);\n          return true;\n        }\n      }\n      else if (animationState > 0)\n      {\n        // animate hide\n        animationState += animationStep;\n        if (animationState >= 1)\n        {\n          animationState = 1;\n          funcToArriveAtState(animationState);\n          animationState = -2;\n          return false;\n        }\n        else\n        {\n          funcToArriveAtState(animationState);\n          return true;\n        }\n      }\n    }\n\n    return {\n      show: doShow,\n      hide: doHide,\n      quickShow: doQuickShow\n    };\n  },\n  _nextActionId: 1,\n  uncanceledActions: {},\n  getCancellableAction: function(actionType, actionFunc)\n  {\n    var o = padutils.uncanceledActions[actionType];\n    if (!o)\n    {\n      o = {};\n      padutils.uncanceledActions[actionType] = o;\n    }\n    var actionId = (padutils._nextActionId++);\n    o[actionId] = true;\n    return function()\n    {\n      var p = padutils.uncanceledActions[actionType];\n      if (p && p[actionId])\n      {\n        actionFunc();\n      }\n    };\n  },\n  cancelActions: function(actionType)\n  {\n    var o = padutils.uncanceledActions[actionType];\n    if (o)\n    {\n      // clear it\n      delete padutils.uncanceledActions[actionType];\n    }\n  },\n  makeFieldLabeledWhenEmpty: function(field, labelText)\n  {\n    field = $(field);\n\n    function clear()\n    {\n      field.addClass('editempty');\n      field.val(labelText);\n    }\n    field.focus(function()\n    {\n      if (field.hasClass('editempty'))\n      {\n        field.val('');\n      }\n      field.removeClass('editempty');\n    });\n    field.blur(function()\n    {\n      if (!field.val())\n      {\n        clear();\n      }\n    });\n    return {\n      clear: clear\n    };\n  },\n  getCheckbox: function(node)\n  {\n    return $(node).is(':checked');\n  },\n  setCheckbox: function(node, value)\n  {\n    if (value)\n    {\n      $(node).attr('checked', 'checked');\n    }\n    else\n    {\n      $(node).removeAttr('checked');\n    }\n  },\n  bindCheckboxChange: function(node, func)\n  {\n    $(node).change(func);\n  },\n  encodeUserId: function(userId)\n  {\n    return userId.replace(/[^a-y0-9]/g, function(c)\n    {\n      if (c == \".\") return \"-\";\n      return 'z' + c.charCodeAt(0) + 'z';\n    });\n  },\n  decodeUserId: function(encodedUserId)\n  {\n    return encodedUserId.replace(/[a-y0-9]+|-|z.+?z/g, function(cc)\n    {\n      if (cc == '-') return '.';\n      else if (cc.charAt(0) == 'z')\n      {\n        return String.fromCharCode(Number(cc.slice(1, -1)));\n      }\n      else\n      {\n        return cc;\n      }\n    });\n  }\n};\n\nvar globalExceptionHandler = undefined;\nfunction setupGlobalExceptionHandler() {\n  if (!globalExceptionHandler) {\n    globalExceptionHandler = function test (msg, url, linenumber)\n    {\n      var errorId = randomString(20);\n      var userAgent = padutils.escapeHtml(navigator.userAgent);\n      if ($(\"#editorloadingbox\").attr(\"display\") != \"none\"){\n        //show javascript errors to the user\n        $(\"#editorloadingbox\").css(\"padding\", \"10px\");\n        $(\"#editorloadingbox\").css(\"padding-top\", \"45px\");\n        $(\"#editorloadingbox\").html(\"<div style='text-align:left;color:red;font-size:16px;'><b>An error occured</b><br>The error was reported with the following id: '\" + errorId + \"'<br><br><span style='color:black;font-weight:bold;font-size:16px'>Please press and hold Ctrl and press F5 to reload this page, if the problem persists please send this error message to your webmaster: </span><div style='color:black;font-size:14px'>'\"\n          + \"ErrorId: \" + errorId + \"<br>URL: \" + window.location.href + \"<br>UserAgent: \" + userAgent + \"<br>\" + msg + \" in \" + url + \" at line \" + linenumber + \"'</div></div>\");\n      }\n\n      //send javascript errors to the server\n      var errObj = {errorInfo: JSON.stringify({errorId: errorId, msg: msg, url: window.location.href, linenumber: linenumber, userAgent: navigator.userAgent})};\n      var loc = document.location;\n      var url = loc.protocol + \"//\" + loc.hostname + \":\" + loc.port + \"/\" + loc.pathname.substr(1, loc.pathname.indexOf(\"/p/\")) + \"jserror\";\n \n      $.post(url, errObj);\n \n      return false;\n    };\n    window.onerror = globalExceptionHandler;\n  }\n}\n\npadutils.setupGlobalExceptionHandler = setupGlobalExceptionHandler;\n\npadutils.binarySearch = require('./ace2_common').binarySearch;\n\nexports.randomString = randomString;\nexports.createCookie = createCookie;\nexports.readCookie = readCookie;\nexports.padutils = padutils;\n\n}\n, \"ep_etherpad-lite/static/js/browser.js\": function (require, exports, module) {\n/*!\n  * Bowser - a browser detector\n  * https://github.com/ded/bowser\n  * MIT License | (c) Dustin Diaz 2014\n  */\n\n!function (name, definition) {\n  if (typeof module != 'undefined' && module.exports) module.exports['browser'] = definition()\n  else if (typeof define == 'function' && define.amd) define(definition)\n  else this[name] = definition()\n}('bowser', function () {\n  /**\n    * See useragents.js for examples of navigator.userAgent\n    */\n\n  var t = true\n\n  function detect(ua) {\n\n    function getFirstMatch(regex) {\n      var match = ua.match(regex);\n      return (match && match.length > 1 && match[1]) || '';\n    }\n\n    var iosdevice = getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase()\n      , likeAndroid = /like android/i.test(ua)\n      , android = !likeAndroid && /android/i.test(ua)\n      , versionIdentifier = getFirstMatch(/version\\/(\\d+(\\.\\d+)?)/i)\n      , tablet = /tablet/i.test(ua)\n      , mobile = !tablet && /[^-]mobi/i.test(ua)\n      , result\n\n    if (/opera|opr/i.test(ua)) {\n      result = {\n        name: 'Opera'\n      , opera: t\n      , version: versionIdentifier || getFirstMatch(/(?:opera|opr)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/windows phone/i.test(ua)) {\n      result = {\n        name: 'Windows Phone'\n      , windowsphone: t\n      , msie: t\n      , version: getFirstMatch(/iemobile\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/msie|trident/i.test(ua)) {\n      result = {\n        name: 'Internet Explorer'\n      , msie: t\n      , version: getFirstMatch(/(?:msie |rv:)(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/chrome|crios|crmo/i.test(ua)) {\n      result = {\n        name: 'Chrome'\n      , chrome: t\n      , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (iosdevice) {\n      result = {\n        name : iosdevice == 'iphone' ? 'iPhone' : iosdevice == 'ipad' ? 'iPad' : 'iPod'\n      }\n      // WTF: version is not part of user agent in web apps\n      if (versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    }\n    else if (/sailfish/i.test(ua)) {\n      result = {\n        name: 'Sailfish'\n      , sailfish: t\n      , version: getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/seamonkey\\//i.test(ua)) {\n      result = {\n        name: 'SeaMonkey'\n      , seamonkey: t\n      , version: getFirstMatch(/seamonkey\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/firefox|iceweasel/i.test(ua)) {\n      result = {\n        name: 'Firefox'\n      , firefox: t\n      , version: getFirstMatch(/(?:firefox|iceweasel)[ \\/](\\d+(\\.\\d+)?)/i)\n      }\n      if (/\\((mobile|tablet);[^\\)]*rv:[\\d\\.]+\\)/i.test(ua)) {\n        result.firefoxos = t\n      }\n    }\n    else if (/silk/i.test(ua)) {\n      result =  {\n        name: 'Amazon Silk'\n      , silk: t\n      , version : getFirstMatch(/silk\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (android) {\n      result = {\n        name: 'Android'\n      , version: versionIdentifier\n      }\n    }\n    else if (/phantom/i.test(ua)) {\n      result = {\n        name: 'PhantomJS'\n      , phantom: t\n      , version: getFirstMatch(/phantomjs\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/blackberry|\\bbb\\d+/i.test(ua) || /rim\\stablet/i.test(ua)) {\n      result = {\n        name: 'BlackBerry'\n      , blackberry: t\n      , version: versionIdentifier || getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/(web|hpw)os/i.test(ua)) {\n      result = {\n        name: 'WebOS'\n      , webos: t\n      , version: versionIdentifier || getFirstMatch(/w(?:eb)?osbrowser\\/(\\d+(\\.\\d+)?)/i)\n      };\n      /touchpad\\//i.test(ua) && (result.touchpad = t)\n    }\n    else if (/bada/i.test(ua)) {\n      result = {\n        name: 'Bada'\n      , bada: t\n      , version: getFirstMatch(/dolfin\\/(\\d+(\\.\\d+)?)/i)\n      };\n    }\n    else if (/tizen/i.test(ua)) {\n      result = {\n        name: 'Tizen'\n      , tizen: t\n      , version: getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n      };\n    }\n    else if (/safari/i.test(ua)) {\n      result = {\n        name: 'Safari'\n      , safari: t\n      , version: versionIdentifier\n      }\n    }\n    else result = {}\n\n    // set webkit or gecko flag for browsers based on these engines\n    if (/(apple)?webkit/i.test(ua)) {\n      result.name = result.name || \"Webkit\"\n      result.webkit = t\n      if (!result.version && versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    } else if (!result.opera && /gecko\\//i.test(ua)) {\n      result.name = result.name || \"Gecko\"\n      result.gecko = t\n      result.version = result.version || getFirstMatch(/gecko\\/(\\d+(\\.\\d+)?)/i)\n    }\n\n    // set OS flags for platforms that have multiple browsers\n    if (android || result.silk) {\n      result.android = t\n    } else if (iosdevice) {\n      result[iosdevice] = t\n      result.ios = t\n    }\n\n    // OS version extraction\n    var osVersion = '';\n    if (iosdevice) {\n      osVersion = getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i);\n      osVersion = osVersion.replace(/[_\\s]/g, '.');\n    } else if (android) {\n      osVersion = getFirstMatch(/android[ \\/-](\\d+(\\.\\d+)*)/i);\n    } else if (result.windowsphone) {\n      osVersion = getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i);\n    } else if (result.webos) {\n      osVersion = getFirstMatch(/(?:web|hpw)os\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.blackberry) {\n      osVersion = getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i);\n    } else if (result.bada) {\n      osVersion = getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.tizen) {\n      osVersion = getFirstMatch(/tizen[\\/\\s](\\d+(\\.\\d+)*)/i);\n    }\n    if (osVersion) {\n      result.osversion = osVersion;\n    }\n\n    // device type extraction\n    var osMajorVersion = osVersion.split('.')[0];\n    if (tablet || iosdevice == 'ipad' || (android && (osMajorVersion == 3 || (osMajorVersion == 4 && !mobile))) || result.silk) {\n      result.tablet = t\n    } else if (mobile || iosdevice == 'iphone' || iosdevice == 'ipod' || android || result.blackberry || result.webos || result.bada) {\n      result.mobile = t\n    }\n\n    // Graded Browser Support\n    // http://developer.yahoo.com/yui/articles/gbs\n    if ((result.msie && result.version >= 10) ||\n        (result.chrome && result.version >= 20) ||\n        (result.firefox && result.version >= 20.0) ||\n        (result.safari && result.version >= 6) ||\n        (result.opera && result.version >= 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] >= 6) ||\n        (result.blackberry && result.version >= 10.1)\n        ) {\n      result.a = t;\n    }\n    else if ((result.msie && result.version < 10) ||\n        (result.chrome && result.version < 20) ||\n        (result.firefox && result.version < 20.0) ||\n        (result.safari && result.version < 6) ||\n        (result.opera && result.version < 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] < 6)\n        ) {\n      result.c = t\n    } else result.x = t\n\n    return result\n  }\n\n  var bowser = detect(typeof navigator !== 'undefined' ? navigator.userAgent : '')\n\n\n  /*\n   * Set our detect method to the main bowser object so we can\n   * reuse it to test other user agents.\n   * This is needed to implement future tests.\n   */\n  bowser._detect = detect;\n\n  return bowser\n});\n\n}\n, \"ep_etherpad-lite/static/js/pad_cookie.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code. \n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar padcookie = (function()\n{\n  function getRawCookie()\n  {\n    // returns null if can't get cookie text\n    if (!document.cookie)\n    {\n      return null;\n    }\n    // look for (start of string OR semicolon) followed by whitespace followed by prefs=(something);\n    var regexResult = document.cookie.match(/(?:^|;)\\s*prefs=([^;]*)(?:;|$)/);\n    if ((!regexResult) || (!regexResult[1]))\n    {\n      return null;\n    }\n    return regexResult[1];\n  }\n\n  function setRawCookie(safeText)\n  {\n    var expiresDate = new Date();\n    expiresDate.setFullYear(3000);\n    document.cookie = ('prefs=' + safeText + ';expires=' + expiresDate.toGMTString());\n  }\n\n  function parseCookie(text)\n  {\n    // returns null if can't parse cookie.\n    try\n    {\n      var cookieData = JSON.parse(unescape(text));\n      return cookieData;\n    }\n    catch (e)\n    {\n      return null;\n    }\n  }\n\n  function stringifyCookie(data)\n  {\n    return escape(JSON.stringify(data));\n  }\n\n  function saveCookie()\n  {\n    if (!inited)\n    {\n      return;\n    }\n    setRawCookie(stringifyCookie(cookieData));\n\n    if ((!getRawCookie()) && (!alreadyWarnedAboutNoCookies))\n    {\n      alert(\"Warning: it appears that your browser does not have cookies enabled.\" + \" EtherPad uses cookies to keep track of unique users for the purpose\" + \" of putting a quota on the number of active users.  Using EtherPad without \" + \" cookies may fill up your server's user quota faster than expected.\");\n      alreadyWarnedAboutNoCookies = true;\n    }\n  }\n\n  var wasNoCookie = true;\n  var cookieData = {};\n  var alreadyWarnedAboutNoCookies = false;\n  var inited = false;\n\n  var pad = undefined;\n  var self = {\n    init: function(prefsToSet, _pad)\n    {\n      pad = _pad;\n\n      var rawCookie = getRawCookie();\n      if (rawCookie)\n      {\n        var cookieObj = parseCookie(rawCookie);\n        if (cookieObj)\n        {\n          wasNoCookie = false; // there was a cookie\n          delete cookieObj.userId;\n          delete cookieObj.name;\n          delete cookieObj.colorId;\n          cookieData = cookieObj;\n        }\n      }\n\n      for (var k in prefsToSet)\n      {\n        cookieData[k] = prefsToSet[k];\n      }\n\n      inited = true;\n      saveCookie();\n    },\n    wasNoCookie: function()\n    {\n      return wasNoCookie;\n    },\n    getPref: function(prefName)\n    {\n      return cookieData[prefName];\n    },\n    setPref: function(prefName, value)\n    {\n      cookieData[prefName] = value;\n      saveCookie();\n    }\n  };\n  return self;\n}());\n\nexports.padcookie = padcookie;\n\n}\n, \"ep_etherpad-lite/static/js/pad_editor.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code. \n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar padcookie = require('./pad_cookie').padcookie;\nvar padutils = require('./pad_utils').padutils;\n\nvar padeditor = (function()\n{\n  var Ace2Editor = undefined;\n  var pad = undefined;\n  var settings = undefined;\n\n  // Array of available fonts\n  var fonts = ['useMonospaceFont', 'useOpenDyslexicFont', 'useComicSansFont', 'useCourierNewFont', 'useGeorgiaFont', 'useImpactFont',\n    'useLucidaFont', 'useLucidaSansFont', 'usePalatinoFont', 'useTahomaFont', 'useTimesNewRomanFont',\n    'useTrebuchetFont', 'useVerdanaFont', 'useSymbolFont', 'useWebdingsFont', 'useWingDingsFont', 'useSansSerifFont',\n    'useSerifFont'];\n\n  var self = {\n    ace: null,\n    // this is accessed directly from other files\n    viewZoom: 100,\n    init: function(readyFunc, initialViewOptions, _pad)\n    {\n      Ace2Editor = require('./ace').Ace2Editor;\n      pad = _pad;\n      settings = pad.settings;\n\n      function aceReady()\n      {\n        $(\"#editorloadingbox\").hide();\n        if (readyFunc)\n        {\n          readyFunc();\n        }\n      }\n\n      self.ace = new Ace2Editor();\n      self.ace.init(\"editorcontainer\", \"\", aceReady);\n      self.ace.setProperty(\"wraps\", true);\n      if (pad.getIsDebugEnabled())\n      {\n        self.ace.setProperty(\"dmesg\", pad.dmesg);\n      }\n      self.initViewOptions();\n      self.setViewOptions(initialViewOptions);\n\n      // view bar\n      $(\"#viewbarcontents\").show();\n    },\n    initViewOptions: function()\n    {\n      // Line numbers\n      padutils.bindCheckboxChange($(\"#options-linenoscheck\"), function()\n      {\n        pad.changeViewOption('showLineNumbers', padutils.getCheckbox($(\"#options-linenoscheck\")));\n      });\n\n      // Author colors\n      padutils.bindCheckboxChange($(\"#options-colorscheck\"), function()\n      {\n        padcookie.setPref('showAuthorshipColors', padutils.getCheckbox(\"#options-colorscheck\"));\n        pad.changeViewOption('showAuthorColors', padutils.getCheckbox(\"#options-colorscheck\"));\n      });\n\n      // Right to left\n      padutils.bindCheckboxChange($(\"#options-rtlcheck\"), function()\n      {\n        pad.changeViewOption('rtlIsTrue', padutils.getCheckbox($(\"#options-rtlcheck\")))\n      });\n      html10n.bind('localized', function() {\n        pad.changeViewOption('rtlIsTrue', ('rtl' == html10n.getDirection()));\n        padutils.setCheckbox($(\"#options-rtlcheck\"), ('rtl' == html10n.getDirection()));\n      })\n\n      // font family change\n      $(\"#viewfontmenu\").change(function()\n      {\n        $.each(fonts, function(i, font){\n          var sfont = font.replace(\"use\",\"\");\n          sfont = sfont.replace(\"Font\",\"\");\n          sfont = sfont.toLowerCase();\n          pad.changeViewOption(font, $(\"#viewfontmenu\").val() == sfont);\n        });\n      });\n      \n      // Language\n      html10n.bind('localized', function() {\n        $(\"#languagemenu\").val(html10n.getLanguage());\n        // translate the value of 'unnamed' and 'Enter your name' textboxes in the userlist\n        // this does not interfere with html10n's normal value-setting because html10n just ingores <input>s\n        // also, a value which has been set by the user will be not overwritten since a user-edited <input>\n        // does *not* have the editempty-class\n        $('input[data-l10n-id]').each(function(key, input){\n          input = $(input);\n          if(input.hasClass(\"editempty\")){\n            input.val(html10n.get(input.attr(\"data-l10n-id\")));\n          }\n        });\n      })\n      $(\"#languagemenu\").val(html10n.getLanguage());\n      $(\"#languagemenu\").change(function() {\n        pad.createCookie(\"language\",$(\"#languagemenu\").val(),null,'/');\n        window.html10n.localize([$(\"#languagemenu\").val(), 'en']);\n      });\n    },\n    setViewOptions: function(newOptions)\n    {\n      function getOption(key, defaultValue)\n      {\n        var value = String(newOptions[key]);\n        if (value == \"true\") return true;\n        if (value == \"false\") return false;\n        return defaultValue;\n      }\n\n      var v;\n\n      v = getOption('rtlIsTrue', ('rtl' == html10n.getDirection()));\n      self.ace.setProperty(\"rtlIsTrue\", v);\n      padutils.setCheckbox($(\"#options-rtlcheck\"), v);\n\n      v = getOption('showLineNumbers', true);\n      self.ace.setProperty(\"showslinenumbers\", v);\n      padutils.setCheckbox($(\"#options-linenoscheck\"), v);\n\n      v = getOption('showAuthorColors', true);\n      self.ace.setProperty(\"showsauthorcolors\", v);\n      padutils.setCheckbox($(\"#options-colorscheck\"), v);\n\n      // Override from parameters if true\n      if (settings.noColors !== false){\n        self.ace.setProperty(\"showsauthorcolors\", !settings.noColors);\n      }\n\n      var normalFont = true;\n      // Go through each font and see if the option is set..\n      $.each(fonts, function(i, font){\n        var isEnabled = getOption(font, false);\n        if(isEnabled){\n          font = font.replace(\"use\",\"\");\n          font = font.replace(\"Font\",\"\");\n          font = font.toLowerCase();\n          if(font === \"monospace\") self.ace.setProperty(\"textface\", \"Courier new\");\n          if(font === \"opendyslexic\") self.ace.setProperty(\"textface\", \"OpenDyslexic\");\n          if(font === \"comicsans\") self.ace.setProperty(\"textface\", \"Comic Sans MS\");\n          if(font === \"georgia\") self.ace.setProperty(\"textface\", \"Georgia\");\n          if(font === \"impact\") self.ace.setProperty(\"textface\", \"Impact\");\n          if(font === \"lucida\") self.ace.setProperty(\"textface\", \"Lucida\");\n          if(font === \"lucidasans\") self.ace.setProperty(\"textface\", \"Lucida Sans Unicode\");\n          if(font === \"palatino\") self.ace.setProperty(\"textface\", \"Palatino Linotype\");\n          if(font === \"tahoma\") self.ace.setProperty(\"textface\", \"Tahoma\");\n          if(font === \"timesnewroman\") self.ace.setProperty(\"textface\", \"Times New Roman\");\n          if(font === \"trebuchet\") self.ace.setProperty(\"textface\", \"Trebuchet MS\");\n          if(font === \"verdana\") self.ace.setProperty(\"textface\", \"Verdana\");\n          if(font === \"symbol\") self.ace.setProperty(\"textface\", \"Symbol\");\n          if(font === \"webdings\") self.ace.setProperty(\"textface\", \"Webdings\");\n          if(font === \"wingdings\") self.ace.setProperty(\"textface\", \"Wingdings\");\n          if(font === \"sansserif\") self.ace.setProperty(\"textface\", \"MS Sans Serif\");\n          if(font === \"serif\") self.ace.setProperty(\"textface\", \"MS Serif\");\n\n          // $(\"#viewfontmenu\").val(font);\n          normalFont = false;\n        }\n      });\n\n      // No font has been previously selected so use the Normal font\n      if(normalFont){\n        self.ace.setProperty(\"textface\", \"Arial, sans-serif\");\n        // $(\"#viewfontmenu\").val(\"normal\");\n      }\n\n    },\n    dispose: function()\n    {\n      if (self.ace)\n      {\n        self.ace.destroy();\n        self.ace = null;\n      }\n    },\n    disable: function()\n    {\n      if (self.ace)\n      {\n        self.ace.setProperty(\"grayedOut\", true);\n        self.ace.setEditable(false);\n      }\n    },\n    restoreRevisionText: function(dataFromServer)\n    {\n      pad.addHistoricalAuthors(dataFromServer.historicalAuthorData);\n      self.ace.importAText(dataFromServer.atext, dataFromServer.apool, true);\n    }\n  };\n  return self;\n}());\n\nexports.padeditor = padeditor;\n\n}\n, \"ep_etherpad-lite/static/js/pad_editbar.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code.\n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar hooks = require('./pluginfw/hooks');\nvar padutils = require('./pad_utils').padutils;\nvar padeditor = require('./pad_editor').padeditor;\nvar padsavedrevs = require('./pad_savedrevs');\n\nvar ToolbarItem = function (element) {\n  this.$el = element;\n};\n\nToolbarItem.prototype.getCommand = function () {\n  return this.$el.attr(\"data-key\");\n};\n\nToolbarItem.prototype.getValue = function () {\n  if (this.isSelect()) {\n    return this.$el.find(\"select\").val();\n  }\n};\n\nToolbarItem.prototype.setValue = function (val) {\n  if (this.isSelect()) {\n    return this.$el.find(\"select\").val(val);\n  }\n};\n\n\nToolbarItem.prototype.getType = function () {\n  return this.$el.attr(\"data-type\");\n};\n\nToolbarItem.prototype.isSelect = function () {\n  return this.getType() == \"select\";\n};\n\nToolbarItem.prototype.isButton = function () {\n  return this.getType() == \"button\";\n};\n\nToolbarItem.prototype.bind = function (callback) {\n  var self = this;\n\n  if (self.isButton()) {\n    self.$el.click(function (event) {\n      $(':focus').blur();\n      callback(self.getCommand(), self);\n      event.preventDefault();\n    });\n  }\n  else if (self.isSelect()) {\n    self.$el.find(\"select\").change(function () {\n      callback(self.getCommand(), self);\n    });\n  }\n};\n\n\nvar padeditbar = (function()\n{\n\n  var syncAnimation = (function()\n  {\n    var SYNCING = -100;\n    var DONE = 100;\n    var state = DONE;\n    var fps = 25;\n    var step = 1 / fps;\n    var T_START = -0.5;\n    var T_FADE = 1.0;\n    var T_GONE = 1.5;\n    var animator = padutils.makeAnimationScheduler(function()\n    {\n      if (state == SYNCING || state == DONE)\n      {\n        return false;\n      }\n      else if (state >= T_GONE)\n      {\n        state = DONE;\n        $(\"#syncstatussyncing\").css('display', 'none');\n        $(\"#syncstatusdone\").css('display', 'none');\n        return false;\n      }\n      else if (state < 0)\n      {\n        state += step;\n        if (state >= 0)\n        {\n          $(\"#syncstatussyncing\").css('display', 'none');\n          $(\"#syncstatusdone\").css('display', 'block').css('opacity', 1);\n        }\n        return true;\n      }\n      else\n      {\n        state += step;\n        if (state >= T_FADE)\n        {\n          $(\"#syncstatusdone\").css('opacity', (T_GONE - state) / (T_GONE - T_FADE));\n        }\n        return true;\n      }\n    }, step * 1000);\n    return {\n      syncing: function()\n      {\n        state = SYNCING;\n        $(\"#syncstatussyncing\").css('display', 'block');\n        $(\"#syncstatusdone\").css('display', 'none');\n      },\n      done: function()\n      {\n        state = T_START;\n        animator.scheduleAnimation();\n      }\n    };\n  }());\n\n  var self = {\n    init: function() {\n      var self = this;\n      self.dropdowns = [];\n      // Listen for resize events (sucks but needed as iFrame ace_inner has to be position absolute\n      // A CSS fix for this would be nice but I'm not sure how we'd do it.\n      $(window).resize(function(){\n        self.redrawHeight();\n      });\n\n      $(\"#editbar .editbarbutton\").attr(\"unselectable\", \"on\"); // for IE\n      $(\"#editbar\").removeClass(\"disabledtoolbar\").addClass(\"enabledtoolbar\");\n      $(\"#editbar [data-key]\").each(function () {\n        $(this).unbind(\"click\");\n        (new ToolbarItem($(this))).bind(function (command, item) {\n          self.triggerCommand(command, item);\n        });\n      });\n\n      $('body:not(#editorcontainerbox)').on(\"keydown\", function(evt){\n        bodyKeyEvent(evt);\n      });\n\n      $('#editbar').show();\n\n      this.redrawHeight();\n\n      registerDefaultCommands(self);\n\n      hooks.callAll(\"postToolbarInit\", {\n        toolbar: self,\n        ace: padeditor.ace\n      });\n    },\n    isEnabled: function()\n    {\n//      return !$(\"#editbar\").hasClass('disabledtoolbar');\n      return true;\n    },\n    disable: function()\n    {\n      $(\"#editbar\").addClass('disabledtoolbar').removeClass(\"enabledtoolbar\");\n    },\n    commands: {},\n    registerCommand: function (cmd, callback) {\n      this.commands[cmd] = callback;\n      return this;\n    },\n    redrawHeight: function(){\n      var editbarHeight = $('.menu_left').height() + 1 + \"px\";\n      var containerTop = $('.menu_left').height() + 6 + \"px\";\n      $('#editbar').css(\"height\", editbarHeight);\n\n      $('#editorcontainer').css(\"top\", containerTop);\n\n      // make sure pop ups are in the right place\n      if($('#editorcontainer').offset()){\n        $('.popup').css(\"top\", $('#editorcontainer').offset().top + \"px\");\n      }\n\n      // If sticky chat is enabled..\n      if($('#options-stickychat').is(\":checked\")){\n        if($('#editorcontainer').offset()){\n          $('#chatbox').css(\"top\", $('#editorcontainer').offset().top + \"px\");\n        }\n      };\n\n      // If chat and Users is enabled..\n      if($('#options-chatandusers').is(\":checked\")){\n        if($('#editorcontainer').offset()){\n          $('#users').css(\"top\", $('#editorcontainer').offset().top + \"px\");\n        }\n      }\n\n    },\n    registerDropdownCommand: function (cmd, dropdown) {\n      dropdown = dropdown || cmd;\n      self.dropdowns.push(dropdown)\n      this.registerCommand(cmd, function () {\n        self.toggleDropDown(dropdown);\n      });\n    },\n    registerAceCommand: function (cmd, callback) {\n      this.registerCommand(cmd, function (cmd, ace) {\n        ace.callWithAce(function (ace) {\n          callback(cmd, ace);\n        }, cmd, true);\n      });\n    },\n    triggerCommand: function (cmd, item) {\n      if (self.isEnabled() && this.commands[cmd]) {\n        this.commands[cmd](cmd, padeditor.ace, item);\n      }\n      if(padeditor.ace) padeditor.ace.focus();\n    },\n    toggleDropDown: function(moduleName, cb)\n    {\n      // hide all modules and remove highlighting of all buttons\n      if(moduleName == \"none\")\n      {\n        var returned = false\n        for(var i=0;i<self.dropdowns.length;i++)\n        {\n          //skip the userlist\n          if(self.dropdowns[i] == \"users\")\n            continue;\n\n          var module = $(\"#\" + self.dropdowns[i]);\n\n          if(module.css('display') != \"none\")\n          {\n            $(\"li[data-key=\" + self.dropdowns[i] + \"] > a\").removeClass(\"selected\");\n            module.slideUp(\"fast\", cb);\n            returned = true;\n          }\n        }\n        if(!returned && cb) return cb();\n      }\n      else\n      {\n        // hide all modules that are not selected and remove highlighting\n        // respectively add highlighting to the corresponding button\n        for(var i=0;i<self.dropdowns.length;i++)\n        {\n          var module = $(\"#\" + self.dropdowns[i]);\n\n          if(module.css('display') != \"none\")\n          {\n            $(\"li[data-key=\" + self.dropdowns[i] + \"] > a\").removeClass(\"selected\");\n            module.slideUp(\"fast\");\n          }\n          else if(self.dropdowns[i]==moduleName)\n          {\n            $(\"li[data-key=\" + self.dropdowns[i] + \"] > a\").addClass(\"selected\");\n            module.slideDown(\"fast\", cb);\n          }\n        }\n      }\n    },\n    setSyncStatus: function(status)\n    {\n      if (status == \"syncing\")\n      {\n        syncAnimation.syncing();\n      }\n      else if (status == \"done\")\n      {\n        syncAnimation.done();\n      }\n    },\n    setEmbedLinks: function()\n    {\n      if ($('#readonlyinput').is(':checked'))\n      {\n        var basePath = document.location.href.substring(0, document.location.href.indexOf(\"/p/\"));\n        var readonlyLink = basePath + \"/p/\" + clientVars.readOnlyId;\n        $('#embedinput').val(\"<iframe name='embed_readonly' src='\" + readonlyLink + \"?showControls=true&showChat=true&showLineNumbers=true&useMonospaceFont=false' width=600 height=400></iframe>\");\n        $('#linkinput').val(readonlyLink);\n      }\n      else\n      {\n        var padurl = window.location.href.split(\"?\")[0];\n        $('#embedinput').val(\"<iframe name='embed_readwrite' src='\" + padurl + \"?showControls=true&showChat=true&showLineNumbers=true&useMonospaceFont=false' width=600 height=400></iframe>\");\n        $('#linkinput').val(padurl);\n      }\n    }\n  };\n\n  var editbarPosition = 0;\n\n  function bodyKeyEvent(evt){\n\n    // If the event is Alt F9 or Escape & we're already in the editbar menu\n    // Send the users focus back to the pad\n    if((evt.keyCode === 120 && evt.altKey) || evt.keyCode === 27){\n      if($(':focus').parents(\".toolbar\").length === 1){\n        // If we're in the editbar already..\n        // Close any dropdowns we have open..\n        padeditbar.toggleDropDown(\"none\");\n        // Check we're on a pad and not on the timeslider\n        // Or some other window I haven't thought about!\n        if(typeof pad === 'undefined'){\n          // Timeslider probably..\n          // Shift focus away from any drop downs\n          $(':focus').blur(); // required to do not try to remove!\n          $('#padmain').focus(); // Focus back onto the pad\n        }else{\n          // Shift focus away from any drop downs\n          $(':focus').blur(); // required to do not try to remove!\n          padeditor.ace.focus(); // Sends focus back to pad\n          // The above focus doesn't always work in FF, you have to hit enter afterwards\n          evt.preventDefault();\n        }\n      }else{\n        // Focus on the editbar :)\n        var firstEditbarElement = parent.parent.$('#editbar').children(\"ul\").first().children().first().children().first().children().first();\n        $(this).blur();\n        firstEditbarElement.focus();\n        evt.preventDefault();\n      }\n    }\n    // Are we in the toolbar??\n    if($(':focus').parents(\".toolbar\").length === 1){\n      // On arrow keys go to next/previous button item in editbar\n      if(evt.keyCode !== 39 && evt.keyCode !== 37) return;\n\n      // Get all the focusable items in the editbar\n      var focusItems = $('#editbar').find('button, select');\n\n      // On left arrow move to next button in editbar\n      if(evt.keyCode === 37){\n        // If a dropdown is visible or we're in an input don't move to the next button\n        if($('.popup').is(\":visible\") || evt.target.localName === \"input\") return;\n\n        editbarPosition--;\n        // Allow focus to shift back to end of row and start of row\n        if(editbarPosition === -1) editbarPosition = focusItems.length -1;\n        $(focusItems[editbarPosition]).focus()\n      }\n\n      // On right arrow move to next button in editbar\n      if(evt.keyCode === 39){\n        // If a dropdown is visible or we're in an input don't move to the next button\n        if($('.popup').is(\":visible\") || evt.target.localName === \"input\") return;\n\n        editbarPosition++;\n        // Allow focus to shift back to end of row and start of row\n        if(editbarPosition >= focusItems.length) editbarPosition = 0;\n        $(focusItems[editbarPosition]).focus();\n      }\n    }\n\n  }\n\n  function aceAttributeCommand(cmd, ace) {\n    ace.ace_toggleAttributeOnSelection(cmd);\n  }\n\n  function registerDefaultCommands(toolbar) {\n    toolbar.registerDropdownCommand(\"showusers\", \"users\");\n    toolbar.registerDropdownCommand(\"settings\");\n    toolbar.registerDropdownCommand(\"connectivity\");\n    toolbar.registerDropdownCommand(\"import_export\");\n    toolbar.registerDropdownCommand(\"embed\");\n\n    toolbar.registerCommand(\"settings\", function () {\n      toolbar.toggleDropDown(\"settings\", function(){\n        $('#options-stickychat').focus();\n      });\n    });\n\n    toolbar.registerCommand(\"import_export\", function () {\n      toolbar.toggleDropDown(\"import_export\", function(){\n        // If Import file input exists then focus on it..\n        if($('#importfileinput').length !== 0){\n          setTimeout(function(){\n            $('#importfileinput').focus();\n          }, 100);\n        }else{\n          $('.exportlink').first().focus();\n        }\n      });\n    });\n\n    toolbar.registerCommand(\"showusers\", function () {\n      toolbar.toggleDropDown(\"users\", function(){\n        $('#myusernameedit').focus();\n      });\n    });\n\n    toolbar.registerCommand(\"embed\", function () {\n      toolbar.setEmbedLinks();\n      toolbar.toggleDropDown(\"embed\", function(){\n        $('#linkinput').focus().select();\n      });\n    });\n\n    toolbar.registerCommand(\"savedRevision\", function () {\n      padsavedrevs.saveNow();\n    });\n\n    toolbar.registerCommand(\"showTimeSlider\", function () {\n      document.location = document.location.pathname+ '/timeslider';\n    });\n\n    toolbar.registerAceCommand(\"bold\", aceAttributeCommand);\n    toolbar.registerAceCommand(\"italic\", aceAttributeCommand);\n    toolbar.registerAceCommand(\"underline\", aceAttributeCommand);\n    toolbar.registerAceCommand(\"strikethrough\", aceAttributeCommand);\n\n    toolbar.registerAceCommand(\"undo\", function (cmd, ace) {\n      ace.ace_doUndoRedo(cmd);\n    });\n\n    toolbar.registerAceCommand(\"redo\", function (cmd, ace) {\n      ace.ace_doUndoRedo(cmd);\n    });\n\n    toolbar.registerAceCommand(\"insertunorderedlist\", function (cmd, ace) {\n      ace.ace_doInsertUnorderedList();\n    });\n\n    toolbar.registerAceCommand(\"insertorderedlist\", function (cmd, ace) {\n      ace.ace_doInsertOrderedList();\n    });\n\n    toolbar.registerAceCommand(\"indent\", function (cmd, ace) {\n      if (!ace.ace_doIndentOutdent(false)) {\n        ace.ace_doInsertUnorderedList();\n      }\n    });\n\n    toolbar.registerAceCommand(\"outdent\", function (cmd, ace) {\n      ace.ace_doIndentOutdent(true);\n    });\n\n    toolbar.registerAceCommand(\"clearauthorship\", function (cmd, ace) {\n      if ((!(ace.ace_getRep().selStart && ace.ace_getRep().selEnd)) || ace.ace_isCaret()) {\n        if (window.confirm(html10n.get(\"pad.editbar.clearcolors\"))) {\n          ace.ace_performDocumentApplyAttributesToCharRange(0, ace.ace_getRep().alltext.length, [\n            ['author', '']\n          ]);\n        }\n      }\n      else {\n        ace.ace_setAttributeOnSelection('author', '');\n      }\n    });\n\n    toolbar.registerCommand('timeslider_returnToPad', function(cmd) {\n      if( document.referrer.length > 0 && document.referrer.substring(document.referrer.lastIndexOf(\"/\")-1, document.referrer.lastIndexOf(\"/\")) === \"p\") {\n        document.location = document.referrer;\n      } else {\n        document.location = document.location.href.substring(0,document.location.href.lastIndexOf(\"/\"));\n      }\n    });\n  }\n\n  return self;\n}());\n\nexports.padeditbar = padeditbar;\n\n}\n, \"ep_etherpad-lite/static/js/pad_docbar.js\": null\n, \"ep_etherpad-lite/static/js/pad_modals.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code. \n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n \nvar padeditbar = require('./pad_editbar').padeditbar;\n\nvar padmodals = (function()\n{\n  var pad = undefined;\n  var self = {\n    init: function(_pad)\n    {\n      pad = _pad;\n    },\n    showModal: function(messageId)\n    {\n      padeditbar.toggleDropDown(\"none\", function() {\n        $(\"#connectivity .visible\").removeClass('visible');\n        $(\"#connectivity .\"+messageId).addClass('visible');\n        padeditbar.toggleDropDown(\"connectivity\");\n      });\n    },\n    showOverlay: function() {\n      $(\"#overlay\").show();\n    },\n    hideOverlay: function() {\n      $(\"#overlay\").hide();\n    }\n  };\n  return self;\n}());\n\nexports.padmodals = padmodals;\n\n}\n, \"ep_etherpad-lite/static/js/ace.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code.\n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// requires: top\n// requires: plugins\n// requires: undefined\n\nvar KERNEL_SOURCE = '../static/js/require-kernel.js';\n\nAce2Editor.registry = {\n  nextId: 1\n};\n\nvar hooks = require('./pluginfw/hooks');\nvar _ = require('./underscore');\n\nfunction scriptTag(source) {\n  return (\n    '<script type=\"text/javascript\">\\n'\n    + source.replace(/<\\//g, '<\\\\/') +\n    '</script>'\n  )\n}\n\nfunction Ace2Editor()\n{\n  var ace2 = Ace2Editor;\n\n  var editor = {};\n  var info = {\n    editor: editor,\n    id: (ace2.registry.nextId++)\n  };\n  var loaded = false;\n\n  var actionsPendingInit = [];\n\n  function pendingInit(func, optDoNow)\n  {\n    return function()\n    {\n      var that = this;\n      var args = arguments;\n      var action = function()\n      {\n        func.apply(that, args);\n      }\n      if (optDoNow)\n      {\n        optDoNow.apply(that, args);\n      }\n      if (loaded)\n      {\n        action();\n      }\n      else\n      {\n        actionsPendingInit.push(action);\n      }\n    };\n  }\n\n  function doActionsPendingInit()\n  {\n    _.each(actionsPendingInit, function(fn,i){\n      fn()\n    });\n    actionsPendingInit = [];\n  }\n\n  ace2.registry[info.id] = info;\n\n  // The following functions (prefixed by 'ace_')  are exposed by editor, but\n  // execution is delayed until init is complete\n  var aceFunctionsPendingInit = ['importText', 'importAText', 'focus',\n  'setEditable', 'getFormattedCode', 'setOnKeyPress', 'setOnKeyDown',\n  'setNotifyDirty', 'setProperty', 'setBaseText', 'setBaseAttributedText',\n  'applyChangesToBase', 'applyPreparedChangesetToBase',\n  'setUserChangeNotificationCallback', 'setAuthorInfo',\n  'setAuthorSelectionRange', 'callWithAce', 'execCommand', 'replaceRange'];\n\n  _.each(aceFunctionsPendingInit, function(fnName,i){\n    var prefix = 'ace_';\n    var name = prefix + fnName;\n    editor[fnName] = pendingInit(function(){\n      info[prefix + fnName].apply(this, arguments);\n    });\n  });\n\n  editor.exportText = function()\n  {\n    if (!loaded) return \"(awaiting init)\\n\";\n    return info.ace_exportText();\n  };\n\n  editor.getFrame = function()\n  {\n    return info.frame || null;\n  };\n\n  editor.getDebugProperty = function(prop)\n  {\n    return info.ace_getDebugProperty(prop);\n  };\n\n  editor.getInInternationalComposition = function()\n  {\n    if (!loaded) return false;\n    return info.ace_getInInternationalComposition();\n  };\n\n  // prepareUserChangeset:\n  // Returns null if no new changes or ACE not ready.  Otherwise, bundles up all user changes\n  // to the latest base text into a Changeset, which is returned (as a string if encodeAsString).\n  // If this method returns a truthy value, then applyPreparedChangesetToBase can be called\n  // at some later point to consider these changes part of the base, after which prepareUserChangeset\n  // must be called again before applyPreparedChangesetToBase.  Multiple consecutive calls\n  // to prepareUserChangeset will return an updated changeset that takes into account the\n  // latest user changes, and modify the changeset to be applied by applyPreparedChangesetToBase\n  // accordingly.\n  editor.prepareUserChangeset = function()\n  {\n    if (!loaded) return null;\n    return info.ace_prepareUserChangeset();\n  };\n\n  editor.getUnhandledErrors = function()\n  {\n    if (!loaded) return [];\n    // returns array of {error: <browser Error object>, time: +new Date()}\n    return info.ace_getUnhandledErrors();\n  };\n\n\n\n  function sortFilesByEmbeded(files) {\n    var embededFiles = [];\n    var remoteFiles = [];\n\n    if (Ace2Editor.EMBEDED) {\n      for (var i = 0, ii = files.length; i < ii; i++) {\n        var file = files[i];\n        if (Object.prototype.hasOwnProperty.call(Ace2Editor.EMBEDED, file)) {\n          embededFiles.push(file);\n        } else {\n          remoteFiles.push(file);\n        }\n      }\n    } else {\n      remoteFiles = files;\n    }\n\n    return {embeded: embededFiles, remote: remoteFiles};\n  }\n  function pushStyleTagsFor(buffer, files) {\n    var sorted = sortFilesByEmbeded(files);\n    var embededFiles = sorted.embeded;\n    var remoteFiles = sorted.remote;\n\n    if (embededFiles.length > 0) {\n      buffer.push('<style type=\"text/css\">');\n      for (var i = 0, ii = embededFiles.length; i < ii; i++) {\n        var file = embededFiles[i];\n        buffer.push((Ace2Editor.EMBEDED[file] || '').replace(/<\\//g, '<\\\\/'));\n      }\n      buffer.push('<\\/style>');\n    }\n    for (var i = 0, ii = remoteFiles.length; i < ii; i++) {\n      var file = remoteFiles[i];\n      buffer.push('<link rel=\"stylesheet\" type=\"text/css\" href=\"' + file + '\"\\/>');\n    }\n  }\n\n  editor.destroy = pendingInit(function()\n  {\n    info.ace_dispose();\n    info.frame.parentNode.removeChild(info.frame);\n    delete ace2.registry[info.id];\n    info = null; // prevent IE 6 closure memory leaks\n  });\n\n  editor.init = function(containerId, initialCode, doneFunc)\n  {\n\n    editor.importText(initialCode);\n\n    info.onEditorReady = function()\n    {\n      loaded = true;\n      doActionsPendingInit();\n      doneFunc();\n    };\n\n    (function()\n    {\n      var doctype = \"<!doctype html>\";\n\n      var iframeHTML = [];\n\n      iframeHTML.push(doctype);\n      iframeHTML.push(\"<html><head>\");\n\n      // calls to these functions ($$INCLUDE_...)  are replaced when this file is processed\n      // and compressed, putting the compressed code from the named file directly into the\n      // source here.\n      // these lines must conform to a specific format because they are passed by the build script:\n      var includedCSS = [];\n      var $$INCLUDE_CSS = function(filename) {includedCSS.push(filename)};\n      $$INCLUDE_CSS(\"../static/css/iframe_editor.css\");\n      $$INCLUDE_CSS(\"../static/css/pad.css\");\n      $$INCLUDE_CSS(\"../static/custom/pad.css\");\n\n      var additionalCSS = _(hooks.callAll(\"aceEditorCSS\")).map(function(path){ return '../static/plugins/' + path });\n      includedCSS = includedCSS.concat(additionalCSS);\n\n      pushStyleTagsFor(iframeHTML, includedCSS);\n\n      if (!Ace2Editor.EMBEDED && Ace2Editor.EMBEDED[KERNEL_SOURCE]) {\n        // Remotely src'd script tag will not work in IE; it must be embedded, so\n        // throw an error if it is not.\n        throw new Error(\"Require kernel could not be found.\");\n      }\n\n      iframeHTML.push(scriptTag(\nAce2Editor.EMBEDED[KERNEL_SOURCE] + '\\n\\\nrequire.setRootURI(\"../javascripts/src\");\\n\\\nrequire.setLibraryURI(\"../javascripts/lib\");\\n\\\nrequire.setGlobalKeyPath(\"require\");\\n\\\n\\n\\\nvar hooks = require(\"ep_etherpad-lite/static/js/pluginfw/hooks\");\\n\\\nvar plugins = require(\"ep_etherpad-lite/static/js/pluginfw/client_plugins\");\\n\\\nhooks.plugins = plugins;\\n\\\nplugins.adoptPluginsFromAncestorsOf(window);\\n\\\n\\n\\\n$ = jQuery = require(\"ep_etherpad-lite/static/js/rjquery\").jQuery; // Expose jQuery #HACK\\n\\\nvar Ace2Inner = require(\"ep_etherpad-lite/static/js/ace2_inner\");\\n\\\n\\n\\\nplugins.ensure(function () {\\n\\\n  Ace2Inner.init();\\n\\\n});\\n\\\n'));\n\n      iframeHTML.push('<style type=\"text/css\" title=\"dynamicsyntax\"></style>');\n\n      hooks.callAll(\"aceInitInnerdocbodyHead\", {\n        iframeHTML: iframeHTML\n      });\n\n      iframeHTML.push('</head><body id=\"innerdocbody\" role=\"application\" class=\"syntax\" spellcheck=\"false\">&nbsp;</body></html>');\n\n      // Expose myself to global for my child frame.\n      var thisFunctionsName = \"ChildAccessibleAce2Editor\";\n      (function () {return this}())[thisFunctionsName] = Ace2Editor;\n\n      var outerScript = '\\\neditorId = ' + JSON.stringify(info.id) + ';\\n\\\neditorInfo = parent[' + JSON.stringify(thisFunctionsName) + '].registry[editorId];\\n\\\nwindow.onload = function () {\\n\\\n  window.onload = null;\\n\\\n  setTimeout(function () {\\n\\\n    var iframe = document.createElement(\"IFRAME\");\\n\\\n    iframe.name = \"ace_inner\";\\n\\\n    iframe.title = \"pad\";\\n\\\n    iframe.scrolling = \"no\";\\n\\\n    var outerdocbody = document.getElementById(\"outerdocbody\");\\n\\\n    iframe.frameBorder = 0;\\n\\\n    iframe.allowTransparency = true; // for IE\\n\\\n    outerdocbody.insertBefore(iframe, outerdocbody.firstChild);\\n\\\n    iframe.ace_outerWin = window;\\n\\\n    readyFunc = function () {\\n\\\n      editorInfo.onEditorReady();\\n\\\n      readyFunc = null;\\n\\\n      editorInfo = null;\\n\\\n    };\\n\\\n    var doc = iframe.contentWindow.document;\\n\\\n    doc.open();\\n\\\n    var text = (' + JSON.stringify(iframeHTML.join('\\n')) + ');\\n\\\n    doc.write(text);\\n\\\n    doc.close();\\n\\\n  }, 0);\\n\\\n}';\n\n      var outerHTML = [doctype, '<html><head>']\n\n      var includedCSS = [];\n      var $$INCLUDE_CSS = function(filename) {includedCSS.push(filename)};\n      $$INCLUDE_CSS(\"../static/css/iframe_editor.css\");\n      $$INCLUDE_CSS(\"../static/css/pad.css\");\n      $$INCLUDE_CSS(\"../static/custom/pad.css\");\n\n\n      var additionalCSS = _(hooks.callAll(\"aceEditorCSS\")).map(function(path){ return '../static/plugins/' + path });\n      includedCSS = includedCSS.concat(additionalCSS);\n\n      pushStyleTagsFor(outerHTML, includedCSS);\n\n      // bizarrely, in FF2, a file with no \"external\" dependencies won't finish loading properly\n      // (throbs busy while typing)\n      outerHTML.push('<style type=\"text/css\" title=\"dynamicsyntax\"></style>', '<link rel=\"stylesheet\" type=\"text/css\" href=\"data:text/css,\"/>', scriptTag(outerScript), '</head><body id=\"outerdocbody\"><div id=\"sidediv\"><!-- --></div><div id=\"linemetricsdiv\">x</div></body></html>');\n\n      var outerFrame = document.createElement(\"IFRAME\");\n      outerFrame.name = \"ace_outer\";\n      outerFrame.frameBorder = 0; // for IE\n      outerFrame.title = \"Ether\";\n      info.frame = outerFrame;\n      document.getElementById(containerId).appendChild(outerFrame);\n\n      var editorDocument = outerFrame.contentWindow.document;\n\n      editorDocument.open();\n      editorDocument.write(outerHTML.join(''));\n      editorDocument.close();\n    })();\n  };\n\n  return editor;\n}\n\nexports.Ace2Editor = Ace2Editor;\n;\nAce2Editor.EMBEDED = Ace2Editor.EMBEDED || {};\nAce2Editor.EMBEDED[\"../static/js/require-kernel.js\"] = \"var require = (function () {\\n/*!\\n\\n  require-kernel\\n\\n  Created by Chad Weider on 01/04/11.\\n  Released to the Public Domain on 17/01/12.\\n\\n*/\\n\\n  /* Storage */\\n  var main = null; // Reference to main module in `modules`.\\n  var modules = {}; // Repository of module objects build from `definitions`.\\n  var definitions = {}; // Functions that construct `modules`.\\n  var loadingModules = {}; // Locks for detecting circular dependencies.\\n  var definitionWaiters = {}; // Locks for clearing duplicate requires.\\n  var fetchRequests = []; // Queue of pending requests.\\n  var currentRequests = 0; // Synchronization for parallel requests.\\n  var maximumRequests = 2; // The maximum number of parallel requests.\\n  var deferred = []; // A list of callbacks that can be evaluated eventually.\\n  var deferredScheduled = false; // If deferred functions will be executed.\\n\\n  var syncLock = undefined;\\n  var globalKeyPath = undefined;\\n\\n  var rootURI = undefined;\\n  var libraryURI = undefined;\\n\\n  var JSONP_TIMEOUT = 60 * 1000;\\n\\n  function CircularDependencyError(message) {\\n    this.name = \\\"CircularDependencyError\\\";\\n    this.message = message;\\n  };\\n  CircularDependencyError.prototype = Error.prototype;\\n  function ArgumentError(message) {\\n    this.name = \\\"ArgumentError\\\";\\n    this.message = message;\\n  };\\n  ArgumentError.prototype = Error.prototype;\\n\\n  /* Utility */\\n  function hasOwnProperty(object, key) {\\n    // Object-independent because an object may define `hasOwnProperty`.\\n    return Object.prototype.hasOwnProperty.call(object, key);\\n  }\\n\\n  /* Deferral */\\n  function defer(f_1, f_2, f_n) {\\n    deferred.push.apply(deferred, arguments);\\n  }\\n\\n  function _flushDefer() {\\n    // Let exceptions happen, but don't allow them to break notification.\\n    try {\\n      while (deferred.length) {\\n        var continuation = deferred.shift();\\n        continuation();\\n      }\\n      deferredScheduled = false;\\n    } finally {\\n      deferredScheduled = deferred.length > 0;\\n      deferred.length && setTimeout(_flushDefer, 0);\\n    }\\n  }\\n\\n  function flushDefer() {\\n    if (!deferredScheduled && deferred.length > 0) {\\n      if (syncLock) {\\n        // Only asynchronous operations will wait on this condition so schedule\\n        // and don't interfere with the synchronous operation in progress.\\n        deferredScheduled = true;\\n        setTimeout(_flushDefer, 0);\\n      } else {\\n        _flushDefer();\\n      }\\n    }\\n  }\\n\\n  function flushDeferAfter(f) {\\n    try {\\n      deferredScheduled = true;\\n      f();\\n      deferredScheduled = false;\\n      flushDefer();\\n    } finally {\\n      deferredScheduled = false;\\n      deferred.length && setTimeout(flushDefer, 0);\\n    }\\n  }\\n\\n  // See RFC 2396 Appendix B\\n  var URI_EXPRESSION =\\n      /^(([^:\\\\/?#]+):)?(\\\\/\\\\/([^\\\\/?#]*))?([^?#]*)(\\\\?([^#]*))?(#(.*))?/;\\n  function parseURI(uri) {\\n    var match = uri.match(URI_EXPRESSION);\\n    var location = match && {\\n      scheme: match[2],\\n      host: match[4],\\n      path: match[5],\\n      query: match[7],\\n      fragment: match[9]\\n    };\\n    return location;\\n  }\\n\\n  function joinURI(location) {\\n    var uri = \\\"\\\";\\n    if (location.scheme)\\n      uri += location.scheme + ':';\\n    if (location.host)\\n      uri += \\\"//\\\" + location.host\\n    if (location.host && location.path && location.path.charAt(0) != '/')\\n      url += \\\"/\\\"\\n    if (location.path)\\n      uri += location.path\\n    if (location.query)\\n      uri += \\\"?\\\" + location.query\\n    if (uri.fragment)\\n      uri += \\\"#\\\" + location.fragment\\n\\n    return uri;\\n  }\\n\\n  function isSameDomain(uri) {\\n    var host_uri =\\n      (typeof location == \\\"undefined\\\") ? {} : parseURI(location.toString());\\n    var uri = parseURI(uri);\\n\\n    return (!uri.scheme && !uri.host)\\n        || (uri.scheme === host_uri.scheme) && (uri.host === host_uri.host);\\n  }\\n\\n  function mirroredURIForURI(uri) {\\n    var host_uri =\\n      (typeof location == \\\"undefined\\\") ? {} : parseURI(location.toString());\\n    var uri = parseURI(uri);\\n\\n    uri.scheme = host_uri.scheme;\\n    uri.host = host_uri.host;\\n    return joinURI(uri);\\n  }\\n\\n  function normalizePath(path) {\\n    var pathComponents1 = path.split('/');\\n    var pathComponents2 = [];\\n\\n    var component;\\n    for (var i = 0, ii = pathComponents1.length; i < ii; i++) {\\n      component = pathComponents1[i];\\n      switch (component) {\\n        case '':\\n          if (i == 0 || i == ii - 1) {\\n            // This indicates a leading or trailing slash.\\n            pathComponents2.push(component);\\n          }\\n          break;\\n        case '.':\\n          // Always skip.\\n          break;\\n        case '..':\\n          if (pathComponents2.length > 1\\n            || (pathComponents2.length == 1\\n              && pathComponents2[0] != ''\\n              && pathComponents2[0] != '.')) {\\n            pathComponents2.pop();\\n            break;\\n          }\\n        default:\\n          pathComponents2.push(component);\\n      }\\n    }\\n\\n    return pathComponents2.join('/');\\n  }\\n\\n  function fullyQualifyPath(path, basePath) {\\n    var fullyQualifiedPath = path;\\n    if (path.charAt(0) == '.'\\n      && (path.charAt(1) == '/'\\n        || (path.charAt(1) == '.' && path.charAt(2) == '/'))) {\\n      if (!basePath) {\\n        basePath = '';\\n      } else if (basePath.charAt(basePath.length-1) != '/') {\\n        basePath += '/';\\n      }\\n      fullyQualifiedPath = basePath + path;\\n    }\\n    return fullyQualifiedPath;\\n  }\\n\\n  function setRootURI(URI) {\\n    if (!URI) {\\n      throw new ArgumentError(\\\"Invalid root URI.\\\");\\n    }\\n    rootURI = (URI.charAt(URI.length-1) == '/' ? URI.slice(0,-1) : URI);\\n  }\\n\\n  function setLibraryURI(URI) {\\n    libraryURI = (URI.charAt(URI.length-1) == '/' ? URI : URI + '/');\\n  }\\n\\n  function URIForModulePath(path) {\\n    var components = path.split('/');\\n    for (var i = 0, ii = components.length; i < ii; i++) {\\n      components[i] = encodeURIComponent(components[i]);\\n    }\\n    path = components.join('/')\\n\\n    if (path.charAt(0) == '/') {\\n      if (!rootURI) {\\n        throw new Error(\\\"Attempt to retrieve the root module \\\"\\n          + \\\"\\\\\\\"\\\"+ path + \\\"\\\\\\\" but no root URI is defined.\\\");\\n      }\\n      return rootURI + path;\\n    } else {\\n      if (!libraryURI) {\\n        throw new Error(\\\"Attempt to retrieve the library module \\\"\\n          + \\\"\\\\\\\"\\\"+ path + \\\"\\\\\\\" but no libary URI is defined.\\\");\\n      }\\n      return libraryURI + path;\\n    }\\n  }\\n\\n  function _compileFunction(code, filename) {\\n    return new Function(code);\\n  }\\n\\n  function compileFunction(code, filename) {\\n    var compileFunction = rootRequire._compileFunction || _compileFunction;\\n    return compileFunction.apply(this, arguments);\\n  }\\n\\n  /* Remote */\\n  function setRequestMaximum (value) {\\n    value == parseInt(value);\\n    if (value > 0) {\\n      maximumRequests = value;\\n      checkScheduledfetchDefines();\\n    } else {\\n      throw new ArgumentError(\\\"Value must be a positive integer.\\\")\\n    }\\n  }\\n\\n  function setGlobalKeyPath (value) {\\n    globalKeyPath = value;\\n  }\\n\\n  var XMLHttpFactories = [\\n    function () {return new XMLHttpRequest()},\\n    function () {return new ActiveXObject(\\\"Msxml2.XMLHTTP\\\")},\\n    function () {return new ActiveXObject(\\\"Msxml3.XMLHTTP\\\")},\\n    function () {return new ActiveXObject(\\\"Microsoft.XMLHTTP\\\")}\\n  ];\\n\\n  function createXMLHTTPObject() {\\n    var xmlhttp = false;\\n    for (var i = 0, ii = XMLHttpFactories.length; i < ii; i++) {\\n      try {\\n        xmlhttp = XMLHttpFactories[i]();\\n      } catch (error) {\\n        continue;\\n      }\\n      break;\\n    }\\n    return xmlhttp;\\n  }\\n\\n  function getXHR(uri, async, callback, request) {\\n    var request = request || createXMLHTTPObject();\\n    if (!request) {\\n      throw new Error(\\\"Error making remote request.\\\")\\n    }\\n\\n    function onComplete(request) {\\n      // Build module constructor.\\n      if (request.status == 200) {\\n        callback(undefined, request.responseText);\\n      } else {\\n        callback(true, undefined);\\n      }\\n    }\\n\\n    request.open('GET', uri, !!(async));\\n    if (async) {\\n      request.onreadystatechange = function (event) {\\n        if (request.readyState == 4) {\\n          onComplete(request);\\n        }\\n      };\\n      request.send(null);\\n    } else {\\n      request.send(null);\\n      onComplete(request);\\n    }\\n  }\\n\\n  function getXDR(uri, callback) {\\n    var xdr = new XDomainRequest();\\n    xdr.open('GET', uri);\\n    xdr.error(function () {\\n      callback(true, undefined);\\n    });\\n    xdr.onload(function () {\\n      callback(undefined, request.responseText);\\n    });\\n    xdr.send();\\n  }\\n\\n  function fetchDefineXHR(path, async) {\\n    // If cross domain and request doesn't support such requests, go straight\\n    // to mirroring.\\n\\n    var _globalKeyPath = globalKeyPath;\\n\\n    var callback = function (error, text) {\\n      if (error) {\\n        define(path, null);\\n      } else {\\n        if (_globalKeyPath) {\\n          compileFunction(text, path)();\\n        } else {\\n          var definition = compileFunction(\\n              'return (function (require, exports, module) {'\\n            + text + '\\\\n'\\n            + '})', path)();\\n          define(path, definition);\\n        }\\n      }\\n    }\\n\\n    var uri = URIForModulePath(path);\\n    if (_globalKeyPath) {\\n      uri += '?callback=' + encodeURIComponent(globalKeyPath + '.define');\\n    }\\n    if (isSameDomain(uri)) {\\n      getXHR(uri, async, callback);\\n    } else {\\n      var request = createXMLHTTPObject();\\n      if (request && request.withCredentials !== undefined) {\\n        getXHR(uri, async, callback, request);\\n      } else if (async && (typeof XDomainRequest != \\\"undefined\\\")) {\\n        getXDR(uri, callback);\\n      } else {\\n        getXHR(mirroredURIForURI(uri), async, callback);\\n      }\\n    }\\n  }\\n\\n  function fetchDefineJSONP(path) {\\n    var head = document.head\\n      || document.getElementsByTagName('head')[0]\\n      || document.documentElement;\\n    var script = document.createElement('script');\\n    if (script.async !== undefined) {\\n      script.async = \\\"true\\\";\\n    } else {\\n      script.defer = \\\"true\\\";\\n    }\\n    script.type = \\\"application/javascript\\\";\\n    script.src = URIForModulePath(path)\\n      + '?callback=' + encodeURIComponent(globalKeyPath + '.define');\\n\\n    // Handle failure of JSONP request.\\n    if (JSONP_TIMEOUT < Infinity) {\\n      var timeoutId = setTimeout(function () {\\n        timeoutId = undefined;\\n        define(path, null);\\n      }, JSONP_TIMEOUT);\\n      definitionWaiters[path].unshift(function () {\\n        timeoutId === undefined && clearTimeout(timeoutId);\\n      });\\n    }\\n\\n    head.insertBefore(script, head.firstChild);\\n  }\\n\\n  /* Modules */\\n  function fetchModule(path, continuation) {\\n    if (hasOwnProperty(definitionWaiters, path)) {\\n      definitionWaiters[path].push(continuation);\\n    } else {\\n      definitionWaiters[path] = [continuation];\\n      schedulefetchDefine(path);\\n    }\\n  }\\n\\n  function schedulefetchDefine(path) {\\n    fetchRequests.push(path);\\n    checkScheduledfetchDefines();\\n  }\\n\\n  function checkScheduledfetchDefines() {\\n    if (fetchRequests.length > 0 && currentRequests < maximumRequests) {\\n      var fetchRequest = fetchRequests.pop();\\n      currentRequests++;\\n      definitionWaiters[fetchRequest].unshift(function () {\\n        currentRequests--;\\n        checkScheduledfetchDefines();\\n      });\\n      if (globalKeyPath\\n        && typeof document !== 'undefined'\\n          && document.readyState\\n            && /^loaded|complete$/.test(document.readyState)) {\\n        fetchDefineJSONP(fetchRequest);\\n      } else {\\n        fetchDefineXHR(fetchRequest, true);\\n      }\\n    }\\n  }\\n\\n  function fetchModuleSync(path, continuation) {\\n    fetchDefineXHR(path, false);\\n    continuation();\\n  }\\n\\n  function moduleIsLoaded(path) {\\n    return hasOwnProperty(modules, path);\\n  }\\n\\n  function loadModule(path, continuation) {\\n    // If it's a function then it hasn't been exported yet. Run function and\\n    //  then replace with exports result.\\n    if (!moduleIsLoaded(path)) {\\n      if (hasOwnProperty(loadingModules, path)) {\\n        throw new CircularDependencyError(\\\"Encountered circular dependency.\\\");\\n      } else if (!moduleIsDefined(path)) {\\n        throw new Error(\\\"Attempt to load undefined module.\\\");\\n      } else if (definitions[path] === null) {\\n        continuation(null);\\n      } else {\\n        var definition = definitions[path];\\n        var _module = {id: path, exports: {}};\\n        var _require = requireRelativeTo(path);\\n        if (!main) {\\n          main = _module;\\n        }\\n        try {\\n          loadingModules[path] = true;\\n          definition(_require, _module.exports, _module);\\n          modules[path] = _module;\\n          delete loadingModules[path];\\n          continuation(_module);\\n        } finally {\\n          delete loadingModules[path];\\n        }\\n      }\\n    } else {\\n      var module = modules[path];\\n      continuation(module);\\n    }\\n  }\\n\\n  function _moduleAtPath(path, fetchFunc, continuation) {\\n    // hack fix temporary in for etherpad #2505\\n    if(path === \\\"ep_etherpad-lite/static/js/pad.js\\\") path = \\\"ep_etherpad-lite/static/js/pad\\\";\\n    // Making the below change saves on 2 http requests\\n    // and also 1 per plugin and nothing seems to b0rk?\\n    // This code is run on the client only\\n    // var suffixes = ['', '.js', '/index.js'];\\n    var suffixes = ['.js', '/index.js'];\\n    if (path.charAt(path.length - 1) == '/') {\\n      suffixes = ['index.js'];\\n    }\\n    var i = 0, ii = suffixes.length;\\n    var _find = function (i) {\\n      if (i < ii) {\\n        var path_ = path + suffixes[i];\\n        var after = function () {\\n          loadModule(path_, function (module) {\\n            if (module === null) {\\n              _find(i + 1);\\n            } else {\\n              continuation(module);\\n            }\\n          });\\n        }\\n\\n        if (!moduleIsDefined(path_)) {\\n          fetchFunc(path_, after);\\n        } else {\\n          after();\\n        }\\n\\n      } else {\\n        continuation(null);\\n      }\\n    };\\n    _find(0);\\n  }\\n\\n  function moduleAtPath(path, continuation) {\\n    defer(function () {\\n      _moduleAtPath(path, fetchModule, continuation);\\n    });\\n  }\\n\\n  function moduleAtPathSync(path) {\\n    var module;\\n    var oldSyncLock = syncLock;\\n    syncLock = true;\\n\\n    // HACK TODO\\n    // This is completely the wrong way to do it but for now it shows it works\\n    if(path == \\\"async\\\"){\\n      // console.warn(\\\"path is async and we're doing a ghetto fix\\\");\\n      path = \\\"async/lib/async\\\";\\n    }\\n\\n    // HACK TODO\\n    // This is completely the wrong way to do it but for now it shows it works\\n    if(path == \\\"underscore\\\"){\\n      // console.warn(\\\"path is async and we're doing a ghetto fix\\\");\\n      path = \\\"underscore/underscore\\\";\\n    }\\n\\n    // HACK TODO\\n    // This is completely the wrong way to do it but for now it shows it works\\n    if(path == \\\"unorm\\\"){\\n      // console.warn(\\\"path is async and we're doing a ghetto fix\\\");\\n      path = \\\"unorm/lib/unorm\\\";\\n    }\\n\\n    try {\\n      _moduleAtPath(path, fetchModuleSync, function (_module) {\\n        module = _module;\\n      });\\n    } finally {\\n      syncLock = oldSyncLock;\\n    }\\n    return module;\\n  }\\n\\n  /* Definition */\\n  function moduleIsDefined(path) {\\n    return hasOwnProperty(definitions, path);\\n  }\\n\\n  function defineModule(path, module) {\\n    if (typeof path != 'string'\\n      || !((typeof module == 'function') || module === null)) {\\n      throw new ArgumentError(\\n          \\\"Definition must be a (string, function) pair.\\\");\\n    }\\n\\n    if (moduleIsDefined(path)) {\\n      // Drop import silently\\n    } else {\\n      definitions[path] = module;\\n    }\\n  }\\n\\n  function defineModules(moduleMap) {\\n    if (typeof moduleMap != 'object') {\\n      throw new ArgumentError(\\\"Mapping must be an object.\\\");\\n    }\\n    for (var path in moduleMap) {\\n      if (hasOwnProperty(moduleMap, path)) {\\n        defineModule(path, moduleMap[path]);\\n      }\\n    }\\n  }\\n\\n  function define(fullyQualifiedPathOrModuleMap, module) {\\n    var moduleMap;\\n    if (arguments.length == 1) {\\n      moduleMap = fullyQualifiedPathOrModuleMap;\\n      defineModules(moduleMap);\\n    } else if (arguments.length == 2) {\\n      var path = fullyQualifiedPathOrModuleMap;\\n      defineModule(fullyQualifiedPathOrModuleMap, module);\\n      moduleMap = {};\\n      moduleMap[path] = module;\\n    } else {\\n      throw new ArgumentError(\\\"Expected 1 or 2 arguments, but got \\\"\\n          + arguments.length + \\\".\\\");\\n    }\\n\\n    // With all modules installed satisfy those conditions for all waiters.\\n    for (var path in moduleMap) {\\n      if (hasOwnProperty(moduleMap, path)\\n        && hasOwnProperty(definitionWaiters, path)) {\\n        defer.apply(this, definitionWaiters[path]);\\n        delete definitionWaiters[path];\\n      }\\n    }\\n\\n    flushDefer();\\n  }\\n\\n  /* Require */\\n  function _designatedRequire(path, continuation) {\\n    if (continuation === undefined) {\\n      var module = moduleAtPathSync(path);\\n      if (!module) {\\n        throw new Error(\\\"The module at \\\\\\\"\\\" + path + \\\"\\\\\\\" does not exist.\\\");\\n      }\\n      return module.exports;\\n    } else {\\n      if (!(typeof continuation == 'function')) {\\n        throw new ArgumentError(\\\"Continuation must be a function.\\\");\\n      }\\n\\n      flushDeferAfter(function () {\\n        moduleAtPath(path, function (module) {\\n          continuation(module && module.exports);\\n        });\\n      });\\n    }\\n  }\\n\\n  function designatedRequire(path, continuation) {\\n    var designatedRequire =\\n        rootRequire._designatedRequire || _designatedRequire;\\n    return designatedRequire.apply(this, arguments);\\n  }\\n\\n  function requireRelative(basePath, qualifiedPath, continuation) {\\n    qualifiedPath = qualifiedPath.toString();\\n    var path = normalizePath(fullyQualifyPath(qualifiedPath, basePath));\\n    return designatedRequire(path, continuation);\\n  }\\n\\n  function requireRelativeN(basePath, qualifiedPaths, continuation) {\\n    if (!(typeof continuation == 'function')) {\\n      throw new ArgumentError(\\\"Final argument must be a continuation.\\\");\\n    } else {\\n      // Copy and validate parameters\\n      var _qualifiedPaths = [];\\n      for (var i = 0, ii = qualifiedPaths.length; i < ii; i++) {\\n        _qualifiedPaths[i] = qualifiedPaths[i].toString();\\n      }\\n      var results = [];\\n      function _require(result) {\\n        results.push(result);\\n        if (qualifiedPaths.length > 0) {\\n          requireRelative(basePath, qualifiedPaths.shift(), _require);\\n        } else {\\n          continuation.apply(this, results);\\n        }\\n      }\\n      for (var i = 0, ii = qualifiedPaths.length; i < ii; i++) {\\n        requireRelative(basePath, _qualifiedPaths[i], _require);\\n      }\\n    }\\n  }\\n\\n  var requireRelativeTo = function (basePath) {\\n    basePath = basePath.replace(/[^\\\\/]+$/, '');\\n    function require(qualifiedPath, continuation) {\\n      if (arguments.length > 2) {\\n        var qualifiedPaths = Array.prototype.slice.call(arguments, 0, -1);\\n        var continuation = arguments[arguments.length-1];\\n        return requireRelativeN(basePath, qualifiedPaths, continuation);\\n      } else {\\n        return requireRelative(basePath, qualifiedPath, continuation);\\n      }\\n    }\\n    require.main = main;\\n\\n    return require;\\n  }\\n\\n  var rootRequire = requireRelativeTo('/');\\n\\n  /* Private internals */\\n  rootRequire._modules = modules;\\n  rootRequire._definitions = definitions;\\n  rootRequire._designatedRequire = _designatedRequire;\\n  rootRequire._compileFunction = _compileFunction;\\n\\n  /* Public interface */\\n  rootRequire.define = define;\\n  rootRequire.setRequestMaximum = setRequestMaximum;\\n  rootRequire.setGlobalKeyPath = setGlobalKeyPath;\\n  rootRequire.setRootURI = setRootURI;\\n  rootRequire.setLibraryURI = setLibraryURI;\\n\\n  return rootRequire;\\n}())\\n;\\n\";\nAce2Editor.EMBEDED[\"../static/css/iframe_editor.css\"] = \"html{cursor:text}span{cursor:auto}::selection{background:#acf}::-moz-selection{background:#acf}a{cursor:pointer!important;white-space:pre-wrap}li,ol,ul{padding:0;margin:0}ul,ul.list-bullet1{margin-left:1.5em}ul ul{margin-left:0!important}ul.list-bullet2{margin-left:3em}ul.list-bullet3{margin-left:4.5em}ul.list-bullet4{margin-left:6em}ul.list-bullet5{margin-left:7.5em}ul.list-bullet6{margin-left:9em}ul.list-bullet7{margin-left:10.5em}ul.list-bullet8{margin-left:12em}ul.list-bullet9{margin-left:13.5em}ul.list-bullet10{margin-left:15em}ul.list-bullet11{margin-left:16.5em}ul.list-bullet12{margin-left:18em}ul.list-bullet13{margin-left:19.5em}ul.list-bullet14{margin-left:21em}ul.list-bullet15{margin-left:22.5em}ul,ul.list-bullet1{list-style-type:disc}ul.list-bullet2{list-style-type:circle}ul.list-bullet3{list-style-type:square}ul.list-bullet4{list-style-type:disc}ul.list-bullet5{list-style-type:circle}ul.list-bullet6{list-style-type:square}ul.list-bullet7{list-style-type:disc}ul.list-bullet8{list-style-type:circle}ul.list-bullet9{list-style-type:disc}ul.list-bullet10{list-style-type:circle}ul.list-bullet11{list-style-type:square}ul.list-bullet12{list-style-type:disc}ul.list-bullet13{list-style-type:circle}ul.list-bullet14{list-style-type:square}ul.list-bullet15{list-style-type:disc}ul.list-bullet16{margin-left:24em;list-style-type:circle}ul.list-indent1{margin-left:1.5em}ul.list-indent2{margin-left:3em}ul.list-indent3{margin-left:4.5em}ul.list-indent4{margin-left:6em}ul.list-indent5{margin-left:7.5em}ul.list-indent6{margin-left:9em}ul.list-indent7{margin-left:10.5em}ul.list-indent8{margin-left:12em}ul.list-indent9{margin-left:13.5em}ul.list-indent10{margin-left:15em}ul.list-indent11{margin-left:16.5em}ul.list-indent12{margin-left:18em}ul.list-indent13{margin-left:19.5em}ul.list-indent14{margin-left:21em}ul.list-indent15{margin-left:22.5em}ul.list-indent16{margin-left:24em}body,p{margin:0}ul.list-indent1,ul.list-indent10,ul.list-indent11,ul.list-indent12,ul.list-indent13,ul.list-indent14,ul.list-indent15,ul.list-indent16,ul.list-indent2,ul.list-indent3,ul.list-indent4,ul.list-indent5,ul.list-indent6,ul.list-indent7,ul.list-indent8,ul.list-indent9{list-style-type:none}body{white-space:nowrap;word-wrap:normal}#outerdocbody{background-color:#fff}body.grayedout{background-color:#eee!important}#innerdocbody{font-size:12px;font-family:Arial,sans-serif;line-height:16px;padding:1px 10px 8px 1px;overflow:hidden;background-image:url(data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==)}.noprewrap{white-space:normal}body.doesWrap:not(.noprewrap)>div{white-space:pre-wrap}#sidediv{font-size:11px;font-family:monospace;line-height:16px;padding-top:8px;padding-right:3px;position:absolute;width:20px;top:0;left:0;cursor:default;color:#fff}#sidedivinner{text-align:right}.sidedivdelayed{background-color:#eee;color:#888!important;border-right:1px solid #ccc}.sidedivhidden{display:none}#outerdocbody iframe{display:block;position:relative;left:32px;top:7px;border:0;width:1px;height:1px}#outerdocbody .hotrect{border:1px solid #999;position:absolute}body.mozilla,body.safari{display:table-cell}body.doesWrap{word-wrap:break-word;display:block!important}.safari div{padding-right:1px}#linemetricsdiv{position:absolute;left:-1000px;top:-1000px;color:#fff;z-index:-1;font-size:12px;font-family:monospace}ol{list-style-type:decimal}ol>li{display:block}ol.list-number1{text-indent:0}ol.list-number2{text-indent:10px}ol.list-number3{text-indent:20px}ol.list-number4{text-indent:30px}ol.list-number5{text-indent:40px}ol.list-number6{text-indent:50px}ol.list-number7{text-indent:60px}ol.list-number8{text-indent:70px}ol.list-number9{text-indent:80px}ol.list-number10{text-indent:90px}ol.list-number11{text-indent:100px}ol.list-number12{text-indent:110px}ol.list-number13{text-indent:120px}ol.list-number14{text-indent:130px}ol.list-number15{text-indent:140px}ol.list-number16{text-indent:150px}.list-start-number1{counter-reset:first second}.list-start-number2{counter-reset:second}.list-start-number3{counter-reset:third}.list-start-number4{counter-reset:fourth}.list-start-number5{counter-reset:fifth}.list-start-number6{counter-reset:sixth}.list-start-number7{counter-reset:seventh}.list-start-number8{counter-reset:eighth}.list-start-number9{counter-reset:ninth}.list-start-number10{counter-reset:tenth}.list-start-number11{counter-reset:eleventh}.list-start-number12{counter-reset:twelth}.list-start-number13{counter-reset:thirteenth}.list-start-number14{counter-reset:fourteenth}.list-start-number15{counter-reset:fifteenth}.list-start-number16{counter-reset:sixteenth}.list-number1 li:before{content:counter(first)\\\". \\\";counter-increment:first}.list-number2 li:before{content:counter(first)\\\".\\\" counter(second)\\\". \\\";counter-increment:second}.list-number3 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\". \\\";counter-increment:third 1}.list-number4 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\". \\\";counter-increment:fourth 1}.list-number5 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\".\\\" counter(fifth)\\\". \\\";counter-increment:fifth 1}.list-number6 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\".\\\" counter(fifth)\\\".\\\" counter(sixth)\\\". \\\";counter-increment:sixth 1}.list-number7 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\".\\\" counter(fifth)\\\".\\\" counter(sixth)\\\".\\\" counter(seventh)\\\". \\\";counter-increment:seventh 1}.list-number8 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\".\\\" counter(fifth)\\\".\\\" counter(sixth)\\\".\\\" counter(seventh)\\\".\\\" counter(eighth)\\\". \\\";counter-increment:eighth 1}.list-number9 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\".\\\" counter(fifth)\\\".\\\" counter(sixth)\\\".\\\" counter(seventh)\\\".\\\" counter(eighth)\\\".\\\" counter(ninth)\\\". \\\";counter-increment:ninth 1}.list-number10 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\".\\\" counter(fifth)\\\".\\\" counter(sixth)\\\".\\\" counter(seventh)\\\".\\\" counter(eighth)\\\".\\\" counter(ninth)\\\".\\\" counter(tenth)\\\". \\\";counter-increment:tenth 1}.list-number11 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\".\\\" counter(fifth)\\\".\\\" counter(sixth)\\\".\\\" counter(seventh)\\\".\\\" counter(eighth)\\\".\\\" counter(ninth)\\\".\\\" counter(tenth)\\\".\\\" counter(eleventh)\\\". \\\";counter-increment:eleventh 1}.list-number12 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\".\\\" counter(fifth)\\\".\\\" counter(sixth)\\\".\\\" counter(seventh)\\\".\\\" counter(eighth)\\\".\\\" counter(ninth)\\\".\\\" counter(tenth)\\\".\\\" counter(eleventh)\\\".\\\" counter(twelth)\\\". \\\";counter-increment:twelth 1}.list-number13 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\".\\\" counter(fifth)\\\".\\\" counter(sixth)\\\".\\\" counter(seventh)\\\".\\\" counter(eighth)\\\".\\\" counter(ninth)\\\".\\\" counter(tenth)\\\".\\\" counter(eleventh)\\\".\\\" counter(twelth)\\\".\\\" counter(thirteenth)\\\". \\\";counter-increment:thirteenth 1}.list-number14 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\".\\\" counter(fifth)\\\".\\\" counter(sixth)\\\".\\\" counter(eighth)\\\".\\\" counter(ninth)\\\".\\\" counter(tenth)\\\".\\\" counter(eleventh)\\\".\\\" counter(twelth)\\\".\\\" counter(thirteenth)\\\".\\\" counter(fourteenth)\\\". \\\";counter-increment:fourteenth 1}.list-number15 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\".\\\" counter(fifth)\\\".\\\" counter(sixth)\\\".\\\" counter(eighth)\\\".\\\" counter(ninth)\\\".\\\" counter(tenth)\\\".\\\" counter(eleventh)\\\".\\\" counter(twelth)\\\".\\\" counter(thirteenth)\\\".\\\" counter(fourteenth)\\\".\\\" counter(fifteenth)\\\". \\\";counter-increment:fifteenth 1}.list-number16 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\".\\\" counter(fifth)\\\".\\\" counter(sixth)\\\".\\\" counter(eighth)\\\".\\\" counter(ninth)\\\".\\\" counter(tenth)\\\".\\\" counter(eleventh)\\\".\\\" counter(twelth)\\\".\\\" counter(thirteenth)\\\".\\\" counter(fourteenth)\\\".\\\" counter(fifteenth)\\\".\\\" counter(sixteenth)\\\". \\\";counter-increment:fixteenth 1}\";\nAce2Editor.EMBEDED[\"../static/css/iframe_editor.css\"] = \"html{cursor:text}span{cursor:auto}::selection{background:#acf}::-moz-selection{background:#acf}a{cursor:pointer!important;white-space:pre-wrap}li,ol,ul{padding:0;margin:0}ul,ul.list-bullet1{margin-left:1.5em}ul ul{margin-left:0!important}ul.list-bullet2{margin-left:3em}ul.list-bullet3{margin-left:4.5em}ul.list-bullet4{margin-left:6em}ul.list-bullet5{margin-left:7.5em}ul.list-bullet6{margin-left:9em}ul.list-bullet7{margin-left:10.5em}ul.list-bullet8{margin-left:12em}ul.list-bullet9{margin-left:13.5em}ul.list-bullet10{margin-left:15em}ul.list-bullet11{margin-left:16.5em}ul.list-bullet12{margin-left:18em}ul.list-bullet13{margin-left:19.5em}ul.list-bullet14{margin-left:21em}ul.list-bullet15{margin-left:22.5em}ul,ul.list-bullet1{list-style-type:disc}ul.list-bullet2{list-style-type:circle}ul.list-bullet3{list-style-type:square}ul.list-bullet4{list-style-type:disc}ul.list-bullet5{list-style-type:circle}ul.list-bullet6{list-style-type:square}ul.list-bullet7{list-style-type:disc}ul.list-bullet8{list-style-type:circle}ul.list-bullet9{list-style-type:disc}ul.list-bullet10{list-style-type:circle}ul.list-bullet11{list-style-type:square}ul.list-bullet12{list-style-type:disc}ul.list-bullet13{list-style-type:circle}ul.list-bullet14{list-style-type:square}ul.list-bullet15{list-style-type:disc}ul.list-bullet16{margin-left:24em;list-style-type:circle}ul.list-indent1{margin-left:1.5em}ul.list-indent2{margin-left:3em}ul.list-indent3{margin-left:4.5em}ul.list-indent4{margin-left:6em}ul.list-indent5{margin-left:7.5em}ul.list-indent6{margin-left:9em}ul.list-indent7{margin-left:10.5em}ul.list-indent8{margin-left:12em}ul.list-indent9{margin-left:13.5em}ul.list-indent10{margin-left:15em}ul.list-indent11{margin-left:16.5em}ul.list-indent12{margin-left:18em}ul.list-indent13{margin-left:19.5em}ul.list-indent14{margin-left:21em}ul.list-indent15{margin-left:22.5em}ul.list-indent16{margin-left:24em}body,p{margin:0}ul.list-indent1,ul.list-indent10,ul.list-indent11,ul.list-indent12,ul.list-indent13,ul.list-indent14,ul.list-indent15,ul.list-indent16,ul.list-indent2,ul.list-indent3,ul.list-indent4,ul.list-indent5,ul.list-indent6,ul.list-indent7,ul.list-indent8,ul.list-indent9{list-style-type:none}body{white-space:nowrap;word-wrap:normal}#outerdocbody{background-color:#fff}body.grayedout{background-color:#eee!important}#innerdocbody{font-size:12px;font-family:Arial,sans-serif;line-height:16px;padding:1px 10px 8px 1px;overflow:hidden;background-image:url(data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==)}.noprewrap{white-space:normal}body.doesWrap:not(.noprewrap)>div{white-space:pre-wrap}#sidediv{font-size:11px;font-family:monospace;line-height:16px;padding-top:8px;padding-right:3px;position:absolute;width:20px;top:0;left:0;cursor:default;color:#fff}#sidedivinner{text-align:right}.sidedivdelayed{background-color:#eee;color:#888!important;border-right:1px solid #ccc}.sidedivhidden{display:none}#outerdocbody iframe{display:block;position:relative;left:32px;top:7px;border:0;width:1px;height:1px}#outerdocbody .hotrect{border:1px solid #999;position:absolute}body.mozilla,body.safari{display:table-cell}body.doesWrap{word-wrap:break-word;display:block!important}.safari div{padding-right:1px}#linemetricsdiv{position:absolute;left:-1000px;top:-1000px;color:#fff;z-index:-1;font-size:12px;font-family:monospace}ol{list-style-type:decimal}ol>li{display:block}ol.list-number1{text-indent:0}ol.list-number2{text-indent:10px}ol.list-number3{text-indent:20px}ol.list-number4{text-indent:30px}ol.list-number5{text-indent:40px}ol.list-number6{text-indent:50px}ol.list-number7{text-indent:60px}ol.list-number8{text-indent:70px}ol.list-number9{text-indent:80px}ol.list-number10{text-indent:90px}ol.list-number11{text-indent:100px}ol.list-number12{text-indent:110px}ol.list-number13{text-indent:120px}ol.list-number14{text-indent:130px}ol.list-number15{text-indent:140px}ol.list-number16{text-indent:150px}.list-start-number1{counter-reset:first second}.list-start-number2{counter-reset:second}.list-start-number3{counter-reset:third}.list-start-number4{counter-reset:fourth}.list-start-number5{counter-reset:fifth}.list-start-number6{counter-reset:sixth}.list-start-number7{counter-reset:seventh}.list-start-number8{counter-reset:eighth}.list-start-number9{counter-reset:ninth}.list-start-number10{counter-reset:tenth}.list-start-number11{counter-reset:eleventh}.list-start-number12{counter-reset:twelth}.list-start-number13{counter-reset:thirteenth}.list-start-number14{counter-reset:fourteenth}.list-start-number15{counter-reset:fifteenth}.list-start-number16{counter-reset:sixteenth}.list-number1 li:before{content:counter(first)\\\". \\\";counter-increment:first}.list-number2 li:before{content:counter(first)\\\".\\\" counter(second)\\\". \\\";counter-increment:second}.list-number3 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\". \\\";counter-increment:third 1}.list-number4 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\". \\\";counter-increment:fourth 1}.list-number5 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\".\\\" counter(fifth)\\\". \\\";counter-increment:fifth 1}.list-number6 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\".\\\" counter(fifth)\\\".\\\" counter(sixth)\\\". \\\";counter-increment:sixth 1}.list-number7 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\".\\\" counter(fifth)\\\".\\\" counter(sixth)\\\".\\\" counter(seventh)\\\". \\\";counter-increment:seventh 1}.list-number8 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\".\\\" counter(fifth)\\\".\\\" counter(sixth)\\\".\\\" counter(seventh)\\\".\\\" counter(eighth)\\\". \\\";counter-increment:eighth 1}.list-number9 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\".\\\" counter(fifth)\\\".\\\" counter(sixth)\\\".\\\" counter(seventh)\\\".\\\" counter(eighth)\\\".\\\" counter(ninth)\\\". \\\";counter-increment:ninth 1}.list-number10 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\".\\\" counter(fifth)\\\".\\\" counter(sixth)\\\".\\\" counter(seventh)\\\".\\\" counter(eighth)\\\".\\\" counter(ninth)\\\".\\\" counter(tenth)\\\". \\\";counter-increment:tenth 1}.list-number11 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\".\\\" counter(fifth)\\\".\\\" counter(sixth)\\\".\\\" counter(seventh)\\\".\\\" counter(eighth)\\\".\\\" counter(ninth)\\\".\\\" counter(tenth)\\\".\\\" counter(eleventh)\\\". \\\";counter-increment:eleventh 1}.list-number12 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\".\\\" counter(fifth)\\\".\\\" counter(sixth)\\\".\\\" counter(seventh)\\\".\\\" counter(eighth)\\\".\\\" counter(ninth)\\\".\\\" counter(tenth)\\\".\\\" counter(eleventh)\\\".\\\" counter(twelth)\\\". \\\";counter-increment:twelth 1}.list-number13 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\".\\\" counter(fifth)\\\".\\\" counter(sixth)\\\".\\\" counter(seventh)\\\".\\\" counter(eighth)\\\".\\\" counter(ninth)\\\".\\\" counter(tenth)\\\".\\\" counter(eleventh)\\\".\\\" counter(twelth)\\\".\\\" counter(thirteenth)\\\". \\\";counter-increment:thirteenth 1}.list-number14 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\".\\\" counter(fifth)\\\".\\\" counter(sixth)\\\".\\\" counter(eighth)\\\".\\\" counter(ninth)\\\".\\\" counter(tenth)\\\".\\\" counter(eleventh)\\\".\\\" counter(twelth)\\\".\\\" counter(thirteenth)\\\".\\\" counter(fourteenth)\\\". \\\";counter-increment:fourteenth 1}.list-number15 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\".\\\" counter(fifth)\\\".\\\" counter(sixth)\\\".\\\" counter(eighth)\\\".\\\" counter(ninth)\\\".\\\" counter(tenth)\\\".\\\" counter(eleventh)\\\".\\\" counter(twelth)\\\".\\\" counter(thirteenth)\\\".\\\" counter(fourteenth)\\\".\\\" counter(fifteenth)\\\". \\\";counter-increment:fifteenth 1}.list-number16 li:before{content:counter(first)\\\".\\\" counter(second)\\\".\\\" counter(third)\\\".\\\" counter(fourth)\\\".\\\" counter(fifth)\\\".\\\" counter(sixth)\\\".\\\" counter(eighth)\\\".\\\" counter(ninth)\\\".\\\" counter(tenth)\\\".\\\" counter(eleventh)\\\".\\\" counter(twelth)\\\".\\\" counter(thirteenth)\\\".\\\" counter(fourteenth)\\\".\\\" counter(fifteenth)\\\".\\\" counter(sixteenth)\\\". \\\";counter-increment:fixteenth 1}\";\nAce2Editor.EMBEDED[\"../static/css/pad.css\"] = \".toolbar ul,iframe{position:absolute}#myusernameform .editactive,#myusernameform .editempty,.usertdname input.editactive,.usertdname input.editempty{background:#fff;border-top:1px solid #c3c3c3;border-left:1px solid #c3c3c3;border-bottom:1px solid #e6e6e6;border-right:1px solid #e6e6e6}#chatcounter,#chatlabel,#otheruserstable td,.buttonicon{vertical-align:middle}#chaticon a,#chatlabel,#titlecross,#titlesticky,.exporttype,.popup a,.toolbar ul li a{text-decoration:none}#chatlabel,#nootherusers,#titlebar,.throbbold{font-weight:700}*,body,html,p{margin:0;padding:0}.clear{clear:both}html{font-size:62.5%;width:100%}body,textarea{font-family:Helvetica,Arial,sans-serif}.readonly .acl-write{display:none}#users{background:-webkit-linear-gradient(#F7F7F7,#EEE);background:-moz-linear-gradient(#F7F7F7,#EEE);background:-ms-linear-gradient(#F7F7F7,#EEE);background:-o-linear-gradient(#F7F7F7,#EEE);background:linear-gradient(#F7F7F7,#EEE);width:160px;color:#fff;padding:5px;border-radius:0 0 6px 6px;border:1px solid #ccc}#users,.toolbar{background:#f7f7f7}#otherusers{max-height:400px;overflow:auto}a img{border:0}.toolbar{background:-webkit-linear-gradient(#f7f7f7,#f1f1f1 80%);background:-moz-linear-gradient(#f7f7f7,#f1f1f1 80%);background:-o-linear-gradient(#f7f7f7,#f1f1f1 80%);background:-ms-linear-gradient(#f7f7f7,#f1f1f1 80%);background:linear-gradient(#f7f7f7,#f1f1f1 80%);border-bottom:1px solid #ccc;overflow:hidden;padding-top:4px;width:100%;white-space:nowrap;height:32px}.toolbar ul{list-style:none;padding-right:3px;padding-left:1px;z-index:2;overflow:hidden;float:left}.toolbar ul li{float:left;margin-left:2px;height:32px}.toolbar ul li.separator{border:inherit;background:inherit;visibility:hidden;width:0;padding:5px;height:22px}.toolbar ul li a:hover{text-decoration:none;background:#fff;background:-webkit-linear-gradient(#f4f4f4,#e4e4e4);background:-moz-linear-gradient(#f4f4f4,#e4e4e4);background:-o-linear-gradient(#f4f4f4,#e4e4e4);background:-ms-linear-gradient(#f4f4f4,#e4e4e4);background:linear-gradient(#f4f4f4,#e4e4e4)}.toolbar ul li .activeButton,.toolbar ul li a:active{background:#eee;background:-webkit-linear-gradient(#ddd,#fff);background:-moz-linear-gradient(#ddd,#fff);background:-o-linear-gradient(#ddd,#fff);background:-ms-linear-gradient(#ddd,#fff);background:linear-gradient(#ddd,#fff);-webkit-box-shadow:0 0 8px rgba(0,0,0,.1)inset;-moz-box-shadow:0 0 8px rgba(0,0,0,.1)inset;box-shadow:0 0 8px rgba(0,0,0,.1)inset}.toolbar ul li a{background:#fff;background:-webkit-linear-gradient(#fff,#f0f0f0);background:-moz-linear-gradient(#fff,#f0f0f0);background:-o-linear-gradient(#fff,#f0f0f0);background:-ms-linear-gradient(#fff,#f0f0f0);background:linear-gradient(#fff,#f0f0f0);border:1px solid #ccc;border-radius:3px;color:#ccc;cursor:pointer;display:inline-block;min-height:18px;overflow:hidden;padding:4px 5px;text-align:center;min-width:18px}#connectivity *,#editbar,#mystatusedit,table#otheruserstable{display:none}.toolbar ul li a .buttonicon{position:relative;top:1px}.toolbar ul li a .buttontext{font-size:14px;border:none;background:0 0;margin-top:1px;color:#666}.buttontext::-moz-focus-inner{padding:0;border:0}.buttontext:focus{border:1px solid #666!important}.toolbar ul li a.grouped-left{border-radius:3px 0 0 3px}.toolbar ul li a.grouped-middle{border-radius:0;margin-left:-2px;border-left:0}.toolbar ul li a.grouped-right{border-radius:0 3px 3px 0;margin-left:-2px;border-left:0}.toolbar ul li a.selected{background:#eee!important;background:-webkit-linear-gradient(#EEE,#F0F0F0)!important;background:-moz-linear-gradient(#EEE,#F0F0F0)!important;background:-o-linear-gradient(#EEE,#F0F0F0)!important;background:-ms-linear-gradient(#EEE,#F0F0F0)!important;background:linear-gradient(#EEE,#F0F0F0)!important}.toolbar ul li select{background:#fff;padding:4px;line-height:22px;height:28px;border-radius:3px;border:1px solid #ccc;outline:0}.toolbar ul.menu_left{left:0;right:250px}.toolbar ul.menu_right{right:0}li[data-key=showusers]>a{min-width:30px;text-align:left}li[data-key=showusers]>a #online_count{color:#777;font-size:11px;position:relative;top:2px;padding-left:2px}#chatbox,#chatinputbox,#chattext,#editorcontainer,#editorcontainerbox,#editorloadingbox,#mycolorpicker,#mycolorpickercancel,#mycolorpickerpreview,#mycolorpickersave,#padeditor,#padmain,#padpage,.toolbar #overlay{position:absolute}#editorcontainer{top:37px;left:0;right:0;bottom:0;z-index:1}#editorcontainer iframe{height:100%;width:100%;padding:0;margin:0;left:0}#editorloadingbox{padding-top:100px;padding-bottom:100px;font-size:2.5em;color:#aaa;text-align:center;width:100%;height:30px;z-index:100}#editorloadingbox .passForm,#editorloadingbox button,#editorloadingbox input{padding:10px}.loadingAnimation{-webkit-animation:loadingAnimation 2s infinite linear;animation:loadingAnimation 2s infinite linear;font-family:fontawesome-etherpad;font-size:24px;z-index:150;width:25px;height:25px}.loadingAnimation:before{content:\\\"\\\\e80e\\\"}@-webkit-keyframes loadingAnimation{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes loadingAnimation{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}#editorcontainerbox{bottom:0;top:0;width:100%}#padpage{top:0;bottom:0;width:100%}#padmain{margin-top:0;top:63px!important;left:0;right:0;bottom:0;zoom:1}#padeditor{bottom:0;left:0;right:0;top:0;zoom:1}#myswatchbox{position:absolute;left:5px;top:5px;width:24px;height:24px;background:0 0;cursor:pointer}#myswatch{width:100%;height:100%;background:0 0}#mycolorpicker{width:232px;height:265px;left:-250px;top:0;z-index:101;display:none;border-radius:0 0 6px 6px;background:#f7f7f7;border:1px solid #ccc;border-top:0;padding-left:10px;padding-top:10px}#mycolorpickersave{left:10px;font-weight:700}#mycolorpickercancel{left:85px}#mycolorpickercancel,#mycolorpickersave{background:#fff;background:-webkit-linear-gradient(#fff,#ccc);background:-moz-linear-gradient(#fff,#ccc);background:-o-linear-gradient(#fff,#ccc);background:-ms-linear-gradient(#fff,#ccc);background:linear-gradient(#fff,#ccc);border:1px solid #ccc;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-size:12px;cursor:pointer;color:#000;overflow:hidden;padding:4px;top:240px;text-align:center;width:60px}#titlecross,#titlesticky{color:#555;text-align:right}#chatbox,#chaticon{border-top-right-radius:5px;border-top-left-radius:5px}#mycolorpickerpreview{left:207px;top:240px;width:16px;height:16px;padding:4px;overflow:hidden;color:#fff;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px}#myusernameform{margin-left:30px}#myusernameedit{font-size:1.3em;padding:3px;height:18px;margin:0;width:122px;background:0 0}#myusernameform input.editable{border:1px solid #444}#myuser .myusernameedithoverable:hover{background:#fff;color:#000}#mystatusform{margin-left:35px;margin-top:5px}#mystatusedit{font-size:1.2em;color:#777;font-style:italic;padding:2px;height:14px;margin:0;border:1px solid #bbb;width:199px;background:0 0}#myusernameform .editactive,#myusernameform .editempty{color:#000}#myusernameform .editempty{color:#333}#myswatchbox,#myusernameedit,#otheruserstable .swatch{border:1px solid #ccc!important;color:#333}#nootherusers{padding:10px;font-size:1.2em;color:#eee}#nootherusers a{color:#3C88FF}#otheruserstable td{height:26px;padding:0 2px;color:#333}#otheruserstable .swatch{border:1px solid #000;width:13px;height:13px;overflow:hidden;margin:0 4px;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.usertdswatch{width:1%}.usertdname{font-size:1.3em;color:#444}.usertdstatus{font-size:1.1em;font-style:italic;color:#999}.usertdactivity{font-size:1.1em;color:#777}.usertdname input{border:1px solid #bbb;width:80px;padding:2px}#chatbox,#chaticon{border-right:1px solid #999;border-top:1px solid #999;border-left:1px solid #999}.usertdname input.editempty{color:#888;font-style:italic}#connectivity{z-index:600!important}#connectivity .visible,#connectivity .visible *{display:block}#reconnect_form button{font-size:12pt;padding:5px}.toolbar #overlay{z-index:500;display:none;background-repeat:repeat-both;width:100%;height:inherit;left:0;top:0}* html #overlay,.exporttype{background-repeat:no-repeat}* html #overlay{-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)\\\";filter:alpha(opacity=100);opacity:1;background-image:none}#chatbox{bottom:0;right:20px;width:180px;height:200px;z-index:400;background-color:#f7f7f7;padding:3px 3px 10px;display:none}#chaticon,#chattext{background-color:#fff}#chattext{border:1px solid #fff;-ms-overflow-y:scroll;overflow-y:scroll;font-size:12px;right:0;left:0;top:25px;bottom:25px;z-index:1002}#chattext p{padding:3px;-ms-overflow-x:hidden;overflow-x:hidden;word-wrap:break-word}.chatloadmessages{margin:5px auto;display:block}#chatloadmessagesbutton{line-height:1.8em}#chatloadmessagesball{display:none}#chatinputbox{padding:3px 2px;bottom:0;right:0;left:3px}#chatlabel{font-size:13px;color:#555;margin-right:3px}#chatinput{border:1px solid #BBB;width:100%;float:right}#chaticon{z-index:400;position:fixed;bottom:0;right:20px;padding:5px;cursor:pointer}.chatAndUsers,.chatAndUsersChat,.stickyChat{border-left:1px solid #ccc!important}#chatcounter{color:#777;font-size:10px}#titlebar{line-height:16px;color:#555;position:relative;bottom:2px}#titlelabel{font-size:13px;margin:4px 0 0 4px;position:absolute}#titlesticky{font-size:10px;padding-top:2px;float:right;cursor:pointer}#titlecross{font-size:25px;float:right;cursor:pointer}.time{float:right;color:#333;font-style:italic;font-size:10px;margin-left:3px;margin-right:3px;margin-top:2px}#exportColumn{margin-top:20px}.exporttype{margin-top:4px;color:#333;padding-bottom:2px;display:inline;padding-left:5px;font-family:Arial}.buttonicon,.exportlink{font-family:fontawesome-etherpad}.exportlink{display:block;margin:5px;color:#666}#chatthrob,#importmessageabiword,#importmessagesuccess,#importstatusball{display:none}#exporthtmla:before{content:\\\"\\\\e826\\\"}#exportplaina:before{content:\\\"\\\\e802\\\"}#exportworda:before{content:\\\"\\\\e804\\\"}#exportpdfa:before{content:\\\"\\\\e803\\\"}#exportetherpada:before{content:\\\"\\\\e806\\\"}#exportopena:before{content:\\\"\\\\e805\\\"}#importmessageabiword{color:#900;font-size:small}#importsubmitinput{margin-top:12px;padding:2px 4px}#chatthrob{position:absolute;bottom:40px;font-size:14px;width:150px;height:40px;right:20px;z-index:200;color:#fff;background-color:#000;background-color:rgba(0,0,0,.7);padding:10px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)\\\";filter:alpha(opacity=80);opacity:.8}.buttonicon{width:16px;height:16px;display:inline-block;border:none;padding:0;background:0 0;font-size:15px;font-style:normal;font-weight:400;color:#666;cursor:pointer}[class*=\\\" icon-\\\"]:before,[class^=icon-]:before,[data-icon]:before{font-weight:400!important;font-family:fontawesome-etherpad!important;line-height:1;font-style:normal!important}.buttonicon::-moz-focus-inner{padding:0;border:0}.buttonicon:focus{border:1px solid #666}.popup,.popup select{border:1px solid #ccc}.buttonicon-bold:before{content:\\\"\\\\e81c\\\"}.buttonicon-italic:before{content:\\\"\\\\e81d\\\"}.buttonicon-underline:before{content:\\\"\\\\e817\\\"}.buttonicon-strikethrough:before{content:\\\"\\\\e818\\\"}.buttonicon-insertorderedlist:before{content:\\\"\\\\e816\\\"}.buttonicon-insertunorderedlist:before{content:\\\"\\\\e815\\\"}.buttonicon-indent:before{content:\\\"\\\\e814\\\"}.buttonicon-outdent:before{content:\\\"\\\\e813\\\"}.buttonicon-undo:before{content:\\\"\\\\e823\\\"}.buttonicon-redo:before{content:\\\"\\\\e824\\\"}.buttonicon-clearauthorship:before{content:\\\"\\\\e80d\\\"}.buttonicon-settings:before{content:\\\"\\\\e833\\\"}.buttonicon-import_export:before{content:\\\"\\\\e834\\\"}.buttonicon-embed:before{content:\\\"\\\\e827\\\"}.buttonicon-history:before{content:\\\"\\\\e837\\\"}.buttonicon-chat:before{content:\\\"\\\\e829\\\"}.buttonicon-showusers:before{content:\\\"\\\\e808\\\"}.buttonicon-savedRevision:before{content:\\\"\\\\e835\\\"}#focusprotector{z-index:100;position:absolute;bottom:0;top:0;left:0;right:0;background-color:#fff;-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)\\\";filter:alpha(opacity=1);opacity:.01;display:none}.rtl{direction:RTL}input[type=checkbox]{vertical-align:-1px}.right{float:right}.popup{font-size:12px;width:80%;max-width:500px;padding:10px;border-radius:0 0 6px 6px;border-top:none;background:#f7f7f7;background:-webkit-linear-gradient(#F7F7F7,#EEE);background:-moz-linear-gradient(#F7F7F7,#EEE);background:-ms-linear-gradient(#F7F7F7,#EEE);background:-o-linear-gradient(#F7F7F7,#EEE);background:linear-gradient(#F7F7F7,#EEE);-webkit-box-shadow:0 0 8px #888;-moz-box-shadow:0 0 8px #888;box-shadow:0 2px 4px #ddd;color:#222}.popup input[type=text]{width:100%;padding:5px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:10px}#users input[type=text],.popup input[type=text]{outline:0}.popup button{padding:5px;font-size:14px}.popup h1{color:#555;font-size:18px}.popup h2{color:#777;font-size:15px}.popup p{margin:5px 0}.popup select{background:#fff;padding:2px;height:24px;border-radius:3px;outline:0;width:120px}.chatAndUsers,.chatAndUsersChat,.stickyChat{border:none!important}.chatAndUsers,.stickyChat{border-radius:0!important}.column{float:left;width:50%}#connectivity,#embed,#import_export,#settings,#users{position:absolute;top:38px;right:20px;display:none;z-index:500}.chatAndUsers,.chatAndUsersChat{width:182px!important;right:0!important}.stickyChat{background-color:#f1f1f1!important;right:0!important;top:37px;-webkit-border-radius:0!important;-moz-border-radius:0!important;height:auto!important;width:185px!important}.chatAndUsers{display:block!important;border-bottom:1px solid #ccc!important;height:155px!important}#noCookie,#passwordRequired,#permissionDenied,#wrongPassword,.chatAndUsersChat>div>#titlecross{display:none}.chatAndUsers>#otherusers{max-height:100px;overflow-y:auto}.chatAndUsersChat{bottom:0!important;margin:165px 0 0;padding:5px!important}@media screen and (max-width:600px){.toolbar ul li.separator{display:none}.toolbar ul li a{padding:4px 1px}.toolbar ul.menu_left{left:0;right:150px}}@media all and (max-width:400px){#gritter-notice-wrapper{max-height:172px;overflow:hidden;width:100%!important;background-color:#ccc;bottom:20px;left:0;right:0;color:#000}.gritter-close{display:block!important;left:auto!important;right:5px}#gritter-notice-wrapper.bottom-right{left:0!important;bottom:30px!important;right:0!important}.gritter-item p{color:#000;font-size:16px}.gritter-title{text-shadow:none!important;color:#000}.gritter-item{padding:2px 11px 8px 4px}.gritter-item-wrapper{margin:0}.gritter-item-wrapper>div{background:0 0}#editorcontainer{top:68px}#editbar{height:62px}.toolbar ul.menu_left{left:0;right:100px}.toolbar ul.menu_right{right:0}.popup{width:100%;max-width:300px;top:72px!important}}@media only screen and (min-device-width:320px)and (max-device-width:720px){#users{top:auto;right:0!important;bottom:33px;border-radius:0!important;height:55px!important;overflow:auto}#mycolorpicker{left:-73px;top:auto!important;bottom:33px!important}#editorcontainer{margin-bottom:33px}.toolbar ul.menu_left{right:0}.toolbar ul.menu_right{background:#f7f7f7;background:-webkit-linear-gradient(#f7f7f7,#f1f1f1 80%);background:-moz-linear-gradient(#f7f7f7,#f1f1f1 80%);background:-o-linear-gradient(#f7f7f7,#f1f1f1 80%);background:-ms-linear-gradient(#f7f7f7,#f1f1f1 80%);background:linear-gradient(#f7f7f7,#f1f1f1 80%);width:100%;right:0!important;overflow:hidden;height:32px;position:fixed;bottom:0;border-top:1px solid #ccc}.toolbar ul.menu_right>li:last-child{float:right}.toolbar ul.menu_right>li a{border-radius:0;border:none;background:0 0;margin:0;padding:8px}.toolbar ul li a.selected{background:0 0!important}li[data-key=showusers]>a{margin-top:-10px;padding-top:2px!important;line-height:20px;vertical-align:top!important}#chaticon{position:absolute;right:48px}.popup{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;box-sizing:border-box;width:100%}#connectivity,#embed,#import_export,#settings{top:auto;left:0;bottom:33px;right:0}.toolbar ul li .separator{display:none}#online_count{line-height:24px}#chatbox{position:absolute;bottom:33px!important;margin:65px 0 0}#gritter-notice-wrapper{bottom:43px!important;right:10px!important}}#gritter-notice-wrapper{position:fixed;top:20px;right:20px;width:301px;z-index:9999;background-color:#666}#gritter-notice-wrapper.bottom-right{top:auto;left:auto;bottom:20px;right:20px}.gritter-item-wrapper{position:relative;margin:0 0 10px}.gritter-top{height:10px}.hover .gritter-top{background-position:right -30px}.gritter-bottom{height:8px;margin:0}.hover .gritter-bottom{background-position:bottom right}.gritter-item{display:block;color:#eee;padding:2px 11px 8px;font-size:11px;font-family:verdana}.hover .gritter-item{background-position:right -40px}.gritter-item p{padding:0;margin:0}.gritter-close{display:none;position:absolute;top:5px;left:3px;cursor:pointer;width:30px;height:30px}.gritter-title{font-size:14px;font-weight:700;padding:0 0 7px;display:block;text-shadow:1px 1px 0 #000}.gritter-image{width:48px;height:48px;float:left}.gritter-with-image,.gritter-without-image{padding:0 0 5px}.gritter-with-image{width:220px;float:right}.gritter-close,.gritter-light .gritter-bottom,.gritter-light .gritter-item,.gritter-light .gritter-top{color:#222}.gritter-light .gritter-title{text-shadow:none}@font-face{font-family:opendyslexic;src:url(../../static/font/opendyslexic.otf)format(\\\"opentype\\\")}@font-face{font-family:fontawesome-etherpad;src:url(../font/fontawesome-etherpad.eot);src:url(../font/fontawesome-etherpad.eot?#iefix)format(\\\"embedded-opentype\\\"),url(../font/fontawesome-etherpad.woff)format(\\\"woff\\\"),url(../font/fontawesome-etherpad.ttf)format(\\\"truetype\\\"),url(../font/fontawesome-etherpad.svg#fontawesome-etherpad)format(\\\"svg\\\");font-weight:400;font-style:normal}[data-icon]:before{content:attr(data-icon);font-variant:normal!important;text-transform:none!important;speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}[class*=\\\" icon-\\\"]:before,[class^=icon-]:before{font-variant:normal!important;text-transform:none!important;speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.hideControlsEditor{top:0!important}.hideControlsEditbar{display:none!important}\";\nAce2Editor.EMBEDED[\"../static/css/pad.css\"] = \".toolbar ul,iframe{position:absolute}#myusernameform .editactive,#myusernameform .editempty,.usertdname input.editactive,.usertdname input.editempty{background:#fff;border-top:1px solid #c3c3c3;border-left:1px solid #c3c3c3;border-bottom:1px solid #e6e6e6;border-right:1px solid #e6e6e6}#chatcounter,#chatlabel,#otheruserstable td,.buttonicon{vertical-align:middle}#chaticon a,#chatlabel,#titlecross,#titlesticky,.exporttype,.popup a,.toolbar ul li a{text-decoration:none}#chatlabel,#nootherusers,#titlebar,.throbbold{font-weight:700}*,body,html,p{margin:0;padding:0}.clear{clear:both}html{font-size:62.5%;width:100%}body,textarea{font-family:Helvetica,Arial,sans-serif}.readonly .acl-write{display:none}#users{background:-webkit-linear-gradient(#F7F7F7,#EEE);background:-moz-linear-gradient(#F7F7F7,#EEE);background:-ms-linear-gradient(#F7F7F7,#EEE);background:-o-linear-gradient(#F7F7F7,#EEE);background:linear-gradient(#F7F7F7,#EEE);width:160px;color:#fff;padding:5px;border-radius:0 0 6px 6px;border:1px solid #ccc}#users,.toolbar{background:#f7f7f7}#otherusers{max-height:400px;overflow:auto}a img{border:0}.toolbar{background:-webkit-linear-gradient(#f7f7f7,#f1f1f1 80%);background:-moz-linear-gradient(#f7f7f7,#f1f1f1 80%);background:-o-linear-gradient(#f7f7f7,#f1f1f1 80%);background:-ms-linear-gradient(#f7f7f7,#f1f1f1 80%);background:linear-gradient(#f7f7f7,#f1f1f1 80%);border-bottom:1px solid #ccc;overflow:hidden;padding-top:4px;width:100%;white-space:nowrap;height:32px}.toolbar ul{list-style:none;padding-right:3px;padding-left:1px;z-index:2;overflow:hidden;float:left}.toolbar ul li{float:left;margin-left:2px;height:32px}.toolbar ul li.separator{border:inherit;background:inherit;visibility:hidden;width:0;padding:5px;height:22px}.toolbar ul li a:hover{text-decoration:none;background:#fff;background:-webkit-linear-gradient(#f4f4f4,#e4e4e4);background:-moz-linear-gradient(#f4f4f4,#e4e4e4);background:-o-linear-gradient(#f4f4f4,#e4e4e4);background:-ms-linear-gradient(#f4f4f4,#e4e4e4);background:linear-gradient(#f4f4f4,#e4e4e4)}.toolbar ul li .activeButton,.toolbar ul li a:active{background:#eee;background:-webkit-linear-gradient(#ddd,#fff);background:-moz-linear-gradient(#ddd,#fff);background:-o-linear-gradient(#ddd,#fff);background:-ms-linear-gradient(#ddd,#fff);background:linear-gradient(#ddd,#fff);-webkit-box-shadow:0 0 8px rgba(0,0,0,.1)inset;-moz-box-shadow:0 0 8px rgba(0,0,0,.1)inset;box-shadow:0 0 8px rgba(0,0,0,.1)inset}.toolbar ul li a{background:#fff;background:-webkit-linear-gradient(#fff,#f0f0f0);background:-moz-linear-gradient(#fff,#f0f0f0);background:-o-linear-gradient(#fff,#f0f0f0);background:-ms-linear-gradient(#fff,#f0f0f0);background:linear-gradient(#fff,#f0f0f0);border:1px solid #ccc;border-radius:3px;color:#ccc;cursor:pointer;display:inline-block;min-height:18px;overflow:hidden;padding:4px 5px;text-align:center;min-width:18px}#connectivity *,#editbar,#mystatusedit,table#otheruserstable{display:none}.toolbar ul li a .buttonicon{position:relative;top:1px}.toolbar ul li a .buttontext{font-size:14px;border:none;background:0 0;margin-top:1px;color:#666}.buttontext::-moz-focus-inner{padding:0;border:0}.buttontext:focus{border:1px solid #666!important}.toolbar ul li a.grouped-left{border-radius:3px 0 0 3px}.toolbar ul li a.grouped-middle{border-radius:0;margin-left:-2px;border-left:0}.toolbar ul li a.grouped-right{border-radius:0 3px 3px 0;margin-left:-2px;border-left:0}.toolbar ul li a.selected{background:#eee!important;background:-webkit-linear-gradient(#EEE,#F0F0F0)!important;background:-moz-linear-gradient(#EEE,#F0F0F0)!important;background:-o-linear-gradient(#EEE,#F0F0F0)!important;background:-ms-linear-gradient(#EEE,#F0F0F0)!important;background:linear-gradient(#EEE,#F0F0F0)!important}.toolbar ul li select{background:#fff;padding:4px;line-height:22px;height:28px;border-radius:3px;border:1px solid #ccc;outline:0}.toolbar ul.menu_left{left:0;right:250px}.toolbar ul.menu_right{right:0}li[data-key=showusers]>a{min-width:30px;text-align:left}li[data-key=showusers]>a #online_count{color:#777;font-size:11px;position:relative;top:2px;padding-left:2px}#chatbox,#chatinputbox,#chattext,#editorcontainer,#editorcontainerbox,#editorloadingbox,#mycolorpicker,#mycolorpickercancel,#mycolorpickerpreview,#mycolorpickersave,#padeditor,#padmain,#padpage,.toolbar #overlay{position:absolute}#editorcontainer{top:37px;left:0;right:0;bottom:0;z-index:1}#editorcontainer iframe{height:100%;width:100%;padding:0;margin:0;left:0}#editorloadingbox{padding-top:100px;padding-bottom:100px;font-size:2.5em;color:#aaa;text-align:center;width:100%;height:30px;z-index:100}#editorloadingbox .passForm,#editorloadingbox button,#editorloadingbox input{padding:10px}.loadingAnimation{-webkit-animation:loadingAnimation 2s infinite linear;animation:loadingAnimation 2s infinite linear;font-family:fontawesome-etherpad;font-size:24px;z-index:150;width:25px;height:25px}.loadingAnimation:before{content:\\\"\\\\e80e\\\"}@-webkit-keyframes loadingAnimation{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes loadingAnimation{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}#editorcontainerbox{bottom:0;top:0;width:100%}#padpage{top:0;bottom:0;width:100%}#padmain{margin-top:0;top:63px!important;left:0;right:0;bottom:0;zoom:1}#padeditor{bottom:0;left:0;right:0;top:0;zoom:1}#myswatchbox{position:absolute;left:5px;top:5px;width:24px;height:24px;background:0 0;cursor:pointer}#myswatch{width:100%;height:100%;background:0 0}#mycolorpicker{width:232px;height:265px;left:-250px;top:0;z-index:101;display:none;border-radius:0 0 6px 6px;background:#f7f7f7;border:1px solid #ccc;border-top:0;padding-left:10px;padding-top:10px}#mycolorpickersave{left:10px;font-weight:700}#mycolorpickercancel{left:85px}#mycolorpickercancel,#mycolorpickersave{background:#fff;background:-webkit-linear-gradient(#fff,#ccc);background:-moz-linear-gradient(#fff,#ccc);background:-o-linear-gradient(#fff,#ccc);background:-ms-linear-gradient(#fff,#ccc);background:linear-gradient(#fff,#ccc);border:1px solid #ccc;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-size:12px;cursor:pointer;color:#000;overflow:hidden;padding:4px;top:240px;text-align:center;width:60px}#titlecross,#titlesticky{color:#555;text-align:right}#chatbox,#chaticon{border-top-right-radius:5px;border-top-left-radius:5px}#mycolorpickerpreview{left:207px;top:240px;width:16px;height:16px;padding:4px;overflow:hidden;color:#fff;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px}#myusernameform{margin-left:30px}#myusernameedit{font-size:1.3em;padding:3px;height:18px;margin:0;width:122px;background:0 0}#myusernameform input.editable{border:1px solid #444}#myuser .myusernameedithoverable:hover{background:#fff;color:#000}#mystatusform{margin-left:35px;margin-top:5px}#mystatusedit{font-size:1.2em;color:#777;font-style:italic;padding:2px;height:14px;margin:0;border:1px solid #bbb;width:199px;background:0 0}#myusernameform .editactive,#myusernameform .editempty{color:#000}#myusernameform .editempty{color:#333}#myswatchbox,#myusernameedit,#otheruserstable .swatch{border:1px solid #ccc!important;color:#333}#nootherusers{padding:10px;font-size:1.2em;color:#eee}#nootherusers a{color:#3C88FF}#otheruserstable td{height:26px;padding:0 2px;color:#333}#otheruserstable .swatch{border:1px solid #000;width:13px;height:13px;overflow:hidden;margin:0 4px;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.usertdswatch{width:1%}.usertdname{font-size:1.3em;color:#444}.usertdstatus{font-size:1.1em;font-style:italic;color:#999}.usertdactivity{font-size:1.1em;color:#777}.usertdname input{border:1px solid #bbb;width:80px;padding:2px}#chatbox,#chaticon{border-right:1px solid #999;border-top:1px solid #999;border-left:1px solid #999}.usertdname input.editempty{color:#888;font-style:italic}#connectivity{z-index:600!important}#connectivity .visible,#connectivity .visible *{display:block}#reconnect_form button{font-size:12pt;padding:5px}.toolbar #overlay{z-index:500;display:none;background-repeat:repeat-both;width:100%;height:inherit;left:0;top:0}* html #overlay,.exporttype{background-repeat:no-repeat}* html #overlay{-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)\\\";filter:alpha(opacity=100);opacity:1;background-image:none}#chatbox{bottom:0;right:20px;width:180px;height:200px;z-index:400;background-color:#f7f7f7;padding:3px 3px 10px;display:none}#chaticon,#chattext{background-color:#fff}#chattext{border:1px solid #fff;-ms-overflow-y:scroll;overflow-y:scroll;font-size:12px;right:0;left:0;top:25px;bottom:25px;z-index:1002}#chattext p{padding:3px;-ms-overflow-x:hidden;overflow-x:hidden;word-wrap:break-word}.chatloadmessages{margin:5px auto;display:block}#chatloadmessagesbutton{line-height:1.8em}#chatloadmessagesball{display:none}#chatinputbox{padding:3px 2px;bottom:0;right:0;left:3px}#chatlabel{font-size:13px;color:#555;margin-right:3px}#chatinput{border:1px solid #BBB;width:100%;float:right}#chaticon{z-index:400;position:fixed;bottom:0;right:20px;padding:5px;cursor:pointer}.chatAndUsers,.chatAndUsersChat,.stickyChat{border-left:1px solid #ccc!important}#chatcounter{color:#777;font-size:10px}#titlebar{line-height:16px;color:#555;position:relative;bottom:2px}#titlelabel{font-size:13px;margin:4px 0 0 4px;position:absolute}#titlesticky{font-size:10px;padding-top:2px;float:right;cursor:pointer}#titlecross{font-size:25px;float:right;cursor:pointer}.time{float:right;color:#333;font-style:italic;font-size:10px;margin-left:3px;margin-right:3px;margin-top:2px}#exportColumn{margin-top:20px}.exporttype{margin-top:4px;color:#333;padding-bottom:2px;display:inline;padding-left:5px;font-family:Arial}.buttonicon,.exportlink{font-family:fontawesome-etherpad}.exportlink{display:block;margin:5px;color:#666}#chatthrob,#importmessageabiword,#importmessagesuccess,#importstatusball{display:none}#exporthtmla:before{content:\\\"\\\\e826\\\"}#exportplaina:before{content:\\\"\\\\e802\\\"}#exportworda:before{content:\\\"\\\\e804\\\"}#exportpdfa:before{content:\\\"\\\\e803\\\"}#exportetherpada:before{content:\\\"\\\\e806\\\"}#exportopena:before{content:\\\"\\\\e805\\\"}#importmessageabiword{color:#900;font-size:small}#importsubmitinput{margin-top:12px;padding:2px 4px}#chatthrob{position:absolute;bottom:40px;font-size:14px;width:150px;height:40px;right:20px;z-index:200;color:#fff;background-color:#000;background-color:rgba(0,0,0,.7);padding:10px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)\\\";filter:alpha(opacity=80);opacity:.8}.buttonicon{width:16px;height:16px;display:inline-block;border:none;padding:0;background:0 0;font-size:15px;font-style:normal;font-weight:400;color:#666;cursor:pointer}[class*=\\\" icon-\\\"]:before,[class^=icon-]:before,[data-icon]:before{font-weight:400!important;font-family:fontawesome-etherpad!important;line-height:1;font-style:normal!important}.buttonicon::-moz-focus-inner{padding:0;border:0}.buttonicon:focus{border:1px solid #666}.popup,.popup select{border:1px solid #ccc}.buttonicon-bold:before{content:\\\"\\\\e81c\\\"}.buttonicon-italic:before{content:\\\"\\\\e81d\\\"}.buttonicon-underline:before{content:\\\"\\\\e817\\\"}.buttonicon-strikethrough:before{content:\\\"\\\\e818\\\"}.buttonicon-insertorderedlist:before{content:\\\"\\\\e816\\\"}.buttonicon-insertunorderedlist:before{content:\\\"\\\\e815\\\"}.buttonicon-indent:before{content:\\\"\\\\e814\\\"}.buttonicon-outdent:before{content:\\\"\\\\e813\\\"}.buttonicon-undo:before{content:\\\"\\\\e823\\\"}.buttonicon-redo:before{content:\\\"\\\\e824\\\"}.buttonicon-clearauthorship:before{content:\\\"\\\\e80d\\\"}.buttonicon-settings:before{content:\\\"\\\\e833\\\"}.buttonicon-import_export:before{content:\\\"\\\\e834\\\"}.buttonicon-embed:before{content:\\\"\\\\e827\\\"}.buttonicon-history:before{content:\\\"\\\\e837\\\"}.buttonicon-chat:before{content:\\\"\\\\e829\\\"}.buttonicon-showusers:before{content:\\\"\\\\e808\\\"}.buttonicon-savedRevision:before{content:\\\"\\\\e835\\\"}#focusprotector{z-index:100;position:absolute;bottom:0;top:0;left:0;right:0;background-color:#fff;-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)\\\";filter:alpha(opacity=1);opacity:.01;display:none}.rtl{direction:RTL}input[type=checkbox]{vertical-align:-1px}.right{float:right}.popup{font-size:12px;width:80%;max-width:500px;padding:10px;border-radius:0 0 6px 6px;border-top:none;background:#f7f7f7;background:-webkit-linear-gradient(#F7F7F7,#EEE);background:-moz-linear-gradient(#F7F7F7,#EEE);background:-ms-linear-gradient(#F7F7F7,#EEE);background:-o-linear-gradient(#F7F7F7,#EEE);background:linear-gradient(#F7F7F7,#EEE);-webkit-box-shadow:0 0 8px #888;-moz-box-shadow:0 0 8px #888;box-shadow:0 2px 4px #ddd;color:#222}.popup input[type=text]{width:100%;padding:5px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:10px}#users input[type=text],.popup input[type=text]{outline:0}.popup button{padding:5px;font-size:14px}.popup h1{color:#555;font-size:18px}.popup h2{color:#777;font-size:15px}.popup p{margin:5px 0}.popup select{background:#fff;padding:2px;height:24px;border-radius:3px;outline:0;width:120px}.chatAndUsers,.chatAndUsersChat,.stickyChat{border:none!important}.chatAndUsers,.stickyChat{border-radius:0!important}.column{float:left;width:50%}#connectivity,#embed,#import_export,#settings,#users{position:absolute;top:38px;right:20px;display:none;z-index:500}.chatAndUsers,.chatAndUsersChat{width:182px!important;right:0!important}.stickyChat{background-color:#f1f1f1!important;right:0!important;top:37px;-webkit-border-radius:0!important;-moz-border-radius:0!important;height:auto!important;width:185px!important}.chatAndUsers{display:block!important;border-bottom:1px solid #ccc!important;height:155px!important}#noCookie,#passwordRequired,#permissionDenied,#wrongPassword,.chatAndUsersChat>div>#titlecross{display:none}.chatAndUsers>#otherusers{max-height:100px;overflow-y:auto}.chatAndUsersChat{bottom:0!important;margin:165px 0 0;padding:5px!important}@media screen and (max-width:600px){.toolbar ul li.separator{display:none}.toolbar ul li a{padding:4px 1px}.toolbar ul.menu_left{left:0;right:150px}}@media all and (max-width:400px){#gritter-notice-wrapper{max-height:172px;overflow:hidden;width:100%!important;background-color:#ccc;bottom:20px;left:0;right:0;color:#000}.gritter-close{display:block!important;left:auto!important;right:5px}#gritter-notice-wrapper.bottom-right{left:0!important;bottom:30px!important;right:0!important}.gritter-item p{color:#000;font-size:16px}.gritter-title{text-shadow:none!important;color:#000}.gritter-item{padding:2px 11px 8px 4px}.gritter-item-wrapper{margin:0}.gritter-item-wrapper>div{background:0 0}#editorcontainer{top:68px}#editbar{height:62px}.toolbar ul.menu_left{left:0;right:100px}.toolbar ul.menu_right{right:0}.popup{width:100%;max-width:300px;top:72px!important}}@media only screen and (min-device-width:320px)and (max-device-width:720px){#users{top:auto;right:0!important;bottom:33px;border-radius:0!important;height:55px!important;overflow:auto}#mycolorpicker{left:-73px;top:auto!important;bottom:33px!important}#editorcontainer{margin-bottom:33px}.toolbar ul.menu_left{right:0}.toolbar ul.menu_right{background:#f7f7f7;background:-webkit-linear-gradient(#f7f7f7,#f1f1f1 80%);background:-moz-linear-gradient(#f7f7f7,#f1f1f1 80%);background:-o-linear-gradient(#f7f7f7,#f1f1f1 80%);background:-ms-linear-gradient(#f7f7f7,#f1f1f1 80%);background:linear-gradient(#f7f7f7,#f1f1f1 80%);width:100%;right:0!important;overflow:hidden;height:32px;position:fixed;bottom:0;border-top:1px solid #ccc}.toolbar ul.menu_right>li:last-child{float:right}.toolbar ul.menu_right>li a{border-radius:0;border:none;background:0 0;margin:0;padding:8px}.toolbar ul li a.selected{background:0 0!important}li[data-key=showusers]>a{margin-top:-10px;padding-top:2px!important;line-height:20px;vertical-align:top!important}#chaticon{position:absolute;right:48px}.popup{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;box-sizing:border-box;width:100%}#connectivity,#embed,#import_export,#settings{top:auto;left:0;bottom:33px;right:0}.toolbar ul li .separator{display:none}#online_count{line-height:24px}#chatbox{position:absolute;bottom:33px!important;margin:65px 0 0}#gritter-notice-wrapper{bottom:43px!important;right:10px!important}}#gritter-notice-wrapper{position:fixed;top:20px;right:20px;width:301px;z-index:9999;background-color:#666}#gritter-notice-wrapper.bottom-right{top:auto;left:auto;bottom:20px;right:20px}.gritter-item-wrapper{position:relative;margin:0 0 10px}.gritter-top{height:10px}.hover .gritter-top{background-position:right -30px}.gritter-bottom{height:8px;margin:0}.hover .gritter-bottom{background-position:bottom right}.gritter-item{display:block;color:#eee;padding:2px 11px 8px;font-size:11px;font-family:verdana}.hover .gritter-item{background-position:right -40px}.gritter-item p{padding:0;margin:0}.gritter-close{display:none;position:absolute;top:5px;left:3px;cursor:pointer;width:30px;height:30px}.gritter-title{font-size:14px;font-weight:700;padding:0 0 7px;display:block;text-shadow:1px 1px 0 #000}.gritter-image{width:48px;height:48px;float:left}.gritter-with-image,.gritter-without-image{padding:0 0 5px}.gritter-with-image{width:220px;float:right}.gritter-close,.gritter-light .gritter-bottom,.gritter-light .gritter-item,.gritter-light .gritter-top{color:#222}.gritter-light .gritter-title{text-shadow:none}@font-face{font-family:opendyslexic;src:url(../../static/font/opendyslexic.otf)format(\\\"opentype\\\")}@font-face{font-family:fontawesome-etherpad;src:url(../font/fontawesome-etherpad.eot);src:url(../font/fontawesome-etherpad.eot?#iefix)format(\\\"embedded-opentype\\\"),url(../font/fontawesome-etherpad.woff)format(\\\"woff\\\"),url(../font/fontawesome-etherpad.ttf)format(\\\"truetype\\\"),url(../font/fontawesome-etherpad.svg#fontawesome-etherpad)format(\\\"svg\\\");font-weight:400;font-style:normal}[data-icon]:before{content:attr(data-icon);font-variant:normal!important;text-transform:none!important;speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}[class*=\\\" icon-\\\"]:before,[class^=icon-]:before{font-variant:normal!important;text-transform:none!important;speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.hideControlsEditor{top:0!important}.hideControlsEditbar{display:none!important}\";\nAce2Editor.EMBEDED[\"../static/custom/pad.css\"] = \"\";\nAce2Editor.EMBEDED[\"../static/custom/pad.css\"] = \"\";\n\n}\n, \"ep_etherpad-lite/static/js/collab_client.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code. \n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar chat = require('./chat').chat;\nvar hooks = require('./pluginfw/hooks');\n\n// Dependency fill on init. This exists for `pad.socket` only.\n// TODO: bind directly to the socket.\nvar pad = undefined;\nfunction getSocket() {\n  return pad && pad.socket;\n}\n\n/** Call this when the document is ready, and a new Ace2Editor() has been created and inited.\n    ACE's ready callback does not need to have fired yet.\n    \"serverVars\" are from calling doc.getCollabClientVars() on the server. */\nfunction getCollabClient(ace2editor, serverVars, initialUserInfo, options, _pad)\n{\n  var editor = ace2editor;\n  pad = _pad; // Inject pad to avoid a circular dependency.\n\n  var rev = serverVars.rev;\n  var padId = serverVars.padId;\n\n  var state = \"IDLE\";\n  var stateMessage;\n  var channelState = \"CONNECTING\";\n  var appLevelDisconnectReason = null;\n\n  var lastCommitTime = 0;\n  var initialStartConnectTime = 0;\n\n  var userId = initialUserInfo.userId;\n  //var socket;\n  var userSet = {}; // userId -> userInfo\n  userSet[userId] = initialUserInfo;\n\n  var caughtErrors = [];\n  var caughtErrorCatchers = [];\n  var caughtErrorTimes = [];\n  var debugMessages = [];\n  var msgQueue = [];\n\n  tellAceAboutHistoricalAuthors(serverVars.historicalAuthorData);\n  tellAceActiveAuthorInfo(initialUserInfo);\n\n  var callbacks = {\n    onUserJoin: function()\n    {},\n    onUserLeave: function()\n    {},\n    onUpdateUserInfo: function()\n    {},\n    onChannelStateChange: function()\n    {},\n    onClientMessage: function()\n    {},\n    onInternalAction: function()\n    {},\n    onConnectionTrouble: function()\n    {},\n    onServerMessage: function()\n    {}\n  };\n  if (browser.firefox)\n  {\n    // Prevent \"escape\" from taking effect and canceling a comet connection;\n    // doesn't work if focus is on an iframe.\n    $(window).bind(\"keydown\", function(evt)\n    {\n      if (evt.which == 27)\n      {\n        evt.preventDefault()\n      }\n    });\n  }\n\n  editor.setProperty(\"userAuthor\", userId);\n  editor.setBaseAttributedText(serverVars.initialAttributedText, serverVars.apool);\n  editor.setUserChangeNotificationCallback(wrapRecordingErrors(\"handleUserChanges\", handleUserChanges));\n\n  function dmesg(str)\n  {\n    if (typeof window.ajlog == \"string\") window.ajlog += str + '\\n';\n    debugMessages.push(str);\n  }\n\n  function handleUserChanges()\n  {\n    if (editor.getInInternationalComposition()) return;\n    if ((!getSocket()) || channelState == \"CONNECTING\")\n    {\n      if (channelState == \"CONNECTING\" && (((+new Date()) - initialStartConnectTime) > 20000))\n      {\n        setChannelState(\"DISCONNECTED\", \"initsocketfail\");\n      }\n      else\n      {\n        // check again in a bit\n        setTimeout(wrapRecordingErrors(\"setTimeout(handleUserChanges)\", handleUserChanges), 1000);\n      }\n      return;\n    }\n\n    var t = (+new Date());\n\n    if (state != \"IDLE\")\n    {\n      if (state == \"COMMITTING\" && msgQueue.length == 0 && (t - lastCommitTime) > 20000)\n      {\n        // a commit is taking too long\n        setChannelState(\"DISCONNECTED\", \"slowcommit\");\n      }\n      else if (state == \"COMMITTING\" && msgQueue.length == 0 && (t - lastCommitTime) > 5000)\n      {\n        callbacks.onConnectionTrouble(\"SLOW\");\n      }\n      else\n      {\n        // run again in a few seconds, to detect a disconnect\n        setTimeout(wrapRecordingErrors(\"setTimeout(handleUserChanges)\", handleUserChanges), 3000);\n      }\n      return;\n    }\n\n    var earliestCommit = lastCommitTime + 500;\n    if (t < earliestCommit)\n    {\n      setTimeout(wrapRecordingErrors(\"setTimeout(handleUserChanges)\", handleUserChanges), earliestCommit - t);\n      return;\n    }\n\n    // apply msgQueue changeset.\n    if (msgQueue.length != 0) {\n      var msg;\n      while (msg = msgQueue.shift()) {\n        var newRev = msg.newRev;\n        rev=newRev;\n        if (msg.type == \"ACCEPT_COMMIT\")\n        {\n          editor.applyPreparedChangesetToBase();\n          setStateIdle();\n          callCatchingErrors(\"onInternalAction\", function()\n          {\n            callbacks.onInternalAction(\"commitAcceptedByServer\");\n          });\n          callCatchingErrors(\"onConnectionTrouble\", function()\n          {\n            callbacks.onConnectionTrouble(\"OK\");\n          });\n          handleUserChanges();\n        }\n        else if (msg.type == \"NEW_CHANGES\")\n        {\n          var changeset = msg.changeset;\n          var author = (msg.author || '');\n          var apool = msg.apool;\n\n          editor.applyChangesToBase(changeset, author, apool);\n        }\n      }\n    }\n\n    var sentMessage = false;\n    var userChangesData = editor.prepareUserChangeset();\n    if (userChangesData.changeset)\n    {\n      lastCommitTime = t;\n      state = \"COMMITTING\";\n      stateMessage = {\n        type: \"USER_CHANGES\",\n        baseRev: rev,\n        changeset: userChangesData.changeset,\n        apool: userChangesData.apool\n      };\n      sendMessage(stateMessage);\n      sentMessage = true;\n      callbacks.onInternalAction(\"commitPerformed\");\n    }\n\n    if (sentMessage)\n    {\n      // run again in a few seconds, to detect a disconnect\n      setTimeout(wrapRecordingErrors(\"setTimeout(handleUserChanges)\", handleUserChanges), 3000);\n    }\n  }\n\n  function setUpSocket()\n  {\n    hiccupCount = 0;\n    setChannelState(\"CONNECTED\");\n    doDeferredActions();\n\n    initialStartConnectTime = +new Date();\n  }\n\n  var hiccupCount = 0;\n\n  function sendMessage(msg)\n  {\n    getSocket().json.send(\n    {\n      type: \"COLLABROOM\",\n      component: \"pad\",\n      data: msg\n    });\n  }\n\n  function wrapRecordingErrors(catcher, func)\n  {\n    return function()\n    {\n      try\n      {\n        return func.apply(this, Array.prototype.slice.call(arguments));\n      }\n      catch (e)\n      {\n        caughtErrors.push(e);\n        caughtErrorCatchers.push(catcher);\n        caughtErrorTimes.push(+new Date());\n        //console.dir({catcher: catcher, e: e});\n        throw e;\n      }\n    };\n  }\n\n  function callCatchingErrors(catcher, func)\n  {\n    try\n    {\n      wrapRecordingErrors(catcher, func)();\n    }\n    catch (e)\n    { /*absorb*/\n    }\n  }\n\n  function handleMessageFromServer(evt)\n  {\n    if (window.console) console.log(evt);\n\n    if (!getSocket()) return;\n    if (!evt.data) return;\n    var wrapper = evt;\n    if (wrapper.type != \"COLLABROOM\" && wrapper.type != \"CUSTOM\") return;\n    var msg = wrapper.data;\n\n    if (msg.type == \"NEW_CHANGES\")\n    {\n      var newRev = msg.newRev;\n      var changeset = msg.changeset;\n      var author = (msg.author || '');\n      var apool = msg.apool;\n\n      // When inInternationalComposition, msg pushed msgQueue.\n      if (msgQueue.length > 0 || editor.getInInternationalComposition()) {\n        if (msgQueue.length > 0) var oldRev = msgQueue[msgQueue.length - 1].newRev;\n        else oldRev = rev;\n\n        if (newRev != (oldRev + 1))\n        {\n          window.console.warn(\"bad message revision on NEW_CHANGES: \" + newRev + \" not \" + (oldRev + 1));\n          // setChannelState(\"DISCONNECTED\", \"badmessage_newchanges\");\n          return;\n        }\n        msgQueue.push(msg);\n        return;\n      }\n\n      if (newRev != (rev + 1))\n      {\n        window.console.warn(\"bad message revision on NEW_CHANGES: \" + newRev + \" not \" + (rev + 1));\n        // setChannelState(\"DISCONNECTED\", \"badmessage_newchanges\");\n        return;\n      }\n      rev = newRev;\n      editor.applyChangesToBase(changeset, author, apool);\n    }\n    else if (msg.type == \"ACCEPT_COMMIT\")\n    {\n      var newRev = msg.newRev;\n      if (msgQueue.length > 0)\n      {\n        if (newRev != (msgQueue[msgQueue.length - 1].newRev + 1))\n        {\n          window.console.warn(\"bad message revision on ACCEPT_COMMIT: \" + newRev + \" not \" + (msgQueue[msgQueue.length - 1][0] + 1));\n          // setChannelState(\"DISCONNECTED\", \"badmessage_acceptcommit\");\n          return;\n        }\n        msgQueue.push(msg);\n        return;\n      }\n\n      if (newRev != (rev + 1))\n      {\n        window.console.warn(\"bad message revision on ACCEPT_COMMIT: \" + newRev + \" not \" + (rev + 1));\n        // setChannelState(\"DISCONNECTED\", \"badmessage_acceptcommit\");\n        return;\n      }\n      rev = newRev;\n      editor.applyPreparedChangesetToBase();\n      setStateIdle();\n      callCatchingErrors(\"onInternalAction\", function()\n      {\n        callbacks.onInternalAction(\"commitAcceptedByServer\");\n      });\n      callCatchingErrors(\"onConnectionTrouble\", function()\n      {\n        callbacks.onConnectionTrouble(\"OK\");\n      });\n      handleUserChanges();\n    }\n    else if (msg.type == \"NO_COMMIT_PENDING\")\n    {\n      if (state == \"COMMITTING\")\n      {\n        // server missed our commit message; abort that commit\n        setStateIdle();\n        handleUserChanges();\n      }\n    }\n    else if (msg.type == \"USER_NEWINFO\")\n    {\n      var userInfo = msg.userInfo;\n      var id = userInfo.userId;\n\n      // Avoid a race condition when setting colors.  If our color was set by a\n      // query param, ignore our own \"new user\" message's color value.\n      if (id === initialUserInfo.userId && initialUserInfo.globalUserColor)\n      {\n        msg.userInfo.colorId = initialUserInfo.globalUserColor;\n      }\n\n      \n      if (userSet[id])\n      {\n        userSet[id] = userInfo;\n        callbacks.onUpdateUserInfo(userInfo);\n      }\n      else\n      {\n        userSet[id] = userInfo;\n        callbacks.onUserJoin(userInfo);\n      }\n      tellAceActiveAuthorInfo(userInfo);\n    }\n    else if (msg.type == \"USER_LEAVE\")\n    {\n      var userInfo = msg.userInfo;\n      var id = userInfo.userId;\n      if (userSet[id])\n      {\n        delete userSet[userInfo.userId];\n        fadeAceAuthorInfo(userInfo);\n        callbacks.onUserLeave(userInfo);\n      }\n    }\n\n    else if (msg.type == \"DISCONNECT_REASON\")\n    {\n      appLevelDisconnectReason = msg.reason;\n    }\n    else if (msg.type == \"CLIENT_MESSAGE\")\n    {\n      callbacks.onClientMessage(msg.payload);\n    }\n    else if (msg.type == \"CHAT_MESSAGE\")\n    {\n      chat.addMessage(msg, true, false);\n    }\n    else if (msg.type == \"CHAT_MESSAGES\")\n    {\n      for(var i = msg.messages.length - 1; i >= 0; i--)\n      {\n        chat.addMessage(msg.messages[i], true, true);\n      }\n      if(!chat.gotInitalMessages)\n      {\n        chat.scrollDown();\n        chat.gotInitalMessages = true;\n        chat.historyPointer = clientVars.chatHead - msg.messages.length;\n      }\n\n      // messages are loaded, so hide the loading-ball\n      $(\"#chatloadmessagesball\").css(\"display\", \"none\");\n\n      // there are less than 100 messages or we reached the top\n      if(chat.historyPointer <= 0) \n        $(\"#chatloadmessagesbutton\").css(\"display\", \"none\");\n      else // there are still more messages, re-show the load-button\n        $(\"#chatloadmessagesbutton\").css(\"display\", \"block\");\n    }\n    else if (msg.type == \"SERVER_MESSAGE\")\n    {\n      callbacks.onServerMessage(msg.payload);\n    }\n    hooks.callAll('handleClientMessage_' + msg.type, {payload: msg.payload});\n  }\n\n  function updateUserInfo(userInfo)\n  {\n    userInfo.userId = userId;\n    userSet[userId] = userInfo;\n    tellAceActiveAuthorInfo(userInfo);\n    if (!getSocket()) return;\n    sendMessage(\n    {\n      type: \"USERINFO_UPDATE\",\n      userInfo: userInfo\n    });\n  }\n\n  function tellAceActiveAuthorInfo(userInfo)\n  {\n    tellAceAuthorInfo(userInfo.userId, userInfo.colorId);\n  }\n\n  function tellAceAuthorInfo(userId, colorId, inactive)\n  {\n    if(typeof colorId == \"number\")\n    {\n      colorId = clientVars.colorPalette[colorId];\n    }\n    \n    var cssColor = colorId;\n    if (inactive)\n    {\n      editor.setAuthorInfo(userId, {\n        bgcolor: cssColor,\n        fade: 0.5\n      });\n    }\n    else\n    {\n      editor.setAuthorInfo(userId, {\n        bgcolor: cssColor\n      });\n    }\n  }\n\n  function fadeAceAuthorInfo(userInfo)\n  {\n    tellAceAuthorInfo(userInfo.userId, userInfo.colorId, true);\n  }\n\n  function getConnectedUsers()\n  {\n    return valuesArray(userSet);\n  }\n\n  function tellAceAboutHistoricalAuthors(hadata)\n  {\n    for (var author in hadata)\n    {\n      var data = hadata[author];\n      if (!userSet[author])\n      {\n        tellAceAuthorInfo(author, data.colorId, true);\n      }\n    }\n  }\n\n  function setChannelState(newChannelState, moreInfo)\n  {\n    if (newChannelState != channelState)\n    {\n      channelState = newChannelState;\n      callbacks.onChannelStateChange(channelState, moreInfo);\n    }\n  }\n\n  function valuesArray(obj)\n  {\n    var array = [];\n    $.each(obj, function(k, v)\n    {\n      array.push(v);\n    });\n    return array;\n  }\n\n  // We need to present a working interface even before the socket\n  // is connected for the first time.\n  var deferredActions = [];\n\n  function defer(func, tag)\n  {\n    return function()\n    {\n      var that = this;\n      var args = arguments;\n\n      function action()\n      {\n        func.apply(that, args);\n      }\n      action.tag = tag;\n      if (channelState == \"CONNECTING\")\n      {\n        deferredActions.push(action);\n      }\n      else\n      {\n        action();\n      }\n    }\n  }\n\n  function doDeferredActions(tag)\n  {\n    var newArray = [];\n    for (var i = 0; i < deferredActions.length; i++)\n    {\n      var a = deferredActions[i];\n      if ((!tag) || (tag == a.tag))\n      {\n        a();\n      }\n      else\n      {\n        newArray.push(a);\n      }\n    }\n    deferredActions = newArray;\n  }\n\n  function sendClientMessage(msg)\n  {\n    sendMessage(\n    {\n      type: \"CLIENT_MESSAGE\",\n      payload: msg\n    });\n  }\n\n  function getCurrentRevisionNumber()\n  {\n    return rev;\n  }\n\n  function getMissedChanges()\n  {\n    var obj = {};\n    obj.userInfo = userSet[userId];\n    obj.baseRev = rev;\n    if (state == \"COMMITTING\" && stateMessage)\n    {\n      obj.committedChangeset = stateMessage.changeset;\n      obj.committedChangesetAPool = stateMessage.apool;\n      editor.applyPreparedChangesetToBase();\n    }\n    var userChangesData = editor.prepareUserChangeset();\n    if (userChangesData.changeset)\n    {\n      obj.furtherChangeset = userChangesData.changeset;\n      obj.furtherChangesetAPool = userChangesData.apool;\n    }\n    return obj;\n  }\n\n  function setStateIdle()\n  {\n    state = \"IDLE\";\n    callbacks.onInternalAction(\"newlyIdle\");\n    schedulePerhapsCallIdleFuncs();\n  }\n\n  function callWhenNotCommitting(func)\n  {\n    idleFuncs.push(func);\n    schedulePerhapsCallIdleFuncs();\n  }\n\n  var idleFuncs = [];\n\n  function schedulePerhapsCallIdleFuncs()\n  {\n    setTimeout(function()\n    {\n      if (state == \"IDLE\")\n      {\n        while (idleFuncs.length > 0)\n        {\n          var f = idleFuncs.shift();\n          f();\n        }\n      }\n    }, 0);\n  }\n\n  var self = {\n    setOnUserJoin: function(cb)\n    {\n      callbacks.onUserJoin = cb;\n    },\n    setOnUserLeave: function(cb)\n    {\n      callbacks.onUserLeave = cb;\n    },\n    setOnUpdateUserInfo: function(cb)\n    {\n      callbacks.onUpdateUserInfo = cb;\n    },\n    setOnChannelStateChange: function(cb)\n    {\n      callbacks.onChannelStateChange = cb;\n    },\n    setOnClientMessage: function(cb)\n    {\n      callbacks.onClientMessage = cb;\n    },\n    setOnInternalAction: function(cb)\n    {\n      callbacks.onInternalAction = cb;\n    },\n    setOnConnectionTrouble: function(cb)\n    {\n      callbacks.onConnectionTrouble = cb;\n    },\n    setOnServerMessage: function(cb)\n    {\n      callbacks.onServerMessage = cb;\n    },\n    updateUserInfo: defer(updateUserInfo),\n    handleMessageFromServer: handleMessageFromServer,\n    getConnectedUsers: getConnectedUsers,\n    sendClientMessage: sendClientMessage,\n    sendMessage: sendMessage,\n    getCurrentRevisionNumber: getCurrentRevisionNumber,\n    getMissedChanges: getMissedChanges,\n    callWhenNotCommitting: callWhenNotCommitting,\n    addHistoricalAuthors: tellAceAboutHistoricalAuthors,\n    setChannelState: setChannelState\n  };\n\n  $(document).ready(setUpSocket);\n  return self;\n}\n\nexports.getCollabClient = getCollabClient;\n\n}\n, \"ep_etherpad-lite/static/js/pad_userlist.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code.\n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar padutils = require('./pad_utils').padutils;\nvar hooks = require('./pluginfw/hooks');\n\nvar myUserInfo = {};\n\nvar colorPickerOpen = false;\nvar colorPickerSetup = false;\nvar previousColorId = 0;\n\n\nvar paduserlist = (function()\n{\n\n  var rowManager = (function()\n  {\n    // The row manager handles rendering rows of the user list and animating\n    // their insertion, removal, and reordering.  It manipulates TD height\n    // and TD opacity.\n\n    function nextRowId()\n    {\n      return \"usertr\" + (nextRowId.counter++);\n    }\n    nextRowId.counter = 1;\n    // objects are shared; fields are \"domId\",\"data\",\"animationStep\"\n    var rowsFadingOut = []; // unordered set\n    var rowsFadingIn = []; // unordered set\n    var rowsPresent = []; // in order\n    var ANIMATION_START = -12; // just starting to fade in\n    var ANIMATION_END = 12; // just finishing fading out\n\n\n    function getAnimationHeight(step, power)\n    {\n      var a = Math.abs(step / 12);\n      if (power == 2) a = a * a;\n      else if (power == 3) a = a * a * a;\n      else if (power == 4) a = a * a * a * a;\n      else if (power >= 5) a = a * a * a * a * a;\n      return Math.round(26 * (1 - a));\n    }\n    var OPACITY_STEPS = 6;\n\n    var ANIMATION_STEP_TIME = 20;\n    var LOWER_FRAMERATE_FACTOR = 2;\n    var scheduleAnimation = padutils.makeAnimationScheduler(animateStep, ANIMATION_STEP_TIME, LOWER_FRAMERATE_FACTOR).scheduleAnimation;\n\n    var NUMCOLS = 4;\n\n    // we do lots of manipulation of table rows and stuff that JQuery makes ok, despite\n    // IE's poor handling when manipulating the DOM directly.\n\n    function getEmptyRowHtml(height)\n    {\n      return '<td colspan=\"' + NUMCOLS + '\" style=\"border:0;height:' + height + 'px\"><!-- --></td>';\n    }\n\n    function isNameEditable(data)\n    {\n      return (!data.name) && (data.status != 'Disconnected');\n    }\n\n    function replaceUserRowContents(tr, height, data)\n    {\n      var tds = getUserRowHtml(height, data).match(/<td.*?<\\/td>/gi);\n      if (isNameEditable(data) && tr.find(\"td.usertdname input:enabled\").length > 0)\n      {\n        // preserve input field node\n        for (var i = 0; i < tds.length; i++)\n        {\n          var oldTd = $(tr.find(\"td\").get(i));\n          if (!oldTd.hasClass('usertdname'))\n          {\n            oldTd.replaceWith(tds[i]);\n          }\n        }\n      }\n      else\n      {\n        tr.html(tds.join(''));\n      }\n      return tr;\n    }\n\n    function getUserRowHtml(height, data)\n    {\n      var nameHtml;\n      if (data.name)\n      {\n        nameHtml = padutils.escapeHtml(data.name);\n      }\n      else\n      {\n        nameHtml = '<input data-l10n-id=\"pad.userlist.unnamed\" type=\"text\" class=\"editempty newinput\" value=\"'+_('pad.userlist.unnamed')+'\" ' + (isNameEditable(data) ? '' : 'disabled=\"disabled\" ') + '/>';\n      }\n\n      return ['<td style=\"height:', height, 'px\" class=\"usertdswatch\"><div class=\"swatch\" style=\"background:' + padutils.escapeHtml(data.color) + '\">&nbsp;</div></td>', '<td style=\"height:', height, 'px\" class=\"usertdname\">', nameHtml, '</td>', '<td style=\"height:', height, 'px\" class=\"activity\">', padutils.escapeHtml(data.activity), '</td>'].join('');\n    }\n\n    function getRowHtml(id, innerHtml, authorId)\n    {\n      return '<tr data-authorId=\"'+authorId+'\" id=\"' + id + '\">' + innerHtml + '</tr>';\n    }\n\n    function rowNode(row)\n    {\n      return $(\"#\" + row.domId);\n    }\n\n    function handleRowData(row)\n    {\n      if (row.data && row.data.status == 'Disconnected')\n      {\n        row.opacity = 0.5;\n      }\n      else\n      {\n        delete row.opacity;\n      }\n    }\n\n    function handleRowNode(tr, data)\n    {\n      if (data.titleText)\n      {\n        var titleText = data.titleText;\n        window.setTimeout(function()\n        {\n          /* tr.attr('title', titleText)*/\n        }, 0);\n      }\n      else\n      {\n        tr.removeAttr('title');\n      }\n    }\n\n    function handleOtherUserInputs()\n    {\n      // handle 'INPUT' elements for naming other unnamed users\n      $(\"#otheruserstable input.newinput\").each(function()\n      {\n        var input = $(this);\n        var tr = input.closest(\"tr\");\n        if (tr.length > 0)\n        {\n          var index = tr.parent().children().index(tr);\n          if (index >= 0)\n          {\n            var userId = rowsPresent[index].data.id;\n            rowManagerMakeNameEditor($(this), userId);\n          }\n        }\n      }).removeClass('newinput');\n    }\n\n    // animationPower is 0 to skip animation, 1 for linear, 2 for quadratic, etc.\n\n\n    function insertRow(position, data, animationPower)\n    {\n      position = Math.max(0, Math.min(rowsPresent.length, position));\n      animationPower = (animationPower === undefined ? 4 : animationPower);\n\n      var domId = nextRowId();\n      var row = {\n        data: data,\n        animationStep: ANIMATION_START,\n        domId: domId,\n        animationPower: animationPower\n      };\n      var authorId = data.id;\n\n      handleRowData(row);\n      rowsPresent.splice(position, 0, row);\n      var tr;\n      if (animationPower == 0)\n      {\n        tr = $(getRowHtml(domId, getUserRowHtml(getAnimationHeight(0), data), authorId));\n        row.animationStep = 0;\n      }\n      else\n      {\n        rowsFadingIn.push(row);\n        tr = $(getRowHtml(domId, getEmptyRowHtml(getAnimationHeight(ANIMATION_START)), authorId));\n      }\n      handleRowNode(tr, data);\n      if (position == 0)\n      {\n        $(\"table#otheruserstable\").prepend(tr);\n      }\n      else\n      {\n        rowNode(rowsPresent[position - 1]).after(tr);\n      }\n\n      if (animationPower != 0)\n      {\n        scheduleAnimation();\n      }\n\n      handleOtherUserInputs();\n\n      return row;\n    }\n\n    function updateRow(position, data)\n    {\n      var row = rowsPresent[position];\n      if (row)\n      {\n        row.data = data;\n        handleRowData(row);\n        if (row.animationStep == 0)\n        {\n          // not currently animating\n          var tr = rowNode(row);\n          replaceUserRowContents(tr, getAnimationHeight(0), row.data).find(\"td\").css('opacity', (row.opacity === undefined ? 1 : row.opacity));\n          handleRowNode(tr, data);\n          handleOtherUserInputs();\n        }\n      }\n    }\n\n    function removeRow(position, animationPower)\n    {\n      animationPower = (animationPower === undefined ? 4 : animationPower);\n      var row = rowsPresent[position];\n      if (row)\n      {\n        rowsPresent.splice(position, 1); // remove\n        if (animationPower == 0)\n        {\n          rowNode(row).remove();\n        }\n        else\n        {\n          row.animationStep = -row.animationStep; // use symmetry\n          row.animationPower = animationPower;\n          rowsFadingOut.push(row);\n          scheduleAnimation();\n        }\n      }\n    }\n\n    // newPosition is position after the row has been removed\n\n\n    function moveRow(oldPosition, newPosition, animationPower)\n    {\n      animationPower = (animationPower === undefined ? 1 : animationPower); // linear is best\n      var row = rowsPresent[oldPosition];\n      if (row && oldPosition != newPosition)\n      {\n        var rowData = row.data;\n        removeRow(oldPosition, animationPower);\n        insertRow(newPosition, rowData, animationPower);\n      }\n    }\n\n    function animateStep()\n    {\n      // animation must be symmetrical\n      for (var i = rowsFadingIn.length - 1; i >= 0; i--)\n      { // backwards to allow removal\n        var row = rowsFadingIn[i];\n        var step = ++row.animationStep;\n        var animHeight = getAnimationHeight(step, row.animationPower);\n        var node = rowNode(row);\n        var baseOpacity = (row.opacity === undefined ? 1 : row.opacity);\n        if (step <= -OPACITY_STEPS)\n        {\n          node.find(\"td\").height(animHeight);\n        }\n        else if (step == -OPACITY_STEPS + 1)\n        {\n          node.html(getUserRowHtml(animHeight, row.data)).find(\"td\").css('opacity', baseOpacity * 1 / OPACITY_STEPS);\n          handleRowNode(node, row.data);\n        }\n        else if (step < 0)\n        {\n          node.find(\"td\").css('opacity', baseOpacity * (OPACITY_STEPS - (-step)) / OPACITY_STEPS).height(animHeight);\n        }\n        else if (step == 0)\n        {\n          // set HTML in case modified during animation\n          node.html(getUserRowHtml(animHeight, row.data)).find(\"td\").css('opacity', baseOpacity * 1).height(animHeight);\n          handleRowNode(node, row.data);\n          rowsFadingIn.splice(i, 1); // remove from set\n        }\n      }\n      for (var i = rowsFadingOut.length - 1; i >= 0; i--)\n      { // backwards to allow removal\n        var row = rowsFadingOut[i];\n        var step = ++row.animationStep;\n        var node = rowNode(row);\n        var animHeight = getAnimationHeight(step, row.animationPower);\n        var baseOpacity = (row.opacity === undefined ? 1 : row.opacity);\n        if (step < OPACITY_STEPS)\n        {\n          node.find(\"td\").css('opacity', baseOpacity * (OPACITY_STEPS - step) / OPACITY_STEPS).height(animHeight);\n        }\n        else if (step == OPACITY_STEPS)\n        {\n          node.html(getEmptyRowHtml(animHeight));\n        }\n        else if (step <= ANIMATION_END)\n        {\n          node.find(\"td\").height(animHeight);\n        }\n        else\n        {\n          rowsFadingOut.splice(i, 1); // remove from set\n          node.remove();\n        }\n      }\n\n      handleOtherUserInputs();\n\n      return (rowsFadingIn.length > 0) || (rowsFadingOut.length > 0); // is more to do\n    }\n\n    var self = {\n      insertRow: insertRow,\n      removeRow: removeRow,\n      moveRow: moveRow,\n      updateRow: updateRow\n    };\n    return self;\n  }()); ////////// rowManager\n  var otherUsersInfo = [];\n  var otherUsersData = [];\n\n  function rowManagerMakeNameEditor(jnode, userId)\n  {\n    setUpEditable(jnode, function()\n    {\n      var existingIndex = findExistingIndex(userId);\n      if (existingIndex >= 0)\n      {\n        return otherUsersInfo[existingIndex].name || '';\n      }\n      else\n      {\n        return '';\n      }\n    }, function(newName)\n    {\n      if (!newName)\n      {\n        jnode.addClass(\"editempty\");\n        jnode.val(_('pad.userlist.unnamed'));\n      }\n      else\n      {\n        jnode.attr('disabled', 'disabled');\n        pad.suggestUserName(userId, newName);\n      }\n    });\n  }\n\n  function findExistingIndex(userId)\n  {\n    var existingIndex = -1;\n    for (var i = 0; i < otherUsersInfo.length; i++)\n    {\n      if (otherUsersInfo[i].userId == userId)\n      {\n        existingIndex = i;\n        break;\n      }\n    }\n    return existingIndex;\n  }\n\n  function setUpEditable(jqueryNode, valueGetter, valueSetter)\n  {\n    jqueryNode.bind('focus', function(evt)\n    {\n      var oldValue = valueGetter();\n      if (jqueryNode.val() !== oldValue)\n      {\n        jqueryNode.val(oldValue);\n      }\n      jqueryNode.addClass(\"editactive\").removeClass(\"editempty\");\n    });\n    jqueryNode.bind('blur', function(evt)\n    {\n      var newValue = jqueryNode.removeClass(\"editactive\").val();\n      valueSetter(newValue);\n    });\n    padutils.bindEnterAndEscape(jqueryNode, function onEnter()\n    {\n      jqueryNode.blur();\n    }, function onEscape()\n    {\n      jqueryNode.val(valueGetter()).blur();\n    });\n    jqueryNode.removeAttr('disabled').addClass('editable');\n  }\n\n  function updateInviteNotice()\n  {\n    if (otherUsersInfo.length == 0)\n    {\n      $(\"#otheruserstable\").hide();\n      $(\"#nootherusers\").show();\n    }\n    else\n    {\n      $(\"#nootherusers\").hide();\n      $(\"#otheruserstable\").show();\n    }\n  }\n\n  var knocksToIgnore = {};\n  var guestPromptFlashState = 0;\n  var guestPromptFlash = padutils.makeAnimationScheduler(\n\n  function()\n  {\n    var prompts = $(\"#guestprompts .guestprompt\");\n    if (prompts.length == 0)\n    {\n      return false; // no more to do\n    }\n\n    guestPromptFlashState = 1 - guestPromptFlashState;\n    if (guestPromptFlashState)\n    {\n      prompts.css('background', '#ffa');\n    }\n    else\n    {\n      prompts.css('background', '#ffe');\n    }\n\n    return true;\n  }, 1000);\n\n  var pad = undefined;\n  var self = {\n    init: function(myInitialUserInfo, _pad)\n    {\n      pad = _pad;\n\n      self.setMyUserInfo(myInitialUserInfo);\n\n      if($('#online_count').length === 0) $('#editbar [data-key=showusers] > a').append('<span id=\"online_count\">1</span>');\n\n      $(\"#otheruserstable tr\").remove();\n\n      if (pad.getUserIsGuest())\n      {\n        $(\"#myusernameedit\").addClass('myusernameedithoverable');\n        setUpEditable($(\"#myusernameedit\"), function()\n        {\n          return myUserInfo.name || '';\n        }, function(newValue)\n        {\n          myUserInfo.name = newValue;\n          pad.notifyChangeName(newValue);\n          // wrap with setTimeout to do later because we get\n          // a double \"blur\" fire in IE...\n          window.setTimeout(function()\n          {\n            self.renderMyUserInfo();\n          }, 0);\n        });\n      }\n\n      // color picker\n      $(\"#myswatchbox\").click(showColorPicker);\n      $(\"#mycolorpicker .pickerswatchouter\").click(function()\n      {\n        $(\"#mycolorpicker .pickerswatchouter\").removeClass('picked');\n        $(this).addClass('picked');\n      });\n      $(\"#mycolorpickersave\").click(function()\n      {\n        closeColorPicker(true);\n      });\n      $(\"#mycolorpickercancel\").click(function()\n      {\n        closeColorPicker(false);\n      });\n      //\n    },\n    users: function(){\n      // Returns an object of users who have been on this pad\n      // Firstly we have to get live data..\n      var userList = otherUsersInfo;\n      // Now we need to add ourselves..\n      userList.push(myUserInfo);\n      // Now we add historical authors\n      var historical = clientVars.collab_client_vars.historicalAuthorData;\n      for (var key in historical){\n        var userId = historical[key].userId;\n        // Check we don't already have this author in our array\n        var exists = false;\n\n        userList.forEach(function(user){\n          if(user.userId === userId) exists = true;\n        });\n\n        if(exists === false){\n          userList.push(historical[key]);\n        }\n\n      }\n      return userList;\n    },\n    setMyUserInfo: function(info)\n    {\n      //translate the colorId\n      if(typeof info.colorId == \"number\")\n      {\n        info.colorId = clientVars.colorPalette[info.colorId];\n      }\n\n      myUserInfo = $.extend(\n      {}, info);\n\n      self.renderMyUserInfo();\n    },\n    userJoinOrUpdate: function(info)\n    {\n      if ((!info.userId) || (info.userId == myUserInfo.userId))\n      {\n        // not sure how this would happen\n        return;\n      }\n\n      hooks.callAll('userJoinOrUpdate', {\n        userInfo: info\n      });\n\n      var userData = {};\n      userData.color = typeof info.colorId == \"number\" ? clientVars.colorPalette[info.colorId] : info.colorId;\n      userData.name = info.name;\n      userData.status = '';\n      userData.activity = '';\n      userData.id = info.userId;\n      // Firefox ignores \\n in title text; Safari does a linebreak\n      userData.titleText = [info.userAgent || '', info.ip || ''].join(' \\n');\n\n      var existingIndex = findExistingIndex(info.userId);\n\n      var numUsersBesides = otherUsersInfo.length;\n      if (existingIndex >= 0)\n      {\n        numUsersBesides--;\n      }\n      var newIndex = padutils.binarySearch(numUsersBesides, function(n)\n      {\n        if (existingIndex >= 0 && n >= existingIndex)\n        {\n          // pretend existingIndex isn't there\n          n++;\n        }\n        var infoN = otherUsersInfo[n];\n        var nameN = (infoN.name || '').toLowerCase();\n        var nameThis = (info.name || '').toLowerCase();\n        var idN = infoN.userId;\n        var idThis = info.userId;\n        return (nameN > nameThis) || (nameN == nameThis && idN > idThis);\n      });\n\n      if (existingIndex >= 0)\n      {\n        // update\n        if (existingIndex == newIndex)\n        {\n          otherUsersInfo[existingIndex] = info;\n          otherUsersData[existingIndex] = userData;\n          rowManager.updateRow(existingIndex, userData);\n        }\n        else\n        {\n          otherUsersInfo.splice(existingIndex, 1);\n          otherUsersData.splice(existingIndex, 1);\n          otherUsersInfo.splice(newIndex, 0, info);\n          otherUsersData.splice(newIndex, 0, userData);\n          rowManager.updateRow(existingIndex, userData);\n          rowManager.moveRow(existingIndex, newIndex);\n        }\n      }\n      else\n      {\n        otherUsersInfo.splice(newIndex, 0, info);\n        otherUsersData.splice(newIndex, 0, userData);\n        rowManager.insertRow(newIndex, userData);\n      }\n\n      updateInviteNotice();\n\n      self.updateNumberOfOnlineUsers();\n    },\n    updateNumberOfOnlineUsers: function()\n    {\n      var online = 1; // you are always online!\n      for (var i = 0; i < otherUsersData.length; i++)\n      {\n        if (otherUsersData[i].status == \"\")\n        {\n          online++;\n        }\n      }\n\n      $('#online_count').text(online);\n\n      return online;\n    },\n    userLeave: function(info)\n    {\n      var existingIndex = findExistingIndex(info.userId);\n      if (existingIndex >= 0)\n      {\n        var userData = otherUsersData[existingIndex];\n        userData.status = 'Disconnected';\n        rowManager.updateRow(existingIndex, userData);\n        if (userData.leaveTimer)\n        {\n          window.clearTimeout(userData.leaveTimer);\n        }\n        // set up a timer that will only fire if no leaves,\n        // joins, or updates happen for this user in the\n        // next N seconds, to remove the user from the list.\n        var thisUserId = info.userId;\n        var thisLeaveTimer = window.setTimeout(function()\n        {\n          var newExistingIndex = findExistingIndex(thisUserId);\n          if (newExistingIndex >= 0)\n          {\n            var newUserData = otherUsersData[newExistingIndex];\n            if (newUserData.status == 'Disconnected' && newUserData.leaveTimer == thisLeaveTimer)\n            {\n              otherUsersInfo.splice(newExistingIndex, 1);\n              otherUsersData.splice(newExistingIndex, 1);\n              rowManager.removeRow(newExistingIndex);\n              hooks.callAll('userLeave', {\n                userInfo: info\n              });\n              updateInviteNotice();\n            }\n          }\n        }, 8000); // how long to wait\n        userData.leaveTimer = thisLeaveTimer;\n      }\n      updateInviteNotice();\n\n      self.updateNumberOfOnlineUsers();\n    },\n    showGuestPrompt: function(userId, displayName)\n    {\n      if (knocksToIgnore[userId])\n      {\n        return;\n      }\n\n      var encodedUserId = padutils.encodeUserId(userId);\n\n      var actionName = 'hide-guest-prompt-' + encodedUserId;\n      padutils.cancelActions(actionName);\n\n      var box = $(\"#guestprompt-\" + encodedUserId);\n      if (box.length == 0)\n      {\n        // make guest prompt box\n        box = $('<div id=\"'+padutils.escapeHtml('guestprompt-' + encodedUserId) + '\" class=\"guestprompt\"><div class=\"choices\"><a href=\"' + padutils.escapeHtml('javascript:void(require('+JSON.stringify(module.id)+').paduserlist.answerGuestPrompt(' + JSON.stringify(encodedUserId) + ',false))')+'\">'+_('pad.userlist.deny')+'</a> <a href=\"' + padutils.escapeHtml('javascript:void(require('+JSON.stringify(module.id)+').paduserlist.answerGuestPrompt(' + JSON.stringify(encodedUserId) + ',true))') + '\">'+_('pad.userlist.approve')+'</a></div><div class=\"guestname\"><strong>'+_('pad.userlist.guest')+':</strong> ' + padutils.escapeHtml(displayName) + '</div></div>');\n        $(\"#guestprompts\").append(box);\n      }\n      else\n      {\n        // update display name\n        box.find(\".guestname\").html('<strong>'+_('pad.userlist.guest')+':</strong> ' + padutils.escapeHtml(displayName));\n      }\n      var hideLater = padutils.getCancellableAction(actionName, function()\n      {\n        self.removeGuestPrompt(userId);\n      });\n      window.setTimeout(hideLater, 15000); // time-out with no knock\n      guestPromptFlash.scheduleAnimation();\n    },\n    removeGuestPrompt: function(userId)\n    {\n      var box = $(\"#guestprompt-\" + padutils.encodeUserId(userId));\n      // remove ID now so a new knock by same user gets new, unfaded box\n      box.removeAttr('id').fadeOut(\"fast\", function()\n      {\n        box.remove();\n      });\n\n      knocksToIgnore[userId] = true;\n      window.setTimeout(function()\n      {\n        delete knocksToIgnore[userId];\n      }, 5000);\n    },\n    answerGuestPrompt: function(encodedUserId, approve)\n    {\n      var guestId = padutils.decodeUserId(encodedUserId);\n\n      var msg = {\n        type: 'guestanswer',\n        authId: pad.getUserId(),\n        guestId: guestId,\n        answer: (approve ? \"approved\" : \"denied\")\n      };\n      pad.sendClientMessage(msg);\n\n      self.removeGuestPrompt(guestId);\n    },\n    renderMyUserInfo: function()\n    {\n      if (myUserInfo.name)\n      {\n        $(\"#myusernameedit\").removeClass(\"editempty\").val(myUserInfo.name);\n      }\n      else\n      {\n        $(\"#myusernameedit\").addClass(\"editempty\").val(_(\"pad.userlist.entername\"));\n      }\n      if (colorPickerOpen)\n      {\n        $(\"#myswatchbox\").addClass('myswatchboxunhoverable').removeClass('myswatchboxhoverable');\n      }\n      else\n      {\n        $(\"#myswatchbox\").addClass('myswatchboxhoverable').removeClass('myswatchboxunhoverable');\n      }\n\n      $(\"#myswatch\").css({'background-color': myUserInfo.colorId});\n\n      if (browser.msie && parseInt(browser.version) <= 8) {\n        $(\"li[data-key=showusers] > a\").css({'box-shadow': 'inset 0 0 30px ' + myUserInfo.colorId,'background-color': myUserInfo.colorId});\n      }\n      else\n      {\n        $(\"li[data-key=showusers] > a\").css({'box-shadow': 'inset 0 0 30px ' + myUserInfo.colorId});\n      }\n    }\n  };\n  return self;\n}());\n\nfunction getColorPickerSwatchIndex(jnode)\n{\n  //  return Number(jnode.get(0).className.match(/\\bn([0-9]+)\\b/)[1])-1;\n  return $(\"#colorpickerswatches li\").index(jnode);\n}\n\nfunction closeColorPicker(accept)\n{\n  if (accept)\n  {\n    var newColor = $(\"#mycolorpickerpreview\").css(\"background-color\");\n    var parts = newColor.match(/^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/);\n    // parts now should be [\"rgb(0, 70, 255\", \"0\", \"70\", \"255\"]\n    if (parts) {\n      delete (parts[0]);\n      for (var i = 1; i <= 3; ++i) {\n          parts[i] = parseInt(parts[i]).toString(16);\n          if (parts[i].length == 1) parts[i] = '0' + parts[i];\n      }\n      var newColor = \"#\" +parts.join(''); // \"0070ff\"\n    }\n    myUserInfo.colorId = newColor;\n    pad.notifyChangeColor(newColor);\n    paduserlist.renderMyUserInfo();\n  }\n  else\n  {\n    //pad.notifyChangeColor(previousColorId);\n    //paduserlist.renderMyUserInfo();\n  }\n\n  colorPickerOpen = false;\n  $(\"#mycolorpicker\").fadeOut(\"fast\");\n}\n\nfunction showColorPicker()\n{\n  previousColorId = myUserInfo.colorId;\n\n  if (!colorPickerOpen)\n  {\n    var palette = pad.getColorPalette();\n\n    if (!colorPickerSetup)\n    {\n      var colorsList = $(\"#colorpickerswatches\")\n      for (var i = 0; i < palette.length; i++)\n      {\n\n        var li = $('<li>', {\n          style: 'background: ' + palette[i] + ';'\n        });\n\n        li.appendTo(colorsList);\n\n        li.bind('click', function(event)\n        {\n          $(\"#colorpickerswatches li\").removeClass('picked');\n          $(event.target).addClass(\"picked\");\n\n          var newColorId = getColorPickerSwatchIndex($(\"#colorpickerswatches .picked\"));\n          pad.notifyChangeColor(newColorId);\n        });\n\n      }\n\n      colorPickerSetup = true;\n    }\n\n    $(\"#mycolorpicker\").fadeIn();\n    colorPickerOpen = true;\n\n    $(\"#colorpickerswatches li\").removeClass('picked');\n    $($(\"#colorpickerswatches li\")[myUserInfo.colorId]).addClass(\"picked\"); //seems weird\n  }\n}\n\nexports.paduserlist = paduserlist;\n\n}\n, \"ep_etherpad-lite/static/js/pad_impexp.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code. \n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar padimpexp = (function()\n{\n\n  ///// import\n  var currentImportTimer = null;\n\n  function addImportFrames()\n  {\n    $(\"#import .importframe\").remove();\n    var iframe = $('<iframe style=\"display: none;\" name=\"importiframe\" class=\"importframe\"></iframe>');\n    $('#import').append(iframe);\n  }\n\n  function fileInputUpdated()\n  {\n    $('#importsubmitinput').addClass('throbbold');\n    $('#importformfilediv').addClass('importformenabled');\n    $('#importsubmitinput').removeAttr('disabled');\n    $('#importmessagefail').fadeOut('fast');\n  }\n\n  function fileInputSubmit()\n  {\n    $('#importmessagefail').fadeOut(\"fast\");\n    var ret = window.confirm(html10n.get(\"pad.impexp.confirmimport\"));\n    if (ret)\n    {        \n      currentImportTimer = window.setTimeout(function()\n      {\n        if (!currentImportTimer)\n        {\n          return;\n        }\n        currentImportTimer = null;\n        importFailed(\"Request timed out.\");\n        importDone();\n      }, 25000); // time out after some number of seconds\n      $('#importsubmitinput').attr(\n      {\n        disabled: true\n      }).val(html10n.get(\"pad.impexp.importing\"));\n      \n      window.setTimeout(function()\n      {\n        $('#importfileinput').attr(\n        {\n          disabled: true\n        });\n      }, 0);\n      $('#importarrow').stop(true, true).hide();\n      $('#importstatusball').show();\n    }\n    return ret;\n  }\n\n  function importFailed(msg)\n  {\n    importErrorMessage(msg);\n  }\n\n  function importDone()\n  {\n    $('#importsubmitinput').removeAttr('disabled').val(html10n.get(\"pad.impexp.importbutton\"));\n    window.setTimeout(function()\n    {\n      $('#importfileinput').removeAttr('disabled');\n    }, 0);\n    $('#importstatusball').hide();\n    importClearTimeout();\n    addImportFrames();\n  }\n\n  function importClearTimeout()\n  {\n    if (currentImportTimer)\n    {\n      window.clearTimeout(currentImportTimer);\n      currentImportTimer = null;\n    }\n  }\n\n  function importErrorMessage(status)\n  {\n    var msg=\"\";\n  \n    if(status === \"convertFailed\"){\n      msg = html10n.get(\"pad.impexp.convertFailed\");\n    } else if(status === \"uploadFailed\"){\n      msg = html10n.get(\"pad.impexp.uploadFailed\");\n    } else if(status === \"padHasData\"){\n      msg = html10n.get(\"pad.impexp.padHasData\");\n    }\n  \n    function showError(fade)\n    {\n      $('#importmessagefail').html('<strong style=\"color: red\">'+html10n.get('pad.impexp.importfailed')+':</strong> ' + (msg || html10n.get('pad.impexp.copypaste','')))[(fade ? \"fadeIn\" : \"show\")]();\n    }\n\n    if ($('#importexport .importmessage').is(':visible'))\n    {\n      $('#importmessagesuccess').fadeOut(\"fast\");\n      $('#importmessagefail').fadeOut(\"fast\", function()\n      {\n        showError(true);\n      });\n    }\n    else\n    {\n      showError();\n    }\n  }\n\n  function importSuccessful(token)\n  {\n    $.ajax(\n    {\n      type: 'post',\n      url: '/ep/pad/impexp/import2',\n      data: {\n        token: token,\n        padId: pad.getPadId()\n      },\n      success: importApplicationSuccessful,\n      error: importApplicationFailed,\n      timeout: 25000\n    });\n    addImportFrames();\n  }\n\n  function importApplicationFailed(xhr, textStatus, errorThrown)\n  {\n    importErrorMessage(\"Error during conversion.\");\n    importDone();\n  }\n\n  ///// export\n\n  function cantExport()\n  {\n    var type = $(this);\n    if (type.hasClass(\"exporthrefpdf\"))\n    {\n      type = \"PDF\";\n    }\n    else if (type.hasClass(\"exporthrefdoc\"))\n    {\n      type = \"Microsoft Word\";\n    }\n    else if (type.hasClass(\"exporthrefodt\"))\n    {\n      type = \"OpenDocument\";\n    }\n    else\n    {\n      type = \"this file\";\n    }\n    alert(html10n.get(\"pad.impexp.exportdisabled\", {type:type}));\n    return false;\n  }\n\n  /////\n  var pad = undefined;\n  var self = {\n    init: function(_pad)\n    {\n      pad = _pad;\n\n      //get /p/padname\n      // if /p/ isn't available due to a rewrite we use the clientVars padId\n      var pad_root_path = new RegExp(/.*\\/p\\/[^\\/]+/).exec(document.location.pathname) || clientVars.padId;\n      //get http://example.com/p/padname without Params\n      var pad_root_url = document.location.protocol + '//' + document.location.host + document.location.pathname;\n\n      //i10l buttom import\n      $('#importsubmitinput').val(html10n.get(\"pad.impexp.importbutton\"));\n      html10n.bind('localized', function() {\n        $('#importsubmitinput').val(html10n.get(\"pad.impexp.importbutton\"));\n      })\n\n      // build the export links\n      $(\"#exporthtmla\").attr(\"href\", pad_root_path + \"/export/html\");\n      $(\"#exportetherpada\").attr(\"href\", pad_root_path + \"/export/etherpad\");\n      $(\"#exportplaina\").attr(\"href\", pad_root_path + \"/export/txt\");\n\n      // activate action to import in the form\n      $(\"#importform\").attr('action', pad_root_url + \"/import\");\n      \n      //hide stuff thats not avaible if abiword is disabled\n      if(clientVars.abiwordAvailable == \"no\")\n      {\n        $(\"#exportworda\").remove();\n        $(\"#exportpdfa\").remove();\n        $(\"#exportopena\").remove();\n\n        $(\"#importmessageabiword\").show();\n      }\n      else if(clientVars.abiwordAvailable == \"withoutPDF\")\n      {\n        $(\"#exportpdfa\").remove();\n        \n        $(\"#exportworda\").attr(\"href\", pad_root_path + \"/export/doc\");\n        $(\"#exportopena\").attr(\"href\", pad_root_path + \"/export/odt\");\n        \n        $(\"#importexport\").css({\"height\":\"142px\"});\n        $(\"#importexportline\").css({\"height\":\"142px\"});\n      }\n      else\n      {\n        $(\"#exportworda\").attr(\"href\", pad_root_path + \"/export/doc\");\n        $(\"#exportpdfa\").attr(\"href\", pad_root_path + \"/export/pdf\");\n        $(\"#exportopena\").attr(\"href\", pad_root_path + \"/export/odt\");\n      }\n    \n      addImportFrames();\n      $(\"#importfileinput\").change(fileInputUpdated);\n      $('#importform').unbind(\"submit\").submit(fileInputSubmit);\n      $('.disabledexport').click(cantExport);\n    },\n    handleFrameCall: function(directDatabaseAccess, status)\n    {\n      if (status !== \"ok\")\n      {\n        importFailed(status);\n      }\n      if(directDatabaseAccess) pad.switchToPad(clientVars.padId);\n      importDone();\n    },\n    disable: function()\n    {\n      $(\"#impexp-disabled-clickcatcher\").show();\n      $(\"#import\").css('opacity', 0.5);\n      $(\"#impexp-export\").css('opacity', 0.5);\n    },\n    enable: function()\n    {\n      $(\"#impexp-disabled-clickcatcher\").hide();\n      $(\"#import\").css('opacity', 1);\n      $(\"#impexp-export\").css('opacity', 1);\n    }\n  };\n  return self;\n}());\n\nexports.padimpexp = padimpexp;\n\n}\n, \"ep_etherpad-lite/static/js/pad_savedrevs.js\": function (require, exports, module) {\n/**\n * Copyright 2012 Peter 'Pita' Martischka\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar pad;\n\nexports.saveNow = function(){\n  pad.collabClient.sendMessage({\"type\": \"SAVE_REVISION\"});\n  $.gritter.add({\n    // (string | mandatory) the heading of the notification\n    title: _(\"pad.savedrevs.marked\"),\n    // (string | mandatory) the text inside the notification\n    text: _(\"pad.savedrevs.timeslider\") || \"You can view saved revisions in the timeslider\",\n    // (bool | optional) if you want it to fade out on its own or just sit there\n    sticky: false,\n    // (int | optional) the time you want it to be alive for before fading out\n    time: '2000'\n  });\n}\n\nexports.init = function(_pad){\n  pad = _pad;\n}\n\n}\n, \"ep_etherpad-lite/static/js/pad_connectionstatus.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code. \n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar padmodals = require('./pad_modals').padmodals;\n\nvar padconnectionstatus = (function()\n{\n\n  var status = {\n    what: 'connecting'\n  };\n\n  var self = {\n    init: function()\n    {\n      $('button#forcereconnect').click(function()\n      {\n        window.location.reload();\n      });\n    },\n    connected: function()\n    {\n      status = {\n        what: 'connected'\n      };\n      padmodals.showModal('connected');\n      padmodals.hideOverlay();\n    },\n    reconnecting: function()\n    {\n      status = {\n        what: 'reconnecting'\n      };\n      \n      padmodals.showModal('reconnecting');\n      padmodals.showOverlay();\n    },\n    disconnected: function(msg)\n    {\n      if(status.what == \"disconnected\")\n        return;\n      \n      status = {\n        what: 'disconnected',\n        why: msg\n      };\n      \n      var k = String(msg); // known reason why\n      if (!(k == 'userdup' || k == 'deleted' || k == 'looping' || k == 'slowcommit' || k == 'initsocketfail' || k == 'unauth' || k == 'badChangeset' || k == 'corruptPad'))\n      {\n        k = 'disconnected';\n      }\n\n      padmodals.showModal(k);\n      padmodals.showOverlay();\n    },\n    isFullyConnected: function()\n    {\n      return status.what == 'connected';\n    },\n    getStatus: function()\n    {\n      return status;\n    }\n  };\n  return self;\n}());\n\nexports.padconnectionstatus = padconnectionstatus;\n\n}\n, \"ep_etherpad-lite/static/js/chat.js\": function (require, exports, module) {\n/**\n * Copyright 2009 Google Inc., 2011 Peter 'Pita' Martischka (Primary Technology Ltd)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar padutils = require('./pad_utils').padutils;\nvar padcookie = require('./pad_cookie').padcookie;\nvar Tinycon = require('tinycon/tinycon');\nvar hooks = require('./pluginfw/hooks');\nvar padeditor = require('./pad_editor').padeditor;\n\nvar chat = (function()\n{\n  var isStuck = false;\n  var userAndChat = false;\n  var gotInitialMessages = false;\n  var historyPointer = 0;\n  var chatMentions = 0;\n  var self = {\n    show: function () \n    {      \n      $(\"#chaticon\").hide();\n      $(\"#chatbox\").show();\n      $(\"#gritter-notice-wrapper\").hide();\n      self.scrollDown();\n      chatMentions = 0;\n      Tinycon.setBubble(0);\n    },\n    focus: function () \n    {\n      setTimeout(function(){\n        $(\"#chatinput\").focus();\n      },100);\n    },\n    stickToScreen: function(fromInitialCall) // Make chat stick to right hand side of screen\n    {\n      chat.show();\n      if(!isStuck || fromInitialCall) { // Stick it to\n        padcookie.setPref(\"chatAlwaysVisible\", true);\n        $('#chatbox').addClass(\"stickyChat\");\n        $('#titlesticky').hide();\n        $('#editorcontainer').css({\"right\":\"192px\"});\n        $('.stickyChat').css(\"top\",$('#editorcontainer').offset().top+\"px\");\n        isStuck = true;\n      } else { // Unstick it\n        padcookie.setPref(\"chatAlwaysVisible\", false);\n        $('.stickyChat').css(\"top\", \"auto\");\n        $('#chatbox').removeClass(\"stickyChat\");\n        $('#titlesticky').show();\n        $('#editorcontainer').css({\"right\":\"0px\"});\n        isStuck = false;\n      }\n    },\n    chatAndUsers: function(fromInitialCall)\n    {\n      var toEnable = $('#options-chatandusers').is(\":checked\");\n      if(toEnable || !userAndChat || fromInitialCall){\n        padcookie.setPref(\"chatAndUsers\", true);\n        chat.stickToScreen(true);\n        $('#options-stickychat').prop('checked', true)\n        $('#options-chatandusers').prop('checked', true)\n        $('#options-stickychat').prop(\"disabled\", \"disabled\");\n        $('#users').addClass(\"chatAndUsers\");\n        $(\"#chatbox\").addClass(\"chatAndUsersChat\");\n        // redraw\n        userAndChat = true;\n        padeditbar.redrawHeight()\n      }else{\n        padcookie.setPref(\"chatAndUsers\", false);\n        $('#options-stickychat').prop(\"disabled\", false);\n        $('#users').removeClass(\"chatAndUsers\");\n        $(\"#chatbox\").removeClass(\"chatAndUsersChat\");\n      }\n    },\n    hide: function () \n    {\n      // decide on hide logic based on chat window being maximized or not \n      if ($('#options-stickychat').prop('checked')) {\n        chat.stickToScreen();\n        $('#options-stickychat').prop('checked', false);\n      }\n      else {  \n        $(\"#chatcounter\").text(\"0\");\n        $(\"#chaticon\").show();\n        $(\"#chatbox\").hide();\n        $.gritter.removeAll();\n        $(\"#gritter-notice-wrapper\").show();\n      }\n    },\n    scrollDown: function()\n    {\n      if($('#chatbox').css(\"display\") != \"none\"){\n        if(!self.lastMessage || !self.lastMessage.position() || self.lastMessage.position().top < $('#chattext').height()) {\n          // if we use a slow animate here we can have a race condition when a users focus can not be moved away\n          // from the last message recieved.\n          $('#chattext').animate({scrollTop: $('#chattext')[0].scrollHeight}, { duration: 400, queue: false });\n          self.lastMessage = $('#chattext > p').eq(-1);\n        }\n      }\n    }, \n    send: function()\n    {\n      var text = $(\"#chatinput\").val();\n      if(text.replace(/\\s+/,'').length == 0)\n        return;\n      this._pad.collabClient.sendMessage({\"type\": \"CHAT_MESSAGE\", \"text\": text});\n      $(\"#chatinput\").val(\"\");\n    },\n    addMessage: function(msg, increment, isHistoryAdd)\n    {\n      //correct the time\n      msg.time += this._pad.clientTimeOffset;\n      \n      //create the time string\n      var minutes = \"\" + new Date(msg.time).getMinutes();\n      var hours = \"\" + new Date(msg.time).getHours();\n      if(minutes.length == 1)\n        minutes = \"0\" + minutes ;\n      if(hours.length == 1)\n        hours = \"0\" + hours ;\n      var timeStr = hours + \":\" + minutes;\n        \n      //create the authorclass\n      var authorClass = \"author-\" + msg.userId.replace(/[^a-y0-9]/g, function(c)\n      {\n        if (c == \".\") return \"-\";\n        return 'z' + c.charCodeAt(0) + 'z';\n      });\n\n      var text = padutils.escapeHtmlWithClickableLinks(msg.text, \"_blank\");\n\n      var authorName = msg.userName == null ? _('pad.userlist.unnamed') : padutils.escapeHtml(msg.userName);\n\n      // the hook args\n      var ctx = {\n        \"authorName\" : authorName,\n        \"author\" : msg.userId,\n        \"text\" : text,\n        \"sticky\" : false,\n        \"timestamp\" : msg.time,\n        \"timeStr\" : timeStr\n      }\n\n      // is the users focus already in the chatbox?\n      var alreadyFocused = $(\"#chatinput\").is(\":focus\");\n\n      // does the user already have the chatbox open?\n      var chatOpen = $(\"#chatbox\").is(\":visible\");\n\n      // does this message contain this user's name? (is the curretn user mentioned?)\n      var myName = $('#myusernameedit').val();\n      var wasMentioned = (text.toLowerCase().indexOf(myName.toLowerCase()) !== -1 && myName != \"undefined\");\n\n      if(wasMentioned && !alreadyFocused && !isHistoryAdd && !chatOpen)\n      { // If the user was mentioned show for twice as long and flash the browser window\n        chatMentions++;\n        Tinycon.setBubble(chatMentions);\n        ctx.sticky = true;\n      }\n\n      // Call chat message hook\n      hooks.aCallAll(\"chatNewMessage\", ctx, function() {\n\n        var html = \"<p data-authorId='\" + msg.userId + \"' class='\" + authorClass + \"'><b>\" + authorName + \":</b><span class='time \" + authorClass + \"'>\" + ctx.timeStr + \"</span> \" + ctx.text + \"</p>\";\n        if(isHistoryAdd)\n          $(html).insertAfter('#chatloadmessagesbutton');\n        else\n          $(\"#chattext\").append(html);\n\n        //should we increment the counter??\n        if(increment && !isHistoryAdd)\n        {\n          // Update the counter of unread messages\n          var count = Number($(\"#chatcounter\").text());\n          count++;\n          $(\"#chatcounter\").text(count);\n\n          if(!chatOpen) {\n            $.gritter.add({\n              // (string | mandatory) the heading of the notification\n              title: ctx.authorName,\n              // (string | mandatory) the text inside the notification\n              text: ctx.text,\n              // (bool | optional) if you want it to fade out on its own or just sit there\n              sticky: ctx.sticky,\n              // (int | optional) the time you want it to be alive for before fading out\n              time: '4000'\n            });\n          }\n        }\n      });\n\n      // Clear the chat mentions when the user clicks on the chat input box\n      $('#chatinput').click(function(){\n        chatMentions = 0;\n        Tinycon.setBubble(0);\n      });\n      if(!isHistoryAdd)\n        self.scrollDown();\n    },\n    init: function(pad)\n    {\n      this._pad = pad;\n      $(\"#chatinput\").on(\"keydown\", function(evt){\n        // If the event is Alt C or Escape & we're already in the chat menu\n        // Send the users focus back to the pad\n        if((evt.altKey == true && evt.which === 67) || evt.which === 27){\n          // If we're in chat already..\n          $(':focus').blur(); // required to do not try to remove!\n          padeditor.ace.focus(); // Sends focus back to pad\n          evt.preventDefault();\n          return false;\n        }\n      });\n\n      $('body:not(#chatinput)').on(\"keypress\", function(evt){\n        if (evt.altKey && evt.which == 67){\n          // Alt c focuses on the Chat window\n          $(this).blur();\n          chat.show();\n          $(\"#chatinput\").focus();\n          evt.preventDefault();\n        }\n      });\n\n      $(\"#chatinput\").keypress(function(evt){\n        //if the user typed enter, fire the send\n        if(evt.which == 13 || evt.which == 10)\n        {\n          evt.preventDefault();\n          self.send();\n        }\n      });\n\n      // initial messages are loaded in pad.js' _afterHandshake\n\n      $(\"#chatcounter\").text(0);\n      $(\"#chatloadmessagesbutton\").click(function()\n      {\n        var start = Math.max(self.historyPointer - 20, 0);\n        var end = self.historyPointer;\n\n        if(start == end) // nothing to load\n          return;\n\n        $(\"#chatloadmessagesbutton\").css(\"display\", \"none\");\n        $(\"#chatloadmessagesball\").css(\"display\", \"block\");\n\n        pad.collabClient.sendMessage({\"type\": \"GET_CHAT_MESSAGES\", \"start\": start, \"end\": end});\n        self.historyPointer = start;\n      });\n    }\n  }\n\n  return self;\n}());\n\nexports.chat = chat;\n\n\n}\n, \"ep_etherpad-lite/static/js/gritter.js\": function (require, exports, module) {\n/*\n * Gritter for jQuery\n * http://www.boedesign.com/\n *\n * Copyright (c) 2012 Jordan Boesch\n * Dual licensed under the MIT and GPL licenses.\n *\n * Date: February 24, 2012\n * Version: 1.7.4\n */\n\n(function($){\n\t/**\n\t* Set it up as an object under the jQuery namespace\n\t*/\n\t$.gritter = {};\n\t\n\t/**\n\t* Set up global options that the user can over-ride\n\t*/\n\t$.gritter.options = {\n\t\tposition: '',\n\t\tclass_name: '', // could be set to 'gritter-light' to use white notifications\n\t\ttime: 6000 // hang on the screen for...\n\t}\n\t\n\t/**\n\t* Add a gritter notification to the screen\n\t* @see Gritter#add();\n\t*/\n\t$.gritter.add = function(params){\n\n\t\ttry {\n\t\t\treturn Gritter.add(params || {});\n\t\t} catch(e) {\n\t\t\n\t\t\tvar err = 'Gritter Error: ' + e;\n\t\t\t(typeof(console) != 'undefined' && console.error) ? \n\t\t\t\tconsole.error(err, params) : \n\t\t\t\talert(err);\n\t\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t* Remove a gritter notification from the screen\n\t* @see Gritter#removeSpecific();\n\t*/\n\t$.gritter.remove = function(id, params){\n\t\tGritter.removeSpecific(id, params || {});\n\t}\n\t\n\t/**\n\t* Remove all notifications\n\t* @see Gritter#stop();\n\t*/\n\t$.gritter.removeAll = function(params){\n\t\tGritter.stop(params || {});\n\t}\n\t\n\t/**\n\t* Big fat Gritter object\n\t* @constructor (not really since its object literal)\n\t*/\n\tvar Gritter = {\n\t\t\n\t\t// Public - options to over-ride with $.gritter.options in \"add\"\n\t\tposition: '',\n\t\tfade_in_speed: '',\n\t\tfade_out_speed: '',\n\t\ttime: '',\n\t\t\n\t\t// Private - no touchy the private parts\n\t\t_custom_timer: 0,\n\t\t_item_count: 0,\n\t\t_is_setup: 0,\n\t\t_tpl_close: '<div class=\"gritter-close\"></div>',\n\t\t_tpl_title: '<span class=\"gritter-title\">[[title]]</span>',\n\t\t_tpl_item: '<div id=\"gritter-item-[[number]]\" class=\"gritter-item-wrapper [[item_class]]\" style=\"display:none\"><div class=\"gritter-top\"></div><div class=\"gritter-item\">[[close]][[image]]<div class=\"[[class_name]]\">[[title]]<p>[[text]]</p></div><div style=\"clear:both\"></div></div><div class=\"gritter-bottom\"></div></div>',\n\t\t_tpl_wrap: '<div id=\"gritter-notice-wrapper\" aria-live=\"polite\" aria-atomic=\"false\" aria-relevant=\"additions\" role=\"log\"></div>',\n\t\t\n\t\t/**\n\t\t* Add a gritter notification to the screen\n\t\t* @param {Object} params The object that contains all the options for drawing the notification\n\t\t* @return {Integer} The specific numeric id to that gritter notification\n\t\t*/\n\t\tadd: function(params){\n\t\t\t// Handle straight text\n\t\t\tif(typeof(params) == 'string'){\n\t\t\t\tparams = {text:params};\n\t\t\t}\n\n\t\t\t// We might have some issues if we don't have a title or text!\n\t\t\tif(!params.text){\n\t\t\t\tthrow 'You must supply \"text\" parameter.'; \n\t\t\t}\n\t\t\t\n\t\t\t// Check the options and set them once\n\t\t\tif(!this._is_setup){\n\t\t\t\tthis._runSetup();\n\t\t\t}\n\t\t\t\n\t\t\t// Basics\n\t\t\tvar title = params.title, \n\t\t\t\ttext = params.text,\n\t\t\t\timage = params.image || '',\n\t\t\t\tsticky = params.sticky || false,\n\t\t\t\titem_class = params.class_name || $.gritter.options.class_name,\n\t\t\t\tposition = $.gritter.options.position,\n\t\t\t\ttime_alive = params.time || '';\n\n\t\t\tthis._verifyWrapper();\n\t\t\t\n\t\t\tthis._item_count++;\n\t\t\tvar number = this._item_count, \n\t\t\t\ttmp = this._tpl_item;\n\t\t\t\n\t\t\t// Assign callbacks\n\t\t\t$(['before_open', 'after_open', 'before_close', 'after_close']).each(function(i, val){\n\t\t\t\tGritter['_' + val + '_' + number] = ($.isFunction(params[val])) ? params[val] : function(){}\n\t\t\t});\n\n\t\t\t// Reset\n\t\t\tthis._custom_timer = 0;\n\t\t\t\n\t\t\t// A custom fade time set\n\t\t\tif(time_alive){\n\t\t\t\tthis._custom_timer = time_alive;\n\t\t\t}\n\t\t\t\n\t\t\tvar image_str = (image != '') ? '<img src=\"' + image + '\" class=\"gritter-image\" />' : '',\n\t\t\t\tclass_name = (image != '') ? 'gritter-with-image' : 'gritter-without-image';\n\t\t\t\n\t\t\t// String replacements on the template\n\t\t\tif(title){\n\t\t\t\ttitle = this._str_replace('[[title]]',title,this._tpl_title);\n\t\t\t}else{\n\t\t\t\ttitle = '';\n\t\t\t}\n\t\t\t\n\t\t\ttmp = this._str_replace(\n\t\t\t\t['[[title]]', '[[text]]', '[[close]]', '[[image]]', '[[number]]', '[[class_name]]', '[[item_class]]'],\n\t\t\t\t[title, text, this._tpl_close, image_str, this._item_count, class_name, item_class], tmp\n\t\t\t);\n\n\t\t\t// If it's false, don't show another gritter message\n\t\t\tif(this['_before_open_' + number]() === false){\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t$('#gritter-notice-wrapper').addClass(position).append(tmp);\n\t\t\t\n\t\t\tvar item = $('#gritter-item-' + this._item_count);\n\t\t\t\n\t\t\titem.fadeIn(this.fade_in_speed, function(){\n\t\t\t\tGritter['_after_open_' + number]($(this));\n\t\t\t});\n\t\t\t\n\t\t\tif(!sticky){\n\t\t\t\tthis._setFadeTimer(item, number);\n\t\t\t}\n\t\t\t\n\t\t\t// Bind the hover/unhover states\n\t\t\t$(item).bind('mouseenter mouseleave', function(event){\n\t\t\t\tif(event.type == 'mouseenter'){\n\t\t\t\t\tif(!sticky){ \n\t\t\t\t\t\tGritter._restoreItemIfFading($(this), number);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif(!sticky){\n\t\t\t\t\t\tGritter._setFadeTimer($(this), number);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tGritter._hoverState($(this), event.type);\n\t\t\t});\n\t\t\t\n\t\t\t// Clicking (X) makes the perdy thing close\n\t\t\t$(item).find('.gritter-close').click(function(){\n\t\t\t\tGritter.removeSpecific(number, {}, null, true);\n\t\t\t});\n\t\t\t\n\t\t\treturn number;\n\t\t\n\t\t},\n\t\t\n\t\t/**\n\t\t* If we don't have any more gritter notifications, get rid of the wrapper using this check\n\t\t* @private\n\t\t* @param {Integer} unique_id The ID of the element that was just deleted, use it for a callback\n\t\t* @param {Object} e The jQuery element that we're going to perform the remove() action on\n\t\t* @param {Boolean} manual_close Did we close the gritter dialog with the (X) button\n\t\t*/\n\t\t_countRemoveWrapper: function(unique_id, e, manual_close){\n\t\t\t\n\t\t\t// Remove it then run the callback function\n\t\t\te.remove();\n\t\t\tthis['_after_close_' + unique_id](e, manual_close);\n\t\t\t\n\t\t\t// Check if the wrapper is empty, if it is.. remove the wrapper\n\t\t\tif($('.gritter-item-wrapper').length == 0){\n\t\t\t\t$('#gritter-notice-wrapper').remove();\n\t\t\t}\n\t\t\n\t\t},\n\t\t\n\t\t/**\n\t\t* Fade out an element after it's been on the screen for x amount of time\n\t\t* @private\n\t\t* @param {Object} e The jQuery element to get rid of\n\t\t* @param {Integer} unique_id The id of the element to remove\n\t\t* @param {Object} params An optional list of params to set fade speeds etc.\n\t\t* @param {Boolean} unbind_events Unbind the mouseenter/mouseleave events if they click (X)\n\t\t*/\n\t\t_fade: function(e, unique_id, params, unbind_events){\n\n\t\t\tvar params = params || {},\n\t\t\t\tfade = (typeof(params.fade) != 'undefined') ? params.fade : true,\n\t\t\t\tfade_out_speed = params.speed || this.fade_out_speed,\n\t\t\t\tmanual_close = unbind_events;\n\n\t\t\tthis['_before_close_' + unique_id](e, manual_close);\n\t\t\t\n\t\t\t// If this is true, then we are coming from clicking the (X)\n\t\t\tif(unbind_events){\n\t\t\t\te.unbind('mouseenter mouseleave');\n\t\t\t}\n\t\t\t\n\t\t\t// Fade it out or remove it\n\t\t\tif(fade){\n\t\t\t\n\t\t\t\te.animate({\n\t\t\t\t\topacity: 0\n\t\t\t\t}, fade_out_speed, function(){\n\t\t\t\t\te.animate({ height: 0 }, 300, function(){\n\t\t\t\t\t\tGritter._countRemoveWrapper(unique_id, e, manual_close);\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t\n\t\t\t}\n\t\t\telse {\n\t\t\t\t\n\t\t\t\tthis._countRemoveWrapper(unique_id, e);\n\t\t\t\t\n\t\t\t}\n\t\t\t\t\t\t\n\t\t},\n\t\t\n\t\t/**\n\t\t* Perform actions based on the type of bind (mouseenter, mouseleave) \n\t\t* @private\n\t\t* @param {Object} e The jQuery element\n\t\t* @param {String} type The type of action we're performing: mouseenter or mouseleave\n\t\t*/\n\t\t_hoverState: function(e, type){\n\t\t\t\n\t\t\t// Change the border styles and add the (X) close button when you hover\n\t\t\tif(type == 'mouseenter'){\n\t\t\t\t\n\t\t\t\te.addClass('hover');\n\t\t\t\t\n\t\t\t\t// Show close button\n\t\t\t\te.find('.gritter-close').show();\n\t\t\t\t\t\t\n\t\t\t}\n\t\t\t// Remove the border styles and hide (X) close button when you mouse out\n\t\t\telse {\n\t\t\t\t\n\t\t\t\te.removeClass('hover');\n\t\t\t\t\n\t\t\t\t// Hide close button\n\t\t\t\te.find('.gritter-close').hide();\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t},\n\t\t\n\t\t/**\n\t\t* Remove a specific notification based on an ID\n\t\t* @param {Integer} unique_id The ID used to delete a specific notification\n\t\t* @param {Object} params A set of options passed in to determine how to get rid of it\n\t\t* @param {Object} e The jQuery element that we're \"fading\" then removing\n\t\t* @param {Boolean} unbind_events If we clicked on the (X) we set this to true to unbind mouseenter/mouseleave\n\t\t*/\n\t\tremoveSpecific: function(unique_id, params, e, unbind_events){\n\t\t\t\n\t\t\tif(!e){\n\t\t\t\tvar e = $('#gritter-item-' + unique_id);\n\t\t\t}\n\n\t\t\t// We set the fourth param to let the _fade function know to \n\t\t\t// unbind the \"mouseleave\" event.  Once you click (X) there's no going back!\n\t\t\tthis._fade(e, unique_id, params || {}, unbind_events);\n\t\t\t\n\t\t},\n\t\t\n\t\t/**\n\t\t* If the item is fading out and we hover over it, restore it!\n\t\t* @private\n\t\t* @param {Object} e The HTML element to remove\n\t\t* @param {Integer} unique_id The ID of the element\n\t\t*/\n\t\t_restoreItemIfFading: function(e, unique_id){\n\t\t\t\n\t\t\tclearTimeout(this['_int_id_' + unique_id]);\n\t\t\te.stop().css({ opacity: '', height: '' });\n\t\t\t\n\t\t},\n\t\t\n\t\t/**\n\t\t* Setup the global options - only once\n\t\t* @private\n\t\t*/\n\t\t_runSetup: function(){\n\t\t\n\t\t\tfor(opt in $.gritter.options){\n\t\t\t\tthis[opt] = $.gritter.options[opt];\n\t\t\t}\n\t\t\tthis._is_setup = 1;\n\t\t\t\n\t\t},\n\t\t\n\t\t/**\n\t\t* Set the notification to fade out after a certain amount of time\n\t\t* @private\n\t\t* @param {Object} item The HTML element we're dealing with\n\t\t* @param {Integer} unique_id The ID of the element\n\t\t*/\n\t\t_setFadeTimer: function(e, unique_id){\n\t\t\t\n\t\t\tvar timer_str = (this._custom_timer) ? this._custom_timer : this.time;\n\t\t\tthis['_int_id_' + unique_id] = setTimeout(function(){ \n\t\t\t\tGritter._fade(e, unique_id);\n\t\t\t}, timer_str);\n\t\t\n\t\t},\n\t\t\n\t\t/**\n\t\t* Bring everything to a halt\n\t\t* @param {Object} params A list of callback functions to pass when all notifications are removed\n\t\t*/  \n\t\tstop: function(params){\n\t\t\t\n\t\t\t// callbacks (if passed)\n\t\t\tvar before_close = ($.isFunction(params.before_close)) ? params.before_close : function(){};\n\t\t\tvar after_close = ($.isFunction(params.after_close)) ? params.after_close : function(){};\n\t\t\t\n\t\t\tvar wrap = $('#gritter-notice-wrapper');\n\t\t\tbefore_close(wrap);\n\t\t\twrap.fadeOut(function(){\n\t\t\t\t$(this).remove();\n\t\t\t\tafter_close();\n\t\t\t});\n\t\t\n\t\t},\n\t\t\n\t\t/**\n\t\t* An extremely handy PHP function ported to JS, works well for templating\n\t\t* @private\n\t\t* @param {String/Array} search A list of things to search for\n\t\t* @param {String/Array} replace A list of things to replace the searches with\n\t\t* @return {String} sa The output\n\t\t*/  \n\t\t_str_replace: function(search, replace, subject, count){\n\t\t\n\t\t\tvar i = 0, j = 0, temp = '', repl = '', sl = 0, fl = 0,\n\t\t\t\tf = [].concat(search),\n\t\t\t\tr = [].concat(replace),\n\t\t\t\ts = subject,\n\t\t\t\tra = r instanceof Array, sa = s instanceof Array;\n\t\t\ts = [].concat(s);\n\t\t\t\n\t\t\tif(count){\n\t\t\t\tthis.window[count] = 0;\n\t\t\t}\n\t\t\n\t\t\tfor(i = 0, sl = s.length; i < sl; i++){\n\t\t\t\t\n\t\t\t\tif(s[i] === ''){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfor (j = 0, fl = f.length; j < fl; j++){\n\t\t\t\t\t\n\t\t\t\t\ttemp = s[i] + '';\n\t\t\t\t\trepl = ra ? (r[j] !== undefined ? r[j] : '') : r[0];\n\t\t\t\t\ts[i] = (temp).split(f[j]).join(repl);\n\t\t\t\t\t\n\t\t\t\t\tif(count && s[i] !== temp){\n\t\t\t\t\t\tthis.window[count] += (temp.length-s[i].length) / f[j].length;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn sa ? s : s[0];\n\t\t\t\n\t\t},\n\t\t\n\t\t/**\n\t\t* A check to make sure we have something to wrap our notices with\n\t\t* @private\n\t\t*/  \n\t\t_verifyWrapper: function(){\n\t\t  \n\t\t\tif($('#gritter-notice-wrapper').length == 0){\n\t\t\t\t$('body').append(this._tpl_wrap);\n\t\t\t}\n\t\t\n\t\t}\n\t\t\n\t}\n\t\n})(jQuery);\n\n}\n, \"tinycon/tinycon.js\": function (require, exports, module) {\n/*!\n * Tinycon - A small library for manipulating the Favicon\n * Tom Moor, http://tommoor.com\n * Copyright (c) 2012 Tom Moor\n * MIT Licensed\n * @version 0.2.6\n*/\n\n(function(){\n\t\n\tvar Tinycon = {};\n\tvar currentFavicon = null;\n\tvar originalFavicon = null;\n\tvar originalTitle = document.title;\n\tvar faviconImage = null;\n\tvar canvas = null;\n\tvar options = {};\n\tvar defaults = {\n\t\twidth: 7,\n\t\theight: 9,\n\t\tfont: '10px arial',\n\t\tcolour: '#ffffff',\n\t\tbackground: '#F03D25',\n\t\tfallback: true\n\t};\n\t\n\tvar ua = (function () {\n\t\tvar agent = navigator.userAgent.toLowerCase();\n\t\t// New function has access to 'agent' via closure\n\t\treturn function (browser) {\n\t\t\treturn agent.indexOf(browser) !== -1;\n\t\t};\n\t}());\n\n\tvar browser = {\n\t\tie: ua('msie'),\n\t\tchrome: ua('chrome'),\n\t\twebkit: ua('chrome') || ua('safari'),\n\t\tsafari: ua('safari') && !ua('chrome'),\n\t\tmozilla: ua('mozilla') && !ua('chrome') && !ua('safari')\n\t};\n\t\n\t// private methods\n\tvar getFaviconTag = function(){\n\t\t\n\t\tvar links = document.getElementsByTagName('link');\n\t\t\n\t\tfor(var i=0, len=links.length; i < len; i++) {\n\t\t\tif ((links[i].getAttribute('rel') || '').match(/\\bicon\\b/)) {\n\t\t\t\treturn links[i];\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t};\n\t\n\tvar removeFaviconTag = function(){\n\t\n\t\tvar links = document.getElementsByTagName('link');\n\t\tvar head = document.getElementsByTagName('head')[0];\n\t\t\n\t\tfor(var i=0, len=links.length; i < len; i++) {\n\t\t\tvar exists = (typeof(links[i]) !== 'undefined');\n\t\t\tif (exists && links[i].getAttribute('rel') === 'icon') {\n\t\t\t\thead.removeChild(links[i]);\n\t\t\t}\n\t\t}\n\t};\n\t\n\tvar getCurrentFavicon = function(){\n\t\t\n\t\tif (!originalFavicon || !currentFavicon) {\n\t\t\tvar tag = getFaviconTag();\n\t\t\toriginalFavicon = currentFavicon = tag ? tag.getAttribute('href') : '/favicon.ico';\n\t\t}\n\n\t\treturn currentFavicon;\n\t};\n\t\n\tvar getCanvas = function (){\n\t\t\n\t\tif (!canvas) {\n\t\t\tcanvas = document.createElement(\"canvas\");\n\t\t\tcanvas.width = 16;\n\t\t\tcanvas.height = 16;\n\t\t}\n\t\t\n\t\treturn canvas;\n\t};\n\t\n\tvar setFaviconTag = function(url){\n\t\tremoveFaviconTag();\n\t\t\n\t\tvar link = document.createElement('link');\n\t\tlink.type = 'image/x-icon';\n\t\tlink.rel = 'icon';\n\t\tlink.href = url;\n\t\tdocument.getElementsByTagName('head')[0].appendChild(link);\n\t};\n\t\n\tvar log = function(message){\n\t\tif (window.console) window.console.log(message);\n\t};\n\t\n\tvar drawFavicon = function(num, colour) {\n\n\t\t// fallback to updating the browser title if unsupported\n\t\tif (!getCanvas().getContext || browser.ie || browser.safari || options.fallback === 'force') {\n\t\t\treturn updateTitle(num);\n\t\t}\n\t\t\n\t\tvar context = getCanvas().getContext(\"2d\");\n\t\tvar colour = colour || '#000000';\n\t\tvar num = num || 0;\n\t\tvar src = getCurrentFavicon();\n\t\t\n\t\tfaviconImage = new Image();\n\t\tfaviconImage.onload = function() {\n\t\t\t\n\t\t\t// clear canvas  \n\t\t\tcontext.clearRect(0, 0, 16, 16);\n\n\t\t\t// draw original favicon\n\t\t\tcontext.drawImage(faviconImage, 0, 0, faviconImage.width, faviconImage.height, 0, 0, 16, 16);\n\t\t\t\n\t\t\t// draw bubble over the top\n\t\t\tif (num > 0) drawBubble(context, num, colour);\n\t\t\t\n\t\t\t// refresh tag in page\n\t\t\trefreshFavicon();\n\t\t};\n\t\t\n\t\t// allow cross origin resource requests if the image is not a data:uri\n\t\t// as detailed here: https://github.com/mrdoob/three.js/issues/1305\n\t\tif (!src.match(/^data/)) {\n\t\t\tfaviconImage.crossOrigin = 'anonymous';\n\t\t}\n\t\t\n\t\tfaviconImage.src = src;\n\t};\n\t\n\tvar updateTitle = function(num) {\n\t\t\n\t\tif (options.fallback) {\n\t\t\tif (num > 0) {\n\t\t\t\tdocument.title = '('+num+') ' + originalTitle;\n\t\t\t} else {\n\t\t\t\tdocument.title = originalTitle;\n\t\t\t}\n\t\t}\n\t};\n\t\n\tvar drawBubble = function(context, num, colour) {\n\t\t\n\t\t// bubble needs to be larger for double digits\n\t\tvar len = (num+\"\").length-1;\n\t\tvar width = options.width + (6*len);\n\t\tvar w = 16-width;\n\t\tvar h = 16-options.height;\n\n\t\t// webkit seems to render fonts lighter than firefox\n\t\tcontext.font = (browser.webkit ? 'bold ' : '') + options.font;\n\t\tcontext.fillStyle = options.background;\n\t\tcontext.strokeStyle = options.background;\n\t\tcontext.lineWidth = 1;\n\t\t\n\t\t// bubble\n\t\tcontext.fillRect(w,h,width-1,options.height);\n\t\t\n\t\t// rounded left\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(w-0.5,h+1);\n\t\tcontext.lineTo(w-0.5,15);\n\t\tcontext.stroke();\n\t\t\n\t\t// rounded right\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(15.5,h+1);\n\t\tcontext.lineTo(15.5,15);\n\t\tcontext.stroke();\n\t\t\n\t\t// bottom shadow\n\t\tcontext.beginPath();\n\t\tcontext.strokeStyle = \"rgba(0,0,0,0.3)\";\n\t\tcontext.moveTo(w,16);\n\t\tcontext.lineTo(15,16);\n\t\tcontext.stroke();\n\t\t\n\t\t// number\n\t\tcontext.fillStyle = options.colour;\n\t\tcontext.textAlign = \"right\";\n\t\tcontext.textBaseline = \"top\";\n\t\t\n\t\t// unfortunately webkit/mozilla are a pixel different in text positioning\n\t\tcontext.fillText(num, 15, browser.mozilla ? 7 : 6);  \n\t};\n\t\n\tvar refreshFavicon = function(){\n\t\t// check support\n\t\tif (!getCanvas().getContext) return;\n\t\t\n\t\tsetFaviconTag(getCanvas().toDataURL());\n\t};\n\t\n\t\n\t// public methods\n\tTinycon.setOptions = function(custom){\n\t\toptions = {};\n\t\t\n\t\tfor(var key in defaults){\n\t\t\toptions[key] = custom.hasOwnProperty(key) ? custom[key] : defaults[key];\n\t\t}\n\t\treturn this;\n\t};\n\t\n\tTinycon.setImage = function(url){\n\t\tcurrentFavicon = url;\n\t\trefreshFavicon();\n\t\treturn this;\n\t};\n\t\n\tTinycon.setBubble = function(num, colour){\n\t\t\n\t\t// validate\n\t\tif(isNaN(parseFloat(num)) || !isFinite(num)) return log('Bubble must be a number');\n\t\t\n\t\tdrawFavicon(num, colour);\n\t\treturn this;\n\t};\n\t\n\tTinycon.reset = function(){\n\t\tTinycon.setImage(originalFavicon);\n\t};\n\t\n\tTinycon.setOptions(defaults);\n\n  module.exports = Tinycon;\n\n})();\n\n}\n, \"ep_etherpad-lite/static/js/excanvas.js\": function (require, exports, module) {\n// Copyright 2006 Google Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\ndocument.createElement(\"canvas\").getContext||(function(){var s=Math,j=s.round,F=s.sin,G=s.cos,V=s.abs,W=s.sqrt,k=10,v=k/2;function X(){return this.context_||(this.context_=new H(this))}var L=Array.prototype.slice;function Y(b,a){var c=L.call(arguments,2);return function(){return b.apply(a,c.concat(L.call(arguments)))}}var M={init:function(b){if(/MSIE/.test(navigator.userAgent)&&!window.opera){var a=b||document;a.createElement(\"canvas\");a.attachEvent(\"onreadystatechange\",Y(this.init_,this,a))}},init_:function(b){b.namespaces.g_vml_||\nb.namespaces.add(\"g_vml_\",\"urn:schemas-microsoft-com:vml\",\"#default#VML\");b.namespaces.g_o_||b.namespaces.add(\"g_o_\",\"urn:schemas-microsoft-com:office:office\",\"#default#VML\");if(!b.styleSheets.ex_canvas_){var a=b.createStyleSheet();a.owningElement.id=\"ex_canvas_\";a.cssText=\"canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}g_vml_\\\\:*{behavior:url(#default#VML)}g_o_\\\\:*{behavior:url(#default#VML)}\"}var c=b.getElementsByTagName(\"canvas\"),d=0;for(;d<c.length;d++)this.initElement(c[d])},\ninitElement:function(b){if(!b.getContext){b.getContext=X;b.innerHTML=\"\";b.attachEvent(\"onpropertychange\",Z);b.attachEvent(\"onresize\",$);var a=b.attributes;if(a.width&&a.width.specified)b.style.width=a.width.nodeValue+\"px\";else b.width=b.clientWidth;if(a.height&&a.height.specified)b.style.height=a.height.nodeValue+\"px\";else b.height=b.clientHeight}return b}};function Z(b){var a=b.srcElement;switch(b.propertyName){case \"width\":a.style.width=a.attributes.width.nodeValue+\"px\";a.getContext().clearRect();\nbreak;case \"height\":a.style.height=a.attributes.height.nodeValue+\"px\";a.getContext().clearRect();break}}function $(b){var a=b.srcElement;if(a.firstChild){a.firstChild.style.width=a.clientWidth+\"px\";a.firstChild.style.height=a.clientHeight+\"px\"}}M.init();var N=[],B=0;for(;B<16;B++){var C=0;for(;C<16;C++)N[B*16+C]=B.toString(16)+C.toString(16)}function I(){return[[1,0,0],[0,1,0],[0,0,1]]}function y(b,a){var c=I(),d=0;for(;d<3;d++){var f=0;for(;f<3;f++){var h=0,g=0;for(;g<3;g++)h+=b[d][g]*a[g][f];c[d][f]=\nh}}return c}function O(b,a){a.fillStyle=b.fillStyle;a.lineCap=b.lineCap;a.lineJoin=b.lineJoin;a.lineWidth=b.lineWidth;a.miterLimit=b.miterLimit;a.shadowBlur=b.shadowBlur;a.shadowColor=b.shadowColor;a.shadowOffsetX=b.shadowOffsetX;a.shadowOffsetY=b.shadowOffsetY;a.strokeStyle=b.strokeStyle;a.globalAlpha=b.globalAlpha;a.arcScaleX_=b.arcScaleX_;a.arcScaleY_=b.arcScaleY_;a.lineScale_=b.lineScale_}function P(b){var a,c=1;b=String(b);if(b.substring(0,3)==\"rgb\"){var d=b.indexOf(\"(\",3),f=b.indexOf(\")\",d+\n1),h=b.substring(d+1,f).split(\",\");a=\"#\";var g=0;for(;g<3;g++)a+=N[Number(h[g])];if(h.length==4&&b.substr(3,1)==\"a\")c=h[3]}else a=b;return{color:a,alpha:c}}function aa(b){switch(b){case \"butt\":return\"flat\";case \"round\":return\"round\";case \"square\":default:return\"square\"}}function H(b){this.m_=I();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.fillStyle=this.strokeStyle=\"#000\";this.lineWidth=1;this.lineJoin=\"miter\";this.lineCap=\"butt\";this.miterLimit=k*1;this.globalAlpha=1;this.canvas=b;\nvar a=b.ownerDocument.createElement(\"div\");a.style.width=b.clientWidth+\"px\";a.style.height=b.clientHeight+\"px\";a.style.overflow=\"hidden\";a.style.position=\"absolute\";b.appendChild(a);this.element_=a;this.lineScale_=this.arcScaleY_=this.arcScaleX_=1}var i=H.prototype;i.clearRect=function(){this.element_.innerHTML=\"\"};i.beginPath=function(){this.currentPath_=[]};i.moveTo=function(b,a){var c=this.getCoords_(b,a);this.currentPath_.push({type:\"moveTo\",x:c.x,y:c.y});this.currentX_=c.x;this.currentY_=c.y};\ni.lineTo=function(b,a){var c=this.getCoords_(b,a);this.currentPath_.push({type:\"lineTo\",x:c.x,y:c.y});this.currentX_=c.x;this.currentY_=c.y};i.bezierCurveTo=function(b,a,c,d,f,h){var g=this.getCoords_(f,h),l=this.getCoords_(b,a),e=this.getCoords_(c,d);Q(this,l,e,g)};function Q(b,a,c,d){b.currentPath_.push({type:\"bezierCurveTo\",cp1x:a.x,cp1y:a.y,cp2x:c.x,cp2y:c.y,x:d.x,y:d.y});b.currentX_=d.x;b.currentY_=d.y}i.quadraticCurveTo=function(b,a,c,d){var f=this.getCoords_(b,a),h=this.getCoords_(c,d),g={x:this.currentX_+\n0.6666666666666666*(f.x-this.currentX_),y:this.currentY_+0.6666666666666666*(f.y-this.currentY_)};Q(this,g,{x:g.x+(h.x-this.currentX_)/3,y:g.y+(h.y-this.currentY_)/3},h)};i.arc=function(b,a,c,d,f,h){c*=k;var g=h?\"at\":\"wa\",l=b+G(d)*c-v,e=a+F(d)*c-v,m=b+G(f)*c-v,r=a+F(f)*c-v;if(l==m&&!h)l+=0.125;var n=this.getCoords_(b,a),o=this.getCoords_(l,e),q=this.getCoords_(m,r);this.currentPath_.push({type:g,x:n.x,y:n.y,radius:c,xStart:o.x,yStart:o.y,xEnd:q.x,yEnd:q.y})};i.rect=function(b,a,c,d){this.moveTo(b,\na);this.lineTo(b+c,a);this.lineTo(b+c,a+d);this.lineTo(b,a+d);this.closePath()};i.strokeRect=function(b,a,c,d){var f=this.currentPath_;this.beginPath();this.moveTo(b,a);this.lineTo(b+c,a);this.lineTo(b+c,a+d);this.lineTo(b,a+d);this.closePath();this.stroke();this.currentPath_=f};i.fillRect=function(b,a,c,d){var f=this.currentPath_;this.beginPath();this.moveTo(b,a);this.lineTo(b+c,a);this.lineTo(b+c,a+d);this.lineTo(b,a+d);this.closePath();this.fill();this.currentPath_=f};i.createLinearGradient=function(b,\na,c,d){var f=new D(\"gradient\");f.x0_=b;f.y0_=a;f.x1_=c;f.y1_=d;return f};i.createRadialGradient=function(b,a,c,d,f,h){var g=new D(\"gradientradial\");g.x0_=b;g.y0_=a;g.r0_=c;g.x1_=d;g.y1_=f;g.r1_=h;return g};i.drawImage=function(b){var a,c,d,f,h,g,l,e,m=b.runtimeStyle.width,r=b.runtimeStyle.height;b.runtimeStyle.width=\"auto\";b.runtimeStyle.height=\"auto\";var n=b.width,o=b.height;b.runtimeStyle.width=m;b.runtimeStyle.height=r;if(arguments.length==3){a=arguments[1];c=arguments[2];h=g=0;l=d=n;e=f=o}else if(arguments.length==\n5){a=arguments[1];c=arguments[2];d=arguments[3];f=arguments[4];h=g=0;l=n;e=o}else if(arguments.length==9){h=arguments[1];g=arguments[2];l=arguments[3];e=arguments[4];a=arguments[5];c=arguments[6];d=arguments[7];f=arguments[8]}else throw Error(\"Invalid number of arguments\");var q=this.getCoords_(a,c),t=[];t.push(\" <g_vml_:group\",' coordsize=\"',k*10,\",\",k*10,'\"',' coordorigin=\"0,0\"',' style=\"width:',10,\"px;height:\",10,\"px;position:absolute;\");if(this.m_[0][0]!=1||this.m_[0][1]){var E=[];E.push(\"M11=\",\nthis.m_[0][0],\",\",\"M12=\",this.m_[1][0],\",\",\"M21=\",this.m_[0][1],\",\",\"M22=\",this.m_[1][1],\",\",\"Dx=\",j(q.x/k),\",\",\"Dy=\",j(q.y/k),\"\");var p=q,z=this.getCoords_(a+d,c),w=this.getCoords_(a,c+f),x=this.getCoords_(a+d,c+f);p.x=s.max(p.x,z.x,w.x,x.x);p.y=s.max(p.y,z.y,w.y,x.y);t.push(\"padding:0 \",j(p.x/k),\"px \",j(p.y/k),\"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(\",E.join(\"\"),\", sizingmethod='clip');\")}else t.push(\"top:\",j(q.y/k),\"px;left:\",j(q.x/k),\"px;\");t.push(' \">','<g_vml_:image src=\"',b.src,\n'\"',' style=\"width:',k*d,\"px;\",\" height:\",k*f,'px;\"',' cropleft=\"',h/n,'\"',' croptop=\"',g/o,'\"',' cropright=\"',(n-h-l)/n,'\"',' cropbottom=\"',(o-g-e)/o,'\"',\" />\",\"</g_vml_:group>\");this.element_.insertAdjacentHTML(\"BeforeEnd\",t.join(\"\"))};i.stroke=function(b){var a=[],c=P(b?this.fillStyle:this.strokeStyle),d=c.color,f=c.alpha*this.globalAlpha;a.push(\"<g_vml_:shape\",' filled=\"',!!b,'\"',' style=\"position:absolute;width:',10,\"px;height:\",10,'px;\"',' coordorigin=\"0 0\" coordsize=\"',k*10,\" \",k*10,'\"',' stroked=\"',\n!b,'\"',' path=\"');var h={x:null,y:null},g={x:null,y:null},l=0;for(;l<this.currentPath_.length;l++){var e=this.currentPath_[l];switch(e.type){case \"moveTo\":a.push(\" m \",j(e.x),\",\",j(e.y));break;case \"lineTo\":a.push(\" l \",j(e.x),\",\",j(e.y));break;case \"close\":a.push(\" x \");e=null;break;case \"bezierCurveTo\":a.push(\" c \",j(e.cp1x),\",\",j(e.cp1y),\",\",j(e.cp2x),\",\",j(e.cp2y),\",\",j(e.x),\",\",j(e.y));break;case \"at\":case \"wa\":a.push(\" \",e.type,\" \",j(e.x-this.arcScaleX_*e.radius),\",\",j(e.y-this.arcScaleY_*e.radius),\n\" \",j(e.x+this.arcScaleX_*e.radius),\",\",j(e.y+this.arcScaleY_*e.radius),\" \",j(e.xStart),\",\",j(e.yStart),\" \",j(e.xEnd),\",\",j(e.yEnd));break}if(e){if(h.x==null||e.x<h.x)h.x=e.x;if(g.x==null||e.x>g.x)g.x=e.x;if(h.y==null||e.y<h.y)h.y=e.y;if(g.y==null||e.y>g.y)g.y=e.y}}a.push(' \">');if(b)if(typeof this.fillStyle==\"object\"){var m=this.fillStyle,r=0,n={x:0,y:0},o=0,q=1;if(m.type_==\"gradient\"){var t=m.x1_/this.arcScaleX_,E=m.y1_/this.arcScaleY_,p=this.getCoords_(m.x0_/this.arcScaleX_,m.y0_/this.arcScaleY_),\nz=this.getCoords_(t,E);r=Math.atan2(z.x-p.x,z.y-p.y)*180/Math.PI;if(r<0)r+=360;if(r<1.0E-6)r=0}else{var p=this.getCoords_(m.x0_,m.y0_),w=g.x-h.x,x=g.y-h.y;n={x:(p.x-h.x)/w,y:(p.y-h.y)/x};w/=this.arcScaleX_*k;x/=this.arcScaleY_*k;var R=s.max(w,x);o=2*m.r0_/R;q=2*m.r1_/R-o}var u=m.colors_;u.sort(function(ba,ca){return ba.offset-ca.offset});var J=u.length,da=u[0].color,ea=u[J-1].color,fa=u[0].alpha*this.globalAlpha,ga=u[J-1].alpha*this.globalAlpha,S=[],l=0;for(;l<J;l++){var T=u[l];S.push(T.offset*q+\no+\" \"+T.color)}a.push('<g_vml_:fill type=\"',m.type_,'\"',' method=\"none\" focus=\"100%\"',' color=\"',da,'\"',' color2=\"',ea,'\"',' colors=\"',S.join(\",\"),'\"',' opacity=\"',ga,'\"',' g_o_:opacity2=\"',fa,'\"',' angle=\"',r,'\"',' focusposition=\"',n.x,\",\",n.y,'\" />')}else a.push('<g_vml_:fill color=\"',d,'\" opacity=\"',f,'\" />');else{var K=this.lineScale_*this.lineWidth;if(K<1)f*=K;a.push(\"<g_vml_:stroke\",' opacity=\"',f,'\"',' joinstyle=\"',this.lineJoin,'\"',' miterlimit=\"',this.miterLimit,'\"',' endcap=\"',aa(this.lineCap),\n'\"',' weight=\"',K,'px\"',' color=\"',d,'\" />')}a.push(\"</g_vml_:shape>\");this.element_.insertAdjacentHTML(\"beforeEnd\",a.join(\"\"))};i.fill=function(){this.stroke(true)};i.closePath=function(){this.currentPath_.push({type:\"close\"})};i.getCoords_=function(b,a){var c=this.m_;return{x:k*(b*c[0][0]+a*c[1][0]+c[2][0])-v,y:k*(b*c[0][1]+a*c[1][1]+c[2][1])-v}};i.save=function(){var b={};O(this,b);this.aStack_.push(b);this.mStack_.push(this.m_);this.m_=y(I(),this.m_)};i.restore=function(){O(this.aStack_.pop(),\nthis);this.m_=this.mStack_.pop()};function ha(b){var a=0;for(;a<3;a++){var c=0;for(;c<2;c++)if(!isFinite(b[a][c])||isNaN(b[a][c]))return false}return true}function A(b,a,c){if(!!ha(a)){b.m_=a;if(c)b.lineScale_=W(V(a[0][0]*a[1][1]-a[0][1]*a[1][0]))}}i.translate=function(b,a){A(this,y([[1,0,0],[0,1,0],[b,a,1]],this.m_),false)};i.rotate=function(b){var a=G(b),c=F(b);A(this,y([[a,c,0],[-c,a,0],[0,0,1]],this.m_),false)};i.scale=function(b,a){this.arcScaleX_*=b;this.arcScaleY_*=a;A(this,y([[b,0,0],[0,a,\n0],[0,0,1]],this.m_),true)};i.transform=function(b,a,c,d,f,h){A(this,y([[b,a,0],[c,d,0],[f,h,1]],this.m_),true)};i.setTransform=function(b,a,c,d,f,h){A(this,[[b,a,0],[c,d,0],[f,h,1]],true)};i.clip=function(){};i.arcTo=function(){};i.createPattern=function(){return new U};function D(b){this.type_=b;this.r1_=this.y1_=this.x1_=this.r0_=this.y0_=this.x0_=0;this.colors_=[]}D.prototype.addColorStop=function(b,a){a=P(a);this.colors_.push({offset:b,color:a.color,alpha:a.alpha})};function U(){}G_vmlCanvasManager=\nM;CanvasRenderingContext2D=H;CanvasGradient=D;CanvasPattern=U})();\n\n}\n, \"ep_etherpad-lite/static/js/farbtastic.js\": function (require, exports, module) {\n// Farbtastic 2.0 alpha\n(function ($) {\n  \nvar __debug = false;\nvar __factor = 0.8;\n\n$.fn.farbtastic = function (options) {\n  $.farbtastic(this, options);\n  return this;\n};\n\n$.farbtastic = function (container, options) {\n  var container = $(container)[0];\n  return container.farbtastic || (container.farbtastic = new $._farbtastic(container, options));\n}\n\n$._farbtastic = function (container, options) {\n  var fb = this;\n  \n  /////////////////////////////////////////////////////\n\n  /**\n   * Link to the given element(s) or callback.\n   */\n  fb.linkTo = function (callback) {\n    // Unbind previous nodes\n    if (typeof fb.callback == 'object') {\n      $(fb.callback).unbind('keyup', fb.updateValue);\n    }\n\n    // Reset color\n    fb.color = null;\n\n    // Bind callback or elements\n    if (typeof callback == 'function') {\n      fb.callback = callback;\n    }\n    else if (typeof callback == 'object' || typeof callback == 'string') {\n      fb.callback = $(callback);\n      fb.callback.bind('keyup', fb.updateValue);\n      if (fb.callback[0].value) {\n        fb.setColor(fb.callback[0].value);\n      }\n    }\n    return this;\n  }\n  fb.updateValue = function (event) {\n    if (this.value && this.value != fb.color) {\n      fb.setColor(this.value);\n    }\n  }\n\n  /**\n   * Change color with HTML syntax #123456\n   */\n  fb.setColor = function (color) {\n    var unpack = fb.unpack(color);\n    if (fb.color != color && unpack) {\n      fb.color = color;\n      fb.rgb = unpack;\n      fb.hsl = fb.RGBToHSL(fb.rgb);\n      fb.updateDisplay();\n    }\n    return this;\n  }\n\n  /**\n   * Change color with HSL triplet [0..1, 0..1, 0..1]\n   */\n  fb.setHSL = function (hsl) {\n    fb.hsl = hsl;\n\n    var convertedHSL = [hsl[0]]\n    convertedHSL[1] = hsl[1]*__factor+((1-__factor)/2);\n    convertedHSL[2] = hsl[2]*__factor+((1-__factor)/2);\n\n    fb.rgb = fb.HSLToRGB(convertedHSL);\n    fb.color = fb.pack(fb.rgb);\n    fb.updateDisplay();\n    return this;\n  }\n\n  /////////////////////////////////////////////////////\n  //excanvas-compatible building of canvases\n  fb._makeCanvas = function(className){\n    var c = document.createElement('canvas');\n    if (!c.getContext) { // excanvas hack\n        c = window.G_vmlCanvasManager.initElement(c);\n        c.getContext(); //this creates the excanvas children\n    }\n    $(c).addClass(className);\n    return c;\n  }\n\n  /**\n   * Initialize the color picker widget.\n   */\n  fb.initWidget = function () {\n\n    // Insert markup and size accordingly.\n    var dim = {\n      width: options.width,\n      height: options.width\n    };\n    $(container)\n      .html(\n        '<div class=\"farbtastic\" style=\"position: relative\">' +\n          '<div class=\"farbtastic-solid\"></div>' +\n        '</div>'\n      )\n      .children('.farbtastic')\n        .append(fb._makeCanvas('farbtastic-mask'))\n        .append(fb._makeCanvas('farbtastic-overlay'))\n      .end()\n      .find('*').attr(dim).css(dim).end()\n      .find('div>*').css('position', 'absolute');\n\n    // Determine layout\n    fb.radius = (options.width - options.wheelWidth) / 2 - 1;\n    fb.square = Math.floor((fb.radius - options.wheelWidth / 2) * 0.7) - 1;\n    fb.mid = Math.floor(options.width / 2);\n    fb.markerSize = options.wheelWidth * 0.3;\n    fb.solidFill = $('.farbtastic-solid', container).css({\n      width: fb.square * 2 - 1,\n      height: fb.square * 2 - 1,\n      left: fb.mid - fb.square,\n      top: fb.mid - fb.square\n    });\n\n    // Set up drawing context.\n    fb.cnvMask = $('.farbtastic-mask', container);\n    fb.ctxMask = fb.cnvMask[0].getContext('2d');\n    fb.cnvOverlay = $('.farbtastic-overlay', container);\n    fb.ctxOverlay = fb.cnvOverlay[0].getContext('2d');\n    fb.ctxMask.translate(fb.mid, fb.mid);\n    fb.ctxOverlay.translate(fb.mid, fb.mid);\n    \n    // Draw widget base layers.\n    fb.drawCircle();\n    fb.drawMask();\n  }\n\n  /**\n   * Draw the color wheel.\n   */\n  fb.drawCircle = function () {\n    var tm = +(new Date());\n    // Draw a hue circle with a bunch of gradient-stroked beziers.\n    // Have to use beziers, as gradient-stroked arcs don't work.\n    var n = 24,\n        r = fb.radius,\n        w = options.wheelWidth,\n        nudge = 8 / r / n * Math.PI, // Fudge factor for seams.\n        m = fb.ctxMask,\n        angle1 = 0, color1, d1;\n    m.save();\n    m.lineWidth = w / r;\n    m.scale(r, r);\n    // Each segment goes from angle1 to angle2.\n    for (var i = 0; i <= n; ++i) {\n      var d2 = i / n,\n          angle2 = d2 * Math.PI * 2,\n          // Endpoints\n          x1 = Math.sin(angle1), y1 = -Math.cos(angle1);\n          x2 = Math.sin(angle2), y2 = -Math.cos(angle2),\n          // Midpoint chosen so that the endpoints are tangent to the circle.\n          am = (angle1 + angle2) / 2,\n          tan = 1 / Math.cos((angle2 - angle1) / 2),\n          xm = Math.sin(am) * tan, ym = -Math.cos(am) * tan,\n          // New color\n          color2 = fb.pack(fb.HSLToRGB([d2, 1, 0.5]));\n      if (i > 0) {\n        if (browser.msie) {\n          // IE's gradient calculations mess up the colors. Correct along the diagonals.\n          var corr = (1 + Math.min(Math.abs(Math.tan(angle1)), Math.abs(Math.tan(Math.PI / 2 - angle1)))) / n;\n          color1 = fb.pack(fb.HSLToRGB([d1 - 0.15 * corr, 1, 0.5]));\n          color2 = fb.pack(fb.HSLToRGB([d2 + 0.15 * corr, 1, 0.5]));\n          // Create gradient fill between the endpoints.\n          var grad = m.createLinearGradient(x1, y1, x2, y2);\n          grad.addColorStop(0, color1);\n          grad.addColorStop(1, color2);\n          m.fillStyle = grad;\n          // Draw quadratic curve segment as a fill.\n          var r1 = (r + w / 2) / r, r2 = (r - w / 2) / r; // inner/outer radius.\n          m.beginPath();\n          m.moveTo(x1 * r1, y1 * r1);\n          m.quadraticCurveTo(xm * r1, ym * r1, x2 * r1, y2 * r1);\n          m.lineTo(x2 * r2, y2 * r2);\n          m.quadraticCurveTo(xm * r2, ym * r2, x1 * r2, y1 * r2);\n          m.fill();\n        }\n        else {\n          // Create gradient fill between the endpoints.\n          var grad = m.createLinearGradient(x1, y1, x2, y2);\n          grad.addColorStop(0, color1);\n          grad.addColorStop(1, color2);\n          m.strokeStyle = grad;\n          // Draw quadratic curve segment.\n          m.beginPath();\n          m.moveTo(x1, y1);\n          m.quadraticCurveTo(xm, ym, x2, y2);\n          m.stroke();\n        }\n      }\n      // Prevent seams where curves join.\n      angle1 = angle2 - nudge; color1 = color2; d1 = d2;\n    }\n    m.restore();\n    __debug && $('body').append('<div>drawCircle '+ (+(new Date()) - tm) +'ms');\n  };\n  \n  /**\n   * Draw the saturation/luminance mask.\n   */\n  fb.drawMask = function () {\n    var tm = +(new Date());\n\n    // Iterate over sat/lum space and calculate appropriate mask pixel values.\n    var size = fb.square * 2, sq = fb.square;\n    function calculateMask(sizex, sizey, outputPixel) {\n      var isx = 1 / sizex, isy = 1 / sizey;\n      for (var y = 0; y <= sizey; ++y) {\n        var l = 1 - y * isy;\n        for (var x = 0; x <= sizex; ++x) {\n          var s = 1 - x * isx;\n          // From sat/lum to alpha and color (grayscale)\n          var a = 1 - 2 * Math.min(l * s, (1 - l) * s);\n          var c = (a > 0) ? ((2 * l - 1 + a) * .5 / a) : 0;\n\n          a = a*__factor+(1-__factor)/2;\n          c = c*__factor+(1-__factor)/2;\n\n          outputPixel(x, y, c, a);\n        }\n      }      \n    }\n \n    // Method #1: direct pixel access (new Canvas).\n    if (fb.ctxMask.getImageData) {\n      // Create half-resolution buffer.\n      var sz = Math.floor(size / 2);\n      var buffer = document.createElement('canvas');\n      buffer.width = buffer.height = sz + 1;\n      var ctx = buffer.getContext('2d');\n      var frame = ctx.getImageData(0, 0, sz + 1, sz + 1);\n\n      var i = 0;\n      calculateMask(sz, sz, function (x, y, c, a) {\n        frame.data[i++] = frame.data[i++] = frame.data[i++] = c * 255;\n        frame.data[i++] = a * 255;\n      });\n\n      ctx.putImageData(frame, 0, 0);\n      fb.ctxMask.drawImage(buffer, 0, 0, sz + 1, sz + 1, -sq, -sq, sq * 2, sq * 2);\n    }\n    // Method #2: drawing commands (old Canvas).\n    else if (!browser.msie) {\n      // Render directly at half-resolution\n      var sz = Math.floor(size / 2);\n      calculateMask(sz, sz, function (x, y, c, a) {\n        c = Math.round(c * 255);\n        fb.ctxMask.fillStyle = 'rgba(' + c + ', ' + c + ', ' + c + ', ' + a +')';\n        fb.ctxMask.fillRect(x * 2 - sq - 1, y * 2 - sq - 1, 2, 2);\n      });\n    }\n    // Method #3: vertical DXImageTransform gradient strips (IE).\n    else {\n      var cache_last, cache, w = 6; // Each strip is 6 pixels wide.\n      var sizex = Math.floor(size / w);\n      // 6 vertical pieces of gradient per strip.\n      calculateMask(sizex, 6, function (x, y, c, a) {\n        if (x == 0) {\n          cache_last = cache;\n          cache = [];\n        }\n        c = Math.round(c * 255);\n        a = Math.round(a * 255);\n        // We can only start outputting gradients once we have two rows of pixels.\n        if (y > 0) {\n          var c_last = cache_last[x][0],\n              a_last = cache_last[x][1],\n              color1 = fb.packDX(c_last, a_last),\n              color2 = fb.packDX(c, a),\n              y1 = Math.round(fb.mid + ((y - 1) * .333 - 1) * sq),\n              y2 = Math.round(fb.mid + (y * .333 - 1) * sq);\n          $('<div>').css({\n            position: 'absolute',\n            filter: \"progid:DXImageTransform.Microsoft.Gradient(StartColorStr=\"+ color1 +\", EndColorStr=\"+ color2 +\", GradientType=0)\",\n            top: y1,\n            height: y2 - y1,\n            // Avoid right-edge sticking out.\n            left: fb.mid + (x * w - sq - 1),\n            width: w - (x == sizex ? Math.round(w / 2) : 0)\n          }).appendTo(fb.cnvMask);\n        }\n        cache.push([c, a]);\n      });\n    }    \n    __debug && $('body').append('<div>drawMask '+ (+(new Date()) - tm) +'ms');\n  }\n\n  /**\n   * Draw the selection markers.\n   */\n  fb.drawMarkers = function () {\n    // Determine marker dimensions\n    var sz = options.width, lw = Math.ceil(fb.markerSize / 4), r = fb.markerSize - lw + 1;\n    var angle = fb.hsl[0] * 6.28,\n        x1 =  Math.sin(angle) * fb.radius,\n        y1 = -Math.cos(angle) * fb.radius,\n        x2 = 2 * fb.square * (.5 - fb.hsl[1]),\n        y2 = 2 * fb.square * (.5 - fb.hsl[2]),\n        c1 = fb.invert ? '#fff' : '#000',\n        c2 = fb.invert ? '#000' : '#fff';\n    var circles = [\n      { x: x1, y: y1, r: r,             c: '#000', lw: lw + 1 },\n      { x: x1, y: y1, r: fb.markerSize, c: '#fff', lw: lw },\n      { x: x2, y: y2, r: r,             c: c2,     lw: lw + 1 },\n      { x: x2, y: y2, r: fb.markerSize, c: c1,     lw: lw },\n    ];\n\n    // Update the overlay canvas.\n    fb.ctxOverlay.clearRect(-fb.mid, -fb.mid, sz, sz);\n    for (i in circles) {\n      var c = circles[i];\n      fb.ctxOverlay.lineWidth = c.lw;\n      fb.ctxOverlay.strokeStyle = c.c;\n      fb.ctxOverlay.beginPath();\n      fb.ctxOverlay.arc(c.x, c.y, c.r, 0, Math.PI * 2, true);\n      fb.ctxOverlay.stroke();\n    }\n  }\n\n  /**\n   * Update the markers and styles\n   */\n  fb.updateDisplay = function () {\n    // Determine whether labels/markers should invert.\n    fb.invert = (fb.rgb[0] * 0.3 + fb.rgb[1] * .59 + fb.rgb[2] * .11) <= 0.6;\n\n    // Update the solid background fill.\n    fb.solidFill.css('backgroundColor', fb.pack(fb.HSLToRGB([fb.hsl[0], 1, 0.5])));\n\n    // Draw markers\n    fb.drawMarkers();\n    \n    // Linked elements or callback\n    if (typeof fb.callback == 'object') {\n      // Set background/foreground color\n      $(fb.callback).css({\n        backgroundColor: fb.color,\n        color: fb.invert ? '#fff' : '#000'\n      });\n\n      // Change linked value\n      $(fb.callback).each(function() {\n        if ((typeof this.value == 'string') && this.value != fb.color) {\n          this.value = fb.color;\n        }\n      });\n    }\n    else if (typeof fb.callback == 'function') {\n      fb.callback.call(fb, fb.color);\n    }\n  }\n  \n  /**\n   * Helper for returning coordinates relative to the center.\n   */\n  fb.widgetCoords = function (event) {\n    return {\n      x: event.pageX - fb.offset.left - fb.mid,    \n      y: event.pageY - fb.offset.top - fb.mid\n    };    \n  }\n\n  /**\n   * Mousedown handler\n   */\n  fb.mousedown = function (event) {\n    // Capture mouse\n    if (!$._farbtastic.dragging) {\n      $(document).bind('mousemove', fb.mousemove).bind('mouseup', fb.mouseup);\n      $._farbtastic.dragging = true;\n    }\n\n    // Update the stored offset for the widget.\n    fb.offset = $(container).offset();\n\n    // Check which area is being dragged\n    var pos = fb.widgetCoords(event);\n    fb.circleDrag = Math.max(Math.abs(pos.x), Math.abs(pos.y)) > (fb.square + 2);\n\n    // Process\n    fb.mousemove(event);\n    return false;\n  }\n\n  /**\n   * Mousemove handler\n   */\n  fb.mousemove = function (event) {\n    // Get coordinates relative to color picker center\n    var pos = fb.widgetCoords(event);\n\n    // Set new HSL parameters\n    if (fb.circleDrag) {\n      var hue = Math.atan2(pos.x, -pos.y) / 6.28;\n      fb.setHSL([(hue + 1) % 1, fb.hsl[1], fb.hsl[2]]);\n    }\n    else {\n      var sat = Math.max(0, Math.min(1, -(pos.x / fb.square / 2) + .5));\n      var lum = Math.max(0, Math.min(1, -(pos.y / fb.square / 2) + .5));\n      fb.setHSL([fb.hsl[0], sat, lum]);\n    }\n    return false;\n  }\n\n  /**\n   * Mouseup handler\n   */\n  fb.mouseup = function () {\n    // Uncapture mouse\n    $(document).unbind('mousemove', fb.mousemove);\n    $(document).unbind('mouseup', fb.mouseup);\n    $._farbtastic.dragging = false;\n  }\n\n  /* Various color utility functions */\n  fb.dec2hex = function (x) {\n    return (x < 16 ? '0' : '') + x.toString(16);\n  }\n\n  fb.packDX = function (c, a) {\n    return '#' + fb.dec2hex(a) + fb.dec2hex(c) + fb.dec2hex(c) + fb.dec2hex(c);\n  };\n  \n  fb.pack = function (rgb) {\n    var r = Math.round(rgb[0] * 255);\n    var g = Math.round(rgb[1] * 255);\n    var b = Math.round(rgb[2] * 255);\n    return '#' + fb.dec2hex(r) + fb.dec2hex(g) + fb.dec2hex(b);\n  };\n\n  fb.unpack = function (color) {\n    if (color.length == 7) {\n      function x(i) {\n        return parseInt(color.substring(i, i + 2), 16) / 255;\n      }\n      return [ x(1), x(3), x(5) ];\n    }\n    else if (color.length == 4) {\n      function x(i) {\n        return parseInt(color.substring(i, i + 1), 16) / 15;\n      }\n      return [ x(1), x(2), x(3) ];\n    }\n  };\n\n  fb.HSLToRGB = function (hsl) {\n    var m1, m2, r, g, b;\n    var h = hsl[0], s = hsl[1], l = hsl[2];\n    m2 = (l <= 0.5) ? l * (s + 1) : l + s - l * s;\n    m1 = l * 2 - m2;\n    return [\n      this.hueToRGB(m1, m2, h + 0.33333),\n      this.hueToRGB(m1, m2, h),\n      this.hueToRGB(m1, m2, h - 0.33333)\n    ];\n  };\n\n  fb.hueToRGB = function (m1, m2, h) {\n    h = (h + 1) % 1;\n    if (h * 6 < 1) return m1 + (m2 - m1) * h * 6;\n    if (h * 2 < 1) return m2;\n    if (h * 3 < 2) return m1 + (m2 - m1) * (0.66666 - h) * 6;\n    return m1;\n  };\n\n  fb.RGBToHSL = function (rgb) {\n    var r = rgb[0], g = rgb[1], b = rgb[2],\n        min = Math.min(r, g, b),\n        max = Math.max(r, g, b),\n        delta = max - min,\n        h = 0,\n        s = 0,\n        l = (min + max) / 2;\n    if (l > 0 && l < 1) {\n      s = delta / (l < 0.5 ? (2 * l) : (2 - 2 * l));\n    }\n    if (delta > 0) {\n      if (max == r && max != g) h += (g - b) / delta;\n      if (max == g && max != b) h += (2 + (b - r) / delta);\n      if (max == b && max != r) h += (4 + (r - g) / delta);\n      h /= 6;\n    }\n    return [h, s, l];\n  };\n\n  // Parse options.\n  if (!options.callback) {\n    options = { callback: options };\n  }\n  options = $.extend({\n    width: 300,\n    wheelWidth: (options.width || 300) / 10,\n    callback: null\n  }, options);\n\n  // Initialize.\n  fb.initWidget();\n\n  // Install mousedown handler (the others are set on the document on-demand)\n  $('canvas.farbtastic-overlay', container).mousedown(fb.mousedown);\n\n  // Set linked elements/callback\n  if (options.callback) {\n    fb.linkTo(options.callback);\n  }\n  // Set to gray.\n  fb.setColor('#808080');\n}\n\n})(jQuery);\n\n}\n, \"ep_etherpad-lite/static/js/pad\": null\n, \"ep_etherpad-lite/static/js/pad_utils\": null\n, \"ep_etherpad-lite/static/js/browser\": null\n, \"ep_etherpad-lite/static/js/pad_cookie\": null\n, \"ep_etherpad-lite/static/js/pad_editor\": null\n, \"ep_etherpad-lite/static/js/pad_editbar\": null\n, \"ep_etherpad-lite/static/js/pad_docbar\": null\n, \"ep_etherpad-lite/static/js/pad_modals\": null\n, \"ep_etherpad-lite/static/js/ace\": null\n, \"ep_etherpad-lite/static/js/collab_client\": null\n, \"ep_etherpad-lite/static/js/pad_userlist\": null\n, \"ep_etherpad-lite/static/js/pad_impexp\": null\n, \"ep_etherpad-lite/static/js/pad_savedrevs\": null\n, \"ep_etherpad-lite/static/js/pad_connectionstatus\": null\n, \"ep_etherpad-lite/static/js/chat\": null\n, \"ep_etherpad-lite/static/js/gritter\": null\n, \"tinycon/tinycon\": null\n, \"ep_etherpad-lite/static/js/excanvas\": null\n, \"ep_etherpad-lite/static/js/farbtastic\": null\n, \"ep_etherpad-lite/static/js/pad/index.js\": null\n, \"ep_etherpad-lite/static/js/pad_utils/index.js\": null\n, \"ep_etherpad-lite/static/js/browser/index.js\": null\n, \"ep_etherpad-lite/static/js/pad_cookie/index.js\": null\n, \"ep_etherpad-lite/static/js/pad_editor/index.js\": null\n, \"ep_etherpad-lite/static/js/pad_editbar/index.js\": null\n, \"ep_etherpad-lite/static/js/pad_docbar/index.js\": null\n, \"ep_etherpad-lite/static/js/pad_modals/index.js\": null\n, \"ep_etherpad-lite/static/js/ace/index.js\": null\n, \"ep_etherpad-lite/static/js/collab_client/index.js\": null\n, \"ep_etherpad-lite/static/js/pad_userlist/index.js\": null\n, \"ep_etherpad-lite/static/js/pad_impexp/index.js\": null\n, \"ep_etherpad-lite/static/js/pad_savedrevs/index.js\": null\n, \"ep_etherpad-lite/static/js/pad_connectionstatus/index.js\": null\n, \"ep_etherpad-lite/static/js/chat/index.js\": null\n, \"ep_etherpad-lite/static/js/gritter/index.js\": null\n, \"tinycon/tinycon/index.js\": null\n, \"ep_etherpad-lite/static/js/excanvas/index.js\": null\n, \"ep_etherpad-lite/static/js/farbtastic/index.js\": null\n});\n"
          },
          "redirectURL": "",
          "headersSize": 398,
          "bodySize": 0,
          "_transferSize": 398
        },
        "cache": {},
        "timings": {
          "blocked": 616.158999999243,
          "dns": -1,
          "connect": -1,
          "send": 0.13600000056601402,
          "wait": 530.9900000002011,
          "receive": 5.873999999494799,
          "ssl": -1
        },
        "connection": "3652",
        "pageref": "page_2"
      },
      {
        "startedDateTime": "2015-06-09T16:53:03.687Z",
        "time": 1140.1719999994384,
        "request": {
          "method": "GET",
          "url": "http://localhost:9001/javascripts/lib/ep_etherpad-lite/static/js/ace2_common.js?callback=require.define",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "DNT",
              "value": "1"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, sdch"
            },
            {
              "name": "Host",
              "value": "localhost:9001"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.8,de;q=0.6"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.81 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Referer",
              "value": "http://localhost:9001/p/bla"
            },
            {
              "name": "Cookie",
              "value": "token=t.ltaoBcvzTd2Qbc9Uqjas; express_sid=s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "If-Modified-Since",
              "value": "Wed, 03 Jun 2015 18:13:43 GMT"
            }
          ],
          "queryString": [
            {
              "name": "callback",
              "value": "require.define"
            }
          ],
          "cookies": [
            {
              "name": "token",
              "value": "t.ltaoBcvzTd2Qbc9Uqjas",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "express_sid",
              "value": "s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo",
              "expires": null,
              "httpOnly": false,
              "secure": false
            }
          ],
          "headersSize": 596,
          "bodySize": 0
        },
        "response": {
          "status": 304,
          "statusText": "Not Modified",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "date",
              "value": "Tue, 09 Jun 2015 16:53:04 GMT"
            },
            {
              "name": "x-content-type-options",
              "value": "nosniff"
            },
            {
              "name": "last-modified",
              "value": "Wed, 03 Jun 2015 18:13:43 GMT"
            },
            {
              "name": "Server",
              "value": "Etherpad d11c92c (http://etherpad.org)"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            },
            {
              "name": "content-type",
              "value": "application/javascript; charset=utf-8"
            },
            {
              "name": "cache-control",
              "value": "max-age=21600"
            },
            {
              "name": "X-UA-Compatible",
              "value": "IE=Edge,chrome=1"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "expires",
              "value": "Tue, 09 Jun 2015 22:53:04 GMT"
            }
          ],
          "cookies": [],
          "content": {
            "size": 396186,
            "mimeType": "application/javascript",
            "text": "require.define({\n  \"ep_etherpad-lite/static/js/ace2_common.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code.\n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar Security = require('./security');\n\nfunction isNodeText(node)\n{\n  return (node.nodeType == 3);\n}\n\nfunction object(o)\n{\n  var f = function(){};\n  f.prototype = o;\n  return new f();\n}\n\nfunction getAssoc(obj, name)\n{\n  return obj[\"_magicdom_\" + name];\n}\n\nfunction setAssoc(obj, name, value)\n{\n  // note that in IE designMode, properties of a node can get\n  // copied to new nodes that are spawned during editing; also,\n  // properties representable in HTML text can survive copy-and-paste\n  obj[\"_magicdom_\" + name] = value;\n}\n\n// \"func\" is a function over 0..(numItems-1) that is monotonically\n// \"increasing\" with index (false, then true).  Finds the boundary\n// between false and true, a number between 0 and numItems inclusive.\n\n\nfunction binarySearch(numItems, func)\n{\n  if (numItems < 1) return 0;\n  if (func(0)) return 0;\n  if (!func(numItems - 1)) return numItems;\n  var low = 0; // func(low) is always false\n  var high = numItems - 1; // func(high) is always true\n  while ((high - low) > 1)\n  {\n    var x = Math.floor((low + high) / 2); // x != low, x != high\n    if (func(x)) high = x;\n    else low = x;\n  }\n  return high;\n}\n\nfunction binarySearchInfinite(expectedLength, func)\n{\n  var i = 0;\n  while (!func(i)) i += expectedLength;\n  return binarySearch(i, func);\n}\n\nfunction htmlPrettyEscape(str)\n{\n  return Security.escapeHTML(str).replace(/\\r?\\n/g, '\\\\n');\n}\n\nvar noop = function(){};\n\nexports.isNodeText = isNodeText;\nexports.object = object;\nexports.getAssoc = getAssoc;\nexports.setAssoc = setAssoc;\nexports.binarySearch = binarySearch;\nexports.binarySearchInfinite = binarySearchInfinite;\nexports.htmlPrettyEscape = htmlPrettyEscape;\nexports.noop = noop;\n\n}\n, \"ep_etherpad-lite/static/js/browser.js\": function (require, exports, module) {\n/*!\n  * Bowser - a browser detector\n  * https://github.com/ded/bowser\n  * MIT License | (c) Dustin Diaz 2014\n  */\n\n!function (name, definition) {\n  if (typeof module != 'undefined' && module.exports) module.exports['browser'] = definition()\n  else if (typeof define == 'function' && define.amd) define(definition)\n  else this[name] = definition()\n}('bowser', function () {\n  /**\n    * See useragents.js for examples of navigator.userAgent\n    */\n\n  var t = true\n\n  function detect(ua) {\n\n    function getFirstMatch(regex) {\n      var match = ua.match(regex);\n      return (match && match.length > 1 && match[1]) || '';\n    }\n\n    var iosdevice = getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase()\n      , likeAndroid = /like android/i.test(ua)\n      , android = !likeAndroid && /android/i.test(ua)\n      , versionIdentifier = getFirstMatch(/version\\/(\\d+(\\.\\d+)?)/i)\n      , tablet = /tablet/i.test(ua)\n      , mobile = !tablet && /[^-]mobi/i.test(ua)\n      , result\n\n    if (/opera|opr/i.test(ua)) {\n      result = {\n        name: 'Opera'\n      , opera: t\n      , version: versionIdentifier || getFirstMatch(/(?:opera|opr)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/windows phone/i.test(ua)) {\n      result = {\n        name: 'Windows Phone'\n      , windowsphone: t\n      , msie: t\n      , version: getFirstMatch(/iemobile\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/msie|trident/i.test(ua)) {\n      result = {\n        name: 'Internet Explorer'\n      , msie: t\n      , version: getFirstMatch(/(?:msie |rv:)(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/chrome|crios|crmo/i.test(ua)) {\n      result = {\n        name: 'Chrome'\n      , chrome: t\n      , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (iosdevice) {\n      result = {\n        name : iosdevice == 'iphone' ? 'iPhone' : iosdevice == 'ipad' ? 'iPad' : 'iPod'\n      }\n      // WTF: version is not part of user agent in web apps\n      if (versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    }\n    else if (/sailfish/i.test(ua)) {\n      result = {\n        name: 'Sailfish'\n      , sailfish: t\n      , version: getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/seamonkey\\//i.test(ua)) {\n      result = {\n        name: 'SeaMonkey'\n      , seamonkey: t\n      , version: getFirstMatch(/seamonkey\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/firefox|iceweasel/i.test(ua)) {\n      result = {\n        name: 'Firefox'\n      , firefox: t\n      , version: getFirstMatch(/(?:firefox|iceweasel)[ \\/](\\d+(\\.\\d+)?)/i)\n      }\n      if (/\\((mobile|tablet);[^\\)]*rv:[\\d\\.]+\\)/i.test(ua)) {\n        result.firefoxos = t\n      }\n    }\n    else if (/silk/i.test(ua)) {\n      result =  {\n        name: 'Amazon Silk'\n      , silk: t\n      , version : getFirstMatch(/silk\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (android) {\n      result = {\n        name: 'Android'\n      , version: versionIdentifier\n      }\n    }\n    else if (/phantom/i.test(ua)) {\n      result = {\n        name: 'PhantomJS'\n      , phantom: t\n      , version: getFirstMatch(/phantomjs\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/blackberry|\\bbb\\d+/i.test(ua) || /rim\\stablet/i.test(ua)) {\n      result = {\n        name: 'BlackBerry'\n      , blackberry: t\n      , version: versionIdentifier || getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/(web|hpw)os/i.test(ua)) {\n      result = {\n        name: 'WebOS'\n      , webos: t\n      , version: versionIdentifier || getFirstMatch(/w(?:eb)?osbrowser\\/(\\d+(\\.\\d+)?)/i)\n      };\n      /touchpad\\//i.test(ua) && (result.touchpad = t)\n    }\n    else if (/bada/i.test(ua)) {\n      result = {\n        name: 'Bada'\n      , bada: t\n      , version: getFirstMatch(/dolfin\\/(\\d+(\\.\\d+)?)/i)\n      };\n    }\n    else if (/tizen/i.test(ua)) {\n      result = {\n        name: 'Tizen'\n      , tizen: t\n      , version: getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n      };\n    }\n    else if (/safari/i.test(ua)) {\n      result = {\n        name: 'Safari'\n      , safari: t\n      , version: versionIdentifier\n      }\n    }\n    else result = {}\n\n    // set webkit or gecko flag for browsers based on these engines\n    if (/(apple)?webkit/i.test(ua)) {\n      result.name = result.name || \"Webkit\"\n      result.webkit = t\n      if (!result.version && versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    } else if (!result.opera && /gecko\\//i.test(ua)) {\n      result.name = result.name || \"Gecko\"\n      result.gecko = t\n      result.version = result.version || getFirstMatch(/gecko\\/(\\d+(\\.\\d+)?)/i)\n    }\n\n    // set OS flags for platforms that have multiple browsers\n    if (android || result.silk) {\n      result.android = t\n    } else if (iosdevice) {\n      result[iosdevice] = t\n      result.ios = t\n    }\n\n    // OS version extraction\n    var osVersion = '';\n    if (iosdevice) {\n      osVersion = getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i);\n      osVersion = osVersion.replace(/[_\\s]/g, '.');\n    } else if (android) {\n      osVersion = getFirstMatch(/android[ \\/-](\\d+(\\.\\d+)*)/i);\n    } else if (result.windowsphone) {\n      osVersion = getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i);\n    } else if (result.webos) {\n      osVersion = getFirstMatch(/(?:web|hpw)os\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.blackberry) {\n      osVersion = getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i);\n    } else if (result.bada) {\n      osVersion = getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.tizen) {\n      osVersion = getFirstMatch(/tizen[\\/\\s](\\d+(\\.\\d+)*)/i);\n    }\n    if (osVersion) {\n      result.osversion = osVersion;\n    }\n\n    // device type extraction\n    var osMajorVersion = osVersion.split('.')[0];\n    if (tablet || iosdevice == 'ipad' || (android && (osMajorVersion == 3 || (osMajorVersion == 4 && !mobile))) || result.silk) {\n      result.tablet = t\n    } else if (mobile || iosdevice == 'iphone' || iosdevice == 'ipod' || android || result.blackberry || result.webos || result.bada) {\n      result.mobile = t\n    }\n\n    // Graded Browser Support\n    // http://developer.yahoo.com/yui/articles/gbs\n    if ((result.msie && result.version >= 10) ||\n        (result.chrome && result.version >= 20) ||\n        (result.firefox && result.version >= 20.0) ||\n        (result.safari && result.version >= 6) ||\n        (result.opera && result.version >= 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] >= 6) ||\n        (result.blackberry && result.version >= 10.1)\n        ) {\n      result.a = t;\n    }\n    else if ((result.msie && result.version < 10) ||\n        (result.chrome && result.version < 20) ||\n        (result.firefox && result.version < 20.0) ||\n        (result.safari && result.version < 6) ||\n        (result.opera && result.version < 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] < 6)\n        ) {\n      result.c = t\n    } else result.x = t\n\n    return result\n  }\n\n  var bowser = detect(typeof navigator !== 'undefined' ? navigator.userAgent : '')\n\n\n  /*\n   * Set our detect method to the main bowser object so we can\n   * reuse it to test other user agents.\n   * This is needed to implement future tests.\n   */\n  bowser._detect = detect;\n\n  return bowser\n});\n\n}\n, \"ep_etherpad-lite/static/js/jquery.js\": function (require, exports, module) {\n/*!\n * jQuery JavaScript Library v1.9.1\n * http://jquery.com/\n *\n * Includes Sizzle.js\n * http://sizzlejs.com/\n *\n * Copyright 2005, 2012 jQuery Foundation, Inc. and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n *\n * Date: 2013-2-4\n */\n(function( window, undefined ) {\n\n// Can't do this because several apps including ASP.NET trace\n// the stack via arguments.caller.callee and Firefox dies if\n// you try to trace through \"use strict\" call chains. (#13335)\n// Support: Firefox 18+\n//\"use strict\";\nvar\n\t// The deferred used on DOM ready\n\treadyList,\n\n\t// A central reference to the root jQuery(document)\n\trootjQuery,\n\n\t// Support: IE<9\n\t// For `typeof node.method` instead of `node.method !== undefined`\n\tcore_strundefined = typeof undefined,\n\n\t// Use the correct document accordingly with window argument (sandbox)\n\tdocument = window.document,\n\tlocation = window.location,\n\n\t// Map over jQuery in case of overwrite\n\t_jQuery = window.jQuery,\n\n\t// Map over the $ in case of overwrite\n\t_$ = window.$,\n\n\t// [[Class]] -> type pairs\n\tclass2type = {},\n\n\t// List of deleted data cache ids, so we can reuse them\n\tcore_deletedIds = [],\n\n\tcore_version = \"1.9.1\",\n\n\t// Save a reference to some core methods\n\tcore_concat = core_deletedIds.concat,\n\tcore_push = core_deletedIds.push,\n\tcore_slice = core_deletedIds.slice,\n\tcore_indexOf = core_deletedIds.indexOf,\n\tcore_toString = class2type.toString,\n\tcore_hasOwn = class2type.hasOwnProperty,\n\tcore_trim = core_version.trim,\n\n\t// Define a local copy of jQuery\n\tjQuery = function( selector, context ) {\n\t\t// The jQuery object is actually just the init constructor 'enhanced'\n\t\treturn new jQuery.fn.init( selector, context, rootjQuery );\n\t},\n\n\t// Used for matching numbers\n\tcore_pnum = /[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,\n\n\t// Used for splitting on whitespace\n\tcore_rnotwhite = /\\S+/g,\n\n\t// Make sure we trim BOM and NBSP (here's looking at you, Safari 5.0 and IE)\n\trtrim = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,\n\n\t// A simple way to check for HTML strings\n\t// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)\n\t// Strict HTML recognition (#11290: must start with <)\n\trquickExpr = /^(?:(<[\\w\\W]+>)[^>]*|#([\\w-]*))$/,\n\n\t// Match a standalone tag\n\trsingleTag = /^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,\n\n\t// JSON RegExp\n\trvalidchars = /^[\\],:{}\\s]*$/,\n\trvalidbraces = /(?:^|:|,)(?:\\s*\\[)+/g,\n\trvalidescape = /\\\\(?:[\"\\\\\\/bfnrt]|u[\\da-fA-F]{4})/g,\n\trvalidtokens = /\"[^\"\\\\\\r\\n]*\"|true|false|null|-?(?:\\d+\\.|)\\d+(?:[eE][+-]?\\d+|)/g,\n\n\t// Matches dashed string for camelizing\n\trmsPrefix = /^-ms-/,\n\trdashAlpha = /-([\\da-z])/gi,\n\n\t// Used by jQuery.camelCase as callback to replace()\n\tfcamelCase = function( all, letter ) {\n\t\treturn letter.toUpperCase();\n\t},\n\n\t// The ready event handler\n\tcompleted = function( event ) {\n\n\t\t// readyState === \"complete\" is good enough for us to call the dom ready in oldIE\n\t\tif ( document.addEventListener || event.type === \"load\" || document.readyState === \"complete\" ) {\n\t\t\tdetach();\n\t\t\tjQuery.ready();\n\t\t}\n\t},\n\t// Clean-up method for dom ready events\n\tdetach = function() {\n\t\tif ( document.addEventListener ) {\n\t\t\tdocument.removeEventListener( \"DOMContentLoaded\", completed, false );\n\t\t\twindow.removeEventListener( \"load\", completed, false );\n\n\t\t} else {\n\t\t\tdocument.detachEvent( \"onreadystatechange\", completed );\n\t\t\twindow.detachEvent( \"onload\", completed );\n\t\t}\n\t};\n\njQuery.fn = jQuery.prototype = {\n\t// The current version of jQuery being used\n\tjquery: core_version,\n\n\tconstructor: jQuery,\n\tinit: function( selector, context, rootjQuery ) {\n\t\tvar match, elem;\n\n\t\t// HANDLE: $(\"\"), $(null), $(undefined), $(false)\n\t\tif ( !selector ) {\n\t\t\treturn this;\n\t\t}\n\n\t\t// Handle HTML strings\n\t\tif ( typeof selector === \"string\" ) {\n\t\t\tif ( selector.charAt(0) === \"<\" && selector.charAt( selector.length - 1 ) === \">\" && selector.length >= 3 ) {\n\t\t\t\t// Assume that strings that start and end with <> are HTML and skip the regex check\n\t\t\t\tmatch = [ null, selector, null ];\n\n\t\t\t} else {\n\t\t\t\tmatch = rquickExpr.exec( selector );\n\t\t\t}\n\n\t\t\t// Match html or make sure no context is specified for #id\n\t\t\tif ( match && (match[1] || !context) ) {\n\n\t\t\t\t// HANDLE: $(html) -> $(array)\n\t\t\t\tif ( match[1] ) {\n\t\t\t\t\tcontext = context instanceof jQuery ? context[0] : context;\n\n\t\t\t\t\t// scripts is true for back-compat\n\t\t\t\t\tjQuery.merge( this, jQuery.parseHTML(\n\t\t\t\t\t\tmatch[1],\n\t\t\t\t\t\tcontext && context.nodeType ? context.ownerDocument || context : document,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t) );\n\n\t\t\t\t\t// HANDLE: $(html, props)\n\t\t\t\t\tif ( rsingleTag.test( match[1] ) && jQuery.isPlainObject( context ) ) {\n\t\t\t\t\t\tfor ( match in context ) {\n\t\t\t\t\t\t\t// Properties of context are called as methods if possible\n\t\t\t\t\t\t\tif ( jQuery.isFunction( this[ match ] ) ) {\n\t\t\t\t\t\t\t\tthis[ match ]( context[ match ] );\n\n\t\t\t\t\t\t\t// ...and otherwise set as attributes\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.attr( match, context[ match ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this;\n\n\t\t\t\t// HANDLE: $(#id)\n\t\t\t\t} else {\n\t\t\t\t\telem = document.getElementById( match[2] );\n\n\t\t\t\t\t// Check parentNode to catch when Blackberry 4.6 returns\n\t\t\t\t\t// nodes that are no longer in the document #6963\n\t\t\t\t\tif ( elem && elem.parentNode ) {\n\t\t\t\t\t\t// Handle the case where IE and Opera return items\n\t\t\t\t\t\t// by name instead of ID\n\t\t\t\t\t\tif ( elem.id !== match[2] ) {\n\t\t\t\t\t\t\treturn rootjQuery.find( selector );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Otherwise, we inject the element directly into the jQuery object\n\t\t\t\t\t\tthis.length = 1;\n\t\t\t\t\t\tthis[0] = elem;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.context = document;\n\t\t\t\t\tthis.selector = selector;\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\n\t\t\t// HANDLE: $(expr, $(...))\n\t\t\t} else if ( !context || context.jquery ) {\n\t\t\t\treturn ( context || rootjQuery ).find( selector );\n\n\t\t\t// HANDLE: $(expr, context)\n\t\t\t// (which is just equivalent to: $(context).find(expr)\n\t\t\t} else {\n\t\t\t\treturn this.constructor( context ).find( selector );\n\t\t\t}\n\n\t\t// HANDLE: $(DOMElement)\n\t\t} else if ( selector.nodeType ) {\n\t\t\tthis.context = this[0] = selector;\n\t\t\tthis.length = 1;\n\t\t\treturn this;\n\n\t\t// HANDLE: $(function)\n\t\t// Shortcut for document ready\n\t\t} else if ( jQuery.isFunction( selector ) ) {\n\t\t\treturn rootjQuery.ready( selector );\n\t\t}\n\n\t\tif ( selector.selector !== undefined ) {\n\t\t\tthis.selector = selector.selector;\n\t\t\tthis.context = selector.context;\n\t\t}\n\n\t\treturn jQuery.makeArray( selector, this );\n\t},\n\n\t// Start with an empty selector\n\tselector: \"\",\n\n\t// The default length of a jQuery object is 0\n\tlength: 0,\n\n\t// The number of elements contained in the matched element set\n\tsize: function() {\n\t\treturn this.length;\n\t},\n\n\ttoArray: function() {\n\t\treturn core_slice.call( this );\n\t},\n\n\t// Get the Nth element in the matched element set OR\n\t// Get the whole matched element set as a clean array\n\tget: function( num ) {\n\t\treturn num == null ?\n\n\t\t\t// Return a 'clean' array\n\t\t\tthis.toArray() :\n\n\t\t\t// Return just the object\n\t\t\t( num < 0 ? this[ this.length + num ] : this[ num ] );\n\t},\n\n\t// Take an array of elements and push it onto the stack\n\t// (returning the new matched element set)\n\tpushStack: function( elems ) {\n\n\t\t// Build a new jQuery matched element set\n\t\tvar ret = jQuery.merge( this.constructor(), elems );\n\n\t\t// Add the old object onto the stack (as a reference)\n\t\tret.prevObject = this;\n\t\tret.context = this.context;\n\n\t\t// Return the newly-formed element set\n\t\treturn ret;\n\t},\n\n\t// Execute a callback for every element in the matched set.\n\t// (You can seed the arguments with an array of args, but this is\n\t// only used internally.)\n\teach: function( callback, args ) {\n\t\treturn jQuery.each( this, callback, args );\n\t},\n\n\tready: function( fn ) {\n\t\t// Add the callback\n\t\tjQuery.ready.promise().done( fn );\n\n\t\treturn this;\n\t},\n\n\tslice: function() {\n\t\treturn this.pushStack( core_slice.apply( this, arguments ) );\n\t},\n\n\tfirst: function() {\n\t\treturn this.eq( 0 );\n\t},\n\n\tlast: function() {\n\t\treturn this.eq( -1 );\n\t},\n\n\teq: function( i ) {\n\t\tvar len = this.length,\n\t\t\tj = +i + ( i < 0 ? len : 0 );\n\t\treturn this.pushStack( j >= 0 && j < len ? [ this[j] ] : [] );\n\t},\n\n\tmap: function( callback ) {\n\t\treturn this.pushStack( jQuery.map(this, function( elem, i ) {\n\t\t\treturn callback.call( elem, i, elem );\n\t\t}));\n\t},\n\n\tend: function() {\n\t\treturn this.prevObject || this.constructor(null);\n\t},\n\n\t// For internal use only.\n\t// Behaves like an Array's method, not like a jQuery method.\n\tpush: core_push,\n\tsort: [].sort,\n\tsplice: [].splice\n};\n\n// Give the init function the jQuery prototype for later instantiation\njQuery.fn.init.prototype = jQuery.fn;\n\njQuery.extend = jQuery.fn.extend = function() {\n\tvar src, copyIsArray, copy, name, options, clone,\n\t\ttarget = arguments[0] || {},\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif ( typeof target === \"boolean\" ) {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif ( typeof target !== \"object\" && !jQuery.isFunction(target) ) {\n\t\ttarget = {};\n\t}\n\n\t// extend jQuery itself if only one argument is passed\n\tif ( length === i ) {\n\t\ttarget = this;\n\t\t--i;\n\t}\n\n\tfor ( ; i < length; i++ ) {\n\t\t// Only deal with non-null/undefined values\n\t\tif ( (options = arguments[ i ]) != null ) {\n\t\t\t// Extend the base object\n\t\t\tfor ( name in options ) {\n\t\t\t\tsrc = target[ name ];\n\t\t\t\tcopy = options[ name ];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif ( target === copy ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif ( deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) ) ) {\n\t\t\t\t\tif ( copyIsArray ) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && jQuery.isArray(src) ? src : [];\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && jQuery.isPlainObject(src) ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[ name ] = jQuery.extend( deep, clone, copy );\n\n\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if ( copy !== undefined ) {\n\t\t\t\t\ttarget[ name ] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\njQuery.extend({\n\tnoConflict: function( deep ) {\n\t\tif ( window.$ === jQuery ) {\n\t\t\twindow.$ = _$;\n\t\t}\n\n\t\tif ( deep && window.jQuery === jQuery ) {\n\t\t\twindow.jQuery = _jQuery;\n\t\t}\n\n\t\treturn jQuery;\n\t},\n\n\t// Is the DOM ready to be used? Set to true once it occurs.\n\tisReady: false,\n\n\t// A counter to track how many items to wait for before\n\t// the ready event fires. See #6781\n\treadyWait: 1,\n\n\t// Hold (or release) the ready event\n\tholdReady: function( hold ) {\n\t\tif ( hold ) {\n\t\t\tjQuery.readyWait++;\n\t\t} else {\n\t\t\tjQuery.ready( true );\n\t\t}\n\t},\n\n\t// Handle when the DOM is ready\n\tready: function( wait ) {\n\n\t\t// Abort if there are pending holds or we're already ready\n\t\tif ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).\n\t\tif ( !document.body ) {\n\t\t\treturn setTimeout( jQuery.ready );\n\t\t}\n\n\t\t// Remember that the DOM is ready\n\t\tjQuery.isReady = true;\n\n\t\t// If a normal DOM Ready event fired, decrement, and wait if need be\n\t\tif ( wait !== true && --jQuery.readyWait > 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If there are functions bound, to execute\n\t\treadyList.resolveWith( document, [ jQuery ] );\n\n\t\t// Trigger any bound ready events\n\t\tif ( jQuery.fn.trigger ) {\n\t\t\tjQuery( document ).trigger(\"ready\").off(\"ready\");\n\t\t}\n\t},\n\n\t// See test/unit/core.js for details concerning isFunction.\n\t// Since version 1.3, DOM methods and functions like alert\n\t// aren't supported. They return false on IE (#2968).\n\tisFunction: function( obj ) {\n\t\treturn jQuery.type(obj) === \"function\";\n\t},\n\n\tisArray: Array.isArray || function( obj ) {\n\t\treturn jQuery.type(obj) === \"array\";\n\t},\n\n\tisWindow: function( obj ) {\n\t\treturn obj != null && obj == obj.window;\n\t},\n\n\tisNumeric: function( obj ) {\n\t\treturn !isNaN( parseFloat(obj) ) && isFinite( obj );\n\t},\n\n\ttype: function( obj ) {\n\t\tif ( obj == null ) {\n\t\t\treturn String( obj );\n\t\t}\n\t\treturn typeof obj === \"object\" || typeof obj === \"function\" ?\n\t\t\tclass2type[ core_toString.call(obj) ] || \"object\" :\n\t\t\ttypeof obj;\n\t},\n\n\tisPlainObject: function( obj ) {\n\t\t// Must be an Object.\n\t\t// Because of IE, we also have to check the presence of the constructor property.\n\t\t// Make sure that DOM nodes and window objects don't pass through, as well\n\t\tif ( !obj || jQuery.type(obj) !== \"object\" || obj.nodeType || jQuery.isWindow( obj ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\ttry {\n\t\t\t// Not own constructor property must be Object\n\t\t\tif ( obj.constructor &&\n\t\t\t\t!core_hasOwn.call(obj, \"constructor\") &&\n\t\t\t\t!core_hasOwn.call(obj.constructor.prototype, \"isPrototypeOf\") ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} catch ( e ) {\n\t\t\t// IE8,9 Will throw exceptions on certain host objects #9897\n\t\t\treturn false;\n\t\t}\n\n\t\t// Own properties are enumerated firstly, so to speed up,\n\t\t// if last one is own, then all properties are own.\n\n\t\tvar key;\n\t\tfor ( key in obj ) {}\n\n\t\treturn key === undefined || core_hasOwn.call( obj, key );\n\t},\n\n\tisEmptyObject: function( obj ) {\n\t\tvar name;\n\t\tfor ( name in obj ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\terror: function( msg ) {\n\t\tthrow new Error( msg );\n\t},\n\n\t// data: string of html\n\t// context (optional): If specified, the fragment will be created in this context, defaults to document\n\t// keepScripts (optional): If true, will include scripts passed in the html string\n\tparseHTML: function( data, context, keepScripts ) {\n\t\tif ( !data || typeof data !== \"string\" ) {\n\t\t\treturn null;\n\t\t}\n\t\tif ( typeof context === \"boolean\" ) {\n\t\t\tkeepScripts = context;\n\t\t\tcontext = false;\n\t\t}\n\t\tcontext = context || document;\n\n\t\tvar parsed = rsingleTag.exec( data ),\n\t\t\tscripts = !keepScripts && [];\n\n\t\t// Single tag\n\t\tif ( parsed ) {\n\t\t\treturn [ context.createElement( parsed[1] ) ];\n\t\t}\n\n\t\tparsed = jQuery.buildFragment( [ data ], context, scripts );\n\t\tif ( scripts ) {\n\t\t\tjQuery( scripts ).remove();\n\t\t}\n\t\treturn jQuery.merge( [], parsed.childNodes );\n\t},\n\n\tparseJSON: function( data ) {\n\t\t// Attempt to parse using the native JSON parser first\n\t\tif ( window.JSON && window.JSON.parse ) {\n\t\t\treturn window.JSON.parse( data );\n\t\t}\n\n\t\tif ( data === null ) {\n\t\t\treturn data;\n\t\t}\n\n\t\tif ( typeof data === \"string\" ) {\n\n\t\t\t// Make sure leading/trailing whitespace is removed (IE can't handle it)\n\t\t\tdata = jQuery.trim( data );\n\n\t\t\tif ( data ) {\n\t\t\t\t// Make sure the incoming data is actual JSON\n\t\t\t\t// Logic borrowed from http://json.org/json2.js\n\t\t\t\tif ( rvalidchars.test( data.replace( rvalidescape, \"@\" )\n\t\t\t\t\t.replace( rvalidtokens, \"]\" )\n\t\t\t\t\t.replace( rvalidbraces, \"\")) ) {\n\n\t\t\t\t\treturn ( new Function( \"return \" + data ) )();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tjQuery.error( \"Invalid JSON: \" + data );\n\t},\n\n\t// Cross-browser xml parsing\n\tparseXML: function( data ) {\n\t\tvar xml, tmp;\n\t\tif ( !data || typeof data !== \"string\" ) {\n\t\t\treturn null;\n\t\t}\n\t\ttry {\n\t\t\tif ( window.DOMParser ) { // Standard\n\t\t\t\ttmp = new DOMParser();\n\t\t\t\txml = tmp.parseFromString( data , \"text/xml\" );\n\t\t\t} else { // IE\n\t\t\t\txml = new ActiveXObject( \"Microsoft.XMLDOM\" );\n\t\t\t\txml.async = \"false\";\n\t\t\t\txml.loadXML( data );\n\t\t\t}\n\t\t} catch( e ) {\n\t\t\txml = undefined;\n\t\t}\n\t\tif ( !xml || !xml.documentElement || xml.getElementsByTagName( \"parsererror\" ).length ) {\n\t\t\tjQuery.error( \"Invalid XML: \" + data );\n\t\t}\n\t\treturn xml;\n\t},\n\n\tnoop: function() {},\n\n\t// Evaluates a script in a global context\n\t// Workarounds based on findings by Jim Driscoll\n\t// http://weblogs.java.net/blog/driscoll/archive/2009/09/08/eval-javascript-global-context\n\tglobalEval: function( data ) {\n\t\tif ( data && jQuery.trim( data ) ) {\n\t\t\t// We use execScript on Internet Explorer\n\t\t\t// We use an anonymous function so that context is window\n\t\t\t// rather than jQuery in Firefox\n\t\t\t( window.execScript || function( data ) {\n\t\t\t\twindow[ \"eval\" ].call( window, data );\n\t\t\t} )( data );\n\t\t}\n\t},\n\n\t// Convert dashed to camelCase; used by the css and data modules\n\t// Microsoft forgot to hump their vendor prefix (#9572)\n\tcamelCase: function( string ) {\n\t\treturn string.replace( rmsPrefix, \"ms-\" ).replace( rdashAlpha, fcamelCase );\n\t},\n\n\tnodeName: function( elem, name ) {\n\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();\n\t},\n\n\t// args is for internal usage only\n\teach: function( obj, callback, args ) {\n\t\tvar value,\n\t\t\ti = 0,\n\t\t\tlength = obj.length,\n\t\t\tisArray = isArraylike( obj );\n\n\t\tif ( args ) {\n\t\t\tif ( isArray ) {\n\t\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\t\tvalue = callback.apply( obj[ i ], args );\n\n\t\t\t\t\tif ( value === false ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( i in obj ) {\n\t\t\t\t\tvalue = callback.apply( obj[ i ], args );\n\n\t\t\t\t\tif ( value === false ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t// A special, fast, case for the most common use of each\n\t\t} else {\n\t\t\tif ( isArray ) {\n\t\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\t\tvalue = callback.call( obj[ i ], i, obj[ i ] );\n\n\t\t\t\t\tif ( value === false ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( i in obj ) {\n\t\t\t\t\tvalue = callback.call( obj[ i ], i, obj[ i ] );\n\n\t\t\t\t\tif ( value === false ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn obj;\n\t},\n\n\t// Use native String.trim function wherever possible\n\ttrim: core_trim && !core_trim.call(\"\\uFEFF\\xA0\") ?\n\t\tfunction( text ) {\n\t\t\treturn text == null ?\n\t\t\t\t\"\" :\n\t\t\t\tcore_trim.call( text );\n\t\t} :\n\n\t\t// Otherwise use our own trimming functionality\n\t\tfunction( text ) {\n\t\t\treturn text == null ?\n\t\t\t\t\"\" :\n\t\t\t\t( text + \"\" ).replace( rtrim, \"\" );\n\t\t},\n\n\t// results is for internal usage only\n\tmakeArray: function( arr, results ) {\n\t\tvar ret = results || [];\n\n\t\tif ( arr != null ) {\n\t\t\tif ( isArraylike( Object(arr) ) ) {\n\t\t\t\tjQuery.merge( ret,\n\t\t\t\t\ttypeof arr === \"string\" ?\n\t\t\t\t\t[ arr ] : arr\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tcore_push.call( ret, arr );\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\tinArray: function( elem, arr, i ) {\n\t\tvar len;\n\n\t\tif ( arr ) {\n\t\t\tif ( core_indexOf ) {\n\t\t\t\treturn core_indexOf.call( arr, elem, i );\n\t\t\t}\n\n\t\t\tlen = arr.length;\n\t\t\ti = i ? i < 0 ? Math.max( 0, len + i ) : i : 0;\n\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\t// Skip accessing in sparse arrays\n\t\t\t\tif ( i in arr && arr[ i ] === elem ) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t},\n\n\tmerge: function( first, second ) {\n\t\tvar l = second.length,\n\t\t\ti = first.length,\n\t\t\tj = 0;\n\n\t\tif ( typeof l === \"number\" ) {\n\t\t\tfor ( ; j < l; j++ ) {\n\t\t\t\tfirst[ i++ ] = second[ j ];\n\t\t\t}\n\t\t} else {\n\t\t\twhile ( second[j] !== undefined ) {\n\t\t\t\tfirst[ i++ ] = second[ j++ ];\n\t\t\t}\n\t\t}\n\n\t\tfirst.length = i;\n\n\t\treturn first;\n\t},\n\n\tgrep: function( elems, callback, inv ) {\n\t\tvar retVal,\n\t\t\tret = [],\n\t\t\ti = 0,\n\t\t\tlength = elems.length;\n\t\tinv = !!inv;\n\n\t\t// Go through the array, only saving the items\n\t\t// that pass the validator function\n\t\tfor ( ; i < length; i++ ) {\n\t\t\tretVal = !!callback( elems[ i ], i );\n\t\t\tif ( inv !== retVal ) {\n\t\t\t\tret.push( elems[ i ] );\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\t// arg is for internal usage only\n\tmap: function( elems, callback, arg ) {\n\t\tvar value,\n\t\t\ti = 0,\n\t\t\tlength = elems.length,\n\t\t\tisArray = isArraylike( elems ),\n\t\t\tret = [];\n\n\t\t// Go through the array, translating each of the items to their\n\t\tif ( isArray ) {\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret[ ret.length ] = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Go through every key on the object,\n\t\t} else {\n\t\t\tfor ( i in elems ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret[ ret.length ] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Flatten any nested arrays\n\t\treturn core_concat.apply( [], ret );\n\t},\n\n\t// A global GUID counter for objects\n\tguid: 1,\n\n\t// Bind a function to a context, optionally partially applying any\n\t// arguments.\n\tproxy: function( fn, context ) {\n\t\tvar args, proxy, tmp;\n\n\t\tif ( typeof context === \"string\" ) {\n\t\t\ttmp = fn[ context ];\n\t\t\tcontext = fn;\n\t\t\tfn = tmp;\n\t\t}\n\n\t\t// Quick check to determine if target is callable, in the spec\n\t\t// this throws a TypeError, but we will just return undefined.\n\t\tif ( !jQuery.isFunction( fn ) ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Simulated bind\n\t\targs = core_slice.call( arguments, 2 );\n\t\tproxy = function() {\n\t\t\treturn fn.apply( context || this, args.concat( core_slice.call( arguments ) ) );\n\t\t};\n\n\t\t// Set the guid of unique handler to the same of original handler, so it can be removed\n\t\tproxy.guid = fn.guid = fn.guid || jQuery.guid++;\n\n\t\treturn proxy;\n\t},\n\n\t// Multifunctional method to get and set values of a collection\n\t// The value/s can optionally be executed if it's a function\n\taccess: function( elems, fn, key, value, chainable, emptyGet, raw ) {\n\t\tvar i = 0,\n\t\t\tlength = elems.length,\n\t\t\tbulk = key == null;\n\n\t\t// Sets many values\n\t\tif ( jQuery.type( key ) === \"object\" ) {\n\t\t\tchainable = true;\n\t\t\tfor ( i in key ) {\n\t\t\t\tjQuery.access( elems, fn, i, key[i], true, emptyGet, raw );\n\t\t\t}\n\n\t\t// Sets one value\n\t\t} else if ( value !== undefined ) {\n\t\t\tchainable = true;\n\n\t\t\tif ( !jQuery.isFunction( value ) ) {\n\t\t\t\traw = true;\n\t\t\t}\n\n\t\t\tif ( bulk ) {\n\t\t\t\t// Bulk operations run against the entire set\n\t\t\t\tif ( raw ) {\n\t\t\t\t\tfn.call( elems, value );\n\t\t\t\t\tfn = null;\n\n\t\t\t\t// ...except when executing function values\n\t\t\t\t} else {\n\t\t\t\t\tbulk = fn;\n\t\t\t\t\tfn = function( elem, key, value ) {\n\t\t\t\t\t\treturn bulk.call( jQuery( elem ), value );\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( fn ) {\n\t\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\t\tfn( elems[i], key, raw ? value : value.call( elems[i], i, fn( elems[i], key ) ) );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn chainable ?\n\t\t\telems :\n\n\t\t\t// Gets\n\t\t\tbulk ?\n\t\t\t\tfn.call( elems ) :\n\t\t\t\tlength ? fn( elems[0], key ) : emptyGet;\n\t},\n\n\tnow: function() {\n\t\treturn ( new Date() ).getTime();\n\t}\n});\n\njQuery.ready.promise = function( obj ) {\n\tif ( !readyList ) {\n\n\t\treadyList = jQuery.Deferred();\n\n\t\t// Catch cases where $(document).ready() is called after the browser event has already occurred.\n\t\t// we once tried to use readyState \"interactive\" here, but it caused issues like the one\n\t\t// discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15\n\t\tif ( document.readyState === \"complete\" ) {\n\t\t\t// Handle it asynchronously to allow scripts the opportunity to delay ready\n\t\t\tsetTimeout( jQuery.ready );\n\n\t\t// Standards-based browsers support DOMContentLoaded\n\t\t} else if ( document.addEventListener ) {\n\t\t\t// Use the handy event callback\n\t\t\tdocument.addEventListener( \"DOMContentLoaded\", completed, false );\n\n\t\t\t// A fallback to window.onload, that will always work\n\t\t\twindow.addEventListener( \"load\", completed, false );\n\n\t\t// If IE event model is used\n\t\t} else {\n\t\t\t// Ensure firing before onload, maybe late but safe also for iframes\n\t\t\tdocument.attachEvent( \"onreadystatechange\", completed );\n\n\t\t\t// A fallback to window.onload, that will always work\n\t\t\twindow.attachEvent( \"onload\", completed );\n\n\t\t\t// If IE and not a frame\n\t\t\t// continually check to see if the document is ready\n\t\t\tvar top = false;\n\n\t\t\ttry {\n\t\t\t\ttop = window.frameElement == null && document.documentElement;\n\t\t\t} catch(e) {}\n\n\t\t\tif ( top && top.doScroll ) {\n\t\t\t\t(function doScrollCheck() {\n\t\t\t\t\tif ( !jQuery.isReady ) {\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t// Use the trick by Diego Perini\n\t\t\t\t\t\t\t// http://javascript.nwbox.com/IEContentLoaded/\n\t\t\t\t\t\t\ttop.doScroll(\"left\");\n\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\treturn setTimeout( doScrollCheck, 50 );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// detach all dom ready events\n\t\t\t\t\t\tdetach();\n\n\t\t\t\t\t\t// and execute any waiting functions\n\t\t\t\t\t\tjQuery.ready();\n\t\t\t\t\t}\n\t\t\t\t})();\n\t\t\t}\n\t\t}\n\t}\n\treturn readyList.promise( obj );\n};\n\n// Populate the class2type map\njQuery.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"), function(i, name) {\n\tclass2type[ \"[object \" + name + \"]\" ] = name.toLowerCase();\n});\n\nfunction isArraylike( obj ) {\n\tvar length = obj.length,\n\t\ttype = jQuery.type( obj );\n\n\tif ( jQuery.isWindow( obj ) ) {\n\t\treturn false;\n\t}\n\n\tif ( obj.nodeType === 1 && length ) {\n\t\treturn true;\n\t}\n\n\treturn type === \"array\" || type !== \"function\" &&\n\t\t( length === 0 ||\n\t\ttypeof length === \"number\" && length > 0 && ( length - 1 ) in obj );\n}\n\n// All jQuery objects should point back to these\nrootjQuery = jQuery(document);\n// String to Object options format cache\nvar optionsCache = {};\n\n// Convert String-formatted options into Object-formatted ones and store in cache\nfunction createOptions( options ) {\n\tvar object = optionsCache[ options ] = {};\n\tjQuery.each( options.match( core_rnotwhite ) || [], function( _, flag ) {\n\t\tobject[ flag ] = true;\n\t});\n\treturn object;\n}\n\n/*\n * Create a callback list using the following parameters:\n *\n *\toptions: an optional list of space-separated options that will change how\n *\t\t\tthe callback list behaves or a more traditional option object\n *\n * By default a callback list will act like an event callback list and can be\n * \"fired\" multiple times.\n *\n * Possible options:\n *\n *\tonce:\t\t\twill ensure the callback list can only be fired once (like a Deferred)\n *\n *\tmemory:\t\t\twill keep track of previous values and will call any callback added\n *\t\t\t\t\tafter the list has been fired right away with the latest \"memorized\"\n *\t\t\t\t\tvalues (like a Deferred)\n *\n *\tunique:\t\t\twill ensure a callback can only be added once (no duplicate in the list)\n *\n *\tstopOnFalse:\tinterrupt callings when a callback returns false\n *\n */\njQuery.Callbacks = function( options ) {\n\n\t// Convert options from String-formatted to Object-formatted if needed\n\t// (we check in cache first)\n\toptions = typeof options === \"string\" ?\n\t\t( optionsCache[ options ] || createOptions( options ) ) :\n\t\tjQuery.extend( {}, options );\n\n\tvar // Flag to know if list is currently firing\n\t\tfiring,\n\t\t// Last fire value (for non-forgettable lists)\n\t\tmemory,\n\t\t// Flag to know if list was already fired\n\t\tfired,\n\t\t// End of the loop when firing\n\t\tfiringLength,\n\t\t// Index of currently firing callback (modified by remove if needed)\n\t\tfiringIndex,\n\t\t// First callback to fire (used internally by add and fireWith)\n\t\tfiringStart,\n\t\t// Actual callback list\n\t\tlist = [],\n\t\t// Stack of fire calls for repeatable lists\n\t\tstack = !options.once && [],\n\t\t// Fire callbacks\n\t\tfire = function( data ) {\n\t\t\tmemory = options.memory && data;\n\t\t\tfired = true;\n\t\t\tfiringIndex = firingStart || 0;\n\t\t\tfiringStart = 0;\n\t\t\tfiringLength = list.length;\n\t\t\tfiring = true;\n\t\t\tfor ( ; list && firingIndex < firingLength; firingIndex++ ) {\n\t\t\t\tif ( list[ firingIndex ].apply( data[ 0 ], data[ 1 ] ) === false && options.stopOnFalse ) {\n\t\t\t\t\tmemory = false; // To prevent further calls using add\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfiring = false;\n\t\t\tif ( list ) {\n\t\t\t\tif ( stack ) {\n\t\t\t\t\tif ( stack.length ) {\n\t\t\t\t\t\tfire( stack.shift() );\n\t\t\t\t\t}\n\t\t\t\t} else if ( memory ) {\n\t\t\t\t\tlist = [];\n\t\t\t\t} else {\n\t\t\t\t\tself.disable();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// Actual Callbacks object\n\t\tself = {\n\t\t\t// Add a callback or a collection of callbacks to the list\n\t\t\tadd: function() {\n\t\t\t\tif ( list ) {\n\t\t\t\t\t// First, we save the current length\n\t\t\t\t\tvar start = list.length;\n\t\t\t\t\t(function add( args ) {\n\t\t\t\t\t\tjQuery.each( args, function( _, arg ) {\n\t\t\t\t\t\t\tvar type = jQuery.type( arg );\n\t\t\t\t\t\t\tif ( type === \"function\" ) {\n\t\t\t\t\t\t\t\tif ( !options.unique || !self.has( arg ) ) {\n\t\t\t\t\t\t\t\t\tlist.push( arg );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if ( arg && arg.length && type !== \"string\" ) {\n\t\t\t\t\t\t\t\t// Inspect recursively\n\t\t\t\t\t\t\t\tadd( arg );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t})( arguments );\n\t\t\t\t\t// Do we need to add the callbacks to the\n\t\t\t\t\t// current firing batch?\n\t\t\t\t\tif ( firing ) {\n\t\t\t\t\t\tfiringLength = list.length;\n\t\t\t\t\t// With memory, if we're not firing then\n\t\t\t\t\t// we should call right away\n\t\t\t\t\t} else if ( memory ) {\n\t\t\t\t\t\tfiringStart = start;\n\t\t\t\t\t\tfire( memory );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Remove a callback from the list\n\t\t\tremove: function() {\n\t\t\t\tif ( list ) {\n\t\t\t\t\tjQuery.each( arguments, function( _, arg ) {\n\t\t\t\t\t\tvar index;\n\t\t\t\t\t\twhile( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {\n\t\t\t\t\t\t\tlist.splice( index, 1 );\n\t\t\t\t\t\t\t// Handle firing indexes\n\t\t\t\t\t\t\tif ( firing ) {\n\t\t\t\t\t\t\t\tif ( index <= firingLength ) {\n\t\t\t\t\t\t\t\t\tfiringLength--;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( index <= firingIndex ) {\n\t\t\t\t\t\t\t\t\tfiringIndex--;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Check if a given callback is in the list.\n\t\t\t// If no argument is given, return whether or not list has callbacks attached.\n\t\t\thas: function( fn ) {\n\t\t\t\treturn fn ? jQuery.inArray( fn, list ) > -1 : !!( list && list.length );\n\t\t\t},\n\t\t\t// Remove all callbacks from the list\n\t\t\tempty: function() {\n\t\t\t\tlist = [];\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Have the list do nothing anymore\n\t\t\tdisable: function() {\n\t\t\t\tlist = stack = memory = undefined;\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Is it disabled?\n\t\t\tdisabled: function() {\n\t\t\t\treturn !list;\n\t\t\t},\n\t\t\t// Lock the list in its current state\n\t\t\tlock: function() {\n\t\t\t\tstack = undefined;\n\t\t\t\tif ( !memory ) {\n\t\t\t\t\tself.disable();\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Is it locked?\n\t\t\tlocked: function() {\n\t\t\t\treturn !stack;\n\t\t\t},\n\t\t\t// Call all callbacks with the given context and arguments\n\t\t\tfireWith: function( context, args ) {\n\t\t\t\targs = args || [];\n\t\t\t\targs = [ context, args.slice ? args.slice() : args ];\n\t\t\t\tif ( list && ( !fired || stack ) ) {\n\t\t\t\t\tif ( firing ) {\n\t\t\t\t\t\tstack.push( args );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfire( args );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Call all the callbacks with the given arguments\n\t\t\tfire: function() {\n\t\t\t\tself.fireWith( this, arguments );\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// To know if the callbacks have already been called at least once\n\t\t\tfired: function() {\n\t\t\t\treturn !!fired;\n\t\t\t}\n\t\t};\n\n\treturn self;\n};\njQuery.extend({\n\n\tDeferred: function( func ) {\n\t\tvar tuples = [\n\t\t\t\t// action, add listener, listener list, final state\n\t\t\t\t[ \"resolve\", \"done\", jQuery.Callbacks(\"once memory\"), \"resolved\" ],\n\t\t\t\t[ \"reject\", \"fail\", jQuery.Callbacks(\"once memory\"), \"rejected\" ],\n\t\t\t\t[ \"notify\", \"progress\", jQuery.Callbacks(\"memory\") ]\n\t\t\t],\n\t\t\tstate = \"pending\",\n\t\t\tpromise = {\n\t\t\t\tstate: function() {\n\t\t\t\t\treturn state;\n\t\t\t\t},\n\t\t\t\talways: function() {\n\t\t\t\t\tdeferred.done( arguments ).fail( arguments );\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\tthen: function( /* fnDone, fnFail, fnProgress */ ) {\n\t\t\t\t\tvar fns = arguments;\n\t\t\t\t\treturn jQuery.Deferred(function( newDefer ) {\n\t\t\t\t\t\tjQuery.each( tuples, function( i, tuple ) {\n\t\t\t\t\t\t\tvar action = tuple[ 0 ],\n\t\t\t\t\t\t\t\tfn = jQuery.isFunction( fns[ i ] ) && fns[ i ];\n\t\t\t\t\t\t\t// deferred[ done | fail | progress ] for forwarding actions to newDefer\n\t\t\t\t\t\t\tdeferred[ tuple[1] ](function() {\n\t\t\t\t\t\t\t\tvar returned = fn && fn.apply( this, arguments );\n\t\t\t\t\t\t\t\tif ( returned && jQuery.isFunction( returned.promise ) ) {\n\t\t\t\t\t\t\t\t\treturned.promise()\n\t\t\t\t\t\t\t\t\t\t.done( newDefer.resolve )\n\t\t\t\t\t\t\t\t\t\t.fail( newDefer.reject )\n\t\t\t\t\t\t\t\t\t\t.progress( newDefer.notify );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnewDefer[ action + \"With\" ]( this === promise ? newDefer.promise() : this, fn ? [ returned ] : arguments );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfns = null;\n\t\t\t\t\t}).promise();\n\t\t\t\t},\n\t\t\t\t// Get a promise for this deferred\n\t\t\t\t// If obj is provided, the promise aspect is added to the object\n\t\t\t\tpromise: function( obj ) {\n\t\t\t\t\treturn obj != null ? jQuery.extend( obj, promise ) : promise;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeferred = {};\n\n\t\t// Keep pipe for back-compat\n\t\tpromise.pipe = promise.then;\n\n\t\t// Add list-specific methods\n\t\tjQuery.each( tuples, function( i, tuple ) {\n\t\t\tvar list = tuple[ 2 ],\n\t\t\t\tstateString = tuple[ 3 ];\n\n\t\t\t// promise[ done | fail | progress ] = list.add\n\t\t\tpromise[ tuple[1] ] = list.add;\n\n\t\t\t// Handle state\n\t\t\tif ( stateString ) {\n\t\t\t\tlist.add(function() {\n\t\t\t\t\t// state = [ resolved | rejected ]\n\t\t\t\t\tstate = stateString;\n\n\t\t\t\t// [ reject_list | resolve_list ].disable; progress_list.lock\n\t\t\t\t}, tuples[ i ^ 1 ][ 2 ].disable, tuples[ 2 ][ 2 ].lock );\n\t\t\t}\n\n\t\t\t// deferred[ resolve | reject | notify ]\n\t\t\tdeferred[ tuple[0] ] = function() {\n\t\t\t\tdeferred[ tuple[0] + \"With\" ]( this === deferred ? promise : this, arguments );\n\t\t\t\treturn this;\n\t\t\t};\n\t\t\tdeferred[ tuple[0] + \"With\" ] = list.fireWith;\n\t\t});\n\n\t\t// Make the deferred a promise\n\t\tpromise.promise( deferred );\n\n\t\t// Call given func if any\n\t\tif ( func ) {\n\t\t\tfunc.call( deferred, deferred );\n\t\t}\n\n\t\t// All done!\n\t\treturn deferred;\n\t},\n\n\t// Deferred helper\n\twhen: function( subordinate /* , ..., subordinateN */ ) {\n\t\tvar i = 0,\n\t\t\tresolveValues = core_slice.call( arguments ),\n\t\t\tlength = resolveValues.length,\n\n\t\t\t// the count of uncompleted subordinates\n\t\t\tremaining = length !== 1 || ( subordinate && jQuery.isFunction( subordinate.promise ) ) ? length : 0,\n\n\t\t\t// the master Deferred. If resolveValues consist of only a single Deferred, just use that.\n\t\t\tdeferred = remaining === 1 ? subordinate : jQuery.Deferred(),\n\n\t\t\t// Update function for both resolve and progress values\n\t\t\tupdateFunc = function( i, contexts, values ) {\n\t\t\t\treturn function( value ) {\n\t\t\t\t\tcontexts[ i ] = this;\n\t\t\t\t\tvalues[ i ] = arguments.length > 1 ? core_slice.call( arguments ) : value;\n\t\t\t\t\tif( values === progressValues ) {\n\t\t\t\t\t\tdeferred.notifyWith( contexts, values );\n\t\t\t\t\t} else if ( !( --remaining ) ) {\n\t\t\t\t\t\tdeferred.resolveWith( contexts, values );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t},\n\n\t\t\tprogressValues, progressContexts, resolveContexts;\n\n\t\t// add listeners to Deferred subordinates; treat others as resolved\n\t\tif ( length > 1 ) {\n\t\t\tprogressValues = new Array( length );\n\t\t\tprogressContexts = new Array( length );\n\t\t\tresolveContexts = new Array( length );\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tif ( resolveValues[ i ] && jQuery.isFunction( resolveValues[ i ].promise ) ) {\n\t\t\t\t\tresolveValues[ i ].promise()\n\t\t\t\t\t\t.done( updateFunc( i, resolveContexts, resolveValues ) )\n\t\t\t\t\t\t.fail( deferred.reject )\n\t\t\t\t\t\t.progress( updateFunc( i, progressContexts, progressValues ) );\n\t\t\t\t} else {\n\t\t\t\t\t--remaining;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// if we're not waiting on anything, resolve the master\n\t\tif ( !remaining ) {\n\t\t\tdeferred.resolveWith( resolveContexts, resolveValues );\n\t\t}\n\n\t\treturn deferred.promise();\n\t}\n});\njQuery.support = (function() {\n\n\tvar support, all, a,\n\t\tinput, select, fragment,\n\t\topt, eventName, isSupported, i,\n\t\tdiv = document.createElement(\"div\");\n\n\t// Setup\n\tdiv.setAttribute( \"className\", \"t\" );\n\tdiv.innerHTML = \"  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>\";\n\n\t// Support tests won't run in some limited or non-browser environments\n\tall = div.getElementsByTagName(\"*\");\n\ta = div.getElementsByTagName(\"a\")[ 0 ];\n\tif ( !all || !a || !all.length ) {\n\t\treturn {};\n\t}\n\n\t// First batch of tests\n\tselect = document.createElement(\"select\");\n\topt = select.appendChild( document.createElement(\"option\") );\n\tinput = div.getElementsByTagName(\"input\")[ 0 ];\n\n\ta.style.cssText = \"top:1px;float:left;opacity:.5\";\n\tsupport = {\n\t\t// Test setAttribute on camelCase class. If it works, we need attrFixes when doing get/setAttribute (ie6/7)\n\t\tgetSetAttribute: div.className !== \"t\",\n\n\t\t// IE strips leading whitespace when .innerHTML is used\n\t\tleadingWhitespace: div.firstChild.nodeType === 3,\n\n\t\t// Make sure that tbody elements aren't automatically inserted\n\t\t// IE will insert them into empty tables\n\t\ttbody: !div.getElementsByTagName(\"tbody\").length,\n\n\t\t// Make sure that link elements get serialized correctly by innerHTML\n\t\t// This requires a wrapper element in IE\n\t\thtmlSerialize: !!div.getElementsByTagName(\"link\").length,\n\n\t\t// Get the style information from getAttribute\n\t\t// (IE uses .cssText instead)\n\t\tstyle: /top/.test( a.getAttribute(\"style\") ),\n\n\t\t// Make sure that URLs aren't manipulated\n\t\t// (IE normalizes it by default)\n\t\threfNormalized: a.getAttribute(\"href\") === \"/a\",\n\n\t\t// Make sure that element opacity exists\n\t\t// (IE uses filter instead)\n\t\t// Use a regex to work around a WebKit issue. See #5145\n\t\topacity: /^0.5/.test( a.style.opacity ),\n\n\t\t// Verify style float existence\n\t\t// (IE uses styleFloat instead of cssFloat)\n\t\tcssFloat: !!a.style.cssFloat,\n\n\t\t// Check the default checkbox/radio value (\"\" on WebKit; \"on\" elsewhere)\n\t\tcheckOn: !!input.value,\n\n\t\t// Make sure that a selected-by-default option has a working selected property.\n\t\t// (WebKit defaults to false instead of true, IE too, if it's in an optgroup)\n\t\toptSelected: opt.selected,\n\n\t\t// Tests for enctype support on a form (#6743)\n\t\tenctype: !!document.createElement(\"form\").enctype,\n\n\t\t// Makes sure cloning an html5 element does not cause problems\n\t\t// Where outerHTML is undefined, this still works\n\t\thtml5Clone: document.createElement(\"nav\").cloneNode( true ).outerHTML !== \"<:nav></:nav>\",\n\n\t\t// jQuery.support.boxModel DEPRECATED in 1.8 since we don't support Quirks Mode\n\t\tboxModel: document.compatMode === \"CSS1Compat\",\n\n\t\t// Will be defined later\n\t\tdeleteExpando: true,\n\t\tnoCloneEvent: true,\n\t\tinlineBlockNeedsLayout: false,\n\t\tshrinkWrapBlocks: false,\n\t\treliableMarginRight: true,\n\t\tboxSizingReliable: true,\n\t\tpixelPosition: false\n\t};\n\n\t// Make sure checked status is properly cloned\n\tinput.checked = true;\n\tsupport.noCloneChecked = input.cloneNode( true ).checked;\n\n\t// Make sure that the options inside disabled selects aren't marked as disabled\n\t// (WebKit marks them as disabled)\n\tselect.disabled = true;\n\tsupport.optDisabled = !opt.disabled;\n\n\t// Support: IE<9\n\ttry {\n\t\tdelete div.test;\n\t} catch( e ) {\n\t\tsupport.deleteExpando = false;\n\t}\n\n\t// Check if we can trust getAttribute(\"value\")\n\tinput = document.createElement(\"input\");\n\tinput.setAttribute( \"value\", \"\" );\n\tsupport.input = input.getAttribute( \"value\" ) === \"\";\n\n\t// Check if an input maintains its value after becoming a radio\n\tinput.value = \"t\";\n\tinput.setAttribute( \"type\", \"radio\" );\n\tsupport.radioValue = input.value === \"t\";\n\n\t// #11217 - WebKit loses check when the name is after the checked attribute\n\tinput.setAttribute( \"checked\", \"t\" );\n\tinput.setAttribute( \"name\", \"t\" );\n\n\tfragment = document.createDocumentFragment();\n\tfragment.appendChild( input );\n\n\t// Check if a disconnected checkbox will retain its checked\n\t// value of true after appended to the DOM (IE6/7)\n\tsupport.appendChecked = input.checked;\n\n\t// WebKit doesn't clone checked state correctly in fragments\n\tsupport.checkClone = fragment.cloneNode( true ).cloneNode( true ).lastChild.checked;\n\n\t// Support: IE<9\n\t// Opera does not clone events (and typeof div.attachEvent === undefined).\n\t// IE9-10 clones events bound via attachEvent, but they don't trigger with .click()\n\tif ( div.attachEvent ) {\n\t\tdiv.attachEvent( \"onclick\", function() {\n\t\t\tsupport.noCloneEvent = false;\n\t\t});\n\n\t\tdiv.cloneNode( true ).click();\n\t}\n\n\t// Support: IE<9 (lack submit/change bubble), Firefox 17+ (lack focusin event)\n\t// Beware of CSP restrictions (https://developer.mozilla.org/en/Security/CSP), test/csp.php\n\tfor ( i in { submit: true, change: true, focusin: true }) {\n\t\tdiv.setAttribute( eventName = \"on\" + i, \"t\" );\n\n\t\tsupport[ i + \"Bubbles\" ] = eventName in window || div.attributes[ eventName ].expando === false;\n\t}\n\n\tdiv.style.backgroundClip = \"content-box\";\n\tdiv.cloneNode( true ).style.backgroundClip = \"\";\n\tsupport.clearCloneStyle = div.style.backgroundClip === \"content-box\";\n\n\t// Run tests that need a body at doc ready\n\tjQuery(function() {\n\t\tvar container, marginDiv, tds,\n\t\t\tdivReset = \"padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;\",\n\t\t\tbody = document.getElementsByTagName(\"body\")[0];\n\n\t\tif ( !body ) {\n\t\t\t// Return for frameset docs that don't have a body\n\t\t\treturn;\n\t\t}\n\n\t\tcontainer = document.createElement(\"div\");\n\t\tcontainer.style.cssText = \"border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px\";\n\n\t\tbody.appendChild( container ).appendChild( div );\n\n\t\t// Support: IE8\n\t\t// Check if table cells still have offsetWidth/Height when they are set\n\t\t// to display:none and there are still other visible table cells in a\n\t\t// table row; if so, offsetWidth/Height are not reliable for use when\n\t\t// determining if an element has been hidden directly using\n\t\t// display:none (it is still safe to use offsets if a parent element is\n\t\t// hidden; don safety goggles and see bug #4512 for more information).\n\t\tdiv.innerHTML = \"<table><tr><td></td><td>t</td></tr></table>\";\n\t\ttds = div.getElementsByTagName(\"td\");\n\t\ttds[ 0 ].style.cssText = \"padding:0;margin:0;border:0;display:none\";\n\t\tisSupported = ( tds[ 0 ].offsetHeight === 0 );\n\n\t\ttds[ 0 ].style.display = \"\";\n\t\ttds[ 1 ].style.display = \"none\";\n\n\t\t// Support: IE8\n\t\t// Check if empty table cells still have offsetWidth/Height\n\t\tsupport.reliableHiddenOffsets = isSupported && ( tds[ 0 ].offsetHeight === 0 );\n\n\t\t// Check box-sizing and margin behavior\n\t\tdiv.innerHTML = \"\";\n\t\tdiv.style.cssText = \"box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;\";\n\t\tsupport.boxSizing = ( div.offsetWidth === 4 );\n\t\tsupport.doesNotIncludeMarginInBodyOffset = ( body.offsetTop !== 1 );\n\n\t\t// Use window.getComputedStyle because jsdom on node.js will break without it.\n\t\tif ( window.getComputedStyle ) {\n\t\t\tsupport.pixelPosition = ( window.getComputedStyle( div, null ) || {} ).top !== \"1%\";\n\t\t\tsupport.boxSizingReliable = ( window.getComputedStyle( div, null ) || { width: \"4px\" } ).width === \"4px\";\n\n\t\t\t// Check if div with explicit width and no margin-right incorrectly\n\t\t\t// gets computed margin-right based on width of container. (#3333)\n\t\t\t// Fails in WebKit before Feb 2011 nightlies\n\t\t\t// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right\n\t\t\tmarginDiv = div.appendChild( document.createElement(\"div\") );\n\t\t\tmarginDiv.style.cssText = div.style.cssText = divReset;\n\t\t\tmarginDiv.style.marginRight = marginDiv.style.width = \"0\";\n\t\t\tdiv.style.width = \"1px\";\n\n\t\t\tsupport.reliableMarginRight =\n\t\t\t\t!parseFloat( ( window.getComputedStyle( marginDiv, null ) || {} ).marginRight );\n\t\t}\n\n\t\tif ( typeof div.style.zoom !== core_strundefined ) {\n\t\t\t// Support: IE<8\n\t\t\t// Check if natively block-level elements act like inline-block\n\t\t\t// elements when setting their display to 'inline' and giving\n\t\t\t// them layout\n\t\t\tdiv.innerHTML = \"\";\n\t\t\tdiv.style.cssText = divReset + \"width:1px;padding:1px;display:inline;zoom:1\";\n\t\t\tsupport.inlineBlockNeedsLayout = ( div.offsetWidth === 3 );\n\n\t\t\t// Support: IE6\n\t\t\t// Check if elements with layout shrink-wrap their children\n\t\t\tdiv.style.display = \"block\";\n\t\t\tdiv.innerHTML = \"<div></div>\";\n\t\t\tdiv.firstChild.style.width = \"5px\";\n\t\t\tsupport.shrinkWrapBlocks = ( div.offsetWidth !== 3 );\n\n\t\t\tif ( support.inlineBlockNeedsLayout ) {\n\t\t\t\t// Prevent IE 6 from affecting layout for positioned elements #11048\n\t\t\t\t// Prevent IE from shrinking the body in IE 7 mode #12869\n\t\t\t\t// Support: IE<8\n\t\t\t\tbody.style.zoom = 1;\n\t\t\t}\n\t\t}\n\n\t\tbody.removeChild( container );\n\n\t\t// Null elements to avoid leaks in IE\n\t\tcontainer = div = tds = marginDiv = null;\n\t});\n\n\t// Null elements to avoid leaks in IE\n\tall = select = fragment = opt = a = input = null;\n\n\treturn support;\n})();\n\nvar rbrace = /(?:\\{[\\s\\S]*\\}|\\[[\\s\\S]*\\])$/,\n\trmultiDash = /([A-Z])/g;\n\nfunction internalData( elem, name, data, pvt /* Internal Use Only */ ){\n\tif ( !jQuery.acceptData( elem ) ) {\n\t\treturn;\n\t}\n\n\tvar thisCache, ret,\n\t\tinternalKey = jQuery.expando,\n\t\tgetByName = typeof name === \"string\",\n\n\t\t// We have to handle DOM nodes and JS objects differently because IE6-7\n\t\t// can't GC object references properly across the DOM-JS boundary\n\t\tisNode = elem.nodeType,\n\n\t\t// Only DOM nodes need the global jQuery cache; JS object data is\n\t\t// attached directly to the object so GC can occur automatically\n\t\tcache = isNode ? jQuery.cache : elem,\n\n\t\t// Only defining an ID for JS objects if its cache already exists allows\n\t\t// the code to shortcut on the same path as a DOM node with no cache\n\t\tid = isNode ? elem[ internalKey ] : elem[ internalKey ] && internalKey;\n\n\t// Avoid doing any more work than we need to when trying to get data on an\n\t// object that has no data at all\n\tif ( (!id || !cache[id] || (!pvt && !cache[id].data)) && getByName && data === undefined ) {\n\t\treturn;\n\t}\n\n\tif ( !id ) {\n\t\t// Only DOM nodes need a new unique ID for each element since their data\n\t\t// ends up in the global cache\n\t\tif ( isNode ) {\n\t\t\telem[ internalKey ] = id = core_deletedIds.pop() || jQuery.guid++;\n\t\t} else {\n\t\t\tid = internalKey;\n\t\t}\n\t}\n\n\tif ( !cache[ id ] ) {\n\t\tcache[ id ] = {};\n\n\t\t// Avoids exposing jQuery metadata on plain JS objects when the object\n\t\t// is serialized using JSON.stringify\n\t\tif ( !isNode ) {\n\t\t\tcache[ id ].toJSON = jQuery.noop;\n\t\t}\n\t}\n\n\t// An object can be passed to jQuery.data instead of a key/value pair; this gets\n\t// shallow copied over onto the existing cache\n\tif ( typeof name === \"object\" || typeof name === \"function\" ) {\n\t\tif ( pvt ) {\n\t\t\tcache[ id ] = jQuery.extend( cache[ id ], name );\n\t\t} else {\n\t\t\tcache[ id ].data = jQuery.extend( cache[ id ].data, name );\n\t\t}\n\t}\n\n\tthisCache = cache[ id ];\n\n\t// jQuery data() is stored in a separate object inside the object's internal data\n\t// cache in order to avoid key collisions between internal data and user-defined\n\t// data.\n\tif ( !pvt ) {\n\t\tif ( !thisCache.data ) {\n\t\t\tthisCache.data = {};\n\t\t}\n\n\t\tthisCache = thisCache.data;\n\t}\n\n\tif ( data !== undefined ) {\n\t\tthisCache[ jQuery.camelCase( name ) ] = data;\n\t}\n\n\t// Check for both converted-to-camel and non-converted data property names\n\t// If a data property was specified\n\tif ( getByName ) {\n\n\t\t// First Try to find as-is property data\n\t\tret = thisCache[ name ];\n\n\t\t// Test for null|undefined property data\n\t\tif ( ret == null ) {\n\n\t\t\t// Try to find the camelCased property\n\t\t\tret = thisCache[ jQuery.camelCase( name ) ];\n\t\t}\n\t} else {\n\t\tret = thisCache;\n\t}\n\n\treturn ret;\n}\n\nfunction internalRemoveData( elem, name, pvt ) {\n\tif ( !jQuery.acceptData( elem ) ) {\n\t\treturn;\n\t}\n\n\tvar i, l, thisCache,\n\t\tisNode = elem.nodeType,\n\n\t\t// See jQuery.data for more information\n\t\tcache = isNode ? jQuery.cache : elem,\n\t\tid = isNode ? elem[ jQuery.expando ] : jQuery.expando;\n\n\t// If there is already no cache entry for this object, there is no\n\t// purpose in continuing\n\tif ( !cache[ id ] ) {\n\t\treturn;\n\t}\n\n\tif ( name ) {\n\n\t\tthisCache = pvt ? cache[ id ] : cache[ id ].data;\n\n\t\tif ( thisCache ) {\n\n\t\t\t// Support array or space separated string names for data keys\n\t\t\tif ( !jQuery.isArray( name ) ) {\n\n\t\t\t\t// try the string as a key before any manipulation\n\t\t\t\tif ( name in thisCache ) {\n\t\t\t\t\tname = [ name ];\n\t\t\t\t} else {\n\n\t\t\t\t\t// split the camel cased version by spaces unless a key with the spaces exists\n\t\t\t\t\tname = jQuery.camelCase( name );\n\t\t\t\t\tif ( name in thisCache ) {\n\t\t\t\t\t\tname = [ name ];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tname = name.split(\" \");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// If \"name\" is an array of keys...\n\t\t\t\t// When data is initially created, via (\"key\", \"val\") signature,\n\t\t\t\t// keys will be converted to camelCase.\n\t\t\t\t// Since there is no way to tell _how_ a key was added, remove\n\t\t\t\t// both plain key and camelCase key. #12786\n\t\t\t\t// This will only penalize the array argument path.\n\t\t\t\tname = name.concat( jQuery.map( name, jQuery.camelCase ) );\n\t\t\t}\n\n\t\t\tfor ( i = 0, l = name.length; i < l; i++ ) {\n\t\t\t\tdelete thisCache[ name[i] ];\n\t\t\t}\n\n\t\t\t// If there is no data left in the cache, we want to continue\n\t\t\t// and let the cache object itself get destroyed\n\t\t\tif ( !( pvt ? isEmptyDataObject : jQuery.isEmptyObject )( thisCache ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\t// See jQuery.data for more information\n\tif ( !pvt ) {\n\t\tdelete cache[ id ].data;\n\n\t\t// Don't destroy the parent cache unless the internal data object\n\t\t// had been the only thing left in it\n\t\tif ( !isEmptyDataObject( cache[ id ] ) ) {\n\t\t\treturn;\n\t\t}\n\t}\n\n\t// Destroy the cache\n\tif ( isNode ) {\n\t\tjQuery.cleanData( [ elem ], true );\n\n\t// Use delete when supported for expandos or `cache` is not a window per isWindow (#10080)\n\t} else if ( jQuery.support.deleteExpando || cache != cache.window ) {\n\t\tdelete cache[ id ];\n\n\t// When all else fails, null\n\t} else {\n\t\tcache[ id ] = null;\n\t}\n}\n\njQuery.extend({\n\tcache: {},\n\n\t// Unique for each copy of jQuery on the page\n\t// Non-digits removed to match rinlinejQuery\n\texpando: \"jQuery\" + ( core_version + Math.random() ).replace( /\\D/g, \"\" ),\n\n\t// The following elements throw uncatchable exceptions if you\n\t// attempt to add expando properties to them.\n\tnoData: {\n\t\t\"embed\": true,\n\t\t// Ban all objects except for Flash (which handle expandos)\n\t\t\"object\": \"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\",\n\t\t\"applet\": true\n\t},\n\n\thasData: function( elem ) {\n\t\telem = elem.nodeType ? jQuery.cache[ elem[jQuery.expando] ] : elem[ jQuery.expando ];\n\t\treturn !!elem && !isEmptyDataObject( elem );\n\t},\n\n\tdata: function( elem, name, data ) {\n\t\treturn internalData( elem, name, data );\n\t},\n\n\tremoveData: function( elem, name ) {\n\t\treturn internalRemoveData( elem, name );\n\t},\n\n\t// For internal use only.\n\t_data: function( elem, name, data ) {\n\t\treturn internalData( elem, name, data, true );\n\t},\n\n\t_removeData: function( elem, name ) {\n\t\treturn internalRemoveData( elem, name, true );\n\t},\n\n\t// A method for determining if a DOM node can handle the data expando\n\tacceptData: function( elem ) {\n\t\t// Do not set data on non-element because it will not be cleared (#8335).\n\t\tif ( elem.nodeType && elem.nodeType !== 1 && elem.nodeType !== 9 ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar noData = elem.nodeName && jQuery.noData[ elem.nodeName.toLowerCase() ];\n\n\t\t// nodes accept data unless otherwise specified; rejection can be conditional\n\t\treturn !noData || noData !== true && elem.getAttribute(\"classid\") === noData;\n\t}\n});\n\njQuery.fn.extend({\n\tdata: function( key, value ) {\n\t\tvar attrs, name,\n\t\t\telem = this[0],\n\t\t\ti = 0,\n\t\t\tdata = null;\n\n\t\t// Gets all values\n\t\tif ( key === undefined ) {\n\t\t\tif ( this.length ) {\n\t\t\t\tdata = jQuery.data( elem );\n\n\t\t\t\tif ( elem.nodeType === 1 && !jQuery._data( elem, \"parsedAttrs\" ) ) {\n\t\t\t\t\tattrs = elem.attributes;\n\t\t\t\t\tfor ( ; i < attrs.length; i++ ) {\n\t\t\t\t\t\tname = attrs[i].name;\n\n\t\t\t\t\t\tif ( !name.indexOf( \"data-\" ) ) {\n\t\t\t\t\t\t\tname = jQuery.camelCase( name.slice(5) );\n\n\t\t\t\t\t\t\tdataAttr( elem, name, data[ name ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tjQuery._data( elem, \"parsedAttrs\", true );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn data;\n\t\t}\n\n\t\t// Sets multiple values\n\t\tif ( typeof key === \"object\" ) {\n\t\t\treturn this.each(function() {\n\t\t\t\tjQuery.data( this, key );\n\t\t\t});\n\t\t}\n\n\t\treturn jQuery.access( this, function( value ) {\n\n\t\t\tif ( value === undefined ) {\n\t\t\t\t// Try to fetch any internally stored data first\n\t\t\t\treturn elem ? dataAttr( elem, key, jQuery.data( elem, key ) ) : null;\n\t\t\t}\n\n\t\t\tthis.each(function() {\n\t\t\t\tjQuery.data( this, key, value );\n\t\t\t});\n\t\t}, null, value, arguments.length > 1, null, true );\n\t},\n\n\tremoveData: function( key ) {\n\t\treturn this.each(function() {\n\t\t\tjQuery.removeData( this, key );\n\t\t});\n\t}\n});\n\nfunction dataAttr( elem, key, data ) {\n\t// If nothing was found internally, try to fetch any\n\t// data from the HTML5 data-* attribute\n\tif ( data === undefined && elem.nodeType === 1 ) {\n\n\t\tvar name = \"data-\" + key.replace( rmultiDash, \"-$1\" ).toLowerCase();\n\n\t\tdata = elem.getAttribute( name );\n\n\t\tif ( typeof data === \"string\" ) {\n\t\t\ttry {\n\t\t\t\tdata = data === \"true\" ? true :\n\t\t\t\t\tdata === \"false\" ? false :\n\t\t\t\t\tdata === \"null\" ? null :\n\t\t\t\t\t// Only convert to a number if it doesn't change the string\n\t\t\t\t\t+data + \"\" === data ? +data :\n\t\t\t\t\trbrace.test( data ) ? jQuery.parseJSON( data ) :\n\t\t\t\t\t\tdata;\n\t\t\t} catch( e ) {}\n\n\t\t\t// Make sure we set the data so it isn't changed later\n\t\t\tjQuery.data( elem, key, data );\n\n\t\t} else {\n\t\t\tdata = undefined;\n\t\t}\n\t}\n\n\treturn data;\n}\n\n// checks a cache object for emptiness\nfunction isEmptyDataObject( obj ) {\n\tvar name;\n\tfor ( name in obj ) {\n\n\t\t// if the public data object is empty, the private is still empty\n\t\tif ( name === \"data\" && jQuery.isEmptyObject( obj[name] ) ) {\n\t\t\tcontinue;\n\t\t}\n\t\tif ( name !== \"toJSON\" ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\njQuery.extend({\n\tqueue: function( elem, type, data ) {\n\t\tvar queue;\n\n\t\tif ( elem ) {\n\t\t\ttype = ( type || \"fx\" ) + \"queue\";\n\t\t\tqueue = jQuery._data( elem, type );\n\n\t\t\t// Speed up dequeue by getting out quickly if this is just a lookup\n\t\t\tif ( data ) {\n\t\t\t\tif ( !queue || jQuery.isArray(data) ) {\n\t\t\t\t\tqueue = jQuery._data( elem, type, jQuery.makeArray(data) );\n\t\t\t\t} else {\n\t\t\t\t\tqueue.push( data );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn queue || [];\n\t\t}\n\t},\n\n\tdequeue: function( elem, type ) {\n\t\ttype = type || \"fx\";\n\n\t\tvar queue = jQuery.queue( elem, type ),\n\t\t\tstartLength = queue.length,\n\t\t\tfn = queue.shift(),\n\t\t\thooks = jQuery._queueHooks( elem, type ),\n\t\t\tnext = function() {\n\t\t\t\tjQuery.dequeue( elem, type );\n\t\t\t};\n\n\t\t// If the fx queue is dequeued, always remove the progress sentinel\n\t\tif ( fn === \"inprogress\" ) {\n\t\t\tfn = queue.shift();\n\t\t\tstartLength--;\n\t\t}\n\n\t\thooks.cur = fn;\n\t\tif ( fn ) {\n\n\t\t\t// Add a progress sentinel to prevent the fx queue from being\n\t\t\t// automatically dequeued\n\t\t\tif ( type === \"fx\" ) {\n\t\t\t\tqueue.unshift( \"inprogress\" );\n\t\t\t}\n\n\t\t\t// clear up the last queue stop function\n\t\t\tdelete hooks.stop;\n\t\t\tfn.call( elem, next, hooks );\n\t\t}\n\n\t\tif ( !startLength && hooks ) {\n\t\t\thooks.empty.fire();\n\t\t}\n\t},\n\n\t// not intended for public consumption - generates a queueHooks object, or returns the current one\n\t_queueHooks: function( elem, type ) {\n\t\tvar key = type + \"queueHooks\";\n\t\treturn jQuery._data( elem, key ) || jQuery._data( elem, key, {\n\t\t\tempty: jQuery.Callbacks(\"once memory\").add(function() {\n\t\t\t\tjQuery._removeData( elem, type + \"queue\" );\n\t\t\t\tjQuery._removeData( elem, key );\n\t\t\t})\n\t\t});\n\t}\n});\n\njQuery.fn.extend({\n\tqueue: function( type, data ) {\n\t\tvar setter = 2;\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tdata = type;\n\t\t\ttype = \"fx\";\n\t\t\tsetter--;\n\t\t}\n\n\t\tif ( arguments.length < setter ) {\n\t\t\treturn jQuery.queue( this[0], type );\n\t\t}\n\n\t\treturn data === undefined ?\n\t\t\tthis :\n\t\t\tthis.each(function() {\n\t\t\t\tvar queue = jQuery.queue( this, type, data );\n\n\t\t\t\t// ensure a hooks for this queue\n\t\t\t\tjQuery._queueHooks( this, type );\n\n\t\t\t\tif ( type === \"fx\" && queue[0] !== \"inprogress\" ) {\n\t\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t\t}\n\t\t\t});\n\t},\n\tdequeue: function( type ) {\n\t\treturn this.each(function() {\n\t\t\tjQuery.dequeue( this, type );\n\t\t});\n\t},\n\t// Based off of the plugin by Clint Helfers, with permission.\n\t// http://blindsignals.com/index.php/2009/07/jquery-delay/\n\tdelay: function( time, type ) {\n\t\ttime = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;\n\t\ttype = type || \"fx\";\n\n\t\treturn this.queue( type, function( next, hooks ) {\n\t\t\tvar timeout = setTimeout( next, time );\n\t\t\thooks.stop = function() {\n\t\t\t\tclearTimeout( timeout );\n\t\t\t};\n\t\t});\n\t},\n\tclearQueue: function( type ) {\n\t\treturn this.queue( type || \"fx\", [] );\n\t},\n\t// Get a promise resolved when queues of a certain type\n\t// are emptied (fx is the type by default)\n\tpromise: function( type, obj ) {\n\t\tvar tmp,\n\t\t\tcount = 1,\n\t\t\tdefer = jQuery.Deferred(),\n\t\t\telements = this,\n\t\t\ti = this.length,\n\t\t\tresolve = function() {\n\t\t\t\tif ( !( --count ) ) {\n\t\t\t\t\tdefer.resolveWith( elements, [ elements ] );\n\t\t\t\t}\n\t\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tobj = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\ttype = type || \"fx\";\n\n\t\twhile( i-- ) {\n\t\t\ttmp = jQuery._data( elements[ i ], type + \"queueHooks\" );\n\t\t\tif ( tmp && tmp.empty ) {\n\t\t\t\tcount++;\n\t\t\t\ttmp.empty.add( resolve );\n\t\t\t}\n\t\t}\n\t\tresolve();\n\t\treturn defer.promise( obj );\n\t}\n});\nvar nodeHook, boolHook,\n\trclass = /[\\t\\r\\n]/g,\n\trreturn = /\\r/g,\n\trfocusable = /^(?:input|select|textarea|button|object)$/i,\n\trclickable = /^(?:a|area)$/i,\n\trboolean = /^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,\n\truseDefault = /^(?:checked|selected)$/i,\n\tgetSetAttribute = jQuery.support.getSetAttribute,\n\tgetSetInput = jQuery.support.input;\n\njQuery.fn.extend({\n\tattr: function( name, value ) {\n\t\treturn jQuery.access( this, jQuery.attr, name, value, arguments.length > 1 );\n\t},\n\n\tremoveAttr: function( name ) {\n\t\treturn this.each(function() {\n\t\t\tjQuery.removeAttr( this, name );\n\t\t});\n\t},\n\n\tprop: function( name, value ) {\n\t\treturn jQuery.access( this, jQuery.prop, name, value, arguments.length > 1 );\n\t},\n\n\tremoveProp: function( name ) {\n\t\tname = jQuery.propFix[ name ] || name;\n\t\treturn this.each(function() {\n\t\t\t// try/catch handles cases where IE balks (such as removing a property on window)\n\t\t\ttry {\n\t\t\t\tthis[ name ] = undefined;\n\t\t\t\tdelete this[ name ];\n\t\t\t} catch( e ) {}\n\t\t});\n\t},\n\n\taddClass: function( value ) {\n\t\tvar classes, elem, cur, clazz, j,\n\t\t\ti = 0,\n\t\t\tlen = this.length,\n\t\t\tproceed = typeof value === \"string\" && value;\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each(function( j ) {\n\t\t\t\tjQuery( this ).addClass( value.call( this, j, this.className ) );\n\t\t\t});\n\t\t}\n\n\t\tif ( proceed ) {\n\t\t\t// The disjunction here is for better compressibility (see removeClass)\n\t\t\tclasses = ( value || \"\" ).match( core_rnotwhite ) || [];\n\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\telem = this[ i ];\n\t\t\t\tcur = elem.nodeType === 1 && ( elem.className ?\n\t\t\t\t\t( \" \" + elem.className + \" \" ).replace( rclass, \" \" ) :\n\t\t\t\t\t\" \"\n\t\t\t\t);\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( (clazz = classes[j++]) ) {\n\t\t\t\t\t\tif ( cur.indexOf( \" \" + clazz + \" \" ) < 0 ) {\n\t\t\t\t\t\t\tcur += clazz + \" \";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telem.className = jQuery.trim( cur );\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tremoveClass: function( value ) {\n\t\tvar classes, elem, cur, clazz, j,\n\t\t\ti = 0,\n\t\t\tlen = this.length,\n\t\t\tproceed = arguments.length === 0 || typeof value === \"string\" && value;\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each(function( j ) {\n\t\t\t\tjQuery( this ).removeClass( value.call( this, j, this.className ) );\n\t\t\t});\n\t\t}\n\t\tif ( proceed ) {\n\t\t\tclasses = ( value || \"\" ).match( core_rnotwhite ) || [];\n\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\telem = this[ i ];\n\t\t\t\t// This expression is here for better compressibility (see addClass)\n\t\t\t\tcur = elem.nodeType === 1 && ( elem.className ?\n\t\t\t\t\t( \" \" + elem.className + \" \" ).replace( rclass, \" \" ) :\n\t\t\t\t\t\"\"\n\t\t\t\t);\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( (clazz = classes[j++]) ) {\n\t\t\t\t\t\t// Remove *all* instances\n\t\t\t\t\t\twhile ( cur.indexOf( \" \" + clazz + \" \" ) >= 0 ) {\n\t\t\t\t\t\t\tcur = cur.replace( \" \" + clazz + \" \", \" \" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telem.className = value ? jQuery.trim( cur ) : \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\ttoggleClass: function( value, stateVal ) {\n\t\tvar type = typeof value,\n\t\t\tisBool = typeof stateVal === \"boolean\";\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each(function( i ) {\n\t\t\t\tjQuery( this ).toggleClass( value.call(this, i, this.className, stateVal), stateVal );\n\t\t\t});\n\t\t}\n\n\t\treturn this.each(function() {\n\t\t\tif ( type === \"string\" ) {\n\t\t\t\t// toggle individual class names\n\t\t\t\tvar className,\n\t\t\t\t\ti = 0,\n\t\t\t\t\tself = jQuery( this ),\n\t\t\t\t\tstate = stateVal,\n\t\t\t\t\tclassNames = value.match( core_rnotwhite ) || [];\n\n\t\t\t\twhile ( (className = classNames[ i++ ]) ) {\n\t\t\t\t\t// check each className given, space separated list\n\t\t\t\t\tstate = isBool ? state : !self.hasClass( className );\n\t\t\t\t\tself[ state ? \"addClass\" : \"removeClass\" ]( className );\n\t\t\t\t}\n\n\t\t\t// Toggle whole class name\n\t\t\t} else if ( type === core_strundefined || type === \"boolean\" ) {\n\t\t\t\tif ( this.className ) {\n\t\t\t\t\t// store className if set\n\t\t\t\t\tjQuery._data( this, \"__className__\", this.className );\n\t\t\t\t}\n\n\t\t\t\t// If the element has a class name or if we're passed \"false\",\n\t\t\t\t// then remove the whole classname (if there was one, the above saved it).\n\t\t\t\t// Otherwise bring back whatever was previously saved (if anything),\n\t\t\t\t// falling back to the empty string if nothing was stored.\n\t\t\t\tthis.className = this.className || value === false ? \"\" : jQuery._data( this, \"__className__\" ) || \"\";\n\t\t\t}\n\t\t});\n\t},\n\n\thasClass: function( selector ) {\n\t\tvar className = \" \" + selector + \" \",\n\t\t\ti = 0,\n\t\t\tl = this.length;\n\t\tfor ( ; i < l; i++ ) {\n\t\t\tif ( this[i].nodeType === 1 && (\" \" + this[i].className + \" \").replace(rclass, \" \").indexOf( className ) >= 0 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\tval: function( value ) {\n\t\tvar ret, hooks, isFunction,\n\t\t\telem = this[0];\n\n\t\tif ( !arguments.length ) {\n\t\t\tif ( elem ) {\n\t\t\t\thooks = jQuery.valHooks[ elem.type ] || jQuery.valHooks[ elem.nodeName.toLowerCase() ];\n\n\t\t\t\tif ( hooks && \"get\" in hooks && (ret = hooks.get( elem, \"value\" )) !== undefined ) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\n\t\t\t\tret = elem.value;\n\n\t\t\t\treturn typeof ret === \"string\" ?\n\t\t\t\t\t// handle most common string cases\n\t\t\t\t\tret.replace(rreturn, \"\") :\n\t\t\t\t\t// handle cases where value is null/undef or number\n\t\t\t\t\tret == null ? \"\" : ret;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tisFunction = jQuery.isFunction( value );\n\n\t\treturn this.each(function( i ) {\n\t\t\tvar val,\n\t\t\t\tself = jQuery(this);\n\n\t\t\tif ( this.nodeType !== 1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( isFunction ) {\n\t\t\t\tval = value.call( this, i, self.val() );\n\t\t\t} else {\n\t\t\t\tval = value;\n\t\t\t}\n\n\t\t\t// Treat null/undefined as \"\"; convert numbers to string\n\t\t\tif ( val == null ) {\n\t\t\t\tval = \"\";\n\t\t\t} else if ( typeof val === \"number\" ) {\n\t\t\t\tval += \"\";\n\t\t\t} else if ( jQuery.isArray( val ) ) {\n\t\t\t\tval = jQuery.map(val, function ( value ) {\n\t\t\t\t\treturn value == null ? \"\" : value + \"\";\n\t\t\t\t});\n\t\t\t}\n\n\t\t\thooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];\n\n\t\t\t// If set returns undefined, fall back to normal setting\n\t\t\tif ( !hooks || !(\"set\" in hooks) || hooks.set( this, val, \"value\" ) === undefined ) {\n\t\t\t\tthis.value = val;\n\t\t\t}\n\t\t});\n\t}\n});\n\njQuery.extend({\n\tvalHooks: {\n\t\toption: {\n\t\t\tget: function( elem ) {\n\t\t\t\t// attributes.value is undefined in Blackberry 4.7 but\n\t\t\t\t// uses .value. See #6932\n\t\t\t\tvar val = elem.attributes.value;\n\t\t\t\treturn !val || val.specified ? elem.value : elem.text;\n\t\t\t}\n\t\t},\n\t\tselect: {\n\t\t\tget: function( elem ) {\n\t\t\t\tvar value, option,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tindex = elem.selectedIndex,\n\t\t\t\t\tone = elem.type === \"select-one\" || index < 0,\n\t\t\t\t\tvalues = one ? null : [],\n\t\t\t\t\tmax = one ? index + 1 : options.length,\n\t\t\t\t\ti = index < 0 ?\n\t\t\t\t\t\tmax :\n\t\t\t\t\t\tone ? index : 0;\n\n\t\t\t\t// Loop through all the selected options\n\t\t\t\tfor ( ; i < max; i++ ) {\n\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\t// oldIE doesn't update selected after form reset (#2551)\n\t\t\t\t\tif ( ( option.selected || i === index ) &&\n\t\t\t\t\t\t\t// Don't return options that are disabled or in a disabled optgroup\n\t\t\t\t\t\t\t( jQuery.support.optDisabled ? !option.disabled : option.getAttribute(\"disabled\") === null ) &&\n\t\t\t\t\t\t\t( !option.parentNode.disabled || !jQuery.nodeName( option.parentNode, \"optgroup\" ) ) ) {\n\n\t\t\t\t\t\t// Get the specific value for the option\n\t\t\t\t\t\tvalue = jQuery( option ).val();\n\n\t\t\t\t\t\t// We don't need an array for one selects\n\t\t\t\t\t\tif ( one ) {\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Multi-Selects return an array\n\t\t\t\t\t\tvalues.push( value );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn values;\n\t\t\t},\n\n\t\t\tset: function( elem, value ) {\n\t\t\t\tvar values = jQuery.makeArray( value );\n\n\t\t\t\tjQuery(elem).find(\"option\").each(function() {\n\t\t\t\t\tthis.selected = jQuery.inArray( jQuery(this).val(), values ) >= 0;\n\t\t\t\t});\n\n\t\t\t\tif ( !values.length ) {\n\t\t\t\t\telem.selectedIndex = -1;\n\t\t\t\t}\n\t\t\t\treturn values;\n\t\t\t}\n\t\t}\n\t},\n\n\tattr: function( elem, name, value ) {\n\t\tvar hooks, notxml, ret,\n\t\t\tnType = elem.nodeType;\n\n\t\t// don't get/set attributes on text, comment and attribute nodes\n\t\tif ( !elem || nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Fallback to prop when attributes are not supported\n\t\tif ( typeof elem.getAttribute === core_strundefined ) {\n\t\t\treturn jQuery.prop( elem, name, value );\n\t\t}\n\n\t\tnotxml = nType !== 1 || !jQuery.isXMLDoc( elem );\n\n\t\t// All attributes are lowercase\n\t\t// Grab necessary hook if one is defined\n\t\tif ( notxml ) {\n\t\t\tname = name.toLowerCase();\n\t\t\thooks = jQuery.attrHooks[ name ] || ( rboolean.test( name ) ? boolHook : nodeHook );\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\n\t\t\tif ( value === null ) {\n\t\t\t\tjQuery.removeAttr( elem, name );\n\n\t\t\t} else if ( hooks && notxml && \"set\" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ) {\n\t\t\t\treturn ret;\n\n\t\t\t} else {\n\t\t\t\telem.setAttribute( name, value + \"\" );\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t} else if ( hooks && notxml && \"get\" in hooks && (ret = hooks.get( elem, name )) !== null ) {\n\t\t\treturn ret;\n\n\t\t} else {\n\n\t\t\t// In IE9+, Flash objects don't have .getAttribute (#12945)\n\t\t\t// Support: IE9+\n\t\t\tif ( typeof elem.getAttribute !== core_strundefined ) {\n\t\t\t\tret =  elem.getAttribute( name );\n\t\t\t}\n\n\t\t\t// Non-existent attributes return null, we normalize to undefined\n\t\t\treturn ret == null ?\n\t\t\t\tundefined :\n\t\t\t\tret;\n\t\t}\n\t},\n\n\tremoveAttr: function( elem, value ) {\n\t\tvar name, propName,\n\t\t\ti = 0,\n\t\t\tattrNames = value && value.match( core_rnotwhite );\n\n\t\tif ( attrNames && elem.nodeType === 1 ) {\n\t\t\twhile ( (name = attrNames[i++]) ) {\n\t\t\t\tpropName = jQuery.propFix[ name ] || name;\n\n\t\t\t\t// Boolean attributes get special treatment (#10870)\n\t\t\t\tif ( rboolean.test( name ) ) {\n\t\t\t\t\t// Set corresponding property to false for boolean attributes\n\t\t\t\t\t// Also clear defaultChecked/defaultSelected (if appropriate) for IE<8\n\t\t\t\t\tif ( !getSetAttribute && ruseDefault.test( name ) ) {\n\t\t\t\t\t\telem[ jQuery.camelCase( \"default-\" + name ) ] =\n\t\t\t\t\t\t\telem[ propName ] = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\telem[ propName ] = false;\n\t\t\t\t\t}\n\n\t\t\t\t// See #9699 for explanation of this approach (setting first, then removal)\n\t\t\t\t} else {\n\t\t\t\t\tjQuery.attr( elem, name, \"\" );\n\t\t\t\t}\n\n\t\t\t\telem.removeAttribute( getSetAttribute ? name : propName );\n\t\t\t}\n\t\t}\n\t},\n\n\tattrHooks: {\n\t\ttype: {\n\t\t\tset: function( elem, value ) {\n\t\t\t\tif ( !jQuery.support.radioValue && value === \"radio\" && jQuery.nodeName(elem, \"input\") ) {\n\t\t\t\t\t// Setting the type on a radio button after the value resets the value in IE6-9\n\t\t\t\t\t// Reset value to default in case type is set after value during creation\n\t\t\t\t\tvar val = elem.value;\n\t\t\t\t\telem.setAttribute( \"type\", value );\n\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\telem.value = val;\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tpropFix: {\n\t\ttabindex: \"tabIndex\",\n\t\treadonly: \"readOnly\",\n\t\t\"for\": \"htmlFor\",\n\t\t\"class\": \"className\",\n\t\tmaxlength: \"maxLength\",\n\t\tcellspacing: \"cellSpacing\",\n\t\tcellpadding: \"cellPadding\",\n\t\trowspan: \"rowSpan\",\n\t\tcolspan: \"colSpan\",\n\t\tusemap: \"useMap\",\n\t\tframeborder: \"frameBorder\",\n\t\tcontenteditable: \"contentEditable\"\n\t},\n\n\tprop: function( elem, name, value ) {\n\t\tvar ret, hooks, notxml,\n\t\t\tnType = elem.nodeType;\n\n\t\t// don't get/set properties on text, comment and attribute nodes\n\t\tif ( !elem || nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tnotxml = nType !== 1 || !jQuery.isXMLDoc( elem );\n\n\t\tif ( notxml ) {\n\t\t\t// Fix name and attach hooks\n\t\t\tname = jQuery.propFix[ name ] || name;\n\t\t\thooks = jQuery.propHooks[ name ];\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\t\t\tif ( hooks && \"set\" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ) {\n\t\t\t\treturn ret;\n\n\t\t\t} else {\n\t\t\t\treturn ( elem[ name ] = value );\n\t\t\t}\n\n\t\t} else {\n\t\t\tif ( hooks && \"get\" in hooks && (ret = hooks.get( elem, name )) !== null ) {\n\t\t\t\treturn ret;\n\n\t\t\t} else {\n\t\t\t\treturn elem[ name ];\n\t\t\t}\n\t\t}\n\t},\n\n\tpropHooks: {\n\t\ttabIndex: {\n\t\t\tget: function( elem ) {\n\t\t\t\t// elem.tabIndex doesn't always return the correct value when it hasn't been explicitly set\n\t\t\t\t// http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/\n\t\t\t\tvar attributeNode = elem.getAttributeNode(\"tabindex\");\n\n\t\t\t\treturn attributeNode && attributeNode.specified ?\n\t\t\t\t\tparseInt( attributeNode.value, 10 ) :\n\t\t\t\t\trfocusable.test( elem.nodeName ) || rclickable.test( elem.nodeName ) && elem.href ?\n\t\t\t\t\t\t0 :\n\t\t\t\t\t\tundefined;\n\t\t\t}\n\t\t}\n\t}\n});\n\n// Hook for boolean attributes\nboolHook = {\n\tget: function( elem, name ) {\n\t\tvar\n\t\t\t// Use .prop to determine if this attribute is understood as boolean\n\t\t\tprop = jQuery.prop( elem, name ),\n\n\t\t\t// Fetch it accordingly\n\t\t\tattr = typeof prop === \"boolean\" && elem.getAttribute( name ),\n\t\t\tdetail = typeof prop === \"boolean\" ?\n\n\t\t\t\tgetSetInput && getSetAttribute ?\n\t\t\t\t\tattr != null :\n\t\t\t\t\t// oldIE fabricates an empty string for missing boolean attributes\n\t\t\t\t\t// and conflates checked/selected into attroperties\n\t\t\t\t\truseDefault.test( name ) ?\n\t\t\t\t\t\telem[ jQuery.camelCase( \"default-\" + name ) ] :\n\t\t\t\t\t\t!!attr :\n\n\t\t\t\t// fetch an attribute node for properties not recognized as boolean\n\t\t\t\telem.getAttributeNode( name );\n\n\t\treturn detail && detail.value !== false ?\n\t\t\tname.toLowerCase() :\n\t\t\tundefined;\n\t},\n\tset: function( elem, value, name ) {\n\t\tif ( value === false ) {\n\t\t\t// Remove boolean attributes when set to false\n\t\t\tjQuery.removeAttr( elem, name );\n\t\t} else if ( getSetInput && getSetAttribute || !ruseDefault.test( name ) ) {\n\t\t\t// IE<8 needs the *property* name\n\t\t\telem.setAttribute( !getSetAttribute && jQuery.propFix[ name ] || name, name );\n\n\t\t// Use defaultChecked and defaultSelected for oldIE\n\t\t} else {\n\t\t\telem[ jQuery.camelCase( \"default-\" + name ) ] = elem[ name ] = true;\n\t\t}\n\n\t\treturn name;\n\t}\n};\n\n// fix oldIE value attroperty\nif ( !getSetInput || !getSetAttribute ) {\n\tjQuery.attrHooks.value = {\n\t\tget: function( elem, name ) {\n\t\t\tvar ret = elem.getAttributeNode( name );\n\t\t\treturn jQuery.nodeName( elem, \"input\" ) ?\n\n\t\t\t\t// Ignore the value *property* by using defaultValue\n\t\t\t\telem.defaultValue :\n\n\t\t\t\tret && ret.specified ? ret.value : undefined;\n\t\t},\n\t\tset: function( elem, value, name ) {\n\t\t\tif ( jQuery.nodeName( elem, \"input\" ) ) {\n\t\t\t\t// Does not return so that setAttribute is also used\n\t\t\t\telem.defaultValue = value;\n\t\t\t} else {\n\t\t\t\t// Use nodeHook if defined (#1954); otherwise setAttribute is fine\n\t\t\t\treturn nodeHook && nodeHook.set( elem, value, name );\n\t\t\t}\n\t\t}\n\t};\n}\n\n// IE6/7 do not support getting/setting some attributes with get/setAttribute\nif ( !getSetAttribute ) {\n\n\t// Use this for any attribute in IE6/7\n\t// This fixes almost every IE6/7 issue\n\tnodeHook = jQuery.valHooks.button = {\n\t\tget: function( elem, name ) {\n\t\t\tvar ret = elem.getAttributeNode( name );\n\t\t\treturn ret && ( name === \"id\" || name === \"name\" || name === \"coords\" ? ret.value !== \"\" : ret.specified ) ?\n\t\t\t\tret.value :\n\t\t\t\tundefined;\n\t\t},\n\t\tset: function( elem, value, name ) {\n\t\t\t// Set the existing or create a new attribute node\n\t\t\tvar ret = elem.getAttributeNode( name );\n\t\t\tif ( !ret ) {\n\t\t\t\telem.setAttributeNode(\n\t\t\t\t\t(ret = elem.ownerDocument.createAttribute( name ))\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tret.value = value += \"\";\n\n\t\t\t// Break association with cloned elements by also using setAttribute (#9646)\n\t\t\treturn name === \"value\" || value === elem.getAttribute( name ) ?\n\t\t\t\tvalue :\n\t\t\t\tundefined;\n\t\t}\n\t};\n\n\t// Set contenteditable to false on removals(#10429)\n\t// Setting to empty string throws an error as an invalid value\n\tjQuery.attrHooks.contenteditable = {\n\t\tget: nodeHook.get,\n\t\tset: function( elem, value, name ) {\n\t\t\tnodeHook.set( elem, value === \"\" ? false : value, name );\n\t\t}\n\t};\n\n\t// Set width and height to auto instead of 0 on empty string( Bug #8150 )\n\t// This is for removals\n\tjQuery.each([ \"width\", \"height\" ], function( i, name ) {\n\t\tjQuery.attrHooks[ name ] = jQuery.extend( jQuery.attrHooks[ name ], {\n\t\t\tset: function( elem, value ) {\n\t\t\t\tif ( value === \"\" ) {\n\t\t\t\t\telem.setAttribute( name, \"auto\" );\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}\n\n\n// Some attributes require a special call on IE\n// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx\nif ( !jQuery.support.hrefNormalized ) {\n\tjQuery.each([ \"href\", \"src\", \"width\", \"height\" ], function( i, name ) {\n\t\tjQuery.attrHooks[ name ] = jQuery.extend( jQuery.attrHooks[ name ], {\n\t\t\tget: function( elem ) {\n\t\t\t\tvar ret = elem.getAttribute( name, 2 );\n\t\t\t\treturn ret == null ? undefined : ret;\n\t\t\t}\n\t\t});\n\t});\n\n\t// href/src property should get the full normalized URL (#10299/#12915)\n\tjQuery.each([ \"href\", \"src\" ], function( i, name ) {\n\t\tjQuery.propHooks[ name ] = {\n\t\t\tget: function( elem ) {\n\t\t\t\treturn elem.getAttribute( name, 4 );\n\t\t\t}\n\t\t};\n\t});\n}\n\nif ( !jQuery.support.style ) {\n\tjQuery.attrHooks.style = {\n\t\tget: function( elem ) {\n\t\t\t// Return undefined in the case of empty string\n\t\t\t// Note: IE uppercases css property names, but if we were to .toLowerCase()\n\t\t\t// .cssText, that would destroy case senstitivity in URL's, like in \"background\"\n\t\t\treturn elem.style.cssText || undefined;\n\t\t},\n\t\tset: function( elem, value ) {\n\t\t\treturn ( elem.style.cssText = value + \"\" );\n\t\t}\n\t};\n}\n\n// Safari mis-reports the default selected property of an option\n// Accessing the parent's selectedIndex property fixes it\nif ( !jQuery.support.optSelected ) {\n\tjQuery.propHooks.selected = jQuery.extend( jQuery.propHooks.selected, {\n\t\tget: function( elem ) {\n\t\t\tvar parent = elem.parentNode;\n\n\t\t\tif ( parent ) {\n\t\t\t\tparent.selectedIndex;\n\n\t\t\t\t// Make sure that it also works with optgroups, see #5701\n\t\t\t\tif ( parent.parentNode ) {\n\t\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t});\n}\n\n// IE6/7 call enctype encoding\nif ( !jQuery.support.enctype ) {\n\tjQuery.propFix.enctype = \"encoding\";\n}\n\n// Radios and checkboxes getter/setter\nif ( !jQuery.support.checkOn ) {\n\tjQuery.each([ \"radio\", \"checkbox\" ], function() {\n\t\tjQuery.valHooks[ this ] = {\n\t\t\tget: function( elem ) {\n\t\t\t\t// Handle the case where in Webkit \"\" is returned instead of \"on\" if a value isn't specified\n\t\t\t\treturn elem.getAttribute(\"value\") === null ? \"on\" : elem.value;\n\t\t\t}\n\t\t};\n\t});\n}\njQuery.each([ \"radio\", \"checkbox\" ], function() {\n\tjQuery.valHooks[ this ] = jQuery.extend( jQuery.valHooks[ this ], {\n\t\tset: function( elem, value ) {\n\t\t\tif ( jQuery.isArray( value ) ) {\n\t\t\t\treturn ( elem.checked = jQuery.inArray( jQuery(elem).val(), value ) >= 0 );\n\t\t\t}\n\t\t}\n\t});\n});\nvar rformElems = /^(?:input|select|textarea)$/i,\n\trkeyEvent = /^key/,\n\trmouseEvent = /^(?:mouse|contextmenu)|click/,\n\trfocusMorph = /^(?:focusinfocus|focusoutblur)$/,\n\trtypenamespace = /^([^.]*)(?:\\.(.+)|)$/;\n\nfunction returnTrue() {\n\treturn true;\n}\n\nfunction returnFalse() {\n\treturn false;\n}\n\n/*\n * Helper functions for managing events -- not part of the public interface.\n * Props to Dean Edwards' addEvent library for many of the ideas.\n */\njQuery.event = {\n\n\tglobal: {},\n\n\tadd: function( elem, types, handler, data, selector ) {\n\t\tvar tmp, events, t, handleObjIn,\n\t\t\tspecial, eventHandle, handleObj,\n\t\t\thandlers, type, namespaces, origType,\n\t\t\telemData = jQuery._data( elem );\n\n\t\t// Don't attach events to noData or text/comment nodes (but allow plain objects)\n\t\tif ( !elemData ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Caller can pass in an object of custom data in lieu of the handler\n\t\tif ( handler.handler ) {\n\t\t\thandleObjIn = handler;\n\t\t\thandler = handleObjIn.handler;\n\t\t\tselector = handleObjIn.selector;\n\t\t}\n\n\t\t// Make sure that the handler has a unique ID, used to find/remove it later\n\t\tif ( !handler.guid ) {\n\t\t\thandler.guid = jQuery.guid++;\n\t\t}\n\n\t\t// Init the element's event structure and main handler, if this is the first\n\t\tif ( !(events = elemData.events) ) {\n\t\t\tevents = elemData.events = {};\n\t\t}\n\t\tif ( !(eventHandle = elemData.handle) ) {\n\t\t\teventHandle = elemData.handle = function( e ) {\n\t\t\t\t// Discard the second event of a jQuery.event.trigger() and\n\t\t\t\t// when an event is called after a page has unloaded\n\t\t\t\treturn typeof jQuery !== core_strundefined && (!e || jQuery.event.triggered !== e.type) ?\n\t\t\t\t\tjQuery.event.dispatch.apply( eventHandle.elem, arguments ) :\n\t\t\t\t\tundefined;\n\t\t\t};\n\t\t\t// Add elem as a property of the handle fn to prevent a memory leak with IE non-native events\n\t\t\teventHandle.elem = elem;\n\t\t}\n\n\t\t// Handle multiple events separated by a space\n\t\t// jQuery(...).bind(\"mouseover mouseout\", fn);\n\t\ttypes = ( types || \"\" ).match( core_rnotwhite ) || [\"\"];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[t] ) || [];\n\t\t\ttype = origType = tmp[1];\n\t\t\tnamespaces = ( tmp[2] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// If event changes its type, use the special event handlers for the changed type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// If selector defined, determine special event api type, otherwise given type\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\n\t\t\t// Update special based on newly reset type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// handleObj is passed to all event handlers\n\t\t\thandleObj = jQuery.extend({\n\t\t\t\ttype: type,\n\t\t\t\torigType: origType,\n\t\t\t\tdata: data,\n\t\t\t\thandler: handler,\n\t\t\t\tguid: handler.guid,\n\t\t\t\tselector: selector,\n\t\t\t\tneedsContext: selector && jQuery.expr.match.needsContext.test( selector ),\n\t\t\t\tnamespace: namespaces.join(\".\")\n\t\t\t}, handleObjIn );\n\n\t\t\t// Init the event handler queue if we're the first\n\t\t\tif ( !(handlers = events[ type ]) ) {\n\t\t\t\thandlers = events[ type ] = [];\n\t\t\t\thandlers.delegateCount = 0;\n\n\t\t\t\t// Only use addEventListener/attachEvent if the special events handler returns false\n\t\t\t\tif ( !special.setup || special.setup.call( elem, data, namespaces, eventHandle ) === false ) {\n\t\t\t\t\t// Bind the global event handler to the element\n\t\t\t\t\tif ( elem.addEventListener ) {\n\t\t\t\t\t\telem.addEventListener( type, eventHandle, false );\n\n\t\t\t\t\t} else if ( elem.attachEvent ) {\n\t\t\t\t\t\telem.attachEvent( \"on\" + type, eventHandle );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( special.add ) {\n\t\t\t\tspecial.add.call( elem, handleObj );\n\n\t\t\t\tif ( !handleObj.handler.guid ) {\n\t\t\t\t\thandleObj.handler.guid = handler.guid;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add to the element's handler list, delegates in front\n\t\t\tif ( selector ) {\n\t\t\t\thandlers.splice( handlers.delegateCount++, 0, handleObj );\n\t\t\t} else {\n\t\t\t\thandlers.push( handleObj );\n\t\t\t}\n\n\t\t\t// Keep track of which events have ever been used, for event optimization\n\t\t\tjQuery.event.global[ type ] = true;\n\t\t}\n\n\t\t// Nullify elem to prevent memory leaks in IE\n\t\telem = null;\n\t},\n\n\t// Detach an event or set of events from an element\n\tremove: function( elem, types, handler, selector, mappedTypes ) {\n\t\tvar j, handleObj, tmp,\n\t\t\torigCount, t, events,\n\t\t\tspecial, handlers, type,\n\t\t\tnamespaces, origType,\n\t\t\telemData = jQuery.hasData( elem ) && jQuery._data( elem );\n\n\t\tif ( !elemData || !(events = elemData.events) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Once for each type.namespace in types; type may be omitted\n\t\ttypes = ( types || \"\" ).match( core_rnotwhite ) || [\"\"];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[t] ) || [];\n\t\t\ttype = origType = tmp[1];\n\t\t\tnamespaces = ( tmp[2] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// Unbind all events (on this namespace, if provided) for the element\n\t\t\tif ( !type ) {\n\t\t\t\tfor ( type in events ) {\n\t\t\t\t\tjQuery.event.remove( elem, type + types[ t ], handler, selector, true );\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\t\t\thandlers = events[ type ] || [];\n\t\t\ttmp = tmp[2] && new RegExp( \"(^|\\\\.)\" + namespaces.join(\"\\\\.(?:.*\\\\.|)\") + \"(\\\\.|$)\" );\n\n\t\t\t// Remove matching events\n\t\t\torigCount = j = handlers.length;\n\t\t\twhile ( j-- ) {\n\t\t\t\thandleObj = handlers[ j ];\n\n\t\t\t\tif ( ( mappedTypes || origType === handleObj.origType ) &&\n\t\t\t\t\t( !handler || handler.guid === handleObj.guid ) &&\n\t\t\t\t\t( !tmp || tmp.test( handleObj.namespace ) ) &&\n\t\t\t\t\t( !selector || selector === handleObj.selector || selector === \"**\" && handleObj.selector ) ) {\n\t\t\t\t\thandlers.splice( j, 1 );\n\n\t\t\t\t\tif ( handleObj.selector ) {\n\t\t\t\t\t\thandlers.delegateCount--;\n\t\t\t\t\t}\n\t\t\t\t\tif ( special.remove ) {\n\t\t\t\t\t\tspecial.remove.call( elem, handleObj );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove generic event handler if we removed something and no more handlers exist\n\t\t\t// (avoids potential for endless recursion during removal of special event handlers)\n\t\t\tif ( origCount && !handlers.length ) {\n\t\t\t\tif ( !special.teardown || special.teardown.call( elem, namespaces, elemData.handle ) === false ) {\n\t\t\t\t\tjQuery.removeEvent( elem, type, elemData.handle );\n\t\t\t\t}\n\n\t\t\t\tdelete events[ type ];\n\t\t\t}\n\t\t}\n\n\t\t// Remove the expando if it's no longer used\n\t\tif ( jQuery.isEmptyObject( events ) ) {\n\t\t\tdelete elemData.handle;\n\n\t\t\t// removeData also checks for emptiness and clears the expando if empty\n\t\t\t// so use it instead of delete\n\t\t\tjQuery._removeData( elem, \"events\" );\n\t\t}\n\t},\n\n\ttrigger: function( event, data, elem, onlyHandlers ) {\n\t\tvar handle, ontype, cur,\n\t\t\tbubbleType, special, tmp, i,\n\t\t\teventPath = [ elem || document ],\n\t\t\ttype = core_hasOwn.call( event, \"type\" ) ? event.type : event,\n\t\t\tnamespaces = core_hasOwn.call( event, \"namespace\" ) ? event.namespace.split(\".\") : [];\n\n\t\tcur = tmp = elem = elem || document;\n\n\t\t// Don't do events on text and comment nodes\n\t\tif ( elem.nodeType === 3 || elem.nodeType === 8 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// focus/blur morphs to focusin/out; ensure we're not firing them right now\n\t\tif ( rfocusMorph.test( type + jQuery.event.triggered ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( type.indexOf(\".\") >= 0 ) {\n\t\t\t// Namespaced trigger; create a regexp to match event type in handle()\n\t\t\tnamespaces = type.split(\".\");\n\t\t\ttype = namespaces.shift();\n\t\t\tnamespaces.sort();\n\t\t}\n\t\tontype = type.indexOf(\":\") < 0 && \"on\" + type;\n\n\t\t// Caller can pass in a jQuery.Event object, Object, or just an event type string\n\t\tevent = event[ jQuery.expando ] ?\n\t\t\tevent :\n\t\t\tnew jQuery.Event( type, typeof event === \"object\" && event );\n\n\t\tevent.isTrigger = true;\n\t\tevent.namespace = namespaces.join(\".\");\n\t\tevent.namespace_re = event.namespace ?\n\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join(\"\\\\.(?:.*\\\\.|)\") + \"(\\\\.|$)\" ) :\n\t\t\tnull;\n\n\t\t// Clean up the event in case it is being reused\n\t\tevent.result = undefined;\n\t\tif ( !event.target ) {\n\t\t\tevent.target = elem;\n\t\t}\n\n\t\t// Clone any incoming data and prepend the event, creating the handler arg list\n\t\tdata = data == null ?\n\t\t\t[ event ] :\n\t\t\tjQuery.makeArray( data, [ event ] );\n\n\t\t// Allow special events to draw outside the lines\n\t\tspecial = jQuery.event.special[ type ] || {};\n\t\tif ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine event propagation path in advance, per W3C events spec (#9951)\n\t\t// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)\n\t\tif ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {\n\n\t\t\tbubbleType = special.delegateType || type;\n\t\t\tif ( !rfocusMorph.test( bubbleType + type ) ) {\n\t\t\t\tcur = cur.parentNode;\n\t\t\t}\n\t\t\tfor ( ; cur; cur = cur.parentNode ) {\n\t\t\t\teventPath.push( cur );\n\t\t\t\ttmp = cur;\n\t\t\t}\n\n\t\t\t// Only add window if we got to document (e.g., not plain obj or detached DOM)\n\t\t\tif ( tmp === (elem.ownerDocument || document) ) {\n\t\t\t\teventPath.push( tmp.defaultView || tmp.parentWindow || window );\n\t\t\t}\n\t\t}\n\n\t\t// Fire handlers on the event path\n\t\ti = 0;\n\t\twhile ( (cur = eventPath[i++]) && !event.isPropagationStopped() ) {\n\n\t\t\tevent.type = i > 1 ?\n\t\t\t\tbubbleType :\n\t\t\t\tspecial.bindType || type;\n\n\t\t\t// jQuery handler\n\t\t\thandle = ( jQuery._data( cur, \"events\" ) || {} )[ event.type ] && jQuery._data( cur, \"handle\" );\n\t\t\tif ( handle ) {\n\t\t\t\thandle.apply( cur, data );\n\t\t\t}\n\n\t\t\t// Native handler\n\t\t\thandle = ontype && cur[ ontype ];\n\t\t\tif ( handle && jQuery.acceptData( cur ) && handle.apply && handle.apply( cur, data ) === false ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\t\tevent.type = type;\n\n\t\t// If nobody prevented the default action, do it now\n\t\tif ( !onlyHandlers && !event.isDefaultPrevented() ) {\n\n\t\t\tif ( (!special._default || special._default.apply( elem.ownerDocument, data ) === false) &&\n\t\t\t\t!(type === \"click\" && jQuery.nodeName( elem, \"a\" )) && jQuery.acceptData( elem ) ) {\n\n\t\t\t\t// Call a native DOM method on the target with the same name name as the event.\n\t\t\t\t// Can't use an .isFunction() check here because IE6/7 fails that test.\n\t\t\t\t// Don't do default actions on window, that's where global variables be (#6170)\n\t\t\t\tif ( ontype && elem[ type ] && !jQuery.isWindow( elem ) ) {\n\n\t\t\t\t\t// Don't re-trigger an onFOO event when we call its FOO() method\n\t\t\t\t\ttmp = elem[ ontype ];\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = null;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prevent re-triggering of the same event, since we already bubbled it above\n\t\t\t\t\tjQuery.event.triggered = type;\n\t\t\t\t\ttry {\n\t\t\t\t\t\telem[ type ]();\n\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t// IE<9 dies on focus/blur to hidden element (#1486,#12518)\n\t\t\t\t\t\t// only reproducible on winXP IE8 native, not IE9 in IE8 mode\n\t\t\t\t\t}\n\t\t\t\t\tjQuery.event.triggered = undefined;\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = tmp;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\tdispatch: function( event ) {\n\n\t\t// Make a writable jQuery.Event from the native event object\n\t\tevent = jQuery.event.fix( event );\n\n\t\tvar i, ret, handleObj, matched, j,\n\t\t\thandlerQueue = [],\n\t\t\targs = core_slice.call( arguments ),\n\t\t\thandlers = ( jQuery._data( this, \"events\" ) || {} )[ event.type ] || [],\n\t\t\tspecial = jQuery.event.special[ event.type ] || {};\n\n\t\t// Use the fix-ed jQuery.Event rather than the (read-only) native event\n\t\targs[0] = event;\n\t\tevent.delegateTarget = this;\n\n\t\t// Call the preDispatch hook for the mapped type, and let it bail if desired\n\t\tif ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine handlers\n\t\thandlerQueue = jQuery.event.handlers.call( this, event, handlers );\n\n\t\t// Run delegates first; they may want to stop propagation beneath us\n\t\ti = 0;\n\t\twhile ( (matched = handlerQueue[ i++ ]) && !event.isPropagationStopped() ) {\n\t\t\tevent.currentTarget = matched.elem;\n\n\t\t\tj = 0;\n\t\t\twhile ( (handleObj = matched.handlers[ j++ ]) && !event.isImmediatePropagationStopped() ) {\n\n\t\t\t\t// Triggered event must either 1) have no namespace, or\n\t\t\t\t// 2) have namespace(s) a subset or equal to those in the bound event (both can have no namespace).\n\t\t\t\tif ( !event.namespace_re || event.namespace_re.test( handleObj.namespace ) ) {\n\n\t\t\t\t\tevent.handleObj = handleObj;\n\t\t\t\t\tevent.data = handleObj.data;\n\n\t\t\t\t\tret = ( (jQuery.event.special[ handleObj.origType ] || {}).handle || handleObj.handler )\n\t\t\t\t\t\t\t.apply( matched.elem, args );\n\n\t\t\t\t\tif ( ret !== undefined ) {\n\t\t\t\t\t\tif ( (event.result = ret) === false ) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Call the postDispatch hook for the mapped type\n\t\tif ( special.postDispatch ) {\n\t\t\tspecial.postDispatch.call( this, event );\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\thandlers: function( event, handlers ) {\n\t\tvar sel, handleObj, matches, i,\n\t\t\thandlerQueue = [],\n\t\t\tdelegateCount = handlers.delegateCount,\n\t\t\tcur = event.target;\n\n\t\t// Find delegate handlers\n\t\t// Black-hole SVG <use> instance trees (#13180)\n\t\t// Avoid non-left-click bubbling in Firefox (#3861)\n\t\tif ( delegateCount && cur.nodeType && (!event.button || event.type !== \"click\") ) {\n\n\t\t\tfor ( ; cur != this; cur = cur.parentNode || this ) {\n\n\t\t\t\t// Don't check non-elements (#13208)\n\t\t\t\t// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)\n\t\t\t\tif ( cur.nodeType === 1 && (cur.disabled !== true || event.type !== \"click\") ) {\n\t\t\t\t\tmatches = [];\n\t\t\t\t\tfor ( i = 0; i < delegateCount; i++ ) {\n\t\t\t\t\t\thandleObj = handlers[ i ];\n\n\t\t\t\t\t\t// Don't conflict with Object.prototype properties (#13203)\n\t\t\t\t\t\tsel = handleObj.selector + \" \";\n\n\t\t\t\t\t\tif ( matches[ sel ] === undefined ) {\n\t\t\t\t\t\t\tmatches[ sel ] = handleObj.needsContext ?\n\t\t\t\t\t\t\t\tjQuery( sel, this ).index( cur ) >= 0 :\n\t\t\t\t\t\t\t\tjQuery.find( sel, this, null, [ cur ] ).length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( matches[ sel ] ) {\n\t\t\t\t\t\t\tmatches.push( handleObj );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( matches.length ) {\n\t\t\t\t\t\thandlerQueue.push({ elem: cur, handlers: matches });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Add the remaining (directly-bound) handlers\n\t\tif ( delegateCount < handlers.length ) {\n\t\t\thandlerQueue.push({ elem: this, handlers: handlers.slice( delegateCount ) });\n\t\t}\n\n\t\treturn handlerQueue;\n\t},\n\n\tfix: function( event ) {\n\t\tif ( event[ jQuery.expando ] ) {\n\t\t\treturn event;\n\t\t}\n\n\t\t// Create a writable copy of the event object and normalize some properties\n\t\tvar i, prop, copy,\n\t\t\ttype = event.type,\n\t\t\toriginalEvent = event,\n\t\t\tfixHook = this.fixHooks[ type ];\n\n\t\tif ( !fixHook ) {\n\t\t\tthis.fixHooks[ type ] = fixHook =\n\t\t\t\trmouseEvent.test( type ) ? this.mouseHooks :\n\t\t\t\trkeyEvent.test( type ) ? this.keyHooks :\n\t\t\t\t{};\n\t\t}\n\t\tcopy = fixHook.props ? this.props.concat( fixHook.props ) : this.props;\n\n\t\tevent = new jQuery.Event( originalEvent );\n\n\t\ti = copy.length;\n\t\twhile ( i-- ) {\n\t\t\tprop = copy[ i ];\n\t\t\tevent[ prop ] = originalEvent[ prop ];\n\t\t}\n\n\t\t// Support: IE<9\n\t\t// Fix target property (#1925)\n\t\tif ( !event.target ) {\n\t\t\tevent.target = originalEvent.srcElement || document;\n\t\t}\n\n\t\t// Support: Chrome 23+, Safari?\n\t\t// Target should not be a text node (#504, #13143)\n\t\tif ( event.target.nodeType === 3 ) {\n\t\t\tevent.target = event.target.parentNode;\n\t\t}\n\n\t\t// Support: IE<9\n\t\t// For mouse/key events, metaKey==false if it's undefined (#3368, #11328)\n\t\tevent.metaKey = !!event.metaKey;\n\n\t\treturn fixHook.filter ? fixHook.filter( event, originalEvent ) : event;\n\t},\n\n\t// Includes some event props shared by KeyEvent and MouseEvent\n\tprops: \"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which\".split(\" \"),\n\n\tfixHooks: {},\n\n\tkeyHooks: {\n\t\tprops: \"char charCode key keyCode\".split(\" \"),\n\t\tfilter: function( event, original ) {\n\n\t\t\t// Add which for key events\n\t\t\tif ( event.which == null ) {\n\t\t\t\tevent.which = original.charCode != null ? original.charCode : original.keyCode;\n\t\t\t}\n\n\t\t\treturn event;\n\t\t}\n\t},\n\n\tmouseHooks: {\n\t\tprops: \"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement\".split(\" \"),\n\t\tfilter: function( event, original ) {\n\t\t\tvar body, eventDoc, doc,\n\t\t\t\tbutton = original.button,\n\t\t\t\tfromElement = original.fromElement;\n\n\t\t\t// Calculate pageX/Y if missing and clientX/Y available\n\t\t\tif ( event.pageX == null && original.clientX != null ) {\n\t\t\t\teventDoc = event.target.ownerDocument || document;\n\t\t\t\tdoc = eventDoc.documentElement;\n\t\t\t\tbody = eventDoc.body;\n\n\t\t\t\tevent.pageX = original.clientX + ( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) - ( doc && doc.clientLeft || body && body.clientLeft || 0 );\n\t\t\t\tevent.pageY = original.clientY + ( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) - ( doc && doc.clientTop  || body && body.clientTop  || 0 );\n\t\t\t}\n\n\t\t\t// Add relatedTarget, if necessary\n\t\t\tif ( !event.relatedTarget && fromElement ) {\n\t\t\t\tevent.relatedTarget = fromElement === event.target ? original.toElement : fromElement;\n\t\t\t}\n\n\t\t\t// Add which for click: 1 === left; 2 === middle; 3 === right\n\t\t\t// Note: button is not normalized, so don't use it\n\t\t\tif ( !event.which && button !== undefined ) {\n\t\t\t\tevent.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );\n\t\t\t}\n\n\t\t\treturn event;\n\t\t}\n\t},\n\n\tspecial: {\n\t\tload: {\n\t\t\t// Prevent triggered image.load events from bubbling to window.load\n\t\t\tnoBubble: true\n\t\t},\n\t\tclick: {\n\t\t\t// For checkbox, fire native event so checked state will be right\n\t\t\ttrigger: function() {\n\t\t\t\tif ( jQuery.nodeName( this, \"input\" ) && this.type === \"checkbox\" && this.click ) {\n\t\t\t\t\tthis.click();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tfocus: {\n\t\t\t// Fire native event if possible so blur/focus sequence is correct\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this !== document.activeElement && this.focus ) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tthis.focus();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t// Support: IE<9\n\t\t\t\t\t\t// If we error on focus to hidden element (#1486, #12518),\n\t\t\t\t\t\t// let .trigger() run the handlers\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelegateType: \"focusin\"\n\t\t},\n\t\tblur: {\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this === document.activeElement && this.blur ) {\n\t\t\t\t\tthis.blur();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelegateType: \"focusout\"\n\t\t},\n\n\t\tbeforeunload: {\n\t\t\tpostDispatch: function( event ) {\n\n\t\t\t\t// Even when returnValue equals to undefined Firefox will still show alert\n\t\t\t\tif ( event.result !== undefined ) {\n\t\t\t\t\tevent.originalEvent.returnValue = event.result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tsimulate: function( type, elem, event, bubble ) {\n\t\t// Piggyback on a donor event to simulate a different one.\n\t\t// Fake originalEvent to avoid donor's stopPropagation, but if the\n\t\t// simulated event prevents default then we do the same on the donor.\n\t\tvar e = jQuery.extend(\n\t\t\tnew jQuery.Event(),\n\t\t\tevent,\n\t\t\t{ type: type,\n\t\t\t\tisSimulated: true,\n\t\t\t\toriginalEvent: {}\n\t\t\t}\n\t\t);\n\t\tif ( bubble ) {\n\t\t\tjQuery.event.trigger( e, null, elem );\n\t\t} else {\n\t\t\tjQuery.event.dispatch.call( elem, e );\n\t\t}\n\t\tif ( e.isDefaultPrevented() ) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n};\n\njQuery.removeEvent = document.removeEventListener ?\n\tfunction( elem, type, handle ) {\n\t\tif ( elem.removeEventListener ) {\n\t\t\telem.removeEventListener( type, handle, false );\n\t\t}\n\t} :\n\tfunction( elem, type, handle ) {\n\t\tvar name = \"on\" + type;\n\n\t\tif ( elem.detachEvent ) {\n\n\t\t\t// #8545, #7054, preventing memory leaks for custom events in IE6-8\n\t\t\t// detachEvent needed property on element, by name of that event, to properly expose it to GC\n\t\t\tif ( typeof elem[ name ] === core_strundefined ) {\n\t\t\t\telem[ name ] = null;\n\t\t\t}\n\n\t\t\telem.detachEvent( name, handle );\n\t\t}\n\t};\n\njQuery.Event = function( src, props ) {\n\t// Allow instantiation without the 'new' keyword\n\tif ( !(this instanceof jQuery.Event) ) {\n\t\treturn new jQuery.Event( src, props );\n\t}\n\n\t// Event object\n\tif ( src && src.type ) {\n\t\tthis.originalEvent = src;\n\t\tthis.type = src.type;\n\n\t\t// Events bubbling up the document may have been marked as prevented\n\t\t// by a handler lower down the tree; reflect the correct value.\n\t\tthis.isDefaultPrevented = ( src.defaultPrevented || src.returnValue === false ||\n\t\t\tsrc.getPreventDefault && src.getPreventDefault() ) ? returnTrue : returnFalse;\n\n\t// Event type\n\t} else {\n\t\tthis.type = src;\n\t}\n\n\t// Put explicitly provided properties onto the event object\n\tif ( props ) {\n\t\tjQuery.extend( this, props );\n\t}\n\n\t// Create a timestamp if incoming event doesn't have one\n\tthis.timeStamp = src && src.timeStamp || jQuery.now();\n\n\t// Mark it as fixed\n\tthis[ jQuery.expando ] = true;\n};\n\n// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding\n// http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html\njQuery.Event.prototype = {\n\tisDefaultPrevented: returnFalse,\n\tisPropagationStopped: returnFalse,\n\tisImmediatePropagationStopped: returnFalse,\n\n\tpreventDefault: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isDefaultPrevented = returnTrue;\n\t\tif ( !e ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If preventDefault exists, run it on the original event\n\t\tif ( e.preventDefault ) {\n\t\t\te.preventDefault();\n\n\t\t// Support: IE\n\t\t// Otherwise set the returnValue property of the original event to false\n\t\t} else {\n\t\t\te.returnValue = false;\n\t\t}\n\t},\n\tstopPropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isPropagationStopped = returnTrue;\n\t\tif ( !e ) {\n\t\t\treturn;\n\t\t}\n\t\t// If stopPropagation exists, run it on the original event\n\t\tif ( e.stopPropagation ) {\n\t\t\te.stopPropagation();\n\t\t}\n\n\t\t// Support: IE\n\t\t// Set the cancelBubble property of the original event to true\n\t\te.cancelBubble = true;\n\t},\n\tstopImmediatePropagation: function() {\n\t\tthis.isImmediatePropagationStopped = returnTrue;\n\t\tthis.stopPropagation();\n\t}\n};\n\n// Create mouseenter/leave events using mouseover/out and event-time checks\njQuery.each({\n\tmouseenter: \"mouseover\",\n\tmouseleave: \"mouseout\"\n}, function( orig, fix ) {\n\tjQuery.event.special[ orig ] = {\n\t\tdelegateType: fix,\n\t\tbindType: fix,\n\n\t\thandle: function( event ) {\n\t\t\tvar ret,\n\t\t\t\ttarget = this,\n\t\t\t\trelated = event.relatedTarget,\n\t\t\t\thandleObj = event.handleObj;\n\n\t\t\t// For mousenter/leave call the handler if related is outside the target.\n\t\t\t// NB: No relatedTarget if the mouse left/entered the browser window\n\t\t\tif ( !related || (related !== target && !jQuery.contains( target, related )) ) {\n\t\t\t\tevent.type = handleObj.origType;\n\t\t\t\tret = handleObj.handler.apply( this, arguments );\n\t\t\t\tevent.type = fix;\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\t};\n});\n\n// IE submit delegation\nif ( !jQuery.support.submitBubbles ) {\n\n\tjQuery.event.special.submit = {\n\t\tsetup: function() {\n\t\t\t// Only need this for delegated form submit events\n\t\t\tif ( jQuery.nodeName( this, \"form\" ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Lazy-add a submit handler when a descendant form may potentially be submitted\n\t\t\tjQuery.event.add( this, \"click._submit keypress._submit\", function( e ) {\n\t\t\t\t// Node name check avoids a VML-related crash in IE (#9807)\n\t\t\t\tvar elem = e.target,\n\t\t\t\t\tform = jQuery.nodeName( elem, \"input\" ) || jQuery.nodeName( elem, \"button\" ) ? elem.form : undefined;\n\t\t\t\tif ( form && !jQuery._data( form, \"submitBubbles\" ) ) {\n\t\t\t\t\tjQuery.event.add( form, \"submit._submit\", function( event ) {\n\t\t\t\t\t\tevent._submit_bubble = true;\n\t\t\t\t\t});\n\t\t\t\t\tjQuery._data( form, \"submitBubbles\", true );\n\t\t\t\t}\n\t\t\t});\n\t\t\t// return undefined since we don't need an event listener\n\t\t},\n\n\t\tpostDispatch: function( event ) {\n\t\t\t// If form was submitted by the user, bubble the event up the tree\n\t\t\tif ( event._submit_bubble ) {\n\t\t\t\tdelete event._submit_bubble;\n\t\t\t\tif ( this.parentNode && !event.isTrigger ) {\n\t\t\t\t\tjQuery.event.simulate( \"submit\", this.parentNode, event, true );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tteardown: function() {\n\t\t\t// Only need this for delegated form submit events\n\t\t\tif ( jQuery.nodeName( this, \"form\" ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Remove delegated handlers; cleanData eventually reaps submit handlers attached above\n\t\t\tjQuery.event.remove( this, \"._submit\" );\n\t\t}\n\t};\n}\n\n// IE change delegation and checkbox/radio fix\nif ( !jQuery.support.changeBubbles ) {\n\n\tjQuery.event.special.change = {\n\n\t\tsetup: function() {\n\n\t\t\tif ( rformElems.test( this.nodeName ) ) {\n\t\t\t\t// IE doesn't fire change on a check/radio until blur; trigger it on click\n\t\t\t\t// after a propertychange. Eat the blur-change in special.change.handle.\n\t\t\t\t// This still fires onchange a second time for check/radio after blur.\n\t\t\t\tif ( this.type === \"checkbox\" || this.type === \"radio\" ) {\n\t\t\t\t\tjQuery.event.add( this, \"propertychange._change\", function( event ) {\n\t\t\t\t\t\tif ( event.originalEvent.propertyName === \"checked\" ) {\n\t\t\t\t\t\t\tthis._just_changed = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tjQuery.event.add( this, \"click._change\", function( event ) {\n\t\t\t\t\t\tif ( this._just_changed && !event.isTrigger ) {\n\t\t\t\t\t\t\tthis._just_changed = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Allow triggered, simulated change events (#11500)\n\t\t\t\t\t\tjQuery.event.simulate( \"change\", this, event, true );\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// Delegated event; lazy-add a change handler on descendant inputs\n\t\t\tjQuery.event.add( this, \"beforeactivate._change\", function( e ) {\n\t\t\t\tvar elem = e.target;\n\n\t\t\t\tif ( rformElems.test( elem.nodeName ) && !jQuery._data( elem, \"changeBubbles\" ) ) {\n\t\t\t\t\tjQuery.event.add( elem, \"change._change\", function( event ) {\n\t\t\t\t\t\tif ( this.parentNode && !event.isSimulated && !event.isTrigger ) {\n\t\t\t\t\t\t\tjQuery.event.simulate( \"change\", this.parentNode, event, true );\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tjQuery._data( elem, \"changeBubbles\", true );\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\thandle: function( event ) {\n\t\t\tvar elem = event.target;\n\n\t\t\t// Swallow native change events from checkbox/radio, we already triggered them above\n\t\t\tif ( this !== elem || event.isSimulated || event.isTrigger || (elem.type !== \"radio\" && elem.type !== \"checkbox\") ) {\n\t\t\t\treturn event.handleObj.handler.apply( this, arguments );\n\t\t\t}\n\t\t},\n\n\t\tteardown: function() {\n\t\t\tjQuery.event.remove( this, \"._change\" );\n\n\t\t\treturn !rformElems.test( this.nodeName );\n\t\t}\n\t};\n}\n\n// Create \"bubbling\" focus and blur events\nif ( !jQuery.support.focusinBubbles ) {\n\tjQuery.each({ focus: \"focusin\", blur: \"focusout\" }, function( orig, fix ) {\n\n\t\t// Attach a single capturing handler while someone wants focusin/focusout\n\t\tvar attaches = 0,\n\t\t\thandler = function( event ) {\n\t\t\t\tjQuery.event.simulate( fix, event.target, jQuery.event.fix( event ), true );\n\t\t\t};\n\n\t\tjQuery.event.special[ fix ] = {\n\t\t\tsetup: function() {\n\t\t\t\tif ( attaches++ === 0 ) {\n\t\t\t\t\tdocument.addEventListener( orig, handler, true );\n\t\t\t\t}\n\t\t\t},\n\t\t\tteardown: function() {\n\t\t\t\tif ( --attaches === 0 ) {\n\t\t\t\t\tdocument.removeEventListener( orig, handler, true );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t});\n}\n\njQuery.fn.extend({\n\n\ton: function( types, selector, data, fn, /*INTERNAL*/ one ) {\n\t\tvar type, origFn;\n\n\t\t// Types can be a map of types/handlers\n\t\tif ( typeof types === \"object\" ) {\n\t\t\t// ( types-Object, selector, data )\n\t\t\tif ( typeof selector !== \"string\" ) {\n\t\t\t\t// ( types-Object, data )\n\t\t\t\tdata = data || selector;\n\t\t\t\tselector = undefined;\n\t\t\t}\n\t\t\tfor ( type in types ) {\n\t\t\t\tthis.on( type, selector, data, types[ type ], one );\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\n\t\tif ( data == null && fn == null ) {\n\t\t\t// ( types, fn )\n\t\t\tfn = selector;\n\t\t\tdata = selector = undefined;\n\t\t} else if ( fn == null ) {\n\t\t\tif ( typeof selector === \"string\" ) {\n\t\t\t\t// ( types, selector, fn )\n\t\t\t\tfn = data;\n\t\t\t\tdata = undefined;\n\t\t\t} else {\n\t\t\t\t// ( types, data, fn )\n\t\t\t\tfn = data;\n\t\t\t\tdata = selector;\n\t\t\t\tselector = undefined;\n\t\t\t}\n\t\t}\n\t\tif ( fn === false ) {\n\t\t\tfn = returnFalse;\n\t\t} else if ( !fn ) {\n\t\t\treturn this;\n\t\t}\n\n\t\tif ( one === 1 ) {\n\t\t\torigFn = fn;\n\t\t\tfn = function( event ) {\n\t\t\t\t// Can use an empty set, since event contains the info\n\t\t\t\tjQuery().off( event );\n\t\t\t\treturn origFn.apply( this, arguments );\n\t\t\t};\n\t\t\t// Use same guid so caller can remove using origFn\n\t\t\tfn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );\n\t\t}\n\t\treturn this.each( function() {\n\t\t\tjQuery.event.add( this, types, fn, data, selector );\n\t\t});\n\t},\n\tone: function( types, selector, data, fn ) {\n\t\treturn this.on( types, selector, data, fn, 1 );\n\t},\n\toff: function( types, selector, fn ) {\n\t\tvar handleObj, type;\n\t\tif ( types && types.preventDefault && types.handleObj ) {\n\t\t\t// ( event )  dispatched jQuery.Event\n\t\t\thandleObj = types.handleObj;\n\t\t\tjQuery( types.delegateTarget ).off(\n\t\t\t\thandleObj.namespace ? handleObj.origType + \".\" + handleObj.namespace : handleObj.origType,\n\t\t\t\thandleObj.selector,\n\t\t\t\thandleObj.handler\n\t\t\t);\n\t\t\treturn this;\n\t\t}\n\t\tif ( typeof types === \"object\" ) {\n\t\t\t// ( types-object [, selector] )\n\t\t\tfor ( type in types ) {\n\t\t\t\tthis.off( type, selector, types[ type ] );\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t\tif ( selector === false || typeof selector === \"function\" ) {\n\t\t\t// ( types [, fn] )\n\t\t\tfn = selector;\n\t\t\tselector = undefined;\n\t\t}\n\t\tif ( fn === false ) {\n\t\t\tfn = returnFalse;\n\t\t}\n\t\treturn this.each(function() {\n\t\t\tjQuery.event.remove( this, types, fn, selector );\n\t\t});\n\t},\n\n\tbind: function( types, data, fn ) {\n\t\treturn this.on( types, null, data, fn );\n\t},\n\tunbind: function( types, fn ) {\n\t\treturn this.off( types, null, fn );\n\t},\n\n\tdelegate: function( selector, types, data, fn ) {\n\t\treturn this.on( types, selector, data, fn );\n\t},\n\tundelegate: function( selector, types, fn ) {\n\t\t// ( namespace ) or ( selector, types [, fn] )\n\t\treturn arguments.length === 1 ? this.off( selector, \"**\" ) : this.off( types, selector || \"**\", fn );\n\t},\n\n\ttrigger: function( type, data ) {\n\t\treturn this.each(function() {\n\t\t\tjQuery.event.trigger( type, data, this );\n\t\t});\n\t},\n\ttriggerHandler: function( type, data ) {\n\t\tvar elem = this[0];\n\t\tif ( elem ) {\n\t\t\treturn jQuery.event.trigger( type, data, elem, true );\n\t\t}\n\t}\n});\n/*!\n * Sizzle CSS Selector Engine\n * Copyright 2012 jQuery Foundation and other contributors\n * Released under the MIT license\n * http://sizzlejs.com/\n */\n(function( window, undefined ) {\n\nvar i,\n\tcachedruns,\n\tExpr,\n\tgetText,\n\tisXML,\n\tcompile,\n\thasDuplicate,\n\toutermostContext,\n\n\t// Local document vars\n\tsetDocument,\n\tdocument,\n\tdocElem,\n\tdocumentIsXML,\n\trbuggyQSA,\n\trbuggyMatches,\n\tmatches,\n\tcontains,\n\tsortOrder,\n\n\t// Instance-specific data\n\texpando = \"sizzle\" + -(new Date()),\n\tpreferredDoc = window.document,\n\tsupport = {},\n\tdirruns = 0,\n\tdone = 0,\n\tclassCache = createCache(),\n\ttokenCache = createCache(),\n\tcompilerCache = createCache(),\n\n\t// General-purpose constants\n\tstrundefined = typeof undefined,\n\tMAX_NEGATIVE = 1 << 31,\n\n\t// Array methods\n\tarr = [],\n\tpop = arr.pop,\n\tpush = arr.push,\n\tslice = arr.slice,\n\t// Use a stripped-down indexOf if we can't use a native one\n\tindexOf = arr.indexOf || function( elem ) {\n\t\tvar i = 0,\n\t\t\tlen = this.length;\n\t\tfor ( ; i < len; i++ ) {\n\t\t\tif ( this[i] === elem ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t},\n\n\n\t// Regular expressions\n\n\t// Whitespace characters http://www.w3.org/TR/css3-selectors/#whitespace\n\twhitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n\t// http://www.w3.org/TR/css3-syntax/#characters\n\tcharacterEncoding = \"(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+\",\n\n\t// Loosely modeled on CSS identifier characters\n\t// An unquoted value should be a CSS identifier http://www.w3.org/TR/css3-selectors/#attribute-selectors\n\t// Proper syntax: http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier\n\tidentifier = characterEncoding.replace( \"w\", \"w#\" ),\n\n\t// Acceptable operators http://www.w3.org/TR/selectors/#attribute-selectors\n\toperators = \"([*^$|!~]?=)\",\n\tattributes = \"\\\\[\" + whitespace + \"*(\" + characterEncoding + \")\" + whitespace +\n\t\t\"*(?:\" + operators + whitespace + \"*(?:(['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|(\" + identifier + \")|)|)\" + whitespace + \"*\\\\]\",\n\n\t// Prefer arguments quoted,\n\t//   then not containing pseudos/brackets,\n\t//   then attribute selectors/non-parenthetical expressions,\n\t//   then anything else\n\t// These preferences are here to reduce the number of selectors\n\t//   needing tokenize in the PSEUDO preFilter\n\tpseudos = \":(\" + characterEncoding + \")(?:\\\\(((['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + attributes.replace( 3, 8 ) + \")*)|.*)\\\\)|)\",\n\n\t// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter\n\trtrim = new RegExp( \"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" + whitespace + \"+$\", \"g\" ),\n\n\trcomma = new RegExp( \"^\" + whitespace + \"*,\" + whitespace + \"*\" ),\n\trcombinators = new RegExp( \"^\" + whitespace + \"*([\\\\x20\\\\t\\\\r\\\\n\\\\f>+~])\" + whitespace + \"*\" ),\n\trpseudo = new RegExp( pseudos ),\n\tridentifier = new RegExp( \"^\" + identifier + \"$\" ),\n\n\tmatchExpr = {\n\t\t\"ID\": new RegExp( \"^#(\" + characterEncoding + \")\" ),\n\t\t\"CLASS\": new RegExp( \"^\\\\.(\" + characterEncoding + \")\" ),\n\t\t\"NAME\": new RegExp( \"^\\\\[name=['\\\"]?(\" + characterEncoding + \")['\\\"]?\\\\]\" ),\n\t\t\"TAG\": new RegExp( \"^(\" + characterEncoding.replace( \"w\", \"w*\" ) + \")\" ),\n\t\t\"ATTR\": new RegExp( \"^\" + attributes ),\n\t\t\"PSEUDO\": new RegExp( \"^\" + pseudos ),\n\t\t\"CHILD\": new RegExp( \"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" + whitespace +\n\t\t\t\"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" + whitespace +\n\t\t\t\"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\", \"i\" ),\n\t\t// For use in libraries implementing .is()\n\t\t// We use this for POS matching in `select`\n\t\t\"needsContext\": new RegExp( \"^\" + whitespace + \"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" +\n\t\t\twhitespace + \"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\", \"i\" )\n\t},\n\n\trsibling = /[\\x20\\t\\r\\n\\f]*[+~]/,\n\n\trnative = /^[^{]+\\{\\s*\\[native code/,\n\n\t// Easily-parseable/retrievable ID or TAG or CLASS selectors\n\trquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,\n\n\trinputs = /^(?:input|select|textarea|button)$/i,\n\trheader = /^h\\d$/i,\n\n\trescape = /'|\\\\/g,\n\trattributeQuotes = /\\=[\\x20\\t\\r\\n\\f]*([^'\"\\]]*)[\\x20\\t\\r\\n\\f]*\\]/g,\n\n\t// CSS escapes http://www.w3.org/TR/CSS21/syndata.html#escaped-characters\n\trunescape = /\\\\([\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|.)/g,\n\tfunescape = function( _, escaped ) {\n\t\tvar high = \"0x\" + escaped - 0x10000;\n\t\t// NaN means non-codepoint\n\t\treturn high !== high ?\n\t\t\tescaped :\n\t\t\t// BMP codepoint\n\t\t\thigh < 0 ?\n\t\t\t\tString.fromCharCode( high + 0x10000 ) :\n\t\t\t\t// Supplemental Plane codepoint (surrogate pair)\n\t\t\t\tString.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );\n\t};\n\n// Use a stripped-down slice if we can't use a native one\ntry {\n\tslice.call( preferredDoc.documentElement.childNodes, 0 )[0].nodeType;\n} catch ( e ) {\n\tslice = function( i ) {\n\t\tvar elem,\n\t\t\tresults = [];\n\t\twhile ( (elem = this[i++]) ) {\n\t\t\tresults.push( elem );\n\t\t}\n\t\treturn results;\n\t};\n}\n\n/**\n * For feature detection\n * @param {Function} fn The function to test for native support\n */\nfunction isNative( fn ) {\n\treturn rnative.test( fn + \"\" );\n}\n\n/**\n * Create key-value caches of limited size\n * @returns {Function(string, Object)} Returns the Object data after storing it on itself with\n *\tproperty name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)\n *\tdeleting the oldest entry\n */\nfunction createCache() {\n\tvar cache,\n\t\tkeys = [];\n\n\treturn (cache = function( key, value ) {\n\t\t// Use (key + \" \") to avoid collision with native prototype properties (see Issue #157)\n\t\tif ( keys.push( key += \" \" ) > Expr.cacheLength ) {\n\t\t\t// Only keep the most recent entries\n\t\t\tdelete cache[ keys.shift() ];\n\t\t}\n\t\treturn (cache[ key ] = value);\n\t});\n}\n\n/**\n * Mark a function for special use by Sizzle\n * @param {Function} fn The function to mark\n */\nfunction markFunction( fn ) {\n\tfn[ expando ] = true;\n\treturn fn;\n}\n\n/**\n * Support testing using an element\n * @param {Function} fn Passed the created div and expects a boolean result\n */\nfunction assert( fn ) {\n\tvar div = document.createElement(\"div\");\n\n\ttry {\n\t\treturn fn( div );\n\t} catch (e) {\n\t\treturn false;\n\t} finally {\n\t\t// release memory in IE\n\t\tdiv = null;\n\t}\n}\n\nfunction Sizzle( selector, context, results, seed ) {\n\tvar match, elem, m, nodeType,\n\t\t// QSA vars\n\t\ti, groups, old, nid, newContext, newSelector;\n\n\tif ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {\n\t\tsetDocument( context );\n\t}\n\n\tcontext = context || document;\n\tresults = results || [];\n\n\tif ( !selector || typeof selector !== \"string\" ) {\n\t\treturn results;\n\t}\n\n\tif ( (nodeType = context.nodeType) !== 1 && nodeType !== 9 ) {\n\t\treturn [];\n\t}\n\n\tif ( !documentIsXML && !seed ) {\n\n\t\t// Shortcuts\n\t\tif ( (match = rquickExpr.exec( selector )) ) {\n\t\t\t// Speed-up: Sizzle(\"#ID\")\n\t\t\tif ( (m = match[1]) ) {\n\t\t\t\tif ( nodeType === 9 ) {\n\t\t\t\t\telem = context.getElementById( m );\n\t\t\t\t\t// Check parentNode to catch when Blackberry 4.6 returns\n\t\t\t\t\t// nodes that are no longer in the document #6963\n\t\t\t\t\tif ( elem && elem.parentNode ) {\n\t\t\t\t\t\t// Handle the case where IE, Opera, and Webkit return items\n\t\t\t\t\t\t// by name instead of ID\n\t\t\t\t\t\tif ( elem.id === m ) {\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Context is not a document\n\t\t\t\t\tif ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&\n\t\t\t\t\t\tcontains( context, elem ) && elem.id === m ) {\n\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// Speed-up: Sizzle(\"TAG\")\n\t\t\t} else if ( match[2] ) {\n\t\t\t\tpush.apply( results, slice.call(context.getElementsByTagName( selector ), 0) );\n\t\t\t\treturn results;\n\n\t\t\t// Speed-up: Sizzle(\".CLASS\")\n\t\t\t} else if ( (m = match[3]) && support.getByClassName && context.getElementsByClassName ) {\n\t\t\t\tpush.apply( results, slice.call(context.getElementsByClassName( m ), 0) );\n\t\t\t\treturn results;\n\t\t\t}\n\t\t}\n\n\t\t// QSA path\n\t\tif ( support.qsa && !rbuggyQSA.test(selector) ) {\n\t\t\told = true;\n\t\t\tnid = expando;\n\t\t\tnewContext = context;\n\t\t\tnewSelector = nodeType === 9 && selector;\n\n\t\t\t// qSA works strangely on Element-rooted queries\n\t\t\t// We can work around this by specifying an extra ID on the root\n\t\t\t// and working up from there (Thanks to Andrew Dupont for the technique)\n\t\t\t// IE 8 doesn't work on object elements\n\t\t\tif ( nodeType === 1 && context.nodeName.toLowerCase() !== \"object\" ) {\n\t\t\t\tgroups = tokenize( selector );\n\n\t\t\t\tif ( (old = context.getAttribute(\"id\")) ) {\n\t\t\t\t\tnid = old.replace( rescape, \"\\\\$&\" );\n\t\t\t\t} else {\n\t\t\t\t\tcontext.setAttribute( \"id\", nid );\n\t\t\t\t}\n\t\t\t\tnid = \"[id='\" + nid + \"'] \";\n\n\t\t\t\ti = groups.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tgroups[i] = nid + toSelector( groups[i] );\n\t\t\t\t}\n\t\t\t\tnewContext = rsibling.test( selector ) && context.parentNode || context;\n\t\t\t\tnewSelector = groups.join(\",\");\n\t\t\t}\n\n\t\t\tif ( newSelector ) {\n\t\t\t\ttry {\n\t\t\t\t\tpush.apply( results, slice.call( newContext.querySelectorAll(\n\t\t\t\t\t\tnewSelector\n\t\t\t\t\t), 0 ) );\n\t\t\t\t\treturn results;\n\t\t\t\t} catch(qsaError) {\n\t\t\t\t} finally {\n\t\t\t\t\tif ( !old ) {\n\t\t\t\t\t\tcontext.removeAttribute(\"id\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// All others\n\treturn select( selector.replace( rtrim, \"$1\" ), context, results, seed );\n}\n\n/**\n * Detect xml\n * @param {Element|Object} elem An element or a document\n */\nisXML = Sizzle.isXML = function( elem ) {\n\t// documentElement is verified for cases where it doesn't yet exist\n\t// (such as loading iframes in IE - #4833)\n\tvar documentElement = elem && (elem.ownerDocument || elem).documentElement;\n\treturn documentElement ? documentElement.nodeName !== \"HTML\" : false;\n};\n\n/**\n * Sets document-related variables once based on the current document\n * @param {Element|Object} [doc] An element or document object to use to set the document\n * @returns {Object} Returns the current document\n */\nsetDocument = Sizzle.setDocument = function( node ) {\n\tvar doc = node ? node.ownerDocument || node : preferredDoc;\n\n\t// If no document and documentElement is available, return\n\tif ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {\n\t\treturn document;\n\t}\n\n\t// Set our document\n\tdocument = doc;\n\tdocElem = doc.documentElement;\n\n\t// Support tests\n\tdocumentIsXML = isXML( doc );\n\n\t// Check if getElementsByTagName(\"*\") returns only elements\n\tsupport.tagNameNoComments = assert(function( div ) {\n\t\tdiv.appendChild( doc.createComment(\"\") );\n\t\treturn !div.getElementsByTagName(\"*\").length;\n\t});\n\n\t// Check if attributes should be retrieved by attribute nodes\n\tsupport.attributes = assert(function( div ) {\n\t\tdiv.innerHTML = \"<select></select>\";\n\t\tvar type = typeof div.lastChild.getAttribute(\"multiple\");\n\t\t// IE8 returns a string for some attributes even when not present\n\t\treturn type !== \"boolean\" && type !== \"string\";\n\t});\n\n\t// Check if getElementsByClassName can be trusted\n\tsupport.getByClassName = assert(function( div ) {\n\t\t// Opera can't find a second classname (in 9.6)\n\t\tdiv.innerHTML = \"<div class='hidden e'></div><div class='hidden'></div>\";\n\t\tif ( !div.getElementsByClassName || !div.getElementsByClassName(\"e\").length ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Safari 3.2 caches class attributes and doesn't catch changes\n\t\tdiv.lastChild.className = \"e\";\n\t\treturn div.getElementsByClassName(\"e\").length === 2;\n\t});\n\n\t// Check if getElementById returns elements by name\n\t// Check if getElementsByName privileges form controls or returns elements by ID\n\tsupport.getByName = assert(function( div ) {\n\t\t// Inject content\n\t\tdiv.id = expando + 0;\n\t\tdiv.innerHTML = \"<a name='\" + expando + \"'></a><div name='\" + expando + \"'></div>\";\n\t\tdocElem.insertBefore( div, docElem.firstChild );\n\n\t\t// Test\n\t\tvar pass = doc.getElementsByName &&\n\t\t\t// buggy browsers will return fewer than the correct 2\n\t\t\tdoc.getElementsByName( expando ).length === 2 +\n\t\t\t// buggy browsers will return more than the correct 0\n\t\t\tdoc.getElementsByName( expando + 0 ).length;\n\t\tsupport.getIdNotName = !doc.getElementById( expando );\n\n\t\t// Cleanup\n\t\tdocElem.removeChild( div );\n\n\t\treturn pass;\n\t});\n\n\t// IE6/7 return modified attributes\n\tExpr.attrHandle = assert(function( div ) {\n\t\tdiv.innerHTML = \"<a href='#'></a>\";\n\t\treturn div.firstChild && typeof div.firstChild.getAttribute !== strundefined &&\n\t\t\tdiv.firstChild.getAttribute(\"href\") === \"#\";\n\t}) ?\n\t\t{} :\n\t\t{\n\t\t\t\"href\": function( elem ) {\n\t\t\t\treturn elem.getAttribute( \"href\", 2 );\n\t\t\t},\n\t\t\t\"type\": function( elem ) {\n\t\t\t\treturn elem.getAttribute(\"type\");\n\t\t\t}\n\t\t};\n\n\t// ID find and filter\n\tif ( support.getIdNotName ) {\n\t\tExpr.find[\"ID\"] = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== strundefined && !documentIsXML ) {\n\t\t\t\tvar m = context.getElementById( id );\n\t\t\t\t// Check parentNode to catch when Blackberry 4.6 returns\n\t\t\t\t// nodes that are no longer in the document #6963\n\t\t\t\treturn m && m.parentNode ? [m] : [];\n\t\t\t}\n\t\t};\n\t\tExpr.filter[\"ID\"] = function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn elem.getAttribute(\"id\") === attrId;\n\t\t\t};\n\t\t};\n\t} else {\n\t\tExpr.find[\"ID\"] = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== strundefined && !documentIsXML ) {\n\t\t\t\tvar m = context.getElementById( id );\n\n\t\t\t\treturn m ?\n\t\t\t\t\tm.id === id || typeof m.getAttributeNode !== strundefined && m.getAttributeNode(\"id\").value === id ?\n\t\t\t\t\t\t[m] :\n\t\t\t\t\t\tundefined :\n\t\t\t\t\t[];\n\t\t\t}\n\t\t};\n\t\tExpr.filter[\"ID\"] =  function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\tvar node = typeof elem.getAttributeNode !== strundefined && elem.getAttributeNode(\"id\");\n\t\t\t\treturn node && node.value === attrId;\n\t\t\t};\n\t\t};\n\t}\n\n\t// Tag\n\tExpr.find[\"TAG\"] = support.tagNameNoComments ?\n\t\tfunction( tag, context ) {\n\t\t\tif ( typeof context.getElementsByTagName !== strundefined ) {\n\t\t\t\treturn context.getElementsByTagName( tag );\n\t\t\t}\n\t\t} :\n\t\tfunction( tag, context ) {\n\t\t\tvar elem,\n\t\t\t\ttmp = [],\n\t\t\t\ti = 0,\n\t\t\t\tresults = context.getElementsByTagName( tag );\n\n\t\t\t// Filter out possible comments\n\t\t\tif ( tag === \"*\" ) {\n\t\t\t\twhile ( (elem = results[i++]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\ttmp.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn tmp;\n\t\t\t}\n\t\t\treturn results;\n\t\t};\n\n\t// Name\n\tExpr.find[\"NAME\"] = support.getByName && function( tag, context ) {\n\t\tif ( typeof context.getElementsByName !== strundefined ) {\n\t\t\treturn context.getElementsByName( name );\n\t\t}\n\t};\n\n\t// Class\n\tExpr.find[\"CLASS\"] = support.getByClassName && function( className, context ) {\n\t\tif ( typeof context.getElementsByClassName !== strundefined && !documentIsXML ) {\n\t\t\treturn context.getElementsByClassName( className );\n\t\t}\n\t};\n\n\t// QSA and matchesSelector support\n\n\t// matchesSelector(:active) reports false when true (IE9/Opera 11.5)\n\trbuggyMatches = [];\n\n\t// qSa(:focus) reports false when true (Chrome 21),\n\t// no need to also add to buggyMatches since matches checks buggyQSA\n\t// A support test would require too much code (would include document ready)\n\trbuggyQSA = [ \":focus\" ];\n\n\tif ( (support.qsa = isNative(doc.querySelectorAll)) ) {\n\t\t// Build QSA regex\n\t\t// Regex strategy adopted from Diego Perini\n\t\tassert(function( div ) {\n\t\t\t// Select is set to empty string on purpose\n\t\t\t// This is to test IE's treatment of not explictly\n\t\t\t// setting a boolean content attribute,\n\t\t\t// since its presence should be enough\n\t\t\t// http://bugs.jquery.com/ticket/12359\n\t\t\tdiv.innerHTML = \"<select><option selected=''></option></select>\";\n\n\t\t\t// IE8 - Some boolean attributes are not treated correctly\n\t\t\tif ( !div.querySelectorAll(\"[selected]\").length ) {\n\t\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*(?:checked|disabled|ismap|multiple|readonly|selected|value)\" );\n\t\t\t}\n\n\t\t\t// Webkit/Opera - :checked should return selected option elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( !div.querySelectorAll(\":checked\").length ) {\n\t\t\t\trbuggyQSA.push(\":checked\");\n\t\t\t}\n\t\t});\n\n\t\tassert(function( div ) {\n\n\t\t\t// Opera 10-12/IE8 - ^= $= *= and empty values\n\t\t\t// Should not select anything\n\t\t\tdiv.innerHTML = \"<input type='hidden' i=''/>\";\n\t\t\tif ( div.querySelectorAll(\"[i^='']\").length ) {\n\t\t\t\trbuggyQSA.push( \"[*^$]=\" + whitespace + \"*(?:\\\"\\\"|'')\" );\n\t\t\t}\n\n\t\t\t// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( !div.querySelectorAll(\":enabled\").length ) {\n\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n\t\t\t}\n\n\t\t\t// Opera 10-11 does not throw on post-comma invalid pseudos\n\t\t\tdiv.querySelectorAll(\"*,:x\");\n\t\t\trbuggyQSA.push(\",.*:\");\n\t\t});\n\t}\n\n\tif ( (support.matchesSelector = isNative( (matches = docElem.matchesSelector ||\n\t\tdocElem.mozMatchesSelector ||\n\t\tdocElem.webkitMatchesSelector ||\n\t\tdocElem.oMatchesSelector ||\n\t\tdocElem.msMatchesSelector) )) ) {\n\n\t\tassert(function( div ) {\n\t\t\t// Check to see if it's possible to do matchesSelector\n\t\t\t// on a disconnected node (IE 9)\n\t\t\tsupport.disconnectedMatch = matches.call( div, \"div\" );\n\n\t\t\t// This should fail with an exception\n\t\t\t// Gecko does not error, returns false instead\n\t\t\tmatches.call( div, \"[s!='']:x\" );\n\t\t\trbuggyMatches.push( \"!=\", pseudos );\n\t\t});\n\t}\n\n\trbuggyQSA = new RegExp( rbuggyQSA.join(\"|\") );\n\trbuggyMatches = new RegExp( rbuggyMatches.join(\"|\") );\n\n\t// Element contains another\n\t// Purposefully does not implement inclusive descendent\n\t// As in, an element does not contain itself\n\tcontains = isNative(docElem.contains) || docElem.compareDocumentPosition ?\n\t\tfunction( a, b ) {\n\t\t\tvar adown = a.nodeType === 9 ? a.documentElement : a,\n\t\t\t\tbup = b && b.parentNode;\n\t\t\treturn a === bup || !!( bup && bup.nodeType === 1 && (\n\t\t\t\tadown.contains ?\n\t\t\t\t\tadown.contains( bup ) :\n\t\t\t\t\ta.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16\n\t\t\t));\n\t\t} :\n\t\tfunction( a, b ) {\n\t\t\tif ( b ) {\n\t\t\t\twhile ( (b = b.parentNode) ) {\n\t\t\t\t\tif ( b === a ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t// Document order sorting\n\tsortOrder = docElem.compareDocumentPosition ?\n\tfunction( a, b ) {\n\t\tvar compare;\n\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\tif ( (compare = b.compareDocumentPosition && a.compareDocumentPosition && a.compareDocumentPosition( b )) ) {\n\t\t\tif ( compare & 1 || a.parentNode && a.parentNode.nodeType === 11 ) {\n\t\t\t\tif ( a === doc || contains( preferredDoc, a ) ) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\tif ( b === doc || contains( preferredDoc, b ) ) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\treturn compare & 4 ? -1 : 1;\n\t\t}\n\n\t\treturn a.compareDocumentPosition ? -1 : 1;\n\t} :\n\tfunction( a, b ) {\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\taup = a.parentNode,\n\t\t\tbup = b.parentNode,\n\t\t\tap = [ a ],\n\t\t\tbp = [ b ];\n\n\t\t// Exit early if the nodes are identical\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\n\t\t// Parentless nodes are either documents or disconnected\n\t\t} else if ( !aup || !bup ) {\n\t\t\treturn a === doc ? -1 :\n\t\t\t\tb === doc ? 1 :\n\t\t\t\taup ? -1 :\n\t\t\t\tbup ? 1 :\n\t\t\t\t0;\n\n\t\t// If the nodes are siblings, we can do a quick check\n\t\t} else if ( aup === bup ) {\n\t\t\treturn siblingCheck( a, b );\n\t\t}\n\n\t\t// Otherwise we need full lists of their ancestors for comparison\n\t\tcur = a;\n\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\tap.unshift( cur );\n\t\t}\n\t\tcur = b;\n\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\tbp.unshift( cur );\n\t\t}\n\n\t\t// Walk down the tree looking for a discrepancy\n\t\twhile ( ap[i] === bp[i] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i ?\n\t\t\t// Do a sibling check if the nodes have a common ancestor\n\t\t\tsiblingCheck( ap[i], bp[i] ) :\n\n\t\t\t// Otherwise nodes in our document sort first\n\t\t\tap[i] === preferredDoc ? -1 :\n\t\t\tbp[i] === preferredDoc ? 1 :\n\t\t\t0;\n\t};\n\n\t// Always assume the presence of duplicates if sort doesn't\n\t// pass them to our comparison function (as in Google Chrome).\n\thasDuplicate = false;\n\t[0, 0].sort( sortOrder );\n\tsupport.detectDuplicates = hasDuplicate;\n\n\treturn document;\n};\n\nSizzle.matches = function( expr, elements ) {\n\treturn Sizzle( expr, null, null, elements );\n};\n\nSizzle.matchesSelector = function( elem, expr ) {\n\t// Set document vars if needed\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\tsetDocument( elem );\n\t}\n\n\t// Make sure that attribute selectors are quoted\n\texpr = expr.replace( rattributeQuotes, \"='$1']\" );\n\n\t// rbuggyQSA always contains :focus, so no need for an existence check\n\tif ( support.matchesSelector && !documentIsXML && (!rbuggyMatches || !rbuggyMatches.test(expr)) && !rbuggyQSA.test(expr) ) {\n\t\ttry {\n\t\t\tvar ret = matches.call( elem, expr );\n\n\t\t\t// IE 9's matchesSelector returns false on disconnected nodes\n\t\t\tif ( ret || support.disconnectedMatch ||\n\t\t\t\t\t// As well, disconnected nodes are said to be in a document\n\t\t\t\t\t// fragment in IE 9\n\t\t\t\t\telem.document && elem.document.nodeType !== 11 ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t} catch(e) {}\n\t}\n\n\treturn Sizzle( expr, document, null, [elem] ).length > 0;\n};\n\nSizzle.contains = function( context, elem ) {\n\t// Set document vars if needed\n\tif ( ( context.ownerDocument || context ) !== document ) {\n\t\tsetDocument( context );\n\t}\n\treturn contains( context, elem );\n};\n\nSizzle.attr = function( elem, name ) {\n\tvar val;\n\n\t// Set document vars if needed\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\tsetDocument( elem );\n\t}\n\n\tif ( !documentIsXML ) {\n\t\tname = name.toLowerCase();\n\t}\n\tif ( (val = Expr.attrHandle[ name ]) ) {\n\t\treturn val( elem );\n\t}\n\tif ( documentIsXML || support.attributes ) {\n\t\treturn elem.getAttribute( name );\n\t}\n\treturn ( (val = elem.getAttributeNode( name )) || elem.getAttribute( name ) ) && elem[ name ] === true ?\n\t\tname :\n\t\tval && val.specified ? val.value : null;\n};\n\nSizzle.error = function( msg ) {\n\tthrow new Error( \"Syntax error, unrecognized expression: \" + msg );\n};\n\n// Document sorting and removing duplicates\nSizzle.uniqueSort = function( results ) {\n\tvar elem,\n\t\tduplicates = [],\n\t\ti = 1,\n\t\tj = 0;\n\n\t// Unless we *know* we can detect duplicates, assume their presence\n\thasDuplicate = !support.detectDuplicates;\n\tresults.sort( sortOrder );\n\n\tif ( hasDuplicate ) {\n\t\tfor ( ; (elem = results[i]); i++ ) {\n\t\t\tif ( elem === results[ i - 1 ] ) {\n\t\t\t\tj = duplicates.push( i );\n\t\t\t}\n\t\t}\n\t\twhile ( j-- ) {\n\t\t\tresults.splice( duplicates[ j ], 1 );\n\t\t}\n\t}\n\n\treturn results;\n};\n\nfunction siblingCheck( a, b ) {\n\tvar cur = b && a,\n\t\tdiff = cur && ( ~b.sourceIndex || MAX_NEGATIVE ) - ( ~a.sourceIndex || MAX_NEGATIVE );\n\n\t// Use IE sourceIndex if available on both nodes\n\tif ( diff ) {\n\t\treturn diff;\n\t}\n\n\t// Check if b follows a\n\tif ( cur ) {\n\t\twhile ( (cur = cur.nextSibling) ) {\n\t\t\tif ( cur === b ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn a ? 1 : -1;\n}\n\n// Returns a function to use in pseudos for input types\nfunction createInputPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn name === \"input\" && elem.type === type;\n\t};\n}\n\n// Returns a function to use in pseudos for buttons\nfunction createButtonPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn (name === \"input\" || name === \"button\") && elem.type === type;\n\t};\n}\n\n// Returns a function to use in pseudos for positionals\nfunction createPositionalPseudo( fn ) {\n\treturn markFunction(function( argument ) {\n\t\targument = +argument;\n\t\treturn markFunction(function( seed, matches ) {\n\t\t\tvar j,\n\t\t\t\tmatchIndexes = fn( [], seed.length, argument ),\n\t\t\t\ti = matchIndexes.length;\n\n\t\t\t// Match elements found at the specified indexes\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( seed[ (j = matchIndexes[i]) ] ) {\n\t\t\t\t\tseed[j] = !(matches[j] = seed[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Utility function for retrieving the text value of an array of DOM nodes\n * @param {Array|Element} elem\n */\ngetText = Sizzle.getText = function( elem ) {\n\tvar node,\n\t\tret = \"\",\n\t\ti = 0,\n\t\tnodeType = elem.nodeType;\n\n\tif ( !nodeType ) {\n\t\t// If no nodeType, this is expected to be an array\n\t\tfor ( ; (node = elem[i]); i++ ) {\n\t\t\t// Do not traverse comment nodes\n\t\t\tret += getText( node );\n\t\t}\n\t} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {\n\t\t// Use textContent for elements\n\t\t// innerText usage removed for consistency of new lines (see #11153)\n\t\tif ( typeof elem.textContent === \"string\" ) {\n\t\t\treturn elem.textContent;\n\t\t} else {\n\t\t\t// Traverse its children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tret += getText( elem );\n\t\t\t}\n\t\t}\n\t} else if ( nodeType === 3 || nodeType === 4 ) {\n\t\treturn elem.nodeValue;\n\t}\n\t// Do not include comment or processing instruction nodes\n\n\treturn ret;\n};\n\nExpr = Sizzle.selectors = {\n\n\t// Can be adjusted by the user\n\tcacheLength: 50,\n\n\tcreatePseudo: markFunction,\n\n\tmatch: matchExpr,\n\n\tfind: {},\n\n\trelative: {\n\t\t\">\": { dir: \"parentNode\", first: true },\n\t\t\" \": { dir: \"parentNode\" },\n\t\t\"+\": { dir: \"previousSibling\", first: true },\n\t\t\"~\": { dir: \"previousSibling\" }\n\t},\n\n\tpreFilter: {\n\t\t\"ATTR\": function( match ) {\n\t\t\tmatch[1] = match[1].replace( runescape, funescape );\n\n\t\t\t// Move the given value to match[3] whether quoted or unquoted\n\t\t\tmatch[3] = ( match[4] || match[5] || \"\" ).replace( runescape, funescape );\n\n\t\t\tif ( match[2] === \"~=\" ) {\n\t\t\t\tmatch[3] = \" \" + match[3] + \" \";\n\t\t\t}\n\n\t\t\treturn match.slice( 0, 4 );\n\t\t},\n\n\t\t\"CHILD\": function( match ) {\n\t\t\t/* matches from matchExpr[\"CHILD\"]\n\t\t\t\t1 type (only|nth|...)\n\t\t\t\t2 what (child|of-type)\n\t\t\t\t3 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)\n\t\t\t\t4 xn-component of xn+y argument ([+-]?\\d*n|)\n\t\t\t\t5 sign of xn-component\n\t\t\t\t6 x of xn-component\n\t\t\t\t7 sign of y-component\n\t\t\t\t8 y of y-component\n\t\t\t*/\n\t\t\tmatch[1] = match[1].toLowerCase();\n\n\t\t\tif ( match[1].slice( 0, 3 ) === \"nth\" ) {\n\t\t\t\t// nth-* requires argument\n\t\t\t\tif ( !match[3] ) {\n\t\t\t\t\tSizzle.error( match[0] );\n\t\t\t\t}\n\n\t\t\t\t// numeric x and y parameters for Expr.filter.CHILD\n\t\t\t\t// remember that false/true cast respectively to 0/1\n\t\t\t\tmatch[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === \"even\" || match[3] === \"odd\" ) );\n\t\t\t\tmatch[5] = +( ( match[7] + match[8] ) || match[3] === \"odd\" );\n\n\t\t\t// other types prohibit arguments\n\t\t\t} else if ( match[3] ) {\n\t\t\t\tSizzle.error( match[0] );\n\t\t\t}\n\n\t\t\treturn match;\n\t\t},\n\n\t\t\"PSEUDO\": function( match ) {\n\t\t\tvar excess,\n\t\t\t\tunquoted = !match[5] && match[2];\n\n\t\t\tif ( matchExpr[\"CHILD\"].test( match[0] ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Accept quoted arguments as-is\n\t\t\tif ( match[4] ) {\n\t\t\t\tmatch[2] = match[4];\n\n\t\t\t// Strip excess characters from unquoted arguments\n\t\t\t} else if ( unquoted && rpseudo.test( unquoted ) &&\n\t\t\t\t// Get excess from tokenize (recursively)\n\t\t\t\t(excess = tokenize( unquoted, true )) &&\n\t\t\t\t// advance to the next closing parenthesis\n\t\t\t\t(excess = unquoted.indexOf( \")\", unquoted.length - excess ) - unquoted.length) ) {\n\n\t\t\t\t// excess is a negative index\n\t\t\t\tmatch[0] = match[0].slice( 0, excess );\n\t\t\t\tmatch[2] = unquoted.slice( 0, excess );\n\t\t\t}\n\n\t\t\t// Return only captures needed by the pseudo filter method (type and argument)\n\t\t\treturn match.slice( 0, 3 );\n\t\t}\n\t},\n\n\tfilter: {\n\n\t\t\"TAG\": function( nodeName ) {\n\t\t\tif ( nodeName === \"*\" ) {\n\t\t\t\treturn function() { return true; };\n\t\t\t}\n\n\t\t\tnodeName = nodeName.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn function( elem ) {\n\t\t\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n\t\t\t};\n\t\t},\n\n\t\t\"CLASS\": function( className ) {\n\t\t\tvar pattern = classCache[ className + \" \" ];\n\n\t\t\treturn pattern ||\n\t\t\t\t(pattern = new RegExp( \"(^|\" + whitespace + \")\" + className + \"(\" + whitespace + \"|$)\" )) &&\n\t\t\t\tclassCache( className, function( elem ) {\n\t\t\t\t\treturn pattern.test( elem.className || (typeof elem.getAttribute !== strundefined && elem.getAttribute(\"class\")) || \"\" );\n\t\t\t\t});\n\t\t},\n\n\t\t\"ATTR\": function( name, operator, check ) {\n\t\t\treturn function( elem ) {\n\t\t\t\tvar result = Sizzle.attr( elem, name );\n\n\t\t\t\tif ( result == null ) {\n\t\t\t\t\treturn operator === \"!=\";\n\t\t\t\t}\n\t\t\t\tif ( !operator ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tresult += \"\";\n\n\t\t\t\treturn operator === \"=\" ? result === check :\n\t\t\t\t\toperator === \"!=\" ? result !== check :\n\t\t\t\t\toperator === \"^=\" ? check && result.indexOf( check ) === 0 :\n\t\t\t\t\toperator === \"*=\" ? check && result.indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"$=\" ? check && result.slice( -check.length ) === check :\n\t\t\t\t\toperator === \"~=\" ? ( \" \" + result + \" \" ).indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"|=\" ? result === check || result.slice( 0, check.length + 1 ) === check + \"-\" :\n\t\t\t\t\tfalse;\n\t\t\t};\n\t\t},\n\n\t\t\"CHILD\": function( type, what, argument, first, last ) {\n\t\t\tvar simple = type.slice( 0, 3 ) !== \"nth\",\n\t\t\t\tforward = type.slice( -4 ) !== \"last\",\n\t\t\t\tofType = what === \"of-type\";\n\n\t\t\treturn first === 1 && last === 0 ?\n\n\t\t\t\t// Shortcut for :nth-*(n)\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn !!elem.parentNode;\n\t\t\t\t} :\n\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tvar cache, outerCache, node, diff, nodeIndex, start,\n\t\t\t\t\t\tdir = simple !== forward ? \"nextSibling\" : \"previousSibling\",\n\t\t\t\t\t\tparent = elem.parentNode,\n\t\t\t\t\t\tname = ofType && elem.nodeName.toLowerCase(),\n\t\t\t\t\t\tuseCache = !xml && !ofType;\n\n\t\t\t\t\tif ( parent ) {\n\n\t\t\t\t\t\t// :(first|last|only)-(child|of-type)\n\t\t\t\t\t\tif ( simple ) {\n\t\t\t\t\t\t\twhile ( dir ) {\n\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\twhile ( (node = node[ dir ]) ) {\n\t\t\t\t\t\t\t\t\tif ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// Reverse direction for :only-* (if we haven't yet done so)\n\t\t\t\t\t\t\t\tstart = dir = type === \"only\" && !start && \"nextSibling\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstart = [ forward ? parent.firstChild : parent.lastChild ];\n\n\t\t\t\t\t\t// non-xml :nth-child(...) stores cache data on `parent`\n\t\t\t\t\t\tif ( forward && useCache ) {\n\t\t\t\t\t\t\t// Seek `elem` from a previously-cached index\n\t\t\t\t\t\t\touterCache = parent[ expando ] || (parent[ expando ] = {});\n\t\t\t\t\t\t\tcache = outerCache[ type ] || [];\n\t\t\t\t\t\t\tnodeIndex = cache[0] === dirruns && cache[1];\n\t\t\t\t\t\t\tdiff = cache[0] === dirruns && cache[2];\n\t\t\t\t\t\t\tnode = nodeIndex && parent.childNodes[ nodeIndex ];\n\n\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\n\t\t\t\t\t\t\t\t// Fallback to seeking `elem` from the start\n\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\t// When found, cache indexes on `parent` and break\n\t\t\t\t\t\t\t\tif ( node.nodeType === 1 && ++diff && node === elem ) {\n\t\t\t\t\t\t\t\t\touterCache[ type ] = [ dirruns, nodeIndex, diff ];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Use previously-cached element index if available\n\t\t\t\t\t\t} else if ( useCache && (cache = (elem[ expando ] || (elem[ expando ] = {}))[ type ]) && cache[0] === dirruns ) {\n\t\t\t\t\t\t\tdiff = cache[1];\n\n\t\t\t\t\t\t// xml :nth-child(...) or :nth-last-child(...) or :nth(-last)?-of-type(...)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Use the same loop as above to seek `elem` from the start\n\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\tif ( ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) && ++diff ) {\n\t\t\t\t\t\t\t\t\t// Cache the index of each encountered element\n\t\t\t\t\t\t\t\t\tif ( useCache ) {\n\t\t\t\t\t\t\t\t\t\t(node[ expando ] || (node[ expando ] = {}))[ type ] = [ dirruns, diff ];\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif ( node === elem ) {\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Incorporate the offset, then check against cycle size\n\t\t\t\t\t\tdiff -= last;\n\t\t\t\t\t\treturn diff === first || ( diff % first === 0 && diff / first >= 0 );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t},\n\n\t\t\"PSEUDO\": function( pseudo, argument ) {\n\t\t\t// pseudo-class names are case-insensitive\n\t\t\t// http://www.w3.org/TR/selectors/#pseudo-classes\n\t\t\t// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters\n\t\t\t// Remember that setFilters inherits from pseudos\n\t\t\tvar args,\n\t\t\t\tfn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||\n\t\t\t\t\tSizzle.error( \"unsupported pseudo: \" + pseudo );\n\n\t\t\t// The user may use createPseudo to indicate that\n\t\t\t// arguments are needed to create the filter function\n\t\t\t// just as Sizzle does\n\t\t\tif ( fn[ expando ] ) {\n\t\t\t\treturn fn( argument );\n\t\t\t}\n\n\t\t\t// But maintain support for old signatures\n\t\t\tif ( fn.length > 1 ) {\n\t\t\t\targs = [ pseudo, pseudo, \"\", argument ];\n\t\t\t\treturn Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?\n\t\t\t\t\tmarkFunction(function( seed, matches ) {\n\t\t\t\t\t\tvar idx,\n\t\t\t\t\t\t\tmatched = fn( seed, argument ),\n\t\t\t\t\t\t\ti = matched.length;\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tidx = indexOf.call( seed, matched[i] );\n\t\t\t\t\t\t\tseed[ idx ] = !( matches[ idx ] = matched[i] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}) :\n\t\t\t\t\tfunction( elem ) {\n\t\t\t\t\t\treturn fn( elem, 0, args );\n\t\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn fn;\n\t\t}\n\t},\n\n\tpseudos: {\n\t\t// Potentially complex pseudos\n\t\t\"not\": markFunction(function( selector ) {\n\t\t\t// Trim the selector passed to compile\n\t\t\t// to avoid treating leading and trailing\n\t\t\t// spaces as combinators\n\t\t\tvar input = [],\n\t\t\t\tresults = [],\n\t\t\t\tmatcher = compile( selector.replace( rtrim, \"$1\" ) );\n\n\t\t\treturn matcher[ expando ] ?\n\t\t\t\tmarkFunction(function( seed, matches, context, xml ) {\n\t\t\t\t\tvar elem,\n\t\t\t\t\t\tunmatched = matcher( seed, null, xml, [] ),\n\t\t\t\t\t\ti = seed.length;\n\n\t\t\t\t\t// Match elements unmatched by `matcher`\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( (elem = unmatched[i]) ) {\n\t\t\t\t\t\t\tseed[i] = !(matches[i] = elem);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}) :\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tinput[0] = elem;\n\t\t\t\t\tmatcher( input, null, xml, results );\n\t\t\t\t\treturn !results.pop();\n\t\t\t\t};\n\t\t}),\n\n\t\t\"has\": markFunction(function( selector ) {\n\t\t\treturn function( elem ) {\n\t\t\t\treturn Sizzle( selector, elem ).length > 0;\n\t\t\t};\n\t\t}),\n\n\t\t\"contains\": markFunction(function( text ) {\n\t\t\treturn function( elem ) {\n\t\t\t\treturn ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;\n\t\t\t};\n\t\t}),\n\n\t\t// \"Whether an element is represented by a :lang() selector\n\t\t// is based solely on the element's language value\n\t\t// being equal to the identifier C,\n\t\t// or beginning with the identifier C immediately followed by \"-\".\n\t\t// The matching of C against the element's language value is performed case-insensitively.\n\t\t// The identifier C does not have to be a valid language name.\"\n\t\t// http://www.w3.org/TR/selectors/#lang-pseudo\n\t\t\"lang\": markFunction( function( lang ) {\n\t\t\t// lang value must be a valid identifider\n\t\t\tif ( !ridentifier.test(lang || \"\") ) {\n\t\t\t\tSizzle.error( \"unsupported lang: \" + lang );\n\t\t\t}\n\t\t\tlang = lang.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn function( elem ) {\n\t\t\t\tvar elemLang;\n\t\t\t\tdo {\n\t\t\t\t\tif ( (elemLang = documentIsXML ?\n\t\t\t\t\t\telem.getAttribute(\"xml:lang\") || elem.getAttribute(\"lang\") :\n\t\t\t\t\t\telem.lang) ) {\n\n\t\t\t\t\t\telemLang = elemLang.toLowerCase();\n\t\t\t\t\t\treturn elemLang === lang || elemLang.indexOf( lang + \"-\" ) === 0;\n\t\t\t\t\t}\n\t\t\t\t} while ( (elem = elem.parentNode) && elem.nodeType === 1 );\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}),\n\n\t\t// Miscellaneous\n\t\t\"target\": function( elem ) {\n\t\t\tvar hash = window.location && window.location.hash;\n\t\t\treturn hash && hash.slice( 1 ) === elem.id;\n\t\t},\n\n\t\t\"root\": function( elem ) {\n\t\t\treturn elem === docElem;\n\t\t},\n\n\t\t\"focus\": function( elem ) {\n\t\t\treturn elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n\t\t},\n\n\t\t// Boolean properties\n\t\t\"enabled\": function( elem ) {\n\t\t\treturn elem.disabled === false;\n\t\t},\n\n\t\t\"disabled\": function( elem ) {\n\t\t\treturn elem.disabled === true;\n\t\t},\n\n\t\t\"checked\": function( elem ) {\n\t\t\t// In CSS3, :checked should return both checked and selected elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\tvar nodeName = elem.nodeName.toLowerCase();\n\t\t\treturn (nodeName === \"input\" && !!elem.checked) || (nodeName === \"option\" && !!elem.selected);\n\t\t},\n\n\t\t\"selected\": function( elem ) {\n\t\t\t// Accessing this property makes selected-by-default\n\t\t\t// options in Safari work properly\n\t\t\tif ( elem.parentNode ) {\n\t\t\t\telem.parentNode.selectedIndex;\n\t\t\t}\n\n\t\t\treturn elem.selected === true;\n\t\t},\n\n\t\t// Contents\n\t\t\"empty\": function( elem ) {\n\t\t\t// http://www.w3.org/TR/selectors/#empty-pseudo\n\t\t\t// :empty is only affected by element nodes and content nodes(including text(3), cdata(4)),\n\t\t\t//   not comment, processing instructions, or others\n\t\t\t// Thanks to Diego Perini for the nodeName shortcut\n\t\t\t//   Greater than \"@\" means alpha characters (specifically not starting with \"#\" or \"?\")\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tif ( elem.nodeName > \"@\" || elem.nodeType === 3 || elem.nodeType === 4 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\t\"parent\": function( elem ) {\n\t\t\treturn !Expr.pseudos[\"empty\"]( elem );\n\t\t},\n\n\t\t// Element/input types\n\t\t\"header\": function( elem ) {\n\t\t\treturn rheader.test( elem.nodeName );\n\t\t},\n\n\t\t\"input\": function( elem ) {\n\t\t\treturn rinputs.test( elem.nodeName );\n\t\t},\n\n\t\t\"button\": function( elem ) {\n\t\t\tvar name = elem.nodeName.toLowerCase();\n\t\t\treturn name === \"input\" && elem.type === \"button\" || name === \"button\";\n\t\t},\n\n\t\t\"text\": function( elem ) {\n\t\t\tvar attr;\n\t\t\t// IE6 and 7 will map elem.type to 'text' for new HTML5 types (search, etc)\n\t\t\t// use getAttribute instead to test this case\n\t\t\treturn elem.nodeName.toLowerCase() === \"input\" &&\n\t\t\t\telem.type === \"text\" &&\n\t\t\t\t( (attr = elem.getAttribute(\"type\")) == null || attr.toLowerCase() === elem.type );\n\t\t},\n\n\t\t// Position-in-collection\n\t\t\"first\": createPositionalPseudo(function() {\n\t\t\treturn [ 0 ];\n\t\t}),\n\n\t\t\"last\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\treturn [ length - 1 ];\n\t\t}),\n\n\t\t\"eq\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\treturn [ argument < 0 ? argument + length : argument ];\n\t\t}),\n\n\t\t\"even\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"odd\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\tvar i = 1;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"lt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; --i >= 0; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"gt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; ++i < length; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t})\n\t}\n};\n\n// Add button/input type pseudos\nfor ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {\n\tExpr.pseudos[ i ] = createInputPseudo( i );\n}\nfor ( i in { submit: true, reset: true } ) {\n\tExpr.pseudos[ i ] = createButtonPseudo( i );\n}\n\nfunction tokenize( selector, parseOnly ) {\n\tvar matched, match, tokens, type,\n\t\tsoFar, groups, preFilters,\n\t\tcached = tokenCache[ selector + \" \" ];\n\n\tif ( cached ) {\n\t\treturn parseOnly ? 0 : cached.slice( 0 );\n\t}\n\n\tsoFar = selector;\n\tgroups = [];\n\tpreFilters = Expr.preFilter;\n\n\twhile ( soFar ) {\n\n\t\t// Comma and first run\n\t\tif ( !matched || (match = rcomma.exec( soFar )) ) {\n\t\t\tif ( match ) {\n\t\t\t\t// Don't consume trailing commas as valid\n\t\t\t\tsoFar = soFar.slice( match[0].length ) || soFar;\n\t\t\t}\n\t\t\tgroups.push( tokens = [] );\n\t\t}\n\n\t\tmatched = false;\n\n\t\t// Combinators\n\t\tif ( (match = rcombinators.exec( soFar )) ) {\n\t\t\tmatched = match.shift();\n\t\t\ttokens.push( {\n\t\t\t\tvalue: matched,\n\t\t\t\t// Cast descendant combinators to space\n\t\t\t\ttype: match[0].replace( rtrim, \" \" )\n\t\t\t} );\n\t\t\tsoFar = soFar.slice( matched.length );\n\t\t}\n\n\t\t// Filters\n\t\tfor ( type in Expr.filter ) {\n\t\t\tif ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||\n\t\t\t\t(match = preFilters[ type ]( match ))) ) {\n\t\t\t\tmatched = match.shift();\n\t\t\t\ttokens.push( {\n\t\t\t\t\tvalue: matched,\n\t\t\t\t\ttype: type,\n\t\t\t\t\tmatches: match\n\t\t\t\t} );\n\t\t\t\tsoFar = soFar.slice( matched.length );\n\t\t\t}\n\t\t}\n\n\t\tif ( !matched ) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Return the length of the invalid excess\n\t// if we're just parsing\n\t// Otherwise, throw an error or return tokens\n\treturn parseOnly ?\n\t\tsoFar.length :\n\t\tsoFar ?\n\t\t\tSizzle.error( selector ) :\n\t\t\t// Cache the tokens\n\t\t\ttokenCache( selector, groups ).slice( 0 );\n}\n\nfunction toSelector( tokens ) {\n\tvar i = 0,\n\t\tlen = tokens.length,\n\t\tselector = \"\";\n\tfor ( ; i < len; i++ ) {\n\t\tselector += tokens[i].value;\n\t}\n\treturn selector;\n}\n\nfunction addCombinator( matcher, combinator, base ) {\n\tvar dir = combinator.dir,\n\t\tcheckNonElements = base && dir === \"parentNode\",\n\t\tdoneName = done++;\n\n\treturn combinator.first ?\n\t\t// Check against closest ancestor/preceding element\n\t\tfunction( elem, context, xml ) {\n\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\treturn matcher( elem, context, xml );\n\t\t\t\t}\n\t\t\t}\n\t\t} :\n\n\t\t// Check against all ancestor/preceding elements\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar data, cache, outerCache,\n\t\t\t\tdirkey = dirruns + \" \" + doneName;\n\n\t\t\t// We can't set arbitrary data on XML nodes, so they don't benefit from dir caching\n\t\t\tif ( xml ) {\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\touterCache = elem[ expando ] || (elem[ expando ] = {});\n\t\t\t\t\t\tif ( (cache = outerCache[ dir ]) && cache[0] === dirkey ) {\n\t\t\t\t\t\t\tif ( (data = cache[1]) === true || data === cachedruns ) {\n\t\t\t\t\t\t\t\treturn data === true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcache = outerCache[ dir ] = [ dirkey ];\n\t\t\t\t\t\t\tcache[1] = matcher( elem, context, xml ) || cachedruns;\n\t\t\t\t\t\t\tif ( cache[1] === true ) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n}\n\nfunction elementMatcher( matchers ) {\n\treturn matchers.length > 1 ?\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar i = matchers.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( !matchers[i]( elem, context, xml ) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t} :\n\t\tmatchers[0];\n}\n\nfunction condense( unmatched, map, filter, context, xml ) {\n\tvar elem,\n\t\tnewUnmatched = [],\n\t\ti = 0,\n\t\tlen = unmatched.length,\n\t\tmapped = map != null;\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( (elem = unmatched[i]) ) {\n\t\t\tif ( !filter || filter( elem, context, xml ) ) {\n\t\t\t\tnewUnmatched.push( elem );\n\t\t\t\tif ( mapped ) {\n\t\t\t\t\tmap.push( i );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn newUnmatched;\n}\n\nfunction setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {\n\tif ( postFilter && !postFilter[ expando ] ) {\n\t\tpostFilter = setMatcher( postFilter );\n\t}\n\tif ( postFinder && !postFinder[ expando ] ) {\n\t\tpostFinder = setMatcher( postFinder, postSelector );\n\t}\n\treturn markFunction(function( seed, results, context, xml ) {\n\t\tvar temp, i, elem,\n\t\t\tpreMap = [],\n\t\t\tpostMap = [],\n\t\t\tpreexisting = results.length,\n\n\t\t\t// Get initial elements from seed or context\n\t\t\telems = seed || multipleContexts( selector || \"*\", context.nodeType ? [ context ] : context, [] ),\n\n\t\t\t// Prefilter to get matcher input, preserving a map for seed-results synchronization\n\t\t\tmatcherIn = preFilter && ( seed || !selector ) ?\n\t\t\t\tcondense( elems, preMap, preFilter, context, xml ) :\n\t\t\t\telems,\n\n\t\t\tmatcherOut = matcher ?\n\t\t\t\t// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,\n\t\t\t\tpostFinder || ( seed ? preFilter : preexisting || postFilter ) ?\n\n\t\t\t\t\t// ...intermediate processing is necessary\n\t\t\t\t\t[] :\n\n\t\t\t\t\t// ...otherwise use results directly\n\t\t\t\t\tresults :\n\t\t\t\tmatcherIn;\n\n\t\t// Find primary matches\n\t\tif ( matcher ) {\n\t\t\tmatcher( matcherIn, matcherOut, context, xml );\n\t\t}\n\n\t\t// Apply postFilter\n\t\tif ( postFilter ) {\n\t\t\ttemp = condense( matcherOut, postMap );\n\t\t\tpostFilter( temp, [], context, xml );\n\n\t\t\t// Un-match failing elements by moving them back to matcherIn\n\t\t\ti = temp.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( (elem = temp[i]) ) {\n\t\t\t\t\tmatcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( seed ) {\n\t\t\tif ( postFinder || preFilter ) {\n\t\t\t\tif ( postFinder ) {\n\t\t\t\t\t// Get the final matcherOut by condensing this intermediate into postFinder contexts\n\t\t\t\t\ttemp = [];\n\t\t\t\t\ti = matcherOut.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( (elem = matcherOut[i]) ) {\n\t\t\t\t\t\t\t// Restore matcherIn since elem is not yet a final match\n\t\t\t\t\t\t\ttemp.push( (matcherIn[i] = elem) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpostFinder( null, (matcherOut = []), temp, xml );\n\t\t\t\t}\n\n\t\t\t\t// Move matched elements from seed to results to keep them synchronized\n\t\t\t\ti = matcherOut.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tif ( (elem = matcherOut[i]) &&\n\t\t\t\t\t\t(temp = postFinder ? indexOf.call( seed, elem ) : preMap[i]) > -1 ) {\n\n\t\t\t\t\t\tseed[temp] = !(results[temp] = elem);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Add elements to results, through postFinder if defined\n\t\t} else {\n\t\t\tmatcherOut = condense(\n\t\t\t\tmatcherOut === results ?\n\t\t\t\t\tmatcherOut.splice( preexisting, matcherOut.length ) :\n\t\t\t\t\tmatcherOut\n\t\t\t);\n\t\t\tif ( postFinder ) {\n\t\t\t\tpostFinder( null, results, matcherOut, xml );\n\t\t\t} else {\n\t\t\t\tpush.apply( results, matcherOut );\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction matcherFromTokens( tokens ) {\n\tvar checkContext, matcher, j,\n\t\tlen = tokens.length,\n\t\tleadingRelative = Expr.relative[ tokens[0].type ],\n\t\timplicitRelative = leadingRelative || Expr.relative[\" \"],\n\t\ti = leadingRelative ? 1 : 0,\n\n\t\t// The foundational matcher ensures that elements are reachable from top-level context(s)\n\t\tmatchContext = addCombinator( function( elem ) {\n\t\t\treturn elem === checkContext;\n\t\t}, implicitRelative, true ),\n\t\tmatchAnyContext = addCombinator( function( elem ) {\n\t\t\treturn indexOf.call( checkContext, elem ) > -1;\n\t\t}, implicitRelative, true ),\n\t\tmatchers = [ function( elem, context, xml ) {\n\t\t\treturn ( !leadingRelative && ( xml || context !== outermostContext ) ) || (\n\t\t\t\t(checkContext = context).nodeType ?\n\t\t\t\t\tmatchContext( elem, context, xml ) :\n\t\t\t\t\tmatchAnyContext( elem, context, xml ) );\n\t\t} ];\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( (matcher = Expr.relative[ tokens[i].type ]) ) {\n\t\t\tmatchers = [ addCombinator(elementMatcher( matchers ), matcher) ];\n\t\t} else {\n\t\t\tmatcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );\n\n\t\t\t// Return special upon seeing a positional matcher\n\t\t\tif ( matcher[ expando ] ) {\n\t\t\t\t// Find the next relative operator (if any) for proper handling\n\t\t\t\tj = ++i;\n\t\t\t\tfor ( ; j < len; j++ ) {\n\t\t\t\t\tif ( Expr.relative[ tokens[j].type ] ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn setMatcher(\n\t\t\t\t\ti > 1 && elementMatcher( matchers ),\n\t\t\t\t\ti > 1 && toSelector( tokens.slice( 0, i - 1 ) ).replace( rtrim, \"$1\" ),\n\t\t\t\t\tmatcher,\n\t\t\t\t\ti < j && matcherFromTokens( tokens.slice( i, j ) ),\n\t\t\t\t\tj < len && matcherFromTokens( (tokens = tokens.slice( j )) ),\n\t\t\t\t\tj < len && toSelector( tokens )\n\t\t\t\t);\n\t\t\t}\n\t\t\tmatchers.push( matcher );\n\t\t}\n\t}\n\n\treturn elementMatcher( matchers );\n}\n\nfunction matcherFromGroupMatchers( elementMatchers, setMatchers ) {\n\t// A counter to specify which element is currently being matched\n\tvar matcherCachedRuns = 0,\n\t\tbySet = setMatchers.length > 0,\n\t\tbyElement = elementMatchers.length > 0,\n\t\tsuperMatcher = function( seed, context, xml, results, expandContext ) {\n\t\t\tvar elem, j, matcher,\n\t\t\t\tsetMatched = [],\n\t\t\t\tmatchedCount = 0,\n\t\t\t\ti = \"0\",\n\t\t\t\tunmatched = seed && [],\n\t\t\t\toutermost = expandContext != null,\n\t\t\t\tcontextBackup = outermostContext,\n\t\t\t\t// We must always have either seed elements or context\n\t\t\t\telems = seed || byElement && Expr.find[\"TAG\"]( \"*\", expandContext && context.parentNode || context ),\n\t\t\t\t// Use integer dirruns iff this is the outermost matcher\n\t\t\t\tdirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1);\n\n\t\t\tif ( outermost ) {\n\t\t\t\toutermostContext = context !== document && context;\n\t\t\t\tcachedruns = matcherCachedRuns;\n\t\t\t}\n\n\t\t\t// Add elements passing elementMatchers directly to results\n\t\t\t// Keep `i` a string if there are no elements so `matchedCount` will be \"00\" below\n\t\t\tfor ( ; (elem = elems[i]) != null; i++ ) {\n\t\t\t\tif ( byElement && elem ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( (matcher = elementMatchers[j++]) ) {\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( outermost ) {\n\t\t\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\t\t\tcachedruns = ++matcherCachedRuns;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Track unmatched elements for set filters\n\t\t\t\tif ( bySet ) {\n\t\t\t\t\t// They will have gone through all possible matchers\n\t\t\t\t\tif ( (elem = !matcher && elem) ) {\n\t\t\t\t\t\tmatchedCount--;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Lengthen the array for every element, matched or not\n\t\t\t\t\tif ( seed ) {\n\t\t\t\t\t\tunmatched.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Apply set filters to unmatched elements\n\t\t\tmatchedCount += i;\n\t\t\tif ( bySet && i !== matchedCount ) {\n\t\t\t\tj = 0;\n\t\t\t\twhile ( (matcher = setMatchers[j++]) ) {\n\t\t\t\t\tmatcher( unmatched, setMatched, context, xml );\n\t\t\t\t}\n\n\t\t\t\tif ( seed ) {\n\t\t\t\t\t// Reintegrate element matches to eliminate the need for sorting\n\t\t\t\t\tif ( matchedCount > 0 ) {\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tif ( !(unmatched[i] || setMatched[i]) ) {\n\t\t\t\t\t\t\t\tsetMatched[i] = pop.call( results );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Discard index placeholder values to get only actual matches\n\t\t\t\t\tsetMatched = condense( setMatched );\n\t\t\t\t}\n\n\t\t\t\t// Add matches to results\n\t\t\t\tpush.apply( results, setMatched );\n\n\t\t\t\t// Seedless set matches succeeding multiple successful matchers stipulate sorting\n\t\t\t\tif ( outermost && !seed && setMatched.length > 0 &&\n\t\t\t\t\t( matchedCount + setMatchers.length ) > 1 ) {\n\n\t\t\t\t\tSizzle.uniqueSort( results );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Override manipulation of globals by nested matchers\n\t\t\tif ( outermost ) {\n\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\toutermostContext = contextBackup;\n\t\t\t}\n\n\t\t\treturn unmatched;\n\t\t};\n\n\treturn bySet ?\n\t\tmarkFunction( superMatcher ) :\n\t\tsuperMatcher;\n}\n\ncompile = Sizzle.compile = function( selector, group /* Internal Use Only */ ) {\n\tvar i,\n\t\tsetMatchers = [],\n\t\telementMatchers = [],\n\t\tcached = compilerCache[ selector + \" \" ];\n\n\tif ( !cached ) {\n\t\t// Generate a function of recursive functions that can be used to check each element\n\t\tif ( !group ) {\n\t\t\tgroup = tokenize( selector );\n\t\t}\n\t\ti = group.length;\n\t\twhile ( i-- ) {\n\t\t\tcached = matcherFromTokens( group[i] );\n\t\t\tif ( cached[ expando ] ) {\n\t\t\t\tsetMatchers.push( cached );\n\t\t\t} else {\n\t\t\t\telementMatchers.push( cached );\n\t\t\t}\n\t\t}\n\n\t\t// Cache the compiled function\n\t\tcached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );\n\t}\n\treturn cached;\n};\n\nfunction multipleContexts( selector, contexts, results ) {\n\tvar i = 0,\n\t\tlen = contexts.length;\n\tfor ( ; i < len; i++ ) {\n\t\tSizzle( selector, contexts[i], results );\n\t}\n\treturn results;\n}\n\nfunction select( selector, context, results, seed ) {\n\tvar i, tokens, token, type, find,\n\t\tmatch = tokenize( selector );\n\n\tif ( !seed ) {\n\t\t// Try to minimize operations if there is only one group\n\t\tif ( match.length === 1 ) {\n\n\t\t\t// Take a shortcut and set the context if the root selector is an ID\n\t\t\ttokens = match[0] = match[0].slice( 0 );\n\t\t\tif ( tokens.length > 2 && (token = tokens[0]).type === \"ID\" &&\n\t\t\t\t\tcontext.nodeType === 9 && !documentIsXML &&\n\t\t\t\t\tExpr.relative[ tokens[1].type ] ) {\n\n\t\t\t\tcontext = Expr.find[\"ID\"]( token.matches[0].replace( runescape, funescape ), context )[0];\n\t\t\t\tif ( !context ) {\n\t\t\t\t\treturn results;\n\t\t\t\t}\n\n\t\t\t\tselector = selector.slice( tokens.shift().value.length );\n\t\t\t}\n\n\t\t\t// Fetch a seed set for right-to-left matching\n\t\t\ti = matchExpr[\"needsContext\"].test( selector ) ? 0 : tokens.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\ttoken = tokens[i];\n\n\t\t\t\t// Abort if we hit a combinator\n\t\t\t\tif ( Expr.relative[ (type = token.type) ] ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif ( (find = Expr.find[ type ]) ) {\n\t\t\t\t\t// Search, expanding context for leading sibling combinators\n\t\t\t\t\tif ( (seed = find(\n\t\t\t\t\t\ttoken.matches[0].replace( runescape, funescape ),\n\t\t\t\t\t\trsibling.test( tokens[0].type ) && context.parentNode || context\n\t\t\t\t\t)) ) {\n\n\t\t\t\t\t\t// If seed is empty or no tokens remain, we can return early\n\t\t\t\t\t\ttokens.splice( i, 1 );\n\t\t\t\t\t\tselector = seed.length && toSelector( tokens );\n\t\t\t\t\t\tif ( !selector ) {\n\t\t\t\t\t\t\tpush.apply( results, slice.call( seed, 0 ) );\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Compile and execute a filtering function\n\t// Provide `match` to avoid retokenization if we modified the selector above\n\tcompile( selector, match )(\n\t\tseed,\n\t\tcontext,\n\t\tdocumentIsXML,\n\t\tresults,\n\t\trsibling.test( selector )\n\t);\n\treturn results;\n}\n\n// Deprecated\nExpr.pseudos[\"nth\"] = Expr.pseudos[\"eq\"];\n\n// Easy API for creating new setFilters\nfunction setFilters() {}\nExpr.filters = setFilters.prototype = Expr.pseudos;\nExpr.setFilters = new setFilters();\n\n// Initialize with the default document\nsetDocument();\n\n// Override sizzle attribute retrieval\nSizzle.attr = jQuery.attr;\njQuery.find = Sizzle;\njQuery.expr = Sizzle.selectors;\njQuery.expr[\":\"] = jQuery.expr.pseudos;\njQuery.unique = Sizzle.uniqueSort;\njQuery.text = Sizzle.getText;\njQuery.isXMLDoc = Sizzle.isXML;\njQuery.contains = Sizzle.contains;\n\n\n})( window );\nvar runtil = /Until$/,\n\trparentsprev = /^(?:parents|prev(?:Until|All))/,\n\tisSimple = /^.[^:#\\[\\.,]*$/,\n\trneedsContext = jQuery.expr.match.needsContext,\n\t// methods guaranteed to produce a unique set when starting from a unique set\n\tguaranteedUnique = {\n\t\tchildren: true,\n\t\tcontents: true,\n\t\tnext: true,\n\t\tprev: true\n\t};\n\njQuery.fn.extend({\n\tfind: function( selector ) {\n\t\tvar i, ret, self,\n\t\t\tlen = this.length;\n\n\t\tif ( typeof selector !== \"string\" ) {\n\t\t\tself = this;\n\t\t\treturn this.pushStack( jQuery( selector ).filter(function() {\n\t\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\t\tif ( jQuery.contains( self[ i ], this ) ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}) );\n\t\t}\n\n\t\tret = [];\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\tjQuery.find( selector, this[ i ], ret );\n\t\t}\n\n\t\t// Needed because $( selector, context ) becomes $( context ).find( selector )\n\t\tret = this.pushStack( len > 1 ? jQuery.unique( ret ) : ret );\n\t\tret.selector = ( this.selector ? this.selector + \" \" : \"\" ) + selector;\n\t\treturn ret;\n\t},\n\n\thas: function( target ) {\n\t\tvar i,\n\t\t\ttargets = jQuery( target, this ),\n\t\t\tlen = targets.length;\n\n\t\treturn this.filter(function() {\n\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\tif ( jQuery.contains( this, targets[i] ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\tnot: function( selector ) {\n\t\treturn this.pushStack( winnow(this, selector, false) );\n\t},\n\n\tfilter: function( selector ) {\n\t\treturn this.pushStack( winnow(this, selector, true) );\n\t},\n\n\tis: function( selector ) {\n\t\treturn !!selector && (\n\t\t\ttypeof selector === \"string\" ?\n\t\t\t\t// If this is a positional/relative selector, check membership in the returned set\n\t\t\t\t// so $(\"p:first\").is(\"p:last\") won't return true for a doc with two \"p\".\n\t\t\t\trneedsContext.test( selector ) ?\n\t\t\t\t\tjQuery( selector, this.context ).index( this[0] ) >= 0 :\n\t\t\t\t\tjQuery.filter( selector, this ).length > 0 :\n\t\t\t\tthis.filter( selector ).length > 0 );\n\t},\n\n\tclosest: function( selectors, context ) {\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\tl = this.length,\n\t\t\tret = [],\n\t\t\tpos = rneedsContext.test( selectors ) || typeof selectors !== \"string\" ?\n\t\t\t\tjQuery( selectors, context || this.context ) :\n\t\t\t\t0;\n\n\t\tfor ( ; i < l; i++ ) {\n\t\t\tcur = this[i];\n\n\t\t\twhile ( cur && cur.ownerDocument && cur !== context && cur.nodeType !== 11 ) {\n\t\t\t\tif ( pos ? pos.index(cur) > -1 : jQuery.find.matchesSelector(cur, selectors) ) {\n\t\t\t\t\tret.push( cur );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcur = cur.parentNode;\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( ret.length > 1 ? jQuery.unique( ret ) : ret );\n\t},\n\n\t// Determine the position of an element within\n\t// the matched set of elements\n\tindex: function( elem ) {\n\n\t\t// No argument, return index in parent\n\t\tif ( !elem ) {\n\t\t\treturn ( this[0] && this[0].parentNode ) ? this.first().prevAll().length : -1;\n\t\t}\n\n\t\t// index in selector\n\t\tif ( typeof elem === \"string\" ) {\n\t\t\treturn jQuery.inArray( this[0], jQuery( elem ) );\n\t\t}\n\n\t\t// Locate the position of the desired element\n\t\treturn jQuery.inArray(\n\t\t\t// If it receives a jQuery object, the first element is used\n\t\t\telem.jquery ? elem[0] : elem, this );\n\t},\n\n\tadd: function( selector, context ) {\n\t\tvar set = typeof selector === \"string\" ?\n\t\t\t\tjQuery( selector, context ) :\n\t\t\t\tjQuery.makeArray( selector && selector.nodeType ? [ selector ] : selector ),\n\t\t\tall = jQuery.merge( this.get(), set );\n\n\t\treturn this.pushStack( jQuery.unique(all) );\n\t},\n\n\taddBack: function( selector ) {\n\t\treturn this.add( selector == null ?\n\t\t\tthis.prevObject : this.prevObject.filter(selector)\n\t\t);\n\t}\n});\n\njQuery.fn.andSelf = jQuery.fn.addBack;\n\nfunction sibling( cur, dir ) {\n\tdo {\n\t\tcur = cur[ dir ];\n\t} while ( cur && cur.nodeType !== 1 );\n\n\treturn cur;\n}\n\njQuery.each({\n\tparent: function( elem ) {\n\t\tvar parent = elem.parentNode;\n\t\treturn parent && parent.nodeType !== 11 ? parent : null;\n\t},\n\tparents: function( elem ) {\n\t\treturn jQuery.dir( elem, \"parentNode\" );\n\t},\n\tparentsUntil: function( elem, i, until ) {\n\t\treturn jQuery.dir( elem, \"parentNode\", until );\n\t},\n\tnext: function( elem ) {\n\t\treturn sibling( elem, \"nextSibling\" );\n\t},\n\tprev: function( elem ) {\n\t\treturn sibling( elem, \"previousSibling\" );\n\t},\n\tnextAll: function( elem ) {\n\t\treturn jQuery.dir( elem, \"nextSibling\" );\n\t},\n\tprevAll: function( elem ) {\n\t\treturn jQuery.dir( elem, \"previousSibling\" );\n\t},\n\tnextUntil: function( elem, i, until ) {\n\t\treturn jQuery.dir( elem, \"nextSibling\", until );\n\t},\n\tprevUntil: function( elem, i, until ) {\n\t\treturn jQuery.dir( elem, \"previousSibling\", until );\n\t},\n\tsiblings: function( elem ) {\n\t\treturn jQuery.sibling( ( elem.parentNode || {} ).firstChild, elem );\n\t},\n\tchildren: function( elem ) {\n\t\treturn jQuery.sibling( elem.firstChild );\n\t},\n\tcontents: function( elem ) {\n\t\treturn jQuery.nodeName( elem, \"iframe\" ) ?\n\t\t\telem.contentDocument || elem.contentWindow.document :\n\t\t\tjQuery.merge( [], elem.childNodes );\n\t}\n}, function( name, fn ) {\n\tjQuery.fn[ name ] = function( until, selector ) {\n\t\tvar ret = jQuery.map( this, fn, until );\n\n\t\tif ( !runtil.test( name ) ) {\n\t\t\tselector = until;\n\t\t}\n\n\t\tif ( selector && typeof selector === \"string\" ) {\n\t\t\tret = jQuery.filter( selector, ret );\n\t\t}\n\n\t\tret = this.length > 1 && !guaranteedUnique[ name ] ? jQuery.unique( ret ) : ret;\n\n\t\tif ( this.length > 1 && rparentsprev.test( name ) ) {\n\t\t\tret = ret.reverse();\n\t\t}\n\n\t\treturn this.pushStack( ret );\n\t};\n});\n\njQuery.extend({\n\tfilter: function( expr, elems, not ) {\n\t\tif ( not ) {\n\t\t\texpr = \":not(\" + expr + \")\";\n\t\t}\n\n\t\treturn elems.length === 1 ?\n\t\t\tjQuery.find.matchesSelector(elems[0], expr) ? [ elems[0] ] : [] :\n\t\t\tjQuery.find.matches(expr, elems);\n\t},\n\n\tdir: function( elem, dir, until ) {\n\t\tvar matched = [],\n\t\t\tcur = elem[ dir ];\n\n\t\twhile ( cur && cur.nodeType !== 9 && (until === undefined || cur.nodeType !== 1 || !jQuery( cur ).is( until )) ) {\n\t\t\tif ( cur.nodeType === 1 ) {\n\t\t\t\tmatched.push( cur );\n\t\t\t}\n\t\t\tcur = cur[dir];\n\t\t}\n\t\treturn matched;\n\t},\n\n\tsibling: function( n, elem ) {\n\t\tvar r = [];\n\n\t\tfor ( ; n; n = n.nextSibling ) {\n\t\t\tif ( n.nodeType === 1 && n !== elem ) {\n\t\t\t\tr.push( n );\n\t\t\t}\n\t\t}\n\n\t\treturn r;\n\t}\n});\n\n// Implement the identical functionality for filter and not\nfunction winnow( elements, qualifier, keep ) {\n\n\t// Can't pass null or undefined to indexOf in Firefox 4\n\t// Set to 0 to skip string check\n\tqualifier = qualifier || 0;\n\n\tif ( jQuery.isFunction( qualifier ) ) {\n\t\treturn jQuery.grep(elements, function( elem, i ) {\n\t\t\tvar retVal = !!qualifier.call( elem, i, elem );\n\t\t\treturn retVal === keep;\n\t\t});\n\n\t} else if ( qualifier.nodeType ) {\n\t\treturn jQuery.grep(elements, function( elem ) {\n\t\t\treturn ( elem === qualifier ) === keep;\n\t\t});\n\n\t} else if ( typeof qualifier === \"string\" ) {\n\t\tvar filtered = jQuery.grep(elements, function( elem ) {\n\t\t\treturn elem.nodeType === 1;\n\t\t});\n\n\t\tif ( isSimple.test( qualifier ) ) {\n\t\t\treturn jQuery.filter(qualifier, filtered, !keep);\n\t\t} else {\n\t\t\tqualifier = jQuery.filter( qualifier, filtered );\n\t\t}\n\t}\n\n\treturn jQuery.grep(elements, function( elem ) {\n\t\treturn ( jQuery.inArray( elem, qualifier ) >= 0 ) === keep;\n\t});\n}\nfunction createSafeFragment( document ) {\n\tvar list = nodeNames.split( \"|\" ),\n\t\tsafeFrag = document.createDocumentFragment();\n\n\tif ( safeFrag.createElement ) {\n\t\twhile ( list.length ) {\n\t\t\tsafeFrag.createElement(\n\t\t\t\tlist.pop()\n\t\t\t);\n\t\t}\n\t}\n\treturn safeFrag;\n}\n\nvar nodeNames = \"abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|\" +\n\t\t\"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video\",\n\trinlinejQuery = / jQuery\\d+=\"(?:null|\\d+)\"/g,\n\trnoshimcache = new RegExp(\"<(?:\" + nodeNames + \")[\\\\s/>]\", \"i\"),\n\trleadingWhitespace = /^\\s+/,\n\trxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,\n\trtagName = /<([\\w:]+)/,\n\trtbody = /<tbody/i,\n\trhtml = /<|&#?\\w+;/,\n\trnoInnerhtml = /<(?:script|style|link)/i,\n\tmanipulation_rcheckableType = /^(?:checkbox|radio)$/i,\n\t// checked=\"checked\" or checked\n\trchecked = /checked\\s*(?:[^=]|=\\s*.checked.)/i,\n\trscriptType = /^$|\\/(?:java|ecma)script/i,\n\trscriptTypeMasked = /^true\\/(.*)/,\n\trcleanScript = /^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g,\n\n\t// We have to close these tags to support XHTML (#13200)\n\twrapMap = {\n\t\toption: [ 1, \"<select multiple='multiple'>\", \"</select>\" ],\n\t\tlegend: [ 1, \"<fieldset>\", \"</fieldset>\" ],\n\t\tarea: [ 1, \"<map>\", \"</map>\" ],\n\t\tparam: [ 1, \"<object>\", \"</object>\" ],\n\t\tthead: [ 1, \"<table>\", \"</table>\" ],\n\t\ttr: [ 2, \"<table><tbody>\", \"</tbody></table>\" ],\n\t\tcol: [ 2, \"<table><tbody></tbody><colgroup>\", \"</colgroup></table>\" ],\n\t\ttd: [ 3, \"<table><tbody><tr>\", \"</tr></tbody></table>\" ],\n\n\t\t// IE6-8 can't serialize link, script, style, or any html5 (NoScope) tags,\n\t\t// unless wrapped in a div with non-breaking characters in front of it.\n\t\t_default: jQuery.support.htmlSerialize ? [ 0, \"\", \"\" ] : [ 1, \"X<div>\", \"</div>\"  ]\n\t},\n\tsafeFragment = createSafeFragment( document ),\n\tfragmentDiv = safeFragment.appendChild( document.createElement(\"div\") );\n\nwrapMap.optgroup = wrapMap.option;\nwrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;\nwrapMap.th = wrapMap.td;\n\njQuery.fn.extend({\n\ttext: function( value ) {\n\t\treturn jQuery.access( this, function( value ) {\n\t\t\treturn value === undefined ?\n\t\t\t\tjQuery.text( this ) :\n\t\t\t\tthis.empty().append( ( this[0] && this[0].ownerDocument || document ).createTextNode( value ) );\n\t\t}, null, value, arguments.length );\n\t},\n\n\twrapAll: function( html ) {\n\t\tif ( jQuery.isFunction( html ) ) {\n\t\t\treturn this.each(function(i) {\n\t\t\t\tjQuery(this).wrapAll( html.call(this, i) );\n\t\t\t});\n\t\t}\n\n\t\tif ( this[0] ) {\n\t\t\t// The elements to wrap the target around\n\t\t\tvar wrap = jQuery( html, this[0].ownerDocument ).eq(0).clone(true);\n\n\t\t\tif ( this[0].parentNode ) {\n\t\t\t\twrap.insertBefore( this[0] );\n\t\t\t}\n\n\t\t\twrap.map(function() {\n\t\t\t\tvar elem = this;\n\n\t\t\t\twhile ( elem.firstChild && elem.firstChild.nodeType === 1 ) {\n\t\t\t\t\telem = elem.firstChild;\n\t\t\t\t}\n\n\t\t\t\treturn elem;\n\t\t\t}).append( this );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\twrapInner: function( html ) {\n\t\tif ( jQuery.isFunction( html ) ) {\n\t\t\treturn this.each(function(i) {\n\t\t\t\tjQuery(this).wrapInner( html.call(this, i) );\n\t\t\t});\n\t\t}\n\n\t\treturn this.each(function() {\n\t\t\tvar self = jQuery( this ),\n\t\t\t\tcontents = self.contents();\n\n\t\t\tif ( contents.length ) {\n\t\t\t\tcontents.wrapAll( html );\n\n\t\t\t} else {\n\t\t\t\tself.append( html );\n\t\t\t}\n\t\t});\n\t},\n\n\twrap: function( html ) {\n\t\tvar isFunction = jQuery.isFunction( html );\n\n\t\treturn this.each(function(i) {\n\t\t\tjQuery( this ).wrapAll( isFunction ? html.call(this, i) : html );\n\t\t});\n\t},\n\n\tunwrap: function() {\n\t\treturn this.parent().each(function() {\n\t\t\tif ( !jQuery.nodeName( this, \"body\" ) ) {\n\t\t\t\tjQuery( this ).replaceWith( this.childNodes );\n\t\t\t}\n\t\t}).end();\n\t},\n\n\tappend: function() {\n\t\treturn this.domManip(arguments, true, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tthis.appendChild( elem );\n\t\t\t}\n\t\t});\n\t},\n\n\tprepend: function() {\n\t\treturn this.domManip(arguments, true, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tthis.insertBefore( elem, this.firstChild );\n\t\t\t}\n\t\t});\n\t},\n\n\tbefore: function() {\n\t\treturn this.domManip( arguments, false, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this );\n\t\t\t}\n\t\t});\n\t},\n\n\tafter: function() {\n\t\treturn this.domManip( arguments, false, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this.nextSibling );\n\t\t\t}\n\t\t});\n\t},\n\n\t// keepData is for internal use only--do not document\n\tremove: function( selector, keepData ) {\n\t\tvar elem,\n\t\t\ti = 0;\n\n\t\tfor ( ; (elem = this[i]) != null; i++ ) {\n\t\t\tif ( !selector || jQuery.filter( selector, [ elem ] ).length > 0 ) {\n\t\t\t\tif ( !keepData && elem.nodeType === 1 ) {\n\t\t\t\t\tjQuery.cleanData( getAll( elem ) );\n\t\t\t\t}\n\n\t\t\t\tif ( elem.parentNode ) {\n\t\t\t\t\tif ( keepData && jQuery.contains( elem.ownerDocument, elem ) ) {\n\t\t\t\t\t\tsetGlobalEval( getAll( elem, \"script\" ) );\n\t\t\t\t\t}\n\t\t\t\t\telem.parentNode.removeChild( elem );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tempty: function() {\n\t\tvar elem,\n\t\t\ti = 0;\n\n\t\tfor ( ; (elem = this[i]) != null; i++ ) {\n\t\t\t// Remove element nodes and prevent memory leaks\n\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\t\t\t}\n\n\t\t\t// Remove any remaining nodes\n\t\t\twhile ( elem.firstChild ) {\n\t\t\t\telem.removeChild( elem.firstChild );\n\t\t\t}\n\n\t\t\t// If this is a select, ensure that it displays empty (#12336)\n\t\t\t// Support: IE<9\n\t\t\tif ( elem.options && jQuery.nodeName( elem, \"select\" ) ) {\n\t\t\t\telem.options.length = 0;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tclone: function( dataAndEvents, deepDataAndEvents ) {\n\t\tdataAndEvents = dataAndEvents == null ? false : dataAndEvents;\n\t\tdeepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;\n\n\t\treturn this.map( function () {\n\t\t\treturn jQuery.clone( this, dataAndEvents, deepDataAndEvents );\n\t\t});\n\t},\n\n\thtml: function( value ) {\n\t\treturn jQuery.access( this, function( value ) {\n\t\t\tvar elem = this[0] || {},\n\t\t\t\ti = 0,\n\t\t\t\tl = this.length;\n\n\t\t\tif ( value === undefined ) {\n\t\t\t\treturn elem.nodeType === 1 ?\n\t\t\t\t\telem.innerHTML.replace( rinlinejQuery, \"\" ) :\n\t\t\t\t\tundefined;\n\t\t\t}\n\n\t\t\t// See if we can take a shortcut and just use innerHTML\n\t\t\tif ( typeof value === \"string\" && !rnoInnerhtml.test( value ) &&\n\t\t\t\t( jQuery.support.htmlSerialize || !rnoshimcache.test( value )  ) &&\n\t\t\t\t( jQuery.support.leadingWhitespace || !rleadingWhitespace.test( value ) ) &&\n\t\t\t\t!wrapMap[ ( rtagName.exec( value ) || [\"\", \"\"] )[1].toLowerCase() ] ) {\n\n\t\t\t\tvalue = value.replace( rxhtmlTag, \"<$1></$2>\" );\n\n\t\t\t\ttry {\n\t\t\t\t\tfor (; i < l; i++ ) {\n\t\t\t\t\t\t// Remove element nodes and prevent memory leaks\n\t\t\t\t\t\telem = this[i] || {};\n\t\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\t\t\t\t\t\t\telem.innerHTML = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\telem = 0;\n\n\t\t\t\t// If using innerHTML throws an exception, use the fallback method\n\t\t\t\t} catch(e) {}\n\t\t\t}\n\n\t\t\tif ( elem ) {\n\t\t\t\tthis.empty().append( value );\n\t\t\t}\n\t\t}, null, value, arguments.length );\n\t},\n\n\treplaceWith: function( value ) {\n\t\tvar isFunc = jQuery.isFunction( value );\n\n\t\t// Make sure that the elements are removed from the DOM before they are inserted\n\t\t// this can help fix replacing a parent with child elements\n\t\tif ( !isFunc && typeof value !== \"string\" ) {\n\t\t\tvalue = jQuery( value ).not( this ).detach();\n\t\t}\n\n\t\treturn this.domManip( [ value ], true, function( elem ) {\n\t\t\tvar next = this.nextSibling,\n\t\t\t\tparent = this.parentNode;\n\n\t\t\tif ( parent ) {\n\t\t\t\tjQuery( this ).remove();\n\t\t\t\tparent.insertBefore( elem, next );\n\t\t\t}\n\t\t});\n\t},\n\n\tdetach: function( selector ) {\n\t\treturn this.remove( selector, true );\n\t},\n\n\tdomManip: function( args, table, callback ) {\n\n\t\t// Flatten any nested arrays\n\t\targs = core_concat.apply( [], args );\n\n\t\tvar first, node, hasScripts,\n\t\t\tscripts, doc, fragment,\n\t\t\ti = 0,\n\t\t\tl = this.length,\n\t\t\tset = this,\n\t\t\tiNoClone = l - 1,\n\t\t\tvalue = args[0],\n\t\t\tisFunction = jQuery.isFunction( value );\n\n\t\t// We can't cloneNode fragments that contain checked, in WebKit\n\t\tif ( isFunction || !( l <= 1 || typeof value !== \"string\" || jQuery.support.checkClone || !rchecked.test( value ) ) ) {\n\t\t\treturn this.each(function( index ) {\n\t\t\t\tvar self = set.eq( index );\n\t\t\t\tif ( isFunction ) {\n\t\t\t\t\targs[0] = value.call( this, index, table ? self.html() : undefined );\n\t\t\t\t}\n\t\t\t\tself.domManip( args, table, callback );\n\t\t\t});\n\t\t}\n\n\t\tif ( l ) {\n\t\t\tfragment = jQuery.buildFragment( args, this[ 0 ].ownerDocument, false, this );\n\t\t\tfirst = fragment.firstChild;\n\n\t\t\tif ( fragment.childNodes.length === 1 ) {\n\t\t\t\tfragment = first;\n\t\t\t}\n\n\t\t\tif ( first ) {\n\t\t\t\ttable = table && jQuery.nodeName( first, \"tr\" );\n\t\t\t\tscripts = jQuery.map( getAll( fragment, \"script\" ), disableScript );\n\t\t\t\thasScripts = scripts.length;\n\n\t\t\t\t// Use the original fragment for the last item instead of the first because it can end up\n\t\t\t\t// being emptied incorrectly in certain situations (#8070).\n\t\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\t\tnode = fragment;\n\n\t\t\t\t\tif ( i !== iNoClone ) {\n\t\t\t\t\t\tnode = jQuery.clone( node, true, true );\n\n\t\t\t\t\t\t// Keep references to cloned scripts for later restoration\n\t\t\t\t\t\tif ( hasScripts ) {\n\t\t\t\t\t\t\tjQuery.merge( scripts, getAll( node, \"script\" ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback.call(\n\t\t\t\t\t\ttable && jQuery.nodeName( this[i], \"table\" ) ?\n\t\t\t\t\t\t\tfindOrAppend( this[i], \"tbody\" ) :\n\t\t\t\t\t\t\tthis[i],\n\t\t\t\t\t\tnode,\n\t\t\t\t\t\ti\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif ( hasScripts ) {\n\t\t\t\t\tdoc = scripts[ scripts.length - 1 ].ownerDocument;\n\n\t\t\t\t\t// Reenable scripts\n\t\t\t\t\tjQuery.map( scripts, restoreScript );\n\n\t\t\t\t\t// Evaluate executable scripts on first document insertion\n\t\t\t\t\tfor ( i = 0; i < hasScripts; i++ ) {\n\t\t\t\t\t\tnode = scripts[ i ];\n\t\t\t\t\t\tif ( rscriptType.test( node.type || \"\" ) &&\n\t\t\t\t\t\t\t!jQuery._data( node, \"globalEval\" ) && jQuery.contains( doc, node ) ) {\n\n\t\t\t\t\t\t\tif ( node.src ) {\n\t\t\t\t\t\t\t\t// Hope ajax is available...\n\t\t\t\t\t\t\t\tjQuery.ajax({\n\t\t\t\t\t\t\t\t\turl: node.src,\n\t\t\t\t\t\t\t\t\ttype: \"GET\",\n\t\t\t\t\t\t\t\t\tdataType: \"script\",\n\t\t\t\t\t\t\t\t\tasync: false,\n\t\t\t\t\t\t\t\t\tglobal: false,\n\t\t\t\t\t\t\t\t\t\"throws\": true\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tjQuery.globalEval( ( node.text || node.textContent || node.innerHTML || \"\" ).replace( rcleanScript, \"\" ) );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Fix #11809: Avoid leaking memory\n\t\t\t\tfragment = first = null;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n});\n\nfunction findOrAppend( elem, tag ) {\n\treturn elem.getElementsByTagName( tag )[0] || elem.appendChild( elem.ownerDocument.createElement( tag ) );\n}\n\n// Replace/restore the type attribute of script elements for safe DOM manipulation\nfunction disableScript( elem ) {\n\tvar attr = elem.getAttributeNode(\"type\");\n\telem.type = ( attr && attr.specified ) + \"/\" + elem.type;\n\treturn elem;\n}\nfunction restoreScript( elem ) {\n\tvar match = rscriptTypeMasked.exec( elem.type );\n\tif ( match ) {\n\t\telem.type = match[1];\n\t} else {\n\t\telem.removeAttribute(\"type\");\n\t}\n\treturn elem;\n}\n\n// Mark scripts as having already been evaluated\nfunction setGlobalEval( elems, refElements ) {\n\tvar elem,\n\t\ti = 0;\n\tfor ( ; (elem = elems[i]) != null; i++ ) {\n\t\tjQuery._data( elem, \"globalEval\", !refElements || jQuery._data( refElements[i], \"globalEval\" ) );\n\t}\n}\n\nfunction cloneCopyEvent( src, dest ) {\n\n\tif ( dest.nodeType !== 1 || !jQuery.hasData( src ) ) {\n\t\treturn;\n\t}\n\n\tvar type, i, l,\n\t\toldData = jQuery._data( src ),\n\t\tcurData = jQuery._data( dest, oldData ),\n\t\tevents = oldData.events;\n\n\tif ( events ) {\n\t\tdelete curData.handle;\n\t\tcurData.events = {};\n\n\t\tfor ( type in events ) {\n\t\t\tfor ( i = 0, l = events[ type ].length; i < l; i++ ) {\n\t\t\t\tjQuery.event.add( dest, type, events[ type ][ i ] );\n\t\t\t}\n\t\t}\n\t}\n\n\t// make the cloned public data object a copy from the original\n\tif ( curData.data ) {\n\t\tcurData.data = jQuery.extend( {}, curData.data );\n\t}\n}\n\nfunction fixCloneNodeIssues( src, dest ) {\n\tvar nodeName, e, data;\n\n\t// We do not need to do anything for non-Elements\n\tif ( dest.nodeType !== 1 ) {\n\t\treturn;\n\t}\n\n\tnodeName = dest.nodeName.toLowerCase();\n\n\t// IE6-8 copies events bound via attachEvent when using cloneNode.\n\tif ( !jQuery.support.noCloneEvent && dest[ jQuery.expando ] ) {\n\t\tdata = jQuery._data( dest );\n\n\t\tfor ( e in data.events ) {\n\t\t\tjQuery.removeEvent( dest, e, data.handle );\n\t\t}\n\n\t\t// Event data gets referenced instead of copied if the expando gets copied too\n\t\tdest.removeAttribute( jQuery.expando );\n\t}\n\n\t// IE blanks contents when cloning scripts, and tries to evaluate newly-set text\n\tif ( nodeName === \"script\" && dest.text !== src.text ) {\n\t\tdisableScript( dest ).text = src.text;\n\t\trestoreScript( dest );\n\n\t// IE6-10 improperly clones children of object elements using classid.\n\t// IE10 throws NoModificationAllowedError if parent is null, #12132.\n\t} else if ( nodeName === \"object\" ) {\n\t\tif ( dest.parentNode ) {\n\t\t\tdest.outerHTML = src.outerHTML;\n\t\t}\n\n\t\t// This path appears unavoidable for IE9. When cloning an object\n\t\t// element in IE9, the outerHTML strategy above is not sufficient.\n\t\t// If the src has innerHTML and the destination does not,\n\t\t// copy the src.innerHTML into the dest.innerHTML. #10324\n\t\tif ( jQuery.support.html5Clone && ( src.innerHTML && !jQuery.trim(dest.innerHTML) ) ) {\n\t\t\tdest.innerHTML = src.innerHTML;\n\t\t}\n\n\t} else if ( nodeName === \"input\" && manipulation_rcheckableType.test( src.type ) ) {\n\t\t// IE6-8 fails to persist the checked state of a cloned checkbox\n\t\t// or radio button. Worse, IE6-7 fail to give the cloned element\n\t\t// a checked appearance if the defaultChecked value isn't also set\n\n\t\tdest.defaultChecked = dest.checked = src.checked;\n\n\t\t// IE6-7 get confused and end up setting the value of a cloned\n\t\t// checkbox/radio button to an empty string instead of \"on\"\n\t\tif ( dest.value !== src.value ) {\n\t\t\tdest.value = src.value;\n\t\t}\n\n\t// IE6-8 fails to return the selected option to the default selected\n\t// state when cloning options\n\t} else if ( nodeName === \"option\" ) {\n\t\tdest.defaultSelected = dest.selected = src.defaultSelected;\n\n\t// IE6-8 fails to set the defaultValue to the correct value when\n\t// cloning other types of input fields\n\t} else if ( nodeName === \"input\" || nodeName === \"textarea\" ) {\n\t\tdest.defaultValue = src.defaultValue;\n\t}\n}\n\njQuery.each({\n\tappendTo: \"append\",\n\tprependTo: \"prepend\",\n\tinsertBefore: \"before\",\n\tinsertAfter: \"after\",\n\treplaceAll: \"replaceWith\"\n}, function( name, original ) {\n\tjQuery.fn[ name ] = function( selector ) {\n\t\tvar elems,\n\t\t\ti = 0,\n\t\t\tret = [],\n\t\t\tinsert = jQuery( selector ),\n\t\t\tlast = insert.length - 1;\n\n\t\tfor ( ; i <= last; i++ ) {\n\t\t\telems = i === last ? this : this.clone(true);\n\t\t\tjQuery( insert[i] )[ original ]( elems );\n\n\t\t\t// Modern browsers can apply jQuery collections as arrays, but oldIE needs a .get()\n\t\t\tcore_push.apply( ret, elems.get() );\n\t\t}\n\n\t\treturn this.pushStack( ret );\n\t};\n});\n\nfunction getAll( context, tag ) {\n\tvar elems, elem,\n\t\ti = 0,\n\t\tfound = typeof context.getElementsByTagName !== core_strundefined ? context.getElementsByTagName( tag || \"*\" ) :\n\t\t\ttypeof context.querySelectorAll !== core_strundefined ? context.querySelectorAll( tag || \"*\" ) :\n\t\t\tundefined;\n\n\tif ( !found ) {\n\t\tfor ( found = [], elems = context.childNodes || context; (elem = elems[i]) != null; i++ ) {\n\t\t\tif ( !tag || jQuery.nodeName( elem, tag ) ) {\n\t\t\t\tfound.push( elem );\n\t\t\t} else {\n\t\t\t\tjQuery.merge( found, getAll( elem, tag ) );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn tag === undefined || tag && jQuery.nodeName( context, tag ) ?\n\t\tjQuery.merge( [ context ], found ) :\n\t\tfound;\n}\n\n// Used in buildFragment, fixes the defaultChecked property\nfunction fixDefaultChecked( elem ) {\n\tif ( manipulation_rcheckableType.test( elem.type ) ) {\n\t\telem.defaultChecked = elem.checked;\n\t}\n}\n\njQuery.extend({\n\tclone: function( elem, dataAndEvents, deepDataAndEvents ) {\n\t\tvar destElements, node, clone, i, srcElements,\n\t\t\tinPage = jQuery.contains( elem.ownerDocument, elem );\n\n\t\tif ( jQuery.support.html5Clone || jQuery.isXMLDoc(elem) || !rnoshimcache.test( \"<\" + elem.nodeName + \">\" ) ) {\n\t\t\tclone = elem.cloneNode( true );\n\n\t\t// IE<=8 does not properly clone detached, unknown element nodes\n\t\t} else {\n\t\t\tfragmentDiv.innerHTML = elem.outerHTML;\n\t\t\tfragmentDiv.removeChild( clone = fragmentDiv.firstChild );\n\t\t}\n\n\t\tif ( (!jQuery.support.noCloneEvent || !jQuery.support.noCloneChecked) &&\n\t\t\t\t(elem.nodeType === 1 || elem.nodeType === 11) && !jQuery.isXMLDoc(elem) ) {\n\n\t\t\t// We eschew Sizzle here for performance reasons: http://jsperf.com/getall-vs-sizzle/2\n\t\t\tdestElements = getAll( clone );\n\t\t\tsrcElements = getAll( elem );\n\n\t\t\t// Fix all IE cloning issues\n\t\t\tfor ( i = 0; (node = srcElements[i]) != null; ++i ) {\n\t\t\t\t// Ensure that the destination node is not null; Fixes #9587\n\t\t\t\tif ( destElements[i] ) {\n\t\t\t\t\tfixCloneNodeIssues( node, destElements[i] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Copy the events from the original to the clone\n\t\tif ( dataAndEvents ) {\n\t\t\tif ( deepDataAndEvents ) {\n\t\t\t\tsrcElements = srcElements || getAll( elem );\n\t\t\t\tdestElements = destElements || getAll( clone );\n\n\t\t\t\tfor ( i = 0; (node = srcElements[i]) != null; i++ ) {\n\t\t\t\t\tcloneCopyEvent( node, destElements[i] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcloneCopyEvent( elem, clone );\n\t\t\t}\n\t\t}\n\n\t\t// Preserve script evaluation history\n\t\tdestElements = getAll( clone, \"script\" );\n\t\tif ( destElements.length > 0 ) {\n\t\t\tsetGlobalEval( destElements, !inPage && getAll( elem, \"script\" ) );\n\t\t}\n\n\t\tdestElements = srcElements = node = null;\n\n\t\t// Return the cloned set\n\t\treturn clone;\n\t},\n\n\tbuildFragment: function( elems, context, scripts, selection ) {\n\t\tvar j, elem, contains,\n\t\t\ttmp, tag, tbody, wrap,\n\t\t\tl = elems.length,\n\n\t\t\t// Ensure a safe fragment\n\t\t\tsafe = createSafeFragment( context ),\n\n\t\t\tnodes = [],\n\t\t\ti = 0;\n\n\t\tfor ( ; i < l; i++ ) {\n\t\t\telem = elems[ i ];\n\n\t\t\tif ( elem || elem === 0 ) {\n\n\t\t\t\t// Add nodes directly\n\t\t\t\tif ( jQuery.type( elem ) === \"object\" ) {\n\t\t\t\t\tjQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );\n\n\t\t\t\t// Convert non-html into a text node\n\t\t\t\t} else if ( !rhtml.test( elem ) ) {\n\t\t\t\t\tnodes.push( context.createTextNode( elem ) );\n\n\t\t\t\t// Convert html into DOM nodes\n\t\t\t\t} else {\n\t\t\t\t\ttmp = tmp || safe.appendChild( context.createElement(\"div\") );\n\n\t\t\t\t\t// Deserialize a standard representation\n\t\t\t\t\ttag = ( rtagName.exec( elem ) || [\"\", \"\"] )[1].toLowerCase();\n\t\t\t\t\twrap = wrapMap[ tag ] || wrapMap._default;\n\n\t\t\t\t\ttmp.innerHTML = wrap[1] + elem.replace( rxhtmlTag, \"<$1></$2>\" ) + wrap[2];\n\n\t\t\t\t\t// Descend through wrappers to the right content\n\t\t\t\t\tj = wrap[0];\n\t\t\t\t\twhile ( j-- ) {\n\t\t\t\t\t\ttmp = tmp.lastChild;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Manually add leading whitespace removed by IE\n\t\t\t\t\tif ( !jQuery.support.leadingWhitespace && rleadingWhitespace.test( elem ) ) {\n\t\t\t\t\t\tnodes.push( context.createTextNode( rleadingWhitespace.exec( elem )[0] ) );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Remove IE's autoinserted <tbody> from table fragments\n\t\t\t\t\tif ( !jQuery.support.tbody ) {\n\n\t\t\t\t\t\t// String was a <table>, *may* have spurious <tbody>\n\t\t\t\t\t\telem = tag === \"table\" && !rtbody.test( elem ) ?\n\t\t\t\t\t\t\ttmp.firstChild :\n\n\t\t\t\t\t\t\t// String was a bare <thead> or <tfoot>\n\t\t\t\t\t\t\twrap[1] === \"<table>\" && !rtbody.test( elem ) ?\n\t\t\t\t\t\t\t\ttmp :\n\t\t\t\t\t\t\t\t0;\n\n\t\t\t\t\t\tj = elem && elem.childNodes.length;\n\t\t\t\t\t\twhile ( j-- ) {\n\t\t\t\t\t\t\tif ( jQuery.nodeName( (tbody = elem.childNodes[j]), \"tbody\" ) && !tbody.childNodes.length ) {\n\t\t\t\t\t\t\t\telem.removeChild( tbody );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tjQuery.merge( nodes, tmp.childNodes );\n\n\t\t\t\t\t// Fix #12392 for WebKit and IE > 9\n\t\t\t\t\ttmp.textContent = \"\";\n\n\t\t\t\t\t// Fix #12392 for oldIE\n\t\t\t\t\twhile ( tmp.firstChild ) {\n\t\t\t\t\t\ttmp.removeChild( tmp.firstChild );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Remember the top-level container for proper cleanup\n\t\t\t\t\ttmp = safe.lastChild;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Fix #11356: Clear elements from fragment\n\t\tif ( tmp ) {\n\t\t\tsafe.removeChild( tmp );\n\t\t}\n\n\t\t// Reset defaultChecked for any radios and checkboxes\n\t\t// about to be appended to the DOM in IE 6/7 (#8060)\n\t\tif ( !jQuery.support.appendChecked ) {\n\t\t\tjQuery.grep( getAll( nodes, \"input\" ), fixDefaultChecked );\n\t\t}\n\n\t\ti = 0;\n\t\twhile ( (elem = nodes[ i++ ]) ) {\n\n\t\t\t// #4087 - If origin and destination elements are the same, and this is\n\t\t\t// that element, do not do anything\n\t\t\tif ( selection && jQuery.inArray( elem, selection ) !== -1 ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tcontains = jQuery.contains( elem.ownerDocument, elem );\n\n\t\t\t// Append to fragment\n\t\t\ttmp = getAll( safe.appendChild( elem ), \"script\" );\n\n\t\t\t// Preserve script evaluation history\n\t\t\tif ( contains ) {\n\t\t\t\tsetGlobalEval( tmp );\n\t\t\t}\n\n\t\t\t// Capture executables\n\t\t\tif ( scripts ) {\n\t\t\t\tj = 0;\n\t\t\t\twhile ( (elem = tmp[ j++ ]) ) {\n\t\t\t\t\tif ( rscriptType.test( elem.type || \"\" ) ) {\n\t\t\t\t\t\tscripts.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\ttmp = null;\n\n\t\treturn safe;\n\t},\n\n\tcleanData: function( elems, /* internal */ acceptData ) {\n\t\tvar elem, type, id, data,\n\t\t\ti = 0,\n\t\t\tinternalKey = jQuery.expando,\n\t\t\tcache = jQuery.cache,\n\t\t\tdeleteExpando = jQuery.support.deleteExpando,\n\t\t\tspecial = jQuery.event.special;\n\n\t\tfor ( ; (elem = elems[i]) != null; i++ ) {\n\n\t\t\tif ( acceptData || jQuery.acceptData( elem ) ) {\n\n\t\t\t\tid = elem[ internalKey ];\n\t\t\t\tdata = id && cache[ id ];\n\n\t\t\t\tif ( data ) {\n\t\t\t\t\tif ( data.events ) {\n\t\t\t\t\t\tfor ( type in data.events ) {\n\t\t\t\t\t\t\tif ( special[ type ] ) {\n\t\t\t\t\t\t\t\tjQuery.event.remove( elem, type );\n\n\t\t\t\t\t\t\t// This is a shortcut to avoid jQuery.event.remove's overhead\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tjQuery.removeEvent( elem, type, data.handle );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Remove cache only if it was not already removed by jQuery.event.remove\n\t\t\t\t\tif ( cache[ id ] ) {\n\n\t\t\t\t\t\tdelete cache[ id ];\n\n\t\t\t\t\t\t// IE does not allow us to delete expando properties from nodes,\n\t\t\t\t\t\t// nor does it have a removeAttribute function on Document nodes;\n\t\t\t\t\t\t// we must handle all of these cases\n\t\t\t\t\t\tif ( deleteExpando ) {\n\t\t\t\t\t\t\tdelete elem[ internalKey ];\n\n\t\t\t\t\t\t} else if ( typeof elem.removeAttribute !== core_strundefined ) {\n\t\t\t\t\t\t\telem.removeAttribute( internalKey );\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\telem[ internalKey ] = null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcore_deletedIds.push( id );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\nvar iframe, getStyles, curCSS,\n\tralpha = /alpha\\([^)]*\\)/i,\n\tropacity = /opacity\\s*=\\s*([^)]*)/,\n\trposition = /^(top|right|bottom|left)$/,\n\t// swappable if display is none or starts with table except \"table\", \"table-cell\", or \"table-caption\"\n\t// see here for display values: https://developer.mozilla.org/en-US/docs/CSS/display\n\trdisplayswap = /^(none|table(?!-c[ea]).+)/,\n\trmargin = /^margin/,\n\trnumsplit = new RegExp( \"^(\" + core_pnum + \")(.*)$\", \"i\" ),\n\trnumnonpx = new RegExp( \"^(\" + core_pnum + \")(?!px)[a-z%]+$\", \"i\" ),\n\trrelNum = new RegExp( \"^([+-])=(\" + core_pnum + \")\", \"i\" ),\n\telemdisplay = { BODY: \"block\" },\n\n\tcssShow = { position: \"absolute\", visibility: \"hidden\", display: \"block\" },\n\tcssNormalTransform = {\n\t\tletterSpacing: 0,\n\t\tfontWeight: 400\n\t},\n\n\tcssExpand = [ \"Top\", \"Right\", \"Bottom\", \"Left\" ],\n\tcssPrefixes = [ \"Webkit\", \"O\", \"Moz\", \"ms\" ];\n\n// return a css property mapped to a potentially vendor prefixed property\nfunction vendorPropName( style, name ) {\n\n\t// shortcut for names that are not vendor prefixed\n\tif ( name in style ) {\n\t\treturn name;\n\t}\n\n\t// check for vendor prefixed names\n\tvar capName = name.charAt(0).toUpperCase() + name.slice(1),\n\t\torigName = name,\n\t\ti = cssPrefixes.length;\n\n\twhile ( i-- ) {\n\t\tname = cssPrefixes[ i ] + capName;\n\t\tif ( name in style ) {\n\t\t\treturn name;\n\t\t}\n\t}\n\n\treturn origName;\n}\n\nfunction isHidden( elem, el ) {\n\t// isHidden might be called from jQuery#filter function;\n\t// in that case, element will be second argument\n\telem = el || elem;\n\treturn jQuery.css( elem, \"display\" ) === \"none\" || !jQuery.contains( elem.ownerDocument, elem );\n}\n\nfunction showHide( elements, show ) {\n\tvar display, elem, hidden,\n\t\tvalues = [],\n\t\tindex = 0,\n\t\tlength = elements.length;\n\n\tfor ( ; index < length; index++ ) {\n\t\telem = elements[ index ];\n\t\tif ( !elem.style ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tvalues[ index ] = jQuery._data( elem, \"olddisplay\" );\n\t\tdisplay = elem.style.display;\n\t\tif ( show ) {\n\t\t\t// Reset the inline display of this element to learn if it is\n\t\t\t// being hidden by cascaded rules or not\n\t\t\tif ( !values[ index ] && display === \"none\" ) {\n\t\t\t\telem.style.display = \"\";\n\t\t\t}\n\n\t\t\t// Set elements which have been overridden with display: none\n\t\t\t// in a stylesheet to whatever the default browser style is\n\t\t\t// for such an element\n\t\t\tif ( elem.style.display === \"\" && isHidden( elem ) ) {\n\t\t\t\tvalues[ index ] = jQuery._data( elem, \"olddisplay\", css_defaultDisplay(elem.nodeName) );\n\t\t\t}\n\t\t} else {\n\n\t\t\tif ( !values[ index ] ) {\n\t\t\t\thidden = isHidden( elem );\n\n\t\t\t\tif ( display && display !== \"none\" || !hidden ) {\n\t\t\t\t\tjQuery._data( elem, \"olddisplay\", hidden ? display : jQuery.css( elem, \"display\" ) );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Set the display of most of the elements in a second loop\n\t// to avoid the constant reflow\n\tfor ( index = 0; index < length; index++ ) {\n\t\telem = elements[ index ];\n\t\tif ( !elem.style ) {\n\t\t\tcontinue;\n\t\t}\n\t\tif ( !show || elem.style.display === \"none\" || elem.style.display === \"\" ) {\n\t\t\telem.style.display = show ? values[ index ] || \"\" : \"none\";\n\t\t}\n\t}\n\n\treturn elements;\n}\n\njQuery.fn.extend({\n\tcss: function( name, value ) {\n\t\treturn jQuery.access( this, function( elem, name, value ) {\n\t\t\tvar len, styles,\n\t\t\t\tmap = {},\n\t\t\t\ti = 0;\n\n\t\t\tif ( jQuery.isArray( name ) ) {\n\t\t\t\tstyles = getStyles( elem );\n\t\t\t\tlen = name.length;\n\n\t\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\t\tmap[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );\n\t\t\t\t}\n\n\t\t\t\treturn map;\n\t\t\t}\n\n\t\t\treturn value !== undefined ?\n\t\t\t\tjQuery.style( elem, name, value ) :\n\t\t\t\tjQuery.css( elem, name );\n\t\t}, name, value, arguments.length > 1 );\n\t},\n\tshow: function() {\n\t\treturn showHide( this, true );\n\t},\n\thide: function() {\n\t\treturn showHide( this );\n\t},\n\ttoggle: function( state ) {\n\t\tvar bool = typeof state === \"boolean\";\n\n\t\treturn this.each(function() {\n\t\t\tif ( bool ? state : isHidden( this ) ) {\n\t\t\t\tjQuery( this ).show();\n\t\t\t} else {\n\t\t\t\tjQuery( this ).hide();\n\t\t\t}\n\t\t});\n\t}\n});\n\njQuery.extend({\n\t// Add in style property hooks for overriding the default\n\t// behavior of getting and setting a style property\n\tcssHooks: {\n\t\topacity: {\n\t\t\tget: function( elem, computed ) {\n\t\t\t\tif ( computed ) {\n\t\t\t\t\t// We should always get a number back from opacity\n\t\t\t\t\tvar ret = curCSS( elem, \"opacity\" );\n\t\t\t\t\treturn ret === \"\" ? \"1\" : ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t// Exclude the following css properties to add px\n\tcssNumber: {\n\t\t\"columnCount\": true,\n\t\t\"fillOpacity\": true,\n\t\t\"fontWeight\": true,\n\t\t\"lineHeight\": true,\n\t\t\"opacity\": true,\n\t\t\"orphans\": true,\n\t\t\"widows\": true,\n\t\t\"zIndex\": true,\n\t\t\"zoom\": true\n\t},\n\n\t// Add in properties whose names you wish to fix before\n\t// setting or getting the value\n\tcssProps: {\n\t\t// normalize float css property\n\t\t\"float\": jQuery.support.cssFloat ? \"cssFloat\" : \"styleFloat\"\n\t},\n\n\t// Get and set the style property on a DOM Node\n\tstyle: function( elem, name, value, extra ) {\n\t\t// Don't set styles on text and comment nodes\n\t\tif ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Make sure that we're working with the right name\n\t\tvar ret, type, hooks,\n\t\t\torigName = jQuery.camelCase( name ),\n\t\t\tstyle = elem.style;\n\n\t\tname = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( style, origName ) );\n\n\t\t// gets hook for the prefixed version\n\t\t// followed by the unprefixed version\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// Check if we're setting a value\n\t\tif ( value !== undefined ) {\n\t\t\ttype = typeof value;\n\n\t\t\t// convert relative number strings (+= or -=) to relative numbers. #7345\n\t\t\tif ( type === \"string\" && (ret = rrelNum.exec( value )) ) {\n\t\t\t\tvalue = ( ret[1] + 1 ) * ret[2] + parseFloat( jQuery.css( elem, name ) );\n\t\t\t\t// Fixes bug #9237\n\t\t\t\ttype = \"number\";\n\t\t\t}\n\n\t\t\t// Make sure that NaN and null values aren't set. See: #7116\n\t\t\tif ( value == null || type === \"number\" && isNaN( value ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If a number was passed in, add 'px' to the (except for certain CSS properties)\n\t\t\tif ( type === \"number\" && !jQuery.cssNumber[ origName ] ) {\n\t\t\t\tvalue += \"px\";\n\t\t\t}\n\n\t\t\t// Fixes #8908, it can be done more correctly by specifing setters in cssHooks,\n\t\t\t// but it would mean to define eight (for every problematic property) identical functions\n\t\t\tif ( !jQuery.support.clearCloneStyle && value === \"\" && name.indexOf(\"background\") === 0 ) {\n\t\t\t\tstyle[ name ] = \"inherit\";\n\t\t\t}\n\n\t\t\t// If a hook was provided, use that value, otherwise just set the specified value\n\t\t\tif ( !hooks || !(\"set\" in hooks) || (value = hooks.set( elem, value, extra )) !== undefined ) {\n\n\t\t\t\t// Wrapped to prevent IE from throwing errors when 'invalid' values are provided\n\t\t\t\t// Fixes bug #5509\n\t\t\t\ttry {\n\t\t\t\t\tstyle[ name ] = value;\n\t\t\t\t} catch(e) {}\n\t\t\t}\n\n\t\t} else {\n\t\t\t// If a hook was provided get the non-computed value from there\n\t\t\tif ( hooks && \"get\" in hooks && (ret = hooks.get( elem, false, extra )) !== undefined ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\t// Otherwise just get the value from the style object\n\t\t\treturn style[ name ];\n\t\t}\n\t},\n\n\tcss: function( elem, name, extra, styles ) {\n\t\tvar num, val, hooks,\n\t\t\torigName = jQuery.camelCase( name );\n\n\t\t// Make sure that we're working with the right name\n\t\tname = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( elem.style, origName ) );\n\n\t\t// gets hook for the prefixed version\n\t\t// followed by the unprefixed version\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// If a hook was provided get the computed value from there\n\t\tif ( hooks && \"get\" in hooks ) {\n\t\t\tval = hooks.get( elem, true, extra );\n\t\t}\n\n\t\t// Otherwise, if a way to get the computed value exists, use that\n\t\tif ( val === undefined ) {\n\t\t\tval = curCSS( elem, name, styles );\n\t\t}\n\n\t\t//convert \"normal\" to computed value\n\t\tif ( val === \"normal\" && name in cssNormalTransform ) {\n\t\t\tval = cssNormalTransform[ name ];\n\t\t}\n\n\t\t// Return, converting to number if forced or a qualifier was provided and val looks numeric\n\t\tif ( extra === \"\" || extra ) {\n\t\t\tnum = parseFloat( val );\n\t\t\treturn extra === true || jQuery.isNumeric( num ) ? num || 0 : val;\n\t\t}\n\t\treturn val;\n\t},\n\n\t// A method for quickly swapping in/out CSS properties to get correct calculations\n\tswap: function( elem, options, callback, args ) {\n\t\tvar ret, name,\n\t\t\told = {};\n\n\t\t// Remember the old values, and insert the new ones\n\t\tfor ( name in options ) {\n\t\t\told[ name ] = elem.style[ name ];\n\t\t\telem.style[ name ] = options[ name ];\n\t\t}\n\n\t\tret = callback.apply( elem, args || [] );\n\n\t\t// Revert the old values\n\t\tfor ( name in options ) {\n\t\t\telem.style[ name ] = old[ name ];\n\t\t}\n\n\t\treturn ret;\n\t}\n});\n\n// NOTE: we've included the \"window\" in window.getComputedStyle\n// because jsdom on node.js will break without it.\nif ( window.getComputedStyle ) {\n\tgetStyles = function( elem ) {\n\t\treturn window.getComputedStyle( elem, null );\n\t};\n\n\tcurCSS = function( elem, name, _computed ) {\n\t\tvar width, minWidth, maxWidth,\n\t\t\tcomputed = _computed || getStyles( elem ),\n\n\t\t\t// getPropertyValue is only needed for .css('filter') in IE9, see #12537\n\t\t\tret = computed ? computed.getPropertyValue( name ) || computed[ name ] : undefined,\n\t\t\tstyle = elem.style;\n\n\t\tif ( computed ) {\n\n\t\t\tif ( ret === \"\" && !jQuery.contains( elem.ownerDocument, elem ) ) {\n\t\t\t\tret = jQuery.style( elem, name );\n\t\t\t}\n\n\t\t\t// A tribute to the \"awesome hack by Dean Edwards\"\n\t\t\t// Chrome < 17 and Safari 5.0 uses \"computed value\" instead of \"used value\" for margin-right\n\t\t\t// Safari 5.1.7 (at least) returns percentage for a larger set of values, but width seems to be reliably pixels\n\t\t\t// this is against the CSSOM draft spec: http://dev.w3.org/csswg/cssom/#resolved-values\n\t\t\tif ( rnumnonpx.test( ret ) && rmargin.test( name ) ) {\n\n\t\t\t\t// Remember the original values\n\t\t\t\twidth = style.width;\n\t\t\t\tminWidth = style.minWidth;\n\t\t\t\tmaxWidth = style.maxWidth;\n\n\t\t\t\t// Put in the new values to get a computed value out\n\t\t\t\tstyle.minWidth = style.maxWidth = style.width = ret;\n\t\t\t\tret = computed.width;\n\n\t\t\t\t// Revert the changed values\n\t\t\t\tstyle.width = width;\n\t\t\t\tstyle.minWidth = minWidth;\n\t\t\t\tstyle.maxWidth = maxWidth;\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t};\n} else if ( document.documentElement.currentStyle ) {\n\tgetStyles = function( elem ) {\n\t\treturn elem.currentStyle;\n\t};\n\n\tcurCSS = function( elem, name, _computed ) {\n\t\tvar left, rs, rsLeft,\n\t\t\tcomputed = _computed || getStyles( elem ),\n\t\t\tret = computed ? computed[ name ] : undefined,\n\t\t\tstyle = elem.style;\n\n\t\t// Avoid setting ret to empty string here\n\t\t// so we don't default to auto\n\t\tif ( ret == null && style && style[ name ] ) {\n\t\t\tret = style[ name ];\n\t\t}\n\n\t\t// From the awesome hack by Dean Edwards\n\t\t// http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291\n\n\t\t// If we're not dealing with a regular pixel number\n\t\t// but a number that has a weird ending, we need to convert it to pixels\n\t\t// but not position css attributes, as those are proportional to the parent element instead\n\t\t// and we can't measure the parent instead because it might trigger a \"stacking dolls\" problem\n\t\tif ( rnumnonpx.test( ret ) && !rposition.test( name ) ) {\n\n\t\t\t// Remember the original values\n\t\t\tleft = style.left;\n\t\t\trs = elem.runtimeStyle;\n\t\t\trsLeft = rs && rs.left;\n\n\t\t\t// Put in the new values to get a computed value out\n\t\t\tif ( rsLeft ) {\n\t\t\t\trs.left = elem.currentStyle.left;\n\t\t\t}\n\t\t\tstyle.left = name === \"fontSize\" ? \"1em\" : ret;\n\t\t\tret = style.pixelLeft + \"px\";\n\n\t\t\t// Revert the changed values\n\t\t\tstyle.left = left;\n\t\t\tif ( rsLeft ) {\n\t\t\t\trs.left = rsLeft;\n\t\t\t}\n\t\t}\n\n\t\treturn ret === \"\" ? \"auto\" : ret;\n\t};\n}\n\nfunction setPositiveNumber( elem, value, subtract ) {\n\tvar matches = rnumsplit.exec( value );\n\treturn matches ?\n\t\t// Guard against undefined \"subtract\", e.g., when used as in cssHooks\n\t\tMath.max( 0, matches[ 1 ] - ( subtract || 0 ) ) + ( matches[ 2 ] || \"px\" ) :\n\t\tvalue;\n}\n\nfunction augmentWidthOrHeight( elem, name, extra, isBorderBox, styles ) {\n\tvar i = extra === ( isBorderBox ? \"border\" : \"content\" ) ?\n\t\t// If we already have the right measurement, avoid augmentation\n\t\t4 :\n\t\t// Otherwise initialize for horizontal or vertical properties\n\t\tname === \"width\" ? 1 : 0,\n\n\t\tval = 0;\n\n\tfor ( ; i < 4; i += 2 ) {\n\t\t// both box models exclude margin, so add it if we want it\n\t\tif ( extra === \"margin\" ) {\n\t\t\tval += jQuery.css( elem, extra + cssExpand[ i ], true, styles );\n\t\t}\n\n\t\tif ( isBorderBox ) {\n\t\t\t// border-box includes padding, so remove it if we want content\n\t\t\tif ( extra === \"content\" ) {\n\t\t\t\tval -= jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\t\t\t}\n\n\t\t\t// at this point, extra isn't border nor margin, so remove border\n\t\t\tif ( extra !== \"margin\" ) {\n\t\t\t\tval -= jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\t\t} else {\n\t\t\t// at this point, extra isn't content, so add padding\n\t\t\tval += jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\n\t\t\t// at this point, extra isn't content nor padding, so add border\n\t\t\tif ( extra !== \"padding\" ) {\n\t\t\t\tval += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn val;\n}\n\nfunction getWidthOrHeight( elem, name, extra ) {\n\n\t// Start with offset property, which is equivalent to the border-box value\n\tvar valueIsBorderBox = true,\n\t\tval = name === \"width\" ? elem.offsetWidth : elem.offsetHeight,\n\t\tstyles = getStyles( elem ),\n\t\tisBorderBox = jQuery.support.boxSizing && jQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\";\n\n\t// some non-html elements return undefined for offsetWidth, so check for null/undefined\n\t// svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285\n\t// MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668\n\tif ( val <= 0 || val == null ) {\n\t\t// Fall back to computed then uncomputed css if necessary\n\t\tval = curCSS( elem, name, styles );\n\t\tif ( val < 0 || val == null ) {\n\t\t\tval = elem.style[ name ];\n\t\t}\n\n\t\t// Computed unit is not pixels. Stop here and return.\n\t\tif ( rnumnonpx.test(val) ) {\n\t\t\treturn val;\n\t\t}\n\n\t\t// we need the check for style in case a browser which returns unreliable values\n\t\t// for getComputedStyle silently falls back to the reliable elem.style\n\t\tvalueIsBorderBox = isBorderBox && ( jQuery.support.boxSizingReliable || val === elem.style[ name ] );\n\n\t\t// Normalize \"\", auto, and prepare for extra\n\t\tval = parseFloat( val ) || 0;\n\t}\n\n\t// use the active box-sizing model to add/subtract irrelevant styles\n\treturn ( val +\n\t\taugmentWidthOrHeight(\n\t\t\telem,\n\t\t\tname,\n\t\t\textra || ( isBorderBox ? \"border\" : \"content\" ),\n\t\t\tvalueIsBorderBox,\n\t\t\tstyles\n\t\t)\n\t) + \"px\";\n}\n\n// Try to determine the default display value of an element\nfunction css_defaultDisplay( nodeName ) {\n\tvar doc = document,\n\t\tdisplay = elemdisplay[ nodeName ];\n\n\tif ( !display ) {\n\t\tdisplay = actualDisplay( nodeName, doc );\n\n\t\t// If the simple way fails, read from inside an iframe\n\t\tif ( display === \"none\" || !display ) {\n\t\t\t// Use the already-created iframe if possible\n\t\t\tiframe = ( iframe ||\n\t\t\t\tjQuery(\"<iframe frameborder='0' width='0' height='0'/>\")\n\t\t\t\t.css( \"cssText\", \"display:block !important\" )\n\t\t\t).appendTo( doc.documentElement );\n\n\t\t\t// Always write a new HTML skeleton so Webkit and Firefox don't choke on reuse\n\t\t\tdoc = ( iframe[0].contentWindow || iframe[0].contentDocument ).document;\n\t\t\tdoc.write(\"<!doctype html><html><body>\");\n\t\t\tdoc.close();\n\n\t\t\tdisplay = actualDisplay( nodeName, doc );\n\t\t\tiframe.detach();\n\t\t}\n\n\t\t// Store the correct default display\n\t\telemdisplay[ nodeName ] = display;\n\t}\n\n\treturn display;\n}\n\n// Called ONLY from within css_defaultDisplay\nfunction actualDisplay( name, doc ) {\n\tvar elem = jQuery( doc.createElement( name ) ).appendTo( doc.body ),\n\t\tdisplay = jQuery.css( elem[0], \"display\" );\n\telem.remove();\n\treturn display;\n}\n\njQuery.each([ \"height\", \"width\" ], function( i, name ) {\n\tjQuery.cssHooks[ name ] = {\n\t\tget: function( elem, computed, extra ) {\n\t\t\tif ( computed ) {\n\t\t\t\t// certain elements can have dimension info if we invisibly show them\n\t\t\t\t// however, it must have a current display style that would benefit from this\n\t\t\t\treturn elem.offsetWidth === 0 && rdisplayswap.test( jQuery.css( elem, \"display\" ) ) ?\n\t\t\t\t\tjQuery.swap( elem, cssShow, function() {\n\t\t\t\t\t\treturn getWidthOrHeight( elem, name, extra );\n\t\t\t\t\t}) :\n\t\t\t\t\tgetWidthOrHeight( elem, name, extra );\n\t\t\t}\n\t\t},\n\n\t\tset: function( elem, value, extra ) {\n\t\t\tvar styles = extra && getStyles( elem );\n\t\t\treturn setPositiveNumber( elem, value, extra ?\n\t\t\t\taugmentWidthOrHeight(\n\t\t\t\t\telem,\n\t\t\t\t\tname,\n\t\t\t\t\textra,\n\t\t\t\t\tjQuery.support.boxSizing && jQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n\t\t\t\t\tstyles\n\t\t\t\t) : 0\n\t\t\t);\n\t\t}\n\t};\n});\n\nif ( !jQuery.support.opacity ) {\n\tjQuery.cssHooks.opacity = {\n\t\tget: function( elem, computed ) {\n\t\t\t// IE uses filters for opacity\n\t\t\treturn ropacity.test( (computed && elem.currentStyle ? elem.currentStyle.filter : elem.style.filter) || \"\" ) ?\n\t\t\t\t( 0.01 * parseFloat( RegExp.$1 ) ) + \"\" :\n\t\t\t\tcomputed ? \"1\" : \"\";\n\t\t},\n\n\t\tset: function( elem, value ) {\n\t\t\tvar style = elem.style,\n\t\t\t\tcurrentStyle = elem.currentStyle,\n\t\t\t\topacity = jQuery.isNumeric( value ) ? \"alpha(opacity=\" + value * 100 + \")\" : \"\",\n\t\t\t\tfilter = currentStyle && currentStyle.filter || style.filter || \"\";\n\n\t\t\t// IE has trouble with opacity if it does not have layout\n\t\t\t// Force it by setting the zoom level\n\t\t\tstyle.zoom = 1;\n\n\t\t\t// if setting opacity to 1, and no other filters exist - attempt to remove filter attribute #6652\n\t\t\t// if value === \"\", then remove inline opacity #12685\n\t\t\tif ( ( value >= 1 || value === \"\" ) &&\n\t\t\t\t\tjQuery.trim( filter.replace( ralpha, \"\" ) ) === \"\" &&\n\t\t\t\t\tstyle.removeAttribute ) {\n\n\t\t\t\t// Setting style.filter to null, \"\" & \" \" still leave \"filter:\" in the cssText\n\t\t\t\t// if \"filter:\" is present at all, clearType is disabled, we want to avoid this\n\t\t\t\t// style.removeAttribute is IE Only, but so apparently is this code path...\n\t\t\t\tstyle.removeAttribute( \"filter\" );\n\n\t\t\t\t// if there is no filter style applied in a css rule or unset inline opacity, we are done\n\t\t\t\tif ( value === \"\" || currentStyle && !currentStyle.filter ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// otherwise, set new filter values\n\t\t\tstyle.filter = ralpha.test( filter ) ?\n\t\t\t\tfilter.replace( ralpha, opacity ) :\n\t\t\t\tfilter + \" \" + opacity;\n\t\t}\n\t};\n}\n\n// These hooks cannot be added until DOM ready because the support test\n// for it is not run until after DOM ready\njQuery(function() {\n\tif ( !jQuery.support.reliableMarginRight ) {\n\t\tjQuery.cssHooks.marginRight = {\n\t\t\tget: function( elem, computed ) {\n\t\t\t\tif ( computed ) {\n\t\t\t\t\t// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right\n\t\t\t\t\t// Work around by temporarily setting element display to inline-block\n\t\t\t\t\treturn jQuery.swap( elem, { \"display\": \"inline-block\" },\n\t\t\t\t\t\tcurCSS, [ elem, \"marginRight\" ] );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\t// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084\n\t// getComputedStyle returns percent when specified for top/left/bottom/right\n\t// rather than make the css module depend on the offset module, we just check for it here\n\tif ( !jQuery.support.pixelPosition && jQuery.fn.position ) {\n\t\tjQuery.each( [ \"top\", \"left\" ], function( i, prop ) {\n\t\t\tjQuery.cssHooks[ prop ] = {\n\t\t\t\tget: function( elem, computed ) {\n\t\t\t\t\tif ( computed ) {\n\t\t\t\t\t\tcomputed = curCSS( elem, prop );\n\t\t\t\t\t\t// if curCSS returns percentage, fallback to offset\n\t\t\t\t\t\treturn rnumnonpx.test( computed ) ?\n\t\t\t\t\t\t\tjQuery( elem ).position()[ prop ] + \"px\" :\n\t\t\t\t\t\t\tcomputed;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\t}\n\n});\n\nif ( jQuery.expr && jQuery.expr.filters ) {\n\tjQuery.expr.filters.hidden = function( elem ) {\n\t\t// Support: Opera <= 12.12\n\t\t// Opera reports offsetWidths and offsetHeights less than zero on some elements\n\t\treturn elem.offsetWidth <= 0 && elem.offsetHeight <= 0 ||\n\t\t\t(!jQuery.support.reliableHiddenOffsets && ((elem.style && elem.style.display) || jQuery.css( elem, \"display\" )) === \"none\");\n\t};\n\n\tjQuery.expr.filters.visible = function( elem ) {\n\t\treturn !jQuery.expr.filters.hidden( elem );\n\t};\n}\n\n// These hooks are used by animate to expand properties\njQuery.each({\n\tmargin: \"\",\n\tpadding: \"\",\n\tborder: \"Width\"\n}, function( prefix, suffix ) {\n\tjQuery.cssHooks[ prefix + suffix ] = {\n\t\texpand: function( value ) {\n\t\t\tvar i = 0,\n\t\t\t\texpanded = {},\n\n\t\t\t\t// assumes a single number if not a string\n\t\t\t\tparts = typeof value === \"string\" ? value.split(\" \") : [ value ];\n\n\t\t\tfor ( ; i < 4; i++ ) {\n\t\t\t\texpanded[ prefix + cssExpand[ i ] + suffix ] =\n\t\t\t\t\tparts[ i ] || parts[ i - 2 ] || parts[ 0 ];\n\t\t\t}\n\n\t\t\treturn expanded;\n\t\t}\n\t};\n\n\tif ( !rmargin.test( prefix ) ) {\n\t\tjQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;\n\t}\n});\nvar r20 = /%20/g,\n\trbracket = /\\[\\]$/,\n\trCRLF = /\\r?\\n/g,\n\trsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,\n\trsubmittable = /^(?:input|select|textarea|keygen)/i;\n\njQuery.fn.extend({\n\tserialize: function() {\n\t\treturn jQuery.param( this.serializeArray() );\n\t},\n\tserializeArray: function() {\n\t\treturn this.map(function(){\n\t\t\t// Can add propHook for \"elements\" to filter or add form elements\n\t\t\tvar elements = jQuery.prop( this, \"elements\" );\n\t\t\treturn elements ? jQuery.makeArray( elements ) : this;\n\t\t})\n\t\t.filter(function(){\n\t\t\tvar type = this.type;\n\t\t\t// Use .is(\":disabled\") so that fieldset[disabled] works\n\t\t\treturn this.name && !jQuery( this ).is( \":disabled\" ) &&\n\t\t\t\trsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&\n\t\t\t\t( this.checked || !manipulation_rcheckableType.test( type ) );\n\t\t})\n\t\t.map(function( i, elem ){\n\t\t\tvar val = jQuery( this ).val();\n\n\t\t\treturn val == null ?\n\t\t\t\tnull :\n\t\t\t\tjQuery.isArray( val ) ?\n\t\t\t\t\tjQuery.map( val, function( val ){\n\t\t\t\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t\t\t\t}) :\n\t\t\t\t\t{ name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t}).get();\n\t}\n});\n\n//Serialize an array of form elements or a set of\n//key/values into a query string\njQuery.param = function( a, traditional ) {\n\tvar prefix,\n\t\ts = [],\n\t\tadd = function( key, value ) {\n\t\t\t// If value is a function, invoke it and return its value\n\t\t\tvalue = jQuery.isFunction( value ) ? value() : ( value == null ? \"\" : value );\n\t\t\ts[ s.length ] = encodeURIComponent( key ) + \"=\" + encodeURIComponent( value );\n\t\t};\n\n\t// Set traditional to true for jQuery <= 1.3.2 behavior.\n\tif ( traditional === undefined ) {\n\t\ttraditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;\n\t}\n\n\t// If an array was passed in, assume that it is an array of form elements.\n\tif ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {\n\t\t// Serialize the form elements\n\t\tjQuery.each( a, function() {\n\t\t\tadd( this.name, this.value );\n\t\t});\n\n\t} else {\n\t\t// If traditional, encode the \"old\" way (the way 1.3.2 or older\n\t\t// did it), otherwise encode params recursively.\n\t\tfor ( prefix in a ) {\n\t\t\tbuildParams( prefix, a[ prefix ], traditional, add );\n\t\t}\n\t}\n\n\t// Return the resulting serialization\n\treturn s.join( \"&\" ).replace( r20, \"+\" );\n};\n\nfunction buildParams( prefix, obj, traditional, add ) {\n\tvar name;\n\n\tif ( jQuery.isArray( obj ) ) {\n\t\t// Serialize array item.\n\t\tjQuery.each( obj, function( i, v ) {\n\t\t\tif ( traditional || rbracket.test( prefix ) ) {\n\t\t\t\t// Treat each array item as a scalar.\n\t\t\t\tadd( prefix, v );\n\n\t\t\t} else {\n\t\t\t\t// Item is non-scalar (array or object), encode its numeric index.\n\t\t\t\tbuildParams( prefix + \"[\" + ( typeof v === \"object\" ? i : \"\" ) + \"]\", v, traditional, add );\n\t\t\t}\n\t\t});\n\n\t} else if ( !traditional && jQuery.type( obj ) === \"object\" ) {\n\t\t// Serialize object item.\n\t\tfor ( name in obj ) {\n\t\t\tbuildParams( prefix + \"[\" + name + \"]\", obj[ name ], traditional, add );\n\t\t}\n\n\t} else {\n\t\t// Serialize scalar item.\n\t\tadd( prefix, obj );\n\t}\n}\njQuery.each( (\"blur focus focusin focusout load resize scroll unload click dblclick \" +\n\t\"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \" +\n\t\"change select submit keydown keypress keyup error contextmenu\").split(\" \"), function( i, name ) {\n\n\t// Handle event binding\n\tjQuery.fn[ name ] = function( data, fn ) {\n\t\treturn arguments.length > 0 ?\n\t\t\tthis.on( name, null, data, fn ) :\n\t\t\tthis.trigger( name );\n\t};\n});\n\njQuery.fn.hover = function( fnOver, fnOut ) {\n\treturn this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );\n};\nvar\n\t// Document location\n\tajaxLocParts,\n\tajaxLocation,\n\tajax_nonce = jQuery.now(),\n\n\tajax_rquery = /\\?/,\n\trhash = /#.*$/,\n\trts = /([?&])_=[^&]*/,\n\trheaders = /^(.*?):[ \\t]*([^\\r\\n]*)\\r?$/mg, // IE leaves an \\r character at EOL\n\t// #7653, #8125, #8152: local protocol detection\n\trlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,\n\trnoContent = /^(?:GET|HEAD)$/,\n\trprotocol = /^\\/\\//,\n\trurl = /^([\\w.+-]+:)(?:\\/\\/([^\\/?#:]*)(?::(\\d+)|)|)/,\n\n\t// Keep a copy of the old load method\n\t_load = jQuery.fn.load,\n\n\t/* Prefilters\n\t * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)\n\t * 2) These are called:\n\t *    - BEFORE asking for a transport\n\t *    - AFTER param serialization (s.data is a string if s.processData is true)\n\t * 3) key is the dataType\n\t * 4) the catchall symbol \"*\" can be used\n\t * 5) execution will start with transport dataType and THEN continue down to \"*\" if needed\n\t */\n\tprefilters = {},\n\n\t/* Transports bindings\n\t * 1) key is the dataType\n\t * 2) the catchall symbol \"*\" can be used\n\t * 3) selection will start with transport dataType and THEN go to \"*\" if needed\n\t */\n\ttransports = {},\n\n\t// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression\n\tallTypes = \"*/\".concat(\"*\");\n\n// #8138, IE may throw an exception when accessing\n// a field from window.location if document.domain has been set\ntry {\n\tajaxLocation = location.href;\n} catch( e ) {\n\t// Use the href attribute of an A element\n\t// since IE will modify it given document.location\n\tajaxLocation = document.createElement( \"a\" );\n\tajaxLocation.href = \"\";\n\tajaxLocation = ajaxLocation.href;\n}\n\n// Segment location into parts\najaxLocParts = rurl.exec( ajaxLocation.toLowerCase() ) || [];\n\n// Base \"constructor\" for jQuery.ajaxPrefilter and jQuery.ajaxTransport\nfunction addToPrefiltersOrTransports( structure ) {\n\n\t// dataTypeExpression is optional and defaults to \"*\"\n\treturn function( dataTypeExpression, func ) {\n\n\t\tif ( typeof dataTypeExpression !== \"string\" ) {\n\t\t\tfunc = dataTypeExpression;\n\t\t\tdataTypeExpression = \"*\";\n\t\t}\n\n\t\tvar dataType,\n\t\t\ti = 0,\n\t\t\tdataTypes = dataTypeExpression.toLowerCase().match( core_rnotwhite ) || [];\n\n\t\tif ( jQuery.isFunction( func ) ) {\n\t\t\t// For each dataType in the dataTypeExpression\n\t\t\twhile ( (dataType = dataTypes[i++]) ) {\n\t\t\t\t// Prepend if requested\n\t\t\t\tif ( dataType[0] === \"+\" ) {\n\t\t\t\t\tdataType = dataType.slice( 1 ) || \"*\";\n\t\t\t\t\t(structure[ dataType ] = structure[ dataType ] || []).unshift( func );\n\n\t\t\t\t// Otherwise append\n\t\t\t\t} else {\n\t\t\t\t\t(structure[ dataType ] = structure[ dataType ] || []).push( func );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\n// Base inspection function for prefilters and transports\nfunction inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {\n\n\tvar inspected = {},\n\t\tseekingTransport = ( structure === transports );\n\n\tfunction inspect( dataType ) {\n\t\tvar selected;\n\t\tinspected[ dataType ] = true;\n\t\tjQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {\n\t\t\tvar dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );\n\t\t\tif( typeof dataTypeOrTransport === \"string\" && !seekingTransport && !inspected[ dataTypeOrTransport ] ) {\n\t\t\t\toptions.dataTypes.unshift( dataTypeOrTransport );\n\t\t\t\tinspect( dataTypeOrTransport );\n\t\t\t\treturn false;\n\t\t\t} else if ( seekingTransport ) {\n\t\t\t\treturn !( selected = dataTypeOrTransport );\n\t\t\t}\n\t\t});\n\t\treturn selected;\n\t}\n\n\treturn inspect( options.dataTypes[ 0 ] ) || !inspected[ \"*\" ] && inspect( \"*\" );\n}\n\n// A special extend for ajax options\n// that takes \"flat\" options (not to be deep extended)\n// Fixes #9887\nfunction ajaxExtend( target, src ) {\n\tvar deep, key,\n\t\tflatOptions = jQuery.ajaxSettings.flatOptions || {};\n\n\tfor ( key in src ) {\n\t\tif ( src[ key ] !== undefined ) {\n\t\t\t( flatOptions[ key ] ? target : ( deep || (deep = {}) ) )[ key ] = src[ key ];\n\t\t}\n\t}\n\tif ( deep ) {\n\t\tjQuery.extend( true, target, deep );\n\t}\n\n\treturn target;\n}\n\njQuery.fn.load = function( url, params, callback ) {\n\tif ( typeof url !== \"string\" && _load ) {\n\t\treturn _load.apply( this, arguments );\n\t}\n\n\tvar selector, response, type,\n\t\tself = this,\n\t\toff = url.indexOf(\" \");\n\n\tif ( off >= 0 ) {\n\t\tselector = url.slice( off, url.length );\n\t\turl = url.slice( 0, off );\n\t}\n\n\t// If it's a function\n\tif ( jQuery.isFunction( params ) ) {\n\n\t\t// We assume that it's the callback\n\t\tcallback = params;\n\t\tparams = undefined;\n\n\t// Otherwise, build a param string\n\t} else if ( params && typeof params === \"object\" ) {\n\t\ttype = \"POST\";\n\t}\n\n\t// If we have elements to modify, make the request\n\tif ( self.length > 0 ) {\n\t\tjQuery.ajax({\n\t\t\turl: url,\n\n\t\t\t// if \"type\" variable is undefined, then \"GET\" method will be used\n\t\t\ttype: type,\n\t\t\tdataType: \"html\",\n\t\t\tdata: params\n\t\t}).done(function( responseText ) {\n\n\t\t\t// Save response for use in complete callback\n\t\t\tresponse = arguments;\n\n\t\t\tself.html( selector ?\n\n\t\t\t\t// If a selector was specified, locate the right elements in a dummy div\n\t\t\t\t// Exclude scripts to avoid IE 'Permission Denied' errors\n\t\t\t\tjQuery(\"<div>\").append( jQuery.parseHTML( responseText ) ).find( selector ) :\n\n\t\t\t\t// Otherwise use the full result\n\t\t\t\tresponseText );\n\n\t\t}).complete( callback && function( jqXHR, status ) {\n\t\t\tself.each( callback, response || [ jqXHR.responseText, status, jqXHR ] );\n\t\t});\n\t}\n\n\treturn this;\n};\n\n// Attach a bunch of functions for handling common AJAX events\njQuery.each( [ \"ajaxStart\", \"ajaxStop\", \"ajaxComplete\", \"ajaxError\", \"ajaxSuccess\", \"ajaxSend\" ], function( i, type ){\n\tjQuery.fn[ type ] = function( fn ){\n\t\treturn this.on( type, fn );\n\t};\n});\n\njQuery.each( [ \"get\", \"post\" ], function( i, method ) {\n\tjQuery[ method ] = function( url, data, callback, type ) {\n\t\t// shift arguments if data argument was omitted\n\t\tif ( jQuery.isFunction( data ) ) {\n\t\t\ttype = type || callback;\n\t\t\tcallback = data;\n\t\t\tdata = undefined;\n\t\t}\n\n\t\treturn jQuery.ajax({\n\t\t\turl: url,\n\t\t\ttype: method,\n\t\t\tdataType: type,\n\t\t\tdata: data,\n\t\t\tsuccess: callback\n\t\t});\n\t};\n});\n\njQuery.extend({\n\n\t// Counter for holding the number of active queries\n\tactive: 0,\n\n\t// Last-Modified header cache for next request\n\tlastModified: {},\n\tetag: {},\n\n\tajaxSettings: {\n\t\turl: ajaxLocation,\n\t\ttype: \"GET\",\n\t\tisLocal: rlocalProtocol.test( ajaxLocParts[ 1 ] ),\n\t\tglobal: true,\n\t\tprocessData: true,\n\t\tasync: true,\n\t\tcontentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\n\t\t/*\n\t\ttimeout: 0,\n\t\tdata: null,\n\t\tdataType: null,\n\t\tusername: null,\n\t\tpassword: null,\n\t\tcache: null,\n\t\tthrows: false,\n\t\ttraditional: false,\n\t\theaders: {},\n\t\t*/\n\n\t\taccepts: {\n\t\t\t\"*\": allTypes,\n\t\t\ttext: \"text/plain\",\n\t\t\thtml: \"text/html\",\n\t\t\txml: \"application/xml, text/xml\",\n\t\t\tjson: \"application/json, text/javascript\"\n\t\t},\n\n\t\tcontents: {\n\t\t\txml: /xml/,\n\t\t\thtml: /html/,\n\t\t\tjson: /json/\n\t\t},\n\n\t\tresponseFields: {\n\t\t\txml: \"responseXML\",\n\t\t\ttext: \"responseText\"\n\t\t},\n\n\t\t// Data converters\n\t\t// Keys separate source (or catchall \"*\") and destination types with a single space\n\t\tconverters: {\n\n\t\t\t// Convert anything to text\n\t\t\t\"* text\": window.String,\n\n\t\t\t// Text to html (true = no transformation)\n\t\t\t\"text html\": true,\n\n\t\t\t// Evaluate text as a json expression\n\t\t\t\"text json\": jQuery.parseJSON,\n\n\t\t\t// Parse text as xml\n\t\t\t\"text xml\": jQuery.parseXML\n\t\t},\n\n\t\t// For options that shouldn't be deep extended:\n\t\t// you can add your own custom options here if\n\t\t// and when you create one that shouldn't be\n\t\t// deep extended (see ajaxExtend)\n\t\tflatOptions: {\n\t\t\turl: true,\n\t\t\tcontext: true\n\t\t}\n\t},\n\n\t// Creates a full fledged settings object into target\n\t// with both ajaxSettings and settings fields.\n\t// If target is omitted, writes into ajaxSettings.\n\tajaxSetup: function( target, settings ) {\n\t\treturn settings ?\n\n\t\t\t// Building a settings object\n\t\t\tajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :\n\n\t\t\t// Extending ajaxSettings\n\t\t\tajaxExtend( jQuery.ajaxSettings, target );\n\t},\n\n\tajaxPrefilter: addToPrefiltersOrTransports( prefilters ),\n\tajaxTransport: addToPrefiltersOrTransports( transports ),\n\n\t// Main method\n\tajax: function( url, options ) {\n\n\t\t// If url is an object, simulate pre-1.5 signature\n\t\tif ( typeof url === \"object\" ) {\n\t\t\toptions = url;\n\t\t\turl = undefined;\n\t\t}\n\n\t\t// Force options to be an object\n\t\toptions = options || {};\n\n\t\tvar // Cross-domain detection vars\n\t\t\tparts,\n\t\t\t// Loop variable\n\t\t\ti,\n\t\t\t// URL without anti-cache param\n\t\t\tcacheURL,\n\t\t\t// Response headers as string\n\t\t\tresponseHeadersString,\n\t\t\t// timeout handle\n\t\t\ttimeoutTimer,\n\n\t\t\t// To know if global events are to be dispatched\n\t\t\tfireGlobals,\n\n\t\t\ttransport,\n\t\t\t// Response headers\n\t\t\tresponseHeaders,\n\t\t\t// Create the final options object\n\t\t\ts = jQuery.ajaxSetup( {}, options ),\n\t\t\t// Callbacks context\n\t\t\tcallbackContext = s.context || s,\n\t\t\t// Context for global events is callbackContext if it is a DOM node or jQuery collection\n\t\t\tglobalEventContext = s.context && ( callbackContext.nodeType || callbackContext.jquery ) ?\n\t\t\t\tjQuery( callbackContext ) :\n\t\t\t\tjQuery.event,\n\t\t\t// Deferreds\n\t\t\tdeferred = jQuery.Deferred(),\n\t\t\tcompleteDeferred = jQuery.Callbacks(\"once memory\"),\n\t\t\t// Status-dependent callbacks\n\t\t\tstatusCode = s.statusCode || {},\n\t\t\t// Headers (they are sent all at once)\n\t\t\trequestHeaders = {},\n\t\t\trequestHeadersNames = {},\n\t\t\t// The jqXHR state\n\t\t\tstate = 0,\n\t\t\t// Default abort message\n\t\t\tstrAbort = \"canceled\",\n\t\t\t// Fake xhr\n\t\t\tjqXHR = {\n\t\t\t\treadyState: 0,\n\n\t\t\t\t// Builds headers hashtable if needed\n\t\t\t\tgetResponseHeader: function( key ) {\n\t\t\t\t\tvar match;\n\t\t\t\t\tif ( state === 2 ) {\n\t\t\t\t\t\tif ( !responseHeaders ) {\n\t\t\t\t\t\t\tresponseHeaders = {};\n\t\t\t\t\t\t\twhile ( (match = rheaders.exec( responseHeadersString )) ) {\n\t\t\t\t\t\t\t\tresponseHeaders[ match[1].toLowerCase() ] = match[ 2 ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmatch = responseHeaders[ key.toLowerCase() ];\n\t\t\t\t\t}\n\t\t\t\t\treturn match == null ? null : match;\n\t\t\t\t},\n\n\t\t\t\t// Raw string\n\t\t\t\tgetAllResponseHeaders: function() {\n\t\t\t\t\treturn state === 2 ? responseHeadersString : null;\n\t\t\t\t},\n\n\t\t\t\t// Caches the header\n\t\t\t\tsetRequestHeader: function( name, value ) {\n\t\t\t\t\tvar lname = name.toLowerCase();\n\t\t\t\t\tif ( !state ) {\n\t\t\t\t\t\tname = requestHeadersNames[ lname ] = requestHeadersNames[ lname ] || name;\n\t\t\t\t\t\trequestHeaders[ name ] = value;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Overrides response content-type header\n\t\t\t\toverrideMimeType: function( type ) {\n\t\t\t\t\tif ( !state ) {\n\t\t\t\t\t\ts.mimeType = type;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Status-dependent callbacks\n\t\t\t\tstatusCode: function( map ) {\n\t\t\t\t\tvar code;\n\t\t\t\t\tif ( map ) {\n\t\t\t\t\t\tif ( state < 2 ) {\n\t\t\t\t\t\t\tfor ( code in map ) {\n\t\t\t\t\t\t\t\t// Lazy-add the new callback in a way that preserves old ones\n\t\t\t\t\t\t\t\tstatusCode[ code ] = [ statusCode[ code ], map[ code ] ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Execute the appropriate callbacks\n\t\t\t\t\t\t\tjqXHR.always( map[ jqXHR.status ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Cancel the request\n\t\t\t\tabort: function( statusText ) {\n\t\t\t\t\tvar finalText = statusText || strAbort;\n\t\t\t\t\tif ( transport ) {\n\t\t\t\t\t\ttransport.abort( finalText );\n\t\t\t\t\t}\n\t\t\t\t\tdone( 0, finalText );\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t};\n\n\t\t// Attach deferreds\n\t\tdeferred.promise( jqXHR ).complete = completeDeferred.add;\n\t\tjqXHR.success = jqXHR.done;\n\t\tjqXHR.error = jqXHR.fail;\n\n\t\t// Remove hash character (#7531: and string promotion)\n\t\t// Add protocol if not provided (#5866: IE7 issue with protocol-less urls)\n\t\t// Handle falsy url in the settings object (#10093: consistency with old signature)\n\t\t// We also use the url parameter if available\n\t\ts.url = ( ( url || s.url || ajaxLocation ) + \"\" ).replace( rhash, \"\" ).replace( rprotocol, ajaxLocParts[ 1 ] + \"//\" );\n\n\t\t// Alias method option to type as per ticket #12004\n\t\ts.type = options.method || options.type || s.method || s.type;\n\n\t\t// Extract dataTypes list\n\t\ts.dataTypes = jQuery.trim( s.dataType || \"*\" ).toLowerCase().match( core_rnotwhite ) || [\"\"];\n\n\t\t// A cross-domain request is in order when we have a protocol:host:port mismatch\n\t\tif ( s.crossDomain == null ) {\n\t\t\tparts = rurl.exec( s.url.toLowerCase() );\n\t\t\ts.crossDomain = !!( parts &&\n\t\t\t\t( parts[ 1 ] !== ajaxLocParts[ 1 ] || parts[ 2 ] !== ajaxLocParts[ 2 ] ||\n\t\t\t\t\t( parts[ 3 ] || ( parts[ 1 ] === \"http:\" ? 80 : 443 ) ) !=\n\t\t\t\t\t\t( ajaxLocParts[ 3 ] || ( ajaxLocParts[ 1 ] === \"http:\" ? 80 : 443 ) ) )\n\t\t\t);\n\t\t}\n\n\t\t// Convert data if not already a string\n\t\tif ( s.data && s.processData && typeof s.data !== \"string\" ) {\n\t\t\ts.data = jQuery.param( s.data, s.traditional );\n\t\t}\n\n\t\t// Apply prefilters\n\t\tinspectPrefiltersOrTransports( prefilters, s, options, jqXHR );\n\n\t\t// If request was aborted inside a prefilter, stop there\n\t\tif ( state === 2 ) {\n\t\t\treturn jqXHR;\n\t\t}\n\n\t\t// We can fire global events as of now if asked to\n\t\tfireGlobals = s.global;\n\n\t\t// Watch for a new set of requests\n\t\tif ( fireGlobals && jQuery.active++ === 0 ) {\n\t\t\tjQuery.event.trigger(\"ajaxStart\");\n\t\t}\n\n\t\t// Uppercase the type\n\t\ts.type = s.type.toUpperCase();\n\n\t\t// Determine if request has content\n\t\ts.hasContent = !rnoContent.test( s.type );\n\n\t\t// Save the URL in case we're toying with the If-Modified-Since\n\t\t// and/or If-None-Match header later on\n\t\tcacheURL = s.url;\n\n\t\t// More options handling for requests with no content\n\t\tif ( !s.hasContent ) {\n\n\t\t\t// If data is available, append data to url\n\t\t\tif ( s.data ) {\n\t\t\t\tcacheURL = ( s.url += ( ajax_rquery.test( cacheURL ) ? \"&\" : \"?\" ) + s.data );\n\t\t\t\t// #9682: remove data so that it's not used in an eventual retry\n\t\t\t\tdelete s.data;\n\t\t\t}\n\n\t\t\t// Add anti-cache in url if needed\n\t\t\tif ( s.cache === false ) {\n\t\t\t\ts.url = rts.test( cacheURL ) ?\n\n\t\t\t\t\t// If there is already a '_' parameter, set its value\n\t\t\t\t\tcacheURL.replace( rts, \"$1_=\" + ajax_nonce++ ) :\n\n\t\t\t\t\t// Otherwise add one to the end\n\t\t\t\t\tcacheURL + ( ajax_rquery.test( cacheURL ) ? \"&\" : \"?\" ) + \"_=\" + ajax_nonce++;\n\t\t\t}\n\t\t}\n\n\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\tif ( s.ifModified ) {\n\t\t\tif ( jQuery.lastModified[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-Modified-Since\", jQuery.lastModified[ cacheURL ] );\n\t\t\t}\n\t\t\tif ( jQuery.etag[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-None-Match\", jQuery.etag[ cacheURL ] );\n\t\t\t}\n\t\t}\n\n\t\t// Set the correct header, if data is being sent\n\t\tif ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {\n\t\t\tjqXHR.setRequestHeader( \"Content-Type\", s.contentType );\n\t\t}\n\n\t\t// Set the Accepts header for the server, depending on the dataType\n\t\tjqXHR.setRequestHeader(\n\t\t\t\"Accept\",\n\t\t\ts.dataTypes[ 0 ] && s.accepts[ s.dataTypes[0] ] ?\n\t\t\t\ts.accepts[ s.dataTypes[0] ] + ( s.dataTypes[ 0 ] !== \"*\" ? \", \" + allTypes + \"; q=0.01\" : \"\" ) :\n\t\t\t\ts.accepts[ \"*\" ]\n\t\t);\n\n\t\t// Check for headers option\n\t\tfor ( i in s.headers ) {\n\t\t\tjqXHR.setRequestHeader( i, s.headers[ i ] );\n\t\t}\n\n\t\t// Allow custom headers/mimetypes and early abort\n\t\tif ( s.beforeSend && ( s.beforeSend.call( callbackContext, jqXHR, s ) === false || state === 2 ) ) {\n\t\t\t// Abort if not done already and return\n\t\t\treturn jqXHR.abort();\n\t\t}\n\n\t\t// aborting is no longer a cancellation\n\t\tstrAbort = \"abort\";\n\n\t\t// Install callbacks on deferreds\n\t\tfor ( i in { success: 1, error: 1, complete: 1 } ) {\n\t\t\tjqXHR[ i ]( s[ i ] );\n\t\t}\n\n\t\t// Get transport\n\t\ttransport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );\n\n\t\t// If no transport, we auto-abort\n\t\tif ( !transport ) {\n\t\t\tdone( -1, \"No Transport\" );\n\t\t} else {\n\t\t\tjqXHR.readyState = 1;\n\n\t\t\t// Send global event\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxSend\", [ jqXHR, s ] );\n\t\t\t}\n\t\t\t// Timeout\n\t\t\tif ( s.async && s.timeout > 0 ) {\n\t\t\t\ttimeoutTimer = setTimeout(function() {\n\t\t\t\t\tjqXHR.abort(\"timeout\");\n\t\t\t\t}, s.timeout );\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tstate = 1;\n\t\t\t\ttransport.send( requestHeaders, done );\n\t\t\t} catch ( e ) {\n\t\t\t\t// Propagate exception as error if not done\n\t\t\t\tif ( state < 2 ) {\n\t\t\t\t\tdone( -1, e );\n\t\t\t\t// Simply rethrow otherwise\n\t\t\t\t} else {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Callback for when everything is done\n\t\tfunction done( status, nativeStatusText, responses, headers ) {\n\t\t\tvar isSuccess, success, error, response, modified,\n\t\t\t\tstatusText = nativeStatusText;\n\n\t\t\t// Called once\n\t\t\tif ( state === 2 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// State is \"done\" now\n\t\t\tstate = 2;\n\n\t\t\t// Clear timeout if it exists\n\t\t\tif ( timeoutTimer ) {\n\t\t\t\tclearTimeout( timeoutTimer );\n\t\t\t}\n\n\t\t\t// Dereference transport for early garbage collection\n\t\t\t// (no matter how long the jqXHR object will be used)\n\t\t\ttransport = undefined;\n\n\t\t\t// Cache response headers\n\t\t\tresponseHeadersString = headers || \"\";\n\n\t\t\t// Set readyState\n\t\t\tjqXHR.readyState = status > 0 ? 4 : 0;\n\n\t\t\t// Get response data\n\t\t\tif ( responses ) {\n\t\t\t\tresponse = ajaxHandleResponses( s, jqXHR, responses );\n\t\t\t}\n\n\t\t\t// If successful, handle type chaining\n\t\t\tif ( status >= 200 && status < 300 || status === 304 ) {\n\n\t\t\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\t\t\tif ( s.ifModified ) {\n\t\t\t\t\tmodified = jqXHR.getResponseHeader(\"Last-Modified\");\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.lastModified[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t\tmodified = jqXHR.getResponseHeader(\"etag\");\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.etag[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// if no content\n\t\t\t\tif ( status === 204 ) {\n\t\t\t\t\tisSuccess = true;\n\t\t\t\t\tstatusText = \"nocontent\";\n\n\t\t\t\t// if not modified\n\t\t\t\t} else if ( status === 304 ) {\n\t\t\t\t\tisSuccess = true;\n\t\t\t\t\tstatusText = \"notmodified\";\n\n\t\t\t\t// If we have data, let's convert it\n\t\t\t\t} else {\n\t\t\t\t\tisSuccess = ajaxConvert( s, response );\n\t\t\t\t\tstatusText = isSuccess.state;\n\t\t\t\t\tsuccess = isSuccess.data;\n\t\t\t\t\terror = isSuccess.error;\n\t\t\t\t\tisSuccess = !error;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// We extract error from statusText\n\t\t\t\t// then normalize statusText and status for non-aborts\n\t\t\t\terror = statusText;\n\t\t\t\tif ( status || !statusText ) {\n\t\t\t\t\tstatusText = \"error\";\n\t\t\t\t\tif ( status < 0 ) {\n\t\t\t\t\t\tstatus = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Set data for the fake xhr object\n\t\t\tjqXHR.status = status;\n\t\t\tjqXHR.statusText = ( nativeStatusText || statusText ) + \"\";\n\n\t\t\t// Success/Error\n\t\t\tif ( isSuccess ) {\n\t\t\t\tdeferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );\n\t\t\t} else {\n\t\t\t\tdeferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );\n\t\t\t}\n\n\t\t\t// Status-dependent callbacks\n\t\t\tjqXHR.statusCode( statusCode );\n\t\t\tstatusCode = undefined;\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( isSuccess ? \"ajaxSuccess\" : \"ajaxError\",\n\t\t\t\t\t[ jqXHR, s, isSuccess ? success : error ] );\n\t\t\t}\n\n\t\t\t// Complete\n\t\t\tcompleteDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxComplete\", [ jqXHR, s ] );\n\t\t\t\t// Handle the global AJAX counter\n\t\t\t\tif ( !( --jQuery.active ) ) {\n\t\t\t\t\tjQuery.event.trigger(\"ajaxStop\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn jqXHR;\n\t},\n\n\tgetScript: function( url, callback ) {\n\t\treturn jQuery.get( url, undefined, callback, \"script\" );\n\t},\n\n\tgetJSON: function( url, data, callback ) {\n\t\treturn jQuery.get( url, data, callback, \"json\" );\n\t}\n});\n\n/* Handles responses to an ajax request:\n * - sets all responseXXX fields accordingly\n * - finds the right dataType (mediates between content-type and expected dataType)\n * - returns the corresponding response\n */\nfunction ajaxHandleResponses( s, jqXHR, responses ) {\n\tvar firstDataType, ct, finalDataType, type,\n\t\tcontents = s.contents,\n\t\tdataTypes = s.dataTypes,\n\t\tresponseFields = s.responseFields;\n\n\t// Fill responseXXX fields\n\tfor ( type in responseFields ) {\n\t\tif ( type in responses ) {\n\t\t\tjqXHR[ responseFields[type] ] = responses[ type ];\n\t\t}\n\t}\n\n\t// Remove auto dataType and get content-type in the process\n\twhile( dataTypes[ 0 ] === \"*\" ) {\n\t\tdataTypes.shift();\n\t\tif ( ct === undefined ) {\n\t\t\tct = s.mimeType || jqXHR.getResponseHeader(\"Content-Type\");\n\t\t}\n\t}\n\n\t// Check if we're dealing with a known content-type\n\tif ( ct ) {\n\t\tfor ( type in contents ) {\n\t\t\tif ( contents[ type ] && contents[ type ].test( ct ) ) {\n\t\t\t\tdataTypes.unshift( type );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Check to see if we have a response for the expected dataType\n\tif ( dataTypes[ 0 ] in responses ) {\n\t\tfinalDataType = dataTypes[ 0 ];\n\t} else {\n\t\t// Try convertible dataTypes\n\t\tfor ( type in responses ) {\n\t\t\tif ( !dataTypes[ 0 ] || s.converters[ type + \" \" + dataTypes[0] ] ) {\n\t\t\t\tfinalDataType = type;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( !firstDataType ) {\n\t\t\t\tfirstDataType = type;\n\t\t\t}\n\t\t}\n\t\t// Or just use first one\n\t\tfinalDataType = finalDataType || firstDataType;\n\t}\n\n\t// If we found a dataType\n\t// We add the dataType to the list if needed\n\t// and return the corresponding response\n\tif ( finalDataType ) {\n\t\tif ( finalDataType !== dataTypes[ 0 ] ) {\n\t\t\tdataTypes.unshift( finalDataType );\n\t\t}\n\t\treturn responses[ finalDataType ];\n\t}\n}\n\n// Chain conversions given the request and the original response\nfunction ajaxConvert( s, response ) {\n\tvar conv2, current, conv, tmp,\n\t\tconverters = {},\n\t\ti = 0,\n\t\t// Work with a copy of dataTypes in case we need to modify it for conversion\n\t\tdataTypes = s.dataTypes.slice(),\n\t\tprev = dataTypes[ 0 ];\n\n\t// Apply the dataFilter if provided\n\tif ( s.dataFilter ) {\n\t\tresponse = s.dataFilter( response, s.dataType );\n\t}\n\n\t// Create converters map with lowercased keys\n\tif ( dataTypes[ 1 ] ) {\n\t\tfor ( conv in s.converters ) {\n\t\t\tconverters[ conv.toLowerCase() ] = s.converters[ conv ];\n\t\t}\n\t}\n\n\t// Convert to each sequential dataType, tolerating list modification\n\tfor ( ; (current = dataTypes[++i]); ) {\n\n\t\t// There's only work to do if current dataType is non-auto\n\t\tif ( current !== \"*\" ) {\n\n\t\t\t// Convert response if prev dataType is non-auto and differs from current\n\t\t\tif ( prev !== \"*\" && prev !== current ) {\n\n\t\t\t\t// Seek a direct converter\n\t\t\t\tconv = converters[ prev + \" \" + current ] || converters[ \"* \" + current ];\n\n\t\t\t\t// If none found, seek a pair\n\t\t\t\tif ( !conv ) {\n\t\t\t\t\tfor ( conv2 in converters ) {\n\n\t\t\t\t\t\t// If conv2 outputs current\n\t\t\t\t\t\ttmp = conv2.split(\" \");\n\t\t\t\t\t\tif ( tmp[ 1 ] === current ) {\n\n\t\t\t\t\t\t\t// If prev can be converted to accepted input\n\t\t\t\t\t\t\tconv = converters[ prev + \" \" + tmp[ 0 ] ] ||\n\t\t\t\t\t\t\t\tconverters[ \"* \" + tmp[ 0 ] ];\n\t\t\t\t\t\t\tif ( conv ) {\n\t\t\t\t\t\t\t\t// Condense equivalence converters\n\t\t\t\t\t\t\t\tif ( conv === true ) {\n\t\t\t\t\t\t\t\t\tconv = converters[ conv2 ];\n\n\t\t\t\t\t\t\t\t// Otherwise, insert the intermediate dataType\n\t\t\t\t\t\t\t\t} else if ( converters[ conv2 ] !== true ) {\n\t\t\t\t\t\t\t\t\tcurrent = tmp[ 0 ];\n\t\t\t\t\t\t\t\t\tdataTypes.splice( i--, 0, current );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Apply converter (if not an equivalence)\n\t\t\t\tif ( conv !== true ) {\n\n\t\t\t\t\t// Unless errors are allowed to bubble, catch and return them\n\t\t\t\t\tif ( conv && s[\"throws\"] ) {\n\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\treturn { state: \"parsererror\", error: conv ? e : \"No conversion from \" + prev + \" to \" + current };\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Update prev for next iteration\n\t\t\tprev = current;\n\t\t}\n\t}\n\n\treturn { state: \"success\", data: response };\n}\n// Install script dataType\njQuery.ajaxSetup({\n\taccepts: {\n\t\tscript: \"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"\n\t},\n\tcontents: {\n\t\tscript: /(?:java|ecma)script/\n\t},\n\tconverters: {\n\t\t\"text script\": function( text ) {\n\t\t\tjQuery.globalEval( text );\n\t\t\treturn text;\n\t\t}\n\t}\n});\n\n// Handle cache's special case and global\njQuery.ajaxPrefilter( \"script\", function( s ) {\n\tif ( s.cache === undefined ) {\n\t\ts.cache = false;\n\t}\n\tif ( s.crossDomain ) {\n\t\ts.type = \"GET\";\n\t\ts.global = false;\n\t}\n});\n\n// Bind script tag hack transport\njQuery.ajaxTransport( \"script\", function(s) {\n\n\t// This transport only deals with cross domain requests\n\tif ( s.crossDomain ) {\n\n\t\tvar script,\n\t\t\thead = document.head || jQuery(\"head\")[0] || document.documentElement;\n\n\t\treturn {\n\n\t\t\tsend: function( _, callback ) {\n\n\t\t\t\tscript = document.createElement(\"script\");\n\n\t\t\t\tscript.async = true;\n\n\t\t\t\tif ( s.scriptCharset ) {\n\t\t\t\t\tscript.charset = s.scriptCharset;\n\t\t\t\t}\n\n\t\t\t\tscript.src = s.url;\n\n\t\t\t\t// Attach handlers for all browsers\n\t\t\t\tscript.onload = script.onreadystatechange = function( _, isAbort ) {\n\n\t\t\t\t\tif ( isAbort || !script.readyState || /loaded|complete/.test( script.readyState ) ) {\n\n\t\t\t\t\t\t// Handle memory leak in IE\n\t\t\t\t\t\tscript.onload = script.onreadystatechange = null;\n\n\t\t\t\t\t\t// Remove the script\n\t\t\t\t\t\tif ( script.parentNode ) {\n\t\t\t\t\t\t\tscript.parentNode.removeChild( script );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Dereference the script\n\t\t\t\t\t\tscript = null;\n\n\t\t\t\t\t\t// Callback if not abort\n\t\t\t\t\t\tif ( !isAbort ) {\n\t\t\t\t\t\t\tcallback( 200, \"success\" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t// Circumvent IE6 bugs with base elements (#2709 and #4378) by prepending\n\t\t\t\t// Use native DOM manipulation to avoid our domManip AJAX trickery\n\t\t\t\thead.insertBefore( script, head.firstChild );\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tif ( script ) {\n\t\t\t\t\tscript.onload( undefined, true );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n});\nvar oldCallbacks = [],\n\trjsonp = /(=)\\?(?=&|$)|\\?\\?/;\n\n// Default jsonp settings\njQuery.ajaxSetup({\n\tjsonp: \"callback\",\n\tjsonpCallback: function() {\n\t\tvar callback = oldCallbacks.pop() || ( jQuery.expando + \"_\" + ( ajax_nonce++ ) );\n\t\tthis[ callback ] = true;\n\t\treturn callback;\n\t}\n});\n\n// Detect, normalize options and install callbacks for jsonp requests\njQuery.ajaxPrefilter( \"json jsonp\", function( s, originalSettings, jqXHR ) {\n\n\tvar callbackName, overwritten, responseContainer,\n\t\tjsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?\n\t\t\t\"url\" :\n\t\t\ttypeof s.data === \"string\" && !( s.contentType || \"\" ).indexOf(\"application/x-www-form-urlencoded\") && rjsonp.test( s.data ) && \"data\"\n\t\t);\n\n\t// Handle iff the expected data type is \"jsonp\" or we have a parameter to set\n\tif ( jsonProp || s.dataTypes[ 0 ] === \"jsonp\" ) {\n\n\t\t// Get callback name, remembering preexisting value associated with it\n\t\tcallbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?\n\t\t\ts.jsonpCallback() :\n\t\t\ts.jsonpCallback;\n\n\t\t// Insert callback into url or form data\n\t\tif ( jsonProp ) {\n\t\t\ts[ jsonProp ] = s[ jsonProp ].replace( rjsonp, \"$1\" + callbackName );\n\t\t} else if ( s.jsonp !== false ) {\n\t\t\ts.url += ( ajax_rquery.test( s.url ) ? \"&\" : \"?\" ) + s.jsonp + \"=\" + callbackName;\n\t\t}\n\n\t\t// Use data converter to retrieve json after script execution\n\t\ts.converters[\"script json\"] = function() {\n\t\t\tif ( !responseContainer ) {\n\t\t\t\tjQuery.error( callbackName + \" was not called\" );\n\t\t\t}\n\t\t\treturn responseContainer[ 0 ];\n\t\t};\n\n\t\t// force json dataType\n\t\ts.dataTypes[ 0 ] = \"json\";\n\n\t\t// Install callback\n\t\toverwritten = window[ callbackName ];\n\t\twindow[ callbackName ] = function() {\n\t\t\tresponseContainer = arguments;\n\t\t};\n\n\t\t// Clean-up function (fires after converters)\n\t\tjqXHR.always(function() {\n\t\t\t// Restore preexisting value\n\t\t\twindow[ callbackName ] = overwritten;\n\n\t\t\t// Save back as free\n\t\t\tif ( s[ callbackName ] ) {\n\t\t\t\t// make sure that re-using the options doesn't screw things around\n\t\t\t\ts.jsonpCallback = originalSettings.jsonpCallback;\n\n\t\t\t\t// save the callback name for future use\n\t\t\t\toldCallbacks.push( callbackName );\n\t\t\t}\n\n\t\t\t// Call if it was a function and we have a response\n\t\t\tif ( responseContainer && jQuery.isFunction( overwritten ) ) {\n\t\t\t\toverwritten( responseContainer[ 0 ] );\n\t\t\t}\n\n\t\t\tresponseContainer = overwritten = undefined;\n\t\t});\n\n\t\t// Delegate to script\n\t\treturn \"script\";\n\t}\n});\nvar xhrCallbacks, xhrSupported,\n\txhrId = 0,\n\t// #5280: Internet Explorer will keep connections alive if we don't abort on unload\n\txhrOnUnloadAbort = window.ActiveXObject && function() {\n\t\t// Abort all pending requests\n\t\tvar key;\n\t\tfor ( key in xhrCallbacks ) {\n\t\t\txhrCallbacks[ key ]( undefined, true );\n\t\t}\n\t};\n\n// Functions to create xhrs\nfunction createStandardXHR() {\n\ttry {\n\t\treturn new window.XMLHttpRequest();\n\t} catch( e ) {}\n}\n\nfunction createActiveXHR() {\n\ttry {\n\t\treturn new window.ActiveXObject(\"Microsoft.XMLHTTP\");\n\t} catch( e ) {}\n}\n\n// Create the request object\n// (This is still attached to ajaxSettings for backward compatibility)\njQuery.ajaxSettings.xhr = window.ActiveXObject ?\n\t/* Microsoft failed to properly\n\t * implement the XMLHttpRequest in IE7 (can't request local files),\n\t * so we use the ActiveXObject when it is available\n\t * Additionally XMLHttpRequest can be disabled in IE7/IE8 so\n\t * we need a fallback.\n\t */\n\tfunction() {\n\t\treturn !this.isLocal && createStandardXHR() || createActiveXHR();\n\t} :\n\t// For all other browsers, use the standard XMLHttpRequest object\n\tcreateStandardXHR;\n\n// Determine support properties\nxhrSupported = jQuery.ajaxSettings.xhr();\njQuery.support.cors = !!xhrSupported && ( \"withCredentials\" in xhrSupported );\nxhrSupported = jQuery.support.ajax = !!xhrSupported;\n\n// Create transport if the browser can provide an xhr\nif ( xhrSupported ) {\n\n\tjQuery.ajaxTransport(function( s ) {\n\t\t// Cross domain only allowed if supported through XMLHttpRequest\n\t\tif ( !s.crossDomain || jQuery.support.cors ) {\n\n\t\t\tvar callback;\n\n\t\t\treturn {\n\t\t\t\tsend: function( headers, complete ) {\n\n\t\t\t\t\t// Get a new xhr\n\t\t\t\t\tvar handle, i,\n\t\t\t\t\t\txhr = s.xhr();\n\n\t\t\t\t\t// Open the socket\n\t\t\t\t\t// Passing null username, generates a login popup on Opera (#2865)\n\t\t\t\t\tif ( s.username ) {\n\t\t\t\t\t\txhr.open( s.type, s.url, s.async, s.username, s.password );\n\t\t\t\t\t} else {\n\t\t\t\t\t\txhr.open( s.type, s.url, s.async );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Apply custom fields if provided\n\t\t\t\t\tif ( s.xhrFields ) {\n\t\t\t\t\t\tfor ( i in s.xhrFields ) {\n\t\t\t\t\t\t\txhr[ i ] = s.xhrFields[ i ];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Override mime type if needed\n\t\t\t\t\tif ( s.mimeType && xhr.overrideMimeType ) {\n\t\t\t\t\t\txhr.overrideMimeType( s.mimeType );\n\t\t\t\t\t}\n\n\t\t\t\t\t// X-Requested-With header\n\t\t\t\t\t// For cross-domain requests, seeing as conditions for a preflight are\n\t\t\t\t\t// akin to a jigsaw puzzle, we simply never set it to be sure.\n\t\t\t\t\t// (it can always be set on a per-request basis or even using ajaxSetup)\n\t\t\t\t\t// For same-domain requests, won't change header if already provided.\n\t\t\t\t\tif ( !s.crossDomain && !headers[\"X-Requested-With\"] ) {\n\t\t\t\t\t\theaders[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\t\t\t\t\t}\n\n\t\t\t\t\t// Need an extra try/catch for cross domain requests in Firefox 3\n\t\t\t\t\ttry {\n\t\t\t\t\t\tfor ( i in headers ) {\n\t\t\t\t\t\t\txhr.setRequestHeader( i, headers[ i ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch( err ) {}\n\n\t\t\t\t\t// Do send the request\n\t\t\t\t\t// This may raise an exception which is actually\n\t\t\t\t\t// handled in jQuery.ajax (so no try/catch here)\n\t\t\t\t\txhr.send( ( s.hasContent && s.data ) || null );\n\n\t\t\t\t\t// Listener\n\t\t\t\t\tcallback = function( _, isAbort ) {\n\t\t\t\t\t\tvar status, responseHeaders, statusText, responses;\n\n\t\t\t\t\t\t// Firefox throws exceptions when accessing properties\n\t\t\t\t\t\t// of an xhr when a network error occurred\n\t\t\t\t\t\t// http://helpful.knobs-dials.com/index.php/Component_returned_failure_code:_0x80040111_(NS_ERROR_NOT_AVAILABLE)\n\t\t\t\t\t\ttry {\n\n\t\t\t\t\t\t\t// Was never called and is aborted or complete\n\t\t\t\t\t\t\tif ( callback && ( isAbort || xhr.readyState === 4 ) ) {\n\n\t\t\t\t\t\t\t\t// Only called once\n\t\t\t\t\t\t\t\tcallback = undefined;\n\n\t\t\t\t\t\t\t\t// Do not keep as active anymore\n\t\t\t\t\t\t\t\tif ( handle ) {\n\t\t\t\t\t\t\t\t\txhr.onreadystatechange = jQuery.noop;\n\t\t\t\t\t\t\t\t\tif ( xhrOnUnloadAbort ) {\n\t\t\t\t\t\t\t\t\t\tdelete xhrCallbacks[ handle ];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// If it's an abort\n\t\t\t\t\t\t\t\tif ( isAbort ) {\n\t\t\t\t\t\t\t\t\t// Abort it manually if needed\n\t\t\t\t\t\t\t\t\tif ( xhr.readyState !== 4 ) {\n\t\t\t\t\t\t\t\t\t\txhr.abort();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tresponses = {};\n\t\t\t\t\t\t\t\t\tstatus = xhr.status;\n\t\t\t\t\t\t\t\t\tresponseHeaders = xhr.getAllResponseHeaders();\n\n\t\t\t\t\t\t\t\t\t// When requesting binary data, IE6-9 will throw an exception\n\t\t\t\t\t\t\t\t\t// on any attempt to access responseText (#11426)\n\t\t\t\t\t\t\t\t\tif ( typeof xhr.responseText === \"string\" ) {\n\t\t\t\t\t\t\t\t\t\tresponses.text = xhr.responseText;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Firefox throws an exception when accessing\n\t\t\t\t\t\t\t\t\t// statusText for faulty cross-domain requests\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tstatusText = xhr.statusText;\n\t\t\t\t\t\t\t\t\t} catch( e ) {\n\t\t\t\t\t\t\t\t\t\t// We normalize with Webkit giving an empty statusText\n\t\t\t\t\t\t\t\t\t\tstatusText = \"\";\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Filter status for non standard behaviors\n\n\t\t\t\t\t\t\t\t\t// If the request is local and we have data: assume a success\n\t\t\t\t\t\t\t\t\t// (success with no data won't get notified, that's the best we\n\t\t\t\t\t\t\t\t\t// can do given current implementations)\n\t\t\t\t\t\t\t\t\tif ( !status && s.isLocal && !s.crossDomain ) {\n\t\t\t\t\t\t\t\t\t\tstatus = responses.text ? 200 : 404;\n\t\t\t\t\t\t\t\t\t// IE - #1450: sometimes returns 1223 when it should be 204\n\t\t\t\t\t\t\t\t\t} else if ( status === 1223 ) {\n\t\t\t\t\t\t\t\t\t\tstatus = 204;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch( firefoxAccessException ) {\n\t\t\t\t\t\t\tif ( !isAbort ) {\n\t\t\t\t\t\t\t\tcomplete( -1, firefoxAccessException );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Call complete if needed\n\t\t\t\t\t\tif ( responses ) {\n\t\t\t\t\t\t\tcomplete( status, statusText, responses, responseHeaders );\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tif ( !s.async ) {\n\t\t\t\t\t\t// if we're in sync mode we fire the callback\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t} else if ( xhr.readyState === 4 ) {\n\t\t\t\t\t\t// (IE6 & IE7) if it's in cache and has been\n\t\t\t\t\t\t// retrieved directly we need to fire the callback\n\t\t\t\t\t\tsetTimeout( callback );\n\t\t\t\t\t} else {\n\t\t\t\t\t\thandle = ++xhrId;\n\t\t\t\t\t\tif ( xhrOnUnloadAbort ) {\n\t\t\t\t\t\t\t// Create the active xhrs callbacks list if needed\n\t\t\t\t\t\t\t// and attach the unload handler\n\t\t\t\t\t\t\tif ( !xhrCallbacks ) {\n\t\t\t\t\t\t\t\txhrCallbacks = {};\n\t\t\t\t\t\t\t\tjQuery( window ).unload( xhrOnUnloadAbort );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// Add to list of active xhrs callbacks\n\t\t\t\t\t\t\txhrCallbacks[ handle ] = callback;\n\t\t\t\t\t\t}\n\t\t\t\t\t\txhr.onreadystatechange = callback;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tabort: function() {\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback( undefined, true );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t});\n}\nvar fxNow, timerId,\n\trfxtypes = /^(?:toggle|show|hide)$/,\n\trfxnum = new RegExp( \"^(?:([+-])=|)(\" + core_pnum + \")([a-z%]*)$\", \"i\" ),\n\trrun = /queueHooks$/,\n\tanimationPrefilters = [ defaultPrefilter ],\n\ttweeners = {\n\t\t\"*\": [function( prop, value ) {\n\t\t\tvar end, unit,\n\t\t\t\ttween = this.createTween( prop, value ),\n\t\t\t\tparts = rfxnum.exec( value ),\n\t\t\t\ttarget = tween.cur(),\n\t\t\t\tstart = +target || 0,\n\t\t\t\tscale = 1,\n\t\t\t\tmaxIterations = 20;\n\n\t\t\tif ( parts ) {\n\t\t\t\tend = +parts[2];\n\t\t\t\tunit = parts[3] || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" );\n\n\t\t\t\t// We need to compute starting value\n\t\t\t\tif ( unit !== \"px\" && start ) {\n\t\t\t\t\t// Iteratively approximate from a nonzero starting point\n\t\t\t\t\t// Prefer the current property, because this process will be trivial if it uses the same units\n\t\t\t\t\t// Fallback to end or a simple constant\n\t\t\t\t\tstart = jQuery.css( tween.elem, prop, true ) || end || 1;\n\n\t\t\t\t\tdo {\n\t\t\t\t\t\t// If previous iteration zeroed out, double until we get *something*\n\t\t\t\t\t\t// Use a string for doubling factor so we don't accidentally see scale as unchanged below\n\t\t\t\t\t\tscale = scale || \".5\";\n\n\t\t\t\t\t\t// Adjust and apply\n\t\t\t\t\t\tstart = start / scale;\n\t\t\t\t\t\tjQuery.style( tween.elem, prop, start + unit );\n\n\t\t\t\t\t// Update scale, tolerating zero or NaN from tween.cur()\n\t\t\t\t\t// And breaking the loop if scale is unchanged or perfect, or if we've just had enough\n\t\t\t\t\t} while ( scale !== (scale = tween.cur() / target) && scale !== 1 && --maxIterations );\n\t\t\t\t}\n\n\t\t\t\ttween.unit = unit;\n\t\t\t\ttween.start = start;\n\t\t\t\t// If a +=/-= token was provided, we're doing a relative animation\n\t\t\t\ttween.end = parts[1] ? start + ( parts[1] + 1 ) * end : end;\n\t\t\t}\n\t\t\treturn tween;\n\t\t}]\n\t};\n\n// Animations created synchronously will run synchronously\nfunction createFxNow() {\n\tsetTimeout(function() {\n\t\tfxNow = undefined;\n\t});\n\treturn ( fxNow = jQuery.now() );\n}\n\nfunction createTweens( animation, props ) {\n\tjQuery.each( props, function( prop, value ) {\n\t\tvar collection = ( tweeners[ prop ] || [] ).concat( tweeners[ \"*\" ] ),\n\t\t\tindex = 0,\n\t\t\tlength = collection.length;\n\t\tfor ( ; index < length; index++ ) {\n\t\t\tif ( collection[ index ].call( animation, prop, value ) ) {\n\n\t\t\t\t// we're done with this property\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction Animation( elem, properties, options ) {\n\tvar result,\n\t\tstopped,\n\t\tindex = 0,\n\t\tlength = animationPrefilters.length,\n\t\tdeferred = jQuery.Deferred().always( function() {\n\t\t\t// don't match elem in the :animated selector\n\t\t\tdelete tick.elem;\n\t\t}),\n\t\ttick = function() {\n\t\t\tif ( stopped ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar currentTime = fxNow || createFxNow(),\n\t\t\t\tremaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),\n\t\t\t\t// archaic crash bug won't allow us to use 1 - ( 0.5 || 0 ) (#12497)\n\t\t\t\ttemp = remaining / animation.duration || 0,\n\t\t\t\tpercent = 1 - temp,\n\t\t\t\tindex = 0,\n\t\t\t\tlength = animation.tweens.length;\n\n\t\t\tfor ( ; index < length ; index++ ) {\n\t\t\t\tanimation.tweens[ index ].run( percent );\n\t\t\t}\n\n\t\t\tdeferred.notifyWith( elem, [ animation, percent, remaining ]);\n\n\t\t\tif ( percent < 1 && length ) {\n\t\t\t\treturn remaining;\n\t\t\t} else {\n\t\t\t\tdeferred.resolveWith( elem, [ animation ] );\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tanimation = deferred.promise({\n\t\t\telem: elem,\n\t\t\tprops: jQuery.extend( {}, properties ),\n\t\t\topts: jQuery.extend( true, { specialEasing: {} }, options ),\n\t\t\toriginalProperties: properties,\n\t\t\toriginalOptions: options,\n\t\t\tstartTime: fxNow || createFxNow(),\n\t\t\tduration: options.duration,\n\t\t\ttweens: [],\n\t\t\tcreateTween: function( prop, end ) {\n\t\t\t\tvar tween = jQuery.Tween( elem, animation.opts, prop, end,\n\t\t\t\t\t\tanimation.opts.specialEasing[ prop ] || animation.opts.easing );\n\t\t\t\tanimation.tweens.push( tween );\n\t\t\t\treturn tween;\n\t\t\t},\n\t\t\tstop: function( gotoEnd ) {\n\t\t\t\tvar index = 0,\n\t\t\t\t\t// if we are going to the end, we want to run all the tweens\n\t\t\t\t\t// otherwise we skip this part\n\t\t\t\t\tlength = gotoEnd ? animation.tweens.length : 0;\n\t\t\t\tif ( stopped ) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t\tstopped = true;\n\t\t\t\tfor ( ; index < length ; index++ ) {\n\t\t\t\t\tanimation.tweens[ index ].run( 1 );\n\t\t\t\t}\n\n\t\t\t\t// resolve when we played the last frame\n\t\t\t\t// otherwise, reject\n\t\t\t\tif ( gotoEnd ) {\n\t\t\t\t\tdeferred.resolveWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t} else {\n\t\t\t\t\tdeferred.rejectWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}),\n\t\tprops = animation.props;\n\n\tpropFilter( props, animation.opts.specialEasing );\n\n\tfor ( ; index < length ; index++ ) {\n\t\tresult = animationPrefilters[ index ].call( animation, elem, props, animation.opts );\n\t\tif ( result ) {\n\t\t\treturn result;\n\t\t}\n\t}\n\n\tcreateTweens( animation, props );\n\n\tif ( jQuery.isFunction( animation.opts.start ) ) {\n\t\tanimation.opts.start.call( elem, animation );\n\t}\n\n\tjQuery.fx.timer(\n\t\tjQuery.extend( tick, {\n\t\t\telem: elem,\n\t\t\tanim: animation,\n\t\t\tqueue: animation.opts.queue\n\t\t})\n\t);\n\n\t// attach callbacks from options\n\treturn animation.progress( animation.opts.progress )\n\t\t.done( animation.opts.done, animation.opts.complete )\n\t\t.fail( animation.opts.fail )\n\t\t.always( animation.opts.always );\n}\n\nfunction propFilter( props, specialEasing ) {\n\tvar value, name, index, easing, hooks;\n\n\t// camelCase, specialEasing and expand cssHook pass\n\tfor ( index in props ) {\n\t\tname = jQuery.camelCase( index );\n\t\teasing = specialEasing[ name ];\n\t\tvalue = props[ index ];\n\t\tif ( jQuery.isArray( value ) ) {\n\t\t\teasing = value[ 1 ];\n\t\t\tvalue = props[ index ] = value[ 0 ];\n\t\t}\n\n\t\tif ( index !== name ) {\n\t\t\tprops[ name ] = value;\n\t\t\tdelete props[ index ];\n\t\t}\n\n\t\thooks = jQuery.cssHooks[ name ];\n\t\tif ( hooks && \"expand\" in hooks ) {\n\t\t\tvalue = hooks.expand( value );\n\t\t\tdelete props[ name ];\n\n\t\t\t// not quite $.extend, this wont overwrite keys already present.\n\t\t\t// also - reusing 'index' from above because we have the correct \"name\"\n\t\t\tfor ( index in value ) {\n\t\t\t\tif ( !( index in props ) ) {\n\t\t\t\t\tprops[ index ] = value[ index ];\n\t\t\t\t\tspecialEasing[ index ] = easing;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tspecialEasing[ name ] = easing;\n\t\t}\n\t}\n}\n\njQuery.Animation = jQuery.extend( Animation, {\n\n\ttweener: function( props, callback ) {\n\t\tif ( jQuery.isFunction( props ) ) {\n\t\t\tcallback = props;\n\t\t\tprops = [ \"*\" ];\n\t\t} else {\n\t\t\tprops = props.split(\" \");\n\t\t}\n\n\t\tvar prop,\n\t\t\tindex = 0,\n\t\t\tlength = props.length;\n\n\t\tfor ( ; index < length ; index++ ) {\n\t\t\tprop = props[ index ];\n\t\t\ttweeners[ prop ] = tweeners[ prop ] || [];\n\t\t\ttweeners[ prop ].unshift( callback );\n\t\t}\n\t},\n\n\tprefilter: function( callback, prepend ) {\n\t\tif ( prepend ) {\n\t\t\tanimationPrefilters.unshift( callback );\n\t\t} else {\n\t\t\tanimationPrefilters.push( callback );\n\t\t}\n\t}\n});\n\nfunction defaultPrefilter( elem, props, opts ) {\n\t/*jshint validthis:true */\n\tvar prop, index, length,\n\t\tvalue, dataShow, toggle,\n\t\ttween, hooks, oldfire,\n\t\tanim = this,\n\t\tstyle = elem.style,\n\t\torig = {},\n\t\thandled = [],\n\t\thidden = elem.nodeType && isHidden( elem );\n\n\t// handle queue: false promises\n\tif ( !opts.queue ) {\n\t\thooks = jQuery._queueHooks( elem, \"fx\" );\n\t\tif ( hooks.unqueued == null ) {\n\t\t\thooks.unqueued = 0;\n\t\t\toldfire = hooks.empty.fire;\n\t\t\thooks.empty.fire = function() {\n\t\t\t\tif ( !hooks.unqueued ) {\n\t\t\t\t\toldfire();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\thooks.unqueued++;\n\n\t\tanim.always(function() {\n\t\t\t// doing this makes sure that the complete handler will be called\n\t\t\t// before this completes\n\t\t\tanim.always(function() {\n\t\t\t\thooks.unqueued--;\n\t\t\t\tif ( !jQuery.queue( elem, \"fx\" ).length ) {\n\t\t\t\t\thooks.empty.fire();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t// height/width overflow pass\n\tif ( elem.nodeType === 1 && ( \"height\" in props || \"width\" in props ) ) {\n\t\t// Make sure that nothing sneaks out\n\t\t// Record all 3 overflow attributes because IE does not\n\t\t// change the overflow attribute when overflowX and\n\t\t// overflowY are set to the same value\n\t\topts.overflow = [ style.overflow, style.overflowX, style.overflowY ];\n\n\t\t// Set display property to inline-block for height/width\n\t\t// animations on inline elements that are having width/height animated\n\t\tif ( jQuery.css( elem, \"display\" ) === \"inline\" &&\n\t\t\t\tjQuery.css( elem, \"float\" ) === \"none\" ) {\n\n\t\t\t// inline-level elements accept inline-block;\n\t\t\t// block-level elements need to be inline with layout\n\t\t\tif ( !jQuery.support.inlineBlockNeedsLayout || css_defaultDisplay( elem.nodeName ) === \"inline\" ) {\n\t\t\t\tstyle.display = \"inline-block\";\n\n\t\t\t} else {\n\t\t\t\tstyle.zoom = 1;\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( opts.overflow ) {\n\t\tstyle.overflow = \"hidden\";\n\t\tif ( !jQuery.support.shrinkWrapBlocks ) {\n\t\t\tanim.always(function() {\n\t\t\t\tstyle.overflow = opts.overflow[ 0 ];\n\t\t\t\tstyle.overflowX = opts.overflow[ 1 ];\n\t\t\t\tstyle.overflowY = opts.overflow[ 2 ];\n\t\t\t});\n\t\t}\n\t}\n\n\n\t// show/hide pass\n\tfor ( index in props ) {\n\t\tvalue = props[ index ];\n\t\tif ( rfxtypes.exec( value ) ) {\n\t\t\tdelete props[ index ];\n\t\t\ttoggle = toggle || value === \"toggle\";\n\t\t\tif ( value === ( hidden ? \"hide\" : \"show\" ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\thandled.push( index );\n\t\t}\n\t}\n\n\tlength = handled.length;\n\tif ( length ) {\n\t\tdataShow = jQuery._data( elem, \"fxshow\" ) || jQuery._data( elem, \"fxshow\", {} );\n\t\tif ( \"hidden\" in dataShow ) {\n\t\t\thidden = dataShow.hidden;\n\t\t}\n\n\t\t// store state if its toggle - enables .stop().toggle() to \"reverse\"\n\t\tif ( toggle ) {\n\t\t\tdataShow.hidden = !hidden;\n\t\t}\n\t\tif ( hidden ) {\n\t\t\tjQuery( elem ).show();\n\t\t} else {\n\t\t\tanim.done(function() {\n\t\t\t\tjQuery( elem ).hide();\n\t\t\t});\n\t\t}\n\t\tanim.done(function() {\n\t\t\tvar prop;\n\t\t\tjQuery._removeData( elem, \"fxshow\" );\n\t\t\tfor ( prop in orig ) {\n\t\t\t\tjQuery.style( elem, prop, orig[ prop ] );\n\t\t\t}\n\t\t});\n\t\tfor ( index = 0 ; index < length ; index++ ) {\n\t\t\tprop = handled[ index ];\n\t\t\ttween = anim.createTween( prop, hidden ? dataShow[ prop ] : 0 );\n\t\t\torig[ prop ] = dataShow[ prop ] || jQuery.style( elem, prop );\n\n\t\t\tif ( !( prop in dataShow ) ) {\n\t\t\t\tdataShow[ prop ] = tween.start;\n\t\t\t\tif ( hidden ) {\n\t\t\t\t\ttween.end = tween.start;\n\t\t\t\t\ttween.start = prop === \"width\" || prop === \"height\" ? 1 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction Tween( elem, options, prop, end, easing ) {\n\treturn new Tween.prototype.init( elem, options, prop, end, easing );\n}\njQuery.Tween = Tween;\n\nTween.prototype = {\n\tconstructor: Tween,\n\tinit: function( elem, options, prop, end, easing, unit ) {\n\t\tthis.elem = elem;\n\t\tthis.prop = prop;\n\t\tthis.easing = easing || \"swing\";\n\t\tthis.options = options;\n\t\tthis.start = this.now = this.cur();\n\t\tthis.end = end;\n\t\tthis.unit = unit || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" );\n\t},\n\tcur: function() {\n\t\tvar hooks = Tween.propHooks[ this.prop ];\n\n\t\treturn hooks && hooks.get ?\n\t\t\thooks.get( this ) :\n\t\t\tTween.propHooks._default.get( this );\n\t},\n\trun: function( percent ) {\n\t\tvar eased,\n\t\t\thooks = Tween.propHooks[ this.prop ];\n\n\t\tif ( this.options.duration ) {\n\t\t\tthis.pos = eased = jQuery.easing[ this.easing ](\n\t\t\t\tpercent, this.options.duration * percent, 0, 1, this.options.duration\n\t\t\t);\n\t\t} else {\n\t\t\tthis.pos = eased = percent;\n\t\t}\n\t\tthis.now = ( this.end - this.start ) * eased + this.start;\n\n\t\tif ( this.options.step ) {\n\t\t\tthis.options.step.call( this.elem, this.now, this );\n\t\t}\n\n\t\tif ( hooks && hooks.set ) {\n\t\t\thooks.set( this );\n\t\t} else {\n\t\t\tTween.propHooks._default.set( this );\n\t\t}\n\t\treturn this;\n\t}\n};\n\nTween.prototype.init.prototype = Tween.prototype;\n\nTween.propHooks = {\n\t_default: {\n\t\tget: function( tween ) {\n\t\t\tvar result;\n\n\t\t\tif ( tween.elem[ tween.prop ] != null &&\n\t\t\t\t(!tween.elem.style || tween.elem.style[ tween.prop ] == null) ) {\n\t\t\t\treturn tween.elem[ tween.prop ];\n\t\t\t}\n\n\t\t\t// passing an empty string as a 3rd parameter to .css will automatically\n\t\t\t// attempt a parseFloat and fallback to a string if the parse fails\n\t\t\t// so, simple values such as \"10px\" are parsed to Float.\n\t\t\t// complex values such as \"rotate(1rad)\" are returned as is.\n\t\t\tresult = jQuery.css( tween.elem, tween.prop, \"\" );\n\t\t\t// Empty strings, null, undefined and \"auto\" are converted to 0.\n\t\t\treturn !result || result === \"auto\" ? 0 : result;\n\t\t},\n\t\tset: function( tween ) {\n\t\t\t// use step hook for back compat - use cssHook if its there - use .style if its\n\t\t\t// available and use plain properties where available\n\t\t\tif ( jQuery.fx.step[ tween.prop ] ) {\n\t\t\t\tjQuery.fx.step[ tween.prop ]( tween );\n\t\t\t} else if ( tween.elem.style && ( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null || jQuery.cssHooks[ tween.prop ] ) ) {\n\t\t\t\tjQuery.style( tween.elem, tween.prop, tween.now + tween.unit );\n\t\t\t} else {\n\t\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t\t}\n\t\t}\n\t}\n};\n\n// Remove in 2.0 - this supports IE8's panic based approach\n// to setting things on disconnected nodes\n\nTween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {\n\tset: function( tween ) {\n\t\tif ( tween.elem.nodeType && tween.elem.parentNode ) {\n\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t}\n\t}\n};\n\njQuery.each([ \"toggle\", \"show\", \"hide\" ], function( i, name ) {\n\tvar cssFn = jQuery.fn[ name ];\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn speed == null || typeof speed === \"boolean\" ?\n\t\t\tcssFn.apply( this, arguments ) :\n\t\t\tthis.animate( genFx( name, true ), speed, easing, callback );\n\t};\n});\n\njQuery.fn.extend({\n\tfadeTo: function( speed, to, easing, callback ) {\n\n\t\t// show any hidden elements after setting opacity to 0\n\t\treturn this.filter( isHidden ).css( \"opacity\", 0 ).show()\n\n\t\t\t// animate to the value specified\n\t\t\t.end().animate({ opacity: to }, speed, easing, callback );\n\t},\n\tanimate: function( prop, speed, easing, callback ) {\n\t\tvar empty = jQuery.isEmptyObject( prop ),\n\t\t\toptall = jQuery.speed( speed, easing, callback ),\n\t\t\tdoAnimation = function() {\n\t\t\t\t// Operate on a copy of prop so per-property easing won't be lost\n\t\t\t\tvar anim = Animation( this, jQuery.extend( {}, prop ), optall );\n\t\t\t\tdoAnimation.finish = function() {\n\t\t\t\t\tanim.stop( true );\n\t\t\t\t};\n\t\t\t\t// Empty animations, or finishing resolves immediately\n\t\t\t\tif ( empty || jQuery._data( this, \"finish\" ) ) {\n\t\t\t\t\tanim.stop( true );\n\t\t\t\t}\n\t\t\t};\n\t\t\tdoAnimation.finish = doAnimation;\n\n\t\treturn empty || optall.queue === false ?\n\t\t\tthis.each( doAnimation ) :\n\t\t\tthis.queue( optall.queue, doAnimation );\n\t},\n\tstop: function( type, clearQueue, gotoEnd ) {\n\t\tvar stopQueue = function( hooks ) {\n\t\t\tvar stop = hooks.stop;\n\t\t\tdelete hooks.stop;\n\t\t\tstop( gotoEnd );\n\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tgotoEnd = clearQueue;\n\t\t\tclearQueue = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\tif ( clearQueue && type !== false ) {\n\t\t\tthis.queue( type || \"fx\", [] );\n\t\t}\n\n\t\treturn this.each(function() {\n\t\t\tvar dequeue = true,\n\t\t\t\tindex = type != null && type + \"queueHooks\",\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tdata = jQuery._data( this );\n\n\t\t\tif ( index ) {\n\t\t\t\tif ( data[ index ] && data[ index ].stop ) {\n\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( index in data ) {\n\t\t\t\t\tif ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {\n\t\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this && (type == null || timers[ index ].queue === type) ) {\n\t\t\t\t\ttimers[ index ].anim.stop( gotoEnd );\n\t\t\t\t\tdequeue = false;\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// start the next in the queue if the last step wasn't forced\n\t\t\t// timers currently will call their complete callbacks, which will dequeue\n\t\t\t// but only if they were gotoEnd\n\t\t\tif ( dequeue || !gotoEnd ) {\n\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t}\n\t\t});\n\t},\n\tfinish: function( type ) {\n\t\tif ( type !== false ) {\n\t\t\ttype = type || \"fx\";\n\t\t}\n\t\treturn this.each(function() {\n\t\t\tvar index,\n\t\t\t\tdata = jQuery._data( this ),\n\t\t\t\tqueue = data[ type + \"queue\" ],\n\t\t\t\thooks = data[ type + \"queueHooks\" ],\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tlength = queue ? queue.length : 0;\n\n\t\t\t// enable finishing flag on private data\n\t\t\tdata.finish = true;\n\n\t\t\t// empty the queue first\n\t\t\tjQuery.queue( this, type, [] );\n\n\t\t\tif ( hooks && hooks.cur && hooks.cur.finish ) {\n\t\t\t\thooks.cur.finish.call( this );\n\t\t\t}\n\n\t\t\t// look for any active animations, and finish them\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this && timers[ index ].queue === type ) {\n\t\t\t\t\ttimers[ index ].anim.stop( true );\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// look for any animations in the old queue and finish them\n\t\t\tfor ( index = 0; index < length; index++ ) {\n\t\t\t\tif ( queue[ index ] && queue[ index ].finish ) {\n\t\t\t\t\tqueue[ index ].finish.call( this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// turn off finishing flag\n\t\t\tdelete data.finish;\n\t\t});\n\t}\n});\n\n// Generate parameters to create a standard animation\nfunction genFx( type, includeWidth ) {\n\tvar which,\n\t\tattrs = { height: type },\n\t\ti = 0;\n\n\t// if we include width, step value is 1 to do all cssExpand values,\n\t// if we don't include width, step value is 2 to skip over Left and Right\n\tincludeWidth = includeWidth? 1 : 0;\n\tfor( ; i < 4 ; i += 2 - includeWidth ) {\n\t\twhich = cssExpand[ i ];\n\t\tattrs[ \"margin\" + which ] = attrs[ \"padding\" + which ] = type;\n\t}\n\n\tif ( includeWidth ) {\n\t\tattrs.opacity = attrs.width = type;\n\t}\n\n\treturn attrs;\n}\n\n// Generate shortcuts for custom animations\njQuery.each({\n\tslideDown: genFx(\"show\"),\n\tslideUp: genFx(\"hide\"),\n\tslideToggle: genFx(\"toggle\"),\n\tfadeIn: { opacity: \"show\" },\n\tfadeOut: { opacity: \"hide\" },\n\tfadeToggle: { opacity: \"toggle\" }\n}, function( name, props ) {\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn this.animate( props, speed, easing, callback );\n\t};\n});\n\njQuery.speed = function( speed, easing, fn ) {\n\tvar opt = speed && typeof speed === \"object\" ? jQuery.extend( {}, speed ) : {\n\t\tcomplete: fn || !fn && easing ||\n\t\t\tjQuery.isFunction( speed ) && speed,\n\t\tduration: speed,\n\t\teasing: fn && easing || easing && !jQuery.isFunction( easing ) && easing\n\t};\n\n\topt.duration = jQuery.fx.off ? 0 : typeof opt.duration === \"number\" ? opt.duration :\n\t\topt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[ opt.duration ] : jQuery.fx.speeds._default;\n\n\t// normalize opt.queue - true/undefined/null -> \"fx\"\n\tif ( opt.queue == null || opt.queue === true ) {\n\t\topt.queue = \"fx\";\n\t}\n\n\t// Queueing\n\topt.old = opt.complete;\n\n\topt.complete = function() {\n\t\tif ( jQuery.isFunction( opt.old ) ) {\n\t\t\topt.old.call( this );\n\t\t}\n\n\t\tif ( opt.queue ) {\n\t\t\tjQuery.dequeue( this, opt.queue );\n\t\t}\n\t};\n\n\treturn opt;\n};\n\njQuery.easing = {\n\tlinear: function( p ) {\n\t\treturn p;\n\t},\n\tswing: function( p ) {\n\t\treturn 0.5 - Math.cos( p*Math.PI ) / 2;\n\t}\n};\n\njQuery.timers = [];\njQuery.fx = Tween.prototype.init;\njQuery.fx.tick = function() {\n\tvar timer,\n\t\ttimers = jQuery.timers,\n\t\ti = 0;\n\n\tfxNow = jQuery.now();\n\n\tfor ( ; i < timers.length; i++ ) {\n\t\ttimer = timers[ i ];\n\t\t// Checks the timer has not already been removed\n\t\tif ( !timer() && timers[ i ] === timer ) {\n\t\t\ttimers.splice( i--, 1 );\n\t\t}\n\t}\n\n\tif ( !timers.length ) {\n\t\tjQuery.fx.stop();\n\t}\n\tfxNow = undefined;\n};\n\njQuery.fx.timer = function( timer ) {\n\tif ( timer() && jQuery.timers.push( timer ) ) {\n\t\tjQuery.fx.start();\n\t}\n};\n\njQuery.fx.interval = 13;\n\njQuery.fx.start = function() {\n\tif ( !timerId ) {\n\t\ttimerId = setInterval( jQuery.fx.tick, jQuery.fx.interval );\n\t}\n};\n\njQuery.fx.stop = function() {\n\tclearInterval( timerId );\n\ttimerId = null;\n};\n\njQuery.fx.speeds = {\n\tslow: 600,\n\tfast: 200,\n\t// Default speed\n\t_default: 400\n};\n\n// Back Compat <1.8 extension point\njQuery.fx.step = {};\n\nif ( jQuery.expr && jQuery.expr.filters ) {\n\tjQuery.expr.filters.animated = function( elem ) {\n\t\treturn jQuery.grep(jQuery.timers, function( fn ) {\n\t\t\treturn elem === fn.elem;\n\t\t}).length;\n\t};\n}\njQuery.fn.offset = function( options ) {\n\tif ( arguments.length ) {\n\t\treturn options === undefined ?\n\t\t\tthis :\n\t\t\tthis.each(function( i ) {\n\t\t\t\tjQuery.offset.setOffset( this, options, i );\n\t\t\t});\n\t}\n\n\tvar docElem, win,\n\t\tbox = { top: 0, left: 0 },\n\t\telem = this[ 0 ],\n\t\tdoc = elem && elem.ownerDocument;\n\n\tif ( !doc ) {\n\t\treturn;\n\t}\n\n\tdocElem = doc.documentElement;\n\n\t// Make sure it's not a disconnected DOM node\n\tif ( !jQuery.contains( docElem, elem ) ) {\n\t\treturn box;\n\t}\n\n\t// If we don't have gBCR, just use 0,0 rather than error\n\t// BlackBerry 5, iOS 3 (original iPhone)\n\tif ( typeof elem.getBoundingClientRect !== core_strundefined ) {\n\t\tbox = elem.getBoundingClientRect();\n\t}\n\twin = getWindow( doc );\n\treturn {\n\t\ttop: box.top  + ( win.pageYOffset || docElem.scrollTop )  - ( docElem.clientTop  || 0 ),\n\t\tleft: box.left + ( win.pageXOffset || docElem.scrollLeft ) - ( docElem.clientLeft || 0 )\n\t};\n};\n\njQuery.offset = {\n\n\tsetOffset: function( elem, options, i ) {\n\t\tvar position = jQuery.css( elem, \"position\" );\n\n\t\t// set position first, in-case top/left are set even on static elem\n\t\tif ( position === \"static\" ) {\n\t\t\telem.style.position = \"relative\";\n\t\t}\n\n\t\tvar curElem = jQuery( elem ),\n\t\t\tcurOffset = curElem.offset(),\n\t\t\tcurCSSTop = jQuery.css( elem, \"top\" ),\n\t\t\tcurCSSLeft = jQuery.css( elem, \"left\" ),\n\t\t\tcalculatePosition = ( position === \"absolute\" || position === \"fixed\" ) && jQuery.inArray(\"auto\", [curCSSTop, curCSSLeft]) > -1,\n\t\t\tprops = {}, curPosition = {}, curTop, curLeft;\n\n\t\t// need to be able to calculate position if either top or left is auto and position is either absolute or fixed\n\t\tif ( calculatePosition ) {\n\t\t\tcurPosition = curElem.position();\n\t\t\tcurTop = curPosition.top;\n\t\t\tcurLeft = curPosition.left;\n\t\t} else {\n\t\t\tcurTop = parseFloat( curCSSTop ) || 0;\n\t\t\tcurLeft = parseFloat( curCSSLeft ) || 0;\n\t\t}\n\n\t\tif ( jQuery.isFunction( options ) ) {\n\t\t\toptions = options.call( elem, i, curOffset );\n\t\t}\n\n\t\tif ( options.top != null ) {\n\t\t\tprops.top = ( options.top - curOffset.top ) + curTop;\n\t\t}\n\t\tif ( options.left != null ) {\n\t\t\tprops.left = ( options.left - curOffset.left ) + curLeft;\n\t\t}\n\n\t\tif ( \"using\" in options ) {\n\t\t\toptions.using.call( elem, props );\n\t\t} else {\n\t\t\tcurElem.css( props );\n\t\t}\n\t}\n};\n\n\njQuery.fn.extend({\n\n\tposition: function() {\n\t\tif ( !this[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar offsetParent, offset,\n\t\t\tparentOffset = { top: 0, left: 0 },\n\t\t\telem = this[ 0 ];\n\n\t\t// fixed elements are offset from window (parentOffset = {top:0, left: 0}, because it is it's only offset parent\n\t\tif ( jQuery.css( elem, \"position\" ) === \"fixed\" ) {\n\t\t\t// we assume that getBoundingClientRect is available when computed position is fixed\n\t\t\toffset = elem.getBoundingClientRect();\n\t\t} else {\n\t\t\t// Get *real* offsetParent\n\t\t\toffsetParent = this.offsetParent();\n\n\t\t\t// Get correct offsets\n\t\t\toffset = this.offset();\n\t\t\tif ( !jQuery.nodeName( offsetParent[ 0 ], \"html\" ) ) {\n\t\t\t\tparentOffset = offsetParent.offset();\n\t\t\t}\n\n\t\t\t// Add offsetParent borders\n\t\t\tparentOffset.top  += jQuery.css( offsetParent[ 0 ], \"borderTopWidth\", true );\n\t\t\tparentOffset.left += jQuery.css( offsetParent[ 0 ], \"borderLeftWidth\", true );\n\t\t}\n\n\t\t// Subtract parent offsets and element margins\n\t\t// note: when an element has margin: auto the offsetLeft and marginLeft\n\t\t// are the same in Safari causing offset.left to incorrectly be 0\n\t\treturn {\n\t\t\ttop:  offset.top  - parentOffset.top - jQuery.css( elem, \"marginTop\", true ),\n\t\t\tleft: offset.left - parentOffset.left - jQuery.css( elem, \"marginLeft\", true)\n\t\t};\n\t},\n\n\toffsetParent: function() {\n\t\treturn this.map(function() {\n\t\t\tvar offsetParent = this.offsetParent || document.documentElement;\n\t\t\twhile ( offsetParent && ( !jQuery.nodeName( offsetParent, \"html\" ) && jQuery.css( offsetParent, \"position\") === \"static\" ) ) {\n\t\t\t\toffsetParent = offsetParent.offsetParent;\n\t\t\t}\n\t\t\treturn offsetParent || document.documentElement;\n\t\t});\n\t}\n});\n\n\n// Create scrollLeft and scrollTop methods\njQuery.each( {scrollLeft: \"pageXOffset\", scrollTop: \"pageYOffset\"}, function( method, prop ) {\n\tvar top = /Y/.test( prop );\n\n\tjQuery.fn[ method ] = function( val ) {\n\t\treturn jQuery.access( this, function( elem, method, val ) {\n\t\t\tvar win = getWindow( elem );\n\n\t\t\tif ( val === undefined ) {\n\t\t\t\treturn win ? (prop in win) ? win[ prop ] :\n\t\t\t\t\twin.document.documentElement[ method ] :\n\t\t\t\t\telem[ method ];\n\t\t\t}\n\n\t\t\tif ( win ) {\n\t\t\t\twin.scrollTo(\n\t\t\t\t\t!top ? val : jQuery( win ).scrollLeft(),\n\t\t\t\t\ttop ? val : jQuery( win ).scrollTop()\n\t\t\t\t);\n\n\t\t\t} else {\n\t\t\t\telem[ method ] = val;\n\t\t\t}\n\t\t}, method, val, arguments.length, null );\n\t};\n});\n\nfunction getWindow( elem ) {\n\treturn jQuery.isWindow( elem ) ?\n\t\telem :\n\t\telem.nodeType === 9 ?\n\t\t\telem.defaultView || elem.parentWindow :\n\t\t\tfalse;\n}\n// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods\njQuery.each( { Height: \"height\", Width: \"width\" }, function( name, type ) {\n\tjQuery.each( { padding: \"inner\" + name, content: type, \"\": \"outer\" + name }, function( defaultExtra, funcName ) {\n\t\t// margin is only for outerHeight, outerWidth\n\t\tjQuery.fn[ funcName ] = function( margin, value ) {\n\t\t\tvar chainable = arguments.length && ( defaultExtra || typeof margin !== \"boolean\" ),\n\t\t\t\textra = defaultExtra || ( margin === true || value === true ? \"margin\" : \"border\" );\n\n\t\t\treturn jQuery.access( this, function( elem, type, value ) {\n\t\t\t\tvar doc;\n\n\t\t\t\tif ( jQuery.isWindow( elem ) ) {\n\t\t\t\t\t// As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there\n\t\t\t\t\t// isn't a whole lot we can do. See pull request at this URL for discussion:\n\t\t\t\t\t// https://github.com/jquery/jquery/pull/764\n\t\t\t\t\treturn elem.document.documentElement[ \"client\" + name ];\n\t\t\t\t}\n\n\t\t\t\t// Get document width or height\n\t\t\t\tif ( elem.nodeType === 9 ) {\n\t\t\t\t\tdoc = elem.documentElement;\n\n\t\t\t\t\t// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height], whichever is greatest\n\t\t\t\t\t// unfortunately, this causes bug #3838 in IE6/8 only, but there is currently no good, small way to fix it.\n\t\t\t\t\treturn Math.max(\n\t\t\t\t\t\telem.body[ \"scroll\" + name ], doc[ \"scroll\" + name ],\n\t\t\t\t\t\telem.body[ \"offset\" + name ], doc[ \"offset\" + name ],\n\t\t\t\t\t\tdoc[ \"client\" + name ]\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn value === undefined ?\n\t\t\t\t\t// Get width or height on the element, requesting but not forcing parseFloat\n\t\t\t\t\tjQuery.css( elem, type, extra ) :\n\n\t\t\t\t\t// Set width or height on the element\n\t\t\t\t\tjQuery.style( elem, type, value, extra );\n\t\t\t}, type, chainable ? margin : undefined, chainable, null );\n\t\t};\n\t});\n});\n// Limit scope pollution from any deprecated API\n// (function() {\n\n// })();\n// Expose jQuery to the global object\nwindow.jQuery = window.$ = jQuery;\n\n// Expose jQuery as an AMD module, but only for AMD loaders that\n// understand the issues with loading multiple versions of jQuery\n// in a page that all might call define(). The loader will indicate\n// they have special allowances for multiple jQuery versions by\n// specifying define.amd.jQuery = true. Register as a named module,\n// since jQuery can be concatenated with other files that may use define,\n// but not use a proper concatenation script that understands anonymous\n// AMD modules. A named AMD is safest and most robust way to register.\n// Lowercase jquery is used because AMD module names are derived from\n// file names, and jQuery is normally delivered in a lowercase file name.\n// Do this after creating the global so that if an AMD module wants to call\n// noConflict to hide this version of jQuery, it will work.\nif ( typeof define === \"function\" && define.amd && define.amd.jQuery ) {\n\tdefine( \"jquery\", [], function () { return jQuery; } );\n}\n\n})( window );\n\n}\n, \"ep_etherpad-lite/static/js/rjquery.js\": function (require, exports, module) {\n\n// Proviedes a require'able version of jQuery without leaking $ and jQuery;\nrequire('./jquery');\nvar jq = window.$.noConflict(true);\nexports.jQuery = exports.$ = jq;\n\n}\n, \"async.js\": null\n, \"async/lib/async.js\": function (require, exports, module) {\n/*!\n * async\n * https://github.com/caolan/async\n *\n * Copyright 2010-2014 Caolan McMahon\n * Released under the MIT license\n */\n/*jshint onevar: false, indent:4 */\n/*global setImmediate: false, setTimeout: false, console: false */\n(function () {\n\n    var async = {};\n\n    // global on the server, window in the browser\n    var root, previous_async;\n\n    root = this;\n    if (root != null) {\n      previous_async = root.async;\n    }\n\n    async.noConflict = function () {\n        root.async = previous_async;\n        return async;\n    };\n\n    function only_once(fn) {\n        var called = false;\n        return function() {\n            if (called) throw new Error(\"Callback was already called.\");\n            called = true;\n            fn.apply(root, arguments);\n        }\n    }\n\n    //// cross-browser compatiblity functions ////\n\n    var _toString = Object.prototype.toString;\n\n    var _isArray = Array.isArray || function (obj) {\n        return _toString.call(obj) === '[object Array]';\n    };\n\n    var _each = function (arr, iterator) {\n        if (arr.forEach) {\n            return arr.forEach(iterator);\n        }\n        for (var i = 0; i < arr.length; i += 1) {\n            iterator(arr[i], i, arr);\n        }\n    };\n\n    var _map = function (arr, iterator) {\n        if (arr.map) {\n            return arr.map(iterator);\n        }\n        var results = [];\n        _each(arr, function (x, i, a) {\n            results.push(iterator(x, i, a));\n        });\n        return results;\n    };\n\n    var _reduce = function (arr, iterator, memo) {\n        if (arr.reduce) {\n            return arr.reduce(iterator, memo);\n        }\n        _each(arr, function (x, i, a) {\n            memo = iterator(memo, x, i, a);\n        });\n        return memo;\n    };\n\n    var _keys = function (obj) {\n        if (Object.keys) {\n            return Object.keys(obj);\n        }\n        var keys = [];\n        for (var k in obj) {\n            if (obj.hasOwnProperty(k)) {\n                keys.push(k);\n            }\n        }\n        return keys;\n    };\n\n    //// exported async module functions ////\n\n    //// nextTick implementation with browser-compatible fallback ////\n    if (typeof process === 'undefined' || !(process.nextTick)) {\n        if (typeof setImmediate === 'function') {\n            async.nextTick = function (fn) {\n                // not a direct alias for IE10 compatibility\n                setImmediate(fn);\n            };\n            async.setImmediate = async.nextTick;\n        }\n        else {\n            async.nextTick = function (fn) {\n                setTimeout(fn, 0);\n            };\n            async.setImmediate = async.nextTick;\n        }\n    }\n    else {\n        async.nextTick = process.nextTick;\n        if (typeof setImmediate !== 'undefined') {\n            async.setImmediate = function (fn) {\n              // not a direct alias for IE10 compatibility\n              setImmediate(fn);\n            };\n        }\n        else {\n            async.setImmediate = async.nextTick;\n        }\n    }\n\n    async.each = function (arr, iterator, callback) {\n        callback = callback || function () {};\n        if (!arr.length) {\n            return callback();\n        }\n        var completed = 0;\n        _each(arr, function (x) {\n            iterator(x, only_once(done) );\n        });\n        function done(err) {\n          if (err) {\n              callback(err);\n              callback = function () {};\n          }\n          else {\n              completed += 1;\n              if (completed >= arr.length) {\n                  callback();\n              }\n          }\n        }\n    };\n    async.forEach = async.each;\n\n    async.eachSeries = function (arr, iterator, callback) {\n        callback = callback || function () {};\n        if (!arr.length) {\n            return callback();\n        }\n        var completed = 0;\n        var iterate = function () {\n            iterator(arr[completed], function (err) {\n                if (err) {\n                    callback(err);\n                    callback = function () {};\n                }\n                else {\n                    completed += 1;\n                    if (completed >= arr.length) {\n                        callback();\n                    }\n                    else {\n                        iterate();\n                    }\n                }\n            });\n        };\n        iterate();\n    };\n    async.forEachSeries = async.eachSeries;\n\n    async.eachLimit = function (arr, limit, iterator, callback) {\n        var fn = _eachLimit(limit);\n        fn.apply(null, [arr, iterator, callback]);\n    };\n    async.forEachLimit = async.eachLimit;\n\n    var _eachLimit = function (limit) {\n\n        return function (arr, iterator, callback) {\n            callback = callback || function () {};\n            if (!arr.length || limit <= 0) {\n                return callback();\n            }\n            var completed = 0;\n            var started = 0;\n            var running = 0;\n\n            (function replenish () {\n                if (completed >= arr.length) {\n                    return callback();\n                }\n\n                while (running < limit && started < arr.length) {\n                    started += 1;\n                    running += 1;\n                    iterator(arr[started - 1], function (err) {\n                        if (err) {\n                            callback(err);\n                            callback = function () {};\n                        }\n                        else {\n                            completed += 1;\n                            running -= 1;\n                            if (completed >= arr.length) {\n                                callback();\n                            }\n                            else {\n                                replenish();\n                            }\n                        }\n                    });\n                }\n            })();\n        };\n    };\n\n\n    var doParallel = function (fn) {\n        return function () {\n            var args = Array.prototype.slice.call(arguments);\n            return fn.apply(null, [async.each].concat(args));\n        };\n    };\n    var doParallelLimit = function(limit, fn) {\n        return function () {\n            var args = Array.prototype.slice.call(arguments);\n            return fn.apply(null, [_eachLimit(limit)].concat(args));\n        };\n    };\n    var doSeries = function (fn) {\n        return function () {\n            var args = Array.prototype.slice.call(arguments);\n            return fn.apply(null, [async.eachSeries].concat(args));\n        };\n    };\n\n\n    var _asyncMap = function (eachfn, arr, iterator, callback) {\n        arr = _map(arr, function (x, i) {\n            return {index: i, value: x};\n        });\n        if (!callback) {\n            eachfn(arr, function (x, callback) {\n                iterator(x.value, function (err) {\n                    callback(err);\n                });\n            });\n        } else {\n            var results = [];\n            eachfn(arr, function (x, callback) {\n                iterator(x.value, function (err, v) {\n                    results[x.index] = v;\n                    callback(err);\n                });\n            }, function (err) {\n                callback(err, results);\n            });\n        }\n    };\n    async.map = doParallel(_asyncMap);\n    async.mapSeries = doSeries(_asyncMap);\n    async.mapLimit = function (arr, limit, iterator, callback) {\n        return _mapLimit(limit)(arr, iterator, callback);\n    };\n\n    var _mapLimit = function(limit) {\n        return doParallelLimit(limit, _asyncMap);\n    };\n\n    // reduce only has a series version, as doing reduce in parallel won't\n    // work in many situations.\n    async.reduce = function (arr, memo, iterator, callback) {\n        async.eachSeries(arr, function (x, callback) {\n            iterator(memo, x, function (err, v) {\n                memo = v;\n                callback(err);\n            });\n        }, function (err) {\n            callback(err, memo);\n        });\n    };\n    // inject alias\n    async.inject = async.reduce;\n    // foldl alias\n    async.foldl = async.reduce;\n\n    async.reduceRight = function (arr, memo, iterator, callback) {\n        var reversed = _map(arr, function (x) {\n            return x;\n        }).reverse();\n        async.reduce(reversed, memo, iterator, callback);\n    };\n    // foldr alias\n    async.foldr = async.reduceRight;\n\n    var _filter = function (eachfn, arr, iterator, callback) {\n        var results = [];\n        arr = _map(arr, function (x, i) {\n            return {index: i, value: x};\n        });\n        eachfn(arr, function (x, callback) {\n            iterator(x.value, function (v) {\n                if (v) {\n                    results.push(x);\n                }\n                callback();\n            });\n        }, function (err) {\n            callback(_map(results.sort(function (a, b) {\n                return a.index - b.index;\n            }), function (x) {\n                return x.value;\n            }));\n        });\n    };\n    async.filter = doParallel(_filter);\n    async.filterSeries = doSeries(_filter);\n    // select alias\n    async.select = async.filter;\n    async.selectSeries = async.filterSeries;\n\n    var _reject = function (eachfn, arr, iterator, callback) {\n        var results = [];\n        arr = _map(arr, function (x, i) {\n            return {index: i, value: x};\n        });\n        eachfn(arr, function (x, callback) {\n            iterator(x.value, function (v) {\n                if (!v) {\n                    results.push(x);\n                }\n                callback();\n            });\n        }, function (err) {\n            callback(_map(results.sort(function (a, b) {\n                return a.index - b.index;\n            }), function (x) {\n                return x.value;\n            }));\n        });\n    };\n    async.reject = doParallel(_reject);\n    async.rejectSeries = doSeries(_reject);\n\n    var _detect = function (eachfn, arr, iterator, main_callback) {\n        eachfn(arr, function (x, callback) {\n            iterator(x, function (result) {\n                if (result) {\n                    main_callback(x);\n                    main_callback = function () {};\n                }\n                else {\n                    callback();\n                }\n            });\n        }, function (err) {\n            main_callback();\n        });\n    };\n    async.detect = doParallel(_detect);\n    async.detectSeries = doSeries(_detect);\n\n    async.some = function (arr, iterator, main_callback) {\n        async.each(arr, function (x, callback) {\n            iterator(x, function (v) {\n                if (v) {\n                    main_callback(true);\n                    main_callback = function () {};\n                }\n                callback();\n            });\n        }, function (err) {\n            main_callback(false);\n        });\n    };\n    // any alias\n    async.any = async.some;\n\n    async.every = function (arr, iterator, main_callback) {\n        async.each(arr, function (x, callback) {\n            iterator(x, function (v) {\n                if (!v) {\n                    main_callback(false);\n                    main_callback = function () {};\n                }\n                callback();\n            });\n        }, function (err) {\n            main_callback(true);\n        });\n    };\n    // all alias\n    async.all = async.every;\n\n    async.sortBy = function (arr, iterator, callback) {\n        async.map(arr, function (x, callback) {\n            iterator(x, function (err, criteria) {\n                if (err) {\n                    callback(err);\n                }\n                else {\n                    callback(null, {value: x, criteria: criteria});\n                }\n            });\n        }, function (err, results) {\n            if (err) {\n                return callback(err);\n            }\n            else {\n                var fn = function (left, right) {\n                    var a = left.criteria, b = right.criteria;\n                    return a < b ? -1 : a > b ? 1 : 0;\n                };\n                callback(null, _map(results.sort(fn), function (x) {\n                    return x.value;\n                }));\n            }\n        });\n    };\n\n    async.auto = function (tasks, callback) {\n        callback = callback || function () {};\n        var keys = _keys(tasks);\n        var remainingTasks = keys.length\n        if (!remainingTasks) {\n            return callback();\n        }\n\n        var results = {};\n\n        var listeners = [];\n        var addListener = function (fn) {\n            listeners.unshift(fn);\n        };\n        var removeListener = function (fn) {\n            for (var i = 0; i < listeners.length; i += 1) {\n                if (listeners[i] === fn) {\n                    listeners.splice(i, 1);\n                    return;\n                }\n            }\n        };\n        var taskComplete = function () {\n            remainingTasks--\n            _each(listeners.slice(0), function (fn) {\n                fn();\n            });\n        };\n\n        addListener(function () {\n            if (!remainingTasks) {\n                var theCallback = callback;\n                // prevent final callback from calling itself if it errors\n                callback = function () {};\n\n                theCallback(null, results);\n            }\n        });\n\n        _each(keys, function (k) {\n            var task = _isArray(tasks[k]) ? tasks[k]: [tasks[k]];\n            var taskCallback = function (err) {\n                var args = Array.prototype.slice.call(arguments, 1);\n                if (args.length <= 1) {\n                    args = args[0];\n                }\n                if (err) {\n                    var safeResults = {};\n                    _each(_keys(results), function(rkey) {\n                        safeResults[rkey] = results[rkey];\n                    });\n                    safeResults[k] = args;\n                    callback(err, safeResults);\n                    // stop subsequent errors hitting callback multiple times\n                    callback = function () {};\n                }\n                else {\n                    results[k] = args;\n                    async.setImmediate(taskComplete);\n                }\n            };\n            var requires = task.slice(0, Math.abs(task.length - 1)) || [];\n            var ready = function () {\n                return _reduce(requires, function (a, x) {\n                    return (a && results.hasOwnProperty(x));\n                }, true) && !results.hasOwnProperty(k);\n            };\n            if (ready()) {\n                task[task.length - 1](taskCallback, results);\n            }\n            else {\n                var listener = function () {\n                    if (ready()) {\n                        removeListener(listener);\n                        task[task.length - 1](taskCallback, results);\n                    }\n                };\n                addListener(listener);\n            }\n        });\n    };\n\n    async.retry = function(times, task, callback) {\n        var DEFAULT_TIMES = 5;\n        var attempts = [];\n        // Use defaults if times not passed\n        if (typeof times === 'function') {\n            callback = task;\n            task = times;\n            times = DEFAULT_TIMES;\n        }\n        // Make sure times is a number\n        times = parseInt(times, 10) || DEFAULT_TIMES;\n        var wrappedTask = function(wrappedCallback, wrappedResults) {\n            var retryAttempt = function(task, finalAttempt) {\n                return function(seriesCallback) {\n                    task(function(err, result){\n                        seriesCallback(!err || finalAttempt, {err: err, result: result});\n                    }, wrappedResults);\n                };\n            };\n            while (times) {\n                attempts.push(retryAttempt(task, !(times-=1)));\n            }\n            async.series(attempts, function(done, data){\n                data = data[data.length - 1];\n                (wrappedCallback || callback)(data.err, data.result);\n            });\n        }\n        // If a callback is passed, run this as a controll flow\n        return callback ? wrappedTask() : wrappedTask\n    };\n\n    async.waterfall = function (tasks, callback) {\n        callback = callback || function () {};\n        if (!_isArray(tasks)) {\n          var err = new Error('First argument to waterfall must be an array of functions');\n          return callback(err);\n        }\n        if (!tasks.length) {\n            return callback();\n        }\n        var wrapIterator = function (iterator) {\n            return function (err) {\n                if (err) {\n                    callback.apply(null, arguments);\n                    callback = function () {};\n                }\n                else {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    var next = iterator.next();\n                    if (next) {\n                        args.push(wrapIterator(next));\n                    }\n                    else {\n                        args.push(callback);\n                    }\n                    async.setImmediate(function () {\n                        iterator.apply(null, args);\n                    });\n                }\n            };\n        };\n        wrapIterator(async.iterator(tasks))();\n    };\n\n    var _parallel = function(eachfn, tasks, callback) {\n        callback = callback || function () {};\n        if (_isArray(tasks)) {\n            eachfn.map(tasks, function (fn, callback) {\n                if (fn) {\n                    fn(function (err) {\n                        var args = Array.prototype.slice.call(arguments, 1);\n                        if (args.length <= 1) {\n                            args = args[0];\n                        }\n                        callback.call(null, err, args);\n                    });\n                }\n            }, callback);\n        }\n        else {\n            var results = {};\n            eachfn.each(_keys(tasks), function (k, callback) {\n                tasks[k](function (err) {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    if (args.length <= 1) {\n                        args = args[0];\n                    }\n                    results[k] = args;\n                    callback(err);\n                });\n            }, function (err) {\n                callback(err, results);\n            });\n        }\n    };\n\n    async.parallel = function (tasks, callback) {\n        _parallel({ map: async.map, each: async.each }, tasks, callback);\n    };\n\n    async.parallelLimit = function(tasks, limit, callback) {\n        _parallel({ map: _mapLimit(limit), each: _eachLimit(limit) }, tasks, callback);\n    };\n\n    async.series = function (tasks, callback) {\n        callback = callback || function () {};\n        if (_isArray(tasks)) {\n            async.mapSeries(tasks, function (fn, callback) {\n                if (fn) {\n                    fn(function (err) {\n                        var args = Array.prototype.slice.call(arguments, 1);\n                        if (args.length <= 1) {\n                            args = args[0];\n                        }\n                        callback.call(null, err, args);\n                    });\n                }\n            }, callback);\n        }\n        else {\n            var results = {};\n            async.eachSeries(_keys(tasks), function (k, callback) {\n                tasks[k](function (err) {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    if (args.length <= 1) {\n                        args = args[0];\n                    }\n                    results[k] = args;\n                    callback(err);\n                });\n            }, function (err) {\n                callback(err, results);\n            });\n        }\n    };\n\n    async.iterator = function (tasks) {\n        var makeCallback = function (index) {\n            var fn = function () {\n                if (tasks.length) {\n                    tasks[index].apply(null, arguments);\n                }\n                return fn.next();\n            };\n            fn.next = function () {\n                return (index < tasks.length - 1) ? makeCallback(index + 1): null;\n            };\n            return fn;\n        };\n        return makeCallback(0);\n    };\n\n    async.apply = function (fn) {\n        var args = Array.prototype.slice.call(arguments, 1);\n        return function () {\n            return fn.apply(\n                null, args.concat(Array.prototype.slice.call(arguments))\n            );\n        };\n    };\n\n    var _concat = function (eachfn, arr, fn, callback) {\n        var r = [];\n        eachfn(arr, function (x, cb) {\n            fn(x, function (err, y) {\n                r = r.concat(y || []);\n                cb(err);\n            });\n        }, function (err) {\n            callback(err, r);\n        });\n    };\n    async.concat = doParallel(_concat);\n    async.concatSeries = doSeries(_concat);\n\n    async.whilst = function (test, iterator, callback) {\n        if (test()) {\n            iterator(function (err) {\n                if (err) {\n                    return callback(err);\n                }\n                async.whilst(test, iterator, callback);\n            });\n        }\n        else {\n            callback();\n        }\n    };\n\n    async.doWhilst = function (iterator, test, callback) {\n        iterator(function (err) {\n            if (err) {\n                return callback(err);\n            }\n            var args = Array.prototype.slice.call(arguments, 1);\n            if (test.apply(null, args)) {\n                async.doWhilst(iterator, test, callback);\n            }\n            else {\n                callback();\n            }\n        });\n    };\n\n    async.until = function (test, iterator, callback) {\n        if (!test()) {\n            iterator(function (err) {\n                if (err) {\n                    return callback(err);\n                }\n                async.until(test, iterator, callback);\n            });\n        }\n        else {\n            callback();\n        }\n    };\n\n    async.doUntil = function (iterator, test, callback) {\n        iterator(function (err) {\n            if (err) {\n                return callback(err);\n            }\n            var args = Array.prototype.slice.call(arguments, 1);\n            if (!test.apply(null, args)) {\n                async.doUntil(iterator, test, callback);\n            }\n            else {\n                callback();\n            }\n        });\n    };\n\n    async.queue = function (worker, concurrency) {\n        if (concurrency === undefined) {\n            concurrency = 1;\n        }\n        function _insert(q, data, pos, callback) {\n          if (!q.started){\n            q.started = true;\n          }\n          if (!_isArray(data)) {\n              data = [data];\n          }\n          if(data.length == 0) {\n             // call drain immediately if there are no tasks\n             return async.setImmediate(function() {\n                 if (q.drain) {\n                     q.drain();\n                 }\n             });\n          }\n          _each(data, function(task) {\n              var item = {\n                  data: task,\n                  callback: typeof callback === 'function' ? callback : null\n              };\n\n              if (pos) {\n                q.tasks.unshift(item);\n              } else {\n                q.tasks.push(item);\n              }\n\n              if (q.saturated && q.tasks.length === q.concurrency) {\n                  q.saturated();\n              }\n              async.setImmediate(q.process);\n          });\n        }\n\n        var workers = 0;\n        var q = {\n            tasks: [],\n            concurrency: concurrency,\n            saturated: null,\n            empty: null,\n            drain: null,\n            started: false,\n            paused: false,\n            push: function (data, callback) {\n              _insert(q, data, false, callback);\n            },\n            kill: function () {\n              q.drain = null;\n              q.tasks = [];\n            },\n            unshift: function (data, callback) {\n              _insert(q, data, true, callback);\n            },\n            process: function () {\n                if (!q.paused && workers < q.concurrency && q.tasks.length) {\n                    var task = q.tasks.shift();\n                    if (q.empty && q.tasks.length === 0) {\n                        q.empty();\n                    }\n                    workers += 1;\n                    var next = function () {\n                        workers -= 1;\n                        if (task.callback) {\n                            task.callback.apply(task, arguments);\n                        }\n                        if (q.drain && q.tasks.length + workers === 0) {\n                            q.drain();\n                        }\n                        q.process();\n                    };\n                    var cb = only_once(next);\n                    worker(task.data, cb);\n                }\n            },\n            length: function () {\n                return q.tasks.length;\n            },\n            running: function () {\n                return workers;\n            },\n            idle: function() {\n                return q.tasks.length + workers === 0;\n            },\n            pause: function () {\n                if (q.paused === true) { return; }\n                q.paused = true;\n                q.process();\n            },\n            resume: function () {\n                if (q.paused === false) { return; }\n                q.paused = false;\n                q.process();\n            }\n        };\n        return q;\n    };\n    \n    async.priorityQueue = function (worker, concurrency) {\n        \n        function _compareTasks(a, b){\n          return a.priority - b.priority;\n        };\n        \n        function _binarySearch(sequence, item, compare) {\n          var beg = -1,\n              end = sequence.length - 1;\n          while (beg < end) {\n            var mid = beg + ((end - beg + 1) >>> 1);\n            if (compare(item, sequence[mid]) >= 0) {\n              beg = mid;\n            } else {\n              end = mid - 1;\n            }\n          }\n          return beg;\n        }\n        \n        function _insert(q, data, priority, callback) {\n          if (!q.started){\n            q.started = true;\n          }\n          if (!_isArray(data)) {\n              data = [data];\n          }\n          if(data.length == 0) {\n             // call drain immediately if there are no tasks\n             return async.setImmediate(function() {\n                 if (q.drain) {\n                     q.drain();\n                 }\n             });\n          }\n          _each(data, function(task) {\n              var item = {\n                  data: task,\n                  priority: priority,\n                  callback: typeof callback === 'function' ? callback : null\n              };\n              \n              q.tasks.splice(_binarySearch(q.tasks, item, _compareTasks) + 1, 0, item);\n\n              if (q.saturated && q.tasks.length === q.concurrency) {\n                  q.saturated();\n              }\n              async.setImmediate(q.process);\n          });\n        }\n        \n        // Start with a normal queue\n        var q = async.queue(worker, concurrency);\n        \n        // Override push to accept second parameter representing priority\n        q.push = function (data, priority, callback) {\n          _insert(q, data, priority, callback);\n        };\n        \n        // Remove unshift function\n        delete q.unshift;\n\n        return q;\n    };\n\n    async.cargo = function (worker, payload) {\n        var working     = false,\n            tasks       = [];\n\n        var cargo = {\n            tasks: tasks,\n            payload: payload,\n            saturated: null,\n            empty: null,\n            drain: null,\n            drained: true,\n            push: function (data, callback) {\n                if (!_isArray(data)) {\n                    data = [data];\n                }\n                _each(data, function(task) {\n                    tasks.push({\n                        data: task,\n                        callback: typeof callback === 'function' ? callback : null\n                    });\n                    cargo.drained = false;\n                    if (cargo.saturated && tasks.length === payload) {\n                        cargo.saturated();\n                    }\n                });\n                async.setImmediate(cargo.process);\n            },\n            process: function process() {\n                if (working) return;\n                if (tasks.length === 0) {\n                    if(cargo.drain && !cargo.drained) cargo.drain();\n                    cargo.drained = true;\n                    return;\n                }\n\n                var ts = typeof payload === 'number'\n                            ? tasks.splice(0, payload)\n                            : tasks.splice(0, tasks.length);\n\n                var ds = _map(ts, function (task) {\n                    return task.data;\n                });\n\n                if(cargo.empty) cargo.empty();\n                working = true;\n                worker(ds, function () {\n                    working = false;\n\n                    var args = arguments;\n                    _each(ts, function (data) {\n                        if (data.callback) {\n                            data.callback.apply(null, args);\n                        }\n                    });\n\n                    process();\n                });\n            },\n            length: function () {\n                return tasks.length;\n            },\n            running: function () {\n                return working;\n            }\n        };\n        return cargo;\n    };\n\n    var _console_fn = function (name) {\n        return function (fn) {\n            var args = Array.prototype.slice.call(arguments, 1);\n            fn.apply(null, args.concat([function (err) {\n                var args = Array.prototype.slice.call(arguments, 1);\n                if (typeof console !== 'undefined') {\n                    if (err) {\n                        if (console.error) {\n                            console.error(err);\n                        }\n                    }\n                    else if (console[name]) {\n                        _each(args, function (x) {\n                            console[name](x);\n                        });\n                    }\n                }\n            }]));\n        };\n    };\n    async.log = _console_fn('log');\n    async.dir = _console_fn('dir');\n    /*async.info = _console_fn('info');\n    async.warn = _console_fn('warn');\n    async.error = _console_fn('error');*/\n\n    async.memoize = function (fn, hasher) {\n        var memo = {};\n        var queues = {};\n        hasher = hasher || function (x) {\n            return x;\n        };\n        var memoized = function () {\n            var args = Array.prototype.slice.call(arguments);\n            var callback = args.pop();\n            var key = hasher.apply(null, args);\n            if (key in memo) {\n                async.nextTick(function () {\n                    callback.apply(null, memo[key]);\n                });\n            }\n            else if (key in queues) {\n                queues[key].push(callback);\n            }\n            else {\n                queues[key] = [callback];\n                fn.apply(null, args.concat([function () {\n                    memo[key] = arguments;\n                    var q = queues[key];\n                    delete queues[key];\n                    for (var i = 0, l = q.length; i < l; i++) {\n                      q[i].apply(null, arguments);\n                    }\n                }]));\n            }\n        };\n        memoized.memo = memo;\n        memoized.unmemoized = fn;\n        return memoized;\n    };\n\n    async.unmemoize = function (fn) {\n      return function () {\n        return (fn.unmemoized || fn).apply(null, arguments);\n      };\n    };\n\n    async.times = function (count, iterator, callback) {\n        var counter = [];\n        for (var i = 0; i < count; i++) {\n            counter.push(i);\n        }\n        return async.map(counter, iterator, callback);\n    };\n\n    async.timesSeries = function (count, iterator, callback) {\n        var counter = [];\n        for (var i = 0; i < count; i++) {\n            counter.push(i);\n        }\n        return async.mapSeries(counter, iterator, callback);\n    };\n\n    async.seq = function (/* functions... */) {\n        var fns = arguments;\n        return function () {\n            var that = this;\n            var args = Array.prototype.slice.call(arguments);\n            var callback = args.pop();\n            async.reduce(fns, args, function (newargs, fn, cb) {\n                fn.apply(that, newargs.concat([function () {\n                    var err = arguments[0];\n                    var nextargs = Array.prototype.slice.call(arguments, 1);\n                    cb(err, nextargs);\n                }]))\n            },\n            function (err, results) {\n                callback.apply(that, [err].concat(results));\n            });\n        };\n    };\n\n    async.compose = function (/* functions... */) {\n      return async.seq.apply(null, Array.prototype.reverse.call(arguments));\n    };\n\n    var _applyEach = function (eachfn, fns /*args...*/) {\n        var go = function () {\n            var that = this;\n            var args = Array.prototype.slice.call(arguments);\n            var callback = args.pop();\n            return eachfn(fns, function (fn, cb) {\n                fn.apply(that, args.concat([cb]));\n            },\n            callback);\n        };\n        if (arguments.length > 2) {\n            var args = Array.prototype.slice.call(arguments, 2);\n            return go.apply(this, args);\n        }\n        else {\n            return go;\n        }\n    };\n    async.applyEach = doParallel(_applyEach);\n    async.applyEachSeries = doSeries(_applyEach);\n\n    async.forever = function (fn, callback) {\n        function next(err) {\n            if (err) {\n                if (callback) {\n                    return callback(err);\n                }\n                throw err;\n            }\n            fn(next);\n        }\n        next();\n    };\n\n    // Node.js\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = async;\n    }\n    // AMD / RequireJS\n    else if (typeof define !== 'undefined' && define.amd) {\n        define([], function () {\n            return async;\n        });\n    }\n    // included directly via <script> tag\n    else {\n        root.async = async;\n    }\n\n}());\n\n}\n, \"ep_etherpad-lite/static/js/underscore.js\": function (require, exports, module) {\nmodule.exports = require('underscore');\n\n}\n, \"underscore.js\": null\n, \"underscore/underscore.js\": function (require, exports, module) {\n//     Underscore.js 1.8.3\n//     http://underscorejs.org\n//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Underscore may be freely distributed under the MIT license.\n\n(function() {\n\n  // Baseline setup\n  // --------------\n\n  // Establish the root object, `window` in the browser, or `exports` on the server.\n  var root = this;\n\n  // Save the previous value of the `_` variable.\n  var previousUnderscore = root._;\n\n  // Save bytes in the minified (but not gzipped) version:\n  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;\n\n  // Create quick reference variables for speed access to core prototypes.\n  var\n    push             = ArrayProto.push,\n    slice            = ArrayProto.slice,\n    toString         = ObjProto.toString,\n    hasOwnProperty   = ObjProto.hasOwnProperty;\n\n  // All **ECMAScript 5** native function implementations that we hope to use\n  // are declared here.\n  var\n    nativeIsArray      = Array.isArray,\n    nativeKeys         = Object.keys,\n    nativeBind         = FuncProto.bind,\n    nativeCreate       = Object.create;\n\n  // Naked function reference for surrogate-prototype-swapping.\n  var Ctor = function(){};\n\n  // Create a safe reference to the Underscore object for use below.\n  var _ = function(obj) {\n    if (obj instanceof _) return obj;\n    if (!(this instanceof _)) return new _(obj);\n    this._wrapped = obj;\n  };\n\n  // Export the Underscore object for **Node.js**, with\n  // backwards-compatibility for the old `require()` API. If we're in\n  // the browser, add `_` as a global object.\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = _;\n    }\n    exports._ = _;\n  } else {\n    root._ = _;\n  }\n\n  // Current version.\n  _.VERSION = '1.8.3';\n\n  // Internal function that returns an efficient (for current engines) version\n  // of the passed-in callback, to be repeatedly applied in other Underscore\n  // functions.\n  var optimizeCb = function(func, context, argCount) {\n    if (context === void 0) return func;\n    switch (argCount == null ? 3 : argCount) {\n      case 1: return function(value) {\n        return func.call(context, value);\n      };\n      case 2: return function(value, other) {\n        return func.call(context, value, other);\n      };\n      case 3: return function(value, index, collection) {\n        return func.call(context, value, index, collection);\n      };\n      case 4: return function(accumulator, value, index, collection) {\n        return func.call(context, accumulator, value, index, collection);\n      };\n    }\n    return function() {\n      return func.apply(context, arguments);\n    };\n  };\n\n  // A mostly-internal function to generate callbacks that can be applied\n  // to each element in a collection, returning the desired result — either\n  // identity, an arbitrary callback, a property matcher, or a property accessor.\n  var cb = function(value, context, argCount) {\n    if (value == null) return _.identity;\n    if (_.isFunction(value)) return optimizeCb(value, context, argCount);\n    if (_.isObject(value)) return _.matcher(value);\n    return _.property(value);\n  };\n  _.iteratee = function(value, context) {\n    return cb(value, context, Infinity);\n  };\n\n  // An internal function for creating assigner functions.\n  var createAssigner = function(keysFunc, undefinedOnly) {\n    return function(obj) {\n      var length = arguments.length;\n      if (length < 2 || obj == null) return obj;\n      for (var index = 1; index < length; index++) {\n        var source = arguments[index],\n            keys = keysFunc(source),\n            l = keys.length;\n        for (var i = 0; i < l; i++) {\n          var key = keys[i];\n          if (!undefinedOnly || obj[key] === void 0) obj[key] = source[key];\n        }\n      }\n      return obj;\n    };\n  };\n\n  // An internal function for creating a new object that inherits from another.\n  var baseCreate = function(prototype) {\n    if (!_.isObject(prototype)) return {};\n    if (nativeCreate) return nativeCreate(prototype);\n    Ctor.prototype = prototype;\n    var result = new Ctor;\n    Ctor.prototype = null;\n    return result;\n  };\n\n  var property = function(key) {\n    return function(obj) {\n      return obj == null ? void 0 : obj[key];\n    };\n  };\n\n  // Helper for collection methods to determine whether a collection\n  // should be iterated as an array or as an object\n  // Related: http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n  // Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\n  var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n  var getLength = property('length');\n  var isArrayLike = function(collection) {\n    var length = getLength(collection);\n    return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\n  };\n\n  // Collection Functions\n  // --------------------\n\n  // The cornerstone, an `each` implementation, aka `forEach`.\n  // Handles raw objects in addition to array-likes. Treats all\n  // sparse array-likes as if they were dense.\n  _.each = _.forEach = function(obj, iteratee, context) {\n    iteratee = optimizeCb(iteratee, context);\n    var i, length;\n    if (isArrayLike(obj)) {\n      for (i = 0, length = obj.length; i < length; i++) {\n        iteratee(obj[i], i, obj);\n      }\n    } else {\n      var keys = _.keys(obj);\n      for (i = 0, length = keys.length; i < length; i++) {\n        iteratee(obj[keys[i]], keys[i], obj);\n      }\n    }\n    return obj;\n  };\n\n  // Return the results of applying the iteratee to each element.\n  _.map = _.collect = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length,\n        results = Array(length);\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      results[index] = iteratee(obj[currentKey], currentKey, obj);\n    }\n    return results;\n  };\n\n  // Create a reducing function iterating left or right.\n  function createReduce(dir) {\n    // Optimized iterator function as using arguments.length\n    // in the main function will deoptimize the, see #1991.\n    function iterator(obj, iteratee, memo, keys, index, length) {\n      for (; index >= 0 && index < length; index += dir) {\n        var currentKey = keys ? keys[index] : index;\n        memo = iteratee(memo, obj[currentKey], currentKey, obj);\n      }\n      return memo;\n    }\n\n    return function(obj, iteratee, memo, context) {\n      iteratee = optimizeCb(iteratee, context, 4);\n      var keys = !isArrayLike(obj) && _.keys(obj),\n          length = (keys || obj).length,\n          index = dir > 0 ? 0 : length - 1;\n      // Determine the initial value if none is provided.\n      if (arguments.length < 3) {\n        memo = obj[keys ? keys[index] : index];\n        index += dir;\n      }\n      return iterator(obj, iteratee, memo, keys, index, length);\n    };\n  }\n\n  // **Reduce** builds up a single result from a list of values, aka `inject`,\n  // or `foldl`.\n  _.reduce = _.foldl = _.inject = createReduce(1);\n\n  // The right-associative version of reduce, also known as `foldr`.\n  _.reduceRight = _.foldr = createReduce(-1);\n\n  // Return the first value which passes a truth test. Aliased as `detect`.\n  _.find = _.detect = function(obj, predicate, context) {\n    var key;\n    if (isArrayLike(obj)) {\n      key = _.findIndex(obj, predicate, context);\n    } else {\n      key = _.findKey(obj, predicate, context);\n    }\n    if (key !== void 0 && key !== -1) return obj[key];\n  };\n\n  // Return all the elements that pass a truth test.\n  // Aliased as `select`.\n  _.filter = _.select = function(obj, predicate, context) {\n    var results = [];\n    predicate = cb(predicate, context);\n    _.each(obj, function(value, index, list) {\n      if (predicate(value, index, list)) results.push(value);\n    });\n    return results;\n  };\n\n  // Return all the elements for which a truth test fails.\n  _.reject = function(obj, predicate, context) {\n    return _.filter(obj, _.negate(cb(predicate)), context);\n  };\n\n  // Determine whether all of the elements match a truth test.\n  // Aliased as `all`.\n  _.every = _.all = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (!predicate(obj[currentKey], currentKey, obj)) return false;\n    }\n    return true;\n  };\n\n  // Determine if at least one element in the object matches a truth test.\n  // Aliased as `any`.\n  _.some = _.any = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (predicate(obj[currentKey], currentKey, obj)) return true;\n    }\n    return false;\n  };\n\n  // Determine if the array or object contains a given item (using `===`).\n  // Aliased as `includes` and `include`.\n  _.contains = _.includes = _.include = function(obj, item, fromIndex, guard) {\n    if (!isArrayLike(obj)) obj = _.values(obj);\n    if (typeof fromIndex != 'number' || guard) fromIndex = 0;\n    return _.indexOf(obj, item, fromIndex) >= 0;\n  };\n\n  // Invoke a method (with arguments) on every item in a collection.\n  _.invoke = function(obj, method) {\n    var args = slice.call(arguments, 2);\n    var isFunc = _.isFunction(method);\n    return _.map(obj, function(value) {\n      var func = isFunc ? method : value[method];\n      return func == null ? func : func.apply(value, args);\n    });\n  };\n\n  // Convenience version of a common use case of `map`: fetching a property.\n  _.pluck = function(obj, key) {\n    return _.map(obj, _.property(key));\n  };\n\n  // Convenience version of a common use case of `filter`: selecting only objects\n  // containing specific `key:value` pairs.\n  _.where = function(obj, attrs) {\n    return _.filter(obj, _.matcher(attrs));\n  };\n\n  // Convenience version of a common use case of `find`: getting the first object\n  // containing specific `key:value` pairs.\n  _.findWhere = function(obj, attrs) {\n    return _.find(obj, _.matcher(attrs));\n  };\n\n  // Return the maximum element (or element-based computation).\n  _.max = function(obj, iteratee, context) {\n    var result = -Infinity, lastComputed = -Infinity,\n        value, computed;\n    if (iteratee == null && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value > result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index, list) {\n        computed = iteratee(value, index, list);\n        if (computed > lastComputed || computed === -Infinity && result === -Infinity) {\n          result = value;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Return the minimum element (or element-based computation).\n  _.min = function(obj, iteratee, context) {\n    var result = Infinity, lastComputed = Infinity,\n        value, computed;\n    if (iteratee == null && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value < result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index, list) {\n        computed = iteratee(value, index, list);\n        if (computed < lastComputed || computed === Infinity && result === Infinity) {\n          result = value;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Shuffle a collection, using the modern version of the\n  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher–Yates_shuffle).\n  _.shuffle = function(obj) {\n    var set = isArrayLike(obj) ? obj : _.values(obj);\n    var length = set.length;\n    var shuffled = Array(length);\n    for (var index = 0, rand; index < length; index++) {\n      rand = _.random(0, index);\n      if (rand !== index) shuffled[index] = shuffled[rand];\n      shuffled[rand] = set[index];\n    }\n    return shuffled;\n  };\n\n  // Sample **n** random values from a collection.\n  // If **n** is not specified, returns a single random element.\n  // The internal `guard` argument allows it to work with `map`.\n  _.sample = function(obj, n, guard) {\n    if (n == null || guard) {\n      if (!isArrayLike(obj)) obj = _.values(obj);\n      return obj[_.random(obj.length - 1)];\n    }\n    return _.shuffle(obj).slice(0, Math.max(0, n));\n  };\n\n  // Sort the object's values by a criterion produced by an iteratee.\n  _.sortBy = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    return _.pluck(_.map(obj, function(value, index, list) {\n      return {\n        value: value,\n        index: index,\n        criteria: iteratee(value, index, list)\n      };\n    }).sort(function(left, right) {\n      var a = left.criteria;\n      var b = right.criteria;\n      if (a !== b) {\n        if (a > b || a === void 0) return 1;\n        if (a < b || b === void 0) return -1;\n      }\n      return left.index - right.index;\n    }), 'value');\n  };\n\n  // An internal function used for aggregate \"group by\" operations.\n  var group = function(behavior) {\n    return function(obj, iteratee, context) {\n      var result = {};\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index) {\n        var key = iteratee(value, index, obj);\n        behavior(result, value, key);\n      });\n      return result;\n    };\n  };\n\n  // Groups the object's values by a criterion. Pass either a string attribute\n  // to group by, or a function that returns the criterion.\n  _.groupBy = group(function(result, value, key) {\n    if (_.has(result, key)) result[key].push(value); else result[key] = [value];\n  });\n\n  // Indexes the object's values by a criterion, similar to `groupBy`, but for\n  // when you know that your index values will be unique.\n  _.indexBy = group(function(result, value, key) {\n    result[key] = value;\n  });\n\n  // Counts instances of an object that group by a certain criterion. Pass\n  // either a string attribute to count by, or a function that returns the\n  // criterion.\n  _.countBy = group(function(result, value, key) {\n    if (_.has(result, key)) result[key]++; else result[key] = 1;\n  });\n\n  // Safely create a real, live array from anything iterable.\n  _.toArray = function(obj) {\n    if (!obj) return [];\n    if (_.isArray(obj)) return slice.call(obj);\n    if (isArrayLike(obj)) return _.map(obj, _.identity);\n    return _.values(obj);\n  };\n\n  // Return the number of elements in an object.\n  _.size = function(obj) {\n    if (obj == null) return 0;\n    return isArrayLike(obj) ? obj.length : _.keys(obj).length;\n  };\n\n  // Split a collection into two arrays: one whose elements all satisfy the given\n  // predicate, and one whose elements all do not satisfy the predicate.\n  _.partition = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var pass = [], fail = [];\n    _.each(obj, function(value, key, obj) {\n      (predicate(value, key, obj) ? pass : fail).push(value);\n    });\n    return [pass, fail];\n  };\n\n  // Array Functions\n  // ---------------\n\n  // Get the first element of an array. Passing **n** will return the first N\n  // values in the array. Aliased as `head` and `take`. The **guard** check\n  // allows it to work with `_.map`.\n  _.first = _.head = _.take = function(array, n, guard) {\n    if (array == null) return void 0;\n    if (n == null || guard) return array[0];\n    return _.initial(array, array.length - n);\n  };\n\n  // Returns everything but the last entry of the array. Especially useful on\n  // the arguments object. Passing **n** will return all the values in\n  // the array, excluding the last N.\n  _.initial = function(array, n, guard) {\n    return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n  };\n\n  // Get the last element of an array. Passing **n** will return the last N\n  // values in the array.\n  _.last = function(array, n, guard) {\n    if (array == null) return void 0;\n    if (n == null || guard) return array[array.length - 1];\n    return _.rest(array, Math.max(0, array.length - n));\n  };\n\n  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.\n  // Especially useful on the arguments object. Passing an **n** will return\n  // the rest N values in the array.\n  _.rest = _.tail = _.drop = function(array, n, guard) {\n    return slice.call(array, n == null || guard ? 1 : n);\n  };\n\n  // Trim out all falsy values from an array.\n  _.compact = function(array) {\n    return _.filter(array, _.identity);\n  };\n\n  // Internal implementation of a recursive `flatten` function.\n  var flatten = function(input, shallow, strict, startIndex) {\n    var output = [], idx = 0;\n    for (var i = startIndex || 0, length = getLength(input); i < length; i++) {\n      var value = input[i];\n      if (isArrayLike(value) && (_.isArray(value) || _.isArguments(value))) {\n        //flatten current level of array or arguments object\n        if (!shallow) value = flatten(value, shallow, strict);\n        var j = 0, len = value.length;\n        output.length += len;\n        while (j < len) {\n          output[idx++] = value[j++];\n        }\n      } else if (!strict) {\n        output[idx++] = value;\n      }\n    }\n    return output;\n  };\n\n  // Flatten out an array, either recursively (by default), or just one level.\n  _.flatten = function(array, shallow) {\n    return flatten(array, shallow, false);\n  };\n\n  // Return a version of the array that does not contain the specified value(s).\n  _.without = function(array) {\n    return _.difference(array, slice.call(arguments, 1));\n  };\n\n  // Produce a duplicate-free version of the array. If the array has already\n  // been sorted, you have the option of using a faster algorithm.\n  // Aliased as `unique`.\n  _.uniq = _.unique = function(array, isSorted, iteratee, context) {\n    if (!_.isBoolean(isSorted)) {\n      context = iteratee;\n      iteratee = isSorted;\n      isSorted = false;\n    }\n    if (iteratee != null) iteratee = cb(iteratee, context);\n    var result = [];\n    var seen = [];\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var value = array[i],\n          computed = iteratee ? iteratee(value, i, array) : value;\n      if (isSorted) {\n        if (!i || seen !== computed) result.push(value);\n        seen = computed;\n      } else if (iteratee) {\n        if (!_.contains(seen, computed)) {\n          seen.push(computed);\n          result.push(value);\n        }\n      } else if (!_.contains(result, value)) {\n        result.push(value);\n      }\n    }\n    return result;\n  };\n\n  // Produce an array that contains the union: each distinct element from all of\n  // the passed-in arrays.\n  _.union = function() {\n    return _.uniq(flatten(arguments, true, true));\n  };\n\n  // Produce an array that contains every item shared between all the\n  // passed-in arrays.\n  _.intersection = function(array) {\n    var result = [];\n    var argsLength = arguments.length;\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var item = array[i];\n      if (_.contains(result, item)) continue;\n      for (var j = 1; j < argsLength; j++) {\n        if (!_.contains(arguments[j], item)) break;\n      }\n      if (j === argsLength) result.push(item);\n    }\n    return result;\n  };\n\n  // Take the difference between one array and a number of other arrays.\n  // Only the elements present in just the first array will remain.\n  _.difference = function(array) {\n    var rest = flatten(arguments, true, true, 1);\n    return _.filter(array, function(value){\n      return !_.contains(rest, value);\n    });\n  };\n\n  // Zip together multiple lists into a single array -- elements that share\n  // an index go together.\n  _.zip = function() {\n    return _.unzip(arguments);\n  };\n\n  // Complement of _.zip. Unzip accepts an array of arrays and groups\n  // each array's elements on shared indices\n  _.unzip = function(array) {\n    var length = array && _.max(array, getLength).length || 0;\n    var result = Array(length);\n\n    for (var index = 0; index < length; index++) {\n      result[index] = _.pluck(array, index);\n    }\n    return result;\n  };\n\n  // Converts lists into objects. Pass either a single array of `[key, value]`\n  // pairs, or two parallel arrays of the same length -- one of keys, and one of\n  // the corresponding values.\n  _.object = function(list, values) {\n    var result = {};\n    for (var i = 0, length = getLength(list); i < length; i++) {\n      if (values) {\n        result[list[i]] = values[i];\n      } else {\n        result[list[i][0]] = list[i][1];\n      }\n    }\n    return result;\n  };\n\n  // Generator function to create the findIndex and findLastIndex functions\n  function createPredicateIndexFinder(dir) {\n    return function(array, predicate, context) {\n      predicate = cb(predicate, context);\n      var length = getLength(array);\n      var index = dir > 0 ? 0 : length - 1;\n      for (; index >= 0 && index < length; index += dir) {\n        if (predicate(array[index], index, array)) return index;\n      }\n      return -1;\n    };\n  }\n\n  // Returns the first index on an array-like that passes a predicate test\n  _.findIndex = createPredicateIndexFinder(1);\n  _.findLastIndex = createPredicateIndexFinder(-1);\n\n  // Use a comparator function to figure out the smallest index at which\n  // an object should be inserted so as to maintain order. Uses binary search.\n  _.sortedIndex = function(array, obj, iteratee, context) {\n    iteratee = cb(iteratee, context, 1);\n    var value = iteratee(obj);\n    var low = 0, high = getLength(array);\n    while (low < high) {\n      var mid = Math.floor((low + high) / 2);\n      if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n    }\n    return low;\n  };\n\n  // Generator function to create the indexOf and lastIndexOf functions\n  function createIndexFinder(dir, predicateFind, sortedIndex) {\n    return function(array, item, idx) {\n      var i = 0, length = getLength(array);\n      if (typeof idx == 'number') {\n        if (dir > 0) {\n            i = idx >= 0 ? idx : Math.max(idx + length, i);\n        } else {\n            length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\n        }\n      } else if (sortedIndex && idx && length) {\n        idx = sortedIndex(array, item);\n        return array[idx] === item ? idx : -1;\n      }\n      if (item !== item) {\n        idx = predicateFind(slice.call(array, i, length), _.isNaN);\n        return idx >= 0 ? idx + i : -1;\n      }\n      for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\n        if (array[idx] === item) return idx;\n      }\n      return -1;\n    };\n  }\n\n  // Return the position of the first occurrence of an item in an array,\n  // or -1 if the item is not included in the array.\n  // If the array is large and already in sort order, pass `true`\n  // for **isSorted** to use binary search.\n  _.indexOf = createIndexFinder(1, _.findIndex, _.sortedIndex);\n  _.lastIndexOf = createIndexFinder(-1, _.findLastIndex);\n\n  // Generate an integer Array containing an arithmetic progression. A port of\n  // the native Python `range()` function. See\n  // [the Python documentation](http://docs.python.org/library/functions.html#range).\n  _.range = function(start, stop, step) {\n    if (stop == null) {\n      stop = start || 0;\n      start = 0;\n    }\n    step = step || 1;\n\n    var length = Math.max(Math.ceil((stop - start) / step), 0);\n    var range = Array(length);\n\n    for (var idx = 0; idx < length; idx++, start += step) {\n      range[idx] = start;\n    }\n\n    return range;\n  };\n\n  // Function (ahem) Functions\n  // ------------------\n\n  // Determines whether to execute a function as a constructor\n  // or a normal function with the provided arguments\n  var executeBound = function(sourceFunc, boundFunc, context, callingContext, args) {\n    if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n    var self = baseCreate(sourceFunc.prototype);\n    var result = sourceFunc.apply(self, args);\n    if (_.isObject(result)) return result;\n    return self;\n  };\n\n  // Create a function bound to a given object (assigning `this`, and arguments,\n  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if\n  // available.\n  _.bind = function(func, context) {\n    if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));\n    if (!_.isFunction(func)) throw new TypeError('Bind must be called on a function');\n    var args = slice.call(arguments, 2);\n    var bound = function() {\n      return executeBound(func, bound, context, this, args.concat(slice.call(arguments)));\n    };\n    return bound;\n  };\n\n  // Partially apply a function by creating a version that has had some of its\n  // arguments pre-filled, without changing its dynamic `this` context. _ acts\n  // as a placeholder, allowing any combination of arguments to be pre-filled.\n  _.partial = function(func) {\n    var boundArgs = slice.call(arguments, 1);\n    var bound = function() {\n      var position = 0, length = boundArgs.length;\n      var args = Array(length);\n      for (var i = 0; i < length; i++) {\n        args[i] = boundArgs[i] === _ ? arguments[position++] : boundArgs[i];\n      }\n      while (position < arguments.length) args.push(arguments[position++]);\n      return executeBound(func, bound, this, this, args);\n    };\n    return bound;\n  };\n\n  // Bind a number of an object's methods to that object. Remaining arguments\n  // are the method names to be bound. Useful for ensuring that all callbacks\n  // defined on an object belong to it.\n  _.bindAll = function(obj) {\n    var i, length = arguments.length, key;\n    if (length <= 1) throw new Error('bindAll must be passed function names');\n    for (i = 1; i < length; i++) {\n      key = arguments[i];\n      obj[key] = _.bind(obj[key], obj);\n    }\n    return obj;\n  };\n\n  // Memoize an expensive function by storing its results.\n  _.memoize = function(func, hasher) {\n    var memoize = function(key) {\n      var cache = memoize.cache;\n      var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n      if (!_.has(cache, address)) cache[address] = func.apply(this, arguments);\n      return cache[address];\n    };\n    memoize.cache = {};\n    return memoize;\n  };\n\n  // Delays a function for the given number of milliseconds, and then calls\n  // it with the arguments supplied.\n  _.delay = function(func, wait) {\n    var args = slice.call(arguments, 2);\n    return setTimeout(function(){\n      return func.apply(null, args);\n    }, wait);\n  };\n\n  // Defers a function, scheduling it to run after the current call stack has\n  // cleared.\n  _.defer = _.partial(_.delay, _, 1);\n\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time. Normally, the throttled function will run\n  // as much as it can, without ever going more than once per `wait` duration;\n  // but if you'd like to disable the execution on the leading edge, pass\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\n  _.throttle = function(func, wait, options) {\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    if (!options) options = {};\n    var later = function() {\n      previous = options.leading === false ? 0 : _.now();\n      timeout = null;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    };\n    return function() {\n      var now = _.now();\n      if (!previous && options.leading === false) previous = now;\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0 || remaining > wait) {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n        previous = now;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  };\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds. If `immediate` is passed, trigger the function on the\n  // leading edge, instead of the trailing.\n  _.debounce = function(func, wait, immediate) {\n    var timeout, args, context, timestamp, result;\n\n    var later = function() {\n      var last = _.now() - timestamp;\n\n      if (last < wait && last >= 0) {\n        timeout = setTimeout(later, wait - last);\n      } else {\n        timeout = null;\n        if (!immediate) {\n          result = func.apply(context, args);\n          if (!timeout) context = args = null;\n        }\n      }\n    };\n\n    return function() {\n      context = this;\n      args = arguments;\n      timestamp = _.now();\n      var callNow = immediate && !timeout;\n      if (!timeout) timeout = setTimeout(later, wait);\n      if (callNow) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n\n      return result;\n    };\n  };\n\n  // Returns the first function passed as an argument to the second,\n  // allowing you to adjust arguments, run code before and after, and\n  // conditionally execute the original function.\n  _.wrap = function(func, wrapper) {\n    return _.partial(wrapper, func);\n  };\n\n  // Returns a negated version of the passed-in predicate.\n  _.negate = function(predicate) {\n    return function() {\n      return !predicate.apply(this, arguments);\n    };\n  };\n\n  // Returns a function that is the composition of a list of functions, each\n  // consuming the return value of the function that follows.\n  _.compose = function() {\n    var args = arguments;\n    var start = args.length - 1;\n    return function() {\n      var i = start;\n      var result = args[start].apply(this, arguments);\n      while (i--) result = args[i].call(this, result);\n      return result;\n    };\n  };\n\n  // Returns a function that will only be executed on and after the Nth call.\n  _.after = function(times, func) {\n    return function() {\n      if (--times < 1) {\n        return func.apply(this, arguments);\n      }\n    };\n  };\n\n  // Returns a function that will only be executed up to (but not including) the Nth call.\n  _.before = function(times, func) {\n    var memo;\n    return function() {\n      if (--times > 0) {\n        memo = func.apply(this, arguments);\n      }\n      if (times <= 1) func = null;\n      return memo;\n    };\n  };\n\n  // Returns a function that will be executed at most one time, no matter how\n  // often you call it. Useful for lazy initialization.\n  _.once = _.partial(_.before, 2);\n\n  // Object Functions\n  // ----------------\n\n  // Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\n  var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\n  var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n                      'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n  function collectNonEnumProps(obj, keys) {\n    var nonEnumIdx = nonEnumerableProps.length;\n    var constructor = obj.constructor;\n    var proto = (_.isFunction(constructor) && constructor.prototype) || ObjProto;\n\n    // Constructor is a special case.\n    var prop = 'constructor';\n    if (_.has(obj, prop) && !_.contains(keys, prop)) keys.push(prop);\n\n    while (nonEnumIdx--) {\n      prop = nonEnumerableProps[nonEnumIdx];\n      if (prop in obj && obj[prop] !== proto[prop] && !_.contains(keys, prop)) {\n        keys.push(prop);\n      }\n    }\n  }\n\n  // Retrieve the names of an object's own properties.\n  // Delegates to **ECMAScript 5**'s native `Object.keys`\n  _.keys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    if (nativeKeys) return nativeKeys(obj);\n    var keys = [];\n    for (var key in obj) if (_.has(obj, key)) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve all the property names of an object.\n  _.allKeys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    var keys = [];\n    for (var key in obj) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve the values of an object's properties.\n  _.values = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var values = Array(length);\n    for (var i = 0; i < length; i++) {\n      values[i] = obj[keys[i]];\n    }\n    return values;\n  };\n\n  // Returns the results of applying the iteratee to each element of the object\n  // In contrast to _.map it returns an object\n  _.mapObject = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys =  _.keys(obj),\n          length = keys.length,\n          results = {},\n          currentKey;\n      for (var index = 0; index < length; index++) {\n        currentKey = keys[index];\n        results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n      }\n      return results;\n  };\n\n  // Convert an object into a list of `[key, value]` pairs.\n  _.pairs = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var pairs = Array(length);\n    for (var i = 0; i < length; i++) {\n      pairs[i] = [keys[i], obj[keys[i]]];\n    }\n    return pairs;\n  };\n\n  // Invert the keys and values of an object. The values must be serializable.\n  _.invert = function(obj) {\n    var result = {};\n    var keys = _.keys(obj);\n    for (var i = 0, length = keys.length; i < length; i++) {\n      result[obj[keys[i]]] = keys[i];\n    }\n    return result;\n  };\n\n  // Return a sorted list of the function names available on the object.\n  // Aliased as `methods`\n  _.functions = _.methods = function(obj) {\n    var names = [];\n    for (var key in obj) {\n      if (_.isFunction(obj[key])) names.push(key);\n    }\n    return names.sort();\n  };\n\n  // Extend a given object with all the properties in passed-in object(s).\n  _.extend = createAssigner(_.allKeys);\n\n  // Assigns a given object with all the own properties in the passed-in object(s)\n  // (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\n  _.extendOwn = _.assign = createAssigner(_.keys);\n\n  // Returns the first key on an object that passes a predicate test\n  _.findKey = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = _.keys(obj), key;\n    for (var i = 0, length = keys.length; i < length; i++) {\n      key = keys[i];\n      if (predicate(obj[key], key, obj)) return key;\n    }\n  };\n\n  // Return a copy of the object only containing the whitelisted properties.\n  _.pick = function(object, oiteratee, context) {\n    var result = {}, obj = object, iteratee, keys;\n    if (obj == null) return result;\n    if (_.isFunction(oiteratee)) {\n      keys = _.allKeys(obj);\n      iteratee = optimizeCb(oiteratee, context);\n    } else {\n      keys = flatten(arguments, false, false, 1);\n      iteratee = function(value, key, obj) { return key in obj; };\n      obj = Object(obj);\n    }\n    for (var i = 0, length = keys.length; i < length; i++) {\n      var key = keys[i];\n      var value = obj[key];\n      if (iteratee(value, key, obj)) result[key] = value;\n    }\n    return result;\n  };\n\n   // Return a copy of the object without the blacklisted properties.\n  _.omit = function(obj, iteratee, context) {\n    if (_.isFunction(iteratee)) {\n      iteratee = _.negate(iteratee);\n    } else {\n      var keys = _.map(flatten(arguments, false, false, 1), String);\n      iteratee = function(value, key) {\n        return !_.contains(keys, key);\n      };\n    }\n    return _.pick(obj, iteratee, context);\n  };\n\n  // Fill in a given object with default properties.\n  _.defaults = createAssigner(_.allKeys, true);\n\n  // Creates an object that inherits from the given prototype object.\n  // If additional properties are provided then they will be added to the\n  // created object.\n  _.create = function(prototype, props) {\n    var result = baseCreate(prototype);\n    if (props) _.extendOwn(result, props);\n    return result;\n  };\n\n  // Create a (shallow-cloned) duplicate of an object.\n  _.clone = function(obj) {\n    if (!_.isObject(obj)) return obj;\n    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);\n  };\n\n  // Invokes interceptor with the obj, and then returns obj.\n  // The primary purpose of this method is to \"tap into\" a method chain, in\n  // order to perform operations on intermediate results within the chain.\n  _.tap = function(obj, interceptor) {\n    interceptor(obj);\n    return obj;\n  };\n\n  // Returns whether an object has a given set of `key:value` pairs.\n  _.isMatch = function(object, attrs) {\n    var keys = _.keys(attrs), length = keys.length;\n    if (object == null) return !length;\n    var obj = Object(object);\n    for (var i = 0; i < length; i++) {\n      var key = keys[i];\n      if (attrs[key] !== obj[key] || !(key in obj)) return false;\n    }\n    return true;\n  };\n\n\n  // Internal recursive comparison function for `isEqual`.\n  var eq = function(a, b, aStack, bStack) {\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\n    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\n    if (a === b) return a !== 0 || 1 / a === 1 / b;\n    // A strict comparison is necessary because `null == undefined`.\n    if (a == null || b == null) return a === b;\n    // Unwrap any wrapped objects.\n    if (a instanceof _) a = a._wrapped;\n    if (b instanceof _) b = b._wrapped;\n    // Compare `[[Class]]` names.\n    var className = toString.call(a);\n    if (className !== toString.call(b)) return false;\n    switch (className) {\n      // Strings, numbers, regular expressions, dates, and booleans are compared by value.\n      case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n      case '[object String]':\n        // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n        // equivalent to `new String(\"5\")`.\n        return '' + a === '' + b;\n      case '[object Number]':\n        // `NaN`s are equivalent, but non-reflexive.\n        // Object(NaN) is equivalent to NaN\n        if (+a !== +a) return +b !== +b;\n        // An `egal` comparison is performed for other numeric values.\n        return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n      case '[object Date]':\n      case '[object Boolean]':\n        // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n        // millisecond representations. Note that invalid dates with millisecond representations\n        // of `NaN` are not equivalent.\n        return +a === +b;\n    }\n\n    var areArrays = className === '[object Array]';\n    if (!areArrays) {\n      if (typeof a != 'object' || typeof b != 'object') return false;\n\n      // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n      // from different frames are.\n      var aCtor = a.constructor, bCtor = b.constructor;\n      if (aCtor !== bCtor && !(_.isFunction(aCtor) && aCtor instanceof aCtor &&\n                               _.isFunction(bCtor) && bCtor instanceof bCtor)\n                          && ('constructor' in a && 'constructor' in b)) {\n        return false;\n      }\n    }\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n\n    // Initializing stack of traversed objects.\n    // It's done here since we only need them for objects and arrays comparison.\n    aStack = aStack || [];\n    bStack = bStack || [];\n    var length = aStack.length;\n    while (length--) {\n      // Linear search. Performance is inversely proportional to the number of\n      // unique nested structures.\n      if (aStack[length] === a) return bStack[length] === b;\n    }\n\n    // Add the first object to the stack of traversed objects.\n    aStack.push(a);\n    bStack.push(b);\n\n    // Recursively compare objects and arrays.\n    if (areArrays) {\n      // Compare array lengths to determine if a deep comparison is necessary.\n      length = a.length;\n      if (length !== b.length) return false;\n      // Deep compare the contents, ignoring non-numeric properties.\n      while (length--) {\n        if (!eq(a[length], b[length], aStack, bStack)) return false;\n      }\n    } else {\n      // Deep compare objects.\n      var keys = _.keys(a), key;\n      length = keys.length;\n      // Ensure that both objects contain the same number of properties before comparing deep equality.\n      if (_.keys(b).length !== length) return false;\n      while (length--) {\n        // Deep compare each member\n        key = keys[length];\n        if (!(_.has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n      }\n    }\n    // Remove the first object from the stack of traversed objects.\n    aStack.pop();\n    bStack.pop();\n    return true;\n  };\n\n  // Perform a deep comparison to check if two objects are equal.\n  _.isEqual = function(a, b) {\n    return eq(a, b);\n  };\n\n  // Is a given array, string, or object empty?\n  // An \"empty\" object has no enumerable own-properties.\n  _.isEmpty = function(obj) {\n    if (obj == null) return true;\n    if (isArrayLike(obj) && (_.isArray(obj) || _.isString(obj) || _.isArguments(obj))) return obj.length === 0;\n    return _.keys(obj).length === 0;\n  };\n\n  // Is a given value a DOM element?\n  _.isElement = function(obj) {\n    return !!(obj && obj.nodeType === 1);\n  };\n\n  // Is a given value an array?\n  // Delegates to ECMA5's native Array.isArray\n  _.isArray = nativeIsArray || function(obj) {\n    return toString.call(obj) === '[object Array]';\n  };\n\n  // Is a given variable an object?\n  _.isObject = function(obj) {\n    var type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n  };\n\n  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp, isError.\n  _.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp', 'Error'], function(name) {\n    _['is' + name] = function(obj) {\n      return toString.call(obj) === '[object ' + name + ']';\n    };\n  });\n\n  // Define a fallback version of the method in browsers (ahem, IE < 9), where\n  // there isn't any inspectable \"Arguments\" type.\n  if (!_.isArguments(arguments)) {\n    _.isArguments = function(obj) {\n      return _.has(obj, 'callee');\n    };\n  }\n\n  // Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,\n  // IE 11 (#1621), and in Safari 8 (#1929).\n  if (typeof /./ != 'function' && typeof Int8Array != 'object') {\n    _.isFunction = function(obj) {\n      return typeof obj == 'function' || false;\n    };\n  }\n\n  // Is a given object a finite number?\n  _.isFinite = function(obj) {\n    return isFinite(obj) && !isNaN(parseFloat(obj));\n  };\n\n  // Is the given value `NaN`? (NaN is the only number which does not equal itself).\n  _.isNaN = function(obj) {\n    return _.isNumber(obj) && obj !== +obj;\n  };\n\n  // Is a given value a boolean?\n  _.isBoolean = function(obj) {\n    return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n  };\n\n  // Is a given value equal to null?\n  _.isNull = function(obj) {\n    return obj === null;\n  };\n\n  // Is a given variable undefined?\n  _.isUndefined = function(obj) {\n    return obj === void 0;\n  };\n\n  // Shortcut function for checking if an object has a given property directly\n  // on itself (in other words, not on a prototype).\n  _.has = function(obj, key) {\n    return obj != null && hasOwnProperty.call(obj, key);\n  };\n\n  // Utility Functions\n  // -----------------\n\n  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its\n  // previous owner. Returns a reference to the Underscore object.\n  _.noConflict = function() {\n    root._ = previousUnderscore;\n    return this;\n  };\n\n  // Keep the identity function around for default iteratees.\n  _.identity = function(value) {\n    return value;\n  };\n\n  // Predicate-generating functions. Often useful outside of Underscore.\n  _.constant = function(value) {\n    return function() {\n      return value;\n    };\n  };\n\n  _.noop = function(){};\n\n  _.property = property;\n\n  // Generates a function for a given object that returns a given property.\n  _.propertyOf = function(obj) {\n    return obj == null ? function(){} : function(key) {\n      return obj[key];\n    };\n  };\n\n  // Returns a predicate for checking whether an object has a given set of\n  // `key:value` pairs.\n  _.matcher = _.matches = function(attrs) {\n    attrs = _.extendOwn({}, attrs);\n    return function(obj) {\n      return _.isMatch(obj, attrs);\n    };\n  };\n\n  // Run a function **n** times.\n  _.times = function(n, iteratee, context) {\n    var accum = Array(Math.max(0, n));\n    iteratee = optimizeCb(iteratee, context, 1);\n    for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n    return accum;\n  };\n\n  // Return a random integer between min and max (inclusive).\n  _.random = function(min, max) {\n    if (max == null) {\n      max = min;\n      min = 0;\n    }\n    return min + Math.floor(Math.random() * (max - min + 1));\n  };\n\n  // A (possibly faster) way to get the current timestamp as an integer.\n  _.now = Date.now || function() {\n    return new Date().getTime();\n  };\n\n   // List of HTML entities for escaping.\n  var escapeMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;',\n    '`': '&#x60;'\n  };\n  var unescapeMap = _.invert(escapeMap);\n\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\n  var createEscaper = function(map) {\n    var escaper = function(match) {\n      return map[match];\n    };\n    // Regexes for identifying a key that needs to be escaped\n    var source = '(?:' + _.keys(map).join('|') + ')';\n    var testRegexp = RegExp(source);\n    var replaceRegexp = RegExp(source, 'g');\n    return function(string) {\n      string = string == null ? '' : '' + string;\n      return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n    };\n  };\n  _.escape = createEscaper(escapeMap);\n  _.unescape = createEscaper(unescapeMap);\n\n  // If the value of the named `property` is a function then invoke it with the\n  // `object` as context; otherwise, return it.\n  _.result = function(object, property, fallback) {\n    var value = object == null ? void 0 : object[property];\n    if (value === void 0) {\n      value = fallback;\n    }\n    return _.isFunction(value) ? value.call(object) : value;\n  };\n\n  // Generate a unique integer id (unique within the entire client session).\n  // Useful for temporary DOM ids.\n  var idCounter = 0;\n  _.uniqueId = function(prefix) {\n    var id = ++idCounter + '';\n    return prefix ? prefix + id : id;\n  };\n\n  // By default, Underscore uses ERB-style template delimiters, change the\n  // following template settings to use alternative delimiters.\n  _.templateSettings = {\n    evaluate    : /<%([\\s\\S]+?)%>/g,\n    interpolate : /<%=([\\s\\S]+?)%>/g,\n    escape      : /<%-([\\s\\S]+?)%>/g\n  };\n\n  // When customizing `templateSettings`, if you don't want to define an\n  // interpolation, evaluation or escaping regex, we need one that is\n  // guaranteed not to match.\n  var noMatch = /(.)^/;\n\n  // Certain characters need to be escaped so that they can be put into a\n  // string literal.\n  var escapes = {\n    \"'\":      \"'\",\n    '\\\\':     '\\\\',\n    '\\r':     'r',\n    '\\n':     'n',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  var escaper = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\n  var escapeChar = function(match) {\n    return '\\\\' + escapes[match];\n  };\n\n  // JavaScript micro-templating, similar to John Resig's implementation.\n  // Underscore templating handles arbitrary delimiters, preserves whitespace,\n  // and correctly escapes quotes within interpolated code.\n  // NB: `oldSettings` only exists for backwards compatibility.\n  _.template = function(text, settings, oldSettings) {\n    if (!settings && oldSettings) settings = oldSettings;\n    settings = _.defaults({}, settings, _.templateSettings);\n\n    // Combine delimiters into one regular expression via alternation.\n    var matcher = RegExp([\n      (settings.escape || noMatch).source,\n      (settings.interpolate || noMatch).source,\n      (settings.evaluate || noMatch).source\n    ].join('|') + '|$', 'g');\n\n    // Compile the template source, escaping string literals appropriately.\n    var index = 0;\n    var source = \"__p+='\";\n    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n      source += text.slice(index, offset).replace(escaper, escapeChar);\n      index = offset + match.length;\n\n      if (escape) {\n        source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n      } else if (interpolate) {\n        source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n      } else if (evaluate) {\n        source += \"';\\n\" + evaluate + \"\\n__p+='\";\n      }\n\n      // Adobe VMs need the match returned to produce the correct offest.\n      return match;\n    });\n    source += \"';\\n\";\n\n    // If a variable is not specified, place data values in local scope.\n    if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\n\n    source = \"var __t,__p='',__j=Array.prototype.join,\" +\n      \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n      source + 'return __p;\\n';\n\n    try {\n      var render = new Function(settings.variable || 'obj', '_', source);\n    } catch (e) {\n      e.source = source;\n      throw e;\n    }\n\n    var template = function(data) {\n      return render.call(this, data, _);\n    };\n\n    // Provide the compiled source as a convenience for precompilation.\n    var argument = settings.variable || 'obj';\n    template.source = 'function(' + argument + '){\\n' + source + '}';\n\n    return template;\n  };\n\n  // Add a \"chain\" function. Start chaining a wrapped Underscore object.\n  _.chain = function(obj) {\n    var instance = _(obj);\n    instance._chain = true;\n    return instance;\n  };\n\n  // OOP\n  // ---------------\n  // If Underscore is called as a function, it returns a wrapped object that\n  // can be used OO-style. This wrapper holds altered versions of all the\n  // underscore functions. Wrapped objects may be chained.\n\n  // Helper function to continue chaining intermediate results.\n  var result = function(instance, obj) {\n    return instance._chain ? _(obj).chain() : obj;\n  };\n\n  // Add your own custom functions to the Underscore object.\n  _.mixin = function(obj) {\n    _.each(_.functions(obj), function(name) {\n      var func = _[name] = obj[name];\n      _.prototype[name] = function() {\n        var args = [this._wrapped];\n        push.apply(args, arguments);\n        return result(this, func.apply(_, args));\n      };\n    });\n  };\n\n  // Add all of the Underscore functions to the wrapper object.\n  _.mixin(_);\n\n  // Add all mutator Array functions to the wrapper.\n  _.each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      var obj = this._wrapped;\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) delete obj[0];\n      return result(this, obj);\n    };\n  });\n\n  // Add all accessor Array functions to the wrapper.\n  _.each(['concat', 'join', 'slice'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      return result(this, method.apply(this._wrapped, arguments));\n    };\n  });\n\n  // Extracts the result from a wrapped and chained object.\n  _.prototype.value = function() {\n    return this._wrapped;\n  };\n\n  // Provide unwrapping proxy for some methods used in engine operations\n  // such as arithmetic and JSON stringification.\n  _.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n\n  _.prototype.toString = function() {\n    return '' + this._wrapped;\n  };\n\n  // AMD registration happens at the end for compatibility with AMD loaders\n  // that may not enforce next-turn semantics on modules. Even though general\n  // practice for AMD registration is to be anonymous, underscore registers\n  // as a named module because, like jQuery, it is a base library that is\n  // popular enough to be bundled in a third party lib, but not be part of\n  // an AMD load request. Those cases could generate an error when an\n  // anonymous define() is called outside of a loader request.\n  if (typeof define === 'function' && define.amd) {\n    define('underscore', [], function() {\n      return _;\n    });\n  }\n}.call(this));\n\n}\n, \"ep_etherpad-lite/static/js/security.js\": function (require, exports, module) {\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nmodule.exports = require('security');\n\n}\n, \"security.js\": null\n, \"ep_etherpad-lite/static/js/json2.js\": function (require, exports, module) {\n/*\n    http://www.JSON.org/json2.js\n    2011-02-23\n\n    Public Domain.\n\n    NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\n\n    See http://www.JSON.org/js.html\n\n\n    This code should be minified before deployment.\n    See http://javascript.crockford.com/jsmin.html\n\n    USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO\n    NOT CONTROL.\n\n\n    This file creates a global JSON object containing two methods: stringify\n    and parse.\n\n        JSON.stringify(value, replacer, space)\n            value       any JavaScript value, usually an object or array.\n\n            replacer    an optional parameter that determines how object\n                        values are stringified for objects. It can be a\n                        function or an array of strings.\n\n            space       an optional parameter that specifies the indentation\n                        of nested structures. If it is omitted, the text will\n                        be packed without extra whitespace. If it is a number,\n                        it will specify the number of spaces to indent at each\n                        level. If it is a string (such as '\\t' or '&nbsp;'),\n                        it contains the characters used to indent at each level.\n\n            This method produces a JSON text from a JavaScript value.\n\n            When an object value is found, if the object contains a toJSON\n            method, its toJSON method will be called and the result will be\n            stringified. A toJSON method does not serialize: it returns the\n            value represented by the name/value pair that should be serialized,\n            or undefined if nothing should be serialized. The toJSON method\n            will be passed the key associated with the value, and this will be\n            bound to the value\n\n            For example, this would serialize Dates as ISO strings.\n\n                Date.prototype.toJSON = function (key) {\n                    function f(n) {\n                        // Format integers to have at least two digits.\n                        return n < 10 ? '0' + n : n;\n                    }\n\n                    return this.getUTCFullYear()   + '-' +\n                         f(this.getUTCMonth() + 1) + '-' +\n                         f(this.getUTCDate())      + 'T' +\n                         f(this.getUTCHours())     + ':' +\n                         f(this.getUTCMinutes())   + ':' +\n                         f(this.getUTCSeconds())   + 'Z';\n                };\n\n            You can provide an optional replacer method. It will be passed the\n            key and value of each member, with this bound to the containing\n            object. The value that is returned from your method will be\n            serialized. If your method returns undefined, then the member will\n            be excluded from the serialization.\n\n            If the replacer parameter is an array of strings, then it will be\n            used to select the members to be serialized. It filters the results\n            such that only members with keys listed in the replacer array are\n            stringified.\n\n            Values that do not have JSON representations, such as undefined or\n            functions, will not be serialized. Such values in objects will be\n            dropped; in arrays they will be replaced with null. You can use\n            a replacer function to replace those with JSON values.\n            JSON.stringify(undefined) returns undefined.\n\n            The optional space parameter produces a stringification of the\n            value that is filled with line breaks and indentation to make it\n            easier to read.\n\n            If the space parameter is a non-empty string, then that string will\n            be used for indentation. If the space parameter is a number, then\n            the indentation will be that many spaces.\n\n            Example:\n\n            text = JSON.stringify(['e', {pluribus: 'unum'}]);\n            // text is '[\"e\",{\"pluribus\":\"unum\"}]'\n\n\n            text = JSON.stringify(['e', {pluribus: 'unum'}], null, '\\t');\n            // text is '[\\n\\t\"e\",\\n\\t{\\n\\t\\t\"pluribus\": \"unum\"\\n\\t}\\n]'\n\n            text = JSON.stringify([new Date()], function (key, value) {\n                return this[key] instanceof Date ?\n                    'Date(' + this[key] + ')' : value;\n            });\n            // text is '[\"Date(---current time---)\"]'\n\n\n        JSON.parse(text, reviver)\n            This method parses a JSON text to produce an object or array.\n            It can throw a SyntaxError exception.\n\n            The optional reviver parameter is a function that can filter and\n            transform the results. It receives each of the keys and values,\n            and its return value is used instead of the original value.\n            If it returns what it received, then the structure is not modified.\n            If it returns undefined then the member is deleted.\n\n            Example:\n\n            // Parse the text. Values that look like ISO date strings will\n            // be converted to Date objects.\n\n            myData = JSON.parse(text, function (key, value) {\n                var a;\n                if (typeof value === 'string') {\n                    a =\n/^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2}(?:\\.\\d*)?)Z$/.exec(value);\n                    if (a) {\n                        return new Date(Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4],\n                            +a[5], +a[6]));\n                    }\n                }\n                return value;\n            });\n\n            myData = JSON.parse('[\"Date(09/09/2001)\"]', function (key, value) {\n                var d;\n                if (typeof value === 'string' &&\n                        value.slice(0, 5) === 'Date(' &&\n                        value.slice(-1) === ')') {\n                    d = new Date(value.slice(5, -1));\n                    if (d) {\n                        return d;\n                    }\n                }\n                return value;\n            });\n\n\n    This is a reference implementation. You are free to copy, modify, or\n    redistribute.\n*/\n\n/*jslint evil: true, strict: false, regexp: false */\n\n/*members \"\", \"\\b\", \"\\t\", \"\\n\", \"\\f\", \"\\r\", \"\\\"\", JSON, \"\\\\\", apply,\n    call, charCodeAt, getUTCDate, getUTCFullYear, getUTCHours,\n    getUTCMinutes, getUTCMonth, getUTCSeconds, hasOwnProperty, join,\n    lastIndex, length, parse, prototype, push, replace, slice, stringify,\n    test, toJSON, toString, valueOf\n*/\n\n\n// Create a JSON object only if one does not already exist. We create the\n// methods in a closure to avoid creating global variables.\nvar JSON;\nif (!JSON)\n{\n  JSON = {};\n}\n\n(function()\n{\n  \"use strict\";\n\n  function f(n)\n  {\n    // Format integers to have at least two digits.\n    return n < 10 ? '0' + n : n;\n  }\n\n  if (typeof Date.prototype.toJSON !== 'function')\n  {\n\n    Date.prototype.toJSON = function(key)\n    {\n\n      return isFinite(this.valueOf()) ? this.getUTCFullYear() + '-' + f(this.getUTCMonth() + 1) + '-' + f(this.getUTCDate()) + 'T' + f(this.getUTCHours()) + ':' + f(this.getUTCMinutes()) + ':' + f(this.getUTCSeconds()) + 'Z' : null;\n    };\n\n    String.prototype.toJSON = Number.prototype.toJSON = Boolean.prototype.toJSON = function(key)\n    {\n      return this.valueOf();\n    };\n  }\n\n  var cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n      escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n      gap, indent, meta = { // table of character substitutions\n      '\\b': '\\\\b',\n      '\\t': '\\\\t',\n      '\\n': '\\\\n',\n      '\\f': '\\\\f',\n      '\\r': '\\\\r',\n      '\"': '\\\\\"',\n      '\\\\': '\\\\\\\\'\n      },\n      rep;\n\n\n  function quote(string)\n  {\n\n    // If the string contains no control characters, no quote characters, and no\n    // backslash characters, then we can safely slap some quotes around it.\n    // Otherwise we must also replace the offending characters with safe escape\n    // sequences.\n    escapable.lastIndex = 0;\n    return escapable.test(string) ? '\"' + string.replace(escapable, function(a)\n    {\n      var c = meta[a];\n      return typeof c === 'string' ? c : '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n    }) + '\"' : '\"' + string + '\"';\n  }\n\n\n  function str(key, holder)\n  {\n\n    // Produce a string from holder[key].\n    var i, // The loop counter.\n    k, // The member key.\n    v, // The member value.\n    length, mind = gap,\n        partial, value = holder[key];\n\n    // If the value has a toJSON method, call it to obtain a replacement value.\n    if (value && typeof value === 'object' && typeof value.toJSON === 'function')\n    {\n      value = value.toJSON(key);\n    }\n\n    // If we were called with a replacer function, then call the replacer to\n    // obtain a replacement value.\n    if (typeof rep === 'function')\n    {\n      value = rep.call(holder, key, value);\n    }\n\n    // What happens next depends on the value's type.\n    switch (typeof value)\n    {\n    case 'string':\n      return quote(value);\n\n    case 'number':\n\n      // JSON numbers must be finite. Encode non-finite numbers as null.\n      return isFinite(value) ? String(value) : 'null';\n\n    case 'boolean':\n    case 'null':\n\n      // If the value is a boolean or null, convert it to a string. Note:\n      // typeof null does not produce 'null'. The case is included here in\n      // the remote chance that this gets fixed someday.\n      return String(value);\n\n      // If the type is 'object', we might be dealing with an object or an array or\n      // null.\n    case 'object':\n\n      // Due to a specification blunder in ECMAScript, typeof null is 'object',\n      // so watch out for that case.\n      if (!value)\n      {\n        return 'null';\n      }\n\n      // Make an array to hold the partial results of stringifying this object value.\n      gap += indent;\n      partial = [];\n\n      // Is the value an array?\n      if (Object.prototype.toString.apply(value) === '[object Array]')\n      {\n\n        // The value is an array. Stringify every element. Use null as a placeholder\n        // for non-JSON values.\n        length = value.length;\n        for (i = 0; i < length; i += 1)\n        {\n          partial[i] = str(i, value) || 'null';\n        }\n\n        // Join all of the elements together, separated with commas, and wrap them in\n        // brackets.\n        v = partial.length === 0 ? '[]' : gap ? '[\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + ']' : '[' + partial.join(',') + ']';\n        gap = mind;\n        return v;\n      }\n\n      // If the replacer is an array, use it to select the members to be stringified.\n      if (rep && typeof rep === 'object')\n      {\n        length = rep.length;\n        for (i = 0; i < length; i += 1)\n        {\n          if (typeof rep[i] === 'string')\n          {\n            k = rep[i];\n            v = str(k, value);\n            if (v)\n            {\n              partial.push(quote(k) + (gap ? ': ' : ':') + v);\n            }\n          }\n        }\n      }\n      else\n      {\n\n        // Otherwise, iterate through all of the keys in the object.\n        for (k in value)\n        {\n          if (Object.prototype.hasOwnProperty.call(value, k))\n          {\n            v = str(k, value);\n            if (v)\n            {\n              partial.push(quote(k) + (gap ? ': ' : ':') + v);\n            }\n          }\n        }\n      }\n\n      // Join all of the member texts together, separated with commas,\n      // and wrap them in braces.\n      v = partial.length === 0 ? '{}' : gap ? '{\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + '}' : '{' + partial.join(',') + '}';\n      gap = mind;\n      return v;\n    }\n  }\n\n  // If the JSON object does not yet have a stringify method, give it one.\n  if (typeof JSON.stringify !== 'function')\n  {\n    JSON.stringify = function(value, replacer, space)\n    {\n\n      // The stringify method takes a value and an optional replacer, and an optional\n      // space parameter, and returns a JSON text. The replacer can be a function\n      // that can replace values, or an array of strings that will select the keys.\n      // A default replacer method can be provided. Use of the space parameter can\n      // produce text that is more easily readable.\n      var i;\n      gap = '';\n      indent = '';\n\n      // If the space parameter is a number, make an indent string containing that\n      // many spaces.\n      if (typeof space === 'number')\n      {\n        for (i = 0; i < space; i += 1)\n        {\n          indent += ' ';\n        }\n\n        // If the space parameter is a string, it will be used as the indent string.\n      }\n      else if (typeof space === 'string')\n      {\n        indent = space;\n      }\n\n      // If there is a replacer, it must be a function or an array.\n      // Otherwise, throw an error.\n      rep = replacer;\n      if (replacer && typeof replacer !== 'function' && (typeof replacer !== 'object' || typeof replacer.length !== 'number'))\n      {\n        throw new Error('JSON.stringify');\n      }\n\n      // Make a fake root object containing our value under the key of ''.\n      // Return the result of stringifying the value.\n      return str('', {\n        '': value\n      });\n    };\n  }\n\n\n  // If the JSON object does not yet have a parse method, give it one.\n  if (typeof JSON.parse !== 'function')\n  {\n    JSON.parse = function(text, reviver)\n    {\n\n      // The parse method takes a text and an optional reviver function, and returns\n      // a JavaScript value if the text is a valid JSON text.\n      var j;\n\n      function walk(holder, key)\n      {\n\n        // The walk method is used to recursively walk the resulting structure so\n        // that modifications can be made.\n        var k, v, value = holder[key];\n        if (value && typeof value === 'object')\n        {\n          for (k in value)\n          {\n            if (Object.prototype.hasOwnProperty.call(value, k))\n            {\n              v = walk(value, k);\n              if (v !== undefined)\n              {\n                value[k] = v;\n              }\n              else\n              {\n                delete value[k];\n              }\n            }\n          }\n        }\n        return reviver.call(holder, key, value);\n      }\n\n\n      // Parsing happens in four stages. In the first stage, we replace certain\n      // Unicode characters with escape sequences. JavaScript handles many characters\n      // incorrectly, either silently deleting them, or treating them as line endings.\n      text = String(text);\n      cx.lastIndex = 0;\n      if (cx.test(text))\n      {\n        text = text.replace(cx, function(a)\n        {\n          return '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n        });\n      }\n\n      // In the second stage, we run the text against regular expressions that look\n      // for non-JSON patterns. We are especially concerned with '()' and 'new'\n      // because they can cause invocation, and '=' because it can cause mutation.\n      // But just to be safe, we want to reject all unexpected forms.\n      // We split the second stage into 4 regexp operations in order to work around\n      // crippling inefficiencies in IE's and Safari's regexp engines. First we\n      // replace the JSON backslash pairs with '@' (a non-JSON character). Second, we\n      // replace all simple value tokens with ']' characters. Third, we delete all\n      // open brackets that follow a colon or comma or that begin the text. Finally,\n      // we look to see that the remaining characters are only whitespace or ']' or\n      // ',' or ':' or '{' or '}'. If that is so, then the text is safe for eval.\n      if (/^[\\],:{}\\s]*$/.test(text.replace(/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@').replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, ']').replace(/(?:^|:|,)(?:\\s*\\[)+/g, '')))\n      {\n\n        // In the third stage we use the eval function to compile the text into a\n        // JavaScript structure. The '{' operator is subject to a syntactic ambiguity\n        // in JavaScript: it can begin a block or an object literal. We wrap the text\n        // in parens to eliminate the ambiguity.\n        j = eval('(' + text + ')');\n\n        // In the optional fourth stage, we recursively walk the new structure, passing\n        // each name/value pair to a reviver function for possible transformation.\n        return typeof reviver === 'function' ? walk(\n        {\n          '': j\n        }, '') : j;\n      }\n\n      // If the text is not JSON parseable, then a SyntaxError is thrown.\n      throw new SyntaxError('JSON.parse: ' + text);\n    };\n  }\n}());\n\nmodule.exports = JSON;\n\n}\n, \"ep_etherpad-lite/static/js/pluginfw/client_plugins.js\": function (require, exports, module) {\nvar $, jQuery;\n$ = jQuery = require(\"ep_etherpad-lite/static/js/rjquery\").$;\nvar _ = require(\"underscore\");\n\nvar pluginUtils = require('./shared');\n\nexports.loaded = false;\nexports.plugins = {};\nexports.parts = [];\nexports.hooks = {};\nexports.baseURL = '';\n\nexports.ensure = function (cb) {\n  if (!exports.loaded)\n    exports.update(cb);\n  else\n    cb();\n};\n\nexports.update = function (cb) {\n  // It appears that this response (see #620) may interrupt the current thread\n  // of execution on Firefox. This schedules the response in the run-loop,\n  // which appears to fix the issue.\n  var callback = function () {setTimeout(cb, 0);};\n\n  jQuery.getJSON(exports.baseURL + 'pluginfw/plugin-definitions.json', function(data) {\n    exports.plugins = data.plugins;\n    exports.parts = data.parts;\n    exports.hooks = pluginUtils.extractHooks(exports.parts, \"client_hooks\");\n    exports.loaded = true;\n    callback();\n   }).error(function(xhr, s, err){\n     console.error(\"Failed to load plugin-definitions: \" + err);\n     callback();\n   });\n};\n\nfunction adoptPlugins(plugins) {\n  var keys = [\n      'loaded', 'plugins', 'parts', 'hooks', 'baseURL', 'ensure', 'update'];\n\n  for (var i = 0, ii = keys.length; i < ii; i++) {\n    var key = keys[i];\n    exports[key] = plugins[key];\n  }\n}\n\nfunction adoptPluginsFromAncestorsOf(frame) {\n  // Bind plugins with parent;\n  var parentRequire = null;\n  try {\n    while (frame = frame.parent) {\n      if (typeof (frame.require) !== \"undefined\") {\n        parentRequire = frame.require;\n        break;\n      }\n    }\n  } catch (error) {\n    // Silence (this can only be a XDomain issue).\n  }\n  if (parentRequire) {\n    var ancestorPlugins = parentRequire(\"ep_etherpad-lite/static/js/pluginfw/client_plugins\");\n    exports.adoptPlugins(ancestorPlugins);\n  } else {\n    throw new Error(\"Parent plugins could not be found.\")\n  }\n}\n\nexports.adoptPlugins = adoptPlugins;\nexports.adoptPluginsFromAncestorsOf = adoptPluginsFromAncestorsOf;\n\n}\n, \"ep_etherpad-lite/static/js/pluginfw/shared.js\": function (require, exports, module) {\nvar _ = require(\"underscore\");\n\nfunction loadFn(path, hookName) {\n  var functionName\n    , parts = path.split(\":\");\n\n  // on windows: C:\\foo\\bar:xyz\n  if (parts[0].length == 1) {\n    if (parts.length == 3) {\n      functionName = parts.pop();\n    }\n    path = parts.join(\":\");\n  } else {\n    path = parts[0];\n    functionName = parts[1];\n  }\n\n  var fn = require(path);\n  functionName = functionName ? functionName : hookName;\n\n  _.each(functionName.split(\".\"), function (name) {\n    fn = fn[name];\n  });\n  return fn;\n};\n\nfunction extractHooks(parts, hook_set_name, normalizer) {\n  var hooks = {};\n  _.each(parts,function (part) {\n    _.chain(part[hook_set_name] || {})\n    .keys()\n    .each(function (hook_name) {\n      if (hooks[hook_name] === undefined) hooks[hook_name] = [];\n\n      var hook_fn_name = part[hook_set_name][hook_name];\n\n      /* On the server side, you can't just\n       * require(\"pluginname/whatever\") if the plugin is installed as\n       * a dependency of another plugin! Bah, pesky little details of\n       * npm... */\n      if (normalizer) {\n        hook_fn_name = normalizer(part, hook_fn_name);\n      }\n\n      try {\n        var hook_fn = loadFn(hook_fn_name, hook_name);\n        if (!hook_fn) {\n          throw \"Not a function\";\n        }\n      } catch (exc) {\n        console.error(\"Failed to load '\" + hook_fn_name + \"' for '\" + part.full_name + \"/\" + hook_set_name + \"/\" + hook_name + \"': \" + exc.toString())\n      }\n      if (hook_fn) {\n        hooks[hook_name].push({\"hook_name\": hook_name, \"hook_fn\": hook_fn, \"hook_fn_name\": hook_fn_name, \"part\": part});\n      }\n    });\n  });\n  return hooks;\n};\n\nexports.extractHooks = extractHooks;\n\n}\n, \"ep_etherpad-lite/static/js/pluginfw/hooks.js\": function (require, exports, module) {\nvar async = require(\"async\");\nvar _ = require(\"underscore\");\n\nexports.bubbleExceptions = true\n\nvar hookCallWrapper = function (hook, hook_name, args, cb) {\n  if (cb === undefined) cb = function (x) { return x; };\n\n  // Normalize output to list for both sync and async cases\n  var normalize = function(x) {\n    if (x === undefined) return [];\n    return x;\n  }\n  var normalizedhook = function () {\n    return normalize(hook.hook_fn(hook_name, args, function (x) {\n      return cb(normalize(x));\n    }));\n  }\n\n  if (exports.bubbleExceptions) {\n      return normalizedhook();\n  } else {\n    try {\n      return normalizedhook();\n    } catch (ex) {\n      console.error([hook_name, hook.part.full_name, ex.stack || ex]);\n    }\n  }\n}\n\nexports.syncMapFirst = function (lst, fn) {\n  var i;\n  var result;\n  for (i = 0; i < lst.length; i++) {\n    result = fn(lst[i])\n    if (result.length) return result;\n  }\n  return undefined;\n}\n\nexports.mapFirst = function (lst, fn, cb) {\n  var i = 0;\n\n  var next = function () {\n    if (i >= lst.length) return cb(undefined);\n    fn(lst[i++], function (err, result) {\n      if (err) return cb(err);\n      if (result.length) return cb(null, result);\n      next();\n    });\n  }\n  next();\n}\n\n\n/* Don't use Array.concat as it flatterns arrays within the array */\nexports.flatten = function (lst) {\n  var res = [];\n  if (lst != undefined && lst != null) {\n    for (var i = 0; i < lst.length; i++) {\n      if (lst[i] != undefined && lst[i] != null) {\n        for (var j = 0; j < lst[i].length; j++) {\n          res.push(lst[i][j]);\n    }\n      }\n    }\n  }\n  return res;\n}\n\nexports.callAll = function (hook_name, args) {\n  if (!args) args = {};\n  if (exports.plugins){\n    if (exports.plugins.hooks[hook_name] === undefined) return [];\n    return _.flatten(_.map(exports.plugins.hooks[hook_name], function (hook) {\n      return hookCallWrapper(hook, hook_name, args);\n    }), true);\n  }\n}\n\nexports.aCallAll = function (hook_name, args, cb) {\n  if (!args) args = {};\n  if (!cb) cb = function () {};\n  if (exports.plugins.hooks[hook_name] === undefined) return cb(null, []);\n  async.map(\n    exports.plugins.hooks[hook_name],\n    function (hook, cb) {\n      hookCallWrapper(hook, hook_name, args, function (res) { cb(null, res); });\n    },\n    function (err, res) {\n        cb(null, _.flatten(res, true));\n    }\n  );\n}\n\nexports.callFirst = function (hook_name, args) {\n  if (!args) args = {};\n  if (exports.plugins.hooks[hook_name] === undefined) return [];\n  return exports.syncMapFirst(exports.plugins.hooks[hook_name], function (hook) {\n    return hookCallWrapper(hook, hook_name, args);\n  });\n}\n\nexports.aCallFirst = function (hook_name, args, cb) {\n  if (!args) args = {};\n  if (!cb) cb = function () {};\n  if (exports.plugins.hooks[hook_name] === undefined) return cb(null, []);\n  exports.mapFirst(\n    exports.plugins.hooks[hook_name],\n    function (hook, cb) {\n      hookCallWrapper(hook, hook_name, args, function (res) { cb(null, res); });\n    },\n    cb\n  );\n}\n\nexports.callAllStr = function(hook_name, args, sep, pre, post) {\n  if (sep == undefined) sep = '';\n  if (pre == undefined) pre = '';\n  if (post == undefined) post = '';\n  var newCallhooks = [];\n  var callhooks = exports.callAll(hook_name, args);\n  for (var i = 0, ii = callhooks.length; i < ii; i++) {\n    newCallhooks[i] = pre + callhooks[i] + post;\n  }\n  return newCallhooks.join(sep || \"\");\n}\n\n}\n, \"ep_etherpad-lite/static/js/ace2_common\": null\n, \"ep_etherpad-lite/static/js/browser\": null\n, \"ep_etherpad-lite/static/js/jquery\": null\n, \"ep_etherpad-lite/static/js/rjquery\": null\n, \"async\": null\n, \"async/lib/async\": null\n, \"ep_etherpad-lite/static/js/underscore\": null\n, \"underscore\": null\n, \"underscore/underscore\": null\n, \"ep_etherpad-lite/static/js/security\": null\n, \"security\": null\n, \"ep_etherpad-lite/static/js/json2\": null\n, \"ep_etherpad-lite/static/js/pluginfw/client_plugins\": null\n, \"ep_etherpad-lite/static/js/pluginfw/shared\": null\n, \"ep_etherpad-lite/static/js/pluginfw/hooks\": null\n, \"ep_etherpad-lite/static/js/ace2_common/index.js\": null\n, \"ep_etherpad-lite/static/js/browser/index.js\": null\n, \"ep_etherpad-lite/static/js/jquery/index.js\": null\n, \"ep_etherpad-lite/static/js/rjquery/index.js\": null\n, \"async/index.js\": null\n, \"async/lib/async/index.js\": null\n, \"ep_etherpad-lite/static/js/underscore/index.js\": null\n, \"underscore/index.js\": null\n, \"underscore/underscore/index.js\": null\n, \"ep_etherpad-lite/static/js/security/index.js\": null\n, \"security/index.js\": function (require, exports, module) {\n/*!\n\n  Copyright (c) 2011 Chad Weider\n\n  Permission is hereby granted, free of charge, to any person obtaining a copy\n  of this software and associated documentation files (the \"Software\"), to deal\n  in the Software without restriction, including without limitation the rights\n  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n  copies of the Software, and to permit persons to whom the Software is\n  furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in\n  all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n\n*/\n\nvar HTML_ENTITY_MAP = {\n  '&': '&amp;'\n, '<': '&lt;'\n, '>': '&gt;'\n, '\"': '&quot;'\n, \"'\": '&#x27;'\n, '/': '&#x2F;'\n};\n\n// OSWASP Guidlines: &, <, >, \", ' plus forward slash.\nvar HTML_CHARACTERS_EXPRESSION = /[&\"'<>\\/]/gm;\nfunction escapeHTML(text) {\n  return text && text.replace(HTML_CHARACTERS_EXPRESSION, function (c) {\n    return HTML_ENTITY_MAP[c] || c;\n  });\n}\n\n// OSWASP Guidlines: escape all non alphanumeric characters in ASCII space.\nvar HTML_ATTRIBUTE_CHARACTERS_EXPRESSION =\n    /[\\x00-\\x2F\\x3A-\\x40\\x5B-\\x60\\x7B-\\xFF]/gm;\nfunction escapeHTMLAttribute(text) {\n  return text && text.replace(HTML_ATTRIBUTE_CHARACTERS_EXPRESSION, function (c) {\n    return HTML_ENTITY_MAP[c] || \"&#x\" + ('00' + c.charCodeAt(0).toString(16)).slice(-2) + \";\";\n  });\n};\n\n// OSWASP Guidlines: escape all non alphanumeric characters in ASCII space.\n// Also include line breaks (for literal).\nvar JAVASCRIPT_CHARACTERS_EXPRESSION =\n    /[\\x00-\\x2F\\x3A-\\x40\\x5B-\\x60\\x7B-\\xFF\\u2028\\u2029]/gm;\nfunction encodeJavaScriptIdentifier(text) {\n  return text && text.replace(JAVASCRIPT_CHARACTERS_EXPRESSION, function (c) {\n    return \"\\\\u\" + ('0000' + c.charCodeAt(0).toString(16)).slice(-4);\n  });\n}\nfunction encodeJavaScriptString(text) {\n  return text && '\"' + encodeJavaScriptIdentifier(text) + '\"';\n}\n\n// This is not great, but it is useful.\nvar JSON_STRING_LITERAL_EXPRESSION =\n    /\"(?:\\\\.|[^\"])*\"/gm;\nfunction encodeJavaScriptData(object) {\n  return JSON.stringify(object).replace(JSON_STRING_LITERAL_EXPRESSION, function (string) {\n    return encodeJavaScriptString(JSON.parse(string));\n  });\n}\n\n\n// OSWASP Guidlines: escape all non alphanumeric characters in ASCII space.\nvar CSS_CHARACTERS_EXPRESSION =\n    /[\\x00-\\x2F\\x3A-\\x40\\x5B-\\x60\\x7B-\\xFF]/gm;\nfunction encodeCSSIdentifier(text) {\n  return text && text.replace(CSS_CHARACTERS_EXPRESSION, function (c) {\n    return \"\\\\\" + ('000000' + c.charCodeAt(0).toString(16)).slice(-6);\n  });\n}\n\nfunction encodeCSSString(text) {\n  return text && '\"' + encodeCSSIdentifier(text) + '\"';\n}\n\nexports.escapeHTML = escapeHTML;\nexports.escapeHTMLAttribute = escapeHTMLAttribute;\n\nexports.encodeJavaScriptIdentifier = encodeJavaScriptIdentifier;\nexports.encodeJavaScriptString = encodeJavaScriptString;\nexports.encodeJavaScriptData = encodeJavaScriptData;\n\nexports.encodeCSSIdentifier = encodeCSSIdentifier;\nexports.encodeCSSString = encodeCSSString;\n\n}\n, \"ep_etherpad-lite/static/js/json2/index.js\": null\n, \"ep_etherpad-lite/static/js/pluginfw/client_plugins/index.js\": null\n, \"ep_etherpad-lite/static/js/pluginfw/shared/index.js\": null\n, \"ep_etherpad-lite/static/js/pluginfw/hooks/index.js\": null\n});\n"
          },
          "redirectURL": "",
          "headersSize": 398,
          "bodySize": 0,
          "_transferSize": 398
        },
        "cache": {},
        "timings": {
          "blocked": 634.946999999556,
          "dns": -1,
          "connect": -1,
          "send": 0.17200000002094384,
          "wait": 499.38800000018296,
          "receive": 5.664999999678457,
          "ssl": -1
        },
        "connection": "3611",
        "pageref": "page_2"
      },
      {
        "startedDateTime": "2015-06-09T16:53:03.687Z",
        "time": 736.3680000007662,
        "request": {
          "method": "GET",
          "url": "http://localhost:9001/static/custom/pad.js",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "DNT",
              "value": "1"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, sdch"
            },
            {
              "name": "Host",
              "value": "localhost:9001"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.8,de;q=0.6"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.81 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Referer",
              "value": "http://localhost:9001/p/bla"
            },
            {
              "name": "Cookie",
              "value": "token=t.ltaoBcvzTd2Qbc9Uqjas; express_sid=s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "If-Modified-Since",
              "value": "Mon, 01 Jun 2015 14:22:49 GMT"
            }
          ],
          "queryString": [],
          "cookies": [
            {
              "name": "token",
              "value": "t.ltaoBcvzTd2Qbc9Uqjas",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "express_sid",
              "value": "s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo",
              "expires": null,
              "httpOnly": false,
              "secure": false
            }
          ],
          "headersSize": 535,
          "bodySize": 0
        },
        "response": {
          "status": 304,
          "statusText": "Not Modified",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "date",
              "value": "Tue, 09 Jun 2015 16:53:04 GMT"
            },
            {
              "name": "last-modified",
              "value": "Mon, 01 Jun 2015 14:22:49 GMT"
            },
            {
              "name": "Server",
              "value": "Etherpad d11c92c (http://etherpad.org)"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            },
            {
              "name": "cache-control",
              "value": "max-age=21600"
            },
            {
              "name": "X-UA-Compatible",
              "value": "IE=Edge,chrome=1"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "expires",
              "value": "Tue, 09 Jun 2015 22:53:04 GMT"
            }
          ],
          "cookies": [],
          "content": {
            "size": 189,
            "mimeType": "text/javascript",
            "text": "function customStart()\n{\n  //define your javascript here\n  //jquery is available - except index.js\n  //you can load extra scripts with $.getScript http://api.jquery.com/jQuery.getScript/\n}\n"
          },
          "redirectURL": "",
          "headersSize": 312,
          "bodySize": 0,
          "_transferSize": 312
        },
        "cache": {},
        "timings": {
          "blocked": 647.400000000744,
          "dns": 0.011999999515069248,
          "connect": 0.3939999996870256,
          "send": 0.15500000063195785,
          "wait": 67.84499999957904,
          "receive": 20.562000000609146,
          "ssl": -1
        },
        "connection": "3664",
        "pageref": "page_2"
      },
      {
        "startedDateTime": "2015-06-09T16:53:04.311Z",
        "time": 140.15200000085315,
        "request": {
          "method": "GET",
          "url": "http://localhost:9001/static/font/fontawesome-etherpad.woff",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "DNT",
              "value": "1"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, sdch"
            },
            {
              "name": "Host",
              "value": "localhost:9001"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.8,de;q=0.6"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.81 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Referer",
              "value": "http://localhost:9001/static/css/pad.css"
            },
            {
              "name": "Cookie",
              "value": "token=t.ltaoBcvzTd2Qbc9Uqjas; express_sid=s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "If-Modified-Since",
              "value": "Mon, 01 Jun 2015 14:19:04 GMT"
            }
          ],
          "queryString": [],
          "cookies": [
            {
              "name": "token",
              "value": "t.ltaoBcvzTd2Qbc9Uqjas",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "express_sid",
              "value": "s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo",
              "expires": null,
              "httpOnly": false,
              "secure": false
            }
          ],
          "headersSize": 565,
          "bodySize": 0
        },
        "response": {
          "status": 304,
          "statusText": "Not Modified",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "date",
              "value": "Tue, 09 Jun 2015 16:53:04 GMT"
            },
            {
              "name": "last-modified",
              "value": "Mon, 01 Jun 2015 14:19:04 GMT"
            },
            {
              "name": "Server",
              "value": "Etherpad d11c92c (http://etherpad.org)"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            },
            {
              "name": "cache-control",
              "value": "max-age=21600"
            },
            {
              "name": "X-UA-Compatible",
              "value": "IE=Edge,chrome=1"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "expires",
              "value": "Tue, 09 Jun 2015 22:53:04 GMT"
            }
          ],
          "cookies": [],
          "content": {
            "size": 10724,
            "mimeType": "application/octet-stream",
            "text": "d09GRgABAAAAACnkAA4AAAAARuwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABRAAAAEQAAABWPjNJUmNtYXAAAAGIAAAAOgAAAUrQSBm3Y3Z0IAAAAcQAAAAKAAAACgAAAABmcGdtAAAB0AAABZQAAAtwiJCQWWdhc3AAAAdkAAAACAAAAAgAAAAQZ2x5ZgAAB2wAAB2hAAAwuE3GXhpoZWFkAAAlEAAAADUAAAA2BG3p5WhoZWEAACVIAAAAIAAAACQH3wPKaG10eAAAJWgAAABGAAAA5MoJAABsb2NhAAAlsAAAAHQAAAB0ZBdv/G1heHAAACYkAAAAIAAAACAA2wwPbmFtZQAAJkQAAAGZAAADXfdAd81wb3N0AAAn4AAAAZoAAAJtH8CwlnByZXAAACl8AAAAZQAAAHvdawOFeJxjYGTuZpzAwMrAwVTFtIeBgaEHQjM+YDBkZGJgYGJgZWbACgLSXFMYHF4wvDBnDvqfxRDFHMywECjMCJIDAPMiDAN4nGNgYGBmgGAZBkYGEHAB8hjBfBYGDSDNBqQZGZgYGF6Y//8PUvCCAURLMELVAwEjG8OIBwChAgblAAAAAAAAAAAAAAAAAAB4nK1WaXMTRxCd1WHLNj6CDxI2gVnGcox2VpjLCBDG7EoW4BzylexCjl1Ldu6LT/wG/ZpekVSRb/y0vB4d2GAnVVQoSv2m9+1M9+ueXpPQksReWI+k3HwpprY2aWTnSUg3bFqO4kPZ2QspU0z+LoiCaLXUvu04JCISgap1hSWC2PfI0iTjQ48yWrYlvWpSbulJd9kaD+qt+vbT0FGO3QklNZuhQ+uRLanCqBJFMu2RkjYtw9VfSVrh5yvMfNUMJYLoJJLGm2EMj+Rn44xWGa3GdhxFkU2WG0WKRDM8iCKPslpin1wxQUD5oBlSXvk0onyEH5EVe5TTCnHJdprf9yU/6R3OvyTieouyJQf+QHZkB3unK/ki0toK46adbEehivB0fSfEI5uT6p/sUV7TaOB2RaYnzQiWyleQWPkJZfYPyWrhfMqXPBrVkoOcCFovc2Jf8g60HkdMiWsmyILujk6IoO6XnKHYY/q4+OO9XSwXIQTIOJb1jkq4EEYpYbOaJG0EOYiSskWV1HpHTJzyOi3iLWG/Tu3oS2e0Sag7MZ6th46tnKjkeDSp00ymTu2k5tGUBlFKOhM85tcBlB/RJK+2sZrEyqNpbDNjJJFQoIVzaSqIZSeWNAXRPJrRm7thmmvXokWaPFDPPXpPb26Fmzs9p+3AP2v8Z3UqpoO9MJ2eDshKfJp2uUnRun56hn8m8UPWAiqRLTbDlMVDtn4H5eVjS47CawNs957zK+h99kTIpIH4G/AeL9UpBUyFmFVQC9201rUsy9RqVotUZOq7IU0rX9ZpAk05Dn1jX8Y4/q+ZGUtMCd/vxOnZEZeeufYlyDSH3GZdj+Z1arFdgM5sz+k0y/Z9nebYfqDTPNvzOh1ha+t0lO2HOi2w/UinY2wvaEGT7jsEchGBXMAGEoGwdRAI20sIhK1CIGwXEQjbIgJhu4RA2H6MQNguIxC2l7Wsmn4qaRw7E8sARYgDoznuyGVuKldTyaUSrotGpzbkKXKrpKJ4Vv0rA/3ikTesgbVAukTW/IpJrnxUleOPrmh508S5Ao5Vf3tzXJ8TD2W/WPhT8L/amqqkV6x5ZHIVeSPQk+NE1yYVj67p8rmqR9f/i4oOa4F+A6UQC0VZlg2+mZDwUafTUA1c5RAzGzMP1/W6Zc3P4fybGCEL6H78NxQaC9yDTllJWe1gr9XXj2W5twflsCdYkmK+zOtb4YuMzEr7RWYpez7yecAVMCqVYasNXK3gzXsS85DpTfJMELcVZYOkjceZILGBYx4wb76TICRMXbWB2imcsIG8YMwp2O+EQ1RvlOVwe6F9Ho2Uf2tX7MgZFU0Q+G32Rtjrs1DyW6yBhCe/1NdAVSFNxbipgEsj5YZq8GFcrdtGMk6gr6jYDcuyig8fR9x3So5lIPlIEatHRz+tvUKd1Ln9yihu3zv9CIJBaWL+9r6Z4qCUd7WSZVZtA1O3GpVT15rDxasO3c2j7nvH2Sdy1jTddE/c9L6mVbeDg7lZEO3bHJSlTC6o68MOG6jLzaXQ6mVckt52DzAsMKDfoRUb/1f3cfg8V6oKo+NIvZ2oH6PPYgzyDzh/R/UF6OcxTLmGlOd7lxOfbtzD2TJdxV2sn+LfwKy15mbpGnBD0w2Yh6xaHbrKDXynBjo90tyO9BDwse4K8QBgE8Bi8InuWsbzKYDxfMYcH+Bz5jBoMofBFnMYbDNnDWCHOQx2mcNgjzkMvmDOOsCXzGEQModBxBwGT5gTADxlDoOvmMPga+Yw+IY59wG+ZQ6DmDkMEuYw2Nd0ayhzixd0F6htUBXowPQTFvewONRUGbK/44Vhf28Qs38wiKk/aro9pP7EC0P92SCm/mIQU3/VdGdI/Y0Xhvq7QUz9wyCmPtMvxnKZwV9GvkuFA8ouNp/z98T7B8IaQLYAAQAB//8AD3icvXoLdBzVmWb999arq6urqrurq1qtVqvf3Xp0S271Q5bktizJlixLQviFLWPjMMYYmwDreHjaDhs7jMMQnDCEIQzD4ixhciaZJBhIMkxmc84G2ITMznCSxewunD1hZpaYMEuGHLJnx5Ga/W9VSxYOxmb2nD1qVd1X3br/f//H9/+3OJ7j3v8XepZ6OZ1r53q41ZxvWBns60pFTZXnC12ZkClKiWQ2VylXa4mSlbugXsN6qlm3m/25Zr0P6/Sspc3v1k2wNPq4br5iaQtVp0Ze0s0vYN+fuX3bNetVU1844vYd06w9407Ruf5oWfnHE5plaXgB8z85V501cPz777//FD2FdFBO5ULcKkZHbyxoeHnCIR12osL+UsnsKkhAuQgaWHVgq5dSSyRgb43R0ed3F98OMZBCfSXrDLzXUOG97Va88SfkmBkPECsaXqeKR+LWwlkrBkckFYa70vEQ3GZX9S16GFKFunTyzJm4tb1xm26ScCTMG/6zkgI4Bzaq4tnuYYBeKx7WthhV62Sd43Dl3Pv76Xa6kQtyES7FKd9NtIZMXaKFLlxIyN/kvN/lvI0ry/ZANuhPsbUn/LTPsGL2QsCOQdyC96yqPvlTQfqW+OJZbGlsIkeNcnjhqNNLD+PNMrI/NaRvSfPfJkMx+635J3EJnHzBGua4a7ibuDu4u7nQcODIXbfefNO1O3fM1NyFyZe3MLDsal/JtiQzJYmsTWS3HijnsjXcg6pthaq1aq2IxUFg40QpJEoWVGsaBEW7Witjb3IV5Mo5igWcms0gZFNWX6l2CarhG4G2RHyj3yMD0HTrVPKu3VtKsqRRkQjVoixAW3vW9Mmy6Fd9kiIAgNTeeDfW05Z/1SMB5YFgy7qpTSB6uqJ63IDd2nBnq0wuzU3YoPn5Vp8BJGQFfIkHeBGIqNn9EQGX0rN6al1xa9SS1QgFayy3o/Gub4NVgnftEm8Si+JbQZUbn4/pgpxZ1VtvlzQD2P7wF+zPlUzOc2l3P/jL249gqC/YF0SWV/pw4TaW+yqpUJ8k6pDKFSFHU9Qt41N9lUsweDB39bYJHpkLQMjE9h25P8M9aVavXH0lYXcCtFa6DI69N9g4CbpX8wgamHzjXfg3g4O/8WqqSgIC9DZe9sm8qmre3wxehA+rMh+LD7UQ0l2rE6nPjJF2SLFqrubyQoMlBmDVli7Bha/9aecAxR0GnvBkqOvfZw/cmH20YyXBrQZKxcHOr2T3f/LSHDg2ODjHK0xQeJ7ODQ4+/Njg4HZeoSCI0nZW5YQL6K5xI5w+rA70l5q0Cx+D9grqT51kc9kuCPX5a6yOumhK4iWoPfXd8lSXnemGzlRr4W/LXxwZbfO3JwOXRd9OjzqxY8RQBhsvPfqQEiyU/B4m1xfS1cn1Mbp6ujo/Hl2ZUKJSs2tCMluulizzUpSQYwsvHBh/tfH3hXp9rl6/NAXnTh84MH5mnA2eYzZbRL+zn+/Bdfu5EjfIjXFb0WL6h7Wd2zePj9ZXVuKmRERcO/oZ9C7lvlIMaqWaGDKh6XXKdQEbSR1Wo8ErxXgbO9zVY6EIdWIJ6FJT2Vy1Us6hxauDXcotDdkwN7ChMAxr+c6RRDZDybGNo43w2CzwqhHPDiTEdHFidl1LhyGl+rNxQ4OFFzffuhl/8Lmj376bHH7mThitFzesnCvQTCYxlufXjjf7d9Gx7u4XrAj4QsZMY8fIzMxIrH+kv5y1wtEIsYyIQqxsuX8kSk4Osgc2N361/Si58zu3i8d/1lWEMbpmxgj5wmFodiOvCO7xUzRIVUQaeU5+NpvUCEGI4TKigoywkRGlOkF+CJSRWMctpwFG0uhGXg3EkCIh2z01OdmblJL9+aipiM8gHfzt37t1ZHRmZhRXWO1PRkg4FsYfrm+gPgRnth11aOWogxHOkh9yLag34+hfR4cK6LPRv2b86FEkjXRBkolTDgXMtBACVIMVrDJEI0omwgHexg2gqwHdVlMSa02sQE8FQl/aHk0PtZJI3V/c9lAooIq0ih6fULQM8y9haePP+XggHlaJNxIzY8LPY+Xxcmb+pXQVyhlazZS98A3Tf3ASGRzRspMH/WZjs6woZKOmCQKhqrhrzVMkqlkyKKYRoU+FN1YWTmXKUE2TazLlMgculkP62jnx6aAXUOz8putrmxin0lxtG/papuwIzyRJV97YNdK4bXTXrlH43MiuNxRdkixy/8Ljtocqb1zttJ9g16vfUChqq4O1UOa9iBZc1Ii2tzvdbuuKSJntNTVwpdNRRsgw7jX5iYqbtZexjikxXOeqExmaf+f0HLRBbP4YcgvZx3CVciXy6JjLoyOZMvEX6mRk6/Bwo3HuwNPboe2UIi/MIZtk8qSkBhfmXIY8yW5Nu/JD5MlTnAftSh318ypmVzZtGB2pJoOqyKFdyTDoUa4xyFHOSknUzRhUGX4tVWtmSCQ6IAtzKKA4LpctI2ZB1jH+IUC0JCuI1AQt22QCBCmGaLK5GvpVBDBdvf2QvHvLLthveNftMSxjrNdrvDT4y8GooEhjnpbZe0pe79b5Py6V2gWFat60Fzyhbev/lD/ntXKbXz/ccduP1q7ZmapcG/fecEVq/6rRgTXHvwDXew3Ys1bVSEDpHTN+n4cbGnM3lDw5UZE607dP+zsDxx5Wqh5RNEUQGgszd0ehJbIzGEwXdu+fVI7fsGd4dXpPOcjJjj7soEXcR79jdbu5CvJonGG9dWuG+vt6OnPJtrBpeEUiO4paJLitNqomGiawwNVRx1IttmhQhGoMMk5LdbELCzn2NBsS6h0pktJw77udQ3nS3V9sfL06USWlqRJZl64mSbaUbxQHNvaToZk6wPA23O3NY1CIFWMk2Zm8NZINk2gytifRC8WxYvHzsU5nGliPGjBZLjfeiKTT5TTJw+sdbIoh0j/i2vbGTYi8u+PxfwxESThviUnuXxv7rIIPxj6svjz2qV009mmoLHiB99zQ5x1WoQEn8mk84sQysPdjRz7cx6ajdgk6ah9NB7AYji2FhXDAQjiHju1uzxFnZeSYbv5/o+NisWjto2NRuOzax6SE6dX/oW8to+MKxAQ3c59menX4Uwf27Ng0NTrU15VuDaoU9cpZZzP2rPU15WgpFm3KXbM+yLRtGV2O/cQ6c1yLzy/vty+I2fua9dSy508q8gFmaD/qSrehmQ04Vpm8I6nzT168Dz6iduviQ9jw8rJX/K3TIh5AO96YWjaGHGFNbrkx/eEP/N35IWjvl3jv49q4AreKm2b2fnLNylJHIuL3UrT3QfQ/zMuXVzsGapm01y7Q4uXcq13AvcXxZxRdOCXgT1doQJHnh5xF0udd0k85N3LNh9SWjSTJxg+wgpMYwuPCB1lwETZ9gOrldGtcjCuiFZ9hdG8YGejrTLYGFJ7RjfZFdN1uqR3+nwl/Hpeq46LYkmn6X0k5fEZGqhUZ1sgKztP4p49JuYg247/Qt8gvHB+WwLhhgJtk+Hvd6moxn46FdK+Dv2sMS5fR/VSWoHOT3EUrCMs7Fs2hYzaWmUtWP+OiFffHtvw8/Jj/Xx/WCssrw93DZOjqITL866Zbenu5uHOLjTdKiiKxC1jnKedcevfjPk+jZWGyvZP7JHeE0XvHwRs+seOK9WtKiQhFetFHS8lcDeMFRDJSrsqCi0pSzIUwyAtJMQiGUgxx0xpDPFKOQRqM/DSMhSvCBfQDewbBTyUlShgehy7sv5A/r9S7h9Lt0bgRHtR4LawonrRn8LlKNAkv8dFk3qIBX4vZ46vG8/3ZYhbG6fQHWfhXQwCCnZ8apDMX5WK1UILMihbDSPHtYqDdJwOB2JYVa8ROGNluKm1FDAB8mgHxRDRezEeLkZiePO3Kjayo8M/9/WPFkKSYneNv/NeLsboZr2xHnbqauxHjlX27Z8sYrwRZVgCxMwbPGLDVJBvRoSSGUKNsq9nq/FXKRXBiCR2QbbZVc2Nr9tcGJhvrIEaGzxmuXMXyYTmolLPIXDbCwcutIZ5YybbJQG9xjb/dD5BIJ7wSyLTFTK5YMbCiPdyqmB6Vl3lClWC4X4aeg12jCiUtVgeVQZCpKuuhTUOrrtx5fNTn8WhjtI4K+BPGClqRFXIGYAXhCQGQOwRNGjn16NquRDBiKAHTaI93XNXdP7sikVFNANKLKJCEJN4ngUg9mu4VvT/95KrOSHqNP1jePNq97bkbNBPm30mzydMuE6nDQ9enr0A+Kt+tlyxD5FhOk4Uhy0QJYXPWQd22w0gM+pEruWyKAXKnxZb6ljjoRjVZl22VGoYZiLhjhIXHGCZn6Rm2hvkh52r4Wr/0xehIui6KMpWq0diKseENk7dhMGkef5O3fa1mR3dHYWy4MBOXBYCVfo/ImyvG8uktfYUg7EJamIQgQelgS7XvupNeyQwVxpKKToRN7X1rVnRMJb0thu+k1VZfGYsGI62K6rNlSZDkodas2QL5kCnE8+G2sWxP3mjK1b/QbeR9tFdrUa5WpgLA4uBQilGUcnJvlb5aDi9MqPqqq0lfKCXZGE4xDtX5iqO0qI0oZY7a8qi28Js/3O7DjRQEz9YvjN90/dQj06wKgjZzcu31B+HxxhtAY53lzljSamuR1UHdLN4+FekuFqP0M1t3ft4WJNWr/eHOrzy869NhQRTE8Kd3femrcNendENJDaWzVtYfikJI0sumPz3S315OxsPJQKFJz366Hd5BekaRnv7LpEcIJXrgd8ixTY1eBjmnGm8Q8kFyCndOQra/2g0XJ+eOT+mRZcSIhktMZiAbz1qFJZ1n5wgSN4u0+GXKIS0gOZqdhVqdr7VCnx10DgdQJtklJIl2kkWOqfJqwkwt/nLlbA/RwMZYEomuMcFNMlnOifCla6YG2r2h3kYFfOlo1BKPPzohHgx2rPb0Gl7ZO+XhASB1f7rz0RBZL4nUzxOBkqQd/q02AEbcGw8RIPHPxAWTFEjktzj48w2xmxdFJWzANnhQbbzXvefLwcPxFtFjUEuRBKqAHA4aLLtNWG7RM1fth8TDuhpQcGrwhgSvKoK8pK9BqnAm+tKdqK9ruhKW18mRIAdQt4o8mjukBpWSsnQUqZWLJJeUTIu1msAC4DpFlGCwoblqGiFrDH0E7moMJLylGKskqHZkfmrr+WR/Npk3gKd2tjhWjUJ8oJ6NFkSAxs/AM2PyIq6XqMSMRaKU1EBbP5WbXFeKByLFdNvWQ5Afnru63HJty+AtEPir4QxKpELEbYOxHaEyPMRr6eGe3EASjWz0lrZCTIs0aIVosmRYWlRIkzQKhkj4Iihasnsy11aKJQ3NvGlzba4/a/CAvtbJqTxFBlEeBjnx6ZIBha4Q86VsiwOrMNZlTpZtcAlbXHOuA7sSnYghlA+RiQXuPNt7SSl0mgZC+QFfsltRgr2b0+2t/bkakf2zpkAFtMP6mCeA++/ZRSQxLBoj+nQ2utc/06t6lWDmK49B0tQkmQ4QHAqE8lZUND2Kz1Zino2Nl4ubipaiUD3cTtBdOucFzvrpC7j+o7j+MQ7XLySzzpLQ1paQEMfvoBHW0SfFwInupaURuLvVSs5fq2Zxk1Po+FimBL2eVao6gEFEohiZ6KrcmYqk8rv9QZyZ4rz06y3Xlq5t0bRAJO4JgBRqnLAkCHmSMRM0X2Tfil3otANWDPvQ3fC8LMj+NtUCVYvs691tsediniBIOtyjSRBUilFNC+/p2R3WNDOMEghBTzwaAPUKng/7/AFZ8I7+d1Wg9OdX+ATeCGhhcDoMnpd8o+3woqYGwmHDFBA8qKbTG2G9gjrzPKqJenoGgxbVWtbhm1749Qg28ppfDzu24tv0l8jbVu5TaCs25YMCs3sli+FstH0YrbG8NAszUEQwRvMDMyOIklB+iO1aBVFy2JpDUcoiEsuKaApxNNoU17gw0O7YlpyzGWUnbMuyPUuiSmGN/ueg4h33xvFfCRQKgaVKsHv+vph0c8u1YejzSFQOoyEAYhmaH80hUFmWVZqJRjuD7NgLGS5au0wCwa7H0tGDrcRTGtIUFDKeipsDYyHD1Gx52NTndPyZZGixtPA8eUln51W8wiapHykYMgn3tFpZQN119rEQ+29PzOXb8wE17LE0GQCFM6kHDMn+Dyt/PrBe0gyFSpo+MgC68krTBt+IuEvh5rj7GO7aUWU2OOjyrlZl6ta3nHUOSsi6olhBu4Qc+xDe1RFkZBHv5lCaq9nz/IOSa8pNHe01y1VlawmsOWUWJaLJt0xLtNH5VsvVgsvRe39v/N6ALwc05NcMxk7RQ5P+dd11i0lTk5mUBDsfy6DpIUppyIfscHAWMOUVN9snTIen5DXJSPjjPMpwQk+rCOQIWXgB+Ska8XjA1DSaTMZ0BZ8mg/isShWH3fiWwOoj3Q6zI6E8SLi1PCnEtrRtrV2d+11uax55ZPfUbsIbfEso3x0nkqGO9RPk+ELVa6txQJnxt6qWYhkmeBUDC2Hdj40kFjFRPQIB4rQ2bcpfoE3UMMIWn0ZTjf6xarGjmRywxLmTjGAnNCxZYfurNZL0apq3cUggzcSJc0XPQ72iPv+SJqtwnyA2PruYD7O0xmclngOMab9Jhqh+/j226ISvNsKI5vxS8301vyi1KAZoXpyLOpkYNx8DVBjH19AqvqZxiJfgLvYCN/kGd4nCoo1kOH8FvqebByeFTdiJkpMjYLLE0v5FgiJmWy55qITtwMKmGKHbxw4+vnX3N4d4YUr08x23jg7sm+0kxakbb96Tn/YH7XNIbbd/YuiRjVc9dmgEduF1bON6UeOnBRArA8Wp/Yf2TxXzmWmjYGnnwsHAxMr62KHHHPv9fqO5tl5cW0eCra2Z7lkNTIRJjLI8dR2cjxXQ8ySLpI5Nll2rWnS7aZyzg/7pjbcM7J/q5fObr62P3NrB+8UpgYhD37zmqsdvmeCHb394x8aHV00YBfLDc5pVMKanm0saqIggTPOaODkLuKBv4rrrKycCwUWctAPXlebGUUdX5w2e4SQzpAFjnCS6qJ5tEXpExkAnKGL1YJOAqkOBA+bd9JUThdoMBNIN6X/88pUPD014o7hNuCjimc7vqU1+JifagooBmoaEOa0bb9ngNt6MIWL6zS9f+Qh7KAxo6h56DhfrdR63ot7pTH6yrvT7VPhes2HarYt8cyC3FF8vP1/dwO1g8fXcxvWrFs9Yxcs8Z3fMPtogm7HA8Qi1hMXgAbNaq9FuVR3pouhUg80NpBrkLnFm+QJvCFGJ7t2LViQqasJRWSarZPkor0lRNDHNdoO+LskwDaqccu/S5RzASzSEQeAfnMBpQ7z0Na+ieL8mEgEbxRN/ILFGIjauwknhZZxVIKrU6MWCixv/krfIc4gb09xKxI3lXDysEIYbURZyzI7CeX6YQF0uLBLucflTZlxx8nKo4iZsi+KLG/OiCLxg8FFRfO01EcZeJpqYlEV4maoSI+5GHKGJUUF47TVBQI6w0WuxiiaUlUXsMvjXXxM1MrPQg+jJgzExeRknUIjWuL8x7z702uv4LnwF1g2u6dvZWVoGJUB+dn01qRD3aCuVZJ+fsIRsJVuuVhDxSzV0L+iHynWEusAAlAP626mJCsm8U44dIFmunubKOXaouf+ZA72ldVtCrQg00JbzlAISq/FrZ2D/M2ee2X9mdkxQ5VYPL/Bo2RW5NbRlXan3j2+J++eeGFk7Bb6JzfDV6eNTnhW2wCsSQhSgIk4SE8IBI39odOb41NTx10dvzWmWkvBSQVSAyApyxl7hmaSlnvI9k12dudu5pfiN0Wpzq5DWgaTXiXkYbjYR3CKxKKi2A/aL8EEW5CrZatKJeOpkNbg8iMcA3jv44iGYXd+r+yJb1obbc0msk9v/I9x9z5sncp03/VFrmsoac4RU5X0YNhiSvm0P3PMmGG/eQw7j4usHO6LVUiE1FKLCzPGHj880/v4TT+zmP5GVBNWDDBF0QbPkaDTYWXpgM/bsfsLR3adoYCnvPojR6PVMd6+ZGh6qruhKtQa9LDcGTZdRWXJRH10P+hN+DOMQ49YB+nA3U6IkODbM30yk+1OL1o5FP87BIMvDx9w0CLucPF+838klOFmFiYaKygsvE1lufO5cKy88JfLwtiJXy5lGb6YMFTbuGzlPt3Xa6pZzf4Eb+N3GD1gjy5cq8kXKjT3Ev/Ar1VQUk1y3BtGdsAnfuPCr4thIkQSdRezE8Ddm7nTzXOwckByjm7gc14f7v6I74sg6y+uF2AcLjEjERYNQQYWtsCwqi/5K1ZxTRo+vgWMFY0COPXHnSfa9m6/xJ87t5B1PghW14MG/eYjg/eS+h/bCvgf3w4/HD3/HN4kt+Jv0fefwuDN6fN8DD+xzij9u/MPkPnLjBLRN7id7XR/959RPg5wX/aBE0A+iyXC2iFkKyi+0+gIBH/mfPphu7JEU5u9VGUvmon+fc+RCfNpL3XPx5s41c5joKOd/5R74+HWL/OL84ZzV9HVzTbmSn2ViRH53DuFD5mz8gzMntOlWw/uB6gdeoS1/HSe5OTPUR5bTXjyVneWCw8bUyKr+ck9Xtt0yvBKRCl2IZ5NijFSDeNfQjlbRfRahGYPGWKCazSx2wdKYpQL7OiDhnG3XCSKZM50D3SRfz34S//litfftldTAuLs/UZW93dsmfZ4IbF08tX24OeZ/N+/fukIx539tKlfMHv/+j75/fPbvFk9mrWbhn1/RIqJqvEK7E11T4WJXYjizOOTfNgtXNO//44uH/f67Htj7vRMzMye+t8xGoV82uA7cg7BfdmwUAkATGeF8Vsg8DDiWV2QoKOfkAxG908/mhqDlLzdUR8f3QBn2JBrd1mQPkAfvGNs/wj6Ai8cVW9bSnf0DdGM5l1rROLW2b9+6iR4YjS38oLPuzd/2IJTnDo74NStgZspxS3TOKq+hb6LOeBAprOQ+wc4qt63ptv0+aekbiBw7ThCWSghZs5LzLQRLHpGqVQ2xWMZ2DvlKaEF59g0Cg0O5bK0HWJE5D5YXxXF+91RGwmDcgl+s27MOJq6dANsp/N66o+nuhQd74hCOFILlaEkrZXVBD/L1UEDNemPBWD7ZedPYfT1D6ZGBrl4CESC93QMj6cGe+8a0cMhXzpK/zlRBDYXh2eIIWdfdMzLSUxyBsQIW/ggO9XZCtq9xwucxJJYxwcDOQGfVh4EIAVk0NH3Tyn933epgIBId/o74/eFoJGCuvu6xlZtCMUOGY/kB6O9oHJH1mGOj3TNeinLOIucutNNoo2u9+XbbUGSRJxza6Eyiksjhf6avkoJl55eMBcELzj+DF5xvYpy0t/HIGTK08Dxc9+qrELvsg97hiTPjr44vnL3fablfxxACtJNOJHGSNYHh3FiTxS3ZBQX1dB/K5JVxkX3P5KoZmkd2Xo24T7IQ7zAggABnCexWcg5GZvtbdj4ZcQJZJIAll7KLX5m0wxJoZoKCyJjlwRFBOdlHMrjx9o1k66GtEJWlfYo3mBcFfdYnSdMtEY/EG4dl1Wi1rxANcZ3FC3Je0eW9CJcUYZ+s2Rl3rDwdjnhk6j+M6FmPWrOCLk2YPD+oefZKCuxyv926nfUasVBrCXFSaBaEIZ88FTUU6XqPOiSIwzFETmpJj7bqCDOdsS2ReEFSJXPWHarLsjNUGGWAbtoZ6PqdH9K3yFNcGCMv+dlCm99DFo/52SW5dEjbBsyguueXq2DpULLinmTSs4q8wKHsSKcF4Wl2EMux01RWWuDco0ZO0bDzr9kBD/sXTwuGcFpQ5AMK5GUcqYoHnIMf/GG7u7cv0VN0GPW7E9eW8UuOzUe9RPwq1Wx2mBq0QiY7hmDBTqVcCzrfCGVqbE2CRe78+tv7b/inr3f87GcN/Se9YCvqb8/5Qir0/kRrh/BRb1w9AuE4JL+aeuWV1FffvvlmOK3qLzTe4uWodPy4FFB4GewXdDUk5Bu23cgLi/k8d11x9GWtHidWdVfCAPWHroSeYu9XQx/+/reaL/UacJHX0vcXUM6vQZ01uQRXRGzflWkPG5Sej0Vd8NP8PsFmn9dT9kljzcmiEAcWw3uKfJpBlCMO/jm78d4n75slm0/8+T1b7zr44tkf3STe+f33njtKkueapy3P4+C/2XTvZjJ7/1fux5H3bvr95w8dev6X7PJ/Aa/hTtUAAAB4nGNgZGBgAOJbJ3coxvPbfGXgZn4BFGG4MDHDHkLb8f//+z+eRZ85GMjlYGACiQIAcBwMtwAAAHicY2BkYGAO+p/FEMWiz8Dw/zuLAQNQBAVYAgBxTQSxeJxjfsHAwAzCC4A4Ejtm0QfSglB1L6B8EDsbIYYTRyLRkVB7gGYxWaOqAfHBYtjshqkD6WuCuiUSyWxs9i1A+AkA1xkgtAAAAAAAAABkAMYBCAHYAlwC2ANEA6AENgR2BOYFGgVwBf4GfgbiB0YHqghoCOQJYAnYCo4LMAu6DCIMiA0IDZAN8A6eD0oQGhBOEIIQ0BEcEYgSJBKMEwITZhQCFFQUchSSFMoVVBWcFjgWnhc+F4wX2BgSGFwAAQAAADkAjQAIAAAAAAACAAAAEABzAAAAJgtwAAAAAHicjZDNSsNAFIVP+qNowYWK61lJizT9QTfdKBQUd+Ki4HJspklKmgmTqbVrH8KVLyP4CK4En8WTdCgiFZowyXfPvXO49wI4xDc8rJ4LnhV7OGa04gp2ceu4Sv3OcY0cOK6jgWfHO9RfHO/jDK+OGzjCOx282h6jKT4de2h6l44rOPBCx1Xqc8c18pvjOk68D8c71L8c72NUqTpu4LTyMNTZ0sRhZEVz2BL9bu9cPC6FphSnMhFybiNtcnElJjq1Kkm0P9azguVC5Xqm2spGymQyuFfhPJFmU2qTNlImj3Uqen53U/pGpcpIq4Kim/wp7Fs7EROjZ+La9SEyo6dqbP3I2mzQ6fzuD0NoZFjCIEaICBYCTaot/vvooodz0iMrBCtXVTFSSCRUJOa8EZWZnPEVz4RRSlWxIiH7GPM7W+sSC+byUlNo8xQOig4ZcwHuySF9E0Zm61vb1o1KzjlDUS84n88pt719Q07LWJYTBuvd5Hhi132qlm7FFkzpInD9Zx+CXkVuSmVM3S+3bqkO0OH7z/5+AL0IrQ0AAAB4nG2RV7ObMBCFOTa4gJ2b3ntvpLf7c2SxgGIhaaQlXP/7CMhj9mHn02w7c5Qskjny5P9xniRYYIkUGVZYY4MtchTYYY9LOMNlXMFVXMN13MBN3MJt3MFd3MN9PMBDPMJjPMFTPMNzvMBLvMJrvMFbvMN7lPiAj/iEz/iCr/iG7/iBn/iF81xo1ZhSU82Z88rwsrJyUytNpavq7QSD9VU+EV1I0mdz1Q7knY0Tc0l1oqGsD+RDOua0E0pv/qiKrBTd2inJvac1nai0db0OThlDfjefl2SYfDE/vGpa3s/8uw+s6lOqVeBCmSr2TVp3/3jqLcZqeei1Jt5PbPruQJ6qbR/bvFaGVoG9OlIRehcVSq8cb0N/mCmtreH0YHW1UhwPy1VLIg4WTBdctjQeySceVMXthm0ZWHheRSBTLaUcFnLYCu/tEMpIkyPSVpTOqRW8l7brRsnUOT4V7EVoZ152SqZOi1Ma2LrMiWhf1og+2nnwfWjzoKOLoRWeMhbhGJbSNpv4Fa0wDeWjknlROmImtZXHJPkLtt6xoQAAeJxj8N7BcCIoYiMjY1/kBsadHAwcDMkFGxlYnTYyMGhBaA4UeicDAwMnMouZwWWjCmNHYMQGh46IjcwpLhvVQLxdHA0MjCwOHckhESAlkUCwkYFHawfj/9YNLL0bmRhcAAfTIrgAAAA=",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": 312,
          "bodySize": 0,
          "_transferSize": 312
        },
        "cache": {},
        "timings": {
          "blocked": 44.4340000003649,
          "dns": 0.011000000085900297,
          "connect": 0.3360000000612047,
          "send": 0.12299999980309906,
          "wait": 71.6499999998629,
          "receive": 23.598000000675157,
          "ssl": -1
        },
        "connection": "3670",
        "pageref": "page_2"
      },
      {
        "startedDateTime": "2015-06-09T16:53:04.963Z",
        "time": 29.786000000058266,
        "request": {
          "method": "GET",
          "url": "http://localhost:9001/pluginfw/plugin-definitions.json",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Cookie",
              "value": "token=t.ltaoBcvzTd2Qbc9Uqjas; express_sid=s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo"
            },
            {
              "name": "DNT",
              "value": "1"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, sdch"
            },
            {
              "name": "Host",
              "value": "localhost:9001"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.8,de;q=0.6"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.81 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "application/json, text/javascript, */*; q=0.01"
            },
            {
              "name": "Referer",
              "value": "http://localhost:9001/p/bla"
            },
            {
              "name": "X-Requested-With",
              "value": "XMLHttpRequest"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            }
          ],
          "queryString": [],
          "cookies": [
            {
              "name": "token",
              "value": "t.ltaoBcvzTd2Qbc9Uqjas",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "express_sid",
              "value": "s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo",
              "expires": null,
              "httpOnly": false,
              "secure": false
            }
          ],
          "headersSize": 574,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Date",
              "value": "Tue, 09 Jun 2015 16:53:04 GMT"
            },
            {
              "name": "X-UA-Compatible",
              "value": "IE=Edge,chrome=1"
            },
            {
              "name": "Server",
              "value": "Etherpad d11c92c (http://etherpad.org)"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            },
            {
              "name": "Transfer-Encoding",
              "value": "chunked"
            },
            {
              "name": "Content-Type",
              "value": "application/json; charset=utf-8"
            }
          ],
          "cookies": [],
          "content": {
            "size": 1548,
            "mimeType": "application/json",
            "compression": -12,
            "text": "{\"plugins\":{\"ep_headings2\":{\"parts\":[{\"name\":\"main\",\"client_hooks\":{\"aceEditorCSS\":\"ep_headings2/static/js/index\",\"aceEditEvent\":\"ep_headings2/static/js/index\",\"aceDomLineProcessLineAttributes\":\"ep_headings2/static/js/index\",\"postAceInit\":\"ep_headings2/static/js/index\",\"aceInitialized\":\"ep_headings2/static/js/index\",\"aceAttribsToClasses\":\"ep_headings2/static/js/index\",\"collectContentPre\":\"ep_headings2/static/js/shared\",\"aceRegisterBlockElements\":\"ep_headings2/static/js/index\"},\"hooks\":{\"eejsBlock_editbarMenuLeft\":\"ep_headings2/index\",\"collectContentPre\":\"ep_headings2/static/js/shared\",\"collectContentPost\":\"ep_headings2/static/js/shared\",\"getLineHTMLForExport\":\"ep_headings2/index\",\"stylesForExport\":\"ep_headings2/index\"},\"plugin\":\"ep_headings2\",\"full_name\":\"ep_headings2/main\"}]}},\"parts\":[{\"name\":\"main\",\"client_hooks\":{\"aceEditorCSS\":\"ep_headings2/static/js/index\",\"aceEditEvent\":\"ep_headings2/static/js/index\",\"aceDomLineProcessLineAttributes\":\"ep_headings2/static/js/index\",\"postAceInit\":\"ep_headings2/static/js/index\",\"aceInitialized\":\"ep_headings2/static/js/index\",\"aceAttribsToClasses\":\"ep_headings2/static/js/index\",\"collectContentPre\":\"ep_headings2/static/js/shared\",\"aceRegisterBlockElements\":\"ep_headings2/static/js/index\"},\"hooks\":{\"eejsBlock_editbarMenuLeft\":\"ep_headings2/index\",\"collectContentPre\":\"ep_headings2/static/js/shared\",\"collectContentPost\":\"ep_headings2/static/js/shared\",\"getLineHTMLForExport\":\"ep_headings2/index\",\"stylesForExport\":\"ep_headings2/index\"},\"plugin\":\"ep_headings2\",\"full_name\":\"ep_headings2/main\"}]}"
          },
          "redirectURL": "",
          "headersSize": 261,
          "bodySize": 1560,
          "_transferSize": 1821
        },
        "cache": {},
        "timings": {
          "blocked": 16.0700000005818,
          "dns": -1,
          "connect": -1,
          "send": 0.11499999982330067,
          "wait": 11.4720000001398,
          "receive": 2.128999999513365,
          "ssl": -1
        },
        "connection": "3652",
        "pageref": "page_2"
      },
      {
        "startedDateTime": "2015-06-09T16:53:05.020Z",
        "time": 94.0839999993841,
        "request": {
          "method": "GET",
          "url": "http://localhost:9001/javascripts/lib/ep_etherpad-lite/static/js/ace2_inner.js?callback=require.define",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "DNT",
              "value": "1"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, sdch"
            },
            {
              "name": "Host",
              "value": "localhost:9001"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.8,de;q=0.6"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.81 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Referer",
              "value": "http://localhost:9001/p/bla"
            },
            {
              "name": "Cookie",
              "value": "token=t.ltaoBcvzTd2Qbc9Uqjas; express_sid=s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "If-Modified-Since",
              "value": "Wed, 03 Jun 2015 18:13:43 GMT"
            }
          ],
          "queryString": [
            {
              "name": "callback",
              "value": "require.define"
            }
          ],
          "cookies": [
            {
              "name": "token",
              "value": "t.ltaoBcvzTd2Qbc9Uqjas",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "express_sid",
              "value": "s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo",
              "expires": null,
              "httpOnly": false,
              "secure": false
            }
          ],
          "headersSize": 595,
          "bodySize": 0
        },
        "response": {
          "status": 304,
          "statusText": "Not Modified",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "date",
              "value": "Tue, 09 Jun 2015 16:53:05 GMT"
            },
            {
              "name": "x-content-type-options",
              "value": "nosniff"
            },
            {
              "name": "last-modified",
              "value": "Wed, 03 Jun 2015 18:13:43 GMT"
            },
            {
              "name": "Server",
              "value": "Etherpad d11c92c (http://etherpad.org)"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            },
            {
              "name": "content-type",
              "value": "application/javascript; charset=utf-8"
            },
            {
              "name": "cache-control",
              "value": "max-age=21600"
            },
            {
              "name": "X-UA-Compatible",
              "value": "IE=Edge,chrome=1"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "expires",
              "value": "Tue, 09 Jun 2015 22:53:05 GMT"
            }
          ],
          "cookies": [],
          "content": {
            "size": 332500,
            "mimeType": "application/javascript",
            "text": "require.define({\n  \"ep_etherpad-lite/static/js/ace2_inner.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code.\n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _, $, jQuery, plugins, Ace2Common;\n\nvar browser = require('./browser').browser;\nif(browser.msie){\n  // Honestly fuck IE royally.\n  // Basically every hack we have since V11 causes a problem\n  if(parseInt(browser.version) >= 11){\n    delete browser.msie;\n    browser.chrome = true;\n    browser.modernIE = true;\n  }\n}\n\nAce2Common = require('./ace2_common');\n\nplugins = require('ep_etherpad-lite/static/js/pluginfw/client_plugins');\n$ = jQuery = require('./rjquery').$;\n_ = require(\"./underscore\");\n\nvar isNodeText = Ace2Common.isNodeText,\n  getAssoc = Ace2Common.getAssoc,\n  setAssoc = Ace2Common.setAssoc,\n  isTextNode = Ace2Common.isTextNode,\n  binarySearchInfinite = Ace2Common.binarySearchInfinite,\n  htmlPrettyEscape = Ace2Common.htmlPrettyEscape,\n  noop = Ace2Common.noop;\nvar hooks = require('./pluginfw/hooks');\n\nfunction Ace2Inner(){\n\n  var makeChangesetTracker = require('./changesettracker').makeChangesetTracker;\n  var colorutils = require('./colorutils').colorutils;\n  var makeContentCollector = require('./contentcollector').makeContentCollector;\n  var makeCSSManager = require('./cssmanager').makeCSSManager;\n  var domline = require('./domline').domline;\n  var AttribPool = require('./AttributePool');\n  var Changeset = require('./Changeset');\n  var ChangesetUtils = require('./ChangesetUtils');\n  var linestylefilter = require('./linestylefilter').linestylefilter;\n  var SkipList = require('./skiplist');\n  var undoModule = require('./undomodule').undoModule;\n  var AttributeManager = require('./AttributeManager');\n\n  var DEBUG = false; //$$ build script replaces the string \"var DEBUG=true;//$$\" with \"var DEBUG=false;\"\n  // changed to false\n  var isSetUp = false;\n\n  var THE_TAB = '    '; //4\n  var MAX_LIST_LEVEL = 16;\n\n  var LINE_NUMBER_PADDING_RIGHT = 4;\n  var LINE_NUMBER_PADDING_LEFT = 4;\n  var MIN_LINEDIV_WIDTH = 20;\n  var EDIT_BODY_PADDING_TOP = 8;\n  var EDIT_BODY_PADDING_LEFT = 8;\n\n  var caughtErrors = [];\n\n  var thisAuthor = '';\n\n  var disposed = false;\n  var editorInfo = parent.editorInfo;\n\n  var iframe = window.frameElement;\n  var outerWin = iframe.ace_outerWin;\n  iframe.ace_outerWin = null; // prevent IE 6 memory leak\n  var sideDiv = iframe.nextSibling;\n  var lineMetricsDiv = sideDiv.nextSibling;\n  initLineNumbers();\n\n  var outsideKeyDown = noop;\n\n  var outsideKeyPress = function(){return true;};\n\n  var outsideNotifyDirty = noop;\n\n  // selFocusAtStart -- determines whether the selection extends \"backwards\", so that the focus\n  // point (controlled with the arrow keys) is at the beginning; not supported in IE, though\n  // native IE selections have that behavior (which we try not to interfere with).\n  // Must be false if selection is collapsed!\n  var rep = {\n    lines: new SkipList(),\n    selStart: null,\n    selEnd: null,\n    selFocusAtStart: false,\n    alltext: \"\",\n    alines: [],\n    apool: new AttribPool()\n  };\n\n  // lines, alltext, alines, and DOM are set up in init()\n  if (undoModule.enabled)\n  {\n    undoModule.apool = rep.apool;\n  }\n\n  var root, doc; // set in init()\n  var isEditable = true;\n  var doesWrap = true;\n  var hasLineNumbers = true;\n  var isStyled = true;\n\n  // space around the innermost iframe element\n  var iframePadLeft = MIN_LINEDIV_WIDTH + LINE_NUMBER_PADDING_RIGHT + EDIT_BODY_PADDING_LEFT;\n  var iframePadTop = EDIT_BODY_PADDING_TOP;\n  var iframePadBottom = 0,\n      iframePadRight = 0;\n\n  var console = (DEBUG && window.console);\n  var documentAttributeManager;\n\n  if (!window.console)\n  {\n    var names = [\"log\", \"debug\", \"info\", \"warn\", \"error\", \"assert\", \"dir\", \"dirxml\", \"group\", \"groupEnd\", \"time\", \"timeEnd\", \"count\", \"trace\", \"profile\", \"profileEnd\"];\n    console = {};\n    for (var i = 0; i < names.length; ++i)\n    console[names[i]] = noop;\n    //console.error = function(str) { alert(str); };\n  }\n\n  var PROFILER = window.PROFILER;\n  if (!PROFILER)\n  {\n    PROFILER = function()\n    {\n      return {\n        start: noop,\n        mark: noop,\n        literal: noop,\n        end: noop,\n        cancel: noop\n      };\n    };\n  }\n\n  // \"dmesg\" is for displaying messages in the in-page output pane\n  // visible when \"?djs=1\" is appended to the pad URL.  It generally\n  // remains a no-op unless djs is enabled, but we make a habit of\n  // only calling it in error cases or while debugging.\n  var dmesg = noop;\n  window.dmesg = noop;\n\n  var scheduler = parent; // hack for opera required\n\n  var textFace = 'monospace';\n  var textSize = 12;\n\n\n  function textLineHeight()\n  {\n    return Math.round(textSize * 4 / 3);\n  }\n\n  var dynamicCSS = null;\n  var outerDynamicCSS = null;\n  var parentDynamicCSS = null;\n\n  function initDynamicCSS()\n  {\n    dynamicCSS = makeCSSManager(\"dynamicsyntax\");\n    outerDynamicCSS = makeCSSManager(\"dynamicsyntax\", \"outer\");\n    parentDynamicCSS = makeCSSManager(\"dynamicsyntax\", \"parent\");\n  }\n\n  var changesetTracker = makeChangesetTracker(scheduler, rep.apool, {\n    withCallbacks: function(operationName, f)\n    {\n      inCallStackIfNecessary(operationName, function()\n      {\n        fastIncorp(1);\n        f(\n        {\n          setDocumentAttributedText: function(atext)\n          {\n            setDocAText(atext);\n          },\n          applyChangesetToDocument: function(changeset, preferInsertionAfterCaret)\n          {\n            var oldEventType = currentCallStack.editEvent.eventType;\n            currentCallStack.startNewEvent(\"nonundoable\");\n\n            performDocumentApplyChangeset(changeset, preferInsertionAfterCaret);\n\n            currentCallStack.startNewEvent(oldEventType);\n          }\n        });\n      });\n    }\n  });\n\n  var authorInfos = {}; // presence of key determines if author is present in doc\n\n  function getAuthorInfos(){\n    return authorInfos;\n  };\n  editorInfo.ace_getAuthorInfos= getAuthorInfos;\n\n  function setAuthorStyle(author, info)\n  {\n    if (!dynamicCSS) {\n      return;\n    }\n    var authorSelector = getAuthorColorClassSelector(getAuthorClassName(author));\n\n    var authorStyleSet = hooks.callAll('aceSetAuthorStyle', {\n      dynamicCSS: dynamicCSS,\n      parentDynamicCSS: parentDynamicCSS,\n      outerDynamicCSS: outerDynamicCSS,\n      info: info,\n      author: author,\n      authorSelector: authorSelector,\n    });\n\n    // Prevent default behaviour if any hook says so\n    if (_.any(authorStyleSet, function(it) { return it }))\n    {\n      return\n    }\n\n    if (!info)\n    {\n      dynamicCSS.removeSelectorStyle(authorSelector);\n      parentDynamicCSS.removeSelectorStyle(authorSelector);\n    }\n    else\n    {\n      if (info.bgcolor)\n      {\n        var bgcolor = info.bgcolor;\n        if ((typeof info.fade) == \"number\")\n        {\n          bgcolor = fadeColor(bgcolor, info.fade);\n        }\n\n        var authorStyle = dynamicCSS.selectorStyle(authorSelector);\n        var parentAuthorStyle = parentDynamicCSS.selectorStyle(authorSelector);\n        var anchorStyle = dynamicCSS.selectorStyle(authorSelector + ' > a')\n\n        // author color\n        authorStyle.backgroundColor = bgcolor;\n        parentAuthorStyle.backgroundColor = bgcolor;\n\n        // text contrast\n        if(colorutils.luminosity(colorutils.css2triple(bgcolor)) < 0.5)\n        {\n          authorStyle.color = '#ffffff';\n          parentAuthorStyle.color = '#ffffff';\n        }else{\n          authorStyle.color = null;\n          parentAuthorStyle.color = null;\n        }\n\n        // anchor text contrast\n        if(colorutils.luminosity(colorutils.css2triple(bgcolor)) < 0.55)\n        {\n          anchorStyle.color = colorutils.triple2css(colorutils.complementary(colorutils.css2triple(bgcolor)));\n        }else{\n          anchorStyle.color = null;\n        }\n      }\n    }\n  }\n\n  function setAuthorInfo(author, info)\n  {\n    if ((typeof author) != \"string\")\n    {\n      throw new Error(\"setAuthorInfo: author (\" + author + \") is not a string\");\n    }\n    if (!info)\n    {\n      delete authorInfos[author];\n    }\n    else\n    {\n      authorInfos[author] = info;\n    }\n    setAuthorStyle(author, info);\n  }\n\n  function getAuthorClassName(author)\n  {\n    return \"author-\" + author.replace(/[^a-y0-9]/g, function(c)\n    {\n      if (c == \".\") return \"-\";\n      return 'z' + c.charCodeAt(0) + 'z';\n    });\n  }\n\n  function className2Author(className)\n  {\n    if (className.substring(0, 7) == \"author-\")\n    {\n      return className.substring(7).replace(/[a-y0-9]+|-|z.+?z/g, function(cc)\n      {\n        if (cc == '-') return '.';\n        else if (cc.charAt(0) == 'z')\n        {\n          return String.fromCharCode(Number(cc.slice(1, -1)));\n        }\n        else\n        {\n          return cc;\n        }\n      });\n    }\n    return null;\n  }\n\n  function getAuthorColorClassSelector(oneClassName)\n  {\n    return \".authorColors .\" + oneClassName;\n  }\n\n  function setUpTrackingCSS()\n  {\n    if (dynamicCSS)\n    {\n      var backgroundHeight = lineMetricsDiv.offsetHeight;\n      var lineHeight = textLineHeight();\n      var extraBodding = 0;\n      var extraTodding = 0;\n      if (backgroundHeight < lineHeight)\n      {\n        extraBodding = Math.ceil((lineHeight - backgroundHeight) / 2);\n        extraTodding = lineHeight - backgroundHeight - extraBodding;\n      }\n      var spanStyle = dynamicCSS.selectorStyle(\"#innerdocbody span\");\n      spanStyle.paddingTop = extraTodding + \"px\";\n      spanStyle.paddingBottom = extraBodding + \"px\";\n    }\n  }\n\n  function fadeColor(colorCSS, fadeFrac)\n  {\n    var color = colorutils.css2triple(colorCSS);\n    color = colorutils.blend(color, [1, 1, 1], fadeFrac);\n    return colorutils.triple2css(color);\n  }\n\n  editorInfo.ace_getRep = function()\n  {\n    return rep;\n  };\n\n  editorInfo.ace_getAuthor = function()\n  {\n    return thisAuthor;\n  }\n\n  var currentCallStack = null;\n\n  function inCallStack(type, action)\n  {\n    if (disposed) return;\n\n    if (currentCallStack)\n    {\n      console.error(\"Can't enter callstack \" + type + \", already in \" + currentCallStack.type);\n    }\n\n    var profiling = false;\n\n    function profileRest()\n    {\n      profiling = true;\n      console.profile();\n    }\n\n    function newEditEvent(eventType)\n    {\n      return {\n        eventType: eventType,\n        backset: null\n      };\n    }\n\n    function submitOldEvent(evt)\n    {\n      if (rep.selStart && rep.selEnd)\n      {\n        var selStartChar = rep.lines.offsetOfIndex(rep.selStart[0]) + rep.selStart[1];\n        var selEndChar = rep.lines.offsetOfIndex(rep.selEnd[0]) + rep.selEnd[1];\n        evt.selStart = selStartChar;\n        evt.selEnd = selEndChar;\n        evt.selFocusAtStart = rep.selFocusAtStart;\n      }\n      if (undoModule.enabled)\n      {\n        var undoWorked = false;\n        try\n        {\n          if (evt.eventType == \"setup\" || evt.eventType == \"importText\" || evt.eventType == \"setBaseText\")\n          {\n            undoModule.clearHistory();\n          }\n          else if (evt.eventType == \"nonundoable\")\n          {\n            if (evt.changeset)\n            {\n              undoModule.reportExternalChange(evt.changeset);\n            }\n          }\n          else\n          {\n            undoModule.reportEvent(evt);\n          }\n          undoWorked = true;\n        }\n        finally\n        {\n          if (!undoWorked)\n          {\n            undoModule.enabled = false; // for safety\n          }\n        }\n      }\n    }\n\n    function startNewEvent(eventType, dontSubmitOld)\n    {\n      var oldEvent = currentCallStack.editEvent;\n      if (!dontSubmitOld)\n      {\n        submitOldEvent(oldEvent);\n      }\n      currentCallStack.editEvent = newEditEvent(eventType);\n      return oldEvent;\n    }\n\n    currentCallStack = {\n      type: type,\n      docTextChanged: false,\n      selectionAffected: false,\n      userChangedSelection: false,\n      domClean: false,\n      profileRest: profileRest,\n      isUserChange: false,\n      // is this a \"user change\" type of call-stack\n      repChanged: false,\n      editEvent: newEditEvent(type),\n      startNewEvent: startNewEvent\n    };\n    var cleanExit = false;\n    var result;\n    try\n    {\n      result = action();\n\n      hooks.callAll('aceEditEvent', {\n        callstack: currentCallStack,\n        editorInfo: editorInfo,\n        rep: rep,\n        documentAttributeManager: documentAttributeManager\n      });\n\n      //console.log(\"Just did action for: \"+type);\n      cleanExit = true;\n    }\n    catch (e)\n    {\n      caughtErrors.push(\n      {\n        error: e,\n        time: +new Date()\n      });\n      dmesg(e.toString());\n      throw e;\n    }\n    finally\n    {\n      var cs = currentCallStack;\n      //console.log(\"Finished action for: \"+type);\n      if (cleanExit)\n      {\n        submitOldEvent(cs.editEvent);\n        if (cs.domClean && cs.type != \"setup\")\n        {\n          // if (cs.isUserChange)\n          // {\n          //  if (cs.repChanged) parenModule.notifyChange();\n          //  else parenModule.notifyTick();\n          // }\n          if (cs.selectionAffected)\n          {\n            updateBrowserSelectionFromRep();\n          }\n          if ((cs.docTextChanged || cs.userChangedSelection) && cs.type != \"applyChangesToBase\")\n          {\n            scrollSelectionIntoView();\n          }\n          if (cs.docTextChanged && cs.type.indexOf(\"importText\") < 0)\n          {\n            outsideNotifyDirty();\n          }\n        }\n      }\n      else\n      {\n        // non-clean exit\n        if (currentCallStack.type == \"idleWorkTimer\")\n        {\n          idleWorkTimer.atLeast(1000);\n        }\n      }\n      currentCallStack = null;\n      if (profiling) console.profileEnd();\n    }\n    return result;\n  }\n  editorInfo.ace_inCallStack = inCallStack;\n\n  function inCallStackIfNecessary(type, action)\n  {\n    if (!currentCallStack)\n    {\n      inCallStack(type, action);\n    }\n    else\n    {\n      action();\n    }\n  }\n  editorInfo.ace_inCallStackIfNecessary = inCallStackIfNecessary;\n\n  function dispose()\n  {\n    disposed = true;\n    if (idleWorkTimer) idleWorkTimer.never();\n    teardown();\n  }\n\n  function checkALines()\n  {\n    return; // disable for speed\n\n\n    function error()\n    {\n      throw new Error(\"checkALines\");\n    }\n    if (rep.alines.length != rep.lines.length())\n    {\n      error();\n    }\n    for (var i = 0; i < rep.alines.length; i++)\n    {\n      var aline = rep.alines[i];\n      var lineText = rep.lines.atIndex(i).text + \"\\n\";\n      var lineTextLength = lineText.length;\n      var opIter = Changeset.opIterator(aline);\n      var alineLength = 0;\n      while (opIter.hasNext())\n      {\n        var o = opIter.next();\n        alineLength += o.chars;\n        if (opIter.hasNext())\n        {\n          if (o.lines !== 0) error();\n        }\n        else\n        {\n          if (o.lines != 1) error();\n        }\n      }\n      if (alineLength != lineTextLength)\n      {\n        error();\n      }\n    }\n  }\n\n  function setWraps(newVal)\n  {\n    doesWrap = newVal;\n    var dwClass = \"doesWrap\";\n    setClassPresence(root, \"doesWrap\", doesWrap);\n    scheduler.setTimeout(function()\n    {\n      inCallStackIfNecessary(\"setWraps\", function()\n      {\n        fastIncorp(7);\n        recreateDOM();\n        fixView();\n      });\n    }, 0);\n\n    // Chrome can't handle the truth..  If CSS rule white-space:pre-wrap\n    // is true then any paste event will insert two lines..\n    // Sadly this will mean you get a walking Caret in Chrome when clicking on a URL\n    // So this has to be set to pre-wrap ;(\n    // We need to file a bug w/ the Chromium team.\n    if(browser.chrome){\n      $(\"#innerdocbody\").addClass(\"noprewrap\");\n    }\n\n  }\n\n  function setStyled(newVal)\n  {\n    var oldVal = isStyled;\n    isStyled = !! newVal;\n\n    if (newVal != oldVal)\n    {\n      if (!newVal)\n      {\n        // clear styles\n        inCallStackIfNecessary(\"setStyled\", function()\n        {\n          fastIncorp(12);\n          var clearStyles = [];\n          for (var k in STYLE_ATTRIBS)\n          {\n            clearStyles.push([k, '']);\n          }\n          performDocumentApplyAttributesToCharRange(0, rep.alltext.length, clearStyles);\n        });\n      }\n    }\n  }\n\n  function setTextFace(face)\n  {\n    textFace = face;\n    root.style.fontFamily = textFace;\n    lineMetricsDiv.style.fontFamily = textFace;\n    scheduler.setTimeout(function()\n    {\n      setUpTrackingCSS();\n    }, 0);\n  }\n\n  function setTextSize(size)\n  {\n    textSize = size;\n    root.style.fontSize = textSize + \"px\";\n    root.style.lineHeight = textLineHeight() + \"px\";\n    sideDiv.style.lineHeight = textLineHeight() + \"px\";\n    lineMetricsDiv.style.fontSize = textSize + \"px\";\n    scheduler.setTimeout(function()\n    {\n      setUpTrackingCSS();\n    }, 0);\n  }\n\n  function recreateDOM()\n  {\n    // precond: normalized\n    recolorLinesInRange(0, rep.alltext.length);\n  }\n\n  function setEditable(newVal)\n  {\n    isEditable = newVal;\n\n    // the following may fail, e.g. if iframe is hidden\n    if (!isEditable)\n    {\n      setDesignMode(false);\n    }\n    else\n    {\n      setDesignMode(true);\n    }\n    setClassPresence(root, \"static\", !isEditable);\n  }\n\n  function enforceEditability()\n  {\n    setEditable(isEditable);\n  }\n\n  function importText(text, undoable, dontProcess)\n  {\n    var lines;\n    if (dontProcess)\n    {\n      if (text.charAt(text.length - 1) != \"\\n\")\n      {\n        throw new Error(\"new raw text must end with newline\");\n      }\n      if (/[\\r\\t\\xa0]/.exec(text))\n      {\n        throw new Error(\"new raw text must not contain CR, tab, or nbsp\");\n      }\n      lines = text.substring(0, text.length - 1).split('\\n');\n    }\n    else\n    {\n      lines = _.map(text.split('\\n'), textify);\n    }\n    var newText = \"\\n\";\n    if (lines.length > 0)\n    {\n      newText = lines.join('\\n') + '\\n';\n    }\n\n    inCallStackIfNecessary(\"importText\" + (undoable ? \"Undoable\" : \"\"), function()\n    {\n      setDocText(newText);\n    });\n\n    if (dontProcess && rep.alltext != text)\n    {\n      throw new Error(\"mismatch error setting raw text in importText\");\n    }\n  }\n\n  function importAText(atext, apoolJsonObj, undoable)\n  {\n    atext = Changeset.cloneAText(atext);\n    if (apoolJsonObj)\n    {\n      var wireApool = (new AttribPool()).fromJsonable(apoolJsonObj);\n      atext.attribs = Changeset.moveOpsToNewPool(atext.attribs, wireApool, rep.apool);\n    }\n    inCallStackIfNecessary(\"importText\" + (undoable ? \"Undoable\" : \"\"), function()\n    {\n      setDocAText(atext);\n    });\n  }\n\n  function setDocAText(atext)\n  {\n    fastIncorp(8);\n\n    var oldLen = rep.lines.totalWidth();\n    var numLines = rep.lines.length();\n    var upToLastLine = rep.lines.offsetOfIndex(numLines - 1);\n    var lastLineLength = rep.lines.atIndex(numLines - 1).text.length;\n    var assem = Changeset.smartOpAssembler();\n    var o = Changeset.newOp('-');\n    o.chars = upToLastLine;\n    o.lines = numLines - 1;\n    assem.append(o);\n    o.chars = lastLineLength;\n    o.lines = 0;\n    assem.append(o);\n    Changeset.appendATextToAssembler(atext, assem);\n    var newLen = oldLen + assem.getLengthChange();\n    var changeset = Changeset.checkRep(\n    Changeset.pack(oldLen, newLen, assem.toString(), atext.text.slice(0, -1)));\n    performDocumentApplyChangeset(changeset);\n\n    performSelectionChange([0, rep.lines.atIndex(0).lineMarker], [0, rep.lines.atIndex(0).lineMarker]);\n\n    idleWorkTimer.atMost(100);\n\n    if (rep.alltext != atext.text)\n    {\n      dmesg(htmlPrettyEscape(rep.alltext));\n      dmesg(htmlPrettyEscape(atext.text));\n      throw new Error(\"mismatch error setting raw text in setDocAText\");\n    }\n  }\n\n  function setDocText(text)\n  {\n    setDocAText(Changeset.makeAText(text));\n  }\n\n  function getDocText()\n  {\n    var alltext = rep.alltext;\n    var len = alltext.length;\n    if (len > 0) len--; // final extra newline\n    return alltext.substring(0, len);\n  }\n\n  function exportText()\n  {\n    if (currentCallStack && !currentCallStack.domClean)\n    {\n      inCallStackIfNecessary(\"exportText\", function()\n      {\n        fastIncorp(2);\n      });\n    }\n    return getDocText();\n  }\n\n  function editorChangedSize()\n  {\n    fixView();\n  }\n\n  function setOnKeyPress(handler)\n  {\n    outsideKeyPress = handler;\n  }\n\n  function setOnKeyDown(handler)\n  {\n    outsideKeyDown = handler;\n  }\n\n  function setNotifyDirty(handler)\n  {\n    outsideNotifyDirty = handler;\n  }\n\n  function getFormattedCode()\n  {\n    if (currentCallStack && !currentCallStack.domClean)\n    {\n      inCallStackIfNecessary(\"getFormattedCode\", incorporateUserChanges);\n    }\n    var buf = [];\n    if (rep.lines.length() > 0)\n    {\n      // should be the case, even for empty file\n      var entry = rep.lines.atIndex(0);\n      while (entry)\n      {\n        var domInfo = entry.domInfo;\n        buf.push((domInfo && domInfo.getInnerHTML()) || domline.processSpaces(domline.escapeHTML(entry.text), doesWrap) || '&nbsp;' /*empty line*/ );\n        entry = rep.lines.next(entry);\n      }\n    }\n    return '<div class=\"syntax\"><div>' + buf.join('</div>\\n<div>') + '</div></div>';\n  }\n\n  var CMDS = {\n    clearauthorship: function(prompt)\n    {\n      if ((!(rep.selStart && rep.selEnd)) || isCaret())\n      {\n        if (prompt)\n        {\n          prompt();\n        }\n        else\n        {\n          performDocumentApplyAttributesToCharRange(0, rep.alltext.length, [\n            ['author', '']\n          ]);\n        }\n      }\n      else\n      {\n        setAttributeOnSelection('author', '');\n      }\n    }\n  };\n\n  function execCommand(cmd)\n  {\n    cmd = cmd.toLowerCase();\n    var cmdArgs = Array.prototype.slice.call(arguments, 1);\n    if (CMDS[cmd])\n    {\n      inCallStackIfNecessary(cmd, function()\n      {\n        fastIncorp(9);\n        CMDS[cmd].apply(CMDS, cmdArgs);\n      });\n    }\n  }\n\n  function replaceRange(start, end, text)\n  {\n    inCallStackIfNecessary('replaceRange', function()\n    {\n      fastIncorp(9);\n      performDocumentReplaceRange(start, end, text);\n    });\n  }\n\n  editorInfo.ace_focus = focus;\n  editorInfo.ace_importText = importText;\n  editorInfo.ace_importAText = importAText;\n  editorInfo.ace_exportText = exportText;\n  editorInfo.ace_editorChangedSize = editorChangedSize;\n  editorInfo.ace_setOnKeyPress = setOnKeyPress;\n  editorInfo.ace_setOnKeyDown = setOnKeyDown;\n  editorInfo.ace_setNotifyDirty = setNotifyDirty;\n  editorInfo.ace_dispose = dispose;\n  editorInfo.ace_getFormattedCode = getFormattedCode;\n  editorInfo.ace_setEditable = setEditable;\n  editorInfo.ace_execCommand = execCommand;\n  editorInfo.ace_replaceRange = replaceRange;\n  editorInfo.ace_getAuthorInfos= getAuthorInfos;\n  editorInfo.ace_performDocumentReplaceRange = performDocumentReplaceRange;\n  editorInfo.ace_performDocumentReplaceCharRange = performDocumentReplaceCharRange;\n  editorInfo.ace_renumberList = renumberList;\n  editorInfo.ace_doReturnKey = doReturnKey;\n  editorInfo.ace_isBlockElement = isBlockElement;\n  editorInfo.ace_getLineListType = getLineListType;\n\n  editorInfo.ace_callWithAce = function(fn, callStack, normalize)\n  {\n    var wrapper = function()\n    {\n      return fn(editorInfo);\n    };\n\n    if (normalize !== undefined)\n    {\n      var wrapper1 = wrapper;\n      wrapper = function()\n      {\n        editorInfo.ace_fastIncorp(9);\n        wrapper1();\n      };\n    }\n\n    if (callStack !== undefined)\n    {\n      return editorInfo.ace_inCallStack(callStack, wrapper);\n    }\n    else\n    {\n      return wrapper();\n    }\n  };\n\n  // This methed exposes a setter for some ace properties\n  // @param key the name of the parameter\n  // @param value the value to set to\n  editorInfo.ace_setProperty = function(key, value)\n  {\n\n    // Convinience function returning a setter for a class on an element\n    var setClassPresenceNamed = function(element, cls){\n      return function(value){\n         setClassPresence(element, cls, !! value)\n      }\n    };\n\n    // These properties are exposed\n    var setters = {\n      wraps: setWraps,\n      showsauthorcolors: setClassPresenceNamed(root, \"authorColors\"),\n      showsuserselections: setClassPresenceNamed(root, \"userSelections\"),\n      showslinenumbers : function(value){\n        hasLineNumbers = !! value;\n        // disable line numbers on mobile devices\n        if (browser.mobile) hasLineNumbers = false;\n        setClassPresence(sideDiv, \"sidedivhidden\", !hasLineNumbers);\n        fixView();\n      },\n      grayedout: setClassPresenceNamed(outerWin.document.body, \"grayedout\"),\n      dmesg: function(){ dmesg = window.dmesg = value; },\n      userauthor: function(value){\n        thisAuthor = String(value);\n        documentAttributeManager.author = thisAuthor;\n      },\n      styled: setStyled,\n      textface: setTextFace,\n      textsize: setTextSize,\n      rtlistrue: function(value) {\n        setClassPresence(root, \"rtl\", value)\n        setClassPresence(root, \"ltr\", !value)\n        document.documentElement.dir = value? 'rtl' : 'ltr'\n      }\n    };\n\n    var setter = setters[key.toLowerCase()];\n\n    // check if setter is present\n    if(setter !== undefined){\n      setter(value)\n    }\n  };\n\n  editorInfo.ace_setBaseText = function(txt)\n  {\n    changesetTracker.setBaseText(txt);\n  };\n  editorInfo.ace_setBaseAttributedText = function(atxt, apoolJsonObj)\n  {\n    setUpTrackingCSS();\n    changesetTracker.setBaseAttributedText(atxt, apoolJsonObj);\n  };\n  editorInfo.ace_applyChangesToBase = function(c, optAuthor, apoolJsonObj)\n  {\n    changesetTracker.applyChangesToBase(c, optAuthor, apoolJsonObj);\n  };\n  editorInfo.ace_prepareUserChangeset = function()\n  {\n    return changesetTracker.prepareUserChangeset();\n  };\n  editorInfo.ace_applyPreparedChangesetToBase = function()\n  {\n    changesetTracker.applyPreparedChangesetToBase();\n  };\n  editorInfo.ace_setUserChangeNotificationCallback = function(f)\n  {\n    changesetTracker.setUserChangeNotificationCallback(f);\n  };\n  editorInfo.ace_setAuthorInfo = function(author, info)\n  {\n    setAuthorInfo(author, info);\n  };\n  editorInfo.ace_setAuthorSelectionRange = function(author, start, end)\n  {\n    changesetTracker.setAuthorSelectionRange(author, start, end);\n  };\n\n  editorInfo.ace_getUnhandledErrors = function()\n  {\n    return caughtErrors.slice();\n  };\n\n  editorInfo.ace_getDocument = function()\n  {\n    return doc;\n  };\n\n  editorInfo.ace_getDebugProperty = function(prop)\n  {\n    if (prop == \"debugger\")\n    {\n      // obfuscate \"eval\" so as not to scare yuicompressor\n      window['ev' + 'al'](\"debugger\");\n    }\n    else if (prop == \"rep\")\n    {\n      return rep;\n    }\n    else if (prop == \"window\")\n    {\n      return window;\n    }\n    else if (prop == \"document\")\n    {\n      return document;\n    }\n    return undefined;\n  };\n\n  function now()\n  {\n    return (new Date()).getTime();\n  }\n\n  function newTimeLimit(ms)\n  {\n    //console.debug(\"new time limit\");\n    var startTime = now();\n    var lastElapsed = 0;\n    var exceededAlready = false;\n    var printedTrace = false;\n    var isTimeUp = function()\n      {\n        if (exceededAlready)\n        {\n          if ((!printedTrace))\n          { // && now() - startTime - ms > 300) {\n            //console.trace();\n            printedTrace = true;\n          }\n          return true;\n        }\n        var elapsed = now() - startTime;\n        if (elapsed > ms)\n        {\n          exceededAlready = true;\n          //console.debug(\"time limit hit, before was %d/%d\", lastElapsed, ms);\n          //console.trace();\n          return true;\n        }\n        else\n        {\n          lastElapsed = elapsed;\n          return false;\n        }\n      };\n\n    isTimeUp.elapsed = function()\n    {\n      return now() - startTime;\n    };\n    return isTimeUp;\n  }\n\n\n  function makeIdleAction(func)\n  {\n    var scheduledTimeout = null;\n    var scheduledTime = 0;\n\n    function unschedule()\n    {\n      if (scheduledTimeout)\n      {\n        scheduler.clearTimeout(scheduledTimeout);\n        scheduledTimeout = null;\n      }\n    }\n\n    function reschedule(time)\n    {\n      unschedule();\n      scheduledTime = time;\n      var delay = time - now();\n      if (delay < 0) delay = 0;\n      scheduledTimeout = scheduler.setTimeout(callback, delay);\n    }\n\n    function callback()\n    {\n      scheduledTimeout = null;\n      // func may reschedule the action\n      func();\n    }\n    return {\n      atMost: function(ms)\n      {\n        var latestTime = now() + ms;\n        if ((!scheduledTimeout) || scheduledTime > latestTime)\n        {\n          reschedule(latestTime);\n        }\n      },\n      // atLeast(ms) will schedule the action if not scheduled yet.\n      // In other words, \"infinity\" is replaced by ms, even though\n      // it is technically larger.\n      atLeast: function(ms)\n      {\n        var earliestTime = now() + ms;\n        if ((!scheduledTimeout) || scheduledTime < earliestTime)\n        {\n          reschedule(earliestTime);\n        }\n      },\n      never: function()\n      {\n        unschedule();\n      }\n    };\n  }\n\n  function fastIncorp(n)\n  {\n    // normalize but don't do any lexing or anything\n    incorporateUserChanges(newTimeLimit(0));\n  }\n  editorInfo.ace_fastIncorp = fastIncorp;\n\n  var idleWorkTimer = makeIdleAction(function()\n  {\n\n    //if (! top.BEFORE) top.BEFORE = [];\n    //top.BEFORE.push(magicdom.root.dom.innerHTML);\n    //if (! isEditable) return; // and don't reschedule\n    if (inInternationalComposition)\n    {\n      // don't do idle input incorporation during international input composition\n      idleWorkTimer.atLeast(500);\n      return;\n    }\n\n    inCallStackIfNecessary(\"idleWorkTimer\", function()\n    {\n\n      var isTimeUp = newTimeLimit(250);\n\n      //console.time(\"idlework\");\n      var finishedImportantWork = false;\n      var finishedWork = false;\n\n      try\n      {\n\n        // isTimeUp() is a soft constraint for incorporateUserChanges,\n        // which always renormalizes the DOM, no matter how long it takes,\n        // but doesn't necessarily lex and highlight it\n        incorporateUserChanges(isTimeUp);\n\n        if (isTimeUp()) return;\n\n        updateLineNumbers(); // update line numbers if any time left\n        if (isTimeUp()) return;\n\n        var visibleRange = getVisibleCharRange();\n        var docRange = [0, rep.lines.totalWidth()];\n        //console.log(\"%o %o\", docRange, visibleRange);\n        finishedImportantWork = true;\n        finishedWork = true;\n      }\n      finally\n      {\n        //console.timeEnd(\"idlework\");\n        if (finishedWork)\n        {\n          idleWorkTimer.atMost(1000);\n        }\n        else if (finishedImportantWork)\n        {\n          // if we've finished highlighting the view area,\n          // more highlighting could be counter-productive,\n          // e.g. if the user just opened a triple-quote and will soon close it.\n          idleWorkTimer.atMost(500);\n        }\n        else\n        {\n          var timeToWait = Math.round(isTimeUp.elapsed() / 2);\n          if (timeToWait < 100) timeToWait = 100;\n          idleWorkTimer.atMost(timeToWait);\n        }\n      }\n    });\n\n    //if (! top.AFTER) top.AFTER = [];\n    //top.AFTER.push(magicdom.root.dom.innerHTML);\n  });\n\n  var _nextId = 1;\n\n  function uniqueId(n)\n  {\n    // not actually guaranteed to be unique, e.g. if user copy-pastes\n    // nodes with ids\n    var nid = n.id;\n    if (nid) return nid;\n    return (n.id = \"magicdomid\" + (_nextId++));\n  }\n\n\n  function recolorLinesInRange(startChar, endChar, isTimeUp, optModFunc)\n  {\n    if (endChar <= startChar) return;\n    if (startChar < 0 || startChar >= rep.lines.totalWidth()) return;\n    var lineEntry = rep.lines.atOffset(startChar); // rounds down to line boundary\n    var lineStart = rep.lines.offsetOfEntry(lineEntry);\n    var lineIndex = rep.lines.indexOfEntry(lineEntry);\n    var selectionNeedsResetting = false;\n    var firstLine = null;\n    var lastLine = null;\n    isTimeUp = (isTimeUp || noop);\n\n    // tokenFunc function; accesses current value of lineEntry and curDocChar,\n    // also mutates curDocChar\n    var curDocChar;\n    var tokenFunc = function(tokenText, tokenClass)\n      {\n        lineEntry.domInfo.appendSpan(tokenText, tokenClass);\n        };\n    if (optModFunc)\n    {\n      var f = tokenFunc;\n      tokenFunc = function(tokenText, tokenClass)\n      {\n        optModFunc(tokenText, tokenClass, f, curDocChar);\n        curDocChar += tokenText.length;\n      };\n    }\n\n    while (lineEntry && lineStart < endChar && !isTimeUp())\n    {\n      //var timer = newTimeLimit(200);\n      var lineEnd = lineStart + lineEntry.width;\n\n      curDocChar = lineStart;\n      lineEntry.domInfo.clearSpans();\n      getSpansForLine(lineEntry, tokenFunc, lineStart);\n      lineEntry.domInfo.finishUpdate();\n\n      markNodeClean(lineEntry.lineNode);\n\n      if (rep.selStart && rep.selStart[0] == lineIndex || rep.selEnd && rep.selEnd[0] == lineIndex)\n      {\n        selectionNeedsResetting = true;\n      }\n\n      //if (timer()) console.dirxml(lineEntry.lineNode.dom);\n      if (firstLine === null) firstLine = lineIndex;\n      lastLine = lineIndex;\n      lineStart = lineEnd;\n      lineEntry = rep.lines.next(lineEntry);\n      lineIndex++;\n    }\n    if (selectionNeedsResetting)\n    {\n      currentCallStack.selectionAffected = true;\n    }\n    //console.debug(\"Recolored line range %d-%d\", firstLine, lastLine);\n  }\n\n  // like getSpansForRange, but for a line, and the func takes (text,class)\n  // instead of (width,class); excludes the trailing '\\n' from\n  // consideration by func\n\n\n  function getSpansForLine(lineEntry, textAndClassFunc, lineEntryOffsetHint)\n  {\n    var lineEntryOffset = lineEntryOffsetHint;\n    if ((typeof lineEntryOffset) != \"number\")\n    {\n      lineEntryOffset = rep.lines.offsetOfEntry(lineEntry);\n    }\n    var text = lineEntry.text;\n    var width = lineEntry.width; // text.length+1\n    if (text.length === 0)\n    {\n      // allow getLineStyleFilter to set line-div styles\n      var func = linestylefilter.getLineStyleFilter(\n      0, '', textAndClassFunc, rep.apool);\n      func('', '');\n    }\n    else\n    {\n      var offsetIntoLine = 0;\n      var filteredFunc = linestylefilter.getFilterStack(text, textAndClassFunc, browser);\n      var lineNum = rep.lines.indexOfEntry(lineEntry);\n      var aline = rep.alines[lineNum];\n      filteredFunc = linestylefilter.getLineStyleFilter(\n      text.length, aline, filteredFunc, rep.apool);\n      filteredFunc(text, '');\n    }\n  }\n\n  var observedChanges;\n\n  function clearObservedChanges()\n  {\n    observedChanges = {\n      cleanNodesNearChanges: {}\n    };\n  }\n  clearObservedChanges();\n\n  function getCleanNodeByKey(key)\n  {\n    var p = PROFILER(\"getCleanNodeByKey\", false);\n    p.extra = 0;\n    var n = doc.getElementById(key);\n    // copying and pasting can lead to duplicate ids\n    while (n && isNodeDirty(n))\n    {\n      p.extra++;\n      n.id = \"\";\n      n = doc.getElementById(key);\n    }\n    p.literal(p.extra, \"extra\");\n    p.end();\n    return n;\n  }\n\n  function observeChangesAroundNode(node)\n  {\n    // Around this top-level DOM node, look for changes to the document\n    // (from how it looks in our representation) and record them in a way\n    // that can be used to \"normalize\" the document (apply the changes to our\n    // representation, and put the DOM in a canonical form).\n    // top.console.log(\"observeChangesAroundNode(%o)\", node);\n    var cleanNode;\n    var hasAdjacentDirtyness;\n    if (!isNodeDirty(node))\n    {\n      cleanNode = node;\n      var prevSib = cleanNode.previousSibling;\n      var nextSib = cleanNode.nextSibling;\n      hasAdjacentDirtyness = ((prevSib && isNodeDirty(prevSib)) || (nextSib && isNodeDirty(nextSib)));\n    }\n    else\n    {\n      // node is dirty, look for clean node above\n      var upNode = node.previousSibling;\n      while (upNode && isNodeDirty(upNode))\n      {\n        upNode = upNode.previousSibling;\n      }\n      if (upNode)\n      {\n        cleanNode = upNode;\n      }\n      else\n      {\n        var downNode = node.nextSibling;\n        while (downNode && isNodeDirty(downNode))\n        {\n          downNode = downNode.nextSibling;\n        }\n        if (downNode)\n        {\n          cleanNode = downNode;\n        }\n      }\n      if (!cleanNode)\n      {\n        // Couldn't find any adjacent clean nodes!\n        // Since top and bottom of doc is dirty, the dirty area will be detected.\n        return;\n      }\n      hasAdjacentDirtyness = true;\n    }\n\n    if (hasAdjacentDirtyness)\n    {\n      // previous or next line is dirty\n      observedChanges.cleanNodesNearChanges['$' + uniqueId(cleanNode)] = true;\n    }\n    else\n    {\n      // next and prev lines are clean (if they exist)\n      var lineKey = uniqueId(cleanNode);\n      var prevSib = cleanNode.previousSibling;\n      var nextSib = cleanNode.nextSibling;\n      var actualPrevKey = ((prevSib && uniqueId(prevSib)) || null);\n      var actualNextKey = ((nextSib && uniqueId(nextSib)) || null);\n      var repPrevEntry = rep.lines.prev(rep.lines.atKey(lineKey));\n      var repNextEntry = rep.lines.next(rep.lines.atKey(lineKey));\n      var repPrevKey = ((repPrevEntry && repPrevEntry.key) || null);\n      var repNextKey = ((repNextEntry && repNextEntry.key) || null);\n      if (actualPrevKey != repPrevKey || actualNextKey != repNextKey)\n      {\n        observedChanges.cleanNodesNearChanges['$' + uniqueId(cleanNode)] = true;\n      }\n    }\n  }\n\n  function observeChangesAroundSelection()\n  {\n    if (currentCallStack.observedSelection) return;\n    currentCallStack.observedSelection = true;\n\n    var p = PROFILER(\"getSelection\", false);\n    var selection = getSelection();\n    p.end();\n\n    function topLevel(n)\n    {\n      if ((!n) || n == root) return null;\n      while (n.parentNode != root)\n      {\n        n = n.parentNode;\n      }\n      return n;\n    }\n\n    if (selection)\n    {\n      var node1 = topLevel(selection.startPoint.node);\n      var node2 = topLevel(selection.endPoint.node);\n      if (node1) observeChangesAroundNode(node1);\n      if (node2 && node1 != node2)\n      {\n        observeChangesAroundNode(node2);\n      }\n    }\n  }\n\n  function observeSuspiciousNodes()\n  {\n    // inspired by Firefox bug #473255, where pasting formatted text\n    // causes the cursor to jump away, making the new HTML never found.\n    if (root.getElementsByTagName)\n    {\n      var nds = root.getElementsByTagName(\"style\");\n      for (var i = 0; i < nds.length; i++)\n      {\n        var n = nds[i];\n        while (n.parentNode && n.parentNode != root)\n        {\n          n = n.parentNode;\n        }\n        if (n.parentNode == root)\n        {\n          observeChangesAroundNode(n);\n        }\n      }\n    }\n  }\n\n  function incorporateUserChanges(isTimeUp)\n  {\n\n    if (currentCallStack.domClean) return false;\n\n    currentCallStack.isUserChange = true;\n\n    isTimeUp = (isTimeUp ||\n    function()\n    {\n      return false;\n    });\n\n    if (DEBUG && window.DONT_INCORP || window.DEBUG_DONT_INCORP) return false;\n\n    var p = PROFILER(\"incorp\", false);\n\n    //if (doc.body.innerHTML.indexOf(\"AppJet\") >= 0)\n    //dmesg(htmlPrettyEscape(doc.body.innerHTML));\n    //if (top.RECORD) top.RECORD.push(doc.body.innerHTML);\n    // returns true if dom changes were made\n    if (!root.firstChild)\n    {\n      root.innerHTML = \"<div><!-- --></div>\";\n    }\n\n    p.mark(\"obs\");\n    observeChangesAroundSelection();\n    observeSuspiciousNodes();\n    p.mark(\"dirty\");\n    var dirtyRanges = getDirtyRanges();\n    //console.log(\"dirtyRanges: \"+toSource(dirtyRanges));\n    var dirtyRangesCheckOut = true;\n    var j = 0;\n    var a, b;\n    while (j < dirtyRanges.length)\n    {\n      a = dirtyRanges[j][0];\n      b = dirtyRanges[j][1];\n      if (!((a === 0 || getCleanNodeByKey(rep.lines.atIndex(a - 1).key)) && (b == rep.lines.length() || getCleanNodeByKey(rep.lines.atIndex(b).key))))\n      {\n        dirtyRangesCheckOut = false;\n        break;\n      }\n      j++;\n    }\n    if (!dirtyRangesCheckOut)\n    {\n      var numBodyNodes = root.childNodes.length;\n      for (var k = 0; k < numBodyNodes; k++)\n      {\n        var bodyNode = root.childNodes.item(k);\n        if ((bodyNode.tagName) && ((!bodyNode.id) || (!rep.lines.containsKey(bodyNode.id))))\n        {\n          observeChangesAroundNode(bodyNode);\n        }\n      }\n      dirtyRanges = getDirtyRanges();\n    }\n\n    clearObservedChanges();\n\n    p.mark(\"getsel\");\n    var selection = getSelection();\n\n    //console.log(magicdom.root.dom.innerHTML);\n    //console.log(\"got selection: %o\", selection);\n    var selStart, selEnd; // each one, if truthy, has [line,char] needed to set selection\n    var i = 0;\n    var splicesToDo = [];\n    var netNumLinesChangeSoFar = 0;\n    var toDeleteAtEnd = [];\n    p.mark(\"ranges\");\n    p.literal(dirtyRanges.length, \"numdirt\");\n    var domInsertsNeeded = []; // each entry is [nodeToInsertAfter, [info1, info2, ...]]\n    while (i < dirtyRanges.length)\n    {\n      var range = dirtyRanges[i];\n      a = range[0];\n      b = range[1];\n      var firstDirtyNode = (((a === 0) && root.firstChild) || getCleanNodeByKey(rep.lines.atIndex(a - 1).key).nextSibling);\n      firstDirtyNode = (firstDirtyNode && isNodeDirty(firstDirtyNode) && firstDirtyNode);\n      var lastDirtyNode = (((b == rep.lines.length()) && root.lastChild) || getCleanNodeByKey(rep.lines.atIndex(b).key).previousSibling);\n      lastDirtyNode = (lastDirtyNode && isNodeDirty(lastDirtyNode) && lastDirtyNode);\n      if (firstDirtyNode && lastDirtyNode)\n      {\n        var cc = makeContentCollector(isStyled, browser, rep.apool, null, className2Author);\n        cc.notifySelection(selection);\n        var dirtyNodes = [];\n        for (var n = firstDirtyNode; n && !(n.previousSibling && n.previousSibling == lastDirtyNode);\n        n = n.nextSibling)\n        {\n          if (browser.msie)\n          {\n            // try to undo IE's pesky and overzealous linkification\n            try\n            {\n              n.createTextRange().execCommand(\"unlink\", false, null);\n            }\n            catch (e)\n            {}\n          }\n          cc.collectContent(n);\n          dirtyNodes.push(n);\n        }\n        cc.notifyNextNode(lastDirtyNode.nextSibling);\n        var lines = cc.getLines();\n        if ((lines.length <= 1 || lines[lines.length - 1] !== \"\") && lastDirtyNode.nextSibling)\n        {\n          // dirty region doesn't currently end a line, even taking the following node\n          // (or lack of node) into account, so include the following clean node.\n          // It could be SPAN or a DIV; basically this is any case where the contentCollector\n          // decides it isn't done.\n          // Note that this clean node might need to be there for the next dirty range.\n          //console.log(\"inclusive of \"+lastDirtyNode.next().dom.tagName);\n          b++;\n          var cleanLine = lastDirtyNode.nextSibling;\n          cc.collectContent(cleanLine);\n          toDeleteAtEnd.push(cleanLine);\n          cc.notifyNextNode(cleanLine.nextSibling);\n        }\n\n        var ccData = cc.finish();\n        var ss = ccData.selStart;\n        var se = ccData.selEnd;\n        lines = ccData.lines;\n        var lineAttribs = ccData.lineAttribs;\n        var linesWrapped = ccData.linesWrapped;\n        var scrollToTheLeftNeeded = false;\n\n        if (linesWrapped > 0)\n        {\n          if(!browser.msie){\n            // chrome decides in it's infinite wisdom that its okay to put the browsers visisble window in the middle of the span\n            // an outcome of this is that the first chars of the string are no longer visible to the user..  Yay chrome..\n            // Move the browsers visible area to the left hand side of the span\n            // Firefox isn't quite so bad, but it's still pretty quirky.\n            var scrollToTheLeftNeeded = true;\n          }\n          // console.log(\"Editor warning: \" + linesWrapped + \" long line\" + (linesWrapped == 1 ? \" was\" : \"s were\") + \" hard-wrapped into \" + ccData.numLinesAfter + \" lines.\");\n        }\n\n        if (ss[0] >= 0) selStart = [ss[0] + a + netNumLinesChangeSoFar, ss[1]];\n        if (se[0] >= 0) selEnd = [se[0] + a + netNumLinesChangeSoFar, se[1]];\n\n        var entries = [];\n        var nodeToAddAfter = lastDirtyNode;\n        var lineNodeInfos = new Array(lines.length);\n        for (var k = 0; k < lines.length; k++)\n        {\n          var lineString = lines[k];\n          var newEntry = createDomLineEntry(lineString);\n          entries.push(newEntry);\n          lineNodeInfos[k] = newEntry.domInfo;\n        }\n        //var fragment = magicdom.wrapDom(document.createDocumentFragment());\n        domInsertsNeeded.push([nodeToAddAfter, lineNodeInfos]);\n        _.each(dirtyNodes,function(n){\n          toDeleteAtEnd.push(n);\n        });\n        var spliceHints = {};\n        if (selStart) spliceHints.selStart = selStart;\n        if (selEnd) spliceHints.selEnd = selEnd;\n        splicesToDo.push([a + netNumLinesChangeSoFar, b - a, entries, lineAttribs, spliceHints]);\n        netNumLinesChangeSoFar += (lines.length - (b - a));\n      }\n      else if (b > a)\n      {\n        splicesToDo.push([a + netNumLinesChangeSoFar, b - a, [],\n          []\n        ]);\n      }\n      i++;\n    }\n\n    var domChanges = (splicesToDo.length > 0);\n\n    // update the representation\n    p.mark(\"splice\");\n    _.each(splicesToDo, function(splice)\n    {\n      doIncorpLineSplice(splice[0], splice[1], splice[2], splice[3], splice[4]);\n    });\n\n    //p.mark(\"relex\");\n    //rep.lexer.lexCharRange(getVisibleCharRange(), function() { return false; });\n    //var isTimeUp = newTimeLimit(100);\n    // do DOM inserts\n    p.mark(\"insert\");\n    _.each(domInsertsNeeded,function(ins)\n    {\n      insertDomLines(ins[0], ins[1], isTimeUp);\n    });\n\n    p.mark(\"del\");\n    // delete old dom nodes\n    _.each(toDeleteAtEnd,function(n)\n    {\n      //var id = n.uniqueId();\n      // parent of n may not be \"root\" in IE due to non-tree-shaped DOM (wtf)\n      if(n.parentNode) n.parentNode.removeChild(n);\n\n      //dmesg(htmlPrettyEscape(htmlForRemovedChild(n)));\n      //console.log(\"removed: \"+id);\n    });\n\n    if(scrollToTheLeftNeeded){ // needed to stop chrome from breaking the ui when long strings without spaces are pasted\n      $(\"#innerdocbody\").scrollLeft(0);\n    }\n\n    p.mark(\"findsel\");\n    // if the nodes that define the selection weren't encountered during\n    // content collection, figure out where those nodes are now.\n    if (selection && !selStart)\n    {\n      //if (domChanges) dmesg(\"selection not collected\");\n      var selStartFromHook = hooks.callAll('aceStartLineAndCharForPoint', {\n        callstack: currentCallStack,\n        editorInfo: editorInfo,\n        rep: rep,\n        root:root,\n        point:selection.startPoint,\n        documentAttributeManager: documentAttributeManager\n      });\n      selStart = (selStartFromHook==null||selStartFromHook.length==0)?getLineAndCharForPoint(selection.startPoint):selStartFromHook;\n    }\n    if (selection && !selEnd)\n    {\n      var selEndFromHook = hooks.callAll('aceEndLineAndCharForPoint', {\n        callstack: currentCallStack,\n        editorInfo: editorInfo,\n        rep: rep,\n        root:root,\n        point:selection.endPoint,\n        documentAttributeManager: documentAttributeManager\n      });\n      selEnd = (selEndFromHook==null||selEndFromHook.length==0)?getLineAndCharForPoint(selection.endPoint):selEndFromHook;\n    }\n\n    // selection from content collection can, in various ways, extend past final\n    // BR in firefox DOM, so cap the line\n    var numLines = rep.lines.length();\n    if (selStart && selStart[0] >= numLines)\n    {\n      selStart[0] = numLines - 1;\n      selStart[1] = rep.lines.atIndex(selStart[0]).text.length;\n    }\n    if (selEnd && selEnd[0] >= numLines)\n    {\n      selEnd[0] = numLines - 1;\n      selEnd[1] = rep.lines.atIndex(selEnd[0]).text.length;\n    }\n\n    p.mark(\"repsel\");\n    // update rep if we have a new selection\n    // NOTE: IE loses the selection when you click stuff in e.g. the\n    // editbar, so removing the selection when it's lost is not a good\n    // idea.\n    if (selection) repSelectionChange(selStart, selEnd, selection && selection.focusAtStart);\n    // update browser selection\n    p.mark(\"browsel\");\n    if (selection && (domChanges || isCaret()))\n    {\n      // if no DOM changes (not this case), want to treat range selection delicately,\n      // e.g. in IE not lose which end of the selection is the focus/anchor;\n      // on the other hand, we may have just noticed a press of PageUp/PageDown\n      currentCallStack.selectionAffected = true;\n    }\n\n    currentCallStack.domClean = true;\n\n    p.mark(\"fixview\");\n\n    fixView();\n\n    p.end(\"END\");\n\n    return domChanges;\n  }\n\n  var STYLE_ATTRIBS = {\n    bold: true,\n    italic: true,\n    underline: true,\n    strikethrough: true,\n    list: true\n  };\n  var OTHER_INCORPED_ATTRIBS = {\n    insertorder: true,\n    author: true\n  };\n\n  function isStyleAttribute(aname)\n  {\n    return !!STYLE_ATTRIBS[aname];\n  }\n\n  function isIncorpedAttribute(aname)\n  {\n    return ( !! STYLE_ATTRIBS[aname]) || ( !! OTHER_INCORPED_ATTRIBS[aname]);\n  }\n\n  function insertDomLines(nodeToAddAfter, infoStructs, isTimeUp)\n  {\n    isTimeUp = (isTimeUp ||\n    function()\n    {\n      return false;\n    });\n\n    var lastEntry;\n    var lineStartOffset;\n    if (infoStructs.length < 1) return;\n    var startEntry = rep.lines.atKey(uniqueId(infoStructs[0].node));\n    var endEntry = rep.lines.atKey(uniqueId(infoStructs[infoStructs.length - 1].node));\n    var charStart = rep.lines.offsetOfEntry(startEntry);\n    var charEnd = rep.lines.offsetOfEntry(endEntry) + endEntry.width;\n\n    //rep.lexer.lexCharRange([charStart, charEnd], isTimeUp);\n    _.each(infoStructs, function(info)\n    {\n      var p2 = PROFILER(\"insertLine\", false);\n      var node = info.node;\n      var key = uniqueId(node);\n      var entry;\n      p2.mark(\"findEntry\");\n      if (lastEntry)\n      {\n        // optimization to avoid recalculation\n        var next = rep.lines.next(lastEntry);\n        if (next && next.key == key)\n        {\n          entry = next;\n          lineStartOffset += lastEntry.width;\n        }\n      }\n      if (!entry)\n      {\n        p2.literal(1, \"nonopt\");\n        entry = rep.lines.atKey(key);\n        lineStartOffset = rep.lines.offsetOfKey(key);\n      }\n      else p2.literal(0, \"nonopt\");\n      lastEntry = entry;\n      p2.mark(\"spans\");\n      getSpansForLine(entry, function(tokenText, tokenClass)\n      {\n        info.appendSpan(tokenText, tokenClass);\n      }, lineStartOffset, isTimeUp());\n      //else if (entry.text.length > 0) {\n      //info.appendSpan(entry.text, 'dirty');\n      //}\n      p2.mark(\"addLine\");\n      info.prepareForAdd();\n      entry.lineMarker = info.lineMarker;\n      if (!nodeToAddAfter)\n      {\n        root.insertBefore(node, root.firstChild);\n      }\n      else\n      {\n        root.insertBefore(node, nodeToAddAfter.nextSibling);\n      }\n      nodeToAddAfter = node;\n      info.notifyAdded();\n      p2.mark(\"markClean\");\n      markNodeClean(node);\n      p2.end();\n    });\n  }\n\n  function isCaret()\n  {\n    return (rep.selStart && rep.selEnd && rep.selStart[0] == rep.selEnd[0] && rep.selStart[1] == rep.selEnd[1]);\n  }\n  editorInfo.ace_isCaret = isCaret;\n\n  // prereq: isCaret()\n\n\n  function caretLine()\n  {\n    return rep.selStart[0];\n  }\n  editorInfo.ace_caretLine = caretLine;\n\n  function caretColumn()\n  {\n    return rep.selStart[1];\n  }\n  editorInfo.ace_caretColumn = caretColumn;\n\n  function caretDocChar()\n  {\n    return rep.lines.offsetOfIndex(caretLine()) + caretColumn();\n  }\n  editorInfo.ace_caretDocChar = caretDocChar;\n\n  function handleReturnIndentation()\n  {\n    // on return, indent to level of previous line\n    if (isCaret() && caretColumn() === 0 && caretLine() > 0)\n    {\n      var lineNum = caretLine();\n      var thisLine = rep.lines.atIndex(lineNum);\n      var prevLine = rep.lines.prev(thisLine);\n      var prevLineText = prevLine.text;\n      var theIndent = /^ *(?:)/.exec(prevLineText)[0];\n      if (/[\\[\\(\\:\\{]\\s*$/.exec(prevLineText)) theIndent += THE_TAB;\n      var cs = Changeset.builder(rep.lines.totalWidth()).keep(\n      rep.lines.offsetOfIndex(lineNum), lineNum).insert(\n      theIndent, [\n        ['author', thisAuthor]\n      ], rep.apool).toString();\n      performDocumentApplyChangeset(cs);\n      performSelectionChange([lineNum, theIndent.length], [lineNum, theIndent.length]);\n    }\n  }\n\n  function getPointForLineAndChar(lineAndChar)\n  {\n    var line = lineAndChar[0];\n    var charsLeft = lineAndChar[1];\n    //console.log(\"line: %d, key: %s, node: %o\", line, rep.lines.atIndex(line).key,\n    //getCleanNodeByKey(rep.lines.atIndex(line).key));\n    var lineEntry = rep.lines.atIndex(line);\n    charsLeft -= lineEntry.lineMarker;\n    if (charsLeft < 0)\n    {\n      charsLeft = 0;\n    }\n    var lineNode = lineEntry.lineNode;\n    var n = lineNode;\n    var after = false;\n    if (charsLeft === 0)\n    {\n      var index = 0;\n\n      if (browser.msie && parseInt(browser.version) >= 11) {\n        browser.msie = false; // Temp fix to resolve enter and backspace issues..\n        // Note that this makes MSIE behave like modern browsers..\n      }\n      if (browser.msie && line == (rep.lines.length() - 1) && lineNode.childNodes.length === 0)\n      {\n        // best to stay at end of last empty div in IE\n        index = 1;\n      }\n      return {\n        node: lineNode,\n        index: index,\n        maxIndex: 1\n      };\n    }\n    while (!(n == lineNode && after))\n    {\n      if (after)\n      {\n        if (n.nextSibling)\n        {\n          n = n.nextSibling;\n          after = false;\n        }\n        else n = n.parentNode;\n      }\n      else\n      {\n        if (isNodeText(n))\n        {\n          var len = n.nodeValue.length;\n          if (charsLeft <= len)\n          {\n            return {\n              node: n,\n              index: charsLeft,\n              maxIndex: len\n            };\n          }\n          charsLeft -= len;\n          after = true;\n        }\n        else\n        {\n          if (n.firstChild) n = n.firstChild;\n          else after = true;\n        }\n      }\n    }\n    return {\n      node: lineNode,\n      index: 1,\n      maxIndex: 1\n    };\n  }\n\n  function nodeText(n)\n  {\n      if (browser.msie) {\n\t  return n.innerText;\n      } else {\n\t  return n.textContent || n.nodeValue || '';\n      }\n  }\n\n  function getLineAndCharForPoint(point)\n  {\n    // Turn DOM node selection into [line,char] selection.\n    // This method has to work when the DOM is not pristine,\n    // assuming the point is not in a dirty node.\n    if (point.node == root)\n    {\n      if (point.index === 0)\n      {\n        return [0, 0];\n      }\n      else\n      {\n        var N = rep.lines.length();\n        var ln = rep.lines.atIndex(N - 1);\n        return [N - 1, ln.text.length];\n      }\n    }\n    else\n    {\n      var n = point.node;\n      var col = 0;\n      // if this part fails, it probably means the selection node\n      // was dirty, and we didn't see it when collecting dirty nodes.\n      if (isNodeText(n))\n      {\n        col = point.index;\n      }\n      else if (point.index > 0)\n      {\n        col = nodeText(n).length;\n      }\n      var parNode, prevSib;\n      while ((parNode = n.parentNode) != root)\n      {\n        if ((prevSib = n.previousSibling))\n        {\n          n = prevSib;\n          col += nodeText(n).length;\n        }\n        else\n        {\n          n = parNode;\n        }\n      }\n      if (n.id === \"\") console.debug(\"BAD\");\n      if (n.firstChild && isBlockElement(n.firstChild))\n      {\n        col += 1; // lineMarker\n      }\n      var lineEntry = rep.lines.atKey(n.id);\n      var lineNum = rep.lines.indexOfEntry(lineEntry);\n      return [lineNum, col];\n    }\n  }\n  editorInfo.ace_getLineAndCharForPoint = getLineAndCharForPoint;\n\n  function createDomLineEntry(lineString)\n  {\n    var info = doCreateDomLine(lineString.length > 0);\n    var newNode = info.node;\n    return {\n      key: uniqueId(newNode),\n      text: lineString,\n      lineNode: newNode,\n      domInfo: info,\n      lineMarker: 0\n    };\n  }\n\n  function canApplyChangesetToDocument(changes)\n  {\n    return Changeset.oldLen(changes) == rep.alltext.length;\n  }\n\n  function performDocumentApplyChangeset(changes, insertsAfterSelection)\n  {\n    doRepApplyChangeset(changes, insertsAfterSelection);\n\n    var requiredSelectionSetting = null;\n    if (rep.selStart && rep.selEnd)\n    {\n      var selStartChar = rep.lines.offsetOfIndex(rep.selStart[0]) + rep.selStart[1];\n      var selEndChar = rep.lines.offsetOfIndex(rep.selEnd[0]) + rep.selEnd[1];\n      var result = Changeset.characterRangeFollow(changes, selStartChar, selEndChar, insertsAfterSelection);\n      requiredSelectionSetting = [result[0], result[1], rep.selFocusAtStart];\n    }\n\n    var linesMutatee = {\n      splice: function(start, numRemoved, newLinesVA)\n      {\n        var args = Array.prototype.slice.call(arguments, 2);\n        domAndRepSplice(start, numRemoved, _.map(args, function(s){ return s.slice(0, -1); }), null);\n      },\n      get: function(i)\n      {\n        return rep.lines.atIndex(i).text + '\\n';\n      },\n      length: function()\n      {\n        return rep.lines.length();\n      },\n      slice_notused: function(start, end)\n      {\n        return _.map(rep.lines.slice(start, end), function(e)\n        {\n          return e.text + '\\n';\n        });\n      }\n    };\n\n    Changeset.mutateTextLines(changes, linesMutatee);\n\n    checkALines();\n\n    if (requiredSelectionSetting)\n    {\n      performSelectionChange(lineAndColumnFromChar(requiredSelectionSetting[0]), lineAndColumnFromChar(requiredSelectionSetting[1]), requiredSelectionSetting[2]);\n    }\n\n    function domAndRepSplice(startLine, deleteCount, newLineStrings, isTimeUp)\n    {\n      // dgreensp 3/2009: the spliced lines may be in the middle of a dirty region,\n      // so if no explicit time limit, don't spend a lot of time highlighting\n      isTimeUp = (isTimeUp || newTimeLimit(50));\n\n      var keysToDelete = [];\n      if (deleteCount > 0)\n      {\n        var entryToDelete = rep.lines.atIndex(startLine);\n        for (var i = 0; i < deleteCount; i++)\n        {\n          keysToDelete.push(entryToDelete.key);\n          entryToDelete = rep.lines.next(entryToDelete);\n        }\n      }\n\n      var lineEntries = _.map(newLineStrings, createDomLineEntry);\n\n      doRepLineSplice(startLine, deleteCount, lineEntries);\n\n      var nodeToAddAfter;\n      if (startLine > 0)\n      {\n        nodeToAddAfter = getCleanNodeByKey(rep.lines.atIndex(startLine - 1).key);\n      }\n      else nodeToAddAfter = null;\n\n      insertDomLines(nodeToAddAfter, _.map(lineEntries, function(entry)\n      {\n        return entry.domInfo;\n      }), isTimeUp);\n\n      _.each(keysToDelete, function(k)\n      {\n        var n = doc.getElementById(k);\n        n.parentNode.removeChild(n);\n      });\n\n      if ((rep.selStart && rep.selStart[0] >= startLine && rep.selStart[0] <= startLine + deleteCount) || (rep.selEnd && rep.selEnd[0] >= startLine && rep.selEnd[0] <= startLine + deleteCount))\n      {\n        currentCallStack.selectionAffected = true;\n      }\n    }\n  }\n\n  function checkChangesetLineInformationAgainstRep(changes)\n  {\n    return true; // disable for speed\n    var opIter = Changeset.opIterator(Changeset.unpack(changes).ops);\n    var curOffset = 0;\n    var curLine = 0;\n    var curCol = 0;\n    while (opIter.hasNext())\n    {\n      var o = opIter.next();\n      if (o.opcode == '-' || o.opcode == '=')\n      {\n        curOffset += o.chars;\n        if (o.lines)\n        {\n          curLine += o.lines;\n          curCol = 0;\n        }\n        else\n        {\n          curCol += o.chars;\n        }\n      }\n      var calcLine = rep.lines.indexOfOffset(curOffset);\n      var calcLineStart = rep.lines.offsetOfIndex(calcLine);\n      var calcCol = curOffset - calcLineStart;\n      if (calcCol != curCol || calcLine != curLine)\n      {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  function doRepApplyChangeset(changes, insertsAfterSelection)\n  {\n    Changeset.checkRep(changes);\n\n    if (Changeset.oldLen(changes) != rep.alltext.length) throw new Error(\"doRepApplyChangeset length mismatch: \" + Changeset.oldLen(changes) + \"/\" + rep.alltext.length);\n\n    if (!checkChangesetLineInformationAgainstRep(changes))\n    {\n      throw new Error(\"doRepApplyChangeset line break mismatch\");\n    }\n\n    (function doRecordUndoInformation(changes)\n    {\n      var editEvent = currentCallStack.editEvent;\n      if (editEvent.eventType == \"nonundoable\")\n      {\n        if (!editEvent.changeset)\n        {\n          editEvent.changeset = changes;\n        }\n        else\n        {\n          editEvent.changeset = Changeset.compose(editEvent.changeset, changes, rep.apool);\n        }\n      }\n      else\n      {\n        var inverseChangeset = Changeset.inverse(changes, {\n          get: function(i)\n          {\n            return rep.lines.atIndex(i).text + '\\n';\n          },\n          length: function()\n          {\n            return rep.lines.length();\n          }\n        }, rep.alines, rep.apool);\n\n        if (!editEvent.backset)\n        {\n          editEvent.backset = inverseChangeset;\n        }\n        else\n        {\n          editEvent.backset = Changeset.compose(inverseChangeset, editEvent.backset, rep.apool);\n        }\n      }\n    })(changes);\n\n    //rep.alltext = Changeset.applyToText(changes, rep.alltext);\n    Changeset.mutateAttributionLines(changes, rep.alines, rep.apool);\n\n    if (changesetTracker.isTracking())\n    {\n      changesetTracker.composeUserChangeset(changes);\n    }\n\n  }\n\n  /*\n    Converts the position of a char (index in String) into a [row, col] tuple\n  */\n  function lineAndColumnFromChar(x)\n  {\n    var lineEntry = rep.lines.atOffset(x);\n    var lineStart = rep.lines.offsetOfEntry(lineEntry);\n    var lineNum = rep.lines.indexOfEntry(lineEntry);\n    return [lineNum, x - lineStart];\n  }\n\n  function performDocumentReplaceCharRange(startChar, endChar, newText)\n  {\n    if (startChar == endChar && newText.length === 0)\n    {\n      return;\n    }\n    // Requires that the replacement preserve the property that the\n    // internal document text ends in a newline.  Given this, we\n    // rewrite the splice so that it doesn't touch the very last\n    // char of the document.\n    if (endChar == rep.alltext.length)\n    {\n      if (startChar == endChar)\n      {\n        // an insert at end\n        startChar--;\n        endChar--;\n        newText = '\\n' + newText.substring(0, newText.length - 1);\n      }\n      else if (newText.length === 0)\n      {\n        // a delete at end\n        startChar--;\n        endChar--;\n      }\n      else\n      {\n        // a replace at end\n        endChar--;\n        newText = newText.substring(0, newText.length - 1);\n      }\n    }\n    performDocumentReplaceRange(lineAndColumnFromChar(startChar), lineAndColumnFromChar(endChar), newText);\n  }\n\n  function performDocumentReplaceRange(start, end, newText)\n  {\n    if (start === undefined) start = rep.selStart;\n    if (end === undefined) end = rep.selEnd;\n\n    //dmesg(String([start.toSource(),end.toSource(),newText.toSource()]));\n    // start[0]: <--- start[1] --->CCCCCCCCCCC\\n\n    //           CCCCCCCCCCCCCCCCCCCC\\n\n    //           CCCC\\n\n    // end[0]:   <CCC end[1] CCC>-------\\n\n    var builder = Changeset.builder(rep.lines.totalWidth());\n    ChangesetUtils.buildKeepToStartOfRange(rep, builder, start);\n    ChangesetUtils.buildRemoveRange(rep, builder, start, end);\n    builder.insert(newText, [\n      ['author', thisAuthor]\n    ], rep.apool);\n    var cs = builder.toString();\n\n    performDocumentApplyChangeset(cs);\n  }\n\n  function performDocumentApplyAttributesToCharRange(start, end, attribs)\n  {\n    end = Math.min(end, rep.alltext.length - 1);\n    documentAttributeManager.setAttributesOnRange(lineAndColumnFromChar(start), lineAndColumnFromChar(end), attribs);\n  }\n  editorInfo.ace_performDocumentApplyAttributesToCharRange = performDocumentApplyAttributesToCharRange;\n\n\n  function setAttributeOnSelection(attributeName, attributeValue)\n  {\n    if (!(rep.selStart && rep.selEnd)) return;\n\n    documentAttributeManager.setAttributesOnRange(rep.selStart, rep.selEnd, [\n      [attributeName, attributeValue]\n    ]);\n  }\n  editorInfo.ace_setAttributeOnSelection = setAttributeOnSelection;\n\n\n  function getAttributeOnSelection(attributeName){\n    if (!(rep.selStart && rep.selEnd)) return\n    \n    var withIt = Changeset.makeAttribsString('+', [\n      [attributeName, 'true']\n    ], rep.apool);\n    var withItRegex = new RegExp(withIt.replace(/\\*/g, '\\\\*') + \"(\\\\*|$)\");\n    function hasIt(attribs)\n    {\n      return withItRegex.test(attribs);\n    }\n\n    return rangeHasAttrib(rep.selStart, rep.selEnd)\n    \n    function rangeHasAttrib(selStart, selEnd) {\n      // if range is collapsed -> no attribs in range\n      if(selStart[1] == selEnd[1] && selStart[0] == selEnd[0]) return false\n      \n      if(selStart[0] != selEnd[0]) { // -> More than one line selected\n        var hasAttrib = true\n        \n        // from selStart to the end of the first line\n        hasAttrib = hasAttrib && rangeHasAttrib(selStart, [selStart[0], rep.lines.atIndex(selStart[0]).text.length])\n\n        // for all lines in between\n        for(var n=selStart[0]+1; n < selEnd[0]; n++) {\n          hasAttrib = hasAttrib && rangeHasAttrib([n, 0], [n, rep.lines.atIndex(n).text.length])\n        }\n\n        // for the last, potentially partial, line\n        hasAttrib = hasAttrib && rangeHasAttrib([selEnd[0], 0], [selEnd[0], selEnd[1]])\n        \n        return hasAttrib\n      }\n      \n      // Logic tells us we now have a range on a single line\n      \n      var lineNum = selStart[0]\n        , start = selStart[1]\n        , end = selEnd[1]\n        , hasAttrib = true\n      \n      // Iterate over attribs on this line\n      \n      var opIter = Changeset.opIterator(rep.alines[lineNum])\n        , indexIntoLine = 0\n      \n      while (opIter.hasNext()) {\n        var op = opIter.next();\n        var opStartInLine = indexIntoLine;\n        var opEndInLine = opStartInLine + op.chars;\n        if (!hasIt(op.attribs)) {\n          // does op overlap selection?\n          if (!(opEndInLine <= start || opStartInLine >= end)) {\n            hasAttrib = false; // since it's overlapping but hasn't got the attrib -> range hasn't got it\n            break;\n          }\n        }\n        indexIntoLine = opEndInLine;\n      }\n      \n      return hasAttrib\n    }\n  }\n  \n  editorInfo.ace_getAttributeOnSelection = getAttributeOnSelection;\n\n  function toggleAttributeOnSelection(attributeName)\n  {\n    if (!(rep.selStart && rep.selEnd)) return;\n\n    var selectionAllHasIt = true;\n    var withIt = Changeset.makeAttribsString('+', [\n      [attributeName, 'true']\n    ], rep.apool);\n    var withItRegex = new RegExp(withIt.replace(/\\*/g, '\\\\*') + \"(\\\\*|$)\");\n\n    function hasIt(attribs)\n    {\n      return withItRegex.test(attribs);\n    }\n\n    var selStartLine = rep.selStart[0];\n    var selEndLine = rep.selEnd[0];\n    for (var n = selStartLine; n <= selEndLine; n++)\n    {\n      var opIter = Changeset.opIterator(rep.alines[n]);\n      var indexIntoLine = 0;\n      var selectionStartInLine = 0;\n      var selectionEndInLine = rep.lines.atIndex(n).text.length; // exclude newline\n      if (n == selStartLine)\n      {\n        selectionStartInLine = rep.selStart[1];\n      }\n      if (n == selEndLine)\n      {\n        selectionEndInLine = rep.selEnd[1];\n      }\n      while (opIter.hasNext())\n      {\n        var op = opIter.next();\n        var opStartInLine = indexIntoLine;\n        var opEndInLine = opStartInLine + op.chars;\n        if (!hasIt(op.attribs))\n        {\n          // does op overlap selection?\n          if (!(opEndInLine <= selectionStartInLine || opStartInLine >= selectionEndInLine))\n          {\n            selectionAllHasIt = false;\n            break;\n          }\n        }\n        indexIntoLine = opEndInLine;\n      }\n      if (!selectionAllHasIt)\n      {\n        break;\n      }\n    }\n\n    if (selectionAllHasIt)\n    {\n      documentAttributeManager.setAttributesOnRange(rep.selStart, rep.selEnd, [\n        [attributeName, '']\n      ]);\n    }\n    else\n    {\n      documentAttributeManager.setAttributesOnRange(rep.selStart, rep.selEnd, [\n        [attributeName, 'true']\n      ]);\n    }\n  }\n  editorInfo.ace_toggleAttributeOnSelection = toggleAttributeOnSelection;\n\n  function performDocumentReplaceSelection(newText)\n  {\n    if (!(rep.selStart && rep.selEnd)) return;\n    performDocumentReplaceRange(rep.selStart, rep.selEnd, newText);\n  }\n\n  // Change the abstract representation of the document to have a different set of lines.\n  // Must be called after rep.alltext is set.\n\n\n  function doRepLineSplice(startLine, deleteCount, newLineEntries)\n  {\n\n    _.each(newLineEntries, function(entry)\n    {\n      entry.width = entry.text.length + 1;\n    });\n\n    var startOldChar = rep.lines.offsetOfIndex(startLine);\n    var endOldChar = rep.lines.offsetOfIndex(startLine + deleteCount);\n\n    var oldRegionStart = rep.lines.offsetOfIndex(startLine);\n    var oldRegionEnd = rep.lines.offsetOfIndex(startLine + deleteCount);\n    rep.lines.splice(startLine, deleteCount, newLineEntries);\n    currentCallStack.docTextChanged = true;\n    currentCallStack.repChanged = true;\n    var newRegionEnd = rep.lines.offsetOfIndex(startLine + newLineEntries.length);\n\n    var newText = _.map(newLineEntries, function(e)\n    {\n      return e.text + '\\n';\n    }).join('');\n\n    rep.alltext = rep.alltext.substring(0, startOldChar) + newText + rep.alltext.substring(endOldChar, rep.alltext.length);\n\n    //var newTotalLength = rep.alltext.length;\n    //rep.lexer.updateBuffer(rep.alltext, oldRegionStart, oldRegionEnd - oldRegionStart,\n    //newRegionEnd - oldRegionStart);\n  }\n\n  function doIncorpLineSplice(startLine, deleteCount, newLineEntries, lineAttribs, hints)\n  {\n\n    var startOldChar = rep.lines.offsetOfIndex(startLine);\n    var endOldChar = rep.lines.offsetOfIndex(startLine + deleteCount);\n\n    var oldRegionStart = rep.lines.offsetOfIndex(startLine);\n\n    var selStartHintChar, selEndHintChar;\n    if (hints && hints.selStart)\n    {\n      selStartHintChar = rep.lines.offsetOfIndex(hints.selStart[0]) + hints.selStart[1] - oldRegionStart;\n    }\n    if (hints && hints.selEnd)\n    {\n      selEndHintChar = rep.lines.offsetOfIndex(hints.selEnd[0]) + hints.selEnd[1] - oldRegionStart;\n    }\n\n    var newText = _.map(newLineEntries, function(e)\n    {\n      return e.text + '\\n';\n    }).join('');\n    var oldText = rep.alltext.substring(startOldChar, endOldChar);\n    var oldAttribs = rep.alines.slice(startLine, startLine + deleteCount).join('');\n    var newAttribs = lineAttribs.join('|1+1') + '|1+1'; // not valid in a changeset\n    var analysis = analyzeChange(oldText, newText, oldAttribs, newAttribs, selStartHintChar, selEndHintChar);\n    var commonStart = analysis[0];\n    var commonEnd = analysis[1];\n    var shortOldText = oldText.substring(commonStart, oldText.length - commonEnd);\n    var shortNewText = newText.substring(commonStart, newText.length - commonEnd);\n    var spliceStart = startOldChar + commonStart;\n    var spliceEnd = endOldChar - commonEnd;\n    var shiftFinalNewlineToBeforeNewText = false;\n\n    // adjust the splice to not involve the final newline of the document;\n    // be very defensive\n    if (shortOldText.charAt(shortOldText.length - 1) == '\\n' && shortNewText.charAt(shortNewText.length - 1) == '\\n')\n    {\n      // replacing text that ends in newline with text that also ends in newline\n      // (still, after analysis, somehow)\n      shortOldText = shortOldText.slice(0, -1);\n      shortNewText = shortNewText.slice(0, -1);\n      spliceEnd--;\n      commonEnd++;\n    }\n    if (shortOldText.length === 0 && spliceStart == rep.alltext.length && shortNewText.length > 0)\n    {\n      // inserting after final newline, bad\n      spliceStart--;\n      spliceEnd--;\n      shortNewText = '\\n' + shortNewText.slice(0, -1);\n      shiftFinalNewlineToBeforeNewText = true;\n    }\n    if (spliceEnd == rep.alltext.length && shortOldText.length > 0 && shortNewText.length === 0)\n    {\n      // deletion at end of rep.alltext\n      if (rep.alltext.charAt(spliceStart - 1) == '\\n')\n      {\n        // (if not then what the heck?  it will definitely lead\n        // to a rep.alltext without a final newline)\n        spliceStart--;\n        spliceEnd--;\n      }\n    }\n\n    if (!(shortOldText.length === 0 && shortNewText.length === 0))\n    {\n      var oldDocText = rep.alltext;\n      var oldLen = oldDocText.length;\n\n      var spliceStartLine = rep.lines.indexOfOffset(spliceStart);\n      var spliceStartLineStart = rep.lines.offsetOfIndex(spliceStartLine);\n\n      var startBuilder = function()\n      {\n        var builder = Changeset.builder(oldLen);\n        builder.keep(spliceStartLineStart, spliceStartLine);\n        builder.keep(spliceStart - spliceStartLineStart);\n        return builder;\n      };\n\n      var eachAttribRun = function(attribs, func /*(startInNewText, endInNewText, attribs)*/ )\n      {\n        var attribsIter = Changeset.opIterator(attribs);\n        var textIndex = 0;\n        var newTextStart = commonStart;\n        var newTextEnd = newText.length - commonEnd - (shiftFinalNewlineToBeforeNewText ? 1 : 0);\n        while (attribsIter.hasNext())\n        {\n          var op = attribsIter.next();\n          var nextIndex = textIndex + op.chars;\n          if (!(nextIndex <= newTextStart || textIndex >= newTextEnd))\n          {\n            func(Math.max(newTextStart, textIndex), Math.min(newTextEnd, nextIndex), op.attribs);\n          }\n          textIndex = nextIndex;\n        }\n      };\n\n      var justApplyStyles = (shortNewText == shortOldText);\n      var theChangeset;\n\n      if (justApplyStyles)\n      {\n        // create changeset that clears the incorporated styles on\n        // the existing text.  we compose this with the\n        // changeset the applies the styles found in the DOM.\n        // This allows us to incorporate, e.g., Safari's native \"unbold\".\n        var incorpedAttribClearer = cachedStrFunc(function(oldAtts)\n        {\n          return Changeset.mapAttribNumbers(oldAtts, function(n)\n          {\n            var k = rep.apool.getAttribKey(n);\n            if (isStyleAttribute(k))\n            {\n              return rep.apool.putAttrib([k, '']);\n            }\n            return false;\n          });\n        });\n\n        var builder1 = startBuilder();\n        if (shiftFinalNewlineToBeforeNewText)\n        {\n          builder1.keep(1, 1);\n        }\n        eachAttribRun(oldAttribs, function(start, end, attribs)\n        {\n          builder1.keepText(newText.substring(start, end), incorpedAttribClearer(attribs));\n        });\n        var clearer = builder1.toString();\n\n        var builder2 = startBuilder();\n        if (shiftFinalNewlineToBeforeNewText)\n        {\n          builder2.keep(1, 1);\n        }\n        eachAttribRun(newAttribs, function(start, end, attribs)\n        {\n          builder2.keepText(newText.substring(start, end), attribs);\n        });\n        var styler = builder2.toString();\n\n        theChangeset = Changeset.compose(clearer, styler, rep.apool);\n      }\n      else\n      {\n        var builder = startBuilder();\n\n        var spliceEndLine = rep.lines.indexOfOffset(spliceEnd);\n        var spliceEndLineStart = rep.lines.offsetOfIndex(spliceEndLine);\n        if (spliceEndLineStart > spliceStart)\n        {\n          builder.remove(spliceEndLineStart - spliceStart, spliceEndLine - spliceStartLine);\n          builder.remove(spliceEnd - spliceEndLineStart);\n        }\n        else\n        {\n          builder.remove(spliceEnd - spliceStart);\n        }\n\n        var isNewTextMultiauthor = false;\n        var authorAtt = Changeset.makeAttribsString('+', (thisAuthor ? [\n          ['author', thisAuthor]\n        ] : []), rep.apool);\n        var authorizer = cachedStrFunc(function(oldAtts)\n        {\n          if (isNewTextMultiauthor)\n          {\n            // prefer colors from DOM\n            return Changeset.composeAttributes(authorAtt, oldAtts, true, rep.apool);\n          }\n          else\n          {\n            // use this author's color\n            return Changeset.composeAttributes(oldAtts, authorAtt, true, rep.apool);\n          }\n        });\n\n        var foundDomAuthor = '';\n        eachAttribRun(newAttribs, function(start, end, attribs)\n        {\n          var a = Changeset.attribsAttributeValue(attribs, 'author', rep.apool);\n          if (a && a != foundDomAuthor)\n          {\n            if (!foundDomAuthor)\n            {\n              foundDomAuthor = a;\n            }\n            else\n            {\n              isNewTextMultiauthor = true; // multiple authors in DOM!\n            }\n          }\n        });\n\n        if (shiftFinalNewlineToBeforeNewText)\n        {\n          builder.insert('\\n', authorizer(''));\n        }\n\n        eachAttribRun(newAttribs, function(start, end, attribs)\n        {\n          builder.insert(newText.substring(start, end), authorizer(attribs));\n        });\n        theChangeset = builder.toString();\n      }\n\n      //dmesg(htmlPrettyEscape(theChangeset));\n      doRepApplyChangeset(theChangeset);\n    }\n\n    // do this no matter what, because we need to get the right\n    // line keys into the rep.\n    doRepLineSplice(startLine, deleteCount, newLineEntries);\n\n    checkALines();\n  }\n\n  function cachedStrFunc(func)\n  {\n    var cache = {};\n    return function(s)\n    {\n      if (!cache[s])\n      {\n        cache[s] = func(s);\n      }\n      return cache[s];\n    };\n  }\n\n  function analyzeChange(oldText, newText, oldAttribs, newAttribs, optSelStartHint, optSelEndHint)\n  {\n    function incorpedAttribFilter(anum)\n    {\n      return isStyleAttribute(rep.apool.getAttribKey(anum));\n    }\n\n    function attribRuns(attribs)\n    {\n      var lengs = [];\n      var atts = [];\n      var iter = Changeset.opIterator(attribs);\n      while (iter.hasNext())\n      {\n        var op = iter.next();\n        lengs.push(op.chars);\n        atts.push(op.attribs);\n      }\n      return [lengs, atts];\n    }\n\n    function attribIterator(runs, backward)\n    {\n      var lengs = runs[0];\n      var atts = runs[1];\n      var i = (backward ? lengs.length - 1 : 0);\n      var j = 0;\n      return function next()\n      {\n        while (j >= lengs[i])\n        {\n          if (backward) i--;\n          else i++;\n          j = 0;\n        }\n        var a = atts[i];\n        j++;\n        return a;\n      };\n    }\n\n    var oldLen = oldText.length;\n    var newLen = newText.length;\n    var minLen = Math.min(oldLen, newLen);\n\n    var oldARuns = attribRuns(Changeset.filterAttribNumbers(oldAttribs, incorpedAttribFilter));\n    var newARuns = attribRuns(Changeset.filterAttribNumbers(newAttribs, incorpedAttribFilter));\n\n    var commonStart = 0;\n    var oldStartIter = attribIterator(oldARuns, false);\n    var newStartIter = attribIterator(newARuns, false);\n    while (commonStart < minLen)\n    {\n      if (oldText.charAt(commonStart) == newText.charAt(commonStart) && oldStartIter() == newStartIter())\n      {\n        commonStart++;\n      }\n      else break;\n    }\n\n    var commonEnd = 0;\n    var oldEndIter = attribIterator(oldARuns, true);\n    var newEndIter = attribIterator(newARuns, true);\n    while (commonEnd < minLen)\n    {\n      if (commonEnd === 0)\n      {\n        // assume newline in common\n        oldEndIter();\n        newEndIter();\n        commonEnd++;\n      }\n      else if (oldText.charAt(oldLen - 1 - commonEnd) == newText.charAt(newLen - 1 - commonEnd) && oldEndIter() == newEndIter())\n      {\n        commonEnd++;\n      }\n      else break;\n    }\n\n    var hintedCommonEnd = -1;\n    if ((typeof optSelEndHint) == \"number\")\n    {\n      hintedCommonEnd = newLen - optSelEndHint;\n    }\n\n\n    if (commonStart + commonEnd > oldLen)\n    {\n      // ambiguous insertion\n      var minCommonEnd = oldLen - commonStart;\n      var maxCommonEnd = commonEnd;\n      if (hintedCommonEnd >= minCommonEnd && hintedCommonEnd <= maxCommonEnd)\n      {\n        commonEnd = hintedCommonEnd;\n      }\n      else\n      {\n        commonEnd = minCommonEnd;\n      }\n      commonStart = oldLen - commonEnd;\n    }\n    if (commonStart + commonEnd > newLen)\n    {\n      // ambiguous deletion\n      var minCommonEnd = newLen - commonStart;\n      var maxCommonEnd = commonEnd;\n      if (hintedCommonEnd >= minCommonEnd && hintedCommonEnd <= maxCommonEnd)\n      {\n        commonEnd = hintedCommonEnd;\n      }\n      else\n      {\n        commonEnd = minCommonEnd;\n      }\n      commonStart = newLen - commonEnd;\n    }\n\n    return [commonStart, commonEnd];\n  }\n\n  function equalLineAndChars(a, b)\n  {\n    if (!a) return !b;\n    if (!b) return !a;\n    return (a[0] == b[0] && a[1] == b[1]);\n  }\n\n  function performSelectionChange(selectStart, selectEnd, focusAtStart)\n  {\n    if (repSelectionChange(selectStart, selectEnd, focusAtStart))\n    {\n      currentCallStack.selectionAffected = true;\n    }\n  }\n  editorInfo.ace_performSelectionChange = performSelectionChange;\n\n  // Change the abstract representation of the document to have a different selection.\n  // Should not rely on the line representation.  Should not affect the DOM.\n\n\n  function repSelectionChange(selectStart, selectEnd, focusAtStart)\n  {\n    focusAtStart = !! focusAtStart;\n\n    var newSelFocusAtStart = (focusAtStart && ((!selectStart) || (!selectEnd) || (selectStart[0] != selectEnd[0]) || (selectStart[1] != selectEnd[1])));\n\n    if ((!equalLineAndChars(rep.selStart, selectStart)) || (!equalLineAndChars(rep.selEnd, selectEnd)) || (rep.selFocusAtStart != newSelFocusAtStart))\n    {\n      rep.selStart = selectStart;\n      rep.selEnd = selectEnd;\n      rep.selFocusAtStart = newSelFocusAtStart;\n      currentCallStack.repChanged = true;\n\n      return true;\n      //console.log(\"selStart: %o, selEnd: %o, focusAtStart: %s\", rep.selStart, rep.selEnd,\n      //String(!!rep.selFocusAtStart));\n    }\n    return false;\n    //console.log(\"%o %o %s\", rep.selStart, rep.selEnd, rep.selFocusAtStart);\n  }\n\n  function doCreateDomLine(nonEmpty)\n  {\n    if (browser.msie && (!nonEmpty))\n    {\n      var result = {\n        node: null,\n        appendSpan: noop,\n        prepareForAdd: noop,\n        notifyAdded: noop,\n        clearSpans: noop,\n        finishUpdate: noop,\n        lineMarker: 0\n      };\n\n      var lineElem = doc.createElement(\"div\");\n      result.node = lineElem;\n\n      result.notifyAdded = function()\n      {\n        // magic -- settng an empty div's innerHTML to the empty string\n        // keeps it from collapsing.  Apparently innerHTML must be set *after*\n        // adding the node to the DOM.\n        // Such a div is what IE 6 creates naturally when you make a blank line\n        // in a document of divs.  However, when copy-and-pasted the div will\n        // contain a space, so we note its emptiness with a property.\n        lineElem.innerHTML = \" \"; // Frist we set a value that isnt blank\n        // a primitive-valued property survives copy-and-paste\n        setAssoc(lineElem, \"shouldBeEmpty\", true);\n        // an object property doesn't\n        setAssoc(lineElem, \"unpasted\", {});\n        lineElem.innerHTML = \"\"; // Then we make it blank..  New line and no space = Awesome :)\n      };\n      var lineClass = 'ace-line';\n      result.appendSpan = function(txt, cls)\n      {\n        if ((!txt) && cls)\n        {\n          // gain a whole-line style (currently to show insertion point in CSS)\n          lineClass = domline.addToLineClass(lineClass, cls);\n        }\n        // otherwise, ignore appendSpan, this is an empty line\n      };\n      result.clearSpans = function()\n      {\n        lineClass = ''; // non-null to cause update\n      };\n\n      var writeClass = function()\n      {\n        if (lineClass !== null) lineElem.className = lineClass;\n      };\n\n      result.prepareForAdd = writeClass;\n      result.finishUpdate = writeClass;\n      result.getInnerHTML = function()\n      {\n        return \"\";\n      };\n      return result;\n    }\n    else\n    {\n      return domline.createDomLine(nonEmpty, doesWrap, browser, doc);\n    }\n  }\n\n  function textify(str)\n  {\n    return str.replace(/[\\n\\r ]/g, ' ').replace(/\\xa0/g, ' ').replace(/\\t/g, '        ');\n  }\n\n  var _blockElems = {\n    \"div\": 1,\n    \"p\": 1,\n    \"pre\": 1,\n    \"li\": 1,\n    \"ol\": 1,\n    \"ul\": 1\n  };\n\n  _.each(hooks.callAll('aceRegisterBlockElements'), function(element){\n      _blockElems[element] = 1;\n  });\n\n  function isBlockElement(n)\n  {\n    return !!_blockElems[(n.tagName || \"\").toLowerCase()];\n  }\n\n  function getDirtyRanges()\n  {\n    // based on observedChanges, return a list of ranges of original lines\n    // that need to be removed or replaced with new user content to incorporate\n    // the user's changes into the line representation.  ranges may be zero-length,\n    // indicating inserted content.  for example, [0,0] means content was inserted\n    // at the top of the document, while [3,4] means line 3 was deleted, modified,\n    // or replaced with one or more new lines of content. ranges do not touch.\n    var p = PROFILER(\"getDirtyRanges\", false);\n    p.forIndices = 0;\n    p.consecutives = 0;\n    p.corrections = 0;\n\n    var cleanNodeForIndexCache = {};\n    var N = rep.lines.length(); // old number of lines\n\n\n    function cleanNodeForIndex(i)\n    {\n      // if line (i) in the un-updated line representation maps to a clean node\n      // in the document, return that node.\n      // if (i) is out of bounds, return true. else return false.\n      if (cleanNodeForIndexCache[i] === undefined)\n      {\n        p.forIndices++;\n        var result;\n        if (i < 0 || i >= N)\n        {\n          result = true; // truthy, but no actual node\n        }\n        else\n        {\n          var key = rep.lines.atIndex(i).key;\n          result = (getCleanNodeByKey(key) || false);\n        }\n        cleanNodeForIndexCache[i] = result;\n      }\n      return cleanNodeForIndexCache[i];\n    }\n    var isConsecutiveCache = {};\n\n    function isConsecutive(i)\n    {\n      if (isConsecutiveCache[i] === undefined)\n      {\n        p.consecutives++;\n        isConsecutiveCache[i] = (function()\n        {\n          // returns whether line (i) and line (i-1), assumed to be map to clean DOM nodes,\n          // or document boundaries, are consecutive in the changed DOM\n          var a = cleanNodeForIndex(i - 1);\n          var b = cleanNodeForIndex(i);\n          if ((!a) || (!b)) return false; // violates precondition\n          if ((a === true) && (b === true)) return !root.firstChild;\n          if ((a === true) && b.previousSibling) return false;\n          if ((b === true) && a.nextSibling) return false;\n          if ((a === true) || (b === true)) return true;\n          return a.nextSibling == b;\n        })();\n      }\n      return isConsecutiveCache[i];\n    }\n\n    function isClean(i)\n    {\n      // returns whether line (i) in the un-updated representation maps to a clean node,\n      // or is outside the bounds of the document\n      return !!cleanNodeForIndex(i);\n    }\n    // list of pairs, each representing a range of lines that is clean and consecutive\n    // in the changed DOM.  lines (-1) and (N) are always clean, but may or may not\n    // be consecutive with lines in the document.  pairs are in sorted order.\n    var cleanRanges = [\n      [-1, N + 1]\n    ];\n\n    function rangeForLine(i)\n    {\n      // returns index of cleanRange containing i, or -1 if none\n      var answer = -1;\n      _.each(cleanRanges ,function(r, idx)\n      {\n        if (i >= r[1]) return false; // keep looking\n        if (i < r[0]) return true; // not found, stop looking\n        answer = idx;\n        return true; // found, stop looking\n      });\n      return answer;\n    }\n\n    function removeLineFromRange(rng, line)\n    {\n      // rng is index into cleanRanges, line is line number\n      // precond: line is in rng\n      var a = cleanRanges[rng][0];\n      var b = cleanRanges[rng][1];\n      if ((a + 1) == b) cleanRanges.splice(rng, 1);\n      else if (line == a) cleanRanges[rng][0]++;\n      else if (line == (b - 1)) cleanRanges[rng][1]--;\n      else cleanRanges.splice(rng, 1, [a, line], [line + 1, b]);\n    }\n\n    function splitRange(rng, pt)\n    {\n      // precond: pt splits cleanRanges[rng] into two non-empty ranges\n      var a = cleanRanges[rng][0];\n      var b = cleanRanges[rng][1];\n      cleanRanges.splice(rng, 1, [a, pt], [pt, b]);\n    }\n    var correctedLines = {};\n\n    function correctlyAssignLine(line)\n    {\n      if (correctedLines[line]) return true;\n      p.corrections++;\n      correctedLines[line] = true;\n      // \"line\" is an index of a line in the un-updated rep.\n      // returns whether line was already correctly assigned (i.e. correctly\n      // clean or dirty, according to cleanRanges, and if clean, correctly\n      // attached or not attached (i.e. in the same range as) the prev and next lines).\n      //console.log(\"correctly assigning: %d\", line);\n      var rng = rangeForLine(line);\n      var lineClean = isClean(line);\n      if (rng < 0)\n      {\n        if (lineClean)\n        {\n          console.debug(\"somehow lost clean line\");\n        }\n        return true;\n      }\n      if (!lineClean)\n      {\n        // a clean-range includes this dirty line, fix it\n        removeLineFromRange(rng, line);\n        return false;\n      }\n      else\n      {\n        // line is clean, but could be wrongly connected to a clean line\n        // above or below\n        var a = cleanRanges[rng][0];\n        var b = cleanRanges[rng][1];\n        var didSomething = false;\n        // we'll leave non-clean adjacent nodes in the clean range for the caller to\n        // detect and deal with.  we deal with whether the range should be split\n        // just above or just below this line.\n        if (a < line && isClean(line - 1) && !isConsecutive(line))\n        {\n          splitRange(rng, line);\n          didSomething = true;\n        }\n        if (b > (line + 1) && isClean(line + 1) && !isConsecutive(line + 1))\n        {\n          splitRange(rng, line + 1);\n          didSomething = true;\n        }\n        return !didSomething;\n      }\n    }\n\n    function detectChangesAroundLine(line, reqInARow)\n    {\n      // make sure cleanRanges is correct about line number \"line\" and the surrounding\n      // lines; only stops checking at end of document or after no changes need\n      // making for several consecutive lines. note that iteration is over old lines,\n      // so this operation takes time proportional to the number of old lines\n      // that are changed or missing, not the number of new lines inserted.\n      var correctInARow = 0;\n      var currentIndex = line;\n      while (correctInARow < reqInARow && currentIndex >= 0)\n      {\n        if (correctlyAssignLine(currentIndex))\n        {\n          correctInARow++;\n        }\n        else correctInARow = 0;\n        currentIndex--;\n      }\n      correctInARow = 0;\n      currentIndex = line;\n      while (correctInARow < reqInARow && currentIndex < N)\n      {\n        if (correctlyAssignLine(currentIndex))\n        {\n          correctInARow++;\n        }\n        else correctInARow = 0;\n        currentIndex++;\n      }\n    }\n\n    if (N === 0)\n    {\n      p.cancel();\n      if (!isConsecutive(0))\n      {\n        splitRange(0, 0);\n      }\n    }\n    else\n    {\n      p.mark(\"topbot\");\n      detectChangesAroundLine(0, 1);\n      detectChangesAroundLine(N - 1, 1);\n\n      p.mark(\"obs\");\n      //console.log(\"observedChanges: \"+toSource(observedChanges));\n      for (var k in observedChanges.cleanNodesNearChanges)\n      {\n        var key = k.substring(1);\n        if (rep.lines.containsKey(key))\n        {\n          var line = rep.lines.indexOfKey(key);\n          detectChangesAroundLine(line, 2);\n        }\n      }\n      p.mark(\"stats&calc\");\n      p.literal(p.forIndices, \"byidx\");\n      p.literal(p.consecutives, \"cons\");\n      p.literal(p.corrections, \"corr\");\n    }\n\n    var dirtyRanges = [];\n    for (var r = 0; r < cleanRanges.length - 1; r++)\n    {\n      dirtyRanges.push([cleanRanges[r][1], cleanRanges[r + 1][0]]);\n    }\n\n    p.end();\n\n    return dirtyRanges;\n  }\n\n  function markNodeClean(n)\n  {\n    // clean nodes have knownHTML that matches their innerHTML\n    var dirtiness = {};\n    dirtiness.nodeId = uniqueId(n);\n    dirtiness.knownHTML = n.innerHTML;\n    if (browser.msie)\n    {\n      // adding a space to an \"empty\" div in IE designMode doesn't\n      // change the innerHTML of the div's parent; also, other\n      // browsers don't support innerText\n      dirtiness.knownText = n.innerText;\n    }\n    setAssoc(n, \"dirtiness\", dirtiness);\n  }\n\n  function isNodeDirty(n)\n  {\n    var p = PROFILER(\"cleanCheck\", false);\n    if (n.parentNode != root) return true;\n    var data = getAssoc(n, \"dirtiness\");\n    if (!data) return true;\n    if (n.id !== data.nodeId) return true;\n    if (browser.msie)\n    {\n      if (n.innerText !== data.knownText) return true;\n    }\n    if (n.innerHTML !== data.knownHTML) return true;\n    p.end();\n    return false;\n  }\n\n  function getLineEntryTopBottom(entry, destObj)\n  {\n    var dom = entry.lineNode;\n    var top = dom.offsetTop;\n    var height = dom.offsetHeight;\n    var obj = (destObj || {});\n    obj.top = top;\n    obj.bottom = (top + height);\n    return obj;\n  }\n\n  function getViewPortTopBottom()\n  {\n    var theTop = getScrollY();\n    var doc = outerWin.document;\n    var height = doc.documentElement.clientHeight;\n    return {\n      top: theTop,\n      bottom: (theTop + height)\n    };\n  }\n\n  function getVisibleLineRange()\n  {\n    var viewport = getViewPortTopBottom();\n    //console.log(\"viewport top/bottom: %o\", viewport);\n    var obj = {};\n    var start = rep.lines.search(function(e)\n    {\n      return getLineEntryTopBottom(e, obj).bottom > viewport.top;\n    });\n    var end = rep.lines.search(function(e)\n    {\n      return getLineEntryTopBottom(e, obj).top >= viewport.bottom;\n    });\n    if (end < start) end = start; // unlikely\n    //console.log(start+\",\"+end);\n    return [start, end];\n  }\n\n  function getVisibleCharRange()\n  {\n    var lineRange = getVisibleLineRange();\n    return [rep.lines.offsetOfIndex(lineRange[0]), rep.lines.offsetOfIndex(lineRange[1])];\n  }\n\n  function handleCut(evt)\n  {\n    inCallStackIfNecessary(\"handleCut\", function()\n    {\n      doDeleteKey(evt);\n    });\n    return true;\n  }\n\n  function handleClick(evt)\n  {\n    inCallStackIfNecessary(\"handleClick\", function()\n    {\n      idleWorkTimer.atMost(200);\n    });\n\n    function isLink(n)\n    {\n      return (n.tagName || '').toLowerCase() == \"a\" && n.href;\n    }\n\n    // only want to catch left-click\n    if ((!evt.ctrlKey) && (evt.button != 2) && (evt.button != 3))\n    {\n      // find A tag with HREF\n      var n = evt.target;\n      while (n && n.parentNode && !isLink(n))\n      {\n        n = n.parentNode;\n      }\n      if (n && isLink(n))\n      {\n        try\n        {\n          var newWindow = window.open(n.href, '_blank');\n          newWindow.focus();\n        }\n        catch (e)\n        {\n          // absorb \"user canceled\" error in IE for certain prompts\n        }\n        evt.preventDefault();\n      }\n    }\n    //hide the dropdownso\n    if(window.parent.parent.padeditbar){ // required in case its in an iframe should probably use parent..  See Issue 327 https://github.com/ether/etherpad-lite/issues/327\n      window.parent.parent.padeditbar.toggleDropDown(\"none\");\n    }\n  }\n\n  function doReturnKey()\n  {\n    if (!(rep.selStart && rep.selEnd))\n    {\n      return;\n    }\n\n    var lineNum = rep.selStart[0];\n    var listType = getLineListType(lineNum);\n\n    if (listType)\n    {\n      var text = rep.lines.atIndex(lineNum).text;\n      listType = /([a-z]+)([0-9]+)/.exec(listType);\n      var type  = listType[1];\n      var level = Number(listType[2]);\n\n      //detect empty list item; exclude indentation\n      if(text === '*' && type !== \"indent\")\n      {\n        //if not already on the highest level\n        if(level > 1)\n        {\n          setLineListType(lineNum, type+(level-1));//automatically decrease the level\n        }\n        else\n        {\n          setLineListType(lineNum, '');//remove the list\n          renumberList(lineNum + 1);//trigger renumbering of list that may be right after\n        }\n      }\n      else if (lineNum + 1 < rep.lines.length())\n      {\n        performDocumentReplaceSelection('\\n');\n        setLineListType(lineNum + 1, type+level);\n      }\n    }\n    else\n    {\n      performDocumentReplaceSelection('\\n');\n      handleReturnIndentation();\n    }\n  }\n\n  function doIndentOutdent(isOut)\n  {\n    if (!((rep.selStart && rep.selEnd) ||\n        ((rep.selStart[0] == rep.selEnd[0]) && (rep.selStart[1] == rep.selEnd[1]) &&  rep.selEnd[1] > 1)) &&\n        (isOut != true)\n       )\n    {\n      return false;\n    }\n\n    var firstLine, lastLine;\n    firstLine = rep.selStart[0];\n    lastLine = Math.max(firstLine, rep.selEnd[0] - ((rep.selEnd[1] === 0) ? 1 : 0));\n    var mods = [];\n    for (var n = firstLine; n <= lastLine; n++)\n    {\n      var listType = getLineListType(n);\n      var t = 'indent';\n      var level = 0;\n      if (listType)\n      {\n        listType = /([a-z]+)([0-9]+)/.exec(listType);\n        if (listType)\n        {\n          t = listType[1];\n          level = Number(listType[2]);\n        }\n      }\n      var newLevel = Math.max(0, Math.min(MAX_LIST_LEVEL, level + (isOut ? -1 : 1)));\n      if (level != newLevel)\n      {\n        mods.push([n, (newLevel > 0) ? t + newLevel : '']);\n      }\n    }\n\n    _.each(mods, function(mod){\n      setLineListType(mod[0], mod[1]);\n    });\n    return true;\n  }\n  editorInfo.ace_doIndentOutdent = doIndentOutdent;\n\n  function doTabKey(shiftDown)\n  {\n    if (!doIndentOutdent(shiftDown))\n    {\n      performDocumentReplaceSelection(THE_TAB);\n    }\n  }\n\n  function doDeleteKey(optEvt)\n  {\n    var evt = optEvt || {};\n    var handled = false;\n    if (rep.selStart)\n    {\n      if (isCaret())\n      {\n        var lineNum = caretLine();\n        var col = caretColumn();\n        var lineEntry = rep.lines.atIndex(lineNum);\n        var lineText = lineEntry.text;\n        var lineMarker = lineEntry.lineMarker;\n        if (/^ +$/.exec(lineText.substring(lineMarker, col)))\n        {\n          var col2 = col - lineMarker;\n          var tabSize = THE_TAB.length;\n          var toDelete = ((col2 - 1) % tabSize) + 1;\n          performDocumentReplaceRange([lineNum, col - toDelete], [lineNum, col], '');\n          //scrollSelectionIntoView();\n          handled = true;\n        }\n      }\n      if (!handled)\n      {\n        if (isCaret())\n        {\n          var theLine = caretLine();\n          var lineEntry = rep.lines.atIndex(theLine);\n          if (caretColumn() <= lineEntry.lineMarker)\n          {\n            // delete at beginning of line\n            var action = 'delete_newline';\n            var prevLineListType = (theLine > 0 ? getLineListType(theLine - 1) : '');\n            var thisLineListType = getLineListType(theLine);\n            var prevLineEntry = (theLine > 0 && rep.lines.atIndex(theLine - 1));\n            var prevLineBlank = (prevLineEntry && prevLineEntry.text.length == prevLineEntry.lineMarker);\n\n            var thisLineHasMarker = documentAttributeManager.lineHasMarker(theLine);\n\n            if (thisLineListType)\n            {\n              // this line is a list\n              if (prevLineBlank && !prevLineListType)\n              {\n                // previous line is blank, remove it\n                performDocumentReplaceRange([theLine - 1, prevLineEntry.text.length], [theLine, 0], '');\n              }\n              else\n              {\n                // delistify\n                performDocumentReplaceRange([theLine, 0], [theLine, lineEntry.lineMarker], '');\n              }\n            }else if (thisLineHasMarker && prevLineEntry){\n              // If the line has any attributes assigned, remove them by removing the marker '*'\n              performDocumentReplaceRange([theLine -1 , prevLineEntry.text.length], [theLine, lineEntry.lineMarker], '');\n            }\n            else if (theLine > 0)\n            {\n              // remove newline\n              performDocumentReplaceRange([theLine - 1, prevLineEntry.text.length], [theLine, 0], '');\n            }\n          }\n          else\n          {\n            var docChar = caretDocChar();\n            if (docChar > 0)\n            {\n              if (evt.metaKey || evt.ctrlKey || evt.altKey)\n              {\n                // delete as many unicode \"letters or digits\" in a row as possible;\n                // always delete one char, delete further even if that first char\n                // isn't actually a word char.\n                var deleteBackTo = docChar - 1;\n                while (deleteBackTo > lineEntry.lineMarker && isWordChar(rep.alltext.charAt(deleteBackTo - 1)))\n                {\n                  deleteBackTo--;\n                }\n                performDocumentReplaceCharRange(deleteBackTo, docChar, '');\n              }\n              else\n              {\n                // normal delete\n                performDocumentReplaceCharRange(docChar - 1, docChar, '');\n              }\n            }\n          }\n        }\n        else\n        {\n          performDocumentReplaceSelection('');\n        }\n      }\n    }\n     //if the list has been removed, it is necessary to renumber\n    //starting from the *next* line because the list may have been\n    //separated. If it returns null, it means that the list was not cut, try\n    //from the current one.\n    var line = caretLine();\n    if(line != -1 && renumberList(line+1) === null)\n    {\n      renumberList(line);\n    }\n  }\n\n  // set of \"letter or digit\" chars is based on section 20.5.16 of the original Java Language Spec\n  var REGEX_WORDCHAR = /[\\u0030-\\u0039\\u0041-\\u005A\\u0061-\\u007A\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u00FF\\u0100-\\u1FFF\\u3040-\\u9FFF\\uF900-\\uFDFF\\uFE70-\\uFEFE\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFDC]/;\n  var REGEX_SPACE = /\\s/;\n\n  function isWordChar(c)\n  {\n    return !!REGEX_WORDCHAR.exec(c);\n  }\n  editorInfo.ace_isWordChar = isWordChar;\n\n  function isSpaceChar(c)\n  {\n    return !!REGEX_SPACE.exec(c);\n  }\n\n  function moveByWordInLine(lineText, initialIndex, forwardNotBack)\n  {\n    var i = initialIndex;\n\n    function nextChar()\n    {\n      if (forwardNotBack) return lineText.charAt(i);\n      else return lineText.charAt(i - 1);\n    }\n\n    function advance()\n    {\n      if (forwardNotBack) i++;\n      else i--;\n    }\n\n    function isDone()\n    {\n      if (forwardNotBack) return i >= lineText.length;\n      else return i <= 0;\n    }\n\n    // On Mac and Linux, move right moves to end of word and move left moves to start;\n    // on Windows, always move to start of word.\n    // On Windows, Firefox and IE disagree on whether to stop for punctuation (FF says no).\n    if (browser.msie && forwardNotBack)\n    {\n      while ((!isDone()) && isWordChar(nextChar()))\n      {\n        advance();\n      }\n      while ((!isDone()) && !isWordChar(nextChar()))\n      {\n        advance();\n      }\n    }\n    else\n    {\n      while ((!isDone()) && !isWordChar(nextChar()))\n      {\n        advance();\n      }\n      while ((!isDone()) && isWordChar(nextChar()))\n      {\n        advance();\n      }\n    }\n\n    return i;\n  }\n\n  function handleKeyEvent(evt)\n  {\n    // if (DEBUG && window.DONT_INCORP) return;\n    if (!isEditable) return;\n    var type = evt.type;\n    var charCode = evt.charCode;\n    var keyCode = evt.keyCode;\n    var which = evt.which;\n    var altKey = evt.altKey;\n    var shiftKey = evt.shiftKey;\n\n    // prevent ESC key\n    if (keyCode == 27)\n    {\n      evt.preventDefault();\n      return;\n    }\n    // Is caret potentially hidden by the chat button?\n    var myselection = document.getSelection(); // get the current caret selection\n    var caretOffsetTop = myselection.focusNode.parentNode.offsetTop | myselection.focusNode.offsetTop; // get the carets selection offset in px IE 214\n    \n    if(myselection.focusNode.wholeText){ // Is there any content?  If not lineHeight will report wrong..\n      var lineHeight = myselection.focusNode.parentNode.offsetHeight; // line height of populated links\n    }else{\n      var lineHeight = myselection.focusNode.offsetHeight; // line height of blank lines\n    }\n\n    var heightOfChatIcon = parent.parent.$('#chaticon').height(); // height of the chat icon button\n    lineHeight = (lineHeight *2) + heightOfChatIcon;\n    var viewport = getViewPortTopBottom();\n    var viewportHeight = viewport.bottom - viewport.top - lineHeight;\n    var relCaretOffsetTop = caretOffsetTop - viewport.top; // relative Caret Offset Top to viewport\n    if (viewportHeight < relCaretOffsetTop){\n      parent.parent.$(\"#chaticon\").css(\"opacity\",\".3\"); // make chaticon opacity low when user types near it\n    }else{\n      parent.parent.$(\"#chaticon\").css(\"opacity\",\"1\"); // make chaticon opacity back to full (so fully visible)\n    }\n\n    //dmesg(\"keyevent type: \"+type+\", which: \"+which);\n    // Don't take action based on modifier keys going up and down.\n    // Modifier keys do not generate \"keypress\" events.\n    // 224 is the command-key under Mac Firefox.\n    // 91 is the Windows key in IE; it is ASCII for open-bracket but isn't the keycode for that key\n    // 20 is capslock in IE.\n    var isModKey = ((!charCode) && ((type == \"keyup\") || (type == \"keydown\")) && (keyCode == 16 || keyCode == 17 || keyCode == 18 || keyCode == 20 || keyCode == 224 || keyCode == 91));\n    if (isModKey) return;\n\n    // If the key is a keypress and the browser is opera and the key is enter, do nothign at all as this fires twice.\n    if (keyCode == 13 && browser.opera && (type == \"keypress\")){\n      return; // This stops double enters in Opera but double Tabs still show on single tab keypress, adding keyCode == 9 to this doesn't help as the event is fired twice\n    }\n    var specialHandled = false;\n    var isTypeForSpecialKey = ((browser.msie || browser.safari || browser.chrome) ? (type == \"keydown\") : (type == \"keypress\"));\n    var isTypeForCmdKey = ((browser.msie || browser.safari || browser.chrome) ? (type == \"keydown\") : (type == \"keypress\"));\n    var stopped = false;\n\n    inCallStackIfNecessary(\"handleKeyEvent\", function()\n    {\n      if (type == \"keypress\" || (isTypeForSpecialKey && keyCode == 13 /*return*/ ))\n      {\n        // in IE, special keys don't send keypress, the keydown does the action\n        if (!outsideKeyPress(evt))\n        {\n          evt.preventDefault();\n          stopped = true;\n        }\n      }\n      else if (evt.key === \"Dead\"){\n        // If it's a dead key we don't want to do any Etherpad behavior.\n        stopped = true;\n        return true;\n      }\n      else if (type == \"keydown\")\n      {\n        outsideKeyDown(evt);\n      }\n      if (!stopped)\n      {\n        var specialHandledInHook = hooks.callAll('aceKeyEvent', {\n          callstack: currentCallStack,\n          editorInfo: editorInfo,\n          rep: rep,\n          documentAttributeManager: documentAttributeManager,\n          evt:evt\n        });\n        specialHandled = (specialHandledInHook&&specialHandledInHook.length>0)?specialHandledInHook[0]:specialHandled;\n        if ((!specialHandled) && altKey && isTypeForSpecialKey && keyCode == 120){\n          // Alt F9 focuses on the File Menu and/or editbar.\n          // Note that while most editors use Alt F10 this is not desirable\n          // As ubuntu cannot use Alt F10....\n          // Focus on the editbar. -- TODO: Move Focus back to previous state (we know it so we can use it)\n          var firstEditbarElement = parent.parent.$('#editbar').children(\"ul\").first().children().first().children().first().children().first();\n          $(this).blur(); \n          firstEditbarElement.focus();\n          evt.preventDefault();\n        }\n        if ((!specialHandled) && altKey && keyCode == 67 && type === \"keydown\"){\n          // Alt c focuses on the Chat window\n          $(this).blur(); \n          parent.parent.chat.show();\n          parent.parent.$(\"#chatinput\").focus();\n          evt.preventDefault();\n        }\n        if ((!specialHandled) && evt.ctrlKey && shiftKey && keyCode == 50 && type === \"keydown\"){\n          // Control-Shift-2 shows a gritter popup showing a line author\n          var lineNumber = rep.selEnd[0];\n          var alineAttrs = rep.alines[lineNumber];\n          var apool = rep.apool;\n\n          // TODO: support selection ranges\n          // TODO: Still work when authorship colors have been cleared\n          // TODO: i18n\n          // TODO: There appears to be a race condition or so.\n\n          var author = null;\n          if (alineAttrs) {\n            var authors = [];\n            var authorNames = [];\n            var opIter = Changeset.opIterator(alineAttrs);\n\n            while (opIter.hasNext()){\n              var op = opIter.next();\n              authorId = Changeset.opAttributeValue(op, 'author', apool);\n\n              // Only push unique authors and ones with values\n              if(authors.indexOf(authorId) === -1 && authorId !== \"\"){\n                authors.push(authorId);\n              }\n\n            }\n\n          }\n\n          // No author information is available IE on a new pad.\n          if(authors.length === 0){\n            var authorString = \"No author information is available\";\n          }\n          else{\n            // Known authors info, both current and historical\n            var padAuthors = parent.parent.pad.userList();\n            var authorObj = {};\n            authors.forEach(function(authorId){\n              padAuthors.forEach(function(padAuthor){\n                // If the person doing the lookup is the author..\n                if(padAuthor.userId === authorId){\n                  if(parent.parent.clientVars.userId === authorId){\n                    authorObj = {\n                      name: \"Me\"\n                    }\n                  }else{\n                    authorObj = padAuthor;\n                  }\n                }\n              });\n              if(!authorObj){\n                author = \"Unknown\";\n                return;\n              }\n              author = authorObj.name;\n              if(!author) author = \"Unknown\";\n              authorNames.push(author);\n            })\n          }\n          if(authors.length === 1){\n            var authorString = \"The author of this line is \" + authorNames;\n          }\n          if(authors.length > 1){\n            var authorString = \"The authors of this line are \" + authorNames.join(\" & \");\n\t  }\n\n          parent.parent.$.gritter.add({\n            // (string | mandatory) the heading of the notification\n            title: 'Line Authors',\n            // (string | mandatory) the text inside the notification\n            text: authorString,\n            // (bool | optional) if you want it to fade out on its own or just sit there\n            sticky: false,\n            // (int | optional) the time you want it to be alive for before fading out\n            time: '4000'\n          });\n        }\n        if ((!specialHandled) && isTypeForSpecialKey && keyCode == 8)\n        {\n          // \"delete\" key; in mozilla, if we're at the beginning of a line, normalize now,\n          // or else deleting a blank line can take two delete presses.\n          // --\n          // we do deletes completely customly now:\n          //  - allows consistent (and better) meta-delete behavior\n          //  - normalizing and then allowing default behavior confused IE\n          //  - probably eliminates a few minor quirks\n          fastIncorp(3);\n          evt.preventDefault();\n          doDeleteKey(evt);\n          specialHandled = true;\n        }\n        if ((!specialHandled) && isTypeForSpecialKey && keyCode == 13)\n        {\n          // return key, handle specially;\n          // note that in mozilla we need to do an incorporation for proper return behavior anyway.\n          fastIncorp(4);\n          evt.preventDefault();\n          doReturnKey();\n          //scrollSelectionIntoView();\n          scheduler.setTimeout(function()\n          {\n            outerWin.scrollBy(-100, 0);\n          }, 0);\n          specialHandled = true;\n        }\n        if ((!specialHandled) && isTypeForCmdKey && String.fromCharCode(which).toLowerCase() == \"s\" && (evt.metaKey || evt.ctrlKey) && !evt.altKey) /* Do a saved revision on ctrl S */\n        {\n          evt.preventDefault();\n          var originalBackground = parent.parent.$('#revisionlink').css(\"background\")\n          parent.parent.$('#revisionlink').css({\"background\":\"lightyellow\"});\n          scheduler.setTimeout(function(){\n            parent.parent.$('#revisionlink').css({\"background\":originalBackground});\n          }, 1000);\n          parent.parent.pad.collabClient.sendMessage({\"type\":\"SAVE_REVISION\"}); /* The parent.parent part of this is BAD and I feel bad..  It may break something */\n          specialHandled = true;\n        }\n        if ((!specialHandled) && isTypeForSpecialKey && keyCode == 9 && !(evt.metaKey || evt.ctrlKey))\n        {\n          // tab\n          fastIncorp(5);\n          evt.preventDefault();\n          doTabKey(evt.shiftKey);\n          //scrollSelectionIntoView();\n          specialHandled = true;\n        }\n        if ((!specialHandled) && isTypeForCmdKey && String.fromCharCode(which).toLowerCase() == \"z\" && (evt.metaKey || evt.ctrlKey) && !evt.altKey)\n        {\n          // cmd-Z (undo)\n          fastIncorp(6);\n          evt.preventDefault();\n          if (evt.shiftKey)\n          {\n            doUndoRedo(\"redo\");\n          }\n          else\n          {\n            doUndoRedo(\"undo\");\n          }\n          specialHandled = true;\n        }\n        if ((!specialHandled) && isTypeForCmdKey && String.fromCharCode(which).toLowerCase() == \"y\" && (evt.metaKey || evt.ctrlKey))\n        {\n          // cmd-Y (redo)\n          fastIncorp(10);\n          evt.preventDefault();\n          doUndoRedo(\"redo\");\n          specialHandled = true;\n        }\n        if ((!specialHandled) && isTypeForCmdKey && String.fromCharCode(which).toLowerCase() == \"b\" && (evt.metaKey || evt.ctrlKey))\n        {\n          // cmd-B (bold)\n          fastIncorp(13);\n          evt.preventDefault();\n          toggleAttributeOnSelection('bold');\n          specialHandled = true;\n        }\n        if ((!specialHandled) && isTypeForCmdKey && String.fromCharCode(which).toLowerCase() == \"i\" && (evt.metaKey || evt.ctrlKey))\n        {\n          // cmd-I (italic)\n          fastIncorp(14);\n          evt.preventDefault();\n          toggleAttributeOnSelection('italic');\n          specialHandled = true;\n        }\n        if ((!specialHandled) && isTypeForCmdKey && String.fromCharCode(which).toLowerCase() == \"u\" && (evt.metaKey || evt.ctrlKey))\n        {\n          // cmd-U (underline)\n          fastIncorp(15);\n          evt.preventDefault();\n          toggleAttributeOnSelection('underline');\n          specialHandled = true;\n        }\n        if ((!specialHandled) && isTypeForCmdKey && String.fromCharCode(which).toLowerCase() == \"5\" && (evt.metaKey || evt.ctrlKey) && evt.altKey !== true)\n        {\n          // cmd-5 (strikethrough)\n          fastIncorp(13);\n          evt.preventDefault();\n          toggleAttributeOnSelection('strikethrough');\n          specialHandled = true;\n        }\n        if ((!specialHandled) && isTypeForCmdKey && String.fromCharCode(which).toLowerCase() == \"l\" && (evt.metaKey || evt.ctrlKey) && evt.shiftKey)\n        {\n          // cmd-shift-L (unorderedlist)\n          fastIncorp(9);\n          evt.preventDefault();\n          doInsertUnorderedList()\n          specialHandled = true;\n\t}\n        if ((!specialHandled) && isTypeForCmdKey && (String.fromCharCode(which).toLowerCase() == \"n\" || String.fromCharCode(which) == 1) && (evt.metaKey || evt.ctrlKey) && evt.shiftKey)\n        {\n          // cmd-shift-N (orderedlist)\n          fastIncorp(9);\n          evt.preventDefault();\n          doInsertOrderedList()\n          specialHandled = true;\n\t}\n        if ((!specialHandled) && isTypeForCmdKey && String.fromCharCode(which).toLowerCase() == \"c\" && (evt.metaKey || evt.ctrlKey) && evt.shiftKey) {\n          // cmd-shift-C (clearauthorship)\n          fastIncorp(9);\n          evt.preventDefault();\n          CMDS.clearauthorship();\n        }\n        if ((!specialHandled) && isTypeForCmdKey && String.fromCharCode(which).toLowerCase() == \"h\" && (evt.ctrlKey))\n        {\n          // cmd-H (backspace)\n          fastIncorp(20);\n          evt.preventDefault();\n          doDeleteKey();\n          specialHandled = true;\n        }\n        if((evt.which == 36 && evt.ctrlKey == true)){ setScrollY(0); } // Control Home send to Y = 0\n        if((evt.which == 33 || evt.which == 34) && type == 'keydown' && !evt.ctrlKey){\n\n          evt.preventDefault(); // This is required, browsers will try to do normal default behavior on page up / down and the default behavior SUCKS\n\n          var oldVisibleLineRange = getVisibleLineRange();\n          var topOffset = rep.selStart[0] - oldVisibleLineRange[0];\n          if(topOffset < 0 ){\n            topOffset = 0;\n          }\n\n          var isPageDown = evt.which === 34;\n          var isPageUp = evt.which === 33;\n\n          scheduler.setTimeout(function(){\n            var newVisibleLineRange = getVisibleLineRange(); // the visible lines IE 1,10\n            var linesCount = rep.lines.length(); // total count of lines in pad IE 10\n            var numberOfLinesInViewport = newVisibleLineRange[1] - newVisibleLineRange[0]; // How many lines are in the viewport right now?\n\n            if(isPageUp){\n              rep.selEnd[0] = rep.selEnd[0] - numberOfLinesInViewport; // move to the bottom line +1 in the viewport (essentially skipping over a page)\n              rep.selStart[0] = rep.selStart[0] - numberOfLinesInViewport; // move to the bottom line +1 in the viewport (essentially skipping over a page)\n            }\n\n            if(isPageDown){ // if we hit page down\n              if(rep.selEnd[0] >= oldVisibleLineRange[0]){ // If the new viewpoint position is actually further than where we are right now\n                rep.selStart[0] = oldVisibleLineRange[1] -1; // dont go further in the page down than what's visible IE go from 0 to 50 if 50 is visible on screen but dont go below that else we miss content\n                rep.selEnd[0] = oldVisibleLineRange[1] -1; // dont go further in the page down than what's visible IE go from 0 to 50 if 50 is visible on screen but dont go below that else we miss content\n              }\n            }\n\n            //ensure min and max\n            if(rep.selEnd[0] < 0){\n              rep.selEnd[0] = 0;\n            }\n            if(rep.selStart[0] < 0){\n              rep.selStart[0] = 0;\n            }\n            if(rep.selEnd[0] >= linesCount){\n              rep.selEnd[0] = linesCount-1;\n            }\n            updateBrowserSelectionFromRep();\n            var myselection = document.getSelection(); // get the current caret selection, can't use rep. here because that only gives us the start position not the current\n            var caretOffsetTop = myselection.focusNode.parentNode.offsetTop || myselection.focusNode.offsetTop; // get the carets selection offset in px IE 214\n\n            // sometimes the first selection is -1 which causes problems (Especially with ep_page_view)\n            // so use focusNode.offsetTop value.\n            if(caretOffsetTop === -1) caretOffsetTop = myselection.focusNode.offsetTop;\n            setScrollY(caretOffsetTop); // set the scrollY offset of the viewport on the document\n\n          }, 200);\n        }\n        /* Attempt to apply some sanity to cursor handling in Chrome after a copy / paste event\n           We have to do this the way we do because rep. doesn't hold the value for keyheld events IE if the user\n           presses and holds the arrow key ..  Sorry if this is ugly, blame Chrome's weird handling of viewports after new content is added*/\n        if((evt.which == 37 || evt.which == 38 || evt.which == 39 || evt.which == 40) && browser.chrome){\n          var viewport = getViewPortTopBottom();\n          var myselection = document.getSelection(); // get the current caret selection, can't use rep. here because that only gives us the start position not the current\n          var caretOffsetTop = myselection.focusNode.parentNode.offsetTop || myselection.focusNode.offsetTop; // get the carets selection offset in px IE 214\n          var lineHeight = $(myselection.focusNode.parentNode).parent(\"div\").height(); // get the line height of the caret line\n          // top.console.log(\"offsetTop\", myselection.focusNode.parentNode.parentNode.offsetTop);\n          try {\n            lineHeight = $(myselection.focusNode).height() // needed for how chrome handles line heights of null objects\n            // console.log(\"lineHeight now\", lineHeight);\n          }catch(e){}\n          var caretOffsetTopBottom = caretOffsetTop + lineHeight;\n          var visibleLineRange = getVisibleLineRange(); // the visible lines IE 1,10\n\n          if(caretOffsetTop){ // sometimes caretOffsetTop bugs out and returns 0, not sure why, possible Chrome bug?  Either way if it does we don't wanna mess with it\n            // top.console.log(caretOffsetTop, viewport.top, caretOffsetTopBottom, viewport.bottom);\n            var caretIsNotVisible = (caretOffsetTop < viewport.top || caretOffsetTopBottom >= viewport.bottom); // Is the Caret Visible to the user?\n            // Expect some weird behavior caretOffsetTopBottom is greater than viewport.bottom on a keypress down\n            var offsetTopSamePlace = caretOffsetTop == viewport.top; // sometimes moving key left & up leaves the caret at the same point as the viewport.top, technically the caret is visible but it's not fully visible so we should move to it\n            if(offsetTopSamePlace && (evt.which == 37 || evt.which == 38)){\n                var newY = caretOffsetTop;\n                setScrollY(newY);\n            }\n\n            if(caretIsNotVisible){ // is the cursor no longer visible to the user?\n              // top.console.log(\"Caret is NOT visible to the user\");\n              // top.console.log(caretOffsetTop,viewport.top,caretOffsetTopBottom,viewport.bottom);\n              // Oh boy the caret is out of the visible area, I need to scroll the browser window to lineNum.\n              if(evt.which == 37 || evt.which == 38){ // If left or up arrow\n                var newY = caretOffsetTop; // That was easy!\n              }\n              if(evt.which == 39 || evt.which == 40){ // if down or right arrow\n                // only move the viewport if we're at the bottom of the viewport, if we hit down any other time the viewport shouldn't change\n                // NOTE: This behavior only fires if Chrome decides to break the page layout after a paste, it's annoying but nothing I can do\n                var selection = getSelection();\n                // top.console.log(\"line #\", rep.selStart[0]); // the line our caret is on\n                // top.console.log(\"firstvisible\", visibleLineRange[0]); // the first visiblel ine\n                // top.console.log(\"lastVisible\", visibleLineRange[1]); // the last visible line\n                // top.console.log(rep.selStart[0], visibleLineRange[1], rep.selStart[0], visibleLineRange[0]);\n                var newY = viewport.top + lineHeight;\n              }\n              if(newY){\n                setScrollY(newY); // set the scrollY offset of the viewport on the document\n              }\n            }\n          }\n        }\n      }\n\n      if (type == \"keydown\")\n      {\n        idleWorkTimer.atLeast(500);\n      }\n      else if (type == \"keypress\")\n      {\n        if ((!specialHandled) && false /*parenModule.shouldNormalizeOnChar(charCode)*/)\n        {\n          idleWorkTimer.atMost(0);\n        }\n        else\n        {\n          idleWorkTimer.atLeast(500);\n        }\n      }\n      else if (type == \"keyup\")\n      {\n        var wait = 0;\n        idleWorkTimer.atLeast(wait);\n        idleWorkTimer.atMost(wait);\n      }\n\n      // Is part of multi-keystroke international character on Firefox Mac\n      var isFirefoxHalfCharacter = (browser.firefox && evt.altKey && charCode === 0 && keyCode === 0);\n\n      // Is part of multi-keystroke international character on Safari Mac\n      var isSafariHalfCharacter = (browser.safari && evt.altKey && keyCode == 229);\n\n      if (thisKeyDoesntTriggerNormalize || isFirefoxHalfCharacter || isSafariHalfCharacter)\n      {\n        idleWorkTimer.atLeast(3000); // give user time to type\n        // if this is a keydown, e.g., the keyup shouldn't trigger a normalize\n        thisKeyDoesntTriggerNormalize = true;\n      }\n\n      if ((!specialHandled) && (!thisKeyDoesntTriggerNormalize) && (!inInternationalComposition))\n      {\n        if (type != \"keyup\")\n        {\n          observeChangesAroundSelection();\n        }\n      }\n\n      if (type == \"keyup\")\n      {\n        thisKeyDoesntTriggerNormalize = false;\n      }\n    });\n  }\n\n  var thisKeyDoesntTriggerNormalize = false;\n\n  function doUndoRedo(which)\n  {\n    // precond: normalized DOM\n    if (undoModule.enabled)\n    {\n      var whichMethod;\n      if (which == \"undo\") whichMethod = 'performUndo';\n      if (which == \"redo\") whichMethod = 'performRedo';\n      if (whichMethod)\n      {\n        var oldEventType = currentCallStack.editEvent.eventType;\n        currentCallStack.startNewEvent(which);\n        undoModule[whichMethod](function(backset, selectionInfo)\n        {\n          if (backset)\n          {\n            performDocumentApplyChangeset(backset);\n          }\n          if (selectionInfo)\n          {\n            performSelectionChange(lineAndColumnFromChar(selectionInfo.selStart), lineAndColumnFromChar(selectionInfo.selEnd), selectionInfo.selFocusAtStart);\n          }\n          var oldEvent = currentCallStack.startNewEvent(oldEventType, true);\n          return oldEvent;\n        });\n      }\n    }\n  }\n  editorInfo.ace_doUndoRedo = doUndoRedo;\n\n  function updateBrowserSelectionFromRep()\n  {\n    // requires normalized DOM!\n    var selStart = rep.selStart,\n        selEnd = rep.selEnd;\n\n    if (!(selStart && selEnd))\n    {\n      setSelection(null);\n      return;\n    }\n\n    var selection = {};\n\n    var ss = [selStart[0], selStart[1]];\n    selection.startPoint = getPointForLineAndChar(ss);\n\n    var se = [selEnd[0], selEnd[1]];\n    selection.endPoint = getPointForLineAndChar(se);\n\n    selection.focusAtStart = !! rep.selFocusAtStart;\n    setSelection(selection);\n  }\n  editorInfo.ace_updateBrowserSelectionFromRep = updateBrowserSelectionFromRep;\n\n  function nodeMaxIndex(nd)\n  {\n    if (isNodeText(nd)) return nd.nodeValue.length;\n    else return 1;\n  }\n\n  function hasIESelection()\n  {\n    var browserSelection;\n    try\n    {\n      browserSelection = doc.selection;\n    }\n    catch (e)\n    {}\n    if (!browserSelection) return false;\n    var origSelectionRange;\n    try\n    {\n      origSelectionRange = browserSelection.createRange();\n    }\n    catch (e)\n    {}\n    if (!origSelectionRange) return false;\n    return true;\n  }\n\n  function getSelection()\n  {\n    // returns null, or a structure containing startPoint and endPoint,\n    // each of which has node (a magicdom node), index, and maxIndex.  If the node\n    // is a text node, maxIndex is the length of the text; else maxIndex is 1.\n    // index is between 0 and maxIndex, inclusive.\n    if (browser.msie)\n    {\n      var browserSelection;\n      try\n      {\n        browserSelection = doc.selection;\n      }\n      catch (e)\n      {}\n      if (!browserSelection) return null;\n      var origSelectionRange;\n      try\n      {\n        origSelectionRange = browserSelection.createRange();\n      }\n      catch (e)\n      {}\n      if (!origSelectionRange) return null;\n      var selectionParent = origSelectionRange.parentElement();\n      if (selectionParent.ownerDocument != doc) return null;\n\n      var newRange = function()\n      {\n        return doc.body.createTextRange();\n      };\n\n      var rangeForElementNode = function(nd)\n      {\n        var rng = newRange();\n        // doesn't work on text nodes\n        rng.moveToElementText(nd);\n        return rng;\n      };\n\n      var pointFromCollapsedRange = function(rng)\n      {\n        var parNode = rng.parentElement();\n        var elemBelow = -1;\n        var elemAbove = parNode.childNodes.length;\n        var rangeWithin = rangeForElementNode(parNode);\n\n        if (rng.compareEndPoints(\"StartToStart\", rangeWithin) === 0)\n        {\n          return {\n            node: parNode,\n            index: 0,\n            maxIndex: 1\n          };\n        }\n        else if (rng.compareEndPoints(\"EndToEnd\", rangeWithin) === 0)\n        {\n          if (isBlockElement(parNode) && parNode.nextSibling)\n          {\n            // caret after block is not consistent across browsers\n            // (same line vs next) so put caret before next node\n            return {\n              node: parNode.nextSibling,\n              index: 0,\n              maxIndex: 1\n            };\n          }\n          return {\n            node: parNode,\n            index: 1,\n            maxIndex: 1\n          };\n        }\n        else if (parNode.childNodes.length === 0)\n        {\n          return {\n            node: parNode,\n            index: 0,\n            maxIndex: 1\n          };\n        }\n\n        for (var i = 0; i < parNode.childNodes.length; i++)\n        {\n          var n = parNode.childNodes.item(i);\n          if (!isNodeText(n))\n          {\n            var nodeRange = rangeForElementNode(n);\n            var startComp = rng.compareEndPoints(\"StartToStart\", nodeRange);\n            var endComp = rng.compareEndPoints(\"EndToEnd\", nodeRange);\n            if (startComp >= 0 && endComp <= 0)\n            {\n              var index = 0;\n              if (startComp > 0)\n              {\n                index = 1;\n              }\n              return {\n                node: n,\n                index: index,\n                maxIndex: 1\n              };\n            }\n            else if (endComp > 0)\n            {\n              if (i > elemBelow)\n              {\n                elemBelow = i;\n                rangeWithin.setEndPoint(\"StartToEnd\", nodeRange);\n              }\n            }\n            else if (startComp < 0)\n            {\n              if (i < elemAbove)\n              {\n                elemAbove = i;\n                rangeWithin.setEndPoint(\"EndToStart\", nodeRange);\n              }\n            }\n          }\n        }\n        if ((elemAbove - elemBelow) == 1)\n        {\n          if (elemBelow >= 0)\n          {\n            return {\n              node: parNode.childNodes.item(elemBelow),\n              index: 1,\n              maxIndex: 1\n            };\n          }\n          else\n          {\n            return {\n              node: parNode.childNodes.item(elemAbove),\n              index: 0,\n              maxIndex: 1\n            };\n          }\n        }\n        var idx = 0;\n        var r = rng.duplicate();\n        // infinite stateful binary search! call function for values 0 to inf,\n        // expecting the answer to be about 40.  return index of smallest\n        // true value.\n        var indexIntoRange = binarySearchInfinite(40, function(i)\n        {\n          // the search algorithm whips the caret back and forth,\n          // though it has to be moved relatively and may hit\n          // the end of the buffer\n          var delta = i - idx;\n          var moved = Math.abs(r.move(\"character\", -delta));\n          // next line is work-around for fact that when moving left, the beginning\n          // of a text node is considered to be after the start of the parent element:\n          if (r.move(\"character\", -1)) r.move(\"character\", 1);\n          if (delta < 0) idx -= moved;\n          else idx += moved;\n          return (r.compareEndPoints(\"StartToStart\", rangeWithin) <= 0);\n        });\n        // iterate over consecutive text nodes, point is in one of them\n        var textNode = elemBelow + 1;\n        var indexLeft = indexIntoRange;\n        while (textNode < elemAbove)\n        {\n          var tn = parNode.childNodes.item(textNode);\n          if (indexLeft <= tn.nodeValue.length)\n          {\n            return {\n              node: tn,\n              index: indexLeft,\n              maxIndex: tn.nodeValue.length\n            };\n          }\n          indexLeft -= tn.nodeValue.length;\n          textNode++;\n        }\n        var tn = parNode.childNodes.item(textNode - 1);\n        return {\n          node: tn,\n          index: tn.nodeValue.length,\n          maxIndex: tn.nodeValue.length\n        };\n      };\n\n      var selection = {};\n      if (origSelectionRange.compareEndPoints(\"StartToEnd\", origSelectionRange) === 0)\n      {\n        // collapsed\n        var pnt = pointFromCollapsedRange(origSelectionRange);\n        selection.startPoint = pnt;\n        selection.endPoint = {\n          node: pnt.node,\n          index: pnt.index,\n          maxIndex: pnt.maxIndex\n        };\n      }\n      else\n      {\n        var start = origSelectionRange.duplicate();\n        start.collapse(true);\n        var end = origSelectionRange.duplicate();\n        end.collapse(false);\n        selection.startPoint = pointFromCollapsedRange(start);\n        selection.endPoint = pointFromCollapsedRange(end);\n      }\n      return selection;\n    }\n    else\n    {\n      // non-IE browser\n      var browserSelection = window.getSelection();\n      if (browserSelection && browserSelection.type != \"None\" && browserSelection.rangeCount !== 0)\n      {\n        var range = browserSelection.getRangeAt(0);\n\n        function isInBody(n)\n        {\n          while (n && !(n.tagName && n.tagName.toLowerCase() == \"body\"))\n          {\n            n = n.parentNode;\n          }\n          return !!n;\n        }\n\n        function pointFromRangeBound(container, offset)\n        {\n          if (!isInBody(container))\n          {\n            // command-click in Firefox selects whole document, HEAD and BODY!\n            return {\n              node: root,\n              index: 0,\n              maxIndex: 1\n            };\n          }\n          var n = container;\n          var childCount = n.childNodes.length;\n          if (isNodeText(n))\n          {\n            return {\n              node: n,\n              index: offset,\n              maxIndex: n.nodeValue.length\n            };\n          }\n          else if (childCount === 0)\n          {\n            return {\n              node: n,\n              index: 0,\n              maxIndex: 1\n            };\n          }\n          // treat point between two nodes as BEFORE the second (rather than after the first)\n          // if possible; this way point at end of a line block-element is treated as\n          // at beginning of next line\n          else if (offset == childCount)\n          {\n            var nd = n.childNodes.item(childCount - 1);\n            var max = nodeMaxIndex(nd);\n            return {\n              node: nd,\n              index: max,\n              maxIndex: max\n            };\n          }\n          else\n          {\n            var nd = n.childNodes.item(offset);\n            var max = nodeMaxIndex(nd);\n            return {\n              node: nd,\n              index: 0,\n              maxIndex: max\n            };\n          }\n        }\n        var selection = {};\n        selection.startPoint = pointFromRangeBound(range.startContainer, range.startOffset);\n        selection.endPoint = pointFromRangeBound(range.endContainer, range.endOffset);\n        selection.focusAtStart = (((range.startContainer != range.endContainer) || (range.startOffset != range.endOffset)) && browserSelection.anchorNode && (browserSelection.anchorNode == range.endContainer) && (browserSelection.anchorOffset == range.endOffset));\n\n        if(selection.startPoint.node.ownerDocument !== window.document){\n          return null;\n        }\n\n        return selection;\n      }\n      else return null;\n    }\n  }\n\n  function setSelection(selection)\n  {\n    function copyPoint(pt)\n    {\n      return {\n        node: pt.node,\n        index: pt.index,\n        maxIndex: pt.maxIndex\n      };\n    }\n    if (browser.msie)\n    {\n      // Oddly enough, accessing scrollHeight fixes return key handling on IE 8,\n      // presumably by forcing some kind of internal DOM update.\n      doc.body.scrollHeight;\n\n      function moveToElementText(s, n)\n      {\n        while (n.firstChild && !isNodeText(n.firstChild))\n        {\n          n = n.firstChild;\n        }\n        s.moveToElementText(n);\n      }\n\n      function newRange()\n      {\n        return doc.body.createTextRange();\n      }\n\n      function setCollapsedBefore(s, n)\n      {\n        // s is an IE TextRange, n is a dom node\n        if (isNodeText(n))\n        {\n          // previous node should not also be text, but prevent inf recurs\n          if (n.previousSibling && !isNodeText(n.previousSibling))\n          {\n            setCollapsedAfter(s, n.previousSibling);\n          }\n          else\n          {\n            setCollapsedBefore(s, n.parentNode);\n          }\n        }\n        else\n        {\n          moveToElementText(s, n);\n          // work around for issue that caret at beginning of line\n          // somehow ends up at end of previous line\n          if (s.move('character', 1))\n          {\n            s.move('character', -1);\n          }\n          s.collapse(true); // to start\n        }\n      }\n\n      function setCollapsedAfter(s, n)\n      {\n        // s is an IE TextRange, n is a magicdom node\n        if (isNodeText(n))\n        {\n          // can't use end of container when no nextSibling (could be on next line),\n          // so use previousSibling or start of container and move forward.\n          setCollapsedBefore(s, n);\n          s.move(\"character\", n.nodeValue.length);\n        }\n        else\n        {\n          moveToElementText(s, n);\n          s.collapse(false); // to end\n        }\n      }\n\n      function getPointRange(point)\n      {\n        var s = newRange();\n        var n = point.node;\n        if (isNodeText(n))\n        {\n          setCollapsedBefore(s, n);\n          s.move(\"character\", point.index);\n        }\n        else if (point.index === 0)\n        {\n          setCollapsedBefore(s, n);\n        }\n        else\n        {\n          setCollapsedAfter(s, n);\n        }\n        return s;\n      }\n\n      if (selection)\n      {\n        if (!hasIESelection())\n        {\n          return; // don't steal focus\n        }\n\n        var startPoint = copyPoint(selection.startPoint);\n        var endPoint = copyPoint(selection.endPoint);\n\n        // fix issue where selection can't be extended past end of line\n        // with shift-rightarrow or shift-downarrow\n        if (endPoint.index == endPoint.maxIndex && endPoint.node.nextSibling)\n        {\n          endPoint.node = endPoint.node.nextSibling;\n          endPoint.index = 0;\n          endPoint.maxIndex = nodeMaxIndex(endPoint.node);\n        }\n        var range = getPointRange(startPoint);\n        range.setEndPoint(\"EndToEnd\", getPointRange(endPoint));\n\n        // setting the selection in IE causes everything to scroll\n        // so that the selection is visible.  if setting the selection\n        // definitely accomplishes nothing, don't do it.\n\n\n        function isEqualToDocumentSelection(rng)\n        {\n          var browserSelection;\n          try\n          {\n            browserSelection = doc.selection;\n          }\n          catch (e)\n          {}\n          if (!browserSelection) return false;\n          var rng2 = browserSelection.createRange();\n          if (rng2.parentElement().ownerDocument != doc) return false;\n          if (rng.compareEndPoints(\"StartToStart\", rng2) !== 0) return false;\n          if (rng.compareEndPoints(\"EndToEnd\", rng2) !== 0) return false;\n          return true;\n        }\n        if (!isEqualToDocumentSelection(range))\n        {\n          //dmesg(toSource(selection));\n          //dmesg(escapeHTML(doc.body.innerHTML));\n          range.select();\n        }\n      }\n      else\n      {\n        try\n        {\n          doc.selection.empty();\n        }\n        catch (e)\n        {}\n      }\n    }\n    else\n    {\n      // non-IE browser\n      var isCollapsed;\n\n      function pointToRangeBound(pt)\n      {\n        var p = copyPoint(pt);\n        // Make sure Firefox cursor is deep enough; fixes cursor jumping when at top level,\n        // and also problem where cut/copy of a whole line selected with fake arrow-keys\n        // copies the next line too.\n        if (isCollapsed)\n        {\n          function diveDeep()\n          {\n            while (p.node.childNodes.length > 0)\n            {\n              //&& (p.node == root || p.node.parentNode == root)) {\n              if (p.index === 0)\n              {\n                p.node = p.node.firstChild;\n                p.maxIndex = nodeMaxIndex(p.node);\n              }\n              else if (p.index == p.maxIndex)\n              {\n                p.node = p.node.lastChild;\n                p.maxIndex = nodeMaxIndex(p.node);\n                p.index = p.maxIndex;\n              }\n              else break;\n            }\n          }\n          // now fix problem where cursor at end of text node at end of span-like element\n          // with background doesn't seem to show up...\n          if (isNodeText(p.node) && p.index == p.maxIndex)\n          {\n            var n = p.node;\n            while ((!n.nextSibling) && (n != root) && (n.parentNode != root))\n            {\n              n = n.parentNode;\n            }\n            if (n.nextSibling && (!((typeof n.nextSibling.tagName) == \"string\" && n.nextSibling.tagName.toLowerCase() == \"br\")) && (n != p.node) && (n != root) && (n.parentNode != root))\n            {\n              // found a parent, go to next node and dive in\n              p.node = n.nextSibling;\n              p.maxIndex = nodeMaxIndex(p.node);\n              p.index = 0;\n              diveDeep();\n            }\n          }\n          // try to make sure insertion point is styled;\n          // also fixes other FF problems\n          if (!isNodeText(p.node))\n          {\n            diveDeep();\n          }\n        }\n        if (isNodeText(p.node))\n        {\n          return {\n            container: p.node,\n            offset: p.index\n          };\n        }\n        else\n        {\n          // p.index in {0,1}\n          return {\n            container: p.node.parentNode,\n            offset: childIndex(p.node) + p.index\n          };\n        }\n      }\n      var browserSelection = window.getSelection();\n      if (browserSelection)\n      {\n        browserSelection.removeAllRanges();\n        if (selection)\n        {\n          isCollapsed = (selection.startPoint.node === selection.endPoint.node && selection.startPoint.index === selection.endPoint.index);\n          var start = pointToRangeBound(selection.startPoint);\n          var end = pointToRangeBound(selection.endPoint);\n\n          if ((!isCollapsed) && selection.focusAtStart && browserSelection.collapse && browserSelection.extend)\n          {\n            // can handle \"backwards\"-oriented selection, shift-arrow-keys move start\n            // of selection\n            browserSelection.collapse(end.container, end.offset);\n            //console.trace();\n            //console.log(htmlPrettyEscape(rep.alltext));\n            //console.log(\"%o %o\", rep.selStart, rep.selEnd);\n            //console.log(\"%o %d\", start.container, start.offset);\n            browserSelection.extend(start.container, start.offset);\n          }\n          else\n          {\n            var range = doc.createRange();\n            range.setStart(start.container, start.offset);\n            range.setEnd(end.container, end.offset);\n            browserSelection.removeAllRanges();\n            browserSelection.addRange(range);\n          }\n        }\n      }\n    }\n  }\n\n  function childIndex(n)\n  {\n    var idx = 0;\n    while (n.previousSibling)\n    {\n      idx++;\n      n = n.previousSibling;\n    }\n    return idx;\n  }\n\n  function fixView()\n  {\n    // calling this method repeatedly should be fast\n    if (getInnerWidth() === 0 || getInnerHeight() === 0)\n    {\n      return;\n    }\n\n    function setIfNecessary(obj, prop, value)\n    {\n      if (obj[prop] != value)\n      {\n        obj[prop] = value;\n      }\n    }\n\n    var lineNumberWidth = sideDiv.firstChild.offsetWidth;\n    var newSideDivWidth = lineNumberWidth + LINE_NUMBER_PADDING_LEFT;\n    if (newSideDivWidth < MIN_LINEDIV_WIDTH) newSideDivWidth = MIN_LINEDIV_WIDTH;\n    iframePadLeft = EDIT_BODY_PADDING_LEFT;\n    if (hasLineNumbers) iframePadLeft += newSideDivWidth + LINE_NUMBER_PADDING_RIGHT;\n    setIfNecessary(iframe.style, \"left\", iframePadLeft + \"px\");\n    setIfNecessary(sideDiv.style, \"width\", newSideDivWidth + \"px\");\n\n    for (var i = 0; i < 2; i++)\n    {\n      var newHeight = root.clientHeight;\n      var newWidth = (browser.msie ? root.createTextRange().boundingWidth : root.clientWidth);\n      var viewHeight = getInnerHeight() - iframePadBottom - iframePadTop;\n      var viewWidth = getInnerWidth() - iframePadLeft - iframePadRight;\n      if (newHeight < viewHeight)\n      {\n        newHeight = viewHeight;\n        if (browser.msie) setIfNecessary(outerWin.document.documentElement.style, 'overflowY', 'auto');\n      }\n      else\n      {\n        if (browser.msie) setIfNecessary(outerWin.document.documentElement.style, 'overflowY', 'scroll');\n      }\n      if (doesWrap)\n      {\n        newWidth = viewWidth;\n      }\n      else\n      {\n        if (newWidth < viewWidth) newWidth = viewWidth;\n      }\n      setIfNecessary(iframe.style, \"height\", newHeight + \"px\");\n      setIfNecessary(iframe.style, \"width\", newWidth + \"px\");\n      setIfNecessary(sideDiv.style, \"height\", newHeight + \"px\");\n    }\n    if (browser.firefox)\n    {\n      if (!doesWrap)\n      {\n        // the body:display:table-cell hack makes mozilla do scrolling\n        // correctly by shrinking the <body> to fit around its content,\n        // but mozilla won't act on clicks below the body.  We keep the\n        // style.height property set to the viewport height (editor height\n        // not including scrollbar), so it will never shrink so that part of\n        // the editor isn't clickable.\n        var body = root;\n        var styleHeight = viewHeight + \"px\";\n        setIfNecessary(body.style, \"height\", styleHeight);\n      }\n      else\n      {\n        setIfNecessary(root.style, \"height\", \"\");\n      }\n    }\n    // if near edge, scroll to edge\n    var scrollX = getScrollX();\n    var scrollY = getScrollY();\n    var win = outerWin;\n    var r = 20;\n\n    enforceEditability();\n\n    $(sideDiv).addClass('sidedivdelayed');\n  }\n\n  function getScrollXY()\n  {\n    var win = outerWin;\n    var odoc = outerWin.document;\n    if (typeof(win.pageYOffset) == \"number\")\n    {\n      return {\n        x: win.pageXOffset,\n        y: win.pageYOffset\n      };\n    }\n    var docel = odoc.documentElement;\n    if (docel && typeof(docel.scrollTop) == \"number\")\n    {\n      return {\n        x: docel.scrollLeft,\n        y: docel.scrollTop\n      };\n    }\n  }\n\n  function getScrollX()\n  {\n    return getScrollXY().x;\n  }\n\n  function getScrollY()\n  {\n    return getScrollXY().y;\n  }\n\n  function setScrollX(x)\n  {\n    outerWin.scrollTo(x, getScrollY());\n  }\n\n  function setScrollY(y)\n  {\n    outerWin.scrollTo(getScrollX(), y);\n  }\n\n  function setScrollXY(x, y)\n  {\n    outerWin.scrollTo(x, y);\n  }\n\n  var _teardownActions = [];\n\n  function teardown()\n  {\n    _.each(_teardownActions, function(a)\n    {\n      a();\n    });\n  }\n\n  function setDesignMode(newVal)\n  {\n    try\n    {\n      function setIfNecessary(target, prop, val)\n      {\n        if (String(target[prop]).toLowerCase() != val)\n        {\n          target[prop] = val;\n          return true;\n        }\n        return false;\n      }\n      if (browser.msie || browser.safari)\n      {\n        setIfNecessary(root, 'contentEditable', (newVal ? 'true' : 'false'));\n      }\n      else\n      {\n        var wasSet = setIfNecessary(doc, 'designMode', (newVal ? 'on' : 'off'));\n        if (wasSet && newVal && browser.opera)\n        {\n          // turning on designMode clears event handlers\n          bindTheEventHandlers();\n        }\n      }\n      return true;\n    }\n    catch (e)\n    {\n      return false;\n    }\n  }\n\n  var iePastedLines = null;\n\n  function handleIEPaste(evt)\n  {\n    // Pasting in IE loses blank lines in a way that loses information;\n    // \"one\\n\\ntwo\\nthree\" becomes \"<p>one</p><p>two</p><p>three</p>\",\n    // which becomes \"one\\ntwo\\nthree\".  We can get the correct text\n    // from the clipboard directly, but we still have to let the paste\n    // happen to get the style information.\n    var clipText = window.clipboardData && window.clipboardData.getData(\"Text\");\n    if (clipText && doc.selection)\n    {\n      // this \"paste\" event seems to mess with the selection whether we try to\n      // stop it or not, so can't really do document-level manipulation now\n      // or in an idle call-stack.  instead, use IE native manipulation\n      //function escapeLine(txt) {\n      //return processSpaces(escapeHTML(textify(txt)));\n      //}\n      //var newHTML = map(clipText.replace(/\\r/g,'').split('\\n'), escapeLine).join('<br>');\n      //doc.selection.createRange().pasteHTML(newHTML);\n      //evt.preventDefault();\n      //iePastedLines = map(clipText.replace(/\\r/g,'').split('\\n'), textify);\n    }\n  }\n\n\n  var inInternationalComposition = false;\n  function handleCompositionEvent(evt)\n  {\n    // international input events, fired in FF3, at least;  allow e.g. Japanese input\n    if (evt.type == \"compositionstart\")\n    {\n      inInternationalComposition = true;\n    }\n    else if (evt.type == \"compositionend\")\n    {\n      inInternationalComposition = false;\n    }\n  }\n\n  editorInfo.ace_getInInternationalComposition = function ()\n  {\n    return inInternationalComposition;\n  }\n\n  function bindTheEventHandlers()\n  {\n    $(document).on(\"keydown\", handleKeyEvent);\n    $(document).on(\"keypress\", handleKeyEvent);\n    $(document).on(\"keyup\", handleKeyEvent);\n    $(document).on(\"click\", handleClick);\n\n    // Disabled: https://github.com/ether/etherpad-lite/issues/2546\n    // Will break OL re-numbering: https://github.com/ether/etherpad-lite/pull/2533\n    // $(document).on(\"cut\", handleCut); \n\n    $(root).on(\"blur\", handleBlur);\n    if (browser.msie)\n    {\n      $(document).on(\"click\", handleIEOuterClick);\n    }\n    if (browser.msie) $(root).on(\"paste\", handleIEPaste);\n\n    // Don't paste on middle click of links\n    $(root).on(\"paste\", function(e){\n      // TODO: this breaks pasting strings into URLS when using \n      // Control C and Control V -- the Event is never available\n      // here.. :(\n      if(e.target.a || e.target.localName === \"a\"){\n        e.preventDefault();\n      }\n    })\n\n    // CompositionEvent is not implemented below IE version 8\n    if ( !(browser.msie && parseInt(browser.version <= 9)) && document.documentElement)\n    {\n      $(document.documentElement).on(\"compositionstart\", handleCompositionEvent);\n      $(document.documentElement).on(\"compositionend\", handleCompositionEvent);\n    }\n  }\n\n  function handleIEOuterClick(evt)\n  {\n    if ((evt.target.tagName || '').toLowerCase() != \"html\")\n    {\n      return;\n    }\n    if (!(evt.pageY > root.clientHeight))\n    {\n      return;\n    }\n\n    // click below the body\n    inCallStackIfNecessary(\"handleOuterClick\", function()\n    {\n      // put caret at bottom of doc\n      fastIncorp(11);\n      if (isCaret())\n      { // don't interfere with drag\n        var lastLine = rep.lines.length() - 1;\n        var lastCol = rep.lines.atIndex(lastLine).text.length;\n        performSelectionChange([lastLine, lastCol], [lastLine, lastCol]);\n      }\n    });\n  }\n\n  function getClassArray(elem, optFilter)\n  {\n    var bodyClasses = [];\n    (elem.className || '').replace(/\\S+/g, function(c)\n    {\n      if ((!optFilter) || (optFilter(c)))\n      {\n        bodyClasses.push(c);\n      }\n    });\n    return bodyClasses;\n  }\n\n  function setClassArray(elem, array)\n  {\n    elem.className = array.join(' ');\n  }\n\n  function setClassPresence(elem, className, present)\n  {\n    if (present) $(elem).addClass(className);\n    else $(elem).removeClass(className);\n  }\n\n  function focus()\n  {\n    window.focus();\n  }\n\n  function handleBlur(evt)\n  {\n    if (browser.msie)\n    {\n      // a fix: in IE, clicking on a control like a button outside the\n      // iframe can \"blur\" the editor, causing it to stop getting\n      // events, though typing still affects it(!).\n      setSelection(null);\n    }\n  }\n\n  function getSelectionPointX(point)\n  {\n    // doesn't work in wrap-mode\n    var node = point.node;\n    var index = point.index;\n\n    function leftOf(n)\n    {\n      return n.offsetLeft;\n    }\n\n    function rightOf(n)\n    {\n      return n.offsetLeft + n.offsetWidth;\n    }\n    if (!isNodeText(node))\n    {\n      if (index === 0) return leftOf(node);\n      else return rightOf(node);\n    }\n    else\n    {\n      // we can get bounds of element nodes, so look for those.\n      // allow consecutive text nodes for robustness.\n      var charsToLeft = index;\n      var charsToRight = node.nodeValue.length - index;\n      var n;\n      for (n = node.previousSibling; n && isNodeText(n); n = n.previousSibling)\n      charsToLeft += n.nodeValue;\n      var leftEdge = (n ? rightOf(n) : leftOf(node.parentNode));\n      for (n = node.nextSibling; n && isNodeText(n); n = n.nextSibling)\n      charsToRight += n.nodeValue;\n      var rightEdge = (n ? leftOf(n) : rightOf(node.parentNode));\n      var frac = (charsToLeft / (charsToLeft + charsToRight));\n      var pixLoc = leftEdge + frac * (rightEdge - leftEdge);\n      return Math.round(pixLoc);\n    }\n  }\n\n  function getPageHeight()\n  {\n    var win = outerWin;\n    var odoc = win.document;\n    if (win.innerHeight && win.scrollMaxY) return win.innerHeight + win.scrollMaxY;\n    else if (odoc.body.scrollHeight > odoc.body.offsetHeight) return odoc.body.scrollHeight;\n    else return odoc.body.offsetHeight;\n  }\n\n  function getPageWidth()\n  {\n    var win = outerWin;\n    var odoc = win.document;\n    if (win.innerWidth && win.scrollMaxX) return win.innerWidth + win.scrollMaxX;\n    else if (odoc.body.scrollWidth > odoc.body.offsetWidth) return odoc.body.scrollWidth;\n    else return odoc.body.offsetWidth;\n  }\n\n  function getInnerHeight()\n  {\n    var win = outerWin;\n    var odoc = win.document;\n    var h;\n    if (browser.opera) h = win.innerHeight;\n    else h = odoc.documentElement.clientHeight;\n    if (h) return h;\n\n    // deal with case where iframe is hidden, hope that\n    // style.height of iframe container is set in px\n    return Number(editorInfo.frame.parentNode.style.height.replace(/[^0-9]/g, '') || 0);\n  }\n\n  function getInnerWidth()\n  {\n    var win = outerWin;\n    var odoc = win.document;\n    return odoc.documentElement.clientWidth;\n  }\n\n  function scrollNodeVerticallyIntoView(node)\n  {\n    // requires element (non-text) node;\n    // if node extends above top of viewport or below bottom of viewport (or top of scrollbar),\n    // scroll it the minimum distance needed to be completely in view.\n    var win = outerWin;\n    var odoc = outerWin.document;\n    var distBelowTop = node.offsetTop + iframePadTop - win.scrollY;\n    var distAboveBottom = win.scrollY + getInnerHeight() - (node.offsetTop + iframePadTop + node.offsetHeight);\n\n    if (distBelowTop < 0)\n    {\n      win.scrollBy(0, distBelowTop);\n    }\n    else if (distAboveBottom < 0)\n    {\n      win.scrollBy(0, -distAboveBottom);\n    }\n  }\n\n  function scrollXHorizontallyIntoView(pixelX)\n  {\n    var win = outerWin;\n    var odoc = outerWin.document;\n    pixelX += iframePadLeft;\n    var distInsideLeft = pixelX - win.scrollX;\n    var distInsideRight = win.scrollX + getInnerWidth() - pixelX;\n    if (distInsideLeft < 0)\n    {\n      win.scrollBy(distInsideLeft, 0);\n    }\n    else if (distInsideRight < 0)\n    {\n      win.scrollBy(-distInsideRight + 1, 0);\n    }\n  }\n\n  function scrollSelectionIntoView()\n  {\n    if (!rep.selStart) return;\n    fixView();\n    var focusLine = (rep.selFocusAtStart ? rep.selStart[0] : rep.selEnd[0]);\n    scrollNodeVerticallyIntoView(rep.lines.atIndex(focusLine).lineNode);\n    if (!doesWrap)\n    {\n      var browserSelection = getSelection();\n      if (browserSelection)\n      {\n        var focusPoint = (browserSelection.focusAtStart ? browserSelection.startPoint : browserSelection.endPoint);\n        var selectionPointX = getSelectionPointX(focusPoint);\n        scrollXHorizontallyIntoView(selectionPointX);\n        fixView();\n      }\n    }\n  }\n\n  var listAttributeName = 'list';\n\n  function getLineListType(lineNum)\n  {\n    return documentAttributeManager.getAttributeOnLine(lineNum, listAttributeName)\n  }\n\n  function setLineListType(lineNum, listType)\n  {\n    if(listType == ''){\n      documentAttributeManager.removeAttributeOnLine(lineNum, listAttributeName);\n      documentAttributeManager.removeAttributeOnLine(lineNum, 'start');\n    }else{\n      documentAttributeManager.setAttributeOnLine(lineNum, listAttributeName, listType);\n    }\n\n    //if the list has been removed, it is necessary to renumber\n    //starting from the *next* line because the list may have been\n    //separated. If it returns null, it means that the list was not cut, try\n    //from the current one.\n    if(renumberList(lineNum+1)==null)\n    {\n      renumberList(lineNum);\n    }\n  }\n\n  function renumberList(lineNum){\n    //1-check we are in a list\n    var type = getLineListType(lineNum);\n    if(!type)\n    {\n      return null;\n    }\n    type = /([a-z]+)[0-9]+/.exec(type);\n    if(type[1] == \"indent\")\n    {\n      return null;\n    }\n\n    //2-find the first line of the list\n    while(lineNum-1 >= 0 && (type=getLineListType(lineNum-1)))\n    {\n      type = /([a-z]+)[0-9]+/.exec(type);\n      if(type[1] == \"indent\")\n        break;\n      lineNum--;\n    }\n\n    //3-renumber every list item of the same level from the beginning, level 1\n    //IMPORTANT: never skip a level because there imbrication may be arbitrary\n    var builder = Changeset.builder(rep.lines.totalWidth());\n    var loc = [0,0];\n    function applyNumberList(line, level)\n    {\n      //init\n      var position = 1;\n      var curLevel = level;\n      var listType;\n      //loop over the lines\n      while(listType = getLineListType(line))\n      {\n        //apply new num\n        listType = /([a-z]+)([0-9]+)/.exec(listType);\n        curLevel = Number(listType[2]);\n        if(isNaN(curLevel) || listType[0] == \"indent\")\n        {\n          return line;\n        }\n        else if(curLevel == level)\n        {\n          ChangesetUtils.buildKeepRange(rep, builder, loc, (loc = [line, 0]));\n          ChangesetUtils.buildKeepRange(rep, builder, loc, (loc = [line, 1]), [\n            ['start', position]\n          ], rep.apool);\n\n          position++;\n          line++;\n        }\n        else if(curLevel < level)\n        {\n          return line;//back to parent\n        }\n        else\n        {\n          line = applyNumberList(line, level+1);//recursive call\n        }\n      }\n      return line;\n    }\n\n    applyNumberList(lineNum, 1);\n    var cs = builder.toString();\n    if (!Changeset.isIdentity(cs))\n    {\n      performDocumentApplyChangeset(cs);\n    }\n\n    //4-apply the modifications\n\n\n  }\n\n\n  function doInsertList(type)\n  {\n    if (!(rep.selStart && rep.selEnd))\n    {\n      return;\n    }\n\n    var firstLine, lastLine;\n    firstLine = rep.selStart[0];\n    lastLine = Math.max(firstLine, rep.selEnd[0] - ((rep.selEnd[1] === 0) ? 1 : 0));\n\n    var allLinesAreList = true;\n    for (var n = firstLine; n <= lastLine; n++)\n    {\n      var listType = getLineListType(n);\n      if (!listType || listType.slice(0, type.length) != type)\n      {\n        allLinesAreList = false;\n        break;\n      }\n    }\n\n    var mods = [];\n    for (var n = firstLine; n <= lastLine; n++)\n    {\n      var t = '';\n      var level = 0;\n      var listType = /([a-z]+)([0-9]+)/.exec(getLineListType(n));\n      if (listType)\n      {\n        t = listType[1];\n        level = Number(listType[2]);\n      }\n      var t = getLineListType(n);\n      mods.push([n, allLinesAreList ? 'indent' + level : (t ? type + level : type + '1')]);\n    }\n\n    _.each(mods, function(mod){\n      setLineListType(mod[0], mod[1]);\n    });\n  }\n\n  function doInsertUnorderedList(){\n    doInsertList('bullet');\n  }\n  function doInsertOrderedList(){\n    doInsertList('number');\n  }\n  editorInfo.ace_doInsertUnorderedList = doInsertUnorderedList;\n  editorInfo.ace_doInsertOrderedList = doInsertOrderedList;\n\n  var lineNumbersShown;\n  var sideDivInner;\n\n  function initLineNumbers()\n  {\n    lineNumbersShown = 1;\n    sideDiv.innerHTML = '<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"right\"><tr><td id=\"sidedivinner\"><div>1</div></td></tr></table>';\n    sideDivInner = outerWin.document.getElementById(\"sidedivinner\");\n  }\n\n  function updateLineNumbers()\n  {\n    var newNumLines = rep.lines.length();\n    if (newNumLines < 1) newNumLines = 1;\n    //update height of all current line numbers\n\n    var a = sideDivInner.firstChild;\n    var b = doc.body.firstChild;\n    var n = 0;\n\n    if (currentCallStack && currentCallStack.domClean)\n    {\n\n      while (a && b)\n      {\n        if(n > lineNumbersShown) //all updated, break\n        break;\n        var h = (b.clientHeight || b.offsetHeight);\n        if (b.nextSibling)\n        {\n          // when text is zoomed in mozilla, divs have fractional\n          // heights (though the properties are always integers)\n          // and the line-numbers don't line up unless we pay\n          // attention to where the divs are actually placed...\n          // (also: padding on TTs/SPANs in IE...)\n          h = b.nextSibling.offsetTop - b.offsetTop;\n        }\n        if (h)\n        {\n          var hpx = h + \"px\";\n          if (a.style.height != hpx) {\n            a.style.height = hpx;\n          }\n        }\n        a = a.nextSibling;\n        b = b.nextSibling;\n        n++;\n      }\n    }\n\n    if (newNumLines != lineNumbersShown)\n    {\n      var container = sideDivInner;\n      var odoc = outerWin.document;\n      var fragment = odoc.createDocumentFragment();\n      while (lineNumbersShown < newNumLines)\n      {\n        lineNumbersShown++;\n        var n = lineNumbersShown;\n        var div = odoc.createElement(\"DIV\");\n        //calculate height for new line number\n        if(b){\n          var h = (b.clientHeight || b.offsetHeight);\n\n          if (b.nextSibling){\n            h = b.nextSibling.offsetTop - b.offsetTop;\n          }\n        }\n\n        if(h){ // apply style to div\n          div.style.height = h +\"px\";\n        }\n\n        div.appendChild(odoc.createTextNode(String(n)));\n        fragment.appendChild(div);\n        if(b){\n          b = b.nextSibling;\n        }\n      }\n\n      container.appendChild(fragment);\n      while (lineNumbersShown > newNumLines)\n      {\n        container.removeChild(container.lastChild);\n        lineNumbersShown--;\n      }\n    }\n  }\n\n\n  // Init documentAttributeManager\n  documentAttributeManager = new AttributeManager(rep, performDocumentApplyChangeset);\n  editorInfo.ace_performDocumentApplyAttributesToRange = function () {\n    return documentAttributeManager.setAttributesOnRange.apply(documentAttributeManager, arguments);\n  };\n\n  this.init = function () {\n    $(document).ready(function(){\n      doc = document; // defined as a var in scope outside\n      inCallStack(\"setup\", function()\n      {\n        var body = doc.getElementById(\"innerdocbody\");\n        root = body; // defined as a var in scope outside\n        if (browser.firefox) $(root).addClass(\"mozilla\");\n        if (browser.safari) $(root).addClass(\"safari\");\n        if (browser.msie) $(root).addClass(\"msie\");\n        setClassPresence(root, \"authorColors\", true);\n        setClassPresence(root, \"doesWrap\", doesWrap);\n\n        initDynamicCSS();\n\n        enforceEditability();\n\n        // set up dom and rep\n        while (root.firstChild) root.removeChild(root.firstChild);\n        var oneEntry = createDomLineEntry(\"\");\n        doRepLineSplice(0, rep.lines.length(), [oneEntry]);\n        insertDomLines(null, [oneEntry.domInfo], null);\n        rep.alines = Changeset.splitAttributionLines(\n        Changeset.makeAttribution(\"\\n\"), \"\\n\");\n\n        bindTheEventHandlers();\n\n      });\n\n      hooks.callAll('aceInitialized', {\n        editorInfo: editorInfo,\n        rep: rep,\n        documentAttributeManager: documentAttributeManager\n      });\n\n      scheduler.setTimeout(function()\n      {\n        parent.readyFunc(); // defined in code that sets up the inner iframe\n      }, 0);\n\n      isSetUp = true;\n    });\n  }\n\n}\n\nexports.init = function () {\n  var editor = new Ace2Inner()\n  editor.init();\n};\n\n}\n, \"ep_etherpad-lite/static/js/browser.js\": function (require, exports, module) {\n/*!\n  * Bowser - a browser detector\n  * https://github.com/ded/bowser\n  * MIT License | (c) Dustin Diaz 2014\n  */\n\n!function (name, definition) {\n  if (typeof module != 'undefined' && module.exports) module.exports['browser'] = definition()\n  else if (typeof define == 'function' && define.amd) define(definition)\n  else this[name] = definition()\n}('bowser', function () {\n  /**\n    * See useragents.js for examples of navigator.userAgent\n    */\n\n  var t = true\n\n  function detect(ua) {\n\n    function getFirstMatch(regex) {\n      var match = ua.match(regex);\n      return (match && match.length > 1 && match[1]) || '';\n    }\n\n    var iosdevice = getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase()\n      , likeAndroid = /like android/i.test(ua)\n      , android = !likeAndroid && /android/i.test(ua)\n      , versionIdentifier = getFirstMatch(/version\\/(\\d+(\\.\\d+)?)/i)\n      , tablet = /tablet/i.test(ua)\n      , mobile = !tablet && /[^-]mobi/i.test(ua)\n      , result\n\n    if (/opera|opr/i.test(ua)) {\n      result = {\n        name: 'Opera'\n      , opera: t\n      , version: versionIdentifier || getFirstMatch(/(?:opera|opr)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/windows phone/i.test(ua)) {\n      result = {\n        name: 'Windows Phone'\n      , windowsphone: t\n      , msie: t\n      , version: getFirstMatch(/iemobile\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/msie|trident/i.test(ua)) {\n      result = {\n        name: 'Internet Explorer'\n      , msie: t\n      , version: getFirstMatch(/(?:msie |rv:)(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/chrome|crios|crmo/i.test(ua)) {\n      result = {\n        name: 'Chrome'\n      , chrome: t\n      , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (iosdevice) {\n      result = {\n        name : iosdevice == 'iphone' ? 'iPhone' : iosdevice == 'ipad' ? 'iPad' : 'iPod'\n      }\n      // WTF: version is not part of user agent in web apps\n      if (versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    }\n    else if (/sailfish/i.test(ua)) {\n      result = {\n        name: 'Sailfish'\n      , sailfish: t\n      , version: getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/seamonkey\\//i.test(ua)) {\n      result = {\n        name: 'SeaMonkey'\n      , seamonkey: t\n      , version: getFirstMatch(/seamonkey\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/firefox|iceweasel/i.test(ua)) {\n      result = {\n        name: 'Firefox'\n      , firefox: t\n      , version: getFirstMatch(/(?:firefox|iceweasel)[ \\/](\\d+(\\.\\d+)?)/i)\n      }\n      if (/\\((mobile|tablet);[^\\)]*rv:[\\d\\.]+\\)/i.test(ua)) {\n        result.firefoxos = t\n      }\n    }\n    else if (/silk/i.test(ua)) {\n      result =  {\n        name: 'Amazon Silk'\n      , silk: t\n      , version : getFirstMatch(/silk\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (android) {\n      result = {\n        name: 'Android'\n      , version: versionIdentifier\n      }\n    }\n    else if (/phantom/i.test(ua)) {\n      result = {\n        name: 'PhantomJS'\n      , phantom: t\n      , version: getFirstMatch(/phantomjs\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/blackberry|\\bbb\\d+/i.test(ua) || /rim\\stablet/i.test(ua)) {\n      result = {\n        name: 'BlackBerry'\n      , blackberry: t\n      , version: versionIdentifier || getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/(web|hpw)os/i.test(ua)) {\n      result = {\n        name: 'WebOS'\n      , webos: t\n      , version: versionIdentifier || getFirstMatch(/w(?:eb)?osbrowser\\/(\\d+(\\.\\d+)?)/i)\n      };\n      /touchpad\\//i.test(ua) && (result.touchpad = t)\n    }\n    else if (/bada/i.test(ua)) {\n      result = {\n        name: 'Bada'\n      , bada: t\n      , version: getFirstMatch(/dolfin\\/(\\d+(\\.\\d+)?)/i)\n      };\n    }\n    else if (/tizen/i.test(ua)) {\n      result = {\n        name: 'Tizen'\n      , tizen: t\n      , version: getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n      };\n    }\n    else if (/safari/i.test(ua)) {\n      result = {\n        name: 'Safari'\n      , safari: t\n      , version: versionIdentifier\n      }\n    }\n    else result = {}\n\n    // set webkit or gecko flag for browsers based on these engines\n    if (/(apple)?webkit/i.test(ua)) {\n      result.name = result.name || \"Webkit\"\n      result.webkit = t\n      if (!result.version && versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    } else if (!result.opera && /gecko\\//i.test(ua)) {\n      result.name = result.name || \"Gecko\"\n      result.gecko = t\n      result.version = result.version || getFirstMatch(/gecko\\/(\\d+(\\.\\d+)?)/i)\n    }\n\n    // set OS flags for platforms that have multiple browsers\n    if (android || result.silk) {\n      result.android = t\n    } else if (iosdevice) {\n      result[iosdevice] = t\n      result.ios = t\n    }\n\n    // OS version extraction\n    var osVersion = '';\n    if (iosdevice) {\n      osVersion = getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i);\n      osVersion = osVersion.replace(/[_\\s]/g, '.');\n    } else if (android) {\n      osVersion = getFirstMatch(/android[ \\/-](\\d+(\\.\\d+)*)/i);\n    } else if (result.windowsphone) {\n      osVersion = getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i);\n    } else if (result.webos) {\n      osVersion = getFirstMatch(/(?:web|hpw)os\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.blackberry) {\n      osVersion = getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i);\n    } else if (result.bada) {\n      osVersion = getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.tizen) {\n      osVersion = getFirstMatch(/tizen[\\/\\s](\\d+(\\.\\d+)*)/i);\n    }\n    if (osVersion) {\n      result.osversion = osVersion;\n    }\n\n    // device type extraction\n    var osMajorVersion = osVersion.split('.')[0];\n    if (tablet || iosdevice == 'ipad' || (android && (osMajorVersion == 3 || (osMajorVersion == 4 && !mobile))) || result.silk) {\n      result.tablet = t\n    } else if (mobile || iosdevice == 'iphone' || iosdevice == 'ipod' || android || result.blackberry || result.webos || result.bada) {\n      result.mobile = t\n    }\n\n    // Graded Browser Support\n    // http://developer.yahoo.com/yui/articles/gbs\n    if ((result.msie && result.version >= 10) ||\n        (result.chrome && result.version >= 20) ||\n        (result.firefox && result.version >= 20.0) ||\n        (result.safari && result.version >= 6) ||\n        (result.opera && result.version >= 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] >= 6) ||\n        (result.blackberry && result.version >= 10.1)\n        ) {\n      result.a = t;\n    }\n    else if ((result.msie && result.version < 10) ||\n        (result.chrome && result.version < 20) ||\n        (result.firefox && result.version < 20.0) ||\n        (result.safari && result.version < 6) ||\n        (result.opera && result.version < 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] < 6)\n        ) {\n      result.c = t\n    } else result.x = t\n\n    return result\n  }\n\n  var bowser = detect(typeof navigator !== 'undefined' ? navigator.userAgent : '')\n\n\n  /*\n   * Set our detect method to the main bowser object so we can\n   * reuse it to test other user agents.\n   * This is needed to implement future tests.\n   */\n  bowser._detect = detect;\n\n  return bowser\n});\n\n}\n, \"ep_etherpad-lite/static/js/AttributePool.js\": function (require, exports, module) {\n/**\n * This code represents the Attribute Pool Object of the original Etherpad.\n * 90% of the code is still like in the original Etherpad\n * Look at https://github.com/ether/pad/blob/master/infrastructure/ace/www/easysync2.js\n * You can find a explanation what a attribute pool is here:\n * https://github.com/ether/etherpad-lite/blob/master/doc/easysync/easysync-notes.txt\n */\n\n/*\n * Copyright 2009 Google Inc., 2011 Peter 'Pita' Martischka (Primary Technology Ltd)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*\n  An AttributePool maintains a mapping from [key,value] Pairs called\n  Attributes to Numbers (unsigened integers) and vice versa. These numbers are\n  used to reference Attributes in Changesets.\n*/\n\nvar AttributePool = function () {\n  this.numToAttrib = {}; // e.g. {0: ['foo','bar']}\n  this.attribToNum = {}; // e.g. {'foo,bar': 0}\n  this.nextNum = 0;\n};\n\nAttributePool.prototype.putAttrib = function (attrib, dontAddIfAbsent) {\n  var str = String(attrib);\n  if (str in this.attribToNum) {\n    return this.attribToNum[str];\n  }\n  if (dontAddIfAbsent) {\n    return -1;\n  }\n  var num = this.nextNum++;\n  this.attribToNum[str] = num;\n  this.numToAttrib[num] = [String(attrib[0] || ''), String(attrib[1] || '')];\n  return num;\n};\n\nAttributePool.prototype.getAttrib = function (num) {\n  var pair = this.numToAttrib[num];\n  if (!pair) {\n    return pair;\n  }\n  return [pair[0], pair[1]]; // return a mutable copy\n};\n\nAttributePool.prototype.getAttribKey = function (num) {\n  var pair = this.numToAttrib[num];\n  if (!pair) return '';\n  return pair[0];\n};\n\nAttributePool.prototype.getAttribValue = function (num) {\n  var pair = this.numToAttrib[num];\n  if (!pair) return '';\n  return pair[1];\n};\n\nAttributePool.prototype.eachAttrib = function (func) {\n  for (var n in this.numToAttrib) {\n    var pair = this.numToAttrib[n];\n    func(pair[0], pair[1]);\n  }\n};\n\nAttributePool.prototype.toJsonable = function () {\n  return {\n    numToAttrib: this.numToAttrib,\n    nextNum: this.nextNum\n  };\n};\n\nAttributePool.prototype.fromJsonable = function (obj) {\n  this.numToAttrib = obj.numToAttrib;\n  this.nextNum = obj.nextNum;\n  this.attribToNum = {};\n  for (var n in this.numToAttrib) {\n    this.attribToNum[String(this.numToAttrib[n])] = Number(n);\n  }\n  return this;\n};\n  \n\nmodule.exports = AttributePool;\n}\n, \"ep_etherpad-lite/static/js/Changeset.js\": function (require, exports, module) {\n/*\n * This is the Changeset library copied from the old Etherpad with some modifications to use it in node.js\n * Can be found in https://github.com/ether/pad/blob/master/infrastructure/ace/www/easysync2.js\n */\n\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code.\n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n/*\n * Copyright 2009 Google Inc., 2011 Peter 'Pita' Martischka (Primary Technology Ltd)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar AttributePool = require(\"./AttributePool\");\n\n/**\n * ==================== General Util Functions =======================\n */\n\n/**\n * This method is called whenever there is an error in the sync process\n * @param msg {string} Just some message\n */\nexports.error = function error(msg) {\n  var e = new Error(msg);\n  e.easysync = true;\n  throw e;\n};\n\n/**\n * This method is used for assertions with Messages \n * if assert fails, the error function is called.\n * @param b {boolean} assertion condition\n * @param msgParts {string} error to be passed if it fails\n */\nexports.assert = function assert(b, msgParts) {\n  if (!b) {\n    var msg = Array.prototype.slice.call(arguments, 1).join('');\n    exports.error(\"Failed assertion: \" + msg);\n  }\n};\n\n/**\n * Parses a number from string base 36\n * @param str {string} string of the number in base 36\n * @returns {int} number\n */\nexports.parseNum = function (str) {\n  return parseInt(str, 36);\n};\n\n/**\n * Writes a number in base 36 and puts it in a string\n * @param num {int} number\n * @returns {string} string\n */\nexports.numToString = function (num) {\n  return num.toString(36).toLowerCase();\n};\n\n/**\n * Converts stuff before $ to base 10\n * @obsolete not really used anywhere??\n * @param cs {string} the string\n * @return integer \n */\nexports.toBaseTen = function (cs) {\n  var dollarIndex = cs.indexOf('$');\n  var beforeDollar = cs.substring(0, dollarIndex);\n  var fromDollar = cs.substring(dollarIndex);\n  return beforeDollar.replace(/[0-9a-z]+/g, function (s) {\n    return String(exports.parseNum(s));\n  }) + fromDollar;\n};\n\n\n/**\n * ==================== Changeset Functions =======================\n */\n\n/**\n * returns the required length of the text before changeset \n * can be applied\n * @param cs {string} String representation of the Changeset\n */ \nexports.oldLen = function (cs) {\n  return exports.unpack(cs).oldLen;\n};\n\n/**\n * returns the length of the text after changeset is applied\n * @param cs {string} String representation of the Changeset\n */ \nexports.newLen = function (cs) {\n  return exports.unpack(cs).newLen;\n};\n\n/**\n * this function creates an iterator which decodes string changeset operations\n * @param opsStr {string} String encoding of the change operations to be performed \n * @param optStartIndex {int} from where in the string should the iterator start \n * @return {Op} type object iterator \n */\nexports.opIterator = function (opsStr, optStartIndex) {\n  //print(opsStr);\n  var regex = /((?:\\*[0-9a-z]+)*)(?:\\|([0-9a-z]+))?([-+=])([0-9a-z]+)|\\?|/g;\n  var startIndex = (optStartIndex || 0);\n  var curIndex = startIndex;\n  var prevIndex = curIndex;\n\n  function nextRegexMatch() {\n    prevIndex = curIndex;\n    var result;\n    regex.lastIndex = curIndex;\n    result = regex.exec(opsStr);\n    curIndex = regex.lastIndex;\n    if (result[0] == '?') {\n      exports.error(\"Hit error opcode in op stream\");\n    }\n  \n    return result;\n  }\n  var regexResult = nextRegexMatch();\n  var obj = exports.newOp();\n\n  function next(optObj) {\n    var op = (optObj || obj);\n    if (regexResult[0]) {\n      op.attribs = regexResult[1];\n      op.lines = exports.parseNum(regexResult[2] || 0);\n      op.opcode = regexResult[3];\n      op.chars = exports.parseNum(regexResult[4]);\n      regexResult = nextRegexMatch();\n    } else {\n      exports.clearOp(op);\n    }\n    return op;\n  }\n\n  function hasNext() {\n    return !!(regexResult[0]);\n  }\n\n  function lastIndex() {\n    return prevIndex;\n  }\n  return {\n    next: next,\n    hasNext: hasNext,\n    lastIndex: lastIndex\n  };\n};\n\n/**\n * Cleans an Op object\n * @param {Op} object to be cleared\n */\nexports.clearOp = function (op) {\n  op.opcode = '';\n  op.chars = 0;\n  op.lines = 0;\n  op.attribs = '';\n};\n\n/**\n * Creates a new Op object\n * @param optOpcode the type operation of the Op object\n */\nexports.newOp = function (optOpcode) {\n  return {\n    opcode: (optOpcode || ''),\n    chars: 0,\n    lines: 0,\n    attribs: ''\n  };\n};\n\n/**\n * Clones an Op\n * @param op Op to be cloned\n */\nexports.cloneOp = function (op) {\n  return {\n    opcode: op.opcode,\n    chars: op.chars,\n    lines: op.lines,\n    attribs: op.attribs\n  };\n};\n\n/**\n * Copies op1 to op2\n * @param op1 src Op\n * @param op2 dest Op\n */\nexports.copyOp = function (op1, op2) {\n  op2.opcode = op1.opcode;\n  op2.chars = op1.chars;\n  op2.lines = op1.lines;\n  op2.attribs = op1.attribs;\n};\n\n/**\n * Writes the Op in a string the way that changesets need it\n */\nexports.opString = function (op) {\n  // just for debugging\n  if (!op.opcode) return 'null';\n  var assem = exports.opAssembler();\n  assem.append(op);\n  return assem.toString();\n};\n\n/**\n * Used just for debugging\n */\nexports.stringOp = function (str) {\n  // just for debugging\n  return exports.opIterator(str).next();\n};\n\n/**\n * Used to check if a Changeset if valid\n * @param cs {Changeset} Changeset to be checked\n */\nexports.checkRep = function (cs) {\n  // doesn't check things that require access to attrib pool (e.g. attribute order)\n  // or original string (e.g. newline positions)\n  var unpacked = exports.unpack(cs);\n  var oldLen = unpacked.oldLen;\n  var newLen = unpacked.newLen;\n  var ops = unpacked.ops;\n  var charBank = unpacked.charBank;\n\n  var assem = exports.smartOpAssembler();\n  var oldPos = 0;\n  var calcNewLen = 0;\n  var numInserted = 0;\n  var iter = exports.opIterator(ops);\n  while (iter.hasNext()) {\n    var o = iter.next();\n    switch (o.opcode) {\n    case '=':\n      oldPos += o.chars;\n      calcNewLen += o.chars;\n      break;\n    case '-':\n      oldPos += o.chars;\n      exports.assert(oldPos <= oldLen, oldPos, \" > \", oldLen, \" in \", cs);\n      break;\n    case '+':\n      {\n        calcNewLen += o.chars;\n        numInserted += o.chars;\n        exports.assert(calcNewLen <= newLen, calcNewLen, \" > \", newLen, \" in \", cs);\n        break;\n      }\n    }\n    assem.append(o);\n  }\n\n  calcNewLen += oldLen - oldPos;\n  charBank = charBank.substring(0, numInserted);\n  while (charBank.length < numInserted) {\n    charBank += \"?\";\n  }\n\n  assem.endDocument();\n  var normalized = exports.pack(oldLen, calcNewLen, assem.toString(), charBank);\n  exports.assert(normalized == cs, 'Invalid changeset (checkRep failed)');\n\n  return cs;\n}\n\n\n/**\n * ==================== Util Functions =======================\n */\n\n/**\n * creates an object that allows you to append operations (type Op) and also\n * compresses them if possible\n */\nexports.smartOpAssembler = function () {\n  // Like opAssembler but able to produce conforming exportss\n  // from slightly looser input, at the cost of speed.\n  // Specifically:\n  // - merges consecutive operations that can be merged\n  // - strips final \"=\"\n  // - ignores 0-length changes\n  // - reorders consecutive + and - (which margingOpAssembler doesn't do)\n  var minusAssem = exports.mergingOpAssembler();\n  var plusAssem = exports.mergingOpAssembler();\n  var keepAssem = exports.mergingOpAssembler();\n  var assem = exports.stringAssembler();\n  var lastOpcode = '';\n  var lengthChange = 0;\n\n  function flushKeeps() {\n    assem.append(keepAssem.toString());\n    keepAssem.clear();\n  }\n\n  function flushPlusMinus() {\n    assem.append(minusAssem.toString());\n    minusAssem.clear();\n    assem.append(plusAssem.toString());\n    plusAssem.clear();\n  }\n\n  function append(op) {\n    if (!op.opcode) return;\n    if (!op.chars) return;\n\n    if (op.opcode == '-') {\n      if (lastOpcode == '=') {\n        flushKeeps();\n      }\n      minusAssem.append(op);\n      lengthChange -= op.chars;\n    } else if (op.opcode == '+') {\n      if (lastOpcode == '=') {\n        flushKeeps();\n      }\n      plusAssem.append(op);\n      lengthChange += op.chars;\n    } else if (op.opcode == '=') {\n      if (lastOpcode != '=') {\n        flushPlusMinus();\n      }\n      keepAssem.append(op);\n    }\n    lastOpcode = op.opcode;\n  }\n\n  function appendOpWithText(opcode, text, attribs, pool) {\n    var op = exports.newOp(opcode);\n    op.attribs = exports.makeAttribsString(opcode, attribs, pool);\n    var lastNewlinePos = text.lastIndexOf('\\n');\n    if (lastNewlinePos < 0) {\n      op.chars = text.length;\n      op.lines = 0;\n      append(op);\n    } else {\n      op.chars = lastNewlinePos + 1;\n      op.lines = text.match(/\\n/g).length;\n      append(op);\n      op.chars = text.length - (lastNewlinePos + 1);\n      op.lines = 0;\n      append(op);\n    }\n  }\n\n  function toString() {\n    flushPlusMinus();\n    flushKeeps();\n    return assem.toString();\n  }\n\n  function clear() {\n    minusAssem.clear();\n    plusAssem.clear();\n    keepAssem.clear();\n    assem.clear();\n    lengthChange = 0;\n  }\n\n  function endDocument() {\n    keepAssem.endDocument();\n  }\n\n  function getLengthChange() {\n    return lengthChange;\n  }\n\n  return {\n    append: append,\n    toString: toString,\n    clear: clear,\n    endDocument: endDocument,\n    appendOpWithText: appendOpWithText,\n    getLengthChange: getLengthChange\n  };\n};\n\n\nexports.mergingOpAssembler = function () {\n  // This assembler can be used in production; it efficiently\n  // merges consecutive operations that are mergeable, ignores\n  // no-ops, and drops final pure \"keeps\".  It does not re-order\n  // operations.\n  var assem = exports.opAssembler();\n  var bufOp = exports.newOp();\n\n  // If we get, for example, insertions [xxx\\n,yyy], those don't merge,\n  // but if we get [xxx\\n,yyy,zzz\\n], that merges to [xxx\\nyyyzzz\\n].\n  // This variable stores the length of yyy and any other newline-less\n  // ops immediately after it.\n  var bufOpAdditionalCharsAfterNewline = 0;\n\n  function flush(isEndDocument) {\n    if (bufOp.opcode) {\n      if (isEndDocument && bufOp.opcode == '=' && !bufOp.attribs) {\n        // final merged keep, leave it implicit\n      } else {\n        assem.append(bufOp);\n        if (bufOpAdditionalCharsAfterNewline) {\n          bufOp.chars = bufOpAdditionalCharsAfterNewline;\n          bufOp.lines = 0;\n          assem.append(bufOp);\n          bufOpAdditionalCharsAfterNewline = 0;\n        }\n      }\n      bufOp.opcode = '';\n    }\n  }\n\n  function append(op) {\n    if (op.chars > 0) {\n      if (bufOp.opcode == op.opcode && bufOp.attribs == op.attribs) {\n        if (op.lines > 0) {\n          // bufOp and additional chars are all mergeable into a multi-line op\n          bufOp.chars += bufOpAdditionalCharsAfterNewline + op.chars;\n          bufOp.lines += op.lines;\n          bufOpAdditionalCharsAfterNewline = 0;\n        } else if (bufOp.lines == 0) {\n          // both bufOp and op are in-line\n          bufOp.chars += op.chars;\n        } else {\n          // append in-line text to multi-line bufOp\n          bufOpAdditionalCharsAfterNewline += op.chars;\n        }\n      } else {\n        flush();\n        exports.copyOp(op, bufOp);\n      }\n    }\n  }\n\n  function endDocument() {\n    flush(true);\n  }\n\n  function toString() {\n    flush();\n    return assem.toString();\n  }\n\n  function clear() {\n    assem.clear();\n    exports.clearOp(bufOp);\n  }\n  return {\n    append: append,\n    toString: toString,\n    clear: clear,\n    endDocument: endDocument\n  };\n};\n\n\n\nexports.opAssembler = function () {\n  var pieces = [];\n  // this function allows op to be mutated later (doesn't keep a ref)\n\n  function append(op) {\n    pieces.push(op.attribs);\n    if (op.lines) {\n      pieces.push('|', exports.numToString(op.lines));\n    }\n    pieces.push(op.opcode);\n    pieces.push(exports.numToString(op.chars));\n  }\n\n  function toString() {\n    return pieces.join('');\n  }\n\n  function clear() {\n    pieces.length = 0;\n  }\n  return {\n    append: append,\n    toString: toString,\n    clear: clear\n  };\n};\n\n/**\n * A custom made String Iterator\n * @param str {string} String to be iterated over\n */ \nexports.stringIterator = function (str) {\n  var curIndex = 0;\n  // newLines is the number of \\n between curIndex and str.length\n  var newLines = str.split(\"\\n\").length - 1\n  function getnewLines(){\n    return newLines\n  }\n\n  function assertRemaining(n) {\n    exports.assert(n <= remaining(), \"!(\", n, \" <= \", remaining(), \")\");\n  }\n\n  function take(n) {\n    assertRemaining(n);\n    var s = str.substr(curIndex, n);\n    newLines -= s.split(\"\\n\").length - 1\n    curIndex += n;\n    return s;\n  }\n\n  function peek(n) {\n    assertRemaining(n);\n    var s = str.substr(curIndex, n);\n    return s;\n  }\n\n  function skip(n) {\n    assertRemaining(n);\n    curIndex += n;\n  }\n\n  function remaining() {\n    return str.length - curIndex;\n  }\n  return {\n    take: take,\n    skip: skip,\n    remaining: remaining,\n    peek: peek,\n    newlines: getnewLines\n  };\n};\n\n/**\n * A custom made StringBuffer \n */\nexports.stringAssembler = function () {\n  var pieces = [];\n\n  function append(x) {\n    pieces.push(String(x));\n  }\n\n  function toString() {\n    return pieces.join('');\n  }\n  return {\n    append: append,\n    toString: toString\n  };\n};\n\n/**\n * This class allows to iterate and modify texts which have several lines\n * It is used for applying Changesets on arrays of lines\n * Note from prev docs: \"lines\" need not be an array as long as it supports certain calls (lines_foo inside).\n */\nexports.textLinesMutator = function (lines) {\n  // Mutates lines, an array of strings, in place.\n  // Mutation operations have the same constraints as exports operations\n  // with respect to newlines, but not the other additional constraints\n  // (i.e. ins/del ordering, forbidden no-ops, non-mergeability, final newline).\n  // Can be used to mutate lists of strings where the last char of each string\n  // is not actually a newline, but for the purposes of N and L values,\n  // the caller should pretend it is, and for things to work right in that case, the input\n  // to insert() should be a single line with no newlines.\n  var curSplice = [0, 0];\n  var inSplice = false;\n  // position in document after curSplice is applied:\n  var curLine = 0,\n      curCol = 0;\n  // invariant: if (inSplice) then (curLine is in curSplice[0] + curSplice.length - {2,3}) &&\n  //            curLine >= curSplice[0]\n  // invariant: if (inSplice && (curLine >= curSplice[0] + curSplice.length - 2)) then\n  //            curCol == 0\n\n  function lines_applySplice(s) {\n    lines.splice.apply(lines, s);\n  }\n\n  function lines_toSource() {\n    return lines.toSource();\n  }\n\n  function lines_get(idx) {\n    if (lines.get) {\n      return lines.get(idx);\n    } else {\n      return lines[idx];\n    }\n  }\n  // can be unimplemented if removeLines's return value not needed\n\n  function lines_slice(start, end) {\n    if (lines.slice) {\n      return lines.slice(start, end);\n    } else {\n      return [];\n    }\n  }\n\n  function lines_length() {\n    if ((typeof lines.length) == \"number\") {\n      return lines.length;\n    } else {\n      return lines.length();\n    }\n  }\n\n  function enterSplice() {\n    curSplice[0] = curLine;\n    curSplice[1] = 0;\n    if (curCol > 0) {\n      putCurLineInSplice();\n    }\n    inSplice = true;\n  }\n\n  function leaveSplice() {\n    lines_applySplice(curSplice);\n    curSplice.length = 2;\n    curSplice[0] = curSplice[1] = 0;\n    inSplice = false;\n  }\n\n  function isCurLineInSplice() {\n    return (curLine - curSplice[0] < (curSplice.length - 2));\n  }\n\n  function debugPrint(typ) {\n    print(typ + \": \" + curSplice.toSource() + \" / \" + curLine + \",\" + curCol + \" / \" + lines_toSource());\n  }\n\n  function putCurLineInSplice() {\n    if (!isCurLineInSplice()) {\n      curSplice.push(lines_get(curSplice[0] + curSplice[1]));\n      curSplice[1]++;\n    }\n    return 2 + curLine - curSplice[0];\n  }\n\n  function skipLines(L, includeInSplice) {\n    if (L) {\n      if (includeInSplice) {\n        if (!inSplice) {\n          enterSplice();\n        }\n        for (var i = 0; i < L; i++) {\n          curCol = 0;\n          putCurLineInSplice();\n          curLine++;\n        }\n      } else {\n        if (inSplice) {\n          if (L > 1) {\n            leaveSplice();\n          } else {\n            putCurLineInSplice();\n          }\n        }\n        curLine += L;\n        curCol = 0;\n      }\n      //print(inSplice+\" / \"+isCurLineInSplice()+\" / \"+curSplice[0]+\" / \"+curSplice[1]+\" / \"+lines.length);\n/*if (inSplice && (! isCurLineInSplice()) && (curSplice[0] + curSplice[1] < lines.length)) {\n  print(\"BLAH\");\n  putCurLineInSplice();\n}*/\n      // tests case foo in remove(), which isn't otherwise covered in current impl\n    }\n    //debugPrint(\"skip\");\n  }\n\n  function skip(N, L, includeInSplice) {\n    if (N) {\n      if (L) {\n        skipLines(L, includeInSplice);\n      } else {\n        if (includeInSplice && !inSplice) {\n          enterSplice();\n        }\n        if (inSplice) {\n          putCurLineInSplice();\n        }\n        curCol += N;\n        //debugPrint(\"skip\");\n      }\n    }\n  }\n\n  function removeLines(L) {\n    var removed = '';\n    if (L) {\n      if (!inSplice) {\n        enterSplice();\n      }\n\n      function nextKLinesText(k) {\n        var m = curSplice[0] + curSplice[1];\n        return lines_slice(m, m + k).join('');\n      }\n      if (isCurLineInSplice()) {\n        //print(curCol);\n        if (curCol == 0) {\n          removed = curSplice[curSplice.length - 1];\n          // print(\"FOO\"); // case foo\n          curSplice.length--;\n          removed += nextKLinesText(L - 1);\n          curSplice[1] += L - 1;\n        } else {\n          removed = nextKLinesText(L - 1);\n          curSplice[1] += L - 1;\n          var sline = curSplice.length - 1;\n          removed = curSplice[sline].substring(curCol) + removed;\n          curSplice[sline] = curSplice[sline].substring(0, curCol) + lines_get(curSplice[0] + curSplice[1]);\n          curSplice[1] += 1;\n        }\n      } else {\n        removed = nextKLinesText(L);\n        curSplice[1] += L;\n      }\n      //debugPrint(\"remove\");\n    }\n    return removed;\n  }\n\n  function remove(N, L) {\n    var removed = '';\n    if (N) {\n      if (L) {\n        return removeLines(L);\n      } else {\n        if (!inSplice) {\n          enterSplice();\n        }\n        var sline = putCurLineInSplice();\n        removed = curSplice[sline].substring(curCol, curCol + N);\n        curSplice[sline] = curSplice[sline].substring(0, curCol) + curSplice[sline].substring(curCol + N);\n        //debugPrint(\"remove\");\n      }\n    }\n    return removed;\n  }\n\n  function insert(text, L) {\n    if (text) {\n      if (!inSplice) {\n        enterSplice();\n      }\n      if (L) {\n        var newLines = exports.splitTextLines(text);\n        if (isCurLineInSplice()) {\n          //if (curCol == 0) {\n          //curSplice.length--;\n          //curSplice[1]--;\n          //Array.prototype.push.apply(curSplice, newLines);\n          //curLine += newLines.length;\n          //}\n          //else {\n          var sline = curSplice.length - 1;\n          var theLine = curSplice[sline];\n          var lineCol = curCol;\n          curSplice[sline] = theLine.substring(0, lineCol) + newLines[0];\n          curLine++;\n          newLines.splice(0, 1);\n          Array.prototype.push.apply(curSplice, newLines);\n          curLine += newLines.length;\n          curSplice.push(theLine.substring(lineCol));\n          curCol = 0;\n          //}\n        } else {\n          Array.prototype.push.apply(curSplice, newLines);\n          curLine += newLines.length;\n        }\n      } else {\n        var sline = putCurLineInSplice();\n        curSplice[sline] = curSplice[sline].substring(0, curCol) + text + curSplice[sline].substring(curCol);\n        curCol += text.length;\n      }\n      //debugPrint(\"insert\");\n    }\n  }\n\n  function hasMore() {\n    //print(lines.length+\" / \"+inSplice+\" / \"+(curSplice.length - 2)+\" / \"+curSplice[1]);\n    var docLines = lines_length();\n    if (inSplice) {\n      docLines += curSplice.length - 2 - curSplice[1];\n    }\n    return curLine < docLines;\n  }\n\n  function close() {\n    if (inSplice) {\n      leaveSplice();\n    }\n    //debugPrint(\"close\");\n  }\n\n  var self = {\n    skip: skip,\n    remove: remove,\n    insert: insert,\n    close: close,\n    hasMore: hasMore,\n    removeLines: removeLines,\n    skipLines: skipLines\n  };\n  return self;\n};\n\n/**\n * Function allowing iterating over two Op strings. \n * @params in1 {string} first Op string\n * @params idx1 {int} integer where 1st iterator should start\n * @params in2 {string} second Op string\n * @params idx2 {int} integer where 2nd iterator should start\n * @params func {function} which decides how 1st or 2nd iterator \n *         advances. When opX.opcode = 0, iterator X advances to\n *         next element\n *         func has signature f(op1, op2, opOut)\n *             op1 - current operation of the first iterator\n *             op2 - current operation of the second iterator\n *             opOut - result operator to be put into Changeset\n * @return {string} the integrated changeset\n */\nexports.applyZip = function (in1, idx1, in2, idx2, func) {\n  var iter1 = exports.opIterator(in1, idx1);\n  var iter2 = exports.opIterator(in2, idx2);\n  var assem = exports.smartOpAssembler();\n  var op1 = exports.newOp();\n  var op2 = exports.newOp();\n  var opOut = exports.newOp();\n  while (op1.opcode || iter1.hasNext() || op2.opcode || iter2.hasNext()) {\n    if ((!op1.opcode) && iter1.hasNext()) iter1.next(op1);\n    if ((!op2.opcode) && iter2.hasNext()) iter2.next(op2);\n    func(op1, op2, opOut);\n    if (opOut.opcode) {\n      //print(opOut.toSource());\n      assem.append(opOut);\n      opOut.opcode = '';\n    }\n  }\n  assem.endDocument();\n  return assem.toString();\n};\n\n/**\n * Unpacks a string encoded Changeset into a proper Changeset object\n * @params cs {string} String encoded Changeset\n * @returns {Changeset} a Changeset class\n */\nexports.unpack = function (cs) {\n  var headerRegex = /Z:([0-9a-z]+)([><])([0-9a-z]+)|/;\n  var headerMatch = headerRegex.exec(cs);\n  if ((!headerMatch) || (!headerMatch[0])) {\n    exports.error(\"Not a exports: \" + cs);\n  }\n  var oldLen = exports.parseNum(headerMatch[1]);\n  var changeSign = (headerMatch[2] == '>') ? 1 : -1;\n  var changeMag = exports.parseNum(headerMatch[3]);\n  var newLen = oldLen + changeSign * changeMag;\n  var opsStart = headerMatch[0].length;\n  var opsEnd = cs.indexOf(\"$\");\n  if (opsEnd < 0) opsEnd = cs.length;\n  return {\n    oldLen: oldLen,\n    newLen: newLen,\n    ops: cs.substring(opsStart, opsEnd),\n    charBank: cs.substring(opsEnd + 1)\n  };\n};\n\n/**\n * Packs Changeset object into a string \n * @params oldLen {int} Old length of the Changeset\n * @params newLen {int] New length of the Changeset\n * @params opsStr {string} String encoding of the changes to be made\n * @params bank {string} Charbank of the Changeset\n * @returns {Changeset} a Changeset class\n */\nexports.pack = function (oldLen, newLen, opsStr, bank) {\n  var lenDiff = newLen - oldLen;\n  var lenDiffStr = (lenDiff >= 0 ? '>' + exports.numToString(lenDiff) : '<' + exports.numToString(-lenDiff));\n  var a = [];\n  a.push('Z:', exports.numToString(oldLen), lenDiffStr, opsStr, '$', bank);\n  return a.join('');\n};\n\n/**\n * Applies a Changeset to a string\n * @params cs {string} String encoded Changeset\n * @params str {string} String to which a Changeset should be applied\n */\nexports.applyToText = function (cs, str) {\n  var unpacked = exports.unpack(cs);\n  exports.assert(str.length == unpacked.oldLen, \"mismatched apply: \", str.length, \" / \", unpacked.oldLen);\n  var csIter = exports.opIterator(unpacked.ops);\n  var bankIter = exports.stringIterator(unpacked.charBank);\n  var strIter = exports.stringIterator(str);\n  var assem = exports.stringAssembler();\n  while (csIter.hasNext()) {\n    var op = csIter.next();\n    switch (op.opcode) {\n    case '+':\n      //op is + and op.lines 0: no newlines must be in op.chars\n      //op is + and op.lines >0: op.chars must include op.lines newlines\n      if(op.lines != bankIter.peek(op.chars).split(\"\\n\").length - 1){\n        throw new Error(\"newline count is wrong in op +; cs:\"+cs+\" and text:\"+str);\n      }\n      assem.append(bankIter.take(op.chars));\n      break;\n    case '-':\n      //op is - and op.lines 0: no newlines must be in the deleted string\n      //op is - and op.lines >0: op.lines newlines must be in the deleted string\n      if(op.lines != strIter.peek(op.chars).split(\"\\n\").length - 1){\n        throw new Error(\"newline count is wrong in op -; cs:\"+cs+\" and text:\"+str);\n      }\n      strIter.skip(op.chars);\n      break;\n    case '=':\n      //op is = and op.lines 0: no newlines must be in the copied string\n      //op is = and op.lines >0: op.lines newlines must be in the copied string\n      if(op.lines != strIter.peek(op.chars).split(\"\\n\").length - 1){\n        throw new Error(\"newline count is wrong in op =; cs:\"+cs+\" and text:\"+str);\n      }\n      assem.append(strIter.take(op.chars));\n      break;\n    }\n  }\n  assem.append(strIter.take(strIter.remaining()));\n  return assem.toString();\n};\n\n/**\n * applies a changeset on an array of lines\n * @param CS {Changeset} the changeset to be applied\n * @param lines The lines to which the changeset needs to be applied\n */\nexports.mutateTextLines = function (cs, lines) {\n  var unpacked = exports.unpack(cs);\n  var csIter = exports.opIterator(unpacked.ops);\n  var bankIter = exports.stringIterator(unpacked.charBank);\n  var mut = exports.textLinesMutator(lines);\n  while (csIter.hasNext()) {\n    var op = csIter.next();\n    switch (op.opcode) {\n    case '+':\n      mut.insert(bankIter.take(op.chars), op.lines);\n      break;\n    case '-':\n      mut.remove(op.chars, op.lines);\n      break;\n    case '=':\n      mut.skip(op.chars, op.lines, ( !! op.attribs));\n      break;\n    }\n  }\n  mut.close();\n};\n\n/**\n * Composes two attribute strings (see below) into one.\n * @param att1 {string} first attribute string\n * @param att2 {string} second attribue string\n * @param resultIsMutaton {boolean} \n * @param pool {AttribPool} attribute pool \n */\nexports.composeAttributes = function (att1, att2, resultIsMutation, pool) {\n  // att1 and att2 are strings like \"*3*f*1c\", asMutation is a boolean.\n  // Sometimes attribute (key,value) pairs are treated as attribute presence\n  // information, while other times they are treated as operations that\n  // mutate a set of attributes, and this affects whether an empty value\n  // is a deletion or a change.\n  // Examples, of the form (att1Items, att2Items, resultIsMutation) -> result\n  // ([], [(bold, )], true) -> [(bold, )]\n  // ([], [(bold, )], false) -> []\n  // ([], [(bold, true)], true) -> [(bold, true)]\n  // ([], [(bold, true)], false) -> [(bold, true)]\n  // ([(bold, true)], [(bold, )], true) -> [(bold, )]\n  // ([(bold, true)], [(bold, )], false) -> []\n  // pool can be null if att2 has no attributes.\n  if ((!att1) && resultIsMutation) {\n    // In the case of a mutation (i.e. composing two exportss),\n    // an att2 composed with an empy att1 is just att2.  If att1\n    // is part of an attribution string, then att2 may remove\n    // attributes that are already gone, so don't do this optimization.\n    return att2;\n  }\n  if (!att2) return att1;\n  var atts = [];\n  att1.replace(/\\*([0-9a-z]+)/g, function (_, a) {\n    atts.push(pool.getAttrib(exports.parseNum(a)));\n    return '';\n  });\n  att2.replace(/\\*([0-9a-z]+)/g, function (_, a) {\n    var pair = pool.getAttrib(exports.parseNum(a));\n    var found = false;\n    for (var i = 0; i < atts.length; i++) {\n      var oldPair = atts[i];\n      if (oldPair[0] == pair[0]) {\n        if (pair[1] || resultIsMutation) {\n          oldPair[1] = pair[1];\n        } else {\n          atts.splice(i, 1);\n        }\n        found = true;\n        break;\n      }\n    }\n    if ((!found) && (pair[1] || resultIsMutation)) {\n      atts.push(pair);\n    }\n    return '';\n  });\n  atts.sort();\n  var buf = exports.stringAssembler();\n  for (var i = 0; i < atts.length; i++) {\n    buf.append('*');\n    buf.append(exports.numToString(pool.putAttrib(atts[i])));\n  }\n  //print(att1+\" / \"+att2+\" / \"+buf.toString());\n  return buf.toString();\n};\n\n/**\n * Function used as parameter for applyZip to apply a Changeset to an \n * attribute \n */\nexports._slicerZipperFunc = function (attOp, csOp, opOut, pool) {\n  // attOp is the op from the sequence that is being operated on, either an\n  // attribution string or the earlier of two exportss being composed.\n  // pool can be null if definitely not needed.\n  //print(csOp.toSource()+\" \"+attOp.toSource()+\" \"+opOut.toSource());\n  if (attOp.opcode == '-') {\n    exports.copyOp(attOp, opOut);\n    attOp.opcode = '';\n  } else if (!attOp.opcode) {\n    exports.copyOp(csOp, opOut);\n    csOp.opcode = '';\n  } else {\n    switch (csOp.opcode) {\n    case '-':\n      {\n        if (csOp.chars <= attOp.chars) {\n          // delete or delete part\n          if (attOp.opcode == '=') {\n            opOut.opcode = '-';\n            opOut.chars = csOp.chars;\n            opOut.lines = csOp.lines;\n            opOut.attribs = '';\n          }\n          attOp.chars -= csOp.chars;\n          attOp.lines -= csOp.lines;\n          csOp.opcode = '';\n          if (!attOp.chars) {\n            attOp.opcode = '';\n          }\n        } else {\n          // delete and keep going\n          if (attOp.opcode == '=') {\n            opOut.opcode = '-';\n            opOut.chars = attOp.chars;\n            opOut.lines = attOp.lines;\n            opOut.attribs = '';\n          }\n          csOp.chars -= attOp.chars;\n          csOp.lines -= attOp.lines;\n          attOp.opcode = '';\n        }\n        break;\n      }\n    case '+':\n      {\n        // insert\n        exports.copyOp(csOp, opOut);\n        csOp.opcode = '';\n        break;\n      }\n    case '=':\n      {\n        if (csOp.chars <= attOp.chars) {\n          // keep or keep part\n          opOut.opcode = attOp.opcode;\n          opOut.chars = csOp.chars;\n          opOut.lines = csOp.lines;\n          opOut.attribs = exports.composeAttributes(attOp.attribs, csOp.attribs, attOp.opcode == '=', pool);\n          csOp.opcode = '';\n          attOp.chars -= csOp.chars;\n          attOp.lines -= csOp.lines;\n          if (!attOp.chars) {\n            attOp.opcode = '';\n          }\n        } else {\n          // keep and keep going\n          opOut.opcode = attOp.opcode;\n          opOut.chars = attOp.chars;\n          opOut.lines = attOp.lines;\n          opOut.attribs = exports.composeAttributes(attOp.attribs, csOp.attribs, attOp.opcode == '=', pool);\n          attOp.opcode = '';\n          csOp.chars -= attOp.chars;\n          csOp.lines -= attOp.lines;\n        }\n        break;\n      }\n    case '':\n      {\n        exports.copyOp(attOp, opOut);\n        attOp.opcode = '';\n        break;\n      }\n    }\n  }\n};\n\n/**\n * Applies a Changeset to the attribs string of a AText.\n * @param cs {string} Changeset\n * @param astr {string} the attribs string of a AText\n * @param pool {AttribsPool} the attibutes pool\n */\nexports.applyToAttribution = function (cs, astr, pool) {\n  var unpacked = exports.unpack(cs);\n\n  return exports.applyZip(astr, 0, unpacked.ops, 0, function (op1, op2, opOut) {\n    return exports._slicerZipperFunc(op1, op2, opOut, pool);\n  });\n};\n\n/*exports.oneInsertedLineAtATimeOpIterator = function(opsStr, optStartIndex, charBank) {\n  var iter = exports.opIterator(opsStr, optStartIndex);\n  var bankIndex = 0;\n\n};*/\n\nexports.mutateAttributionLines = function (cs, lines, pool) {\n  //dmesg(cs);\n  //dmesg(lines.toSource()+\" ->\");\n  var unpacked = exports.unpack(cs);\n  var csIter = exports.opIterator(unpacked.ops);\n  var csBank = unpacked.charBank;\n  var csBankIndex = 0;\n  // treat the attribution lines as text lines, mutating a line at a time\n  var mut = exports.textLinesMutator(lines);\n\n  var lineIter = null;\n\n  function isNextMutOp() {\n    return (lineIter && lineIter.hasNext()) || mut.hasMore();\n  }\n\n  function nextMutOp(destOp) {\n    if ((!(lineIter && lineIter.hasNext())) && mut.hasMore()) {\n      var line = mut.removeLines(1);\n      lineIter = exports.opIterator(line);\n    }\n    if (lineIter && lineIter.hasNext()) {\n      lineIter.next(destOp);\n    } else {\n      destOp.opcode = '';\n    }\n  }\n  var lineAssem = null;\n\n  function outputMutOp(op) {\n    //print(\"outputMutOp: \"+op.toSource());\n    if (!lineAssem) {\n      lineAssem = exports.mergingOpAssembler();\n    }\n    lineAssem.append(op);\n    if (op.lines > 0) {\n      exports.assert(op.lines == 1, \"Can't have op.lines of \", op.lines, \" in attribution lines\");\n      // ship it to the mut\n      mut.insert(lineAssem.toString(), 1);\n      lineAssem = null;\n    }\n  }\n\n  var csOp = exports.newOp();\n  var attOp = exports.newOp();\n  var opOut = exports.newOp();\n  while (csOp.opcode || csIter.hasNext() || attOp.opcode || isNextMutOp()) {\n    if ((!csOp.opcode) && csIter.hasNext()) {\n      csIter.next(csOp);\n    }\n    //print(csOp.toSource()+\" \"+attOp.toSource()+\" \"+opOut.toSource());\n    //print(csOp.opcode+\"/\"+csOp.lines+\"/\"+csOp.attribs+\"/\"+lineAssem+\"/\"+lineIter+\"/\"+(lineIter?lineIter.hasNext():null));\n    //print(\"csOp: \"+csOp.toSource());\n    if ((!csOp.opcode) && (!attOp.opcode) && (!lineAssem) && (!(lineIter && lineIter.hasNext()))) {\n      break; // done\n    } else if (csOp.opcode == '=' && csOp.lines > 0 && (!csOp.attribs) && (!attOp.opcode) && (!lineAssem) && (!(lineIter && lineIter.hasNext()))) {\n      // skip multiple lines; this is what makes small changes not order of the document size\n      mut.skipLines(csOp.lines);\n      //print(\"skipped: \"+csOp.lines);\n      csOp.opcode = '';\n    } else if (csOp.opcode == '+') {\n      if (csOp.lines > 1) {\n        var firstLineLen = csBank.indexOf('\\n', csBankIndex) + 1 - csBankIndex;\n        exports.copyOp(csOp, opOut);\n        csOp.chars -= firstLineLen;\n        csOp.lines--;\n        opOut.lines = 1;\n        opOut.chars = firstLineLen;\n      } else {\n        exports.copyOp(csOp, opOut);\n        csOp.opcode = '';\n      }\n      outputMutOp(opOut);\n      csBankIndex += opOut.chars;\n      opOut.opcode = '';\n    } else {\n      if ((!attOp.opcode) && isNextMutOp()) {\n        nextMutOp(attOp);\n      }\n      //print(\"attOp: \"+attOp.toSource());\n      exports._slicerZipperFunc(attOp, csOp, opOut, pool);\n      if (opOut.opcode) {\n        outputMutOp(opOut);\n        opOut.opcode = '';\n      }\n    }\n  }\n\n  exports.assert(!lineAssem, \"line assembler not finished:\"+cs);\n  mut.close();\n\n  //dmesg(\"-> \"+lines.toSource());\n};\n\n/**\n * joins several Attribution lines\n * @param theAlines collection of Attribution lines\n * @returns {string} joined Attribution lines\n */\nexports.joinAttributionLines = function (theAlines) {\n  var assem = exports.mergingOpAssembler();\n  for (var i = 0; i < theAlines.length; i++) {\n    var aline = theAlines[i];\n    var iter = exports.opIterator(aline);\n    while (iter.hasNext()) {\n      assem.append(iter.next());\n    }\n  }\n  return assem.toString();\n};\n\nexports.splitAttributionLines = function (attrOps, text) {\n  var iter = exports.opIterator(attrOps);\n  var assem = exports.mergingOpAssembler();\n  var lines = [];\n  var pos = 0;\n\n  function appendOp(op) {\n    assem.append(op);\n    if (op.lines > 0) {\n      lines.push(assem.toString());\n      assem.clear();\n    }\n    pos += op.chars;\n  }\n\n  while (iter.hasNext()) {\n    var op = iter.next();\n    var numChars = op.chars;\n    var numLines = op.lines;\n    while (numLines > 1) {\n      var newlineEnd = text.indexOf('\\n', pos) + 1;\n      exports.assert(newlineEnd > 0, \"newlineEnd <= 0 in splitAttributionLines\");\n      op.chars = newlineEnd - pos;\n      op.lines = 1;\n      appendOp(op);\n      numChars -= op.chars;\n      numLines -= op.lines;\n    }\n    if (numLines == 1) {\n      op.chars = numChars;\n      op.lines = 1;\n    }\n    appendOp(op);\n  }\n\n  return lines;\n};\n\n/**\n * splits text into lines\n * @param {string} text to be splitted\n */\nexports.splitTextLines = function (text) {\n  return text.match(/[^\\n]*(?:\\n|[^\\n]$)/g);\n};\n\n/**\n * compose two Changesets\n * @param cs1 {Changeset} first Changeset\n * @param cs2 {Changeset} second Changeset\n * @param pool {AtribsPool} Attribs pool\n */\nexports.compose = function (cs1, cs2, pool) {\n  var unpacked1 = exports.unpack(cs1);\n  var unpacked2 = exports.unpack(cs2);\n  var len1 = unpacked1.oldLen;\n  var len2 = unpacked1.newLen;\n  exports.assert(len2 == unpacked2.oldLen, \"mismatched composition of two changesets\");\n  var len3 = unpacked2.newLen;\n  var bankIter1 = exports.stringIterator(unpacked1.charBank);\n  var bankIter2 = exports.stringIterator(unpacked2.charBank);\n  var bankAssem = exports.stringAssembler();\n\n  var newOps = exports.applyZip(unpacked1.ops, 0, unpacked2.ops, 0, function (op1, op2, opOut) {\n    //var debugBuilder = exports.stringAssembler();\n    //debugBuilder.append(exports.opString(op1));\n    //debugBuilder.append(',');\n    //debugBuilder.append(exports.opString(op2));\n    //debugBuilder.append(' / ');\n    var op1code = op1.opcode;\n    var op2code = op2.opcode;\n    if (op1code == '+' && op2code == '-') {\n      bankIter1.skip(Math.min(op1.chars, op2.chars));\n    }\n    exports._slicerZipperFunc(op1, op2, opOut, pool);\n    if (opOut.opcode == '+') {\n      if (op2code == '+') {\n        bankAssem.append(bankIter2.take(opOut.chars));\n      } else {\n        bankAssem.append(bankIter1.take(opOut.chars));\n      }\n    }\n\n    //debugBuilder.append(exports.opString(op1));\n    //debugBuilder.append(',');\n    //debugBuilder.append(exports.opString(op2));\n    //debugBuilder.append(' -> ');\n    //debugBuilder.append(exports.opString(opOut));\n    //print(debugBuilder.toString());\n  });\n\n  return exports.pack(len1, len3, newOps, bankAssem.toString());\n};\n\n/**\n * returns a function that tests if a string of attributes\n * (e.g. *3*4) contains a given attribute key,value that\n * is already present in the pool.\n * @param attribPair array [key,value] of the attribute \n * @param pool {AttribPool} Attribute pool\n */\nexports.attributeTester = function (attribPair, pool) {\n  if (!pool) {\n    return never;\n  }\n  var attribNum = pool.putAttrib(attribPair, true);\n  if (attribNum < 0) {\n    return never;\n  } else {\n    var re = new RegExp('\\\\*' + exports.numToString(attribNum) + '(?!\\\\w)');\n    return function (attribs) {\n      return re.test(attribs);\n    };\n  }\n\n  function never(attribs) {\n    return false;\n  }\n};\n\n/**\n * creates the identity Changeset of length N\n * @param N {int} length of the identity changeset\n */\nexports.identity = function (N) {\n  return exports.pack(N, N, \"\", \"\");\n};\n\n\n/**\n * creates a Changeset which works on oldFullText and removes text \n * from spliceStart to spliceStart+numRemoved and inserts newText \n * instead. Also gives possibility to add attributes optNewTextAPairs \n * for the new text.\n * @param oldFullText {string} old text\n * @param spliecStart {int} where splicing starts\n * @param numRemoved {int} number of characters to be removed\n * @param newText {string} string to be inserted\n * @param optNewTextAPairs {string} new pairs to be inserted\n * @param pool {AttribPool} Attribution Pool\n */\nexports.makeSplice = function (oldFullText, spliceStart, numRemoved, newText, optNewTextAPairs, pool) {\n  var oldLen = oldFullText.length;\n\n  if (spliceStart >= oldLen) {\n    spliceStart = oldLen - 1;\n  }\n  if (numRemoved > oldFullText.length - spliceStart) {\n    numRemoved = oldFullText.length - spliceStart;\n  }\n  var oldText = oldFullText.substring(spliceStart, spliceStart + numRemoved);\n  var newLen = oldLen + newText.length - oldText.length;\n\n  var assem = exports.smartOpAssembler();\n  assem.appendOpWithText('=', oldFullText.substring(0, spliceStart));\n  assem.appendOpWithText('-', oldText);\n  assem.appendOpWithText('+', newText, optNewTextAPairs, pool);\n  assem.endDocument();\n  return exports.pack(oldLen, newLen, assem.toString(), newText);\n};\n\n/**\n * Transforms a changeset into a list of splices in the form\n * [startChar, endChar, newText] meaning replace text from\n * startChar to endChar with newText\n * @param cs Changeset\n */\nexports.toSplices = function (cs) {\n  // \n  var unpacked = exports.unpack(cs);\n  var splices = [];\n\n  var oldPos = 0;\n  var iter = exports.opIterator(unpacked.ops);\n  var charIter = exports.stringIterator(unpacked.charBank);\n  var inSplice = false;\n  while (iter.hasNext()) {\n    var op = iter.next();\n    if (op.opcode == '=') {\n      oldPos += op.chars;\n      inSplice = false;\n    } else {\n      if (!inSplice) {\n        splices.push([oldPos, oldPos, \"\"]);\n        inSplice = true;\n      }\n      if (op.opcode == '-') {\n        oldPos += op.chars;\n        splices[splices.length - 1][1] += op.chars;\n      } else if (op.opcode == '+') {\n        splices[splices.length - 1][2] += charIter.take(op.chars);\n      }\n    }\n  }\n\n  return splices;\n};\n\n/**\n * \n */\nexports.characterRangeFollow = function (cs, startChar, endChar, insertionsAfter) {\n  var newStartChar = startChar;\n  var newEndChar = endChar;\n  var splices = exports.toSplices(cs);\n  var lengthChangeSoFar = 0;\n  for (var i = 0; i < splices.length; i++) {\n    var splice = splices[i];\n    var spliceStart = splice[0] + lengthChangeSoFar;\n    var spliceEnd = splice[1] + lengthChangeSoFar;\n    var newTextLength = splice[2].length;\n    var thisLengthChange = newTextLength - (spliceEnd - spliceStart);\n\n    if (spliceStart <= newStartChar && spliceEnd >= newEndChar) {\n      // splice fully replaces/deletes range\n      // (also case that handles insertion at a collapsed selection)\n      if (insertionsAfter) {\n        newStartChar = newEndChar = spliceStart;\n      } else {\n        newStartChar = newEndChar = spliceStart + newTextLength;\n      }\n    } else if (spliceEnd <= newStartChar) {\n      // splice is before range\n      newStartChar += thisLengthChange;\n      newEndChar += thisLengthChange;\n    } else if (spliceStart >= newEndChar) {\n      // splice is after range\n    } else if (spliceStart >= newStartChar && spliceEnd <= newEndChar) {\n      // splice is inside range\n      newEndChar += thisLengthChange;\n    } else if (spliceEnd < newEndChar) {\n      // splice overlaps beginning of range\n      newStartChar = spliceStart + newTextLength;\n      newEndChar += thisLengthChange;\n    } else {\n      // splice overlaps end of range\n      newEndChar = spliceStart;\n    }\n\n    lengthChangeSoFar += thisLengthChange;\n  }\n\n  return [newStartChar, newEndChar];\n};\n\n/**\n * Iterate over attributes in a changeset and move them from\n * oldPool to newPool\n * @param cs {Changeset} Chageset/attribution string to be iterated over\n * @param oldPool {AttribPool} old attributes pool\n * @param newPool {AttribPool} new attributes pool\n * @return {string} the new Changeset\n */\nexports.moveOpsToNewPool = function (cs, oldPool, newPool) {\n  // works on exports or attribution string\n  var dollarPos = cs.indexOf('$');\n  if (dollarPos < 0) {\n    dollarPos = cs.length;\n  }\n  var upToDollar = cs.substring(0, dollarPos);\n  var fromDollar = cs.substring(dollarPos);\n  // order of attribs stays the same\n  return upToDollar.replace(/\\*([0-9a-z]+)/g, function (_, a) {\n    var oldNum = exports.parseNum(a);\n    var pair = oldPool.getAttrib(oldNum);\n    if(!pair) exports.error('Can\\'t copy unknown attrib (reference attrib string to non-existant pool entry). Inconsistent attrib state!');\n    var newNum = newPool.putAttrib(pair);\n    return '*' + exports.numToString(newNum);\n  }) + fromDollar;\n};\n\n/**\n * create an attribution inserting a text\n * @param text {string} text to be inserted\n */\nexports.makeAttribution = function (text) {\n  var assem = exports.smartOpAssembler();\n  assem.appendOpWithText('+', text);\n  return assem.toString();\n};\n\n/**\n * Iterates over attributes in exports, attribution string, or attribs property of an op\n * and runs function func on them\n * @param cs {Changeset} changeset\n * @param func {function} function to be called\n */ \nexports.eachAttribNumber = function (cs, func) {\n  var dollarPos = cs.indexOf('$');\n  if (dollarPos < 0) {\n    dollarPos = cs.length;\n  }\n  var upToDollar = cs.substring(0, dollarPos);\n\n  upToDollar.replace(/\\*([0-9a-z]+)/g, function (_, a) {\n    func(exports.parseNum(a));\n    return '';\n  });\n};\n\n/**\n * Filter attributes which should remain in a Changeset\n * callable on a exports, attribution string, or attribs property of an op,\n * though it may easily create adjacent ops that can be merged.\n * @param cs {Changeset} changeset to be filtered\n * @param filter {function} fnc which returns true if an \n *        attribute X (int) should be kept in the Changeset\n */ \nexports.filterAttribNumbers = function (cs, filter) {\n  return exports.mapAttribNumbers(cs, filter);\n};\n\n/**\n * does exactly the same as exports.filterAttribNumbers \n */ \nexports.mapAttribNumbers = function (cs, func) {\n  var dollarPos = cs.indexOf('$');\n  if (dollarPos < 0) {\n    dollarPos = cs.length;\n  }\n  var upToDollar = cs.substring(0, dollarPos);\n\n  var newUpToDollar = upToDollar.replace(/\\*([0-9a-z]+)/g, function (s, a) {\n    var n = func(exports.parseNum(a));\n    if (n === true) {\n      return s;\n    } else if ((typeof n) === \"number\") {\n      return '*' + exports.numToString(n);\n    } else {\n      return '';\n    }\n  });\n\n  return newUpToDollar + cs.substring(dollarPos);\n};\n\n/**\n * Create a Changeset going from Identity to a certain state\n * @params text {string} text of the final change\n * @attribs attribs {string} optional, operations which insert \n *    the text and also puts the right attributes\n */\nexports.makeAText = function (text, attribs) {\n  return {\n    text: text,\n    attribs: (attribs || exports.makeAttribution(text))\n  };\n};\n\n/**\n * Apply a Changeset to a AText \n * @param cs {Changeset} Changeset to be applied\n * @param atext {AText} \n * @param pool {AttribPool} Attribute Pool to add to\n */\nexports.applyToAText = function (cs, atext, pool) {\n  return {\n    text: exports.applyToText(cs, atext.text),\n    attribs: exports.applyToAttribution(cs, atext.attribs, pool)\n  };\n};\n\n/**\n * Clones a AText structure\n * @param atext {AText} \n */\nexports.cloneAText = function (atext) {\n  return {\n    text: atext.text,\n    attribs: atext.attribs\n  };\n};\n\n/**\n * Copies a AText structure from atext1 to atext2\n * @param atext {AText} \n */\nexports.copyAText = function (atext1, atext2) {\n  atext2.text = atext1.text;\n  atext2.attribs = atext1.attribs;\n};\n\n/**\n * Append the set of operations from atext to an assembler\n * @param atext {AText} \n * @param assem Assembler like smartOpAssembler\n */\nexports.appendATextToAssembler = function (atext, assem) {\n  // intentionally skips last newline char of atext\n  var iter = exports.opIterator(atext.attribs);\n  var op = exports.newOp();\n  while (iter.hasNext()) {\n    iter.next(op);\n    if (!iter.hasNext()) {\n      // last op, exclude final newline\n      if (op.lines <= 1) {\n        op.lines = 0;\n        op.chars--;\n        if (op.chars) {\n          assem.append(op);\n        }\n      } else {\n        var nextToLastNewlineEnd =\n        atext.text.lastIndexOf('\\n', atext.text.length - 2) + 1;\n        var lastLineLength = atext.text.length - nextToLastNewlineEnd - 1;\n        op.lines--;\n        op.chars -= (lastLineLength + 1);\n        assem.append(op);\n        op.lines = 0;\n        op.chars = lastLineLength;\n        if (op.chars) {\n          assem.append(op);\n        }\n      }\n    } else {\n      assem.append(op);\n    }\n  }\n};\n\n/**\n * Creates a clone of a Changeset and it's APool\n * @param cs {Changeset} \n * @param pool {AtributePool}\n */\nexports.prepareForWire = function (cs, pool) {\n  var newPool = new AttributePool();\n  var newCs = exports.moveOpsToNewPool(cs, pool, newPool);\n  return {\n    translated: newCs,\n    pool: newPool\n  };\n};\n\n/**\n * Checks if a changeset s the identity changeset\n */\nexports.isIdentity = function (cs) {\n  var unpacked = exports.unpack(cs);\n  return unpacked.ops == \"\" && unpacked.oldLen == unpacked.newLen;\n};\n\n/**\n * returns all the values of attributes with a certain key \n * in an Op attribs string \n * @param attribs {string} Attribute string of a Op\n * @param key {string} string to be seached for\n * @param pool {AttribPool} attribute pool\n */\nexports.opAttributeValue = function (op, key, pool) {\n  return exports.attribsAttributeValue(op.attribs, key, pool);\n};\n\n/**\n * returns all the values of attributes with a certain key \n * in an attribs string \n * @param attribs {string} Attribute string\n * @param key {string} string to be seached for\n * @param pool {AttribPool} attribute pool\n */\nexports.attribsAttributeValue = function (attribs, key, pool) {\n  var value = '';\n  if (attribs) {\n    exports.eachAttribNumber(attribs, function (n) {\n      if (pool.getAttribKey(n) == key) {\n        value = pool.getAttribValue(n);\n      }\n    });\n  }\n  return value;\n};\n\n/**\n * Creates a Changeset builder for a string with initial \n * length oldLen. Allows to add/remove parts of it\n * @param oldLen {int} Old length\n */\nexports.builder = function (oldLen) {\n  var assem = exports.smartOpAssembler();\n  var o = exports.newOp();\n  var charBank = exports.stringAssembler();\n\n  var self = {\n    // attribs are [[key1,value1],[key2,value2],...] or '*0*1...' (no pool needed in latter case)\n    keep: function (N, L, attribs, pool) {\n      o.opcode = '=';\n      o.attribs = (attribs && exports.makeAttribsString('=', attribs, pool)) || '';\n      o.chars = N;\n      o.lines = (L || 0);\n      assem.append(o);\n      return self;\n    },\n    keepText: function (text, attribs, pool) {\n      assem.appendOpWithText('=', text, attribs, pool);\n      return self;\n    },\n    insert: function (text, attribs, pool) {\n      assem.appendOpWithText('+', text, attribs, pool);\n      charBank.append(text);\n      return self;\n    },\n    remove: function (N, L) {\n      o.opcode = '-';\n      o.attribs = '';\n      o.chars = N;\n      o.lines = (L || 0);\n      assem.append(o);\n      return self;\n    },\n    toString: function () {\n      assem.endDocument();\n      var newLen = oldLen + assem.getLengthChange();\n      return exports.pack(oldLen, newLen, assem.toString(), charBank.toString());\n    }\n  };\n\n  return self;\n};\n\nexports.makeAttribsString = function (opcode, attribs, pool) {\n  // makeAttribsString(opcode, '*3') or makeAttribsString(opcode, [['foo','bar']], myPool) work\n  if (!attribs) {\n    return '';\n  } else if ((typeof attribs) == \"string\") {\n    return attribs;\n  } else if (pool && attribs && attribs.length) {\n    if (attribs.length > 1) {\n      attribs = attribs.slice();\n      attribs.sort();\n    }\n    var result = [];\n    for (var i = 0; i < attribs.length; i++) {\n      var pair = attribs[i];\n      if (opcode == '=' || (opcode == '+' && pair[1])) {\n        result.push('*' + exports.numToString(pool.putAttrib(pair)));\n      }\n    }\n    return result.join('');\n  }\n};\n\n// like \"substring\" but on a single-line attribution string\nexports.subattribution = function (astr, start, optEnd) {\n  var iter = exports.opIterator(astr, 0);\n  var assem = exports.smartOpAssembler();\n  var attOp = exports.newOp();\n  var csOp = exports.newOp();\n  var opOut = exports.newOp();\n\n  function doCsOp() {\n    if (csOp.chars) {\n      while (csOp.opcode && (attOp.opcode || iter.hasNext())) {\n        if (!attOp.opcode) iter.next(attOp);\n\n        if (csOp.opcode && attOp.opcode && csOp.chars >= attOp.chars && attOp.lines > 0 && csOp.lines <= 0) {\n          csOp.lines++;\n        }\n\n        exports._slicerZipperFunc(attOp, csOp, opOut, null);\n        if (opOut.opcode) {\n          assem.append(opOut);\n          opOut.opcode = '';\n        }\n      }\n    }\n  }\n\n  csOp.opcode = '-';\n  csOp.chars = start;\n\n  doCsOp();\n\n  if (optEnd === undefined) {\n    if (attOp.opcode) {\n      assem.append(attOp);\n    }\n    while (iter.hasNext()) {\n      iter.next(attOp);\n      assem.append(attOp);\n    }\n  } else {\n    csOp.opcode = '=';\n    csOp.chars = optEnd - start;\n    doCsOp();\n  }\n\n  return assem.toString();\n};\n\nexports.inverse = function (cs, lines, alines, pool) {\n  // lines and alines are what the exports is meant to apply to.\n  // They may be arrays or objects with .get(i) and .length methods.\n  // They include final newlines on lines.\n\n  function lines_get(idx) {\n    if (lines.get) {\n      return lines.get(idx);\n    } else {\n      return lines[idx];\n    }\n  }\n\n  function alines_get(idx) {\n    if (alines.get) {\n      return alines.get(idx);\n    } else {\n      return alines[idx];\n    }\n  }\n\n  var curLine = 0;\n  var curChar = 0;\n  var curLineOpIter = null;\n  var curLineOpIterLine;\n  var curLineNextOp = exports.newOp('+');\n\n  var unpacked = exports.unpack(cs);\n  var csIter = exports.opIterator(unpacked.ops);\n  var builder = exports.builder(unpacked.newLen);\n\n  function consumeAttribRuns(numChars, func /*(len, attribs, endsLine)*/ ) {\n\n    if ((!curLineOpIter) || (curLineOpIterLine != curLine)) {\n      // create curLineOpIter and advance it to curChar\n      curLineOpIter = exports.opIterator(alines_get(curLine));\n      curLineOpIterLine = curLine;\n      var indexIntoLine = 0;\n      var done = false;\n      while (!done && curLineOpIter.hasNext()) {\n        curLineOpIter.next(curLineNextOp);\n        if (indexIntoLine + curLineNextOp.chars >= curChar) {\n          curLineNextOp.chars -= (curChar - indexIntoLine);\n          done = true;\n        } else {\n          indexIntoLine += curLineNextOp.chars;\n        }\n      }\n    }\n\n    while (numChars > 0) {\n      if ((!curLineNextOp.chars) && (!curLineOpIter.hasNext())) {\n        curLine++;\n        curChar = 0;\n        curLineOpIterLine = curLine;\n        curLineNextOp.chars = 0;\n        curLineOpIter = exports.opIterator(alines_get(curLine));\n      }\n      if (!curLineNextOp.chars) {\n        curLineOpIter.next(curLineNextOp);\n      }\n      var charsToUse = Math.min(numChars, curLineNextOp.chars);\n      func(charsToUse, curLineNextOp.attribs, charsToUse == curLineNextOp.chars && curLineNextOp.lines > 0);\n      numChars -= charsToUse;\n      curLineNextOp.chars -= charsToUse;\n      curChar += charsToUse;\n    }\n\n    if ((!curLineNextOp.chars) && (!curLineOpIter.hasNext())) {\n      curLine++;\n      curChar = 0;\n    }\n  }\n\n  function skip(N, L) {\n    if (L) {\n      curLine += L;\n      curChar = 0;\n    } else {\n      if (curLineOpIter && curLineOpIterLine == curLine) {\n        consumeAttribRuns(N, function () {});\n      } else {\n        curChar += N;\n      }\n    }\n  }\n\n  function nextText(numChars) {\n    var len = 0;\n    var assem = exports.stringAssembler();\n    var firstString = lines_get(curLine).substring(curChar);\n    len += firstString.length;\n    assem.append(firstString);\n\n    var lineNum = curLine + 1;\n    while (len < numChars) {\n      var nextString = lines_get(lineNum);\n      len += nextString.length;\n      assem.append(nextString);\n      lineNum++;\n    }\n\n    return assem.toString().substring(0, numChars);\n  }\n\n  function cachedStrFunc(func) {\n    var cache = {};\n    return function (s) {\n      if (!cache[s]) {\n        cache[s] = func(s);\n      }\n      return cache[s];\n    };\n  }\n\n  var attribKeys = [];\n  var attribValues = [];\n  while (csIter.hasNext()) {\n    var csOp = csIter.next();\n    if (csOp.opcode == '=') {\n      if (csOp.attribs) {\n        attribKeys.length = 0;\n        attribValues.length = 0;\n        exports.eachAttribNumber(csOp.attribs, function (n) {\n          attribKeys.push(pool.getAttribKey(n));\n          attribValues.push(pool.getAttribValue(n));\n        });\n        var undoBackToAttribs = cachedStrFunc(function (attribs) {\n          var backAttribs = [];\n          for (var i = 0; i < attribKeys.length; i++) {\n            var appliedKey = attribKeys[i];\n            var appliedValue = attribValues[i];\n            var oldValue = exports.attribsAttributeValue(attribs, appliedKey, pool);\n            if (appliedValue != oldValue) {\n              backAttribs.push([appliedKey, oldValue]);\n            }\n          }\n          return exports.makeAttribsString('=', backAttribs, pool);\n        });\n        consumeAttribRuns(csOp.chars, function (len, attribs, endsLine) {\n          builder.keep(len, endsLine ? 1 : 0, undoBackToAttribs(attribs));\n        });\n      } else {\n        skip(csOp.chars, csOp.lines);\n        builder.keep(csOp.chars, csOp.lines);\n      }\n    } else if (csOp.opcode == '+') {\n      builder.remove(csOp.chars, csOp.lines);\n    } else if (csOp.opcode == '-') {\n      var textBank = nextText(csOp.chars);\n      var textBankIndex = 0;\n      consumeAttribRuns(csOp.chars, function (len, attribs, endsLine) {\n        builder.insert(textBank.substr(textBankIndex, len), attribs);\n        textBankIndex += len;\n      });\n    }\n  }\n\n  return exports.checkRep(builder.toString());\n};\n\n// %CLIENT FILE ENDS HERE%\nexports.follow = function (cs1, cs2, reverseInsertOrder, pool) {\n  var unpacked1 = exports.unpack(cs1);\n  var unpacked2 = exports.unpack(cs2);\n  var len1 = unpacked1.oldLen;\n  var len2 = unpacked2.oldLen;\n  exports.assert(len1 == len2, \"mismatched follow - cannot transform cs1 on top of cs2\");\n  var chars1 = exports.stringIterator(unpacked1.charBank);\n  var chars2 = exports.stringIterator(unpacked2.charBank);\n\n  var oldLen = unpacked1.newLen;\n  var oldPos = 0;\n  var newLen = 0;\n\n  var hasInsertFirst = exports.attributeTester(['insertorder', 'first'], pool);\n\n  var newOps = exports.applyZip(unpacked1.ops, 0, unpacked2.ops, 0, function (op1, op2, opOut) {\n    if (op1.opcode == '+' || op2.opcode == '+') {\n      var whichToDo;\n      if (op2.opcode != '+') {\n        whichToDo = 1;\n      } else if (op1.opcode != '+') {\n        whichToDo = 2;\n      } else {\n        // both +\n        var firstChar1 = chars1.peek(1);\n        var firstChar2 = chars2.peek(1);\n        var insertFirst1 = hasInsertFirst(op1.attribs);\n        var insertFirst2 = hasInsertFirst(op2.attribs);\n        if (insertFirst1 && !insertFirst2) {\n          whichToDo = 1;\n        } else if (insertFirst2 && !insertFirst1) {\n          whichToDo = 2;\n        }\n        // insert string that doesn't start with a newline first so as not to break up lines\n        else if (firstChar1 == '\\n' && firstChar2 != '\\n') {\n          whichToDo = 2;\n        } else if (firstChar1 != '\\n' && firstChar2 == '\\n') {\n          whichToDo = 1;\n        }\n        // break symmetry:\n        else if (reverseInsertOrder) {\n          whichToDo = 2;\n        } else {\n          whichToDo = 1;\n        }\n      }\n      if (whichToDo == 1) {\n        chars1.skip(op1.chars);\n        opOut.opcode = '=';\n        opOut.lines = op1.lines;\n        opOut.chars = op1.chars;\n        opOut.attribs = '';\n        op1.opcode = '';\n      } else {\n        // whichToDo == 2\n        chars2.skip(op2.chars);\n        exports.copyOp(op2, opOut);\n        op2.opcode = '';\n      }\n    } else if (op1.opcode == '-') {\n      if (!op2.opcode) {\n        op1.opcode = '';\n      } else {\n        if (op1.chars <= op2.chars) {\n          op2.chars -= op1.chars;\n          op2.lines -= op1.lines;\n          op1.opcode = '';\n          if (!op2.chars) {\n            op2.opcode = '';\n          }\n        } else {\n          op1.chars -= op2.chars;\n          op1.lines -= op2.lines;\n          op2.opcode = '';\n        }\n      }\n    } else if (op2.opcode == '-') {\n      exports.copyOp(op2, opOut);\n      if (!op1.opcode) {\n        op2.opcode = '';\n      } else if (op2.chars <= op1.chars) {\n        // delete part or all of a keep\n        op1.chars -= op2.chars;\n        op1.lines -= op2.lines;\n        op2.opcode = '';\n        if (!op1.chars) {\n          op1.opcode = '';\n        }\n      } else {\n        // delete all of a keep, and keep going\n        opOut.lines = op1.lines;\n        opOut.chars = op1.chars;\n        op2.lines -= op1.lines;\n        op2.chars -= op1.chars;\n        op1.opcode = '';\n      }\n    } else if (!op1.opcode) {\n      exports.copyOp(op2, opOut);\n      op2.opcode = '';\n    } else if (!op2.opcode) {\n      // @NOTE: Critical bugfix for EPL issue #1625. We do not copy op1 here\n      // in order to prevent attributes from leaking into result changesets.\n      // exports.copyOp(op1, opOut);\n      op1.opcode = '';\n    } else {\n      // both keeps\n      opOut.opcode = '=';\n      opOut.attribs = exports.followAttributes(op1.attribs, op2.attribs, pool);\n      if (op1.chars <= op2.chars) {\n        opOut.chars = op1.chars;\n        opOut.lines = op1.lines;\n        op2.chars -= op1.chars;\n        op2.lines -= op1.lines;\n        op1.opcode = '';\n        if (!op2.chars) {\n          op2.opcode = '';\n        }\n      } else {\n        opOut.chars = op2.chars;\n        opOut.lines = op2.lines;\n        op1.chars -= op2.chars;\n        op1.lines -= op2.lines;\n        op2.opcode = '';\n      }\n    }\n    switch (opOut.opcode) {\n    case '=':\n      oldPos += opOut.chars;\n      newLen += opOut.chars;\n      break;\n    case '-':\n      oldPos += opOut.chars;\n      break;\n    case '+':\n      newLen += opOut.chars;\n      break;\n    }\n  });\n  newLen += oldLen - oldPos;\n\n  return exports.pack(oldLen, newLen, newOps, unpacked2.charBank);\n};\n\nexports.followAttributes = function (att1, att2, pool) {\n  // The merge of two sets of attribute changes to the same text\n  // takes the lexically-earlier value if there are two values\n  // for the same key.  Otherwise, all key/value changes from\n  // both attribute sets are taken.  This operation is the \"follow\",\n  // so a set of changes is produced that can be applied to att1\n  // to produce the merged set.\n  if ((!att2) || (!pool)) return '';\n  if (!att1) return att2;\n  var atts = [];\n  att2.replace(/\\*([0-9a-z]+)/g, function (_, a) {\n    atts.push(pool.getAttrib(exports.parseNum(a)));\n    return '';\n  });\n  att1.replace(/\\*([0-9a-z]+)/g, function (_, a) {\n    var pair1 = pool.getAttrib(exports.parseNum(a));\n    for (var i = 0; i < atts.length; i++) {\n      var pair2 = atts[i];\n      if (pair1[0] == pair2[0]) {\n        if (pair1[1] <= pair2[1]) {\n          // winner of merge is pair1, delete this attribute\n          atts.splice(i, 1);\n        }\n        break;\n      }\n    }\n    return '';\n  });\n  // we've only removed attributes, so they're already sorted\n  var buf = exports.stringAssembler();\n  for (var i = 0; i < atts.length; i++) {\n    buf.append('*');\n    buf.append(exports.numToString(pool.putAttrib(atts[i])));\n  }\n  return buf.toString();\n};\n\nexports.composeWithDeletions = function (cs1, cs2, pool) {\n  var unpacked1 = exports.unpack(cs1);\n  var unpacked2 = exports.unpack(cs2);\n  var len1 = unpacked1.oldLen;\n  var len2 = unpacked1.newLen;\n  exports.assert(len2 == unpacked2.oldLen, \"mismatched composition of two changesets\");\n  var len3 = unpacked2.newLen;\n  var bankIter1 = exports.stringIterator(unpacked1.charBank);\n  var bankIter2 = exports.stringIterator(unpacked2.charBank);\n  var bankAssem = exports.stringAssembler();\n\n  var newOps = exports.applyZip(unpacked1.ops, 0, unpacked2.ops, 0, function (op1, op2, opOut) {\n    var op1code = op1.opcode;\n    var op2code = op2.opcode;\n    if (op1code == '+' && op2code == '-') {\n      bankIter1.skip(Math.min(op1.chars, op2.chars));\n    }\n    exports._slicerZipperFuncWithDeletions(op1, op2, opOut, pool);\n    if (opOut.opcode == '+') {\n      if (op2code == '+') {\n        bankAssem.append(bankIter2.take(opOut.chars));\n      } else {\n        bankAssem.append(bankIter1.take(opOut.chars));\n      }\n    }\n  });\n\n  return exports.pack(len1, len3, newOps, bankAssem.toString());\n};\n\n// This function is 95% like _slicerZipperFunc, we just changed two lines to ensure it merges the attribs of deletions properly. \n// This is necassary for correct paddiff. But to ensure these changes doesn't affect anything else, we've created a seperate function only used for paddiffs\nexports._slicerZipperFuncWithDeletions= function (attOp, csOp, opOut, pool) {\n  // attOp is the op from the sequence that is being operated on, either an\n  // attribution string or the earlier of two exportss being composed.\n  // pool can be null if definitely not needed.\n  //print(csOp.toSource()+\" \"+attOp.toSource()+\" \"+opOut.toSource());\n  if (attOp.opcode == '-') {\n    exports.copyOp(attOp, opOut);\n    attOp.opcode = '';\n  } else if (!attOp.opcode) {\n    exports.copyOp(csOp, opOut);\n    csOp.opcode = '';\n  } else {\n    switch (csOp.opcode) {\n    case '-':\n      {\n        if (csOp.chars <= attOp.chars) {\n          // delete or delete part\n          if (attOp.opcode == '=') {\n            opOut.opcode = '-';\n            opOut.chars = csOp.chars;\n            opOut.lines = csOp.lines;\n            opOut.attribs = csOp.attribs; //changed by yammer\n          }\n          attOp.chars -= csOp.chars;\n          attOp.lines -= csOp.lines;\n          csOp.opcode = '';\n          if (!attOp.chars) {\n            attOp.opcode = '';\n          }\n        } else {\n          // delete and keep going\n          if (attOp.opcode == '=') {\n            opOut.opcode = '-';\n            opOut.chars = attOp.chars;\n            opOut.lines = attOp.lines;\n            opOut.attribs = csOp.attribs; //changed by yammer\n          }\n          csOp.chars -= attOp.chars;\n          csOp.lines -= attOp.lines;\n          attOp.opcode = '';\n        }\n        break;\n      }\n    case '+':\n      {\n        // insert\n        exports.copyOp(csOp, opOut);\n        csOp.opcode = '';\n        break;\n      }\n    case '=':\n      {\n        if (csOp.chars <= attOp.chars) {\n          // keep or keep part\n          opOut.opcode = attOp.opcode;\n          opOut.chars = csOp.chars;\n          opOut.lines = csOp.lines;\n          opOut.attribs = exports.composeAttributes(attOp.attribs, csOp.attribs, attOp.opcode == '=', pool);\n          csOp.opcode = '';\n          attOp.chars -= csOp.chars;\n          attOp.lines -= csOp.lines;\n          if (!attOp.chars) {\n            attOp.opcode = '';\n          }\n        } else {\n          // keep and keep going\n          opOut.opcode = attOp.opcode;\n          opOut.chars = attOp.chars;\n          opOut.lines = attOp.lines;\n          opOut.attribs = exports.composeAttributes(attOp.attribs, csOp.attribs, attOp.opcode == '=', pool);\n          attOp.opcode = '';\n          csOp.chars -= attOp.chars;\n          csOp.lines -= attOp.lines;\n        }\n        break;\n      }\n    case '':\n      {\n        exports.copyOp(attOp, opOut);\n        attOp.opcode = '';\n        break;\n      }\n    }\n  }\n};\n\n}\n, \"ep_etherpad-lite/static/js/ChangesetUtils.js\": function (require, exports, module) {\n/**\n * This module contains several helper Functions to build Changesets\n * based on a SkipList\n */\n\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexports.buildRemoveRange = function(rep, builder, start, end)\n{\n  var startLineOffset = rep.lines.offsetOfIndex(start[0]);\n  var endLineOffset = rep.lines.offsetOfIndex(end[0]);\n\n  if (end[0] > start[0])\n  {\n    builder.remove(endLineOffset - startLineOffset - start[1], end[0] - start[0]);\n    builder.remove(end[1]);\n  }\n  else\n  {\n    builder.remove(end[1] - start[1]);\n  }\n}\n\nexports.buildKeepRange = function(rep, builder, start, end, attribs, pool)\n{\n  var startLineOffset = rep.lines.offsetOfIndex(start[0]);\n  var endLineOffset = rep.lines.offsetOfIndex(end[0]);\n\n  if (end[0] > start[0])\n  {\n    builder.keep(endLineOffset - startLineOffset - start[1], end[0] - start[0], attribs, pool);\n    builder.keep(end[1], 0, attribs, pool);\n  }\n  else\n  {\n    builder.keep(end[1] - start[1], 0, attribs, pool);\n  }\n}\n\nexports.buildKeepToStartOfRange = function(rep, builder, start)\n{\n  var startLineOffset = rep.lines.offsetOfIndex(start[0]);\n\n  builder.keep(startLineOffset, start[0]);\n  builder.keep(start[1]);\n}\n\n\n}\n, \"ep_etherpad-lite/static/js/skiplist.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code. \n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar Ace2Common = require('./ace2_common'),\n  _ = require('./underscore');\n\nvar noop = Ace2Common.noop;\n\nfunction SkipList()\n{\n  var PROFILER = window.PROFILER;\n  if (!PROFILER)\n  {\n    PROFILER = function()\n    {\n      return {\n        start: noop,\n        mark: noop,\n        literal: noop,\n        end: noop,\n        cancel: noop\n      };\n    };\n  }\n\n  // if there are N elements in the skiplist, \"start\" is element -1 and \"end\" is element N\n  var start = {\n    key: null,\n    levels: 1,\n    upPtrs: [null],\n    downPtrs: [null],\n    downSkips: [1],\n    downSkipWidths: [0]\n  };\n  var end = {\n    key: null,\n    levels: 1,\n    upPtrs: [null],\n    downPtrs: [null],\n    downSkips: [null],\n    downSkipWidths: [null]\n  };\n  var numNodes = 0;\n  var totalWidth = 0;\n  var keyToNodeMap = {};\n  start.downPtrs[0] = end;\n  end.upPtrs[0] = start;\n  // a \"point\" object at location x allows modifications immediately after the first\n  // x elements of the skiplist, such as multiple inserts or deletes.\n  // After an insert or delete using point P, the point is still valid and points\n  // to the same index in the skiplist.  Other operations with other points invalidate\n  // this point.\n\n\n  function _getPoint(targetLoc)\n  {\n    var numLevels = start.levels;\n    var lvl = numLevels - 1;\n    var i = -1,\n        ws = 0;\n    var nodes = new Array(numLevels);\n    var idxs = new Array(numLevels);\n    var widthSkips = new Array(numLevels);\n    nodes[lvl] = start;\n    idxs[lvl] = -1;\n    widthSkips[lvl] = 0;\n    while (lvl >= 0)\n    {\n      var n = nodes[lvl];\n      while (n.downPtrs[lvl] && (i + n.downSkips[lvl] < targetLoc))\n      {\n        i += n.downSkips[lvl];\n        ws += n.downSkipWidths[lvl];\n        n = n.downPtrs[lvl];\n      }\n      nodes[lvl] = n;\n      idxs[lvl] = i;\n      widthSkips[lvl] = ws;\n      lvl--;\n      if (lvl >= 0)\n      {\n        nodes[lvl] = n;\n      }\n    }\n    return {\n      nodes: nodes,\n      idxs: idxs,\n      loc: targetLoc,\n      widthSkips: widthSkips,\n      toString: function()\n      {\n        return \"getPoint(\" + targetLoc + \")\";\n      }\n    };\n  }\n\n  function _getNodeAtOffset(targetOffset)\n  {\n    var i = 0;\n    var n = start;\n    var lvl = start.levels - 1;\n    while (lvl >= 0 && n.downPtrs[lvl])\n    {\n      while (n.downPtrs[lvl] && (i + n.downSkipWidths[lvl] <= targetOffset))\n      {\n        i += n.downSkipWidths[lvl];\n        n = n.downPtrs[lvl];\n      }\n      lvl--;\n    }\n    if (n === start) return (start.downPtrs[0] || null);\n    else if (n === end) return (targetOffset == totalWidth ? (end.upPtrs[0] || null) : null);\n    return n;\n  }\n\n  function _entryWidth(e)\n  {\n    return (e && e.width) || 0;\n  }\n\n  function _insertKeyAtPoint(point, newKey, entry)\n  {\n    var p = PROFILER(\"insertKey\", false);\n    var newNode = {\n      key: newKey,\n      levels: 0,\n      upPtrs: [],\n      downPtrs: [],\n      downSkips: [],\n      downSkipWidths: []\n    };\n    p.mark(\"donealloc\");\n    var pNodes = point.nodes;\n    var pIdxs = point.idxs;\n    var pLoc = point.loc;\n    var widthLoc = point.widthSkips[0] + point.nodes[0].downSkipWidths[0];\n    var newWidth = _entryWidth(entry);\n    p.mark(\"loop1\");\n    \n    // The new node will have at least level 1\n    // With a proability of 0.01^(n-1) the nodes level will be >= n\n    while (newNode.levels == 0 || Math.random() < 0.01)\n    {\n      var lvl = newNode.levels;\n      newNode.levels++;\n      if (lvl == pNodes.length)\n      {\n        // assume we have just passed the end of point.nodes, and reached one level greater\n        // than the skiplist currently supports\n        pNodes[lvl] = start;\n        pIdxs[lvl] = -1;\n        start.levels++;\n        end.levels++;\n        start.downPtrs[lvl] = end;\n        end.upPtrs[lvl] = start;\n        start.downSkips[lvl] = numNodes + 1;\n        start.downSkipWidths[lvl] = totalWidth;\n        point.widthSkips[lvl] = 0;\n      }\n      var me = newNode;\n      var up = pNodes[lvl];\n      var down = up.downPtrs[lvl];\n      var skip1 = pLoc - pIdxs[lvl];\n      var skip2 = up.downSkips[lvl] + 1 - skip1;\n      up.downSkips[lvl] = skip1;\n      up.downPtrs[lvl] = me;\n      me.downSkips[lvl] = skip2;\n      me.upPtrs[lvl] = up;\n      me.downPtrs[lvl] = down;\n      down.upPtrs[lvl] = me;\n      var widthSkip1 = widthLoc - point.widthSkips[lvl];\n      var widthSkip2 = up.downSkipWidths[lvl] + newWidth - widthSkip1;\n      up.downSkipWidths[lvl] = widthSkip1;\n      me.downSkipWidths[lvl] = widthSkip2;\n    }\n    p.mark(\"loop2\");\n    p.literal(pNodes.length, \"PNL\");\n    for (var lvl = newNode.levels; lvl < pNodes.length; lvl++)\n    {\n      var up = pNodes[lvl];\n      up.downSkips[lvl]++;\n      up.downSkipWidths[lvl] += newWidth;\n    }\n    p.mark(\"map\");\n    keyToNodeMap['$KEY$' + newKey] = newNode;\n    numNodes++;\n    totalWidth += newWidth;\n    p.end();\n  }\n\n  function _getNodeAtPoint(point)\n  {\n    return point.nodes[0].downPtrs[0];\n  }\n\n  function _incrementPoint(point)\n  {\n    point.loc++;\n    for (var i = 0; i < point.nodes.length; i++)\n    {\n      if (point.idxs[i] + point.nodes[i].downSkips[i] < point.loc)\n      {\n        point.idxs[i] += point.nodes[i].downSkips[i];\n        point.widthSkips[i] += point.nodes[i].downSkipWidths[i];\n        point.nodes[i] = point.nodes[i].downPtrs[i];\n      }\n    }\n  }\n\n  function _deleteKeyAtPoint(point)\n  {\n    var elem = point.nodes[0].downPtrs[0];\n    var elemWidth = _entryWidth(elem.entry);\n    for (var i = 0; i < point.nodes.length; i++)\n    {\n      if (i < elem.levels)\n      {\n        var up = elem.upPtrs[i];\n        var down = elem.downPtrs[i];\n        var totalSkip = up.downSkips[i] + elem.downSkips[i] - 1;\n        up.downPtrs[i] = down;\n        down.upPtrs[i] = up;\n        up.downSkips[i] = totalSkip;\n        var totalWidthSkip = up.downSkipWidths[i] + elem.downSkipWidths[i] - elemWidth;\n        up.downSkipWidths[i] = totalWidthSkip;\n      }\n      else\n      {\n        var up = point.nodes[i];\n        var down = up.downPtrs[i];\n        up.downSkips[i]--;\n        up.downSkipWidths[i] -= elemWidth;\n      }\n    }\n    delete keyToNodeMap['$KEY$' + elem.key];\n    numNodes--;\n    totalWidth -= elemWidth;\n  }\n\n  function _propagateWidthChange(node)\n  {\n    var oldWidth = node.downSkipWidths[0];\n    var newWidth = _entryWidth(node.entry);\n    var widthChange = newWidth - oldWidth;\n    var n = node;\n    var lvl = 0;\n    while (lvl < n.levels)\n    {\n      n.downSkipWidths[lvl] += widthChange;\n      lvl++;\n      while (lvl >= n.levels && n.upPtrs[lvl - 1])\n      {\n        n = n.upPtrs[lvl - 1];\n      }\n    }\n    totalWidth += widthChange;\n  }\n\n  function _getNodeIndex(node, byWidth)\n  {\n    var dist = (byWidth ? 0 : -1);\n    var n = node;\n    while (n !== start)\n    {\n      var lvl = n.levels - 1;\n      n = n.upPtrs[lvl];\n      if (byWidth) dist += n.downSkipWidths[lvl];\n      else dist += n.downSkips[lvl];\n    }\n    return dist;\n  }\n\n  function _getNodeByKey(key)\n  {\n    return keyToNodeMap['$KEY$' + key];\n  }\n\n  // Returns index of first entry such that entryFunc(entry) is truthy,\n  // or length() if no such entry.  Assumes all falsy entries come before\n  // all truthy entries.\n\n\n  function _search(entryFunc)\n  {\n    var low = start;\n    var lvl = start.levels - 1;\n    var lowIndex = -1;\n\n    function f(node)\n    {\n      if (node === start) return false;\n      else if (node === end) return true;\n      else return entryFunc(node.entry);\n    }\n    while (lvl >= 0)\n    {\n      var nextLow = low.downPtrs[lvl];\n      while (!f(nextLow))\n      {\n        lowIndex += low.downSkips[lvl];\n        low = nextLow;\n        nextLow = low.downPtrs[lvl];\n      }\n      lvl--;\n    }\n    return lowIndex + 1;\n  }\n\n/*\nThe skip-list contains \"entries\", JavaScript objects that each must have a unique \"key\" property\nthat is a string.\n  */\n  var self = this;\n  _.extend(this, {\n    length: function()\n    {\n      return numNodes;\n    },\n    atIndex: function(i)\n    {\n      if (i < 0) console.warn(\"atIndex(\" + i + \")\");\n      if (i >= numNodes) console.warn(\"atIndex(\" + i + \">=\" + numNodes + \")\");\n      return _getNodeAtPoint(_getPoint(i)).entry;\n    },\n    // differs from Array.splice() in that new elements are in an array, not varargs\n    splice: function(start, deleteCount, newEntryArray)\n    {\n      if (start < 0) console.warn(\"splice(\" + start + \", ...)\");\n      if (start + deleteCount > numNodes)\n      {\n        console.warn(\"splice(\" + start + \", \" + deleteCount + \", ...), N=\" + numNodes);\n        console.warn(\"%s %s %s\", typeof start, typeof deleteCount, typeof numNodes);\n        console.trace();\n      }\n\n      if (!newEntryArray) newEntryArray = [];\n      var pt = _getPoint(start);\n      for (var i = 0; i < deleteCount; i++)\n      {\n        _deleteKeyAtPoint(pt);\n      }\n      for (var i = (newEntryArray.length - 1); i >= 0; i--)\n      {\n        var entry = newEntryArray[i];\n        _insertKeyAtPoint(pt, entry.key, entry);\n        var node = _getNodeByKey(entry.key);\n        node.entry = entry;\n      }\n    },\n    next: function(entry)\n    {\n      return _getNodeByKey(entry.key).downPtrs[0].entry || null;\n    },\n    prev: function(entry)\n    {\n      return _getNodeByKey(entry.key).upPtrs[0].entry || null;\n    },\n    push: function(entry)\n    {\n      self.splice(numNodes, 0, [entry]);\n    },\n    slice: function(start, end)\n    {\n      // act like Array.slice()\n      if (start === undefined) start = 0;\n      else if (start < 0) start += numNodes;\n      if (end === undefined) end = numNodes;\n      else if (end < 0) end += numNodes;\n\n      if (start < 0) start = 0;\n      if (start > numNodes) start = numNodes;\n      if (end < 0) end = 0;\n      if (end > numNodes) end = numNodes;\n\n      dmesg(String([start, end, numNodes]));\n      if (end <= start) return [];\n      var n = self.atIndex(start);\n      var array = [n];\n      for (var i = 1; i < (end - start); i++)\n      {\n        n = self.next(n);\n        array.push(n);\n      }\n      return array;\n    },\n    atKey: function(key)\n    {\n      return _getNodeByKey(key).entry;\n    },\n    indexOfKey: function(key)\n    {\n      return _getNodeIndex(_getNodeByKey(key));\n    },\n    indexOfEntry: function(entry)\n    {\n      return self.indexOfKey(entry.key);\n    },\n    containsKey: function(key)\n    {\n      return !!(_getNodeByKey(key));\n    },\n    // gets the last entry starting at or before the offset\n    atOffset: function(offset)\n    {\n      return _getNodeAtOffset(offset).entry;\n    },\n    keyAtOffset: function(offset)\n    {\n      return self.atOffset(offset).key;\n    },\n    offsetOfKey: function(key)\n    {\n      return _getNodeIndex(_getNodeByKey(key), true);\n    },\n    offsetOfEntry: function(entry)\n    {\n      return self.offsetOfKey(entry.key);\n    },\n    setEntryWidth: function(entry, width)\n    {\n      entry.width = width;\n      _propagateWidthChange(_getNodeByKey(entry.key));\n    },\n    totalWidth: function()\n    {\n      return totalWidth;\n    },\n    offsetOfIndex: function(i)\n    {\n      if (i < 0) return 0;\n      if (i >= numNodes) return totalWidth;\n      return self.offsetOfEntry(self.atIndex(i));\n    },\n    indexOfOffset: function(offset)\n    {\n      if (offset <= 0) return 0;\n      if (offset >= totalWidth) return numNodes;\n      return self.indexOfEntry(self.atOffset(offset));\n    },\n    search: function(entryFunc)\n    {\n      return _search(entryFunc);\n    },\n    //debugToString: _debugToString,\n    debugGetPoint: _getPoint,\n    debugDepth: function()\n    {\n      return start.levels;\n    }\n  });\n}\n\nmodule.exports = SkipList;\n\n}\n, \"ep_etherpad-lite/static/js/cssmanager.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code.\n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nfunction makeCSSManager(emptyStylesheetTitle, doc)\n{\n  if (doc === true)\n  {\n    doc = 'parent';\n  } else if (!doc) {\n    doc = 'inner';\n  }\n\n  function getSheetByTitle(title)\n  {\n    if (doc === 'parent')\n    {\n      win = window.parent.parent;\n    }\n    else if (doc === 'inner') {\n      win = window;\n    }\n    else if (doc === 'outer') {\n      win = window.parent;\n    }\n    else {\n        throw \"Unknown dynamic style container\";\n    }\n    var allSheets = win.document.styleSheets;\n\n    for (var i = 0; i < allSheets.length; i++)\n    {\n      var s = allSheets[i];\n      if (s.title == title)\n      {\n        return s;\n      }\n    }\n    return null;\n  }\n\n  var browserSheet = getSheetByTitle(emptyStylesheetTitle);\n\n  function browserRules()\n  {\n    return (browserSheet.cssRules || browserSheet.rules);\n  }\n\n  function browserDeleteRule(i)\n  {\n    if (browserSheet.deleteRule) browserSheet.deleteRule(i);\n    else browserSheet.removeRule(i);\n  }\n\n  function browserInsertRule(i, selector)\n  {\n    if (browserSheet.insertRule) browserSheet.insertRule(selector + ' {}', i);\n    else browserSheet.addRule(selector, null, i);\n  }\n  var selectorList = [];\n\n  function indexOfSelector(selector)\n  {\n    for (var i = 0; i < selectorList.length; i++)\n    {\n      if (selectorList[i] == selector)\n      {\n        return i;\n      }\n    }\n    return -1;\n  }\n\n  function selectorStyle(selector)\n  {\n    var i = indexOfSelector(selector);\n    if (i < 0)\n    {\n      // add selector\n      browserInsertRule(0, selector);\n      selectorList.splice(0, 0, selector);\n      i = 0;\n    }\n    return browserRules().item(i).style;\n  }\n\n  function removeSelectorStyle(selector)\n  {\n    var i = indexOfSelector(selector);\n    if (i >= 0)\n    {\n      browserDeleteRule(i);\n      selectorList.splice(i, 1);\n    }\n  }\n\n  return {\n    selectorStyle: selectorStyle,\n    removeSelectorStyle: removeSelectorStyle,\n    info: function()\n    {\n      return selectorList.length + \":\" + browserRules().length;\n    }\n  };\n}\n\nexports.makeCSSManager = makeCSSManager;\n\n}\n, \"ep_etherpad-lite/static/js/colorutils.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code. \n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n// DO NOT EDIT THIS FILE, edit infrastructure/ace/www/colorutils.js\n// THIS FILE IS ALSO SERVED AS CLIENT-SIDE JS\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar colorutils = {};\n\n// Check that a given value is a css hex color value, e.g.\n// \"#ffffff\" or \"#fff\"\ncolorutils.isCssHex = function(cssColor)\n{\n  return /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(cssColor);\n}\n\n// \"#ffffff\" or \"#fff\" or \"ffffff\" or \"fff\" to [1.0, 1.0, 1.0]\ncolorutils.css2triple = function(cssColor)\n{\n  var sixHex = colorutils.css2sixhex(cssColor);\n\n  function hexToFloat(hh)\n  {\n    return Number(\"0x\" + hh) / 255;\n  }\n  return [hexToFloat(sixHex.substr(0, 2)), hexToFloat(sixHex.substr(2, 2)), hexToFloat(sixHex.substr(4, 2))];\n}\n\n// \"#ffffff\" or \"#fff\" or \"ffffff\" or \"fff\" to \"ffffff\"\ncolorutils.css2sixhex = function(cssColor)\n{\n  var h = /[0-9a-fA-F]+/.exec(cssColor)[0];\n  if (h.length != 6)\n  {\n    var a = h.charAt(0);\n    var b = h.charAt(1);\n    var c = h.charAt(2);\n    h = a + a + b + b + c + c;\n  }\n  return h;\n}\n\n// [1.0, 1.0, 1.0] -> \"#ffffff\"\ncolorutils.triple2css = function(triple)\n{\n  function floatToHex(n)\n  {\n    var n2 = colorutils.clamp(Math.round(n * 255), 0, 255);\n    return (\"0\" + n2.toString(16)).slice(-2);\n  }\n  return \"#\" + floatToHex(triple[0]) + floatToHex(triple[1]) + floatToHex(triple[2]);\n}\n\n\ncolorutils.clamp = function(v, bot, top)\n{\n  return v < bot ? bot : (v > top ? top : v);\n};\ncolorutils.min3 = function(a, b, c)\n{\n  return (a < b) ? (a < c ? a : c) : (b < c ? b : c);\n};\ncolorutils.max3 = function(a, b, c)\n{\n  return (a > b) ? (a > c ? a : c) : (b > c ? b : c);\n};\ncolorutils.colorMin = function(c)\n{\n  return colorutils.min3(c[0], c[1], c[2]);\n};\ncolorutils.colorMax = function(c)\n{\n  return colorutils.max3(c[0], c[1], c[2]);\n};\ncolorutils.scale = function(v, bot, top)\n{\n  return colorutils.clamp(bot + v * (top - bot), 0, 1);\n};\ncolorutils.unscale = function(v, bot, top)\n{\n  return colorutils.clamp((v - bot) / (top - bot), 0, 1);\n};\n\ncolorutils.scaleColor = function(c, bot, top)\n{\n  return [colorutils.scale(c[0], bot, top), colorutils.scale(c[1], bot, top), colorutils.scale(c[2], bot, top)];\n}\n\ncolorutils.unscaleColor = function(c, bot, top)\n{\n  return [colorutils.unscale(c[0], bot, top), colorutils.unscale(c[1], bot, top), colorutils.unscale(c[2], bot, top)];\n}\n\ncolorutils.luminosity = function(c)\n{\n  // rule of thumb for RGB brightness; 1.0 is white\n  return c[0] * 0.30 + c[1] * 0.59 + c[2] * 0.11;\n}\n\ncolorutils.saturate = function(c)\n{\n  var min = colorutils.colorMin(c);\n  var max = colorutils.colorMax(c);\n  if (max - min <= 0) return [1.0, 1.0, 1.0];\n  return colorutils.unscaleColor(c, min, max);\n}\n\ncolorutils.blend = function(c1, c2, t)\n{\n  return [colorutils.scale(t, c1[0], c2[0]), colorutils.scale(t, c1[1], c2[1]), colorutils.scale(t, c1[2], c2[2])];\n}\n\ncolorutils.invert = function(c)\n{\n  return [1 - c[0], 1 - c[1], 1- c[2]];\n}\n\ncolorutils.complementary = function(c)\n{\n  var inv = colorutils.invert(c);\n  return [\n    (inv[0] >= c[0]) ? Math.min(inv[0] * 1.30, 1) : (c[0] * 0.30),\n    (inv[1] >= c[1]) ? Math.min(inv[1] * 1.59, 1) : (c[1] * 0.59),\n    (inv[2] >= c[2]) ? Math.min(inv[2] * 1.11, 1) : (c[2] * 0.11)\n  ];\n}\n\nexports.colorutils = colorutils;\n\n}\n, \"ep_etherpad-lite/static/js/undomodule.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code. \n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar Changeset = require('./Changeset');\nvar _ = require('./underscore');\n\nvar undoModule = (function()\n{\n  var stack = (function()\n  {\n    var stackElements = [];\n    // two types of stackElements:\n    // 1) { elementType: UNDOABLE_EVENT, eventType: \"anything\", [backset: <changeset>,]\n    //      [selStart: <char number>, selEnd: <char number>, selFocusAtStart: <boolean>] }\n    // 2) { elementType: EXTERNAL_CHANGE, changeset: <changeset> }\n    // invariant: no two consecutive EXTERNAL_CHANGEs\n    var numUndoableEvents = 0;\n\n    var UNDOABLE_EVENT = \"undoableEvent\";\n    var EXTERNAL_CHANGE = \"externalChange\";\n\n    function clearStack()\n    {\n      stackElements.length = 0;\n      stackElements.push(\n      {\n        elementType: UNDOABLE_EVENT,\n        eventType: \"bottom\"\n      });\n      numUndoableEvents = 1;\n    }\n    clearStack();\n\n    function pushEvent(event)\n    {\n      var e = _.extend(\n      {}, event);\n      e.elementType = UNDOABLE_EVENT;\n      stackElements.push(e);\n      numUndoableEvents++;\n      //dmesg(\"pushEvent backset: \"+event.backset);\n    }\n\n    function pushExternalChange(cs)\n    {\n      var idx = stackElements.length - 1;\n      if (stackElements[idx].elementType == EXTERNAL_CHANGE)\n      {\n        stackElements[idx].changeset = Changeset.compose(stackElements[idx].changeset, cs, getAPool());\n      }\n      else\n      {\n        stackElements.push(\n        {\n          elementType: EXTERNAL_CHANGE,\n          changeset: cs\n        });\n      }\n    }\n\n    function _exposeEvent(nthFromTop)\n    {\n      // precond: 0 <= nthFromTop < numUndoableEvents\n      var targetIndex = stackElements.length - 1 - nthFromTop;\n      var idx = stackElements.length - 1;\n      while (idx > targetIndex || stackElements[idx].elementType == EXTERNAL_CHANGE)\n      {\n        if (stackElements[idx].elementType == EXTERNAL_CHANGE)\n        {\n          var ex = stackElements[idx];\n          var un = stackElements[idx - 1];\n          if (un.backset)\n          {\n            var excs = ex.changeset;\n            var unbs = un.backset;\n            un.backset = Changeset.follow(excs, un.backset, false, getAPool());\n            ex.changeset = Changeset.follow(unbs, ex.changeset, true, getAPool());\n            if ((typeof un.selStart) == \"number\")\n            {\n              var newSel = Changeset.characterRangeFollow(excs, un.selStart, un.selEnd);\n              un.selStart = newSel[0];\n              un.selEnd = newSel[1];\n              if (un.selStart == un.selEnd)\n              {\n                un.selFocusAtStart = false;\n              }\n            }\n          }\n          stackElements[idx - 1] = ex;\n          stackElements[idx] = un;\n          if (idx >= 2 && stackElements[idx - 2].elementType == EXTERNAL_CHANGE)\n          {\n            ex.changeset = Changeset.compose(stackElements[idx - 2].changeset, ex.changeset, getAPool());\n            stackElements.splice(idx - 2, 1);\n            idx--;\n          }\n        }\n        else\n        {\n          idx--;\n        }\n      }\n    }\n\n    function getNthFromTop(n)\n    {\n      // precond: 0 <= n < numEvents()\n      _exposeEvent(n);\n      return stackElements[stackElements.length - 1 - n];\n    }\n\n    function numEvents()\n    {\n      return numUndoableEvents;\n    }\n\n    function popEvent()\n    {\n      // precond: numEvents() > 0\n      _exposeEvent(0);\n      numUndoableEvents--;\n      return stackElements.pop();\n    }\n\n    return {\n      numEvents: numEvents,\n      popEvent: popEvent,\n      pushEvent: pushEvent,\n      pushExternalChange: pushExternalChange,\n      clearStack: clearStack,\n      getNthFromTop: getNthFromTop\n    };\n  })();\n\n  // invariant: stack always has at least one undoable event\n  var undoPtr = 0; // zero-index from top of stack, 0 == top\n\n  function clearHistory()\n  {\n    stack.clearStack();\n    undoPtr = 0;\n  }\n\n  function _charOccurrences(str, c)\n  {\n    var i = 0;\n    var count = 0;\n    while (i >= 0 && i < str.length)\n    {\n      i = str.indexOf(c, i);\n      if (i >= 0)\n      {\n        count++;\n        i++;\n      }\n    }\n    return count;\n  }\n\n  function _opcodeOccurrences(cs, opcode)\n  {\n    return _charOccurrences(Changeset.unpack(cs).ops, opcode);\n  }\n\n  function _mergeChangesets(cs1, cs2)\n  {\n    if (!cs1) return cs2;\n    if (!cs2) return cs1;\n\n    // Rough heuristic for whether changesets should be considered one action:\n    // each does exactly one insertion, no dels, and the composition does also; or\n    // each does exactly one deletion, no ins, and the composition does also.\n    // A little weird in that it won't merge \"make bold\" with \"insert char\"\n    // but will merge \"make bold and insert char\" with \"insert char\",\n    // though that isn't expected to come up.\n    var plusCount1 = _opcodeOccurrences(cs1, '+');\n    var plusCount2 = _opcodeOccurrences(cs2, '+');\n    var minusCount1 = _opcodeOccurrences(cs1, '-');\n    var minusCount2 = _opcodeOccurrences(cs2, '-');\n    if (plusCount1 == 1 && plusCount2 == 1 && minusCount1 == 0 && minusCount2 == 0)\n    {\n      var merge = Changeset.compose(cs1, cs2, getAPool());\n      var plusCount3 = _opcodeOccurrences(merge, '+');\n      var minusCount3 = _opcodeOccurrences(merge, '-');\n      if (plusCount3 == 1 && minusCount3 == 0)\n      {\n        return merge;\n      }\n    }\n    else if (plusCount1 == 0 && plusCount2 == 0 && minusCount1 == 1 && minusCount2 == 1)\n    {\n      var merge = Changeset.compose(cs1, cs2, getAPool());\n      var plusCount3 = _opcodeOccurrences(merge, '+');\n      var minusCount3 = _opcodeOccurrences(merge, '-');\n      if (plusCount3 == 0 && minusCount3 == 1)\n      {\n        return merge;\n      }\n    }\n    return null;\n  }\n\n  function reportEvent(event)\n  {\n    var topEvent = stack.getNthFromTop(0);\n\n    function applySelectionToTop()\n    {\n      if ((typeof event.selStart) == \"number\")\n      {\n        topEvent.selStart = event.selStart;\n        topEvent.selEnd = event.selEnd;\n        topEvent.selFocusAtStart = event.selFocusAtStart;\n      }\n    }\n\n    if ((!event.backset) || Changeset.isIdentity(event.backset))\n    {\n      applySelectionToTop();\n    }\n    else\n    {\n      var merged = false;\n      if (topEvent.eventType == event.eventType)\n      {\n        var merge = _mergeChangesets(event.backset, topEvent.backset);\n        if (merge)\n        {\n          topEvent.backset = merge;\n          //dmesg(\"reportEvent merge: \"+merge);\n          applySelectionToTop();\n          merged = true;\n        }\n      }\n      if (!merged)\n      {\n        stack.pushEvent(event);\n      }\n      undoPtr = 0;\n    }\n\n  }\n\n  function reportExternalChange(changeset)\n  {\n    if (changeset && !Changeset.isIdentity(changeset))\n    {\n      stack.pushExternalChange(changeset);\n    }\n  }\n\n  function _getSelectionInfo(event)\n  {\n    if ((typeof event.selStart) != \"number\")\n    {\n      return null;\n    }\n    else\n    {\n      return {\n        selStart: event.selStart,\n        selEnd: event.selEnd,\n        selFocusAtStart: event.selFocusAtStart\n      };\n    }\n  }\n\n  // For \"undo\" and \"redo\", the change event must be returned\n  // by eventFunc and NOT reported through the normal mechanism.\n  // \"eventFunc\" should take a changeset and an optional selection info object,\n  // or can be called with no arguments to mean that no undo is possible.\n  // \"eventFunc\" will be called exactly once.\n\n  function performUndo(eventFunc)\n  {\n    if (undoPtr < stack.numEvents() - 1)\n    {\n      var backsetEvent = stack.getNthFromTop(undoPtr);\n      var selectionEvent = stack.getNthFromTop(undoPtr + 1);\n      var undoEvent = eventFunc(backsetEvent.backset, _getSelectionInfo(selectionEvent));\n      stack.pushEvent(undoEvent);\n      undoPtr += 2;\n    }\n    else eventFunc();\n  }\n\n  function performRedo(eventFunc)\n  {\n    if (undoPtr >= 2)\n    {\n      var backsetEvent = stack.getNthFromTop(0);\n      var selectionEvent = stack.getNthFromTop(1);\n      eventFunc(backsetEvent.backset, _getSelectionInfo(selectionEvent));\n      stack.popEvent();\n      undoPtr -= 2;\n    }\n    else eventFunc();\n  }\n\n  function getAPool()\n  {\n    return undoModule.apool;\n  }\n\n  return {\n    clearHistory: clearHistory,\n    reportEvent: reportEvent,\n    reportExternalChange: reportExternalChange,\n    performUndo: performUndo,\n    performRedo: performRedo,\n    enabled: true,\n    apool: null\n  }; // apool is filled in by caller\n})();\n\nexports.undoModule = undoModule;\n\n}\n, \"unorm.js\": null\n, \"ep_etherpad-lite/static/js/contentcollector.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code. \n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n// THIS FILE IS ALSO AN APPJET MODULE: etherpad.collab.ace.contentcollector\n// %APPJET%: import(\"etherpad.collab.ace.easysync2.Changeset\");\n// %APPJET%: import(\"etherpad.admin.plugins\");\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar _MAX_LIST_LEVEL = 16;\n\nvar UNorm = require('unorm');\nvar Changeset = require('./Changeset');\nvar hooks = require('./pluginfw/hooks');\nvar _ = require('./underscore');\n\nfunction sanitizeUnicode(s)\n{\n  return UNorm.nfc(s);\n}\n\nfunction makeContentCollector(collectStyles, abrowser, apool, domInterface, className2Author)\n{\n  abrowser = abrowser || {};\n  // I don't like the above.\n\n  var dom = domInterface || {\n    isNodeText: function(n)\n    {\n      return (n.nodeType == 3);\n    },\n    nodeTagName: function(n)\n    {\n      return n.tagName;\n    },\n    nodeValue: function(n)\n    {\n      return n.nodeValue;\n    },\n    nodeNumChildren: function(n)\n    {\n      if(n.childNodes == null) return 0;\n      return n.childNodes.length;\n    },\n    nodeChild: function(n, i)\n    {\n      if(n.childNodes.item == null){\n        return n.childNodes[i];\n      }\n      return n.childNodes.item(i);\n    },\n    nodeProp: function(n, p)\n    {\n      return n[p];\n    },\n    nodeAttr: function(n, a)\n    {\n      if(n.getAttribute != null) return n.getAttribute(a);\n      if(n.attribs != null) return n.attribs[a];\n      return null;\n    },\n    optNodeInnerHTML: function(n)\n    {\n      return n.innerHTML;\n    }\n  };\n\n  var _blockElems = {\n    \"div\": 1,\n    \"p\": 1,\n    \"pre\": 1,\n    \"li\": 1\n  };\n\n  _.each(hooks.callAll('ccRegisterBlockElements'), function(element){\n    _blockElems[element] = 1;\n  });\n\n  function isBlockElement(n)\n  {\n    return !!_blockElems[(dom.nodeTagName(n) || \"\").toLowerCase()];\n  }\n\n  function textify(str)\n  {\n    return sanitizeUnicode(\n    str.replace(/\\n/g, '').replace(/[\\n\\r ]/g, ' ').replace(/\\xa0/g, ' ').replace(/\\t/g, '        '));\n  }\n\n  function getAssoc(node, name)\n  {\n    return dom.nodeProp(node, \"_magicdom_\" + name);\n  }\n\n  var lines = (function()\n  {\n    var textArray = [];\n    var attribsArray = [];\n    var attribsBuilder = null;\n    var op = Changeset.newOp('+');\n    var self = {\n      length: function()\n      {\n        return textArray.length;\n      },\n      atColumnZero: function()\n      {\n        return textArray[textArray.length - 1] === \"\";\n      },\n      startNew: function()\n      {\n        textArray.push(\"\");\n        self.flush(true);\n        attribsBuilder = Changeset.smartOpAssembler();\n      },\n      textOfLine: function(i)\n      {\n        return textArray[i];\n      },\n      appendText: function(txt, attrString)\n      {\n        textArray[textArray.length - 1] += txt;\n        //dmesg(txt+\" / \"+attrString);\n        op.attribs = attrString;\n        op.chars = txt.length;\n        attribsBuilder.append(op);\n      },\n      textLines: function()\n      {\n        return textArray.slice();\n      },\n      attribLines: function()\n      {\n        return attribsArray;\n      },\n      // call flush only when you're done\n      flush: function(withNewline)\n      {\n        if (attribsBuilder)\n        {\n          attribsArray.push(attribsBuilder.toString());\n          attribsBuilder = null;\n        }\n      }\n    };\n    self.startNew();\n    return self;\n  }());\n  var cc = {};\n\n  function _ensureColumnZero(state)\n  {\n    if (!lines.atColumnZero())\n    {\n      cc.startNewLine(state);\n    }\n  }\n  var selection, startPoint, endPoint;\n  var selStart = [-1, -1],\n      selEnd = [-1, -1];\n  function _isEmpty(node, state)\n  {\n    // consider clean blank lines pasted in IE to be empty\n    if (dom.nodeNumChildren(node) == 0) return true;\n    if (dom.nodeNumChildren(node) == 1 && getAssoc(node, \"shouldBeEmpty\") && dom.optNodeInnerHTML(node) == \"&nbsp;\" && !getAssoc(node, \"unpasted\"))\n    {\n      if (state)\n      {\n        var child = dom.nodeChild(node, 0);\n        _reachPoint(child, 0, state);\n        _reachPoint(child, 1, state);\n      }\n      return true;\n    }\n    return false;\n  }\n\n  function _pointHere(charsAfter, state)\n  {\n    var ln = lines.length() - 1;\n    var chr = lines.textOfLine(ln).length;\n    if (chr == 0 && !_.isEmpty(state.lineAttributes))\n    {\n      chr += 1; // listMarker\n    }\n    chr += charsAfter;\n    return [ln, chr];\n  }\n\n  function _reachBlockPoint(nd, idx, state)\n  {\n    if (!dom.isNodeText(nd)) _reachPoint(nd, idx, state);\n  }\n\n  function _reachPoint(nd, idx, state)\n  {\n    if (startPoint && nd == startPoint.node && startPoint.index == idx)\n    {\n      selStart = _pointHere(0, state);\n    }\n    if (endPoint && nd == endPoint.node && endPoint.index == idx)\n    {\n      selEnd = _pointHere(0, state);\n    }\n  }\n  cc.incrementFlag = function(state, flagName)\n  {\n    state.flags[flagName] = (state.flags[flagName] || 0) + 1;\n  }\n  cc.decrementFlag = function(state, flagName)\n  {\n    state.flags[flagName]--;\n  }\n  cc.incrementAttrib = function(state, attribName)\n  {\n    if (!state.attribs[attribName])\n    {\n      state.attribs[attribName] = 1;\n    }\n    else\n    {\n      state.attribs[attribName]++;\n    }\n    _recalcAttribString(state);\n  }\n  cc.decrementAttrib = function(state, attribName)\n  {\n    state.attribs[attribName]--;\n    _recalcAttribString(state);\n  }\n\n  function _enterList(state, listType)\n  {\n    var oldListType = state.lineAttributes['list'];\n    if (listType != 'none')\n    {\n      state.listNesting = (state.listNesting || 0) + 1;\n    }\n    \n    if(listType === 'none' || !listType ){\n      delete state.lineAttributes['list']; \n    }\n    else{\n      state.lineAttributes['list'] = listType;\n    }\n    \n    _recalcAttribString(state);\n    return oldListType;\n  }\n\n  function _exitList(state, oldListType)\n  {\n    if (state.lineAttributes['list'])\n    {\n      state.listNesting--;\n    }\n    if (oldListType && oldListType != 'none') { state.lineAttributes['list'] = oldListType; }\n    else { delete state.lineAttributes['list']; }\n    _recalcAttribString(state);\n  }\n\n  function _enterAuthor(state, author)\n  {\n    var oldAuthor = state.author;\n    state.authorLevel = (state.authorLevel || 0) + 1;\n    state.author = author;\n    _recalcAttribString(state);\n    return oldAuthor;\n  }\n\n  function _exitAuthor(state, oldAuthor)\n  {\n    state.authorLevel--;\n    state.author = oldAuthor;\n    _recalcAttribString(state);\n  }\n\n  function _recalcAttribString(state)\n  {\n    var lst = [];\n    for (var a in state.attribs)\n    {\n      if (state.attribs[a])\n      {\n        // The following splitting of the attribute name is a workaround\n        // to enable the content collector to store key-value attributes\n        // see https://github.com/ether/etherpad-lite/issues/2567 for more information\n        // in long term the contentcollector should be refactored to get rid of this workaround\n        var ATTRIBUTE_SPLIT_STRING = \"::\";\n        \n        // see if attributeString is splittable\n        var attributeSplits = a.split(ATTRIBUTE_SPLIT_STRING);\n        if (attributeSplits.length > 1) {\n            // the attribute name follows the convention key::value\n            // so save it as a key value attribute\n            lst.push([attributeSplits[0], attributeSplits[1]]);\n        } else {\n            // the \"normal\" case, the attribute is just a switch\n            // so set it true\n            lst.push([a, 'true']);\n        }\n      }\n    }\n    if (state.authorLevel > 0)\n    {\n      var authorAttrib = ['author', state.author];\n      if (apool.putAttrib(authorAttrib, true) >= 0)\n      {\n        // require that author already be in pool\n        // (don't add authors from other documents, etc.)\n        lst.push(authorAttrib);\n      }\n    }\n    state.attribString = Changeset.makeAttribsString('+', lst, apool);\n  }\n\n  function _produceLineAttributesMarker(state)\n  {\n    // TODO: This has to go to AttributeManager.\n    var attributes = [\n      ['lmkr', '1'],\n      ['insertorder', 'first']\n    ].concat(\n      _.map(state.lineAttributes,function(value,key){\n        return [key, value];\n      })\n    );\n    lines.appendText('*', Changeset.makeAttribsString('+', attributes , apool));\n  }\n  cc.startNewLine = function(state)\n  {\n    if (state)\n    {\n      var atBeginningOfLine = lines.textOfLine(lines.length() - 1).length == 0;\n      if (atBeginningOfLine && !_.isEmpty(state.lineAttributes))\n      {\n        _produceLineAttributesMarker(state);\n      }\n    }\n    lines.startNew();\n  }\n  cc.notifySelection = function(sel)\n  {\n    if (sel)\n    {\n      selection = sel;\n      startPoint = selection.startPoint;\n      endPoint = selection.endPoint;\n    }\n  };\n  cc.doAttrib = function(state, na)\n  {\n    state.localAttribs = (state.localAttribs || []);\n    state.localAttribs.push(na);\n    cc.incrementAttrib(state, na);\n  };\n  cc.collectContent = function(node, state)\n  {\n    if (!state)\n    {\n      state = {\n        flags: { /*name -> nesting counter*/\n        },\n        localAttribs: null,\n        attribs: { /*name -> nesting counter*/\n        },\n        attribString: '',\n        // lineAttributes maintain a map from attributes to attribute values set on a line\n        lineAttributes: {\n          /*\n          example:\n          'list': 'bullet1',\n          */\n        }\n      };\n    }\n    var localAttribs = state.localAttribs;\n    state.localAttribs = null;\n    var isBlock = isBlockElement(node);\n    var isEmpty = _isEmpty(node, state);\n    if (isBlock) _ensureColumnZero(state);\n    var startLine = lines.length() - 1;\n    _reachBlockPoint(node, 0, state);\n    if (dom.isNodeText(node))\n    {\n      var txt = dom.nodeValue(node);\n      var tname = dom.nodeAttr(node.parentNode,\"name\");\n\n      var txtFromHook = hooks.callAll('collectContentLineText', {\n        cc: this,\n        state: state,\n        tname: tname,\n        node:node,\n        text:txt,\n        styl: null,\n        cls: null\n      });  \n      var txt = (typeof(txtFromHook)=='object'&&txtFromHook.length==0)?dom.nodeValue(node):txtFromHook[0];\n\n      var rest = '';\n      var x = 0; // offset into original text\n      if (txt.length == 0)\n      {\n        if (startPoint && node == startPoint.node)\n        {\n          selStart = _pointHere(0, state);\n        }\n        if (endPoint && node == endPoint.node)\n        {\n          selEnd = _pointHere(0, state);\n        }\n      }\n      while (txt.length > 0)\n      {\n        var consumed = 0;\n        if (state.flags.preMode)\n        {\n          var firstLine = txt.split('\\n', 1)[0];\n          consumed = firstLine.length + 1;\n          rest = txt.substring(consumed);\n          txt = firstLine;\n        }\n        else\n        { /* will only run this loop body once */\n        }\n        if (startPoint && node == startPoint.node && startPoint.index - x <= txt.length)\n        {\n          selStart = _pointHere(startPoint.index - x, state);\n        }\n        if (endPoint && node == endPoint.node && endPoint.index - x <= txt.length)\n        {\n          selEnd = _pointHere(endPoint.index - x, state);\n        }\n        var txt2 = txt;\n        if ((!state.flags.preMode) && /^[\\r\\n]*$/.exec(txt))\n        {\n          // prevents textnodes containing just \"\\n\" from being significant\n          // in safari when pasting text, now that we convert them to\n          // spaces instead of removing them, because in other cases\n          // removing \"\\n\" from pasted HTML will collapse words together.\n          txt2 = \"\";\n        }\n        var atBeginningOfLine = lines.textOfLine(lines.length() - 1).length == 0;\n        if (atBeginningOfLine)\n        {\n          // newlines in the source mustn't become spaces at beginning of line box\n          txt2 = txt2.replace(/^\\n*/, '');\n        }\n        if (atBeginningOfLine && !_.isEmpty(state.lineAttributes))\n        {\n          _produceLineAttributesMarker(state);\n        }\n        lines.appendText(textify(txt2), state.attribString);\n        x += consumed;\n        txt = rest;\n        if (txt.length > 0)\n        {\n          cc.startNewLine(state);\n        }\n      }\n    }\n    else\n    {\n      var tname = (dom.nodeTagName(node) || \"\").toLowerCase();\n\n      if (tname == \"img\"){\n        var collectContentImage = hooks.callAll('collectContentImage', {\n          cc: cc,\n          state: state,\n          tname: tname,\n          styl: styl,\n          cls: cls,\n          node: node\n        });\n      }else{\n        // THIS SEEMS VERY HACKY! -- Please submit a better fix!\n        delete state.lineAttributes.img\n      }\n\n      if (tname == \"br\")\n      {\n        this.breakLine = true;\n        var tvalue = dom.nodeAttr(node, 'value');\n        var induceLineBreak = hooks.callAll('collectContentLineBreak', {\n          cc: this,\n          state: state,\n          tname: tname,\n          tvalue:tvalue,\n          styl: null,\n          cls: null\n        });       \n        var startNewLine= (typeof(induceLineBreak)=='object'&&induceLineBreak.length==0)?true:induceLineBreak[0];\n        if(startNewLine){\n          cc.startNewLine(state);\n        }\n      }\n      else if (tname == \"script\" || tname == \"style\")\n      {\n        // ignore\n      }\n      else if (!isEmpty)\n      {\n        var styl = dom.nodeAttr(node, \"style\");\n        var cls = dom.nodeAttr(node, \"class\");\n        var isPre = (tname == \"pre\");\n        if ((!isPre) && abrowser.safari)\n        {\n          isPre = (styl && /\\bwhite-space:\\s*pre\\b/i.exec(styl));\n        }\n        if (isPre) cc.incrementFlag(state, 'preMode');\n        var oldListTypeOrNull = null;\n        var oldAuthorOrNull = null;\n        if (collectStyles)\n        {\n          hooks.callAll('collectContentPre', {\n            cc: cc,\n            state: state,\n            tname: tname,\n            styl: styl,\n            cls: cls\n          });\n          if (tname == \"b\" || (styl && /\\bfont-weight:\\s*bold\\b/i.exec(styl)) || tname == \"strong\")\n          {\n            cc.doAttrib(state, \"bold\");\n          }\n          if (tname == \"i\" || (styl && /\\bfont-style:\\s*italic\\b/i.exec(styl)) || tname == \"em\")\n          {\n            cc.doAttrib(state, \"italic\");\n          }\n          if (tname == \"u\" || (styl && /\\btext-decoration:\\s*underline\\b/i.exec(styl)) || tname == \"ins\")\n          {\n            cc.doAttrib(state, \"underline\");\n          }\n          if (tname == \"s\" || (styl && /\\btext-decoration:\\s*line-through\\b/i.exec(styl)) || tname == \"del\")\n          {\n            cc.doAttrib(state, \"strikethrough\");\n          }\n          if (tname == \"ul\" || tname == \"ol\")\n          {\n            if(node.attribs){\n              var type = node.attribs.class;\n            }else{\n              var type = null;\n            }\n            var rr = cls && /(?:^| )list-([a-z]+[0-9]+)\\b/.exec(cls);\n            // lists do not need to have a type, so before we make a wrong guess, check if we find a better hint within the node's children\n            if(!rr && !type){\n              for (var i in node.children){\n                if(node.children[i] && node.children[i].name=='ul'){\n                  type = node.children[i].attribs.class\n                  if(type){\n                    break\n                  }\n                }\n              }\n            }\n            if(rr && rr[1]){\n              type = rr[1]\n            } else {\n              if(tname == \"ul\"){\n                if((type && type.match(\"indent\")) || (node.attribs && node.attribs.class && node.attribs.class.match(\"indent\"))){\n                  type = \"indent\"\n                } else {\n                  type = \"bullet\"\n                }\n              } else {\n                type = \"number\"\n              }\n              type = type + String(Math.min(_MAX_LIST_LEVEL, (state.listNesting || 0) + 1));\n            }\n            oldListTypeOrNull = (_enterList(state, type) || 'none');\n          }\n          else if ((tname == \"div\" || tname == \"p\") && cls && cls.match(/(?:^| )ace-line\\b/))\n          {\n            // This has undesirable behavior in Chrome but is right in other browsers.\n            // See https://github.com/ether/etherpad-lite/issues/2412 for reasoning\n            if(!abrowser.chrome) oldListTypeOrNull = (_enterList(state, type) || 'none');\n          }\n          if (className2Author && cls)\n          {\n            var classes = cls.match(/\\S+/g);\n            if (classes && classes.length > 0)\n            {\n              for (var i = 0; i < classes.length; i++)\n              {\n                var c = classes[i];\n                var a = className2Author(c);\n                if (a)\n                {\n                  oldAuthorOrNull = (_enterAuthor(state, a) || 'none');\n                  break;\n                }\n              }\n            }\n          }\n        }\n\n        var nc = dom.nodeNumChildren(node);\n        for (var i = 0; i < nc; i++)\n        {\n          var c = dom.nodeChild(node, i);\n          cc.collectContent(c, state);\n        }\n\n        if (collectStyles)\n        {\n          hooks.callAll('collectContentPost', {\n            cc: cc,\n            state: state,\n            tname: tname,\n            styl: styl,\n            cls: cls\n          });\n        }\n\n        if (isPre) cc.decrementFlag(state, 'preMode');\n        if (state.localAttribs)\n        {\n          for (var i = 0; i < state.localAttribs.length; i++)\n          {\n            cc.decrementAttrib(state, state.localAttribs[i]);\n          }\n        }\n        if (oldListTypeOrNull)\n        {\n          _exitList(state, oldListTypeOrNull);\n        }\n        if (oldAuthorOrNull)\n        {\n          _exitAuthor(state, oldAuthorOrNull);\n        }\n      }\n    }\n    if (!abrowser.msie)\n    {\n      _reachBlockPoint(node, 1, state);\n    }\n    if (isBlock)\n    {\n      if (lines.length() - 1 == startLine)\n      {\n        cc.startNewLine(state);\n      }\n      else\n      {\n        _ensureColumnZero(state);\n      }\n    }\n    if (abrowser.msie)\n    {\n      // in IE, a point immediately after a DIV appears on the next line\n      _reachBlockPoint(node, 1, state);\n    }\n    state.localAttribs = localAttribs;\n  };\n  // can pass a falsy value for end of doc\n  cc.notifyNextNode = function(node)\n  {\n    // an \"empty block\" won't end a line; this addresses an issue in IE with\n    // typing into a blank line at the end of the document.  typed text\n    // goes into the body, and the empty line div still looks clean.\n    // it is incorporated as dirty by the rule that a dirty region has\n    // to end a line.\n    if ((!node) || (isBlockElement(node) && !_isEmpty(node)))\n    {\n      _ensureColumnZero(null);\n    }\n  };\n  // each returns [line, char] or [-1,-1]\n  var getSelectionStart = function()\n    {\n      return selStart;\n      };\n  var getSelectionEnd = function()\n    {\n      return selEnd;\n      };\n\n  // returns array of strings for lines found, last entry will be \"\" if\n  // last line is complete (i.e. if a following span should be on a new line).\n  // can be called at any point\n  cc.getLines = function()\n  {\n    return lines.textLines();\n  };\n\n  cc.finish = function()\n  {\n    lines.flush();\n    var lineAttribs = lines.attribLines();\n    var lineStrings = cc.getLines();\n\n    lineStrings.length--;\n    lineAttribs.length--;\n\n    var ss = getSelectionStart();\n    var se = getSelectionEnd();\n\n    function fixLongLines()\n    {\n      // design mode does not deal with with really long lines!\n      var lineLimit = 2000; // chars\n      var buffer = 10; // chars allowed over before wrapping\n      var linesWrapped = 0;\n      var numLinesAfter = 0;\n      for (var i = lineStrings.length - 1; i >= 0; i--)\n      {\n        var oldString = lineStrings[i];\n        var oldAttribString = lineAttribs[i];\n        if (oldString.length > lineLimit + buffer)\n        {\n          var newStrings = [];\n          var newAttribStrings = [];\n          while (oldString.length > lineLimit)\n          {\n            //var semiloc = oldString.lastIndexOf(';', lineLimit-1);\n            //var lengthToTake = (semiloc >= 0 ? (semiloc+1) : lineLimit);\n            var lengthToTake = lineLimit;\n            newStrings.push(oldString.substring(0, lengthToTake));\n            oldString = oldString.substring(lengthToTake);\n            newAttribStrings.push(Changeset.subattribution(oldAttribString, 0, lengthToTake));\n            oldAttribString = Changeset.subattribution(oldAttribString, lengthToTake);\n          }\n          if (oldString.length > 0)\n          {\n            newStrings.push(oldString);\n            newAttribStrings.push(oldAttribString);\n          }\n\n          function fixLineNumber(lineChar)\n          {\n            if (lineChar[0] < 0) return;\n            var n = lineChar[0];\n            var c = lineChar[1];\n            if (n > i)\n            {\n              n += (newStrings.length - 1);\n            }\n            else if (n == i)\n            {\n              var a = 0;\n              while (c > newStrings[a].length)\n              {\n                c -= newStrings[a].length;\n                a++;\n              }\n              n += a;\n            }\n            lineChar[0] = n;\n            lineChar[1] = c;\n          }\n          fixLineNumber(ss);\n          fixLineNumber(se);\n          linesWrapped++;\n          numLinesAfter += newStrings.length;\n\n          newStrings.unshift(i, 1);\n          lineStrings.splice.apply(lineStrings, newStrings);\n          newAttribStrings.unshift(i, 1);\n          lineAttribs.splice.apply(lineAttribs, newAttribStrings);\n        }\n      }\n      return {\n        linesWrapped: linesWrapped,\n        numLinesAfter: numLinesAfter\n      };\n    }\n    var wrapData = fixLongLines();\n\n    return {\n      selStart: ss,\n      selEnd: se,\n      linesWrapped: wrapData.linesWrapped,\n      numLinesAfter: wrapData.numLinesAfter,\n      lines: lineStrings,\n      lineAttribs: lineAttribs\n    };\n  }\n\n  return cc;\n}\n\nexports.sanitizeUnicode = sanitizeUnicode;\nexports.makeContentCollector = makeContentCollector;\n\n}\n, \"ep_etherpad-lite/static/js/changesettracker.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code. \n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar AttributePool = require('./AttributePool');\nvar Changeset = require('./Changeset');\n\nfunction makeChangesetTracker(scheduler, apool, aceCallbacksProvider)\n{\n\n  // latest official text from server\n  var baseAText = Changeset.makeAText(\"\\n\");\n  // changes applied to baseText that have been submitted\n  var submittedChangeset = null;\n  // changes applied to submittedChangeset since it was prepared\n  var userChangeset = Changeset.identity(1);\n  // is the changesetTracker enabled\n  var tracking = false;\n  // stack state flag so that when we change the rep we don't\n  // handle the notification recursively.  When setting, always\n  // unset in a \"finally\" block.  When set to true, the setter\n  // takes change of userChangeset.\n  var applyingNonUserChanges = false;\n\n  var changeCallback = null;\n\n  var changeCallbackTimeout = null;\n\n  function setChangeCallbackTimeout()\n  {\n    // can call this multiple times per call-stack, because\n    // we only schedule a call to changeCallback if it exists\n    // and if there isn't a timeout already scheduled.\n    if (changeCallback && changeCallbackTimeout === null)\n    {\n      changeCallbackTimeout = scheduler.setTimeout(function()\n      {\n        try\n        {\n          changeCallback();\n        }\n        catch(pseudoError) {}\n        finally\n        {\n          changeCallbackTimeout = null;\n        }\n      }, 0);\n    }\n  }\n\n  var self;\n  return self = {\n    isTracking: function()\n    {\n      return tracking;\n    },\n    setBaseText: function(text)\n    {\n      self.setBaseAttributedText(Changeset.makeAText(text), null);\n    },\n    setBaseAttributedText: function(atext, apoolJsonObj)\n    {\n      aceCallbacksProvider.withCallbacks(\"setBaseText\", function(callbacks)\n      {\n        tracking = true;\n        baseAText = Changeset.cloneAText(atext);\n        if (apoolJsonObj)\n        {\n          var wireApool = (new AttributePool()).fromJsonable(apoolJsonObj);\n          baseAText.attribs = Changeset.moveOpsToNewPool(baseAText.attribs, wireApool, apool);\n        }\n        submittedChangeset = null;\n        userChangeset = Changeset.identity(atext.text.length);\n        applyingNonUserChanges = true;\n        try\n        {\n          callbacks.setDocumentAttributedText(atext);\n        }\n        finally\n        {\n          applyingNonUserChanges = false;\n        }\n      });\n    },\n    composeUserChangeset: function(c)\n    {\n      if (!tracking) return;\n      if (applyingNonUserChanges) return;\n      if (Changeset.isIdentity(c)) return;\n      userChangeset = Changeset.compose(userChangeset, c, apool);\n\n      setChangeCallbackTimeout();\n    },\n    applyChangesToBase: function(c, optAuthor, apoolJsonObj)\n    {\n      if (!tracking) return;\n\n      aceCallbacksProvider.withCallbacks(\"applyChangesToBase\", function(callbacks)\n      {\n\n        if (apoolJsonObj)\n        {\n          var wireApool = (new AttributePool()).fromJsonable(apoolJsonObj);\n          c = Changeset.moveOpsToNewPool(c, wireApool, apool);\n        }\n\n        baseAText = Changeset.applyToAText(c, baseAText, apool);\n\n        var c2 = c;\n        if (submittedChangeset)\n        {\n          var oldSubmittedChangeset = submittedChangeset;\n          submittedChangeset = Changeset.follow(c, oldSubmittedChangeset, false, apool);\n          c2 = Changeset.follow(oldSubmittedChangeset, c, true, apool);\n        }\n\n        var preferInsertingAfterUserChanges = true;\n        var oldUserChangeset = userChangeset;\n        userChangeset = Changeset.follow(c2, oldUserChangeset, preferInsertingAfterUserChanges, apool);\n        var postChange = Changeset.follow(oldUserChangeset, c2, !preferInsertingAfterUserChanges, apool);\n\n        var preferInsertionAfterCaret = true; //(optAuthor && optAuthor > thisAuthor);\n        applyingNonUserChanges = true;\n        try\n        {\n          callbacks.applyChangesetToDocument(postChange, preferInsertionAfterCaret);\n        }\n        finally\n        {\n          applyingNonUserChanges = false;\n        }\n      });\n    },\n    prepareUserChangeset: function()\n    {\n      // If there are user changes to submit, 'changeset' will be the\n      // changeset, else it will be null.\n      var toSubmit;\n      if (submittedChangeset)\n      {\n        // submission must have been canceled, prepare new changeset\n        // that includes old submittedChangeset\n        toSubmit = Changeset.compose(submittedChangeset, userChangeset, apool);\n      }\n      else\n      {\n\n        // add forEach function to Array.prototype for IE8      \n        if (!('forEach' in Array.prototype)) {\n          Array.prototype.forEach= function(action, that /*opt*/) {\n            for (var i= 0, n= this.length; i<n; i++)\n              if (i in this)\n                action.call(that, this[i], i, this);\n          };\n        }\n\n        // Get my authorID\n        var authorId = parent.parent.pad.myUserInfo.userId;\n\n        // Sanitize authorship\n        // We need to replace all author attribs with thisSession.author, in case they copy/pasted or otherwise inserted other peoples changes\n        if(apool.numToAttrib){\n          for (var attr in apool.numToAttrib){\n            if (apool.numToAttrib[attr][0] == 'author' && apool.numToAttrib[attr][1] == authorId) var authorAttr = Number(attr).toString(36)\n          }\n\n          // Replace all added 'author' attribs with the value of the current user\n          var cs = Changeset.unpack(userChangeset)\n            , iterator = Changeset.opIterator(cs.ops)\n            , op\n            , assem = Changeset.mergingOpAssembler();\n\n          while(iterator.hasNext()) {\n            op = iterator.next()\n            if(op.opcode == '+') {\n              var newAttrs = ''\n\n              op.attribs.split('*').forEach(function(attrNum) {\n                if(!attrNum) return\n                var attr = apool.getAttrib(parseInt(attrNum, 36))\n                if(!attr) return\n                if('author' == attr[0])  {\n                  // replace that author with the current one\n                  newAttrs += '*'+authorAttr; \n                }\n                else newAttrs += '*'+attrNum // overtake all other attribs as is\n              })\n              op.attribs = newAttrs\n            }\n            assem.append(op)\n          }\n          assem.endDocument();\n          userChangeset = Changeset.pack(cs.oldLen, cs.newLen, assem.toString(), cs.charBank)\n          Changeset.checkRep(userChangeset)\n        }\n        if (Changeset.isIdentity(userChangeset)) toSubmit = null;\n        else toSubmit = userChangeset;\n      }\n\n      var cs = null;\n      if (toSubmit)\n      {\n        submittedChangeset = toSubmit;\n        userChangeset = Changeset.identity(Changeset.newLen(toSubmit));\n\n        cs = toSubmit;\n      }\n      var wireApool = null;\n      if (cs)\n      {\n        var forWire = Changeset.prepareForWire(cs, apool);\n        wireApool = forWire.pool.toJsonable();\n        cs = forWire.translated;\n      }\n\n      var data = {\n        changeset: cs,\n        apool: wireApool\n      };\n      return data;\n    },\n    applyPreparedChangesetToBase: function()\n    {\n      if (!submittedChangeset)\n      {\n        // violation of protocol; use prepareUserChangeset first\n        throw new Error(\"applySubmittedChangesToBase: no submitted changes to apply\");\n      }\n      //bumpDebug(\"applying committed changeset: \"+submittedChangeset.encodeToString(false));\n      baseAText = Changeset.applyToAText(submittedChangeset, baseAText, apool);\n      submittedChangeset = null;\n    },\n    setUserChangeNotificationCallback: function(callback)\n    {\n      changeCallback = callback;\n    },\n    hasUncommittedChanges: function()\n    {\n      return !!(submittedChangeset || (!Changeset.isIdentity(userChangeset)));\n    }\n  };\n\n}\n\nexports.makeChangesetTracker = makeChangesetTracker;\n\n}\n, \"ep_etherpad-lite/static/js/linestylefilter.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code. \n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n// THIS FILE IS ALSO AN APPJET MODULE: etherpad.collab.ace.linestylefilter\n// %APPJET%: import(\"etherpad.collab.ace.easysync2.Changeset\");\n// %APPJET%: import(\"etherpad.admin.plugins\");\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// requires: easysync2.Changeset\n// requires: top\n// requires: plugins\n// requires: undefined\n\nvar Changeset = require('./Changeset');\nvar hooks = require('./pluginfw/hooks');\nvar linestylefilter = {};\nvar _ = require('./underscore');\nvar AttributeManager = require('./AttributeManager');\n\nlinestylefilter.ATTRIB_CLASSES = {\n  'bold': 'tag:b',\n  'italic': 'tag:i',\n  'underline': 'tag:u',\n  'strikethrough': 'tag:s'\n};\n\nvar lineAttributeMarker = 'lineAttribMarker';\nexports.lineAttributeMarker = lineAttributeMarker;\n\nlinestylefilter.getAuthorClassName = function(author)\n{\n  return \"author-\" + author.replace(/[^a-y0-9]/g, function(c)\n  {\n    if (c == \".\") return \"-\";\n    return 'z' + c.charCodeAt(0) + 'z';\n  });\n};\n\n// lineLength is without newline; aline includes newline,\n// but may be falsy if lineLength == 0\nlinestylefilter.getLineStyleFilter = function(lineLength, aline, textAndClassFunc, apool)\n{\n\n  // Plugin Hook to add more Attrib Classes\n  hooks.aCallAll('aceAttribClasses', linestylefilter.ATTRIB_CLASSES, function(err, ATTRIB_CLASSES){\n    if(ATTRIB_CLASSES.length >= 1){\n      linestylefilter.ATTRIB_CLASSES = ATTRIB_CLASSES[0];\n    }\n  });\n\n  if (lineLength == 0) return textAndClassFunc;\n\n  var nextAfterAuthorColors = textAndClassFunc;\n\n  var authorColorFunc = (function()\n  {\n    var lineEnd = lineLength;\n    var curIndex = 0;\n    var extraClasses;\n    var leftInAuthor;\n\n    function attribsToClasses(attribs)\n    {\n      var classes = '';\n      var isLineAttribMarker = false;\n      \n      Changeset.eachAttribNumber(attribs, function(n)\n      {\n        var key = apool.getAttribKey(n);  \n        if (key)\n        {\n          var value = apool.getAttribValue(n);\n          if (value)\n          {\n            if (!isLineAttribMarker && _.indexOf(AttributeManager.lineAttributes, key) >= 0){\n              isLineAttribMarker = true;\n            }\n            if (key == 'author')\n            {\n              classes += ' ' + linestylefilter.getAuthorClassName(value);\n            }\n            else if (key == 'list')\n            {\n              classes += ' list:' + value;\n            }\n            else if (key == 'start')\n            {\n              classes += ' start:' + value;\n            }\n            else if (linestylefilter.ATTRIB_CLASSES[key])\n            {\n              classes += ' ' + linestylefilter.ATTRIB_CLASSES[key];\n            }\n            else\n            {\n              classes += hooks.callAllStr(\"aceAttribsToClasses\", {\n                linestylefilter: linestylefilter,\n                key: key,\n                value: value\n              }, \" \", \" \", \"\");\n            }            \n          }\n        }\n      });\n      \n      if(isLineAttribMarker) classes += ' ' + lineAttributeMarker;\n      return classes.substring(1);\n    }\n\n    var attributionIter = Changeset.opIterator(aline);\n    var nextOp, nextOpClasses;\n\n    function goNextOp()\n    {\n      nextOp = attributionIter.next();\n      nextOpClasses = (nextOp.opcode && attribsToClasses(nextOp.attribs));\n    }\n    goNextOp();\n\n    function nextClasses()\n    {\n      if (curIndex < lineEnd)\n      {\n        extraClasses = nextOpClasses;\n        leftInAuthor = nextOp.chars;\n        goNextOp();\n        while (nextOp.opcode && nextOpClasses == extraClasses)\n        {\n          leftInAuthor += nextOp.chars;\n          goNextOp();\n        }\n      }\n    }\n    nextClasses();\n\n    return function(txt, cls)\n    {\n\n      var disableAuthColorForThisLine = hooks.callAll(\"disableAuthorColorsForThisLine\", {\n        linestylefilter: linestylefilter,\n        text: txt,\n        \"class\": cls\n      }, \" \", \" \", \"\");   \n      var disableAuthors = (disableAuthColorForThisLine==null||disableAuthColorForThisLine.length==0)?false:disableAuthColorForThisLine[0];\n      while (txt.length > 0)\n      {\n        if (leftInAuthor <= 0 || disableAuthors)\n        {\n          // prevent infinite loop if something funny's going on\n          return nextAfterAuthorColors(txt, cls);\n        }\n        var spanSize = txt.length;\n        if (spanSize > leftInAuthor)\n        {\n          spanSize = leftInAuthor;\n        }\n        var curTxt = txt.substring(0, spanSize);\n        txt = txt.substring(spanSize);\n        nextAfterAuthorColors(curTxt, (cls && cls + \" \") + extraClasses);\n        curIndex += spanSize;\n        leftInAuthor -= spanSize;\n        if (leftInAuthor == 0)\n        {\n          nextClasses();\n        }\n      }\n    };\n  })();\n  return authorColorFunc;\n};\n\nlinestylefilter.getAtSignSplitterFilter = function(lineText, textAndClassFunc)\n{\n  var at = /@/g;\n  at.lastIndex = 0;\n  var splitPoints = null;\n  var execResult;\n  while ((execResult = at.exec(lineText)))\n  {\n    if (!splitPoints)\n    {\n      splitPoints = [];\n    }\n    splitPoints.push(execResult.index);\n  }\n\n  if (!splitPoints) return textAndClassFunc;\n\n  return linestylefilter.textAndClassFuncSplitter(textAndClassFunc, splitPoints);\n};\n\nlinestylefilter.getRegexpFilter = function(regExp, tag)\n{\n  return function(lineText, textAndClassFunc)\n  {\n    regExp.lastIndex = 0;\n    var regExpMatchs = null;\n    var splitPoints = null;\n    var execResult;\n    while ((execResult = regExp.exec(lineText)))\n    {\n      if (!regExpMatchs)\n      {\n        regExpMatchs = [];\n        splitPoints = [];\n      }\n      var startIndex = execResult.index;\n      var regExpMatch = execResult[0];\n      regExpMatchs.push([startIndex, regExpMatch]);\n      splitPoints.push(startIndex, startIndex + regExpMatch.length);\n    }\n\n    if (!regExpMatchs) return textAndClassFunc;\n\n    function regExpMatchForIndex(idx)\n    {\n      for (var k = 0; k < regExpMatchs.length; k++)\n      {\n        var u = regExpMatchs[k];\n        if (idx >= u[0] && idx < u[0] + u[1].length)\n        {\n          return u[1];\n        }\n      }\n      return false;\n    }\n\n    var handleRegExpMatchsAfterSplit = (function()\n    {\n      var curIndex = 0;\n      return function(txt, cls)\n      {\n        var txtlen = txt.length;\n        var newCls = cls;\n        var regExpMatch = regExpMatchForIndex(curIndex);\n        if (regExpMatch)\n        {\n          newCls += \" \" + tag + \":\" + regExpMatch;\n        }\n        textAndClassFunc(txt, newCls);\n        curIndex += txtlen;\n      };\n    })();\n\n    return linestylefilter.textAndClassFuncSplitter(handleRegExpMatchsAfterSplit, splitPoints);\n  };\n};\n\n\nlinestylefilter.REGEX_WORDCHAR = /[\\u0030-\\u0039\\u0041-\\u005A\\u0061-\\u007A\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u00FF\\u0100-\\u1FFF\\u3040-\\u9FFF\\uF900-\\uFDFF\\uFE70-\\uFEFE\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFDC]/;\nlinestylefilter.REGEX_URLCHAR = new RegExp('(' + /[-:@a-zA-Z0-9_.,~%+\\/\\\\?=&#!;()\\[\\]$]/.source + '|' + linestylefilter.REGEX_WORDCHAR.source + ')');\nlinestylefilter.REGEX_URL = new RegExp(/(?:(?:https?|s?ftp|ftps|file|nfs):\\/\\/|mailto:|www\\.)/.source + linestylefilter.REGEX_URLCHAR.source + '*(?![:.,;])' + linestylefilter.REGEX_URLCHAR.source, 'g');\nlinestylefilter.getURLFilter = linestylefilter.getRegexpFilter(\nlinestylefilter.REGEX_URL, 'url');\n\nlinestylefilter.textAndClassFuncSplitter = function(func, splitPointsOpt)\n{\n  var nextPointIndex = 0;\n  var idx = 0;\n\n  // don't split at 0\n  while (splitPointsOpt && nextPointIndex < splitPointsOpt.length && splitPointsOpt[nextPointIndex] == 0)\n  {\n    nextPointIndex++;\n  }\n\n  function spanHandler(txt, cls)\n  {\n    if ((!splitPointsOpt) || nextPointIndex >= splitPointsOpt.length)\n    {\n      func(txt, cls);\n      idx += txt.length;\n    }\n    else\n    {\n      var splitPoints = splitPointsOpt;\n      var pointLocInSpan = splitPoints[nextPointIndex] - idx;\n      var txtlen = txt.length;\n      if (pointLocInSpan >= txtlen)\n      {\n        func(txt, cls);\n        idx += txt.length;\n        if (pointLocInSpan == txtlen)\n        {\n          nextPointIndex++;\n        }\n      }\n      else\n      {\n        if (pointLocInSpan > 0)\n        {\n          func(txt.substring(0, pointLocInSpan), cls);\n          idx += pointLocInSpan;\n        }\n        nextPointIndex++;\n        // recurse\n        spanHandler(txt.substring(pointLocInSpan), cls);\n      }\n    }\n  }\n  return spanHandler;\n};\n\nlinestylefilter.getFilterStack = function(lineText, textAndClassFunc, abrowser)\n{\n  var func = linestylefilter.getURLFilter(lineText, textAndClassFunc);\n\n  var hookFilters = hooks.callAll(\"aceGetFilterStack\", {\n    linestylefilter: linestylefilter,\n    browser: abrowser\n  });\n  _.map(hookFilters ,function(hookFilter)\n  {\n    func = hookFilter(lineText, func);\n  });\n\n  if (abrowser !== undefined && abrowser.msie)\n  {\n    // IE7+ will take an e-mail address like <foo@bar.com> and linkify it to foo@bar.com.\n    // We then normalize it back to text with no angle brackets.  It's weird.  So always\n    // break spans at an \"at\" sign.\n    func = linestylefilter.getAtSignSplitterFilter(\n    lineText, func);\n  }\n  return func;\n};\n\n// domLineObj is like that returned by domline.createDomLine\nlinestylefilter.populateDomLine = function(textLine, aline, apool, domLineObj)\n{\n  // remove final newline from text if any\n  var text = textLine;\n  if (text.slice(-1) == '\\n')\n  {\n    text = text.substring(0, text.length - 1);\n  }\n\n  function textAndClassFunc(tokenText, tokenClass)\n  {\n    domLineObj.appendSpan(tokenText, tokenClass);\n  }\n\n  var func = linestylefilter.getFilterStack(text, textAndClassFunc);\n  func = linestylefilter.getLineStyleFilter(text.length, aline, func, apool);\n  func(text, '');\n};\n\nexports.linestylefilter = linestylefilter;\n\n}\n, \"ep_etherpad-lite/static/js/domline.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code. \n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n// THIS FILE IS ALSO AN APPJET MODULE: etherpad.collab.ace.domline\n// %APPJET%: import(\"etherpad.admin.plugins\");\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// requires: top\n// requires: plugins\n// requires: undefined\n\nvar Security = require('./security');\nvar hooks = require('./pluginfw/hooks');\nvar _ = require('./underscore');\nvar lineAttributeMarker = require('./linestylefilter').lineAttributeMarker;\nvar noop = function(){};\n\n\nvar domline = {};\n\ndomline.addToLineClass = function(lineClass, cls)\n{\n  // an \"empty span\" at any point can be used to add classes to\n  // the line, using line:className.  otherwise, we ignore\n  // the span.\n  cls.replace(/\\S+/g, function(c)\n  {\n    if (c.indexOf(\"line:\") == 0)\n    {\n      // add class to line\n      lineClass = (lineClass ? lineClass + ' ' : '') + c.substring(5);\n    }\n  });\n  return lineClass;\n}\n\n// if \"document\" is falsy we don't create a DOM node, just\n// an object with innerHTML and className\ndomline.createDomLine = function(nonEmpty, doesWrap, optBrowser, optDocument)\n{\n  var result = {\n    node: null,\n    appendSpan: noop,\n    prepareForAdd: noop,\n    notifyAdded: noop,\n    clearSpans: noop,\n    finishUpdate: noop,\n    lineMarker: 0\n  };\n\n  var document = optDocument;\n\n  if (document)\n  {\n    result.node = document.createElement(\"div\");\n  }\n  else\n  {\n    result.node = {\n      innerHTML: '',\n      className: ''\n    };\n  }\n\n  var html = [];\n  var preHtml = '', \n  postHtml = '';\n  var curHTML = null;\n\n  function processSpaces(s)\n  {\n    return domline.processSpaces(s, doesWrap);\n  }\n\n  var perTextNodeProcess = (doesWrap ? _.identity : processSpaces);\n  var perHtmlLineProcess = (doesWrap ? processSpaces : _.identity);\n  var lineClass = 'ace-line';\n\n  result.appendSpan = function(txt, cls)\n  {\n\n    var processedMarker = false;\n    // Handle lineAttributeMarker, if present\n    if (cls.indexOf(lineAttributeMarker) >= 0)\n    {\n      var listType = /(?:^| )list:(\\S+)/.exec(cls);\n      var start = /(?:^| )start:(\\S+)/.exec(cls);\n\n      _.map(hooks.callAll(\"aceDomLinePreProcessLineAttributes\", {\n        domline: domline,\n        cls: cls\n      }), function(modifier)\n      {\n        preHtml += modifier.preHtml;\n        postHtml += modifier.postHtml;\n        processedMarker |= modifier.processedMarker;\n      });\n\n      if (listType)\n      {\n        listType = listType[1];\n        if (listType)\n        {\n          if(listType.indexOf(\"number\") < 0)\n          {\n            preHtml += '<ul class=\"list-' + Security.escapeHTMLAttribute(listType) + '\"><li>';\n            postHtml = '</li></ul>' + postHtml;\n          }\n          else\n          {\n            if(start){ // is it a start of a list with more than one item in?\n              if(start[1] == 1){ // if its the first one at this level?\n                lineClass = lineClass + \" \" + \"list-start-\" + listType; // Add start class to DIV node\n              }\n              preHtml += '<ol start='+start[1]+' class=\"list-' + Security.escapeHTMLAttribute(listType) + '\"><li>';\n            }else{\n              preHtml += '<ol class=\"list-' + Security.escapeHTMLAttribute(listType) + '\"><li>'; // Handles pasted contents into existing lists\n            }\n            postHtml += '</li></ol>';\n          }\n        } \n        processedMarker = true;\n      }\n      _.map(hooks.callAll(\"aceDomLineProcessLineAttributes\", {\n        domline: domline,\n        cls: cls\n      }), function(modifier)\n      {\n        preHtml += modifier.preHtml;\n        postHtml += modifier.postHtml;\n        processedMarker |= modifier.processedMarker;\n      });\n      if( processedMarker ){\n        result.lineMarker += txt.length;\n        return; // don't append any text\n      } \n    }\n    var href = null;\n    var simpleTags = null;\n    if (cls.indexOf('url') >= 0)\n    {\n      cls = cls.replace(/(^| )url:(\\S+)/g, function(x0, space, url)\n      {\n        href = url;\n        return space + \"url\";\n      });\n    }\n    if (cls.indexOf('tag') >= 0)\n    {\n      cls = cls.replace(/(^| )tag:(\\S+)/g, function(x0, space, tag)\n      {\n        if (!simpleTags) simpleTags = [];\n        simpleTags.push(tag.toLowerCase());\n        return space + tag;\n      });\n    }\n\n    var extraOpenTags = \"\";\n    var extraCloseTags = \"\";\n\n    _.map(hooks.callAll(\"aceCreateDomLine\", {\n      domline: domline,\n      cls: cls\n    }), function(modifier)\n    {\n      cls = modifier.cls;\n      extraOpenTags = extraOpenTags + modifier.extraOpenTags;\n      extraCloseTags = modifier.extraCloseTags + extraCloseTags;\n    });\n\n    if ((!txt) && cls)\n    {\n      lineClass = domline.addToLineClass(lineClass, cls);\n    }\n    else if (txt)\n    {\n      if (href)\n      {\n        if(!~href.indexOf(\"://\") && !~href.indexOf(\"mailto:\")) // if the url doesn't include a protocol prefix, assume http\n        {\n          href = \"http://\"+href;\n        }\n        extraOpenTags = extraOpenTags + '<a href=\"' + Security.escapeHTMLAttribute(href) + '\">';\n        extraCloseTags = '</a>' + extraCloseTags;\n      }\n      if (simpleTags)\n      {\n        simpleTags.sort();\n        extraOpenTags = extraOpenTags + '<' + simpleTags.join('><') + '>';\n        simpleTags.reverse();\n        extraCloseTags = '</' + simpleTags.join('></') + '>' + extraCloseTags;\n      }\n      html.push('<span class=\"', Security.escapeHTMLAttribute(cls || ''), '\">', extraOpenTags, perTextNodeProcess(Security.escapeHTML(txt)), extraCloseTags, '</span>');\n    }\n  };\n  result.clearSpans = function()\n  {\n    html = [];\n    lineClass = ''; // non-null to cause update\n    result.lineMarker = 0;\n  };\n\n  function writeHTML()\n  {\n    var newHTML = perHtmlLineProcess(html.join(''));\n    if (!newHTML)\n    {\n      if ((!document) || (!optBrowser))\n      {\n        newHTML += '&nbsp;';\n      }\n      else if (!optBrowser.msie)\n      {\n        newHTML += '<br/>';\n      }\n    }\n    if (nonEmpty)\n    {\n      newHTML = (preHtml || '') + newHTML + (postHtml || '');\n    }\n    html = preHtml = postHtml = ''; // free memory\n    if (newHTML !== curHTML)\n    {\n      curHTML = newHTML;\n      result.node.innerHTML = curHTML;\n    }\n    if (lineClass !== null) result.node.className = lineClass;\n\n    hooks.callAll(\"acePostWriteDomLineHTML\", {\n      node: result.node\n    });\n  }\n  result.prepareForAdd = writeHTML;\n  result.finishUpdate = writeHTML;\n  result.getInnerHTML = function()\n  {\n    return curHTML || '';\n  };\n  return result;\n};\n\ndomline.processSpaces = function(s, doesWrap)\n{\n  if (s.indexOf(\"<\") < 0 && !doesWrap)\n  {\n    // short-cut\n    return s.replace(/ /g, '&nbsp;');\n  }\n  var parts = [];\n  s.replace(/<[^>]*>?| |[^ <]+/g, function(m)\n  {\n    parts.push(m);\n  });\n  if (doesWrap)\n  {\n    var endOfLine = true;\n    var beforeSpace = false;\n    // last space in a run is normal, others are nbsp,\n    // end of line is nbsp\n    for (var i = parts.length - 1; i >= 0; i--)\n    {\n      var p = parts[i];\n      if (p == \" \")\n      {\n        if (endOfLine || beforeSpace) parts[i] = '&nbsp;';\n        endOfLine = false;\n        beforeSpace = true;\n      }\n      else if (p.charAt(0) != \"<\")\n      {\n        endOfLine = false;\n        beforeSpace = false;\n      }\n    }\n    // beginning of line is nbsp\n    for (var i = 0; i < parts.length; i++)\n    {\n      var p = parts[i];\n      if (p == \" \")\n      {\n        parts[i] = '&nbsp;';\n        break;\n      }\n      else if (p.charAt(0) != \"<\")\n      {\n        break;\n      }\n    }\n  }\n  else\n  {\n    for (var i = 0; i < parts.length; i++)\n    {\n      var p = parts[i];\n      if (p == \" \")\n      {\n        parts[i] = '&nbsp;';\n      }\n    }\n  }\n  return parts.join('');\n};\n\nexports.domline = domline;\n\n}\n, \"ep_etherpad-lite/static/js/AttributeManager.js\": function (require, exports, module) {\nvar Changeset = require('./Changeset');\nvar ChangesetUtils = require('./ChangesetUtils');\nvar _ = require('./underscore');\n\nvar lineMarkerAttribute = 'lmkr';\n\n// If one of these attributes are set to the first character of a \n// line it is considered as a line attribute marker i.e. attributes\n// set on this marker are applied to the whole line. \n// The list attribute is only maintained for compatibility reasons\nvar lineAttributes = [lineMarkerAttribute,'list'];\n\n/*\n  The Attribute manager builds changesets based on a document \n  representation for setting and removing range or line-based attributes.\n  \n  @param rep the document representation to be used\n  @param applyChangesetCallback this callback will be called \n    once a changeset has been built.\n    \n    \n  A document representation contains \n  - an array `alines` containing 1 attributes string for each line \n  - an Attribute pool `apool`\n  - a SkipList `lines` containing the text lines of the document.\n*/\n\nvar AttributeManager = function(rep, applyChangesetCallback)\n{\n  this.rep = rep;\n  this.applyChangesetCallback = applyChangesetCallback;\n  this.author = '';\n  \n  // If the first char in a line has one of the following attributes\n  // it will be considered as a line marker\n};\n\nAttributeManager.lineAttributes = lineAttributes;\n\nAttributeManager.prototype = _(AttributeManager.prototype).extend({\n  \n  applyChangeset: function(changeset){\n    if(!this.applyChangesetCallback) return changeset;\n    \n    var cs = changeset.toString();\n    if (!Changeset.isIdentity(cs))\n    {\n      this.applyChangesetCallback(cs);\n    }\n    \n    return changeset;\n  },\n  \n  /*\n    Sets attributes on a range\n    @param start [row, col] tuple pointing to the start of the range\n    @param end [row, col] tuple pointing to the end of the range\n    @param attribute: an array of attributes\n  */\n  setAttributesOnRange: function(start, end, attribs)\n  {\n    var builder = Changeset.builder(this.rep.lines.totalWidth());\n    ChangesetUtils.buildKeepToStartOfRange(this.rep, builder, start);\n    ChangesetUtils.buildKeepRange(this.rep, builder, start, end, attribs, this.rep.apool);\n    return this.applyChangeset(builder);\n  },\n\n  /* \n    Returns if the line already has a line marker\n    @param lineNum: the number of the line\n  */\n  lineHasMarker: function(lineNum){\n    var that = this;\n    \n    return _.find(lineAttributes, function(attribute){\n      return that.getAttributeOnLine(lineNum, attribute) != ''; \n    }) !== undefined;\n  },\n  \n  /*\n    Gets a specified attribute on a line\n    @param lineNum: the number of the line to set the attribute for\n    @param attributeKey: the name of the attribute to get, e.g. list  \n  */\n  getAttributeOnLine: function(lineNum, attributeName){\n    // get  `attributeName` attribute of first char of line\n    var aline = this.rep.alines[lineNum];\n    if (aline)\n    {\n      var opIter = Changeset.opIterator(aline);\n      if (opIter.hasNext())\n      {\n        return Changeset.opAttributeValue(opIter.next(), attributeName, this.rep.apool) || '';\n      }\n    }\n    return '';\n  },\n  \n  /*\n    Gets all attributes on a line\n    @param lineNum: the number of the line to get the attribute for \n  */\n  getAttributesOnLine: function(lineNum){\n    // get attributes of first char of line\n    var aline = this.rep.alines[lineNum];\n    var attributes = []\n    if (aline)\n    {\n      var opIter = Changeset.opIterator(aline)\n        , op\n      if (opIter.hasNext())\n      {\n        op = opIter.next()\n        if(!op.attribs) return []\n        \n        Changeset.eachAttribNumber(op.attribs, function(n) {\n          attributes.push([this.rep.apool.getAttribKey(n), this.rep.apool.getAttribValue(n)])\n        }.bind(this))\n        return attributes;\n      }\n    }\n    return [];\n  },\n  \n  /*\n    Gets all attributes at a position containing line number and column\n    @param lineNumber starting with zero\n    @param column starting with zero\n    returns a list of attributes in the format \n    [ [\"key\",\"value\"], [\"key\",\"value\"], ...  ]\n  */\n  getAttributesOnPosition: function(lineNumber, column){\n    // get all attributes of the line\n    var aline = this.rep.alines[lineNumber];\n    \n    if (!aline) {\n        return [];\n    }\n    // iterate through all operations of a line\n    var opIter = Changeset.opIterator(aline);\n    \n    // we need to sum up how much characters each operations take until the wanted position\n    var currentPointer = 0;\n    var attributes = [];    \n    var currentOperation;\n    \n    while (opIter.hasNext()) {\n      currentOperation = opIter.next();\n      currentPointer = currentPointer + currentOperation.chars;      \n      \n      if (currentPointer > column) {\n        // we got the operation of the wanted position, now collect all its attributes\n        Changeset.eachAttribNumber(currentOperation.attribs, function (n) {\n          attributes.push([\n            this.rep.apool.getAttribKey(n),\n            this.rep.apool.getAttribValue(n)\n          ]);\n        }.bind(this));\n        \n        // skip the loop\n        return attributes;\n      }\n    }\n    return attributes;\n    \n  },\n  \n  /*\n    Gets all attributes at caret position \n    if the user selected a range, the start of the selection is taken\n    returns a list of attributes in the format \n    [ [\"key\",\"value\"], [\"key\",\"value\"], ...  ]\n  */\n  getAttributesOnCaret: function(){\n    return this.getAttributesOnPosition(this.rep.selStart[0], this.rep.selStart[1]);\n  },\n  \n  /*\n    Sets a specified attribute on a line\n    @param lineNum: the number of the line to set the attribute for\n    @param attributeKey: the name of the attribute to set, e.g. list\n    @param attributeValue: an optional parameter to pass to the attribute (e.g. indention level)\n  \n  */\n  setAttributeOnLine: function(lineNum, attributeName, attributeValue){\n    var loc = [0,0];\n    var builder = Changeset.builder(this.rep.lines.totalWidth());\n    var hasMarker = this.lineHasMarker(lineNum);\n    \n    ChangesetUtils.buildKeepRange(this.rep, builder, loc, (loc = [lineNum, 0]));\n\n    if(hasMarker){\n      ChangesetUtils.buildKeepRange(this.rep, builder, loc, (loc = [lineNum, 1]), [\n        [attributeName, attributeValue]\n      ], this.rep.apool);\n    }else{      \n        // add a line marker\n        builder.insert('*', [\n          ['author', this.author],\n          ['insertorder', 'first'],\n          [lineMarkerAttribute, '1'],\n          [attributeName, attributeValue]\n        ], this.rep.apool);\n    }\n    \n    return this.applyChangeset(builder);\n  },\n  \n /**\n   * Removes a specified attribute on a line\n   *  @param lineNum the number of the affected line\n   *  @param attributeName the name of the attribute to remove, e.g. list\n   *  @param attributeValue if given only attributes with equal value will be removed\n   */\n removeAttributeOnLine: function(lineNum, attributeName, attributeValue){\n   var builder = Changeset.builder(this.rep.lines.totalWidth());\n   var hasMarker = this.lineHasMarker(lineNum);\n   var found = false;\n\n   var attribs = _(this.getAttributesOnLine(lineNum)).map(function (attrib) {\n     if (attrib[0] === attributeName && (!attributeValue || attrib[0] === attributeValue)){\n       found = true;\n       return [attributeName, ''];\n     }\n     return attrib;\n   });\n\n   if (!found) {\n     return;\n   }\n\n   ChangesetUtils.buildKeepToStartOfRange(this.rep, builder, [lineNum, 0]);\n\n   var countAttribsWithMarker = _.chain(attribs).filter(function(a){return !!a[1];})\n     .map(function(a){return a[0];}).difference(['author', 'lmkr', 'insertorder', 'start']).size().value();\n\n   //if we have marker and any of attributes don't need to have marker. we need delete it\n   if(hasMarker && !countAttribsWithMarker){\n     ChangesetUtils.buildRemoveRange(this.rep, builder, [lineNum, 0], [lineNum, 1]);\n   }else{\n     ChangesetUtils.buildKeepRange(this.rep, builder, [lineNum, 0], [lineNum, 1], attribs, this.rep.apool);\n   }\n\n   return this.applyChangeset(builder);\n },\n  \n   /*\n     Toggles a line attribute for the specified line number\n     If a line attribute with the specified name exists with any value it will be removed\n     Otherwise it will be set to the given value\n     @param lineNum: the number of the line to toggle the attribute for\n     @param attributeKey: the name of the attribute to toggle, e.g. list\n     @param attributeValue: the value to pass to the attribute (e.g. indention level)\n  */\n  toggleAttributeOnLine: function(lineNum, attributeName, attributeValue) {\n    return this.getAttributeOnLine(lineNum, attributeName) ?\n      this.removeAttributeOnLine(lineNum, attributeName) :\n      this.setAttributeOnLine(lineNum, attributeName, attributeValue);\n    \n  }\n});\n\nmodule.exports = AttributeManager;\n\n}\n, \"ep_etherpad-lite/static/js/ace2_inner\": null\n, \"ep_etherpad-lite/static/js/browser\": null\n, \"ep_etherpad-lite/static/js/AttributePool\": null\n, \"ep_etherpad-lite/static/js/Changeset\": null\n, \"ep_etherpad-lite/static/js/ChangesetUtils\": null\n, \"ep_etherpad-lite/static/js/skiplist\": null\n, \"ep_etherpad-lite/static/js/cssmanager\": null\n, \"ep_etherpad-lite/static/js/colorutils\": null\n, \"ep_etherpad-lite/static/js/undomodule\": null\n, \"unorm\": null\n, \"ep_etherpad-lite/static/js/contentcollector\": null\n, \"ep_etherpad-lite/static/js/changesettracker\": null\n, \"ep_etherpad-lite/static/js/linestylefilter\": null\n, \"ep_etherpad-lite/static/js/domline\": null\n, \"ep_etherpad-lite/static/js/AttributeManager\": null\n, \"ep_etherpad-lite/static/js/ace2_inner/index.js\": null\n, \"ep_etherpad-lite/static/js/browser/index.js\": null\n, \"ep_etherpad-lite/static/js/AttributePool/index.js\": null\n, \"ep_etherpad-lite/static/js/Changeset/index.js\": null\n, \"ep_etherpad-lite/static/js/ChangesetUtils/index.js\": null\n, \"ep_etherpad-lite/static/js/skiplist/index.js\": null\n, \"ep_etherpad-lite/static/js/cssmanager/index.js\": null\n, \"ep_etherpad-lite/static/js/colorutils/index.js\": null\n, \"ep_etherpad-lite/static/js/undomodule/index.js\": null\n, \"unorm/index.js\": null\n, \"ep_etherpad-lite/static/js/contentcollector/index.js\": null\n, \"ep_etherpad-lite/static/js/changesettracker/index.js\": null\n, \"ep_etherpad-lite/static/js/linestylefilter/index.js\": null\n, \"ep_etherpad-lite/static/js/domline/index.js\": null\n, \"ep_etherpad-lite/static/js/AttributeManager/index.js\": null\n});\n"
          },
          "redirectURL": "",
          "headersSize": 398,
          "bodySize": 0,
          "_transferSize": 718
        },
        "cache": {},
        "timings": {
          "blocked": 19.2379999998593,
          "dns": -1,
          "connect": -1,
          "send": 0.14899999951009946,
          "wait": 62.595000000328604,
          "receive": 12.1019999996861,
          "ssl": -1
        },
        "connection": "3611",
        "pageref": "page_2"
      },
      {
        "startedDateTime": "2015-06-09T16:53:05.155Z",
        "time": 8.418999999776133,
        "request": {
          "method": "GET",
          "url": "http://localhost:9001/locales.json",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "If-None-Match",
              "value": "W/\"GfFBdoya59/nLP6AShHP0g==\""
            },
            {
              "name": "DNT",
              "value": "1"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, sdch"
            },
            {
              "name": "Host",
              "value": "localhost:9001"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.8,de;q=0.6"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.81 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Referer",
              "value": "http://localhost:9001/p/bla"
            },
            {
              "name": "Cookie",
              "value": "token=t.ltaoBcvzTd2Qbc9Uqjas; express_sid=s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            }
          ],
          "queryString": [],
          "cookies": [
            {
              "name": "token",
              "value": "t.ltaoBcvzTd2Qbc9Uqjas",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "express_sid",
              "value": "s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo",
              "expires": null,
              "httpOnly": false,
              "secure": false
            }
          ],
          "headersSize": 522,
          "bodySize": 0
        },
        "response": {
          "status": 304,
          "statusText": "Not Modified",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Date",
              "value": "Tue, 09 Jun 2015 16:53:05 GMT"
            },
            {
              "name": "ETag",
              "value": "W/\"GfFBdoya59/nLP6AShHP0g==\""
            },
            {
              "name": "Server",
              "value": "Etherpad d11c92c (http://etherpad.org)"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            },
            {
              "name": "X-UA-Compatible",
              "value": "IE=Edge,chrome=1"
            }
          ],
          "cookies": [],
          "content": {
            "size": 10041,
            "mimeType": "application/json",
            "text": "{\"af\":\"locales/af.json\",\"ar\":\"locales/ar.json\",\"ast\":\"locales/ast.json\",\"az\":\"locales/az.json\",\"azb\":\"locales/azb.json\",\"bcc\":\"locales/bcc.json\",\"be-tarask\":\"locales/be-tarask.json\",\"bn\":\"locales/bn.json\",\"br\":\"locales/br.json\",\"ca\":\"locales/ca.json\",\"cs\":\"locales/cs.json\",\"da\":\"locales/da.json\",\"de\":\"locales/de.json\",\"diq\":\"locales/diq.json\",\"dsb\":\"locales/dsb.json\",\"el\":\"locales/el.json\",\"en-gb\":\"locales/en-gb.json\",\"en\":{\"index.newPad\":\"New Pad\",\"index.createOpenPad\":\"or create/open a Pad with the name:\",\"pad.toolbar.bold.title\":\"Bold (Ctrl+B)\",\"pad.toolbar.italic.title\":\"Italic (Ctrl+I)\",\"pad.toolbar.underline.title\":\"Underline (Ctrl+U)\",\"pad.toolbar.strikethrough.title\":\"Strikethrough (Ctrl+5)\",\"pad.toolbar.ol.title\":\"Ordered list (Ctrl+Shift+N)\",\"pad.toolbar.ul.title\":\"Unordered List (Ctrl+Shift+L)\",\"pad.toolbar.indent.title\":\"Indent (TAB)\",\"pad.toolbar.unindent.title\":\"Outdent (Shift+TAB)\",\"pad.toolbar.undo.title\":\"Undo (Ctrl+Z)\",\"pad.toolbar.redo.title\":\"Redo (Ctrl+Y)\",\"pad.toolbar.clearAuthorship.title\":\"Clear Authorship Colors (Ctrl+Shift+C)\",\"pad.toolbar.import_export.title\":\"Import/Export from/to different file formats\",\"pad.toolbar.timeslider.title\":\"Timeslider\",\"pad.toolbar.savedRevision.title\":\"Save Revision\",\"pad.toolbar.settings.title\":\"Settings\",\"pad.toolbar.embed.title\":\"Share and Embed this pad\",\"pad.toolbar.showusers.title\":\"Show the users on this pad\",\"pad.colorpicker.save\":\"Save\",\"pad.colorpicker.cancel\":\"Cancel\",\"pad.loading\":\"Loading...\",\"pad.noCookie\":\"Cookie could not be found. Please allow cookies in your browser!\",\"pad.passwordRequired\":\"You need a password to access this pad\",\"pad.permissionDenied\":\"You do not have permission to access this pad\",\"pad.wrongPassword\":\"Your password was wrong\",\"pad.settings.padSettings\":\"Pad Settings\",\"pad.settings.myView\":\"My View\",\"pad.settings.stickychat\":\"Chat always on screen\",\"pad.settings.chatandusers\":\"Show Chat and Users\",\"pad.settings.colorcheck\":\"Authorship colors\",\"pad.settings.linenocheck\":\"Line numbers\",\"pad.settings.rtlcheck\":\"Read content from right to left?\",\"pad.settings.fontType\":\"Font type:\",\"pad.settings.fontType.normal\":\"Normal\",\"pad.settings.fontType.opendyslexic\":\"Open Dyslexic\",\"pad.settings.fontType.monospaced\":\"Monospace\",\"pad.settings.fontType.comicsans\":\"Comic Sans\",\"pad.settings.fontType.couriernew\":\"Courier New\",\"pad.settings.fontType.georgia\":\"Georgia\",\"pad.settings.fontType.impact\":\"Impact\",\"pad.settings.fontType.lucida\":\"Lucida\",\"pad.settings.fontType.lucidasans\":\"Lucida Sans\",\"pad.settings.fontType.palatino\":\"Palatino\",\"pad.settings.fontType.tahoma\":\"Tahoma\",\"pad.settings.fontType.timesnewroman\":\"Times New Roman\",\"pad.settings.fontType.trebuchet\":\"Trebuchet\",\"pad.settings.fontType.verdana\":\"Verdana\",\"pad.settings.fontType.symbol\":\"Symbol\",\"pad.settings.fontType.webdings\":\"Webdings\",\"pad.settings.fontType.wingdings\":\"Wingdings\",\"pad.settings.fontType.sansserif\":\"Sans Serif\",\"pad.settings.fontType.serif\":\"Serif\",\"pad.settings.globalView\":\"Global View\",\"pad.settings.language\":\"Language:\",\"pad.importExport.import_export\":\"Import/Export\",\"pad.importExport.import\":\"Upload any text file or document\",\"pad.importExport.importSuccessful\":\"Successful!\",\"pad.importExport.export\":\"Export current pad as:\",\"pad.importExport.exportetherpad\":\"Etherpad\",\"pad.importExport.exporthtml\":\"HTML\",\"pad.importExport.exportplain\":\"Plain text\",\"pad.importExport.exportword\":\"Microsoft Word\",\"pad.importExport.exportpdf\":\"PDF\",\"pad.importExport.exportopen\":\"ODF (Open Document Format)\",\"pad.importExport.abiword.innerHTML\":\"You only can import from plain text or HTML formats. For more advanced import features please <a href=\\\"https://github.com/ether/etherpad-lite/wiki/How-to-enable-importing-and-exporting-different-file-formats-in-Ubuntu-or-OpenSuse-or-SLES-with-AbiWord\\\">install abiword</a>.\",\"pad.modals.connected\":\"Connected.\",\"pad.modals.reconnecting\":\"Reconnecting to your pad..\",\"pad.modals.forcereconnect\":\"Force reconnect\",\"pad.modals.userdup\":\"Opened in another window\",\"pad.modals.userdup.explanation\":\"This pad seems to be opened in more than one browser window on this computer.\",\"pad.modals.userdup.advice\":\"Reconnect to use this window instead.\",\"pad.modals.unauth\":\"Not authorized\",\"pad.modals.unauth.explanation\":\"Your permissions have changed while viewing this page. Try to reconnect.\",\"pad.modals.looping.explanation\":\"There are communication problems with the synchronization server.\",\"pad.modals.looping.cause\":\"Perhaps you connected through an incompatible firewall or proxy.\",\"pad.modals.initsocketfail\":\"Server is unreachable.\",\"pad.modals.initsocketfail.explanation\":\"Couldn't connect to the synchronization server.\",\"pad.modals.initsocketfail.cause\":\"This is probably due to a problem with your browser or your internet connection.\",\"pad.modals.slowcommit.explanation\":\"The server is not responding.\",\"pad.modals.slowcommit.cause\":\"This could be due to problems with network connectivity.\",\"pad.modals.badChangeset.explanation\":\"An edit you have made was classified illegal by the synchronization server.\",\"pad.modals.badChangeset.cause\":\"This could be due to a wrong server configuration or some other unexpected behavior. Please contact the service administrator, if you feel this is an error. Try to reconnect in order to continue editing.\",\"pad.modals.corruptPad.explanation\":\"The pad you are trying to access is corrupt.\",\"pad.modals.corruptPad.cause\":\"This may be due to a wrong server configuration or some other unexpected behavior. Please contact the service administrator.\",\"pad.modals.deleted\":\"Deleted.\",\"pad.modals.deleted.explanation\":\"This pad has been removed.\",\"pad.modals.disconnected\":\"You have been disconnected.\",\"pad.modals.disconnected.explanation\":\"The connection to the server was lost\",\"pad.modals.disconnected.cause\":\"The server may be unavailable. Please notify the service administrator if this continues to happen.\",\"pad.share\":\"Share this pad\",\"pad.share.readonly\":\"Read only\",\"pad.share.link\":\"Link\",\"pad.share.emebdcode\":\"Embed URL\",\"pad.chat\":\"Chat\",\"pad.chat.title\":\"Open the chat for this pad.\",\"pad.chat.loadmessages\":\"Load more messages\",\"timeslider.pageTitle\":\"{{appTitle}} Timeslider\",\"timeslider.toolbar.returnbutton\":\"Return to pad\",\"timeslider.toolbar.authors\":\"Authors:\",\"timeslider.toolbar.authorsList\":\"No Authors\",\"timeslider.toolbar.exportlink.title\":\"Export\",\"timeslider.exportCurrent\":\"Export current version as:\",\"timeslider.version\":\"Version {{version}}\",\"timeslider.saved\":\"Saved {{month}} {{day}}, {{year}}\",\"timeslider.playPause\":\"Playback / Pause Pad Contents\",\"timeslider.backRevision\":\"Go back a revision in this Pad\",\"timeslider.forwardRevision\":\"Go forward a revision in this Pad\",\"timeslider.dateformat\":\"{{month}}/{{day}}/{{year}} {{hours}}:{{minutes}}:{{seconds}}\",\"timeslider.month.january\":\"January\",\"timeslider.month.february\":\"February\",\"timeslider.month.march\":\"March\",\"timeslider.month.april\":\"April\",\"timeslider.month.may\":\"May\",\"timeslider.month.june\":\"June\",\"timeslider.month.july\":\"July\",\"timeslider.month.august\":\"August\",\"timeslider.month.september\":\"September\",\"timeslider.month.october\":\"October\",\"timeslider.month.november\":\"November\",\"timeslider.month.december\":\"December\",\"timeslider.unnamedauthors\":\"{{num}} unnamed {[plural(num) one: author, other: authors ]}\",\"pad.savedrevs.marked\":\"This revision is now marked as a saved revision\",\"pad.savedrevs.timeslider\":\"You can see saved revisions by visiting the timeslider\",\"pad.userlist.entername\":\"Enter your name\",\"pad.userlist.unnamed\":\"unnamed\",\"pad.userlist.guest\":\"Guest\",\"pad.userlist.deny\":\"Deny\",\"pad.userlist.approve\":\"Approve\",\"pad.editbar.clearcolors\":\"Clear authorship colors on entire document?\",\"pad.impexp.importbutton\":\"Import Now\",\"pad.impexp.importing\":\"Importing...\",\"pad.impexp.confirmimport\":\"Importing a file will overwrite the current text of the pad. Are you sure you want to proceed?\",\"pad.impexp.convertFailed\":\"We were not able to import this file. Please use a different document format or copy paste manually\",\"pad.impexp.padHasData\":\"We were not able to import this file because this Pad has already had changes, please import to a new pad\",\"pad.impexp.uploadFailed\":\"The upload failed, please try again\",\"pad.impexp.importfailed\":\"Import failed\",\"pad.impexp.copypaste\":\"Please copy paste\",\"pad.impexp.exportdisabled\":\"Exporting as {{type}} format is disabled. Please contact your system administrator for details.\",\"ep_headings.style\":\"Style\",\"ep_headings.normal\":\"Normal\",\"ep_headings.h1\":\"Heading 1\",\"ep_headings.h2\":\"Heading 2\",\"ep_headings.h3\":\"Heading 3\",\"ep_headings.h4\":\"Heading 4\",\"ep_headings.h5\":\"Heading 5\",\"ep_headings.h6\":\"Heading 6\",\"ep_headings.code\":\"Code\"},\"eo\":\"locales/eo.json\",\"es\":\"locales/es.json\",\"et\":\"locales/et.json\",\"eu\":\"locales/eu.json\",\"fa\":\"locales/fa.json\",\"fi\":\"locales/fi.json\",\"fo\":\"locales/fo.json\",\"fr\":\"locales/fr.json\",\"gl\":\"locales/gl.json\",\"he\":\"locales/he.json\",\"hsb\":\"locales/hsb.json\",\"hu\":\"locales/hu.json\",\"ia\":\"locales/ia.json\",\"is\":\"locales/is.json\",\"it\":\"locales/it.json\",\"ja\":\"locales/ja.json\",\"km\":\"locales/km.json\",\"ko\":\"locales/ko.json\",\"ksh\":\"locales/ksh.json\",\"ku-latn\":\"locales/ku-latn.json\",\"lb\":\"locales/lb.json\",\"lt\":\"locales/lt.json\",\"lv\":\"locales/lv.json\",\"map-bms\":\"locales/map-bms.json\",\"mk\":\"locales/mk.json\",\"ml\":\"locales/ml.json\",\"mn\":\"locales/mn.json\",\"mr\":\"locales/mr.json\",\"ms\":\"locales/ms.json\",\"nap\":\"locales/nap.json\",\"nb\":\"locales/nb.json\",\"nds\":\"locales/nds.json\",\"ne\":\"locales/ne.json\",\"nl\":\"locales/nl.json\",\"nn\":\"locales/nn.json\",\"oc\":\"locales/oc.json\",\"os\":\"locales/os.json\",\"pa\":\"locales/pa.json\",\"pl\":\"locales/pl.json\",\"ps\":\"locales/ps.json\",\"pt-br\":\"locales/pt-br.json\",\"pt\":\"locales/pt.json\",\"ro\":\"locales/ro.json\",\"ru\":\"locales/ru.json\",\"sco\":\"locales/sco.json\",\"sk\":\"locales/sk.json\",\"sl\":\"locales/sl.json\",\"sq\":\"locales/sq.json\",\"sr-ec\":\"locales/sr-ec.json\",\"sv\":\"locales/sv.json\",\"te\":\"locales/te.json\",\"tr\":\"locales/tr.json\",\"uk\":\"locales/uk.json\",\"vi\":\"locales/vi.json\",\"zh-hans\":\"locales/zh-hans.json\",\"zh-hant\":\"locales/zh-hant.json\"}"
          },
          "redirectURL": "",
          "headersSize": 232,
          "bodySize": 0,
          "_transferSize": 232
        },
        "cache": {},
        "timings": {
          "blocked": 3.77200000002631,
          "dns": -1,
          "connect": -1,
          "send": 0.11699999959092011,
          "wait": 2.44700000075681,
          "receive": 2.0829999994020936,
          "ssl": -1
        },
        "connection": "3611",
        "pageref": "page_2"
      },
      {
        "startedDateTime": "2015-06-09T16:53:05.180Z",
        "time": 32.52599999996164,
        "request": {
          "method": "GET",
          "url": "http://localhost:9001/javascripts/lib/ep_headings2/static/js/index.js?callback=require.define",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "DNT",
              "value": "1"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, sdch"
            },
            {
              "name": "Host",
              "value": "localhost:9001"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.8,de;q=0.6"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.81 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Referer",
              "value": "http://localhost:9001/p/bla"
            },
            {
              "name": "Cookie",
              "value": "token=t.ltaoBcvzTd2Qbc9Uqjas; express_sid=s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "If-Modified-Since",
              "value": "Wed, 18 Feb 2015 02:57:12 GMT"
            }
          ],
          "queryString": [
            {
              "name": "callback",
              "value": "require.define"
            }
          ],
          "cookies": [
            {
              "name": "token",
              "value": "t.ltaoBcvzTd2Qbc9Uqjas",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "express_sid",
              "value": "s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo",
              "expires": null,
              "httpOnly": false,
              "secure": false
            }
          ],
          "headersSize": 586,
          "bodySize": 0
        },
        "response": {
          "status": 304,
          "statusText": "Not Modified",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "date",
              "value": "Tue, 09 Jun 2015 16:53:05 GMT"
            },
            {
              "name": "x-content-type-options",
              "value": "nosniff"
            },
            {
              "name": "last-modified",
              "value": "Wed, 18 Feb 2015 02:57:12 GMT"
            },
            {
              "name": "Server",
              "value": "Etherpad d11c92c (http://etherpad.org)"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            },
            {
              "name": "content-type",
              "value": "application/javascript; charset=utf-8"
            },
            {
              "name": "cache-control",
              "value": "max-age=21600"
            },
            {
              "name": "X-UA-Compatible",
              "value": "IE=Edge,chrome=1"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "expires",
              "value": "Tue, 09 Jun 2015 22:53:05 GMT"
            }
          ],
          "cookies": [],
          "content": {
            "size": 4276,
            "mimeType": "application/javascript",
            "text": "require.define({\n  \"ep_headings2/static/js/index.js\": function (require, exports, module) {\nvar _, $, jQuery;\n\nvar $ = require('ep_etherpad-lite/static/js/rjquery').$;\nvar _ = require('ep_etherpad-lite/static/js/underscore');\nvar headingClass = 'heading';\nvar cssFiles = ['ep_headings2/static/css/editor.css'];\n\n// All our tags are block elements, so we just return them.\nvar tags = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'code'];\nexports.aceRegisterBlockElements = function(){\n  return tags;\n}\n\n// Bind the event handler to the toolbar buttons\nexports.postAceInit = function(hook, context){\n  var hs = $('#heading-selection');\n  hs.on('change', function(){\n    var value = $(this).val();\n    var intValue = parseInt(value,10);\n    if(!_.isNaN(intValue)){\n      context.ace.callWithAce(function(ace){\n        ace.ace_doInsertHeading(intValue);\n      },'insertheading' , true);\n      hs.val(\"dummy\");\n    }\n  })\n};\n\n// On caret position change show the current heading\nexports.aceEditEvent = function(hook, call, cb){\n\n  // If it's not a click or a key event and the text hasn't changed then do nothing\n  var cs = call.callstack;\n  if(!(cs.type == \"handleClick\") && !(cs.type == \"handleKeyEvent\") && !(cs.docTextChanged)){\n    return false;\n  }\n  // If it's an initial setup event then do nothing..\n  if(cs.type == \"setBaseText\" || cs.type == \"setup\") return false;\n\n  // It looks like we should check to see if this section has this attribute\n  setTimeout(function(){ // avoid race condition..\n    var attributeManager = call.documentAttributeManager;\n    var rep = call.rep;\n    var firstLine, lastLine;\n    var activeAttributes = {};\n    $(\"#heading-selection\").val(-2);\n  \n    firstLine = rep.selStart[0];\n    lastLine = Math.max(firstLine, rep.selEnd[0] - ((rep.selEnd[1] === 0) ? 1 : 0));\n    var totalNumberOfLines = 0;\n\n    _(_.range(firstLine, lastLine + 1)).each(function(line){\n      totalNumberOfLines++;\n      var attr = attributeManager.getAttributeOnLine(line, \"heading\");\n      if(!activeAttributes[attr]){\n        activeAttributes[attr] = {};\n        activeAttributes[attr].count = 1;\n      }else{\n        activeAttributes[attr].count++;\n      }\n    });\n    \n    $.each(activeAttributes, function(k, attr){\n      if(attr.count === totalNumberOfLines){\n        // show as active class\n        var ind = tags.indexOf(k);\n        $(\"#heading-selection\").val(ind);\n      }\n    });\n\n  },250);\n\n}\n\n// Our heading attribute will result in a heaading:h1... :h6 class\nexports.aceAttribsToClasses = function(hook, context){\n  if(context.key == 'heading'){\n    return ['heading:' + context.value ];\n  }\n}\n\n// Here we convert the class heading:h1 into a tag\nexports.aceDomLineProcessLineAttributes = function(name, context){\n  var cls = context.cls;\n  var domline = context.domline;\n  var headingType = /(?:^| )heading:([A-Za-z0-9]*)/.exec(cls);\n  var tagIndex;\n  \n  if (headingType) tagIndex = _.indexOf(tags, headingType[1]);\n  \n  if (tagIndex !== undefined && tagIndex >= 0){\n    \n    var tag = tags[tagIndex];\n    var modifier = {\n      preHtml: '<' + tag + '>',\n      postHtml: '</' + tag + '>',\n      processedMarker: true\n    };\n    return [modifier];\n  }\n  return [];\n};\n\n// Find out which lines are selected and assign them the heading attribute.\n// Passing a level >= 0 will set a heading on the selected lines, level < 0 \n// will remove it\nfunction doInsertHeading(level){\n  var rep = this.rep,\n    documentAttributeManager = this.documentAttributeManager;\n  if (!(rep.selStart && rep.selEnd) || (level >= 0 && tags[level] === undefined))\n  {\n    return;\n  }\n  \n  var firstLine, lastLine;\n  \n  firstLine = rep.selStart[0];\n  lastLine = Math.max(firstLine, rep.selEnd[0] - ((rep.selEnd[1] === 0) ? 1 : 0));\n  _(_.range(firstLine, lastLine + 1)).each(function(i){\n    if(level >= 0){\n      documentAttributeManager.setAttributeOnLine(i, 'heading', tags[level]);\n    }else{\n      documentAttributeManager.removeAttributeOnLine(i, 'heading');\n    }\n  });\n}\n\n\n// Once ace is initialized, we set ace_doInsertHeading and bind it to the context\nexports.aceInitialized = function(hook, context){\n  var editorInfo = context.editorInfo;\n  editorInfo.ace_doInsertHeading = _(doInsertHeading).bind(context);\n}\n\nexports.aceEditorCSS = function(){\n  return cssFiles;\n};\n\n\n}\n});\n"
          },
          "redirectURL": "",
          "headersSize": 398,
          "bodySize": 0,
          "_transferSize": 398
        },
        "cache": {},
        "timings": {
          "blocked": 22.8059999999459,
          "dns": -1,
          "connect": -1,
          "send": 0.09099999988400143,
          "wait": 6.374999999934499,
          "receive": 3.254000000197241,
          "ssl": -1
        },
        "connection": "3611",
        "pageref": "page_2"
      },
      {
        "startedDateTime": "2015-06-09T16:53:05.216Z",
        "time": 20.7829999999376,
        "request": {
          "method": "GET",
          "url": "http://localhost:9001/javascripts/lib/ep_headings2/static/js/shared.js?callback=require.define",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "DNT",
              "value": "1"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, sdch"
            },
            {
              "name": "Host",
              "value": "localhost:9001"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.8,de;q=0.6"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.81 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Referer",
              "value": "http://localhost:9001/p/bla"
            },
            {
              "name": "Cookie",
              "value": "token=t.ltaoBcvzTd2Qbc9Uqjas; express_sid=s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "If-Modified-Since",
              "value": "Wed, 18 Feb 2015 02:57:12 GMT"
            }
          ],
          "queryString": [
            {
              "name": "callback",
              "value": "require.define"
            }
          ],
          "cookies": [
            {
              "name": "token",
              "value": "t.ltaoBcvzTd2Qbc9Uqjas",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "express_sid",
              "value": "s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo",
              "expires": null,
              "httpOnly": false,
              "secure": false
            }
          ],
          "headersSize": 587,
          "bodySize": 0
        },
        "response": {
          "status": 304,
          "statusText": "Not Modified",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "date",
              "value": "Tue, 09 Jun 2015 16:53:05 GMT"
            },
            {
              "name": "x-content-type-options",
              "value": "nosniff"
            },
            {
              "name": "last-modified",
              "value": "Wed, 18 Feb 2015 02:57:12 GMT"
            },
            {
              "name": "Server",
              "value": "Etherpad d11c92c (http://etherpad.org)"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            },
            {
              "name": "content-type",
              "value": "application/javascript; charset=utf-8"
            },
            {
              "name": "cache-control",
              "value": "max-age=21600"
            },
            {
              "name": "X-UA-Compatible",
              "value": "IE=Edge,chrome=1"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "expires",
              "value": "Tue, 09 Jun 2015 22:53:05 GMT"
            }
          ],
          "cookies": [],
          "content": {
            "size": 964,
            "mimeType": "application/javascript",
            "text": "require.define({\n  \"ep_headings2/static/js/shared.js\": function (require, exports, module) {\nvar _ = require('ep_etherpad-lite/static/js/underscore');\n\nvar tags = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'code'];\n\nvar collectContentPre = function(hook, context){\n  var tname = context.tname;\n  var state = context.state;\n  var lineAttributes = state.lineAttributes\n  var tagIndex = _.indexOf(tags, tname);\n  if(tname === \"div\" || tname === \"p\"){\n    delete lineAttributes['heading'];\n  }\n  if(tagIndex >= 0){\n    lineAttributes['heading'] = tags[tagIndex];\n  }\n};\n\n// I don't even know when this is run..\nvar collectContentPost = function(hook, context){\n  var tname = context.tname;\n  var state = context.state;\n  var lineAttributes = state.lineAttributes\n  var tagIndex = _.indexOf(tags, tname);\n  if(tagIndex >= 0){\n    delete lineAttributes['heading'];\n  }\n};\n\nexports.collectContentPre = collectContentPre;\nexports.collectContentPost = collectContentPost;\n\n}\n});\n"
          },
          "redirectURL": "",
          "headersSize": 398,
          "bodySize": 0,
          "_transferSize": 398
        },
        "cache": {},
        "timings": {
          "blocked": 14.5270000002711,
          "dns": -1,
          "connect": -1,
          "send": 0.08600000001020014,
          "wait": 4.0679999992789995,
          "receive": 2.102000000377302,
          "ssl": -1
        },
        "connection": "3611",
        "pageref": "page_2"
      },
      {
        "startedDateTime": "2015-06-09T16:53:05.242Z",
        "time": 10.726999999860709,
        "request": {
          "method": "GET",
          "url": "http://localhost:9001/locales/en-gb.json",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "If-None-Match",
              "value": "W/\"FFDw4oOvA93dz3SC/3A0rA==\""
            },
            {
              "name": "DNT",
              "value": "1"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, sdch"
            },
            {
              "name": "Host",
              "value": "localhost:9001"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.8,de;q=0.6"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.81 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Referer",
              "value": "http://localhost:9001/p/bla"
            },
            {
              "name": "Cookie",
              "value": "token=t.ltaoBcvzTd2Qbc9Uqjas; express_sid=s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            }
          ],
          "queryString": [],
          "cookies": [
            {
              "name": "token",
              "value": "t.ltaoBcvzTd2Qbc9Uqjas",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "express_sid",
              "value": "s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo",
              "expires": null,
              "httpOnly": false,
              "secure": false
            }
          ],
          "headersSize": 528,
          "bodySize": 0
        },
        "response": {
          "status": 304,
          "statusText": "Not Modified",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Date",
              "value": "Tue, 09 Jun 2015 16:53:05 GMT"
            },
            {
              "name": "ETag",
              "value": "W/\"FFDw4oOvA93dz3SC/3A0rA==\""
            },
            {
              "name": "Server",
              "value": "Etherpad d11c92c (http://etherpad.org)"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            },
            {
              "name": "X-UA-Compatible",
              "value": "IE=Edge,chrome=1"
            }
          ],
          "cookies": [],
          "content": {
            "size": 7155,
            "mimeType": "application/json",
            "text": "{\"en-gb\":{\"@metadata\":{\"authors\":[\"Chase me ladies, I'm the Cavalry\",\"Shirayuki\"]},\"index.newPad\":\"New Pad\",\"index.createOpenPad\":\"or create/open a Pad with the name:\",\"pad.toolbar.bold.title\":\"Bold (Ctrl+B)\",\"pad.toolbar.italic.title\":\"Italic (Ctrl+I)\",\"pad.toolbar.underline.title\":\"Underline (Ctrl+U)\",\"pad.toolbar.strikethrough.title\":\"Strikethrough (Ctrl+5)\",\"pad.toolbar.ol.title\":\"Ordered list (Ctrl+Shift+N)\",\"pad.toolbar.ul.title\":\"Unordered List (Ctrl+Shift+L)\",\"pad.toolbar.indent.title\":\"Indent (Tab)\",\"pad.toolbar.unindent.title\":\"Outdent (Shift+Tab)\",\"pad.toolbar.undo.title\":\"Undo (Ctrl+Z)\",\"pad.toolbar.redo.title\":\"Redo (Ctrl+Y)\",\"pad.toolbar.clearAuthorship.title\":\"Clear Authorship Colours (Ctrl+Shift+C)\",\"pad.toolbar.import_export.title\":\"Import/Export from/to different file formats\",\"pad.toolbar.timeslider.title\":\"Timeslider\",\"pad.toolbar.savedRevision.title\":\"Save Revision\",\"pad.toolbar.settings.title\":\"Settings\",\"pad.toolbar.embed.title\":\"Share and Embed this pad\",\"pad.toolbar.showusers.title\":\"Show the users on this pad\",\"pad.colorpicker.save\":\"Save\",\"pad.colorpicker.cancel\":\"Cancel\",\"pad.loading\":\"Loading...\",\"pad.noCookie\":\"Cookie could not be found. Please allow cookies in your browser!\",\"pad.passwordRequired\":\"You need a password to access this pad\",\"pad.permissionDenied\":\"You do not have permission to access this pad\",\"pad.wrongPassword\":\"Your password was wrong\",\"pad.settings.padSettings\":\"Pad Settings\",\"pad.settings.myView\":\"My View\",\"pad.settings.stickychat\":\"Chat always on screen\",\"pad.settings.chatandusers\":\"Show Chat and Users\",\"pad.settings.colorcheck\":\"Authorship colours\",\"pad.settings.linenocheck\":\"Line numbers\",\"pad.settings.rtlcheck\":\"Read content from right to left?\",\"pad.settings.fontType\":\"Font type:\",\"pad.settings.fontType.normal\":\"Normal\",\"pad.settings.fontType.monospaced\":\"Monospace\",\"pad.settings.globalView\":\"Global View\",\"pad.settings.language\":\"Language:\",\"pad.importExport.import_export\":\"Import/Export\",\"pad.importExport.import\":\"Upload any text file or document\",\"pad.importExport.importSuccessful\":\"Successful!\",\"pad.importExport.export\":\"Export current pad as:\",\"pad.importExport.exportetherpad\":\"Etherpad\",\"pad.importExport.exporthtml\":\"HTML\",\"pad.importExport.exportplain\":\"Plain text\",\"pad.importExport.exportword\":\"Microsoft Word\",\"pad.importExport.exportpdf\":\"PDF\",\"pad.importExport.exportopen\":\"ODF (Open Document Format)\",\"pad.importExport.abiword.innerHTML\":\"You only can import from plain text or HTML formats. For more advanced import features please <a href=\\\"https://github.com/ether/etherpad-lite/wiki/How-to-enable-importing-and-exporting-different-file-formats-in-Ubuntu-or-OpenSuse-or-SLES-with-AbiWord\\\">install abiword</a>.\",\"pad.modals.connected\":\"Connected.\",\"pad.modals.reconnecting\":\"Reconnecting to your pad..\",\"pad.modals.forcereconnect\":\"Force reconnect\",\"pad.modals.userdup\":\"Opened in another window\",\"pad.modals.userdup.explanation\":\"This pad seems to be opened in more than one browser window on this computer.\",\"pad.modals.userdup.advice\":\"Reconnect to use this window instead.\",\"pad.modals.unauth\":\"Not authorised\",\"pad.modals.unauth.explanation\":\"Your permissions have changed while viewing this page. Try to reconnect.\",\"pad.modals.looping.explanation\":\"There are communication problems with the synchronisation server.\",\"pad.modals.looping.cause\":\"Perhaps you connected through an incompatible firewall or proxy.\",\"pad.modals.initsocketfail\":\"Server is unreachable.\",\"pad.modals.initsocketfail.explanation\":\"Couldn't connect to the synchronisation server.\",\"pad.modals.initsocketfail.cause\":\"This is probably due to a problem with your browser or your internet connection.\",\"pad.modals.slowcommit.explanation\":\"The server is not responding.\",\"pad.modals.slowcommit.cause\":\"This could be due to problems with network connectivity.\",\"pad.modals.badChangeset.explanation\":\"An edit you have made was classified illegal by the synchronisation server.\",\"pad.modals.badChangeset.cause\":\"This could be due to a wrong server configuration or some other unexpected behaviour. Please contact the service administrator, if you feel this is an error. Try to reconnect in order to continue editing.\",\"pad.modals.corruptPad.explanation\":\"The pad you are trying to access is corrupt.\",\"pad.modals.corruptPad.cause\":\"This may be due to a wrong server configuration or some other unexpected behaviour. Please contact the service administrator.\",\"pad.modals.deleted\":\"Deleted.\",\"pad.modals.deleted.explanation\":\"This pad has been removed.\",\"pad.modals.disconnected\":\"You have been disconnected.\",\"pad.modals.disconnected.explanation\":\"The connection to the server was lost\",\"pad.modals.disconnected.cause\":\"The server may be unavailable. Please notify the service administrator if this continues to happen.\",\"pad.share\":\"Share this pad\",\"pad.share.readonly\":\"Read only\",\"pad.share.link\":\"Link\",\"pad.share.emebdcode\":\"Embed URL\",\"pad.chat\":\"Chat\",\"pad.chat.title\":\"Open the chat for this pad.\",\"pad.chat.loadmessages\":\"Load more messages\",\"timeslider.pageTitle\":\"{{appTitle}} Timeslider\",\"timeslider.toolbar.returnbutton\":\"Return to pad\",\"timeslider.toolbar.authors\":\"Authors:\",\"timeslider.toolbar.authorsList\":\"No Authors\",\"timeslider.toolbar.exportlink.title\":\"Export\",\"timeslider.exportCurrent\":\"Export current version as:\",\"timeslider.version\":\"Version {{version}}\",\"timeslider.saved\":\"Saved {{month}} {{day}}, {{year}}\",\"timeslider.dateformat\":\"{{day}}/{{month}}/{{year}} {{hours}}:{{minutes}}:{{seconds}}\",\"timeslider.month.january\":\"January\",\"timeslider.month.february\":\"February\",\"timeslider.month.march\":\"March\",\"timeslider.month.april\":\"April\",\"timeslider.month.may\":\"May\",\"timeslider.month.june\":\"June\",\"timeslider.month.july\":\"July\",\"timeslider.month.august\":\"August\",\"timeslider.month.september\":\"September\",\"timeslider.month.october\":\"October\",\"timeslider.month.november\":\"November\",\"timeslider.month.december\":\"December\",\"timeslider.unnamedauthors\":\"{{num}} unnamed {[plural(num) one: author, other: authors ]}\",\"pad.savedrevs.marked\":\"This revision is now marked as a saved revision\",\"pad.savedrevs.timeslider\":\"You can see saved revisions by visiting the timeslider\",\"pad.userlist.entername\":\"Enter your name\",\"pad.userlist.unnamed\":\"unnamed\",\"pad.userlist.guest\":\"Guest\",\"pad.userlist.deny\":\"Deny\",\"pad.userlist.approve\":\"Approve\",\"pad.editbar.clearcolors\":\"Clear authorship colours on entire document?\",\"pad.impexp.importbutton\":\"Import Now\",\"pad.impexp.importing\":\"Importing...\",\"pad.impexp.confirmimport\":\"Importing a file will overwrite the current text of the pad. Are you sure you want to proceed?\",\"pad.impexp.convertFailed\":\"We were not able to import this file. Please use a different document format or copy & paste manually\",\"pad.impexp.padHasData\":\"We were not able to import this file because this Pad has already had changes, please import to a new pad\",\"pad.impexp.uploadFailed\":\"The upload failed, please try again\",\"pad.impexp.importfailed\":\"Import failed\",\"pad.impexp.copypaste\":\"Please copy & paste\",\"pad.impexp.exportdisabled\":\"Exporting as {{type}} format is disabled. Please contact your system administrator for details.\"}}"
          },
          "redirectURL": "",
          "headersSize": 232,
          "bodySize": 0,
          "_transferSize": 232
        },
        "cache": {},
        "timings": {
          "blocked": 4.6280000005936,
          "dns": -1,
          "connect": -1,
          "send": 0.13299999955052044,
          "wait": 3.991999999925609,
          "receive": 1.9739999997909798,
          "ssl": -1
        },
        "connection": "3611",
        "pageref": "page_2"
      },
      {
        "startedDateTime": "2015-06-09T16:53:05.247Z",
        "time": 32.75000000030559,
        "request": {
          "method": "GET",
          "url": "http://localhost:9001/socket.io/?EIO=3&transport=polling&t=1433868785245-0",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "DNT",
              "value": "1"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, sdch"
            },
            {
              "name": "Host",
              "value": "localhost:9001"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.8,de;q=0.6"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.81 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Referer",
              "value": "http://localhost:9001/p/bla"
            },
            {
              "name": "Cookie",
              "value": "token=t.ltaoBcvzTd2Qbc9Uqjas; express_sid=s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            }
          ],
          "queryString": [
            {
              "name": "EIO",
              "value": "3"
            },
            {
              "name": "transport",
              "value": "polling"
            },
            {
              "name": "t",
              "value": "1433868785245-0"
            }
          ],
          "cookies": [
            {
              "name": "token",
              "value": "t.ltaoBcvzTd2Qbc9Uqjas",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "express_sid",
              "value": "s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo",
              "expires": null,
              "httpOnly": false,
              "secure": false
            }
          ],
          "headersSize": 517,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Access-Control-Allow-Origin",
              "value": "*"
            },
            {
              "name": "Date",
              "value": "Tue, 09 Jun 2015 16:53:05 GMT"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Set-Cookie",
              "value": "io=irL-86ar2E_3lWI5AAAA"
            },
            {
              "name": "Content-Length",
              "value": "101"
            },
            {
              "name": "Content-Type",
              "value": "application/octet-stream"
            }
          ],
          "cookies": [
            {
              "name": "io",
              "value": "irL-86ar2E_3lWI5AAAA",
              "expires": null,
              "httpOnly": false,
              "secure": false
            }
          ],
          "content": {
            "size": 101,
            "mimeType": "application/octet-stream",
            "compression": 0,
            "text": "AAkH/zB7InNpZCI6ImlyTC04NmFyMkVfM2xXSTVBQUFBIiwidXBncmFkZXMiOlsid2Vic29ja2V0Il0sInBpbmdJbnRlcnZhbCI6MjUwMDAsInBpbmdUaW1lb3V0Ijo2MDAwMH0=",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": 210,
          "bodySize": 101,
          "_transferSize": 311
        },
        "cache": {},
        "timings": {
          "blocked": 19.3150000004607,
          "dns": -1,
          "connect": -1,
          "send": 0.09499999941910175,
          "wait": 11.035000000447297,
          "receive": 2.3049999999784916,
          "ssl": -1
        },
        "connection": "3611",
        "pageref": "page_2"
      },
      {
        "startedDateTime": "2015-06-09T16:53:05.318Z",
        "time": 28.088999999454245,
        "request": {
          "method": "GET",
          "url": "http://localhost:9001/socket.io/?EIO=3&transport=polling&t=1433868785316-1&sid=irL-86ar2E_3lWI5AAAA",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "DNT",
              "value": "1"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, sdch"
            },
            {
              "name": "Host",
              "value": "localhost:9001"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.8,de;q=0.6"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.81 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Referer",
              "value": "http://localhost:9001/p/bla"
            },
            {
              "name": "Cookie",
              "value": "io=irL-86ar2E_3lWI5AAAA; token=t.ltaoBcvzTd2Qbc9Uqjas; express_sid=s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo; test=test"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            }
          ],
          "queryString": [
            {
              "name": "EIO",
              "value": "3"
            },
            {
              "name": "transport",
              "value": "polling"
            },
            {
              "name": "t",
              "value": "1433868785316-1"
            },
            {
              "name": "sid",
              "value": "irL-86ar2E_3lWI5AAAA"
            }
          ],
          "cookies": [
            {
              "name": "io",
              "value": "irL-86ar2E_3lWI5AAAA",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "token",
              "value": "t.ltaoBcvzTd2Qbc9Uqjas",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "express_sid",
              "value": "s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "test",
              "value": "test",
              "expires": null,
              "httpOnly": false,
              "secure": false
            }
          ],
          "headersSize": 578,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Access-Control-Allow-Origin",
              "value": "*"
            },
            {
              "name": "Date",
              "value": "Tue, 09 Jun 2015 16:53:05 GMT"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Set-Cookie",
              "value": "io=irL-86ar2E_3lWI5AAAA"
            },
            {
              "name": "Content-Length",
              "value": "5"
            },
            {
              "name": "Content-Type",
              "value": "application/octet-stream"
            }
          ],
          "cookies": [
            {
              "name": "io",
              "value": "irL-86ar2E_3lWI5AAAA",
              "expires": null,
              "httpOnly": false,
              "secure": false
            }
          ],
          "content": {
            "size": 5,
            "mimeType": "application/octet-stream",
            "compression": 0,
            "text": "AAL/NDA=",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": 208,
          "bodySize": 5,
          "_transferSize": 213
        },
        "cache": {},
        "timings": {
          "blocked": 24.2170000001352,
          "dns": -1,
          "connect": -1,
          "send": 0.09599999975759843,
          "wait": 1.4380000002347018,
          "receive": 2.337999999326744,
          "ssl": -1
        },
        "connection": "3611",
        "pageref": "page_2"
      },
      {
        "startedDateTime": "2015-06-09T16:53:05.557Z",
        "time": 29.60799999982555,
        "request": {
          "method": "GET",
          "url": "http://localhost:9001/static/plugins/ep_headings2/static/css/editor.css",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "DNT",
              "value": "1"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, sdch"
            },
            {
              "name": "Host",
              "value": "localhost:9001"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.8,de;q=0.6"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.81 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "text/css,*/*;q=0.1"
            },
            {
              "name": "Referer",
              "value": "http://localhost:9001/p/bla"
            },
            {
              "name": "Cookie",
              "value": "token=t.ltaoBcvzTd2Qbc9Uqjas; express_sid=s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo; test=test"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "If-Modified-Since",
              "value": "Wed, 18 Feb 2015 02:57:12 GMT"
            }
          ],
          "queryString": [],
          "cookies": [
            {
              "name": "token",
              "value": "t.ltaoBcvzTd2Qbc9Uqjas",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "express_sid",
              "value": "s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "test",
              "value": "test",
              "expires": null,
              "httpOnly": false,
              "secure": false
            }
          ],
          "headersSize": 590,
          "bodySize": 0
        },
        "response": {
          "status": 304,
          "statusText": "Not Modified",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "date",
              "value": "Tue, 09 Jun 2015 16:53:05 GMT"
            },
            {
              "name": "last-modified",
              "value": "Wed, 18 Feb 2015 02:57:12 GMT"
            },
            {
              "name": "Server",
              "value": "Etherpad d11c92c (http://etherpad.org)"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            },
            {
              "name": "cache-control",
              "value": "max-age=21600"
            },
            {
              "name": "X-UA-Compatible",
              "value": "IE=Edge,chrome=1"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "expires",
              "value": "Tue, 09 Jun 2015 22:53:05 GMT"
            }
          ],
          "cookies": [],
          "content": {
            "size": 156,
            "mimeType": "text/css",
            "text": "h1,h2,h3,h4,h5,h6{line-height:120%}h1{font-size:2em}h2{font-size:1.5em}h3{font-size:1.17em}h5{font-size:.83em}h6{font-size:.75em}code{font-family:monospace}"
          },
          "redirectURL": "",
          "headersSize": 312,
          "bodySize": 0,
          "_transferSize": 312
        },
        "cache": {},
        "timings": {
          "blocked": 20.9459999996398,
          "dns": -1,
          "connect": -1,
          "send": 0.15900000016700133,
          "wait": 3.6250000002836984,
          "receive": 4.877999999735053,
          "ssl": -1
        },
        "connection": "3611",
        "pageref": "page_2"
      },
      {
        "startedDateTime": "2015-06-09T16:53:05.690Z",
        "time": 0,
        "request": {
          "method": "GET",
          "url": "http://localhost:9001/static/plugins/ep_headings2/static/css/editor.css",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "DNT",
              "value": "1"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, sdch"
            },
            {
              "name": "Host",
              "value": "localhost:9001"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.8,de;q=0.6"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.81 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "text/css,*/*;q=0.1"
            },
            {
              "name": "Referer",
              "value": "http://localhost:9001/p/bla"
            },
            {
              "name": "Cookie",
              "value": "token=t.ltaoBcvzTd2Qbc9Uqjas; express_sid=s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo; test=test"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "If-Modified-Since",
              "value": "Wed, 18 Feb 2015 02:57:12 GMT"
            }
          ],
          "queryString": [],
          "cookies": [
            {
              "name": "token",
              "value": "t.ltaoBcvzTd2Qbc9Uqjas",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "express_sid",
              "value": "s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "test",
              "value": "test",
              "expires": null,
              "httpOnly": false,
              "secure": false
            }
          ],
          "headersSize": 590,
          "bodySize": 0
        },
        "response": {
          "status": 304,
          "statusText": "Not Modified",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "date",
              "value": "Tue, 09 Jun 2015 16:53:05 GMT"
            },
            {
              "name": "last-modified",
              "value": "Wed, 18 Feb 2015 02:57:12 GMT"
            },
            {
              "name": "Server",
              "value": "Etherpad d11c92c (http://etherpad.org)"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            },
            {
              "name": "cache-control",
              "value": "max-age=21600"
            },
            {
              "name": "X-UA-Compatible",
              "value": "IE=Edge,chrome=1"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "expires",
              "value": "Tue, 09 Jun 2015 22:53:05 GMT"
            }
          ],
          "cookies": [],
          "content": {
            "size": 156,
            "mimeType": "text/css",
            "text": "h1,h2,h3,h4,h5,h6{line-height:120%}h1{font-size:2em}h2{font-size:1.5em}h3{font-size:1.17em}h5{font-size:.83em}h6{font-size:.75em}code{font-family:monospace}"
          },
          "redirectURL": "",
          "headersSize": 312,
          "bodySize": 0,
          "_transferSize": 0
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": 0,
          "wait": 0,
          "receive": 0,
          "ssl": -1
        },
        "connection": "3611",
        "pageref": "page_2"
      },
      {
        "startedDateTime": "2015-06-09T16:53:05.712Z",
        "time": 24.306000000251515,
        "request": {
          "method": "GET",
          "url": "http://localhost:9001/javascripts/lib/ep_etherpad-lite/static/js/ace2_common.js?callback=require.define",
          "httpVersion": "unknown",
          "headers": [
            {
              "name": "Referer",
              "value": "http://localhost:9001/p/bla"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.81 Safari/537.36"
            }
          ],
          "queryString": [
            {
              "name": "callback",
              "value": "require.define"
            }
          ],
          "cookies": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "unknown",
          "headers": [
            {
              "name": "date",
              "value": "Tue, 09 Jun 2015 16:53:04 GMT"
            },
            {
              "name": "x-content-type-options",
              "value": "nosniff"
            },
            {
              "name": "TM-finalURL",
              "value": "../ace2_common.js?callback=require.define"
            },
            {
              "name": "last-modified",
              "value": "Wed, 03 Jun 2015 18:13:43 GMT"
            },
            {
              "name": "Server",
              "value": "Etherpad d11c92c (http://etherpad.org)"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            },
            {
              "name": "content-type",
              "value": "application/javascript; charset=utf-8"
            },
            {
              "name": "cache-control",
              "value": "max-age=21600"
            },
            {
              "name": "X-UA-Compatible",
              "value": "IE=Edge,chrome=1, IE=Edge,chrome=1"
            },
            {
              "name": "expires",
              "value": "Tue, 09 Jun 2015 22:53:04 GMT"
            }
          ],
          "cookies": [],
          "content": {
            "size": 396186,
            "mimeType": "application/javascript",
            "text": "require.define({\n  \"ep_etherpad-lite/static/js/ace2_common.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code.\n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar Security = require('./security');\n\nfunction isNodeText(node)\n{\n  return (node.nodeType == 3);\n}\n\nfunction object(o)\n{\n  var f = function(){};\n  f.prototype = o;\n  return new f();\n}\n\nfunction getAssoc(obj, name)\n{\n  return obj[\"_magicdom_\" + name];\n}\n\nfunction setAssoc(obj, name, value)\n{\n  // note that in IE designMode, properties of a node can get\n  // copied to new nodes that are spawned during editing; also,\n  // properties representable in HTML text can survive copy-and-paste\n  obj[\"_magicdom_\" + name] = value;\n}\n\n// \"func\" is a function over 0..(numItems-1) that is monotonically\n// \"increasing\" with index (false, then true).  Finds the boundary\n// between false and true, a number between 0 and numItems inclusive.\n\n\nfunction binarySearch(numItems, func)\n{\n  if (numItems < 1) return 0;\n  if (func(0)) return 0;\n  if (!func(numItems - 1)) return numItems;\n  var low = 0; // func(low) is always false\n  var high = numItems - 1; // func(high) is always true\n  while ((high - low) > 1)\n  {\n    var x = Math.floor((low + high) / 2); // x != low, x != high\n    if (func(x)) high = x;\n    else low = x;\n  }\n  return high;\n}\n\nfunction binarySearchInfinite(expectedLength, func)\n{\n  var i = 0;\n  while (!func(i)) i += expectedLength;\n  return binarySearch(i, func);\n}\n\nfunction htmlPrettyEscape(str)\n{\n  return Security.escapeHTML(str).replace(/\\r?\\n/g, '\\\\n');\n}\n\nvar noop = function(){};\n\nexports.isNodeText = isNodeText;\nexports.object = object;\nexports.getAssoc = getAssoc;\nexports.setAssoc = setAssoc;\nexports.binarySearch = binarySearch;\nexports.binarySearchInfinite = binarySearchInfinite;\nexports.htmlPrettyEscape = htmlPrettyEscape;\nexports.noop = noop;\n\n}\n, \"ep_etherpad-lite/static/js/browser.js\": function (require, exports, module) {\n/*!\n  * Bowser - a browser detector\n  * https://github.com/ded/bowser\n  * MIT License | (c) Dustin Diaz 2014\n  */\n\n!function (name, definition) {\n  if (typeof module != 'undefined' && module.exports) module.exports['browser'] = definition()\n  else if (typeof define == 'function' && define.amd) define(definition)\n  else this[name] = definition()\n}('bowser', function () {\n  /**\n    * See useragents.js for examples of navigator.userAgent\n    */\n\n  var t = true\n\n  function detect(ua) {\n\n    function getFirstMatch(regex) {\n      var match = ua.match(regex);\n      return (match && match.length > 1 && match[1]) || '';\n    }\n\n    var iosdevice = getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase()\n      , likeAndroid = /like android/i.test(ua)\n      , android = !likeAndroid && /android/i.test(ua)\n      , versionIdentifier = getFirstMatch(/version\\/(\\d+(\\.\\d+)?)/i)\n      , tablet = /tablet/i.test(ua)\n      , mobile = !tablet && /[^-]mobi/i.test(ua)\n      , result\n\n    if (/opera|opr/i.test(ua)) {\n      result = {\n        name: 'Opera'\n      , opera: t\n      , version: versionIdentifier || getFirstMatch(/(?:opera|opr)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/windows phone/i.test(ua)) {\n      result = {\n        name: 'Windows Phone'\n      , windowsphone: t\n      , msie: t\n      , version: getFirstMatch(/iemobile\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/msie|trident/i.test(ua)) {\n      result = {\n        name: 'Internet Explorer'\n      , msie: t\n      , version: getFirstMatch(/(?:msie |rv:)(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/chrome|crios|crmo/i.test(ua)) {\n      result = {\n        name: 'Chrome'\n      , chrome: t\n      , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (iosdevice) {\n      result = {\n        name : iosdevice == 'iphone' ? 'iPhone' : iosdevice == 'ipad' ? 'iPad' : 'iPod'\n      }\n      // WTF: version is not part of user agent in web apps\n      if (versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    }\n    else if (/sailfish/i.test(ua)) {\n      result = {\n        name: 'Sailfish'\n      , sailfish: t\n      , version: getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/seamonkey\\//i.test(ua)) {\n      result = {\n        name: 'SeaMonkey'\n      , seamonkey: t\n      , version: getFirstMatch(/seamonkey\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/firefox|iceweasel/i.test(ua)) {\n      result = {\n        name: 'Firefox'\n      , firefox: t\n      , version: getFirstMatch(/(?:firefox|iceweasel)[ \\/](\\d+(\\.\\d+)?)/i)\n      }\n      if (/\\((mobile|tablet);[^\\)]*rv:[\\d\\.]+\\)/i.test(ua)) {\n        result.firefoxos = t\n      }\n    }\n    else if (/silk/i.test(ua)) {\n      result =  {\n        name: 'Amazon Silk'\n      , silk: t\n      , version : getFirstMatch(/silk\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (android) {\n      result = {\n        name: 'Android'\n      , version: versionIdentifier\n      }\n    }\n    else if (/phantom/i.test(ua)) {\n      result = {\n        name: 'PhantomJS'\n      , phantom: t\n      , version: getFirstMatch(/phantomjs\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/blackberry|\\bbb\\d+/i.test(ua) || /rim\\stablet/i.test(ua)) {\n      result = {\n        name: 'BlackBerry'\n      , blackberry: t\n      , version: versionIdentifier || getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/(web|hpw)os/i.test(ua)) {\n      result = {\n        name: 'WebOS'\n      , webos: t\n      , version: versionIdentifier || getFirstMatch(/w(?:eb)?osbrowser\\/(\\d+(\\.\\d+)?)/i)\n      };\n      /touchpad\\//i.test(ua) && (result.touchpad = t)\n    }\n    else if (/bada/i.test(ua)) {\n      result = {\n        name: 'Bada'\n      , bada: t\n      , version: getFirstMatch(/dolfin\\/(\\d+(\\.\\d+)?)/i)\n      };\n    }\n    else if (/tizen/i.test(ua)) {\n      result = {\n        name: 'Tizen'\n      , tizen: t\n      , version: getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n      };\n    }\n    else if (/safari/i.test(ua)) {\n      result = {\n        name: 'Safari'\n      , safari: t\n      , version: versionIdentifier\n      }\n    }\n    else result = {}\n\n    // set webkit or gecko flag for browsers based on these engines\n    if (/(apple)?webkit/i.test(ua)) {\n      result.name = result.name || \"Webkit\"\n      result.webkit = t\n      if (!result.version && versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    } else if (!result.opera && /gecko\\//i.test(ua)) {\n      result.name = result.name || \"Gecko\"\n      result.gecko = t\n      result.version = result.version || getFirstMatch(/gecko\\/(\\d+(\\.\\d+)?)/i)\n    }\n\n    // set OS flags for platforms that have multiple browsers\n    if (android || result.silk) {\n      result.android = t\n    } else if (iosdevice) {\n      result[iosdevice] = t\n      result.ios = t\n    }\n\n    // OS version extraction\n    var osVersion = '';\n    if (iosdevice) {\n      osVersion = getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i);\n      osVersion = osVersion.replace(/[_\\s]/g, '.');\n    } else if (android) {\n      osVersion = getFirstMatch(/android[ \\/-](\\d+(\\.\\d+)*)/i);\n    } else if (result.windowsphone) {\n      osVersion = getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i);\n    } else if (result.webos) {\n      osVersion = getFirstMatch(/(?:web|hpw)os\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.blackberry) {\n      osVersion = getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i);\n    } else if (result.bada) {\n      osVersion = getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.tizen) {\n      osVersion = getFirstMatch(/tizen[\\/\\s](\\d+(\\.\\d+)*)/i);\n    }\n    if (osVersion) {\n      result.osversion = osVersion;\n    }\n\n    // device type extraction\n    var osMajorVersion = osVersion.split('.')[0];\n    if (tablet || iosdevice == 'ipad' || (android && (osMajorVersion == 3 || (osMajorVersion == 4 && !mobile))) || result.silk) {\n      result.tablet = t\n    } else if (mobile || iosdevice == 'iphone' || iosdevice == 'ipod' || android || result.blackberry || result.webos || result.bada) {\n      result.mobile = t\n    }\n\n    // Graded Browser Support\n    // http://developer.yahoo.com/yui/articles/gbs\n    if ((result.msie && result.version >= 10) ||\n        (result.chrome && result.version >= 20) ||\n        (result.firefox && result.version >= 20.0) ||\n        (result.safari && result.version >= 6) ||\n        (result.opera && result.version >= 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] >= 6) ||\n        (result.blackberry && result.version >= 10.1)\n        ) {\n      result.a = t;\n    }\n    else if ((result.msie && result.version < 10) ||\n        (result.chrome && result.version < 20) ||\n        (result.firefox && result.version < 20.0) ||\n        (result.safari && result.version < 6) ||\n        (result.opera && result.version < 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] < 6)\n        ) {\n      result.c = t\n    } else result.x = t\n\n    return result\n  }\n\n  var bowser = detect(typeof navigator !== 'undefined' ? navigator.userAgent : '')\n\n\n  /*\n   * Set our detect method to the main bowser object so we can\n   * reuse it to test other user agents.\n   * This is needed to implement future tests.\n   */\n  bowser._detect = detect;\n\n  return bowser\n});\n\n}\n, \"ep_etherpad-lite/static/js/jquery.js\": function (require, exports, module) {\n/*!\n * jQuery JavaScript Library v1.9.1\n * http://jquery.com/\n *\n * Includes Sizzle.js\n * http://sizzlejs.com/\n *\n * Copyright 2005, 2012 jQuery Foundation, Inc. and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n *\n * Date: 2013-2-4\n */\n(function( window, undefined ) {\n\n// Can't do this because several apps including ASP.NET trace\n// the stack via arguments.caller.callee and Firefox dies if\n// you try to trace through \"use strict\" call chains. (#13335)\n// Support: Firefox 18+\n//\"use strict\";\nvar\n\t// The deferred used on DOM ready\n\treadyList,\n\n\t// A central reference to the root jQuery(document)\n\trootjQuery,\n\n\t// Support: IE<9\n\t// For `typeof node.method` instead of `node.method !== undefined`\n\tcore_strundefined = typeof undefined,\n\n\t// Use the correct document accordingly with window argument (sandbox)\n\tdocument = window.document,\n\tlocation = window.location,\n\n\t// Map over jQuery in case of overwrite\n\t_jQuery = window.jQuery,\n\n\t// Map over the $ in case of overwrite\n\t_$ = window.$,\n\n\t// [[Class]] -> type pairs\n\tclass2type = {},\n\n\t// List of deleted data cache ids, so we can reuse them\n\tcore_deletedIds = [],\n\n\tcore_version = \"1.9.1\",\n\n\t// Save a reference to some core methods\n\tcore_concat = core_deletedIds.concat,\n\tcore_push = core_deletedIds.push,\n\tcore_slice = core_deletedIds.slice,\n\tcore_indexOf = core_deletedIds.indexOf,\n\tcore_toString = class2type.toString,\n\tcore_hasOwn = class2type.hasOwnProperty,\n\tcore_trim = core_version.trim,\n\n\t// Define a local copy of jQuery\n\tjQuery = function( selector, context ) {\n\t\t// The jQuery object is actually just the init constructor 'enhanced'\n\t\treturn new jQuery.fn.init( selector, context, rootjQuery );\n\t},\n\n\t// Used for matching numbers\n\tcore_pnum = /[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,\n\n\t// Used for splitting on whitespace\n\tcore_rnotwhite = /\\S+/g,\n\n\t// Make sure we trim BOM and NBSP (here's looking at you, Safari 5.0 and IE)\n\trtrim = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,\n\n\t// A simple way to check for HTML strings\n\t// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)\n\t// Strict HTML recognition (#11290: must start with <)\n\trquickExpr = /^(?:(<[\\w\\W]+>)[^>]*|#([\\w-]*))$/,\n\n\t// Match a standalone tag\n\trsingleTag = /^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,\n\n\t// JSON RegExp\n\trvalidchars = /^[\\],:{}\\s]*$/,\n\trvalidbraces = /(?:^|:|,)(?:\\s*\\[)+/g,\n\trvalidescape = /\\\\(?:[\"\\\\\\/bfnrt]|u[\\da-fA-F]{4})/g,\n\trvalidtokens = /\"[^\"\\\\\\r\\n]*\"|true|false|null|-?(?:\\d+\\.|)\\d+(?:[eE][+-]?\\d+|)/g,\n\n\t// Matches dashed string for camelizing\n\trmsPrefix = /^-ms-/,\n\trdashAlpha = /-([\\da-z])/gi,\n\n\t// Used by jQuery.camelCase as callback to replace()\n\tfcamelCase = function( all, letter ) {\n\t\treturn letter.toUpperCase();\n\t},\n\n\t// The ready event handler\n\tcompleted = function( event ) {\n\n\t\t// readyState === \"complete\" is good enough for us to call the dom ready in oldIE\n\t\tif ( document.addEventListener || event.type === \"load\" || document.readyState === \"complete\" ) {\n\t\t\tdetach();\n\t\t\tjQuery.ready();\n\t\t}\n\t},\n\t// Clean-up method for dom ready events\n\tdetach = function() {\n\t\tif ( document.addEventListener ) {\n\t\t\tdocument.removeEventListener( \"DOMContentLoaded\", completed, false );\n\t\t\twindow.removeEventListener( \"load\", completed, false );\n\n\t\t} else {\n\t\t\tdocument.detachEvent( \"onreadystatechange\", completed );\n\t\t\twindow.detachEvent( \"onload\", completed );\n\t\t}\n\t};\n\njQuery.fn = jQuery.prototype = {\n\t// The current version of jQuery being used\n\tjquery: core_version,\n\n\tconstructor: jQuery,\n\tinit: function( selector, context, rootjQuery ) {\n\t\tvar match, elem;\n\n\t\t// HANDLE: $(\"\"), $(null), $(undefined), $(false)\n\t\tif ( !selector ) {\n\t\t\treturn this;\n\t\t}\n\n\t\t// Handle HTML strings\n\t\tif ( typeof selector === \"string\" ) {\n\t\t\tif ( selector.charAt(0) === \"<\" && selector.charAt( selector.length - 1 ) === \">\" && selector.length >= 3 ) {\n\t\t\t\t// Assume that strings that start and end with <> are HTML and skip the regex check\n\t\t\t\tmatch = [ null, selector, null ];\n\n\t\t\t} else {\n\t\t\t\tmatch = rquickExpr.exec( selector );\n\t\t\t}\n\n\t\t\t// Match html or make sure no context is specified for #id\n\t\t\tif ( match && (match[1] || !context) ) {\n\n\t\t\t\t// HANDLE: $(html) -> $(array)\n\t\t\t\tif ( match[1] ) {\n\t\t\t\t\tcontext = context instanceof jQuery ? context[0] : context;\n\n\t\t\t\t\t// scripts is true for back-compat\n\t\t\t\t\tjQuery.merge( this, jQuery.parseHTML(\n\t\t\t\t\t\tmatch[1],\n\t\t\t\t\t\tcontext && context.nodeType ? context.ownerDocument || context : document,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t) );\n\n\t\t\t\t\t// HANDLE: $(html, props)\n\t\t\t\t\tif ( rsingleTag.test( match[1] ) && jQuery.isPlainObject( context ) ) {\n\t\t\t\t\t\tfor ( match in context ) {\n\t\t\t\t\t\t\t// Properties of context are called as methods if possible\n\t\t\t\t\t\t\tif ( jQuery.isFunction( this[ match ] ) ) {\n\t\t\t\t\t\t\t\tthis[ match ]( context[ match ] );\n\n\t\t\t\t\t\t\t// ...and otherwise set as attributes\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.attr( match, context[ match ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this;\n\n\t\t\t\t// HANDLE: $(#id)\n\t\t\t\t} else {\n\t\t\t\t\telem = document.getElementById( match[2] );\n\n\t\t\t\t\t// Check parentNode to catch when Blackberry 4.6 returns\n\t\t\t\t\t// nodes that are no longer in the document #6963\n\t\t\t\t\tif ( elem && elem.parentNode ) {\n\t\t\t\t\t\t// Handle the case where IE and Opera return items\n\t\t\t\t\t\t// by name instead of ID\n\t\t\t\t\t\tif ( elem.id !== match[2] ) {\n\t\t\t\t\t\t\treturn rootjQuery.find( selector );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Otherwise, we inject the element directly into the jQuery object\n\t\t\t\t\t\tthis.length = 1;\n\t\t\t\t\t\tthis[0] = elem;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.context = document;\n\t\t\t\t\tthis.selector = selector;\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\n\t\t\t// HANDLE: $(expr, $(...))\n\t\t\t} else if ( !context || context.jquery ) {\n\t\t\t\treturn ( context || rootjQuery ).find( selector );\n\n\t\t\t// HANDLE: $(expr, context)\n\t\t\t// (which is just equivalent to: $(context).find(expr)\n\t\t\t} else {\n\t\t\t\treturn this.constructor( context ).find( selector );\n\t\t\t}\n\n\t\t// HANDLE: $(DOMElement)\n\t\t} else if ( selector.nodeType ) {\n\t\t\tthis.context = this[0] = selector;\n\t\t\tthis.length = 1;\n\t\t\treturn this;\n\n\t\t// HANDLE: $(function)\n\t\t// Shortcut for document ready\n\t\t} else if ( jQuery.isFunction( selector ) ) {\n\t\t\treturn rootjQuery.ready( selector );\n\t\t}\n\n\t\tif ( selector.selector !== undefined ) {\n\t\t\tthis.selector = selector.selector;\n\t\t\tthis.context = selector.context;\n\t\t}\n\n\t\treturn jQuery.makeArray( selector, this );\n\t},\n\n\t// Start with an empty selector\n\tselector: \"\",\n\n\t// The default length of a jQuery object is 0\n\tlength: 0,\n\n\t// The number of elements contained in the matched element set\n\tsize: function() {\n\t\treturn this.length;\n\t},\n\n\ttoArray: function() {\n\t\treturn core_slice.call( this );\n\t},\n\n\t// Get the Nth element in the matched element set OR\n\t// Get the whole matched element set as a clean array\n\tget: function( num ) {\n\t\treturn num == null ?\n\n\t\t\t// Return a 'clean' array\n\t\t\tthis.toArray() :\n\n\t\t\t// Return just the object\n\t\t\t( num < 0 ? this[ this.length + num ] : this[ num ] );\n\t},\n\n\t// Take an array of elements and push it onto the stack\n\t// (returning the new matched element set)\n\tpushStack: function( elems ) {\n\n\t\t// Build a new jQuery matched element set\n\t\tvar ret = jQuery.merge( this.constructor(), elems );\n\n\t\t// Add the old object onto the stack (as a reference)\n\t\tret.prevObject = this;\n\t\tret.context = this.context;\n\n\t\t// Return the newly-formed element set\n\t\treturn ret;\n\t},\n\n\t// Execute a callback for every element in the matched set.\n\t// (You can seed the arguments with an array of args, but this is\n\t// only used internally.)\n\teach: function( callback, args ) {\n\t\treturn jQuery.each( this, callback, args );\n\t},\n\n\tready: function( fn ) {\n\t\t// Add the callback\n\t\tjQuery.ready.promise().done( fn );\n\n\t\treturn this;\n\t},\n\n\tslice: function() {\n\t\treturn this.pushStack( core_slice.apply( this, arguments ) );\n\t},\n\n\tfirst: function() {\n\t\treturn this.eq( 0 );\n\t},\n\n\tlast: function() {\n\t\treturn this.eq( -1 );\n\t},\n\n\teq: function( i ) {\n\t\tvar len = this.length,\n\t\t\tj = +i + ( i < 0 ? len : 0 );\n\t\treturn this.pushStack( j >= 0 && j < len ? [ this[j] ] : [] );\n\t},\n\n\tmap: function( callback ) {\n\t\treturn this.pushStack( jQuery.map(this, function( elem, i ) {\n\t\t\treturn callback.call( elem, i, elem );\n\t\t}));\n\t},\n\n\tend: function() {\n\t\treturn this.prevObject || this.constructor(null);\n\t},\n\n\t// For internal use only.\n\t// Behaves like an Array's method, not like a jQuery method.\n\tpush: core_push,\n\tsort: [].sort,\n\tsplice: [].splice\n};\n\n// Give the init function the jQuery prototype for later instantiation\njQuery.fn.init.prototype = jQuery.fn;\n\njQuery.extend = jQuery.fn.extend = function() {\n\tvar src, copyIsArray, copy, name, options, clone,\n\t\ttarget = arguments[0] || {},\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif ( typeof target === \"boolean\" ) {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif ( typeof target !== \"object\" && !jQuery.isFunction(target) ) {\n\t\ttarget = {};\n\t}\n\n\t// extend jQuery itself if only one argument is passed\n\tif ( length === i ) {\n\t\ttarget = this;\n\t\t--i;\n\t}\n\n\tfor ( ; i < length; i++ ) {\n\t\t// Only deal with non-null/undefined values\n\t\tif ( (options = arguments[ i ]) != null ) {\n\t\t\t// Extend the base object\n\t\t\tfor ( name in options ) {\n\t\t\t\tsrc = target[ name ];\n\t\t\t\tcopy = options[ name ];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif ( target === copy ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif ( deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) ) ) {\n\t\t\t\t\tif ( copyIsArray ) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && jQuery.isArray(src) ? src : [];\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && jQuery.isPlainObject(src) ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[ name ] = jQuery.extend( deep, clone, copy );\n\n\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if ( copy !== undefined ) {\n\t\t\t\t\ttarget[ name ] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\njQuery.extend({\n\tnoConflict: function( deep ) {\n\t\tif ( window.$ === jQuery ) {\n\t\t\twindow.$ = _$;\n\t\t}\n\n\t\tif ( deep && window.jQuery === jQuery ) {\n\t\t\twindow.jQuery = _jQuery;\n\t\t}\n\n\t\treturn jQuery;\n\t},\n\n\t// Is the DOM ready to be used? Set to true once it occurs.\n\tisReady: false,\n\n\t// A counter to track how many items to wait for before\n\t// the ready event fires. See #6781\n\treadyWait: 1,\n\n\t// Hold (or release) the ready event\n\tholdReady: function( hold ) {\n\t\tif ( hold ) {\n\t\t\tjQuery.readyWait++;\n\t\t} else {\n\t\t\tjQuery.ready( true );\n\t\t}\n\t},\n\n\t// Handle when the DOM is ready\n\tready: function( wait ) {\n\n\t\t// Abort if there are pending holds or we're already ready\n\t\tif ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).\n\t\tif ( !document.body ) {\n\t\t\treturn setTimeout( jQuery.ready );\n\t\t}\n\n\t\t// Remember that the DOM is ready\n\t\tjQuery.isReady = true;\n\n\t\t// If a normal DOM Ready event fired, decrement, and wait if need be\n\t\tif ( wait !== true && --jQuery.readyWait > 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If there are functions bound, to execute\n\t\treadyList.resolveWith( document, [ jQuery ] );\n\n\t\t// Trigger any bound ready events\n\t\tif ( jQuery.fn.trigger ) {\n\t\t\tjQuery( document ).trigger(\"ready\").off(\"ready\");\n\t\t}\n\t},\n\n\t// See test/unit/core.js for details concerning isFunction.\n\t// Since version 1.3, DOM methods and functions like alert\n\t// aren't supported. They return false on IE (#2968).\n\tisFunction: function( obj ) {\n\t\treturn jQuery.type(obj) === \"function\";\n\t},\n\n\tisArray: Array.isArray || function( obj ) {\n\t\treturn jQuery.type(obj) === \"array\";\n\t},\n\n\tisWindow: function( obj ) {\n\t\treturn obj != null && obj == obj.window;\n\t},\n\n\tisNumeric: function( obj ) {\n\t\treturn !isNaN( parseFloat(obj) ) && isFinite( obj );\n\t},\n\n\ttype: function( obj ) {\n\t\tif ( obj == null ) {\n\t\t\treturn String( obj );\n\t\t}\n\t\treturn typeof obj === \"object\" || typeof obj === \"function\" ?\n\t\t\tclass2type[ core_toString.call(obj) ] || \"object\" :\n\t\t\ttypeof obj;\n\t},\n\n\tisPlainObject: function( obj ) {\n\t\t// Must be an Object.\n\t\t// Because of IE, we also have to check the presence of the constructor property.\n\t\t// Make sure that DOM nodes and window objects don't pass through, as well\n\t\tif ( !obj || jQuery.type(obj) !== \"object\" || obj.nodeType || jQuery.isWindow( obj ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\ttry {\n\t\t\t// Not own constructor property must be Object\n\t\t\tif ( obj.constructor &&\n\t\t\t\t!core_hasOwn.call(obj, \"constructor\") &&\n\t\t\t\t!core_hasOwn.call(obj.constructor.prototype, \"isPrototypeOf\") ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} catch ( e ) {\n\t\t\t// IE8,9 Will throw exceptions on certain host objects #9897\n\t\t\treturn false;\n\t\t}\n\n\t\t// Own properties are enumerated firstly, so to speed up,\n\t\t// if last one is own, then all properties are own.\n\n\t\tvar key;\n\t\tfor ( key in obj ) {}\n\n\t\treturn key === undefined || core_hasOwn.call( obj, key );\n\t},\n\n\tisEmptyObject: function( obj ) {\n\t\tvar name;\n\t\tfor ( name in obj ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\terror: function( msg ) {\n\t\tthrow new Error( msg );\n\t},\n\n\t// data: string of html\n\t// context (optional): If specified, the fragment will be created in this context, defaults to document\n\t// keepScripts (optional): If true, will include scripts passed in the html string\n\tparseHTML: function( data, context, keepScripts ) {\n\t\tif ( !data || typeof data !== \"string\" ) {\n\t\t\treturn null;\n\t\t}\n\t\tif ( typeof context === \"boolean\" ) {\n\t\t\tkeepScripts = context;\n\t\t\tcontext = false;\n\t\t}\n\t\tcontext = context || document;\n\n\t\tvar parsed = rsingleTag.exec( data ),\n\t\t\tscripts = !keepScripts && [];\n\n\t\t// Single tag\n\t\tif ( parsed ) {\n\t\t\treturn [ context.createElement( parsed[1] ) ];\n\t\t}\n\n\t\tparsed = jQuery.buildFragment( [ data ], context, scripts );\n\t\tif ( scripts ) {\n\t\t\tjQuery( scripts ).remove();\n\t\t}\n\t\treturn jQuery.merge( [], parsed.childNodes );\n\t},\n\n\tparseJSON: function( data ) {\n\t\t// Attempt to parse using the native JSON parser first\n\t\tif ( window.JSON && window.JSON.parse ) {\n\t\t\treturn window.JSON.parse( data );\n\t\t}\n\n\t\tif ( data === null ) {\n\t\t\treturn data;\n\t\t}\n\n\t\tif ( typeof data === \"string\" ) {\n\n\t\t\t// Make sure leading/trailing whitespace is removed (IE can't handle it)\n\t\t\tdata = jQuery.trim( data );\n\n\t\t\tif ( data ) {\n\t\t\t\t// Make sure the incoming data is actual JSON\n\t\t\t\t// Logic borrowed from http://json.org/json2.js\n\t\t\t\tif ( rvalidchars.test( data.replace( rvalidescape, \"@\" )\n\t\t\t\t\t.replace( rvalidtokens, \"]\" )\n\t\t\t\t\t.replace( rvalidbraces, \"\")) ) {\n\n\t\t\t\t\treturn ( new Function( \"return \" + data ) )();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tjQuery.error( \"Invalid JSON: \" + data );\n\t},\n\n\t// Cross-browser xml parsing\n\tparseXML: function( data ) {\n\t\tvar xml, tmp;\n\t\tif ( !data || typeof data !== \"string\" ) {\n\t\t\treturn null;\n\t\t}\n\t\ttry {\n\t\t\tif ( window.DOMParser ) { // Standard\n\t\t\t\ttmp = new DOMParser();\n\t\t\t\txml = tmp.parseFromString( data , \"text/xml\" );\n\t\t\t} else { // IE\n\t\t\t\txml = new ActiveXObject( \"Microsoft.XMLDOM\" );\n\t\t\t\txml.async = \"false\";\n\t\t\t\txml.loadXML( data );\n\t\t\t}\n\t\t} catch( e ) {\n\t\t\txml = undefined;\n\t\t}\n\t\tif ( !xml || !xml.documentElement || xml.getElementsByTagName( \"parsererror\" ).length ) {\n\t\t\tjQuery.error( \"Invalid XML: \" + data );\n\t\t}\n\t\treturn xml;\n\t},\n\n\tnoop: function() {},\n\n\t// Evaluates a script in a global context\n\t// Workarounds based on findings by Jim Driscoll\n\t// http://weblogs.java.net/blog/driscoll/archive/2009/09/08/eval-javascript-global-context\n\tglobalEval: function( data ) {\n\t\tif ( data && jQuery.trim( data ) ) {\n\t\t\t// We use execScript on Internet Explorer\n\t\t\t// We use an anonymous function so that context is window\n\t\t\t// rather than jQuery in Firefox\n\t\t\t( window.execScript || function( data ) {\n\t\t\t\twindow[ \"eval\" ].call( window, data );\n\t\t\t} )( data );\n\t\t}\n\t},\n\n\t// Convert dashed to camelCase; used by the css and data modules\n\t// Microsoft forgot to hump their vendor prefix (#9572)\n\tcamelCase: function( string ) {\n\t\treturn string.replace( rmsPrefix, \"ms-\" ).replace( rdashAlpha, fcamelCase );\n\t},\n\n\tnodeName: function( elem, name ) {\n\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();\n\t},\n\n\t// args is for internal usage only\n\teach: function( obj, callback, args ) {\n\t\tvar value,\n\t\t\ti = 0,\n\t\t\tlength = obj.length,\n\t\t\tisArray = isArraylike( obj );\n\n\t\tif ( args ) {\n\t\t\tif ( isArray ) {\n\t\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\t\tvalue = callback.apply( obj[ i ], args );\n\n\t\t\t\t\tif ( value === false ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( i in obj ) {\n\t\t\t\t\tvalue = callback.apply( obj[ i ], args );\n\n\t\t\t\t\tif ( value === false ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t// A special, fast, case for the most common use of each\n\t\t} else {\n\t\t\tif ( isArray ) {\n\t\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\t\tvalue = callback.call( obj[ i ], i, obj[ i ] );\n\n\t\t\t\t\tif ( value === false ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( i in obj ) {\n\t\t\t\t\tvalue = callback.call( obj[ i ], i, obj[ i ] );\n\n\t\t\t\t\tif ( value === false ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn obj;\n\t},\n\n\t// Use native String.trim function wherever possible\n\ttrim: core_trim && !core_trim.call(\"\\uFEFF\\xA0\") ?\n\t\tfunction( text ) {\n\t\t\treturn text == null ?\n\t\t\t\t\"\" :\n\t\t\t\tcore_trim.call( text );\n\t\t} :\n\n\t\t// Otherwise use our own trimming functionality\n\t\tfunction( text ) {\n\t\t\treturn text == null ?\n\t\t\t\t\"\" :\n\t\t\t\t( text + \"\" ).replace( rtrim, \"\" );\n\t\t},\n\n\t// results is for internal usage only\n\tmakeArray: function( arr, results ) {\n\t\tvar ret = results || [];\n\n\t\tif ( arr != null ) {\n\t\t\tif ( isArraylike( Object(arr) ) ) {\n\t\t\t\tjQuery.merge( ret,\n\t\t\t\t\ttypeof arr === \"string\" ?\n\t\t\t\t\t[ arr ] : arr\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tcore_push.call( ret, arr );\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\tinArray: function( elem, arr, i ) {\n\t\tvar len;\n\n\t\tif ( arr ) {\n\t\t\tif ( core_indexOf ) {\n\t\t\t\treturn core_indexOf.call( arr, elem, i );\n\t\t\t}\n\n\t\t\tlen = arr.length;\n\t\t\ti = i ? i < 0 ? Math.max( 0, len + i ) : i : 0;\n\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\t// Skip accessing in sparse arrays\n\t\t\t\tif ( i in arr && arr[ i ] === elem ) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t},\n\n\tmerge: function( first, second ) {\n\t\tvar l = second.length,\n\t\t\ti = first.length,\n\t\t\tj = 0;\n\n\t\tif ( typeof l === \"number\" ) {\n\t\t\tfor ( ; j < l; j++ ) {\n\t\t\t\tfirst[ i++ ] = second[ j ];\n\t\t\t}\n\t\t} else {\n\t\t\twhile ( second[j] !== undefined ) {\n\t\t\t\tfirst[ i++ ] = second[ j++ ];\n\t\t\t}\n\t\t}\n\n\t\tfirst.length = i;\n\n\t\treturn first;\n\t},\n\n\tgrep: function( elems, callback, inv ) {\n\t\tvar retVal,\n\t\t\tret = [],\n\t\t\ti = 0,\n\t\t\tlength = elems.length;\n\t\tinv = !!inv;\n\n\t\t// Go through the array, only saving the items\n\t\t// that pass the validator function\n\t\tfor ( ; i < length; i++ ) {\n\t\t\tretVal = !!callback( elems[ i ], i );\n\t\t\tif ( inv !== retVal ) {\n\t\t\t\tret.push( elems[ i ] );\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\t// arg is for internal usage only\n\tmap: function( elems, callback, arg ) {\n\t\tvar value,\n\t\t\ti = 0,\n\t\t\tlength = elems.length,\n\t\t\tisArray = isArraylike( elems ),\n\t\t\tret = [];\n\n\t\t// Go through the array, translating each of the items to their\n\t\tif ( isArray ) {\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret[ ret.length ] = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Go through every key on the object,\n\t\t} else {\n\t\t\tfor ( i in elems ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret[ ret.length ] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Flatten any nested arrays\n\t\treturn core_concat.apply( [], ret );\n\t},\n\n\t// A global GUID counter for objects\n\tguid: 1,\n\n\t// Bind a function to a context, optionally partially applying any\n\t// arguments.\n\tproxy: function( fn, context ) {\n\t\tvar args, proxy, tmp;\n\n\t\tif ( typeof context === \"string\" ) {\n\t\t\ttmp = fn[ context ];\n\t\t\tcontext = fn;\n\t\t\tfn = tmp;\n\t\t}\n\n\t\t// Quick check to determine if target is callable, in the spec\n\t\t// this throws a TypeError, but we will just return undefined.\n\t\tif ( !jQuery.isFunction( fn ) ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Simulated bind\n\t\targs = core_slice.call( arguments, 2 );\n\t\tproxy = function() {\n\t\t\treturn fn.apply( context || this, args.concat( core_slice.call( arguments ) ) );\n\t\t};\n\n\t\t// Set the guid of unique handler to the same of original handler, so it can be removed\n\t\tproxy.guid = fn.guid = fn.guid || jQuery.guid++;\n\n\t\treturn proxy;\n\t},\n\n\t// Multifunctional method to get and set values of a collection\n\t// The value/s can optionally be executed if it's a function\n\taccess: function( elems, fn, key, value, chainable, emptyGet, raw ) {\n\t\tvar i = 0,\n\t\t\tlength = elems.length,\n\t\t\tbulk = key == null;\n\n\t\t// Sets many values\n\t\tif ( jQuery.type( key ) === \"object\" ) {\n\t\t\tchainable = true;\n\t\t\tfor ( i in key ) {\n\t\t\t\tjQuery.access( elems, fn, i, key[i], true, emptyGet, raw );\n\t\t\t}\n\n\t\t// Sets one value\n\t\t} else if ( value !== undefined ) {\n\t\t\tchainable = true;\n\n\t\t\tif ( !jQuery.isFunction( value ) ) {\n\t\t\t\traw = true;\n\t\t\t}\n\n\t\t\tif ( bulk ) {\n\t\t\t\t// Bulk operations run against the entire set\n\t\t\t\tif ( raw ) {\n\t\t\t\t\tfn.call( elems, value );\n\t\t\t\t\tfn = null;\n\n\t\t\t\t// ...except when executing function values\n\t\t\t\t} else {\n\t\t\t\t\tbulk = fn;\n\t\t\t\t\tfn = function( elem, key, value ) {\n\t\t\t\t\t\treturn bulk.call( jQuery( elem ), value );\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( fn ) {\n\t\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\t\tfn( elems[i], key, raw ? value : value.call( elems[i], i, fn( elems[i], key ) ) );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn chainable ?\n\t\t\telems :\n\n\t\t\t// Gets\n\t\t\tbulk ?\n\t\t\t\tfn.call( elems ) :\n\t\t\t\tlength ? fn( elems[0], key ) : emptyGet;\n\t},\n\n\tnow: function() {\n\t\treturn ( new Date() ).getTime();\n\t}\n});\n\njQuery.ready.promise = function( obj ) {\n\tif ( !readyList ) {\n\n\t\treadyList = jQuery.Deferred();\n\n\t\t// Catch cases where $(document).ready() is called after the browser event has already occurred.\n\t\t// we once tried to use readyState \"interactive\" here, but it caused issues like the one\n\t\t// discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15\n\t\tif ( document.readyState === \"complete\" ) {\n\t\t\t// Handle it asynchronously to allow scripts the opportunity to delay ready\n\t\t\tsetTimeout( jQuery.ready );\n\n\t\t// Standards-based browsers support DOMContentLoaded\n\t\t} else if ( document.addEventListener ) {\n\t\t\t// Use the handy event callback\n\t\t\tdocument.addEventListener( \"DOMContentLoaded\", completed, false );\n\n\t\t\t// A fallback to window.onload, that will always work\n\t\t\twindow.addEventListener( \"load\", completed, false );\n\n\t\t// If IE event model is used\n\t\t} else {\n\t\t\t// Ensure firing before onload, maybe late but safe also for iframes\n\t\t\tdocument.attachEvent( \"onreadystatechange\", completed );\n\n\t\t\t// A fallback to window.onload, that will always work\n\t\t\twindow.attachEvent( \"onload\", completed );\n\n\t\t\t// If IE and not a frame\n\t\t\t// continually check to see if the document is ready\n\t\t\tvar top = false;\n\n\t\t\ttry {\n\t\t\t\ttop = window.frameElement == null && document.documentElement;\n\t\t\t} catch(e) {}\n\n\t\t\tif ( top && top.doScroll ) {\n\t\t\t\t(function doScrollCheck() {\n\t\t\t\t\tif ( !jQuery.isReady ) {\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t// Use the trick by Diego Perini\n\t\t\t\t\t\t\t// http://javascript.nwbox.com/IEContentLoaded/\n\t\t\t\t\t\t\ttop.doScroll(\"left\");\n\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\treturn setTimeout( doScrollCheck, 50 );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// detach all dom ready events\n\t\t\t\t\t\tdetach();\n\n\t\t\t\t\t\t// and execute any waiting functions\n\t\t\t\t\t\tjQuery.ready();\n\t\t\t\t\t}\n\t\t\t\t})();\n\t\t\t}\n\t\t}\n\t}\n\treturn readyList.promise( obj );\n};\n\n// Populate the class2type map\njQuery.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"), function(i, name) {\n\tclass2type[ \"[object \" + name + \"]\" ] = name.toLowerCase();\n});\n\nfunction isArraylike( obj ) {\n\tvar length = obj.length,\n\t\ttype = jQuery.type( obj );\n\n\tif ( jQuery.isWindow( obj ) ) {\n\t\treturn false;\n\t}\n\n\tif ( obj.nodeType === 1 && length ) {\n\t\treturn true;\n\t}\n\n\treturn type === \"array\" || type !== \"function\" &&\n\t\t( length === 0 ||\n\t\ttypeof length === \"number\" && length > 0 && ( length - 1 ) in obj );\n}\n\n// All jQuery objects should point back to these\nrootjQuery = jQuery(document);\n// String to Object options format cache\nvar optionsCache = {};\n\n// Convert String-formatted options into Object-formatted ones and store in cache\nfunction createOptions( options ) {\n\tvar object = optionsCache[ options ] = {};\n\tjQuery.each( options.match( core_rnotwhite ) || [], function( _, flag ) {\n\t\tobject[ flag ] = true;\n\t});\n\treturn object;\n}\n\n/*\n * Create a callback list using the following parameters:\n *\n *\toptions: an optional list of space-separated options that will change how\n *\t\t\tthe callback list behaves or a more traditional option object\n *\n * By default a callback list will act like an event callback list and can be\n * \"fired\" multiple times.\n *\n * Possible options:\n *\n *\tonce:\t\t\twill ensure the callback list can only be fired once (like a Deferred)\n *\n *\tmemory:\t\t\twill keep track of previous values and will call any callback added\n *\t\t\t\t\tafter the list has been fired right away with the latest \"memorized\"\n *\t\t\t\t\tvalues (like a Deferred)\n *\n *\tunique:\t\t\twill ensure a callback can only be added once (no duplicate in the list)\n *\n *\tstopOnFalse:\tinterrupt callings when a callback returns false\n *\n */\njQuery.Callbacks = function( options ) {\n\n\t// Convert options from String-formatted to Object-formatted if needed\n\t// (we check in cache first)\n\toptions = typeof options === \"string\" ?\n\t\t( optionsCache[ options ] || createOptions( options ) ) :\n\t\tjQuery.extend( {}, options );\n\n\tvar // Flag to know if list is currently firing\n\t\tfiring,\n\t\t// Last fire value (for non-forgettable lists)\n\t\tmemory,\n\t\t// Flag to know if list was already fired\n\t\tfired,\n\t\t// End of the loop when firing\n\t\tfiringLength,\n\t\t// Index of currently firing callback (modified by remove if needed)\n\t\tfiringIndex,\n\t\t// First callback to fire (used internally by add and fireWith)\n\t\tfiringStart,\n\t\t// Actual callback list\n\t\tlist = [],\n\t\t// Stack of fire calls for repeatable lists\n\t\tstack = !options.once && [],\n\t\t// Fire callbacks\n\t\tfire = function( data ) {\n\t\t\tmemory = options.memory && data;\n\t\t\tfired = true;\n\t\t\tfiringIndex = firingStart || 0;\n\t\t\tfiringStart = 0;\n\t\t\tfiringLength = list.length;\n\t\t\tfiring = true;\n\t\t\tfor ( ; list && firingIndex < firingLength; firingIndex++ ) {\n\t\t\t\tif ( list[ firingIndex ].apply( data[ 0 ], data[ 1 ] ) === false && options.stopOnFalse ) {\n\t\t\t\t\tmemory = false; // To prevent further calls using add\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfiring = false;\n\t\t\tif ( list ) {\n\t\t\t\tif ( stack ) {\n\t\t\t\t\tif ( stack.length ) {\n\t\t\t\t\t\tfire( stack.shift() );\n\t\t\t\t\t}\n\t\t\t\t} else if ( memory ) {\n\t\t\t\t\tlist = [];\n\t\t\t\t} else {\n\t\t\t\t\tself.disable();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// Actual Callbacks object\n\t\tself = {\n\t\t\t// Add a callback or a collection of callbacks to the list\n\t\t\tadd: function() {\n\t\t\t\tif ( list ) {\n\t\t\t\t\t// First, we save the current length\n\t\t\t\t\tvar start = list.length;\n\t\t\t\t\t(function add( args ) {\n\t\t\t\t\t\tjQuery.each( args, function( _, arg ) {\n\t\t\t\t\t\t\tvar type = jQuery.type( arg );\n\t\t\t\t\t\t\tif ( type === \"function\" ) {\n\t\t\t\t\t\t\t\tif ( !options.unique || !self.has( arg ) ) {\n\t\t\t\t\t\t\t\t\tlist.push( arg );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if ( arg && arg.length && type !== \"string\" ) {\n\t\t\t\t\t\t\t\t// Inspect recursively\n\t\t\t\t\t\t\t\tadd( arg );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t})( arguments );\n\t\t\t\t\t// Do we need to add the callbacks to the\n\t\t\t\t\t// current firing batch?\n\t\t\t\t\tif ( firing ) {\n\t\t\t\t\t\tfiringLength = list.length;\n\t\t\t\t\t// With memory, if we're not firing then\n\t\t\t\t\t// we should call right away\n\t\t\t\t\t} else if ( memory ) {\n\t\t\t\t\t\tfiringStart = start;\n\t\t\t\t\t\tfire( memory );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Remove a callback from the list\n\t\t\tremove: function() {\n\t\t\t\tif ( list ) {\n\t\t\t\t\tjQuery.each( arguments, function( _, arg ) {\n\t\t\t\t\t\tvar index;\n\t\t\t\t\t\twhile( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {\n\t\t\t\t\t\t\tlist.splice( index, 1 );\n\t\t\t\t\t\t\t// Handle firing indexes\n\t\t\t\t\t\t\tif ( firing ) {\n\t\t\t\t\t\t\t\tif ( index <= firingLength ) {\n\t\t\t\t\t\t\t\t\tfiringLength--;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( index <= firingIndex ) {\n\t\t\t\t\t\t\t\t\tfiringIndex--;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Check if a given callback is in the list.\n\t\t\t// If no argument is given, return whether or not list has callbacks attached.\n\t\t\thas: function( fn ) {\n\t\t\t\treturn fn ? jQuery.inArray( fn, list ) > -1 : !!( list && list.length );\n\t\t\t},\n\t\t\t// Remove all callbacks from the list\n\t\t\tempty: function() {\n\t\t\t\tlist = [];\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Have the list do nothing anymore\n\t\t\tdisable: function() {\n\t\t\t\tlist = stack = memory = undefined;\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Is it disabled?\n\t\t\tdisabled: function() {\n\t\t\t\treturn !list;\n\t\t\t},\n\t\t\t// Lock the list in its current state\n\t\t\tlock: function() {\n\t\t\t\tstack = undefined;\n\t\t\t\tif ( !memory ) {\n\t\t\t\t\tself.disable();\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Is it locked?\n\t\t\tlocked: function() {\n\t\t\t\treturn !stack;\n\t\t\t},\n\t\t\t// Call all callbacks with the given context and arguments\n\t\t\tfireWith: function( context, args ) {\n\t\t\t\targs = args || [];\n\t\t\t\targs = [ context, args.slice ? args.slice() : args ];\n\t\t\t\tif ( list && ( !fired || stack ) ) {\n\t\t\t\t\tif ( firing ) {\n\t\t\t\t\t\tstack.push( args );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfire( args );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Call all the callbacks with the given arguments\n\t\t\tfire: function() {\n\t\t\t\tself.fireWith( this, arguments );\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// To know if the callbacks have already been called at least once\n\t\t\tfired: function() {\n\t\t\t\treturn !!fired;\n\t\t\t}\n\t\t};\n\n\treturn self;\n};\njQuery.extend({\n\n\tDeferred: function( func ) {\n\t\tvar tuples = [\n\t\t\t\t// action, add listener, listener list, final state\n\t\t\t\t[ \"resolve\", \"done\", jQuery.Callbacks(\"once memory\"), \"resolved\" ],\n\t\t\t\t[ \"reject\", \"fail\", jQuery.Callbacks(\"once memory\"), \"rejected\" ],\n\t\t\t\t[ \"notify\", \"progress\", jQuery.Callbacks(\"memory\") ]\n\t\t\t],\n\t\t\tstate = \"pending\",\n\t\t\tpromise = {\n\t\t\t\tstate: function() {\n\t\t\t\t\treturn state;\n\t\t\t\t},\n\t\t\t\talways: function() {\n\t\t\t\t\tdeferred.done( arguments ).fail( arguments );\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\tthen: function( /* fnDone, fnFail, fnProgress */ ) {\n\t\t\t\t\tvar fns = arguments;\n\t\t\t\t\treturn jQuery.Deferred(function( newDefer ) {\n\t\t\t\t\t\tjQuery.each( tuples, function( i, tuple ) {\n\t\t\t\t\t\t\tvar action = tuple[ 0 ],\n\t\t\t\t\t\t\t\tfn = jQuery.isFunction( fns[ i ] ) && fns[ i ];\n\t\t\t\t\t\t\t// deferred[ done | fail | progress ] for forwarding actions to newDefer\n\t\t\t\t\t\t\tdeferred[ tuple[1] ](function() {\n\t\t\t\t\t\t\t\tvar returned = fn && fn.apply( this, arguments );\n\t\t\t\t\t\t\t\tif ( returned && jQuery.isFunction( returned.promise ) ) {\n\t\t\t\t\t\t\t\t\treturned.promise()\n\t\t\t\t\t\t\t\t\t\t.done( newDefer.resolve )\n\t\t\t\t\t\t\t\t\t\t.fail( newDefer.reject )\n\t\t\t\t\t\t\t\t\t\t.progress( newDefer.notify );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnewDefer[ action + \"With\" ]( this === promise ? newDefer.promise() : this, fn ? [ returned ] : arguments );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfns = null;\n\t\t\t\t\t}).promise();\n\t\t\t\t},\n\t\t\t\t// Get a promise for this deferred\n\t\t\t\t// If obj is provided, the promise aspect is added to the object\n\t\t\t\tpromise: function( obj ) {\n\t\t\t\t\treturn obj != null ? jQuery.extend( obj, promise ) : promise;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeferred = {};\n\n\t\t// Keep pipe for back-compat\n\t\tpromise.pipe = promise.then;\n\n\t\t// Add list-specific methods\n\t\tjQuery.each( tuples, function( i, tuple ) {\n\t\t\tvar list = tuple[ 2 ],\n\t\t\t\tstateString = tuple[ 3 ];\n\n\t\t\t// promise[ done | fail | progress ] = list.add\n\t\t\tpromise[ tuple[1] ] = list.add;\n\n\t\t\t// Handle state\n\t\t\tif ( stateString ) {\n\t\t\t\tlist.add(function() {\n\t\t\t\t\t// state = [ resolved | rejected ]\n\t\t\t\t\tstate = stateString;\n\n\t\t\t\t// [ reject_list | resolve_list ].disable; progress_list.lock\n\t\t\t\t}, tuples[ i ^ 1 ][ 2 ].disable, tuples[ 2 ][ 2 ].lock );\n\t\t\t}\n\n\t\t\t// deferred[ resolve | reject | notify ]\n\t\t\tdeferred[ tuple[0] ] = function() {\n\t\t\t\tdeferred[ tuple[0] + \"With\" ]( this === deferred ? promise : this, arguments );\n\t\t\t\treturn this;\n\t\t\t};\n\t\t\tdeferred[ tuple[0] + \"With\" ] = list.fireWith;\n\t\t});\n\n\t\t// Make the deferred a promise\n\t\tpromise.promise( deferred );\n\n\t\t// Call given func if any\n\t\tif ( func ) {\n\t\t\tfunc.call( deferred, deferred );\n\t\t}\n\n\t\t// All done!\n\t\treturn deferred;\n\t},\n\n\t// Deferred helper\n\twhen: function( subordinate /* , ..., subordinateN */ ) {\n\t\tvar i = 0,\n\t\t\tresolveValues = core_slice.call( arguments ),\n\t\t\tlength = resolveValues.length,\n\n\t\t\t// the count of uncompleted subordinates\n\t\t\tremaining = length !== 1 || ( subordinate && jQuery.isFunction( subordinate.promise ) ) ? length : 0,\n\n\t\t\t// the master Deferred. If resolveValues consist of only a single Deferred, just use that.\n\t\t\tdeferred = remaining === 1 ? subordinate : jQuery.Deferred(),\n\n\t\t\t// Update function for both resolve and progress values\n\t\t\tupdateFunc = function( i, contexts, values ) {\n\t\t\t\treturn function( value ) {\n\t\t\t\t\tcontexts[ i ] = this;\n\t\t\t\t\tvalues[ i ] = arguments.length > 1 ? core_slice.call( arguments ) : value;\n\t\t\t\t\tif( values === progressValues ) {\n\t\t\t\t\t\tdeferred.notifyWith( contexts, values );\n\t\t\t\t\t} else if ( !( --remaining ) ) {\n\t\t\t\t\t\tdeferred.resolveWith( contexts, values );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t},\n\n\t\t\tprogressValues, progressContexts, resolveContexts;\n\n\t\t// add listeners to Deferred subordinates; treat others as resolved\n\t\tif ( length > 1 ) {\n\t\t\tprogressValues = new Array( length );\n\t\t\tprogressContexts = new Array( length );\n\t\t\tresolveContexts = new Array( length );\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tif ( resolveValues[ i ] && jQuery.isFunction( resolveValues[ i ].promise ) ) {\n\t\t\t\t\tresolveValues[ i ].promise()\n\t\t\t\t\t\t.done( updateFunc( i, resolveContexts, resolveValues ) )\n\t\t\t\t\t\t.fail( deferred.reject )\n\t\t\t\t\t\t.progress( updateFunc( i, progressContexts, progressValues ) );\n\t\t\t\t} else {\n\t\t\t\t\t--remaining;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// if we're not waiting on anything, resolve the master\n\t\tif ( !remaining ) {\n\t\t\tdeferred.resolveWith( resolveContexts, resolveValues );\n\t\t}\n\n\t\treturn deferred.promise();\n\t}\n});\njQuery.support = (function() {\n\n\tvar support, all, a,\n\t\tinput, select, fragment,\n\t\topt, eventName, isSupported, i,\n\t\tdiv = document.createElement(\"div\");\n\n\t// Setup\n\tdiv.setAttribute( \"className\", \"t\" );\n\tdiv.innerHTML = \"  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>\";\n\n\t// Support tests won't run in some limited or non-browser environments\n\tall = div.getElementsByTagName(\"*\");\n\ta = div.getElementsByTagName(\"a\")[ 0 ];\n\tif ( !all || !a || !all.length ) {\n\t\treturn {};\n\t}\n\n\t// First batch of tests\n\tselect = document.createElement(\"select\");\n\topt = select.appendChild( document.createElement(\"option\") );\n\tinput = div.getElementsByTagName(\"input\")[ 0 ];\n\n\ta.style.cssText = \"top:1px;float:left;opacity:.5\";\n\tsupport = {\n\t\t// Test setAttribute on camelCase class. If it works, we need attrFixes when doing get/setAttribute (ie6/7)\n\t\tgetSetAttribute: div.className !== \"t\",\n\n\t\t// IE strips leading whitespace when .innerHTML is used\n\t\tleadingWhitespace: div.firstChild.nodeType === 3,\n\n\t\t// Make sure that tbody elements aren't automatically inserted\n\t\t// IE will insert them into empty tables\n\t\ttbody: !div.getElementsByTagName(\"tbody\").length,\n\n\t\t// Make sure that link elements get serialized correctly by innerHTML\n\t\t// This requires a wrapper element in IE\n\t\thtmlSerialize: !!div.getElementsByTagName(\"link\").length,\n\n\t\t// Get the style information from getAttribute\n\t\t// (IE uses .cssText instead)\n\t\tstyle: /top/.test( a.getAttribute(\"style\") ),\n\n\t\t// Make sure that URLs aren't manipulated\n\t\t// (IE normalizes it by default)\n\t\threfNormalized: a.getAttribute(\"href\") === \"/a\",\n\n\t\t// Make sure that element opacity exists\n\t\t// (IE uses filter instead)\n\t\t// Use a regex to work around a WebKit issue. See #5145\n\t\topacity: /^0.5/.test( a.style.opacity ),\n\n\t\t// Verify style float existence\n\t\t// (IE uses styleFloat instead of cssFloat)\n\t\tcssFloat: !!a.style.cssFloat,\n\n\t\t// Check the default checkbox/radio value (\"\" on WebKit; \"on\" elsewhere)\n\t\tcheckOn: !!input.value,\n\n\t\t// Make sure that a selected-by-default option has a working selected property.\n\t\t// (WebKit defaults to false instead of true, IE too, if it's in an optgroup)\n\t\toptSelected: opt.selected,\n\n\t\t// Tests for enctype support on a form (#6743)\n\t\tenctype: !!document.createElement(\"form\").enctype,\n\n\t\t// Makes sure cloning an html5 element does not cause problems\n\t\t// Where outerHTML is undefined, this still works\n\t\thtml5Clone: document.createElement(\"nav\").cloneNode( true ).outerHTML !== \"<:nav></:nav>\",\n\n\t\t// jQuery.support.boxModel DEPRECATED in 1.8 since we don't support Quirks Mode\n\t\tboxModel: document.compatMode === \"CSS1Compat\",\n\n\t\t// Will be defined later\n\t\tdeleteExpando: true,\n\t\tnoCloneEvent: true,\n\t\tinlineBlockNeedsLayout: false,\n\t\tshrinkWrapBlocks: false,\n\t\treliableMarginRight: true,\n\t\tboxSizingReliable: true,\n\t\tpixelPosition: false\n\t};\n\n\t// Make sure checked status is properly cloned\n\tinput.checked = true;\n\tsupport.noCloneChecked = input.cloneNode( true ).checked;\n\n\t// Make sure that the options inside disabled selects aren't marked as disabled\n\t// (WebKit marks them as disabled)\n\tselect.disabled = true;\n\tsupport.optDisabled = !opt.disabled;\n\n\t// Support: IE<9\n\ttry {\n\t\tdelete div.test;\n\t} catch( e ) {\n\t\tsupport.deleteExpando = false;\n\t}\n\n\t// Check if we can trust getAttribute(\"value\")\n\tinput = document.createElement(\"input\");\n\tinput.setAttribute( \"value\", \"\" );\n\tsupport.input = input.getAttribute( \"value\" ) === \"\";\n\n\t// Check if an input maintains its value after becoming a radio\n\tinput.value = \"t\";\n\tinput.setAttribute( \"type\", \"radio\" );\n\tsupport.radioValue = input.value === \"t\";\n\n\t// #11217 - WebKit loses check when the name is after the checked attribute\n\tinput.setAttribute( \"checked\", \"t\" );\n\tinput.setAttribute( \"name\", \"t\" );\n\n\tfragment = document.createDocumentFragment();\n\tfragment.appendChild( input );\n\n\t// Check if a disconnected checkbox will retain its checked\n\t// value of true after appended to the DOM (IE6/7)\n\tsupport.appendChecked = input.checked;\n\n\t// WebKit doesn't clone checked state correctly in fragments\n\tsupport.checkClone = fragment.cloneNode( true ).cloneNode( true ).lastChild.checked;\n\n\t// Support: IE<9\n\t// Opera does not clone events (and typeof div.attachEvent === undefined).\n\t// IE9-10 clones events bound via attachEvent, but they don't trigger with .click()\n\tif ( div.attachEvent ) {\n\t\tdiv.attachEvent( \"onclick\", function() {\n\t\t\tsupport.noCloneEvent = false;\n\t\t});\n\n\t\tdiv.cloneNode( true ).click();\n\t}\n\n\t// Support: IE<9 (lack submit/change bubble), Firefox 17+ (lack focusin event)\n\t// Beware of CSP restrictions (https://developer.mozilla.org/en/Security/CSP), test/csp.php\n\tfor ( i in { submit: true, change: true, focusin: true }) {\n\t\tdiv.setAttribute( eventName = \"on\" + i, \"t\" );\n\n\t\tsupport[ i + \"Bubbles\" ] = eventName in window || div.attributes[ eventName ].expando === false;\n\t}\n\n\tdiv.style.backgroundClip = \"content-box\";\n\tdiv.cloneNode( true ).style.backgroundClip = \"\";\n\tsupport.clearCloneStyle = div.style.backgroundClip === \"content-box\";\n\n\t// Run tests that need a body at doc ready\n\tjQuery(function() {\n\t\tvar container, marginDiv, tds,\n\t\t\tdivReset = \"padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;\",\n\t\t\tbody = document.getElementsByTagName(\"body\")[0];\n\n\t\tif ( !body ) {\n\t\t\t// Return for frameset docs that don't have a body\n\t\t\treturn;\n\t\t}\n\n\t\tcontainer = document.createElement(\"div\");\n\t\tcontainer.style.cssText = \"border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px\";\n\n\t\tbody.appendChild( container ).appendChild( div );\n\n\t\t// Support: IE8\n\t\t// Check if table cells still have offsetWidth/Height when they are set\n\t\t// to display:none and there are still other visible table cells in a\n\t\t// table row; if so, offsetWidth/Height are not reliable for use when\n\t\t// determining if an element has been hidden directly using\n\t\t// display:none (it is still safe to use offsets if a parent element is\n\t\t// hidden; don safety goggles and see bug #4512 for more information).\n\t\tdiv.innerHTML = \"<table><tr><td></td><td>t</td></tr></table>\";\n\t\ttds = div.getElementsByTagName(\"td\");\n\t\ttds[ 0 ].style.cssText = \"padding:0;margin:0;border:0;display:none\";\n\t\tisSupported = ( tds[ 0 ].offsetHeight === 0 );\n\n\t\ttds[ 0 ].style.display = \"\";\n\t\ttds[ 1 ].style.display = \"none\";\n\n\t\t// Support: IE8\n\t\t// Check if empty table cells still have offsetWidth/Height\n\t\tsupport.reliableHiddenOffsets = isSupported && ( tds[ 0 ].offsetHeight === 0 );\n\n\t\t// Check box-sizing and margin behavior\n\t\tdiv.innerHTML = \"\";\n\t\tdiv.style.cssText = \"box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;\";\n\t\tsupport.boxSizing = ( div.offsetWidth === 4 );\n\t\tsupport.doesNotIncludeMarginInBodyOffset = ( body.offsetTop !== 1 );\n\n\t\t// Use window.getComputedStyle because jsdom on node.js will break without it.\n\t\tif ( window.getComputedStyle ) {\n\t\t\tsupport.pixelPosition = ( window.getComputedStyle( div, null ) || {} ).top !== \"1%\";\n\t\t\tsupport.boxSizingReliable = ( window.getComputedStyle( div, null ) || { width: \"4px\" } ).width === \"4px\";\n\n\t\t\t// Check if div with explicit width and no margin-right incorrectly\n\t\t\t// gets computed margin-right based on width of container. (#3333)\n\t\t\t// Fails in WebKit before Feb 2011 nightlies\n\t\t\t// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right\n\t\t\tmarginDiv = div.appendChild( document.createElement(\"div\") );\n\t\t\tmarginDiv.style.cssText = div.style.cssText = divReset;\n\t\t\tmarginDiv.style.marginRight = marginDiv.style.width = \"0\";\n\t\t\tdiv.style.width = \"1px\";\n\n\t\t\tsupport.reliableMarginRight =\n\t\t\t\t!parseFloat( ( window.getComputedStyle( marginDiv, null ) || {} ).marginRight );\n\t\t}\n\n\t\tif ( typeof div.style.zoom !== core_strundefined ) {\n\t\t\t// Support: IE<8\n\t\t\t// Check if natively block-level elements act like inline-block\n\t\t\t// elements when setting their display to 'inline' and giving\n\t\t\t// them layout\n\t\t\tdiv.innerHTML = \"\";\n\t\t\tdiv.style.cssText = divReset + \"width:1px;padding:1px;display:inline;zoom:1\";\n\t\t\tsupport.inlineBlockNeedsLayout = ( div.offsetWidth === 3 );\n\n\t\t\t// Support: IE6\n\t\t\t// Check if elements with layout shrink-wrap their children\n\t\t\tdiv.style.display = \"block\";\n\t\t\tdiv.innerHTML = \"<div></div>\";\n\t\t\tdiv.firstChild.style.width = \"5px\";\n\t\t\tsupport.shrinkWrapBlocks = ( div.offsetWidth !== 3 );\n\n\t\t\tif ( support.inlineBlockNeedsLayout ) {\n\t\t\t\t// Prevent IE 6 from affecting layout for positioned elements #11048\n\t\t\t\t// Prevent IE from shrinking the body in IE 7 mode #12869\n\t\t\t\t// Support: IE<8\n\t\t\t\tbody.style.zoom = 1;\n\t\t\t}\n\t\t}\n\n\t\tbody.removeChild( container );\n\n\t\t// Null elements to avoid leaks in IE\n\t\tcontainer = div = tds = marginDiv = null;\n\t});\n\n\t// Null elements to avoid leaks in IE\n\tall = select = fragment = opt = a = input = null;\n\n\treturn support;\n})();\n\nvar rbrace = /(?:\\{[\\s\\S]*\\}|\\[[\\s\\S]*\\])$/,\n\trmultiDash = /([A-Z])/g;\n\nfunction internalData( elem, name, data, pvt /* Internal Use Only */ ){\n\tif ( !jQuery.acceptData( elem ) ) {\n\t\treturn;\n\t}\n\n\tvar thisCache, ret,\n\t\tinternalKey = jQuery.expando,\n\t\tgetByName = typeof name === \"string\",\n\n\t\t// We have to handle DOM nodes and JS objects differently because IE6-7\n\t\t// can't GC object references properly across the DOM-JS boundary\n\t\tisNode = elem.nodeType,\n\n\t\t// Only DOM nodes need the global jQuery cache; JS object data is\n\t\t// attached directly to the object so GC can occur automatically\n\t\tcache = isNode ? jQuery.cache : elem,\n\n\t\t// Only defining an ID for JS objects if its cache already exists allows\n\t\t// the code to shortcut on the same path as a DOM node with no cache\n\t\tid = isNode ? elem[ internalKey ] : elem[ internalKey ] && internalKey;\n\n\t// Avoid doing any more work than we need to when trying to get data on an\n\t// object that has no data at all\n\tif ( (!id || !cache[id] || (!pvt && !cache[id].data)) && getByName && data === undefined ) {\n\t\treturn;\n\t}\n\n\tif ( !id ) {\n\t\t// Only DOM nodes need a new unique ID for each element since their data\n\t\t// ends up in the global cache\n\t\tif ( isNode ) {\n\t\t\telem[ internalKey ] = id = core_deletedIds.pop() || jQuery.guid++;\n\t\t} else {\n\t\t\tid = internalKey;\n\t\t}\n\t}\n\n\tif ( !cache[ id ] ) {\n\t\tcache[ id ] = {};\n\n\t\t// Avoids exposing jQuery metadata on plain JS objects when the object\n\t\t// is serialized using JSON.stringify\n\t\tif ( !isNode ) {\n\t\t\tcache[ id ].toJSON = jQuery.noop;\n\t\t}\n\t}\n\n\t// An object can be passed to jQuery.data instead of a key/value pair; this gets\n\t// shallow copied over onto the existing cache\n\tif ( typeof name === \"object\" || typeof name === \"function\" ) {\n\t\tif ( pvt ) {\n\t\t\tcache[ id ] = jQuery.extend( cache[ id ], name );\n\t\t} else {\n\t\t\tcache[ id ].data = jQuery.extend( cache[ id ].data, name );\n\t\t}\n\t}\n\n\tthisCache = cache[ id ];\n\n\t// jQuery data() is stored in a separate object inside the object's internal data\n\t// cache in order to avoid key collisions between internal data and user-defined\n\t// data.\n\tif ( !pvt ) {\n\t\tif ( !thisCache.data ) {\n\t\t\tthisCache.data = {};\n\t\t}\n\n\t\tthisCache = thisCache.data;\n\t}\n\n\tif ( data !== undefined ) {\n\t\tthisCache[ jQuery.camelCase( name ) ] = data;\n\t}\n\n\t// Check for both converted-to-camel and non-converted data property names\n\t// If a data property was specified\n\tif ( getByName ) {\n\n\t\t// First Try to find as-is property data\n\t\tret = thisCache[ name ];\n\n\t\t// Test for null|undefined property data\n\t\tif ( ret == null ) {\n\n\t\t\t// Try to find the camelCased property\n\t\t\tret = thisCache[ jQuery.camelCase( name ) ];\n\t\t}\n\t} else {\n\t\tret = thisCache;\n\t}\n\n\treturn ret;\n}\n\nfunction internalRemoveData( elem, name, pvt ) {\n\tif ( !jQuery.acceptData( elem ) ) {\n\t\treturn;\n\t}\n\n\tvar i, l, thisCache,\n\t\tisNode = elem.nodeType,\n\n\t\t// See jQuery.data for more information\n\t\tcache = isNode ? jQuery.cache : elem,\n\t\tid = isNode ? elem[ jQuery.expando ] : jQuery.expando;\n\n\t// If there is already no cache entry for this object, there is no\n\t// purpose in continuing\n\tif ( !cache[ id ] ) {\n\t\treturn;\n\t}\n\n\tif ( name ) {\n\n\t\tthisCache = pvt ? cache[ id ] : cache[ id ].data;\n\n\t\tif ( thisCache ) {\n\n\t\t\t// Support array or space separated string names for data keys\n\t\t\tif ( !jQuery.isArray( name ) ) {\n\n\t\t\t\t// try the string as a key before any manipulation\n\t\t\t\tif ( name in thisCache ) {\n\t\t\t\t\tname = [ name ];\n\t\t\t\t} else {\n\n\t\t\t\t\t// split the camel cased version by spaces unless a key with the spaces exists\n\t\t\t\t\tname = jQuery.camelCase( name );\n\t\t\t\t\tif ( name in thisCache ) {\n\t\t\t\t\t\tname = [ name ];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tname = name.split(\" \");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// If \"name\" is an array of keys...\n\t\t\t\t// When data is initially created, via (\"key\", \"val\") signature,\n\t\t\t\t// keys will be converted to camelCase.\n\t\t\t\t// Since there is no way to tell _how_ a key was added, remove\n\t\t\t\t// both plain key and camelCase key. #12786\n\t\t\t\t// This will only penalize the array argument path.\n\t\t\t\tname = name.concat( jQuery.map( name, jQuery.camelCase ) );\n\t\t\t}\n\n\t\t\tfor ( i = 0, l = name.length; i < l; i++ ) {\n\t\t\t\tdelete thisCache[ name[i] ];\n\t\t\t}\n\n\t\t\t// If there is no data left in the cache, we want to continue\n\t\t\t// and let the cache object itself get destroyed\n\t\t\tif ( !( pvt ? isEmptyDataObject : jQuery.isEmptyObject )( thisCache ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\t// See jQuery.data for more information\n\tif ( !pvt ) {\n\t\tdelete cache[ id ].data;\n\n\t\t// Don't destroy the parent cache unless the internal data object\n\t\t// had been the only thing left in it\n\t\tif ( !isEmptyDataObject( cache[ id ] ) ) {\n\t\t\treturn;\n\t\t}\n\t}\n\n\t// Destroy the cache\n\tif ( isNode ) {\n\t\tjQuery.cleanData( [ elem ], true );\n\n\t// Use delete when supported for expandos or `cache` is not a window per isWindow (#10080)\n\t} else if ( jQuery.support.deleteExpando || cache != cache.window ) {\n\t\tdelete cache[ id ];\n\n\t// When all else fails, null\n\t} else {\n\t\tcache[ id ] = null;\n\t}\n}\n\njQuery.extend({\n\tcache: {},\n\n\t// Unique for each copy of jQuery on the page\n\t// Non-digits removed to match rinlinejQuery\n\texpando: \"jQuery\" + ( core_version + Math.random() ).replace( /\\D/g, \"\" ),\n\n\t// The following elements throw uncatchable exceptions if you\n\t// attempt to add expando properties to them.\n\tnoData: {\n\t\t\"embed\": true,\n\t\t// Ban all objects except for Flash (which handle expandos)\n\t\t\"object\": \"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\",\n\t\t\"applet\": true\n\t},\n\n\thasData: function( elem ) {\n\t\telem = elem.nodeType ? jQuery.cache[ elem[jQuery.expando] ] : elem[ jQuery.expando ];\n\t\treturn !!elem && !isEmptyDataObject( elem );\n\t},\n\n\tdata: function( elem, name, data ) {\n\t\treturn internalData( elem, name, data );\n\t},\n\n\tremoveData: function( elem, name ) {\n\t\treturn internalRemoveData( elem, name );\n\t},\n\n\t// For internal use only.\n\t_data: function( elem, name, data ) {\n\t\treturn internalData( elem, name, data, true );\n\t},\n\n\t_removeData: function( elem, name ) {\n\t\treturn internalRemoveData( elem, name, true );\n\t},\n\n\t// A method for determining if a DOM node can handle the data expando\n\tacceptData: function( elem ) {\n\t\t// Do not set data on non-element because it will not be cleared (#8335).\n\t\tif ( elem.nodeType && elem.nodeType !== 1 && elem.nodeType !== 9 ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar noData = elem.nodeName && jQuery.noData[ elem.nodeName.toLowerCase() ];\n\n\t\t// nodes accept data unless otherwise specified; rejection can be conditional\n\t\treturn !noData || noData !== true && elem.getAttribute(\"classid\") === noData;\n\t}\n});\n\njQuery.fn.extend({\n\tdata: function( key, value ) {\n\t\tvar attrs, name,\n\t\t\telem = this[0],\n\t\t\ti = 0,\n\t\t\tdata = null;\n\n\t\t// Gets all values\n\t\tif ( key === undefined ) {\n\t\t\tif ( this.length ) {\n\t\t\t\tdata = jQuery.data( elem );\n\n\t\t\t\tif ( elem.nodeType === 1 && !jQuery._data( elem, \"parsedAttrs\" ) ) {\n\t\t\t\t\tattrs = elem.attributes;\n\t\t\t\t\tfor ( ; i < attrs.length; i++ ) {\n\t\t\t\t\t\tname = attrs[i].name;\n\n\t\t\t\t\t\tif ( !name.indexOf( \"data-\" ) ) {\n\t\t\t\t\t\t\tname = jQuery.camelCase( name.slice(5) );\n\n\t\t\t\t\t\t\tdataAttr( elem, name, data[ name ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tjQuery._data( elem, \"parsedAttrs\", true );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn data;\n\t\t}\n\n\t\t// Sets multiple values\n\t\tif ( typeof key === \"object\" ) {\n\t\t\treturn this.each(function() {\n\t\t\t\tjQuery.data( this, key );\n\t\t\t});\n\t\t}\n\n\t\treturn jQuery.access( this, function( value ) {\n\n\t\t\tif ( value === undefined ) {\n\t\t\t\t// Try to fetch any internally stored data first\n\t\t\t\treturn elem ? dataAttr( elem, key, jQuery.data( elem, key ) ) : null;\n\t\t\t}\n\n\t\t\tthis.each(function() {\n\t\t\t\tjQuery.data( this, key, value );\n\t\t\t});\n\t\t}, null, value, arguments.length > 1, null, true );\n\t},\n\n\tremoveData: function( key ) {\n\t\treturn this.each(function() {\n\t\t\tjQuery.removeData( this, key );\n\t\t});\n\t}\n});\n\nfunction dataAttr( elem, key, data ) {\n\t// If nothing was found internally, try to fetch any\n\t// data from the HTML5 data-* attribute\n\tif ( data === undefined && elem.nodeType === 1 ) {\n\n\t\tvar name = \"data-\" + key.replace( rmultiDash, \"-$1\" ).toLowerCase();\n\n\t\tdata = elem.getAttribute( name );\n\n\t\tif ( typeof data === \"string\" ) {\n\t\t\ttry {\n\t\t\t\tdata = data === \"true\" ? true :\n\t\t\t\t\tdata === \"false\" ? false :\n\t\t\t\t\tdata === \"null\" ? null :\n\t\t\t\t\t// Only convert to a number if it doesn't change the string\n\t\t\t\t\t+data + \"\" === data ? +data :\n\t\t\t\t\trbrace.test( data ) ? jQuery.parseJSON( data ) :\n\t\t\t\t\t\tdata;\n\t\t\t} catch( e ) {}\n\n\t\t\t// Make sure we set the data so it isn't changed later\n\t\t\tjQuery.data( elem, key, data );\n\n\t\t} else {\n\t\t\tdata = undefined;\n\t\t}\n\t}\n\n\treturn data;\n}\n\n// checks a cache object for emptiness\nfunction isEmptyDataObject( obj ) {\n\tvar name;\n\tfor ( name in obj ) {\n\n\t\t// if the public data object is empty, the private is still empty\n\t\tif ( name === \"data\" && jQuery.isEmptyObject( obj[name] ) ) {\n\t\t\tcontinue;\n\t\t}\n\t\tif ( name !== \"toJSON\" ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\njQuery.extend({\n\tqueue: function( elem, type, data ) {\n\t\tvar queue;\n\n\t\tif ( elem ) {\n\t\t\ttype = ( type || \"fx\" ) + \"queue\";\n\t\t\tqueue = jQuery._data( elem, type );\n\n\t\t\t// Speed up dequeue by getting out quickly if this is just a lookup\n\t\t\tif ( data ) {\n\t\t\t\tif ( !queue || jQuery.isArray(data) ) {\n\t\t\t\t\tqueue = jQuery._data( elem, type, jQuery.makeArray(data) );\n\t\t\t\t} else {\n\t\t\t\t\tqueue.push( data );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn queue || [];\n\t\t}\n\t},\n\n\tdequeue: function( elem, type ) {\n\t\ttype = type || \"fx\";\n\n\t\tvar queue = jQuery.queue( elem, type ),\n\t\t\tstartLength = queue.length,\n\t\t\tfn = queue.shift(),\n\t\t\thooks = jQuery._queueHooks( elem, type ),\n\t\t\tnext = function() {\n\t\t\t\tjQuery.dequeue( elem, type );\n\t\t\t};\n\n\t\t// If the fx queue is dequeued, always remove the progress sentinel\n\t\tif ( fn === \"inprogress\" ) {\n\t\t\tfn = queue.shift();\n\t\t\tstartLength--;\n\t\t}\n\n\t\thooks.cur = fn;\n\t\tif ( fn ) {\n\n\t\t\t// Add a progress sentinel to prevent the fx queue from being\n\t\t\t// automatically dequeued\n\t\t\tif ( type === \"fx\" ) {\n\t\t\t\tqueue.unshift( \"inprogress\" );\n\t\t\t}\n\n\t\t\t// clear up the last queue stop function\n\t\t\tdelete hooks.stop;\n\t\t\tfn.call( elem, next, hooks );\n\t\t}\n\n\t\tif ( !startLength && hooks ) {\n\t\t\thooks.empty.fire();\n\t\t}\n\t},\n\n\t// not intended for public consumption - generates a queueHooks object, or returns the current one\n\t_queueHooks: function( elem, type ) {\n\t\tvar key = type + \"queueHooks\";\n\t\treturn jQuery._data( elem, key ) || jQuery._data( elem, key, {\n\t\t\tempty: jQuery.Callbacks(\"once memory\").add(function() {\n\t\t\t\tjQuery._removeData( elem, type + \"queue\" );\n\t\t\t\tjQuery._removeData( elem, key );\n\t\t\t})\n\t\t});\n\t}\n});\n\njQuery.fn.extend({\n\tqueue: function( type, data ) {\n\t\tvar setter = 2;\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tdata = type;\n\t\t\ttype = \"fx\";\n\t\t\tsetter--;\n\t\t}\n\n\t\tif ( arguments.length < setter ) {\n\t\t\treturn jQuery.queue( this[0], type );\n\t\t}\n\n\t\treturn data === undefined ?\n\t\t\tthis :\n\t\t\tthis.each(function() {\n\t\t\t\tvar queue = jQuery.queue( this, type, data );\n\n\t\t\t\t// ensure a hooks for this queue\n\t\t\t\tjQuery._queueHooks( this, type );\n\n\t\t\t\tif ( type === \"fx\" && queue[0] !== \"inprogress\" ) {\n\t\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t\t}\n\t\t\t});\n\t},\n\tdequeue: function( type ) {\n\t\treturn this.each(function() {\n\t\t\tjQuery.dequeue( this, type );\n\t\t});\n\t},\n\t// Based off of the plugin by Clint Helfers, with permission.\n\t// http://blindsignals.com/index.php/2009/07/jquery-delay/\n\tdelay: function( time, type ) {\n\t\ttime = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;\n\t\ttype = type || \"fx\";\n\n\t\treturn this.queue( type, function( next, hooks ) {\n\t\t\tvar timeout = setTimeout( next, time );\n\t\t\thooks.stop = function() {\n\t\t\t\tclearTimeout( timeout );\n\t\t\t};\n\t\t});\n\t},\n\tclearQueue: function( type ) {\n\t\treturn this.queue( type || \"fx\", [] );\n\t},\n\t// Get a promise resolved when queues of a certain type\n\t// are emptied (fx is the type by default)\n\tpromise: function( type, obj ) {\n\t\tvar tmp,\n\t\t\tcount = 1,\n\t\t\tdefer = jQuery.Deferred(),\n\t\t\telements = this,\n\t\t\ti = this.length,\n\t\t\tresolve = function() {\n\t\t\t\tif ( !( --count ) ) {\n\t\t\t\t\tdefer.resolveWith( elements, [ elements ] );\n\t\t\t\t}\n\t\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tobj = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\ttype = type || \"fx\";\n\n\t\twhile( i-- ) {\n\t\t\ttmp = jQuery._data( elements[ i ], type + \"queueHooks\" );\n\t\t\tif ( tmp && tmp.empty ) {\n\t\t\t\tcount++;\n\t\t\t\ttmp.empty.add( resolve );\n\t\t\t}\n\t\t}\n\t\tresolve();\n\t\treturn defer.promise( obj );\n\t}\n});\nvar nodeHook, boolHook,\n\trclass = /[\\t\\r\\n]/g,\n\trreturn = /\\r/g,\n\trfocusable = /^(?:input|select|textarea|button|object)$/i,\n\trclickable = /^(?:a|area)$/i,\n\trboolean = /^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,\n\truseDefault = /^(?:checked|selected)$/i,\n\tgetSetAttribute = jQuery.support.getSetAttribute,\n\tgetSetInput = jQuery.support.input;\n\njQuery.fn.extend({\n\tattr: function( name, value ) {\n\t\treturn jQuery.access( this, jQuery.attr, name, value, arguments.length > 1 );\n\t},\n\n\tremoveAttr: function( name ) {\n\t\treturn this.each(function() {\n\t\t\tjQuery.removeAttr( this, name );\n\t\t});\n\t},\n\n\tprop: function( name, value ) {\n\t\treturn jQuery.access( this, jQuery.prop, name, value, arguments.length > 1 );\n\t},\n\n\tremoveProp: function( name ) {\n\t\tname = jQuery.propFix[ name ] || name;\n\t\treturn this.each(function() {\n\t\t\t// try/catch handles cases where IE balks (such as removing a property on window)\n\t\t\ttry {\n\t\t\t\tthis[ name ] = undefined;\n\t\t\t\tdelete this[ name ];\n\t\t\t} catch( e ) {}\n\t\t});\n\t},\n\n\taddClass: function( value ) {\n\t\tvar classes, elem, cur, clazz, j,\n\t\t\ti = 0,\n\t\t\tlen = this.length,\n\t\t\tproceed = typeof value === \"string\" && value;\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each(function( j ) {\n\t\t\t\tjQuery( this ).addClass( value.call( this, j, this.className ) );\n\t\t\t});\n\t\t}\n\n\t\tif ( proceed ) {\n\t\t\t// The disjunction here is for better compressibility (see removeClass)\n\t\t\tclasses = ( value || \"\" ).match( core_rnotwhite ) || [];\n\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\telem = this[ i ];\n\t\t\t\tcur = elem.nodeType === 1 && ( elem.className ?\n\t\t\t\t\t( \" \" + elem.className + \" \" ).replace( rclass, \" \" ) :\n\t\t\t\t\t\" \"\n\t\t\t\t);\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( (clazz = classes[j++]) ) {\n\t\t\t\t\t\tif ( cur.indexOf( \" \" + clazz + \" \" ) < 0 ) {\n\t\t\t\t\t\t\tcur += clazz + \" \";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telem.className = jQuery.trim( cur );\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tremoveClass: function( value ) {\n\t\tvar classes, elem, cur, clazz, j,\n\t\t\ti = 0,\n\t\t\tlen = this.length,\n\t\t\tproceed = arguments.length === 0 || typeof value === \"string\" && value;\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each(function( j ) {\n\t\t\t\tjQuery( this ).removeClass( value.call( this, j, this.className ) );\n\t\t\t});\n\t\t}\n\t\tif ( proceed ) {\n\t\t\tclasses = ( value || \"\" ).match( core_rnotwhite ) || [];\n\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\telem = this[ i ];\n\t\t\t\t// This expression is here for better compressibility (see addClass)\n\t\t\t\tcur = elem.nodeType === 1 && ( elem.className ?\n\t\t\t\t\t( \" \" + elem.className + \" \" ).replace( rclass, \" \" ) :\n\t\t\t\t\t\"\"\n\t\t\t\t);\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( (clazz = classes[j++]) ) {\n\t\t\t\t\t\t// Remove *all* instances\n\t\t\t\t\t\twhile ( cur.indexOf( \" \" + clazz + \" \" ) >= 0 ) {\n\t\t\t\t\t\t\tcur = cur.replace( \" \" + clazz + \" \", \" \" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telem.className = value ? jQuery.trim( cur ) : \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\ttoggleClass: function( value, stateVal ) {\n\t\tvar type = typeof value,\n\t\t\tisBool = typeof stateVal === \"boolean\";\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each(function( i ) {\n\t\t\t\tjQuery( this ).toggleClass( value.call(this, i, this.className, stateVal), stateVal );\n\t\t\t});\n\t\t}\n\n\t\treturn this.each(function() {\n\t\t\tif ( type === \"string\" ) {\n\t\t\t\t// toggle individual class names\n\t\t\t\tvar className,\n\t\t\t\t\ti = 0,\n\t\t\t\t\tself = jQuery( this ),\n\t\t\t\t\tstate = stateVal,\n\t\t\t\t\tclassNames = value.match( core_rnotwhite ) || [];\n\n\t\t\t\twhile ( (className = classNames[ i++ ]) ) {\n\t\t\t\t\t// check each className given, space separated list\n\t\t\t\t\tstate = isBool ? state : !self.hasClass( className );\n\t\t\t\t\tself[ state ? \"addClass\" : \"removeClass\" ]( className );\n\t\t\t\t}\n\n\t\t\t// Toggle whole class name\n\t\t\t} else if ( type === core_strundefined || type === \"boolean\" ) {\n\t\t\t\tif ( this.className ) {\n\t\t\t\t\t// store className if set\n\t\t\t\t\tjQuery._data( this, \"__className__\", this.className );\n\t\t\t\t}\n\n\t\t\t\t// If the element has a class name or if we're passed \"false\",\n\t\t\t\t// then remove the whole classname (if there was one, the above saved it).\n\t\t\t\t// Otherwise bring back whatever was previously saved (if anything),\n\t\t\t\t// falling back to the empty string if nothing was stored.\n\t\t\t\tthis.className = this.className || value === false ? \"\" : jQuery._data( this, \"__className__\" ) || \"\";\n\t\t\t}\n\t\t});\n\t},\n\n\thasClass: function( selector ) {\n\t\tvar className = \" \" + selector + \" \",\n\t\t\ti = 0,\n\t\t\tl = this.length;\n\t\tfor ( ; i < l; i++ ) {\n\t\t\tif ( this[i].nodeType === 1 && (\" \" + this[i].className + \" \").replace(rclass, \" \").indexOf( className ) >= 0 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\tval: function( value ) {\n\t\tvar ret, hooks, isFunction,\n\t\t\telem = this[0];\n\n\t\tif ( !arguments.length ) {\n\t\t\tif ( elem ) {\n\t\t\t\thooks = jQuery.valHooks[ elem.type ] || jQuery.valHooks[ elem.nodeName.toLowerCase() ];\n\n\t\t\t\tif ( hooks && \"get\" in hooks && (ret = hooks.get( elem, \"value\" )) !== undefined ) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\n\t\t\t\tret = elem.value;\n\n\t\t\t\treturn typeof ret === \"string\" ?\n\t\t\t\t\t// handle most common string cases\n\t\t\t\t\tret.replace(rreturn, \"\") :\n\t\t\t\t\t// handle cases where value is null/undef or number\n\t\t\t\t\tret == null ? \"\" : ret;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tisFunction = jQuery.isFunction( value );\n\n\t\treturn this.each(function( i ) {\n\t\t\tvar val,\n\t\t\t\tself = jQuery(this);\n\n\t\t\tif ( this.nodeType !== 1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( isFunction ) {\n\t\t\t\tval = value.call( this, i, self.val() );\n\t\t\t} else {\n\t\t\t\tval = value;\n\t\t\t}\n\n\t\t\t// Treat null/undefined as \"\"; convert numbers to string\n\t\t\tif ( val == null ) {\n\t\t\t\tval = \"\";\n\t\t\t} else if ( typeof val === \"number\" ) {\n\t\t\t\tval += \"\";\n\t\t\t} else if ( jQuery.isArray( val ) ) {\n\t\t\t\tval = jQuery.map(val, function ( value ) {\n\t\t\t\t\treturn value == null ? \"\" : value + \"\";\n\t\t\t\t});\n\t\t\t}\n\n\t\t\thooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];\n\n\t\t\t// If set returns undefined, fall back to normal setting\n\t\t\tif ( !hooks || !(\"set\" in hooks) || hooks.set( this, val, \"value\" ) === undefined ) {\n\t\t\t\tthis.value = val;\n\t\t\t}\n\t\t});\n\t}\n});\n\njQuery.extend({\n\tvalHooks: {\n\t\toption: {\n\t\t\tget: function( elem ) {\n\t\t\t\t// attributes.value is undefined in Blackberry 4.7 but\n\t\t\t\t// uses .value. See #6932\n\t\t\t\tvar val = elem.attributes.value;\n\t\t\t\treturn !val || val.specified ? elem.value : elem.text;\n\t\t\t}\n\t\t},\n\t\tselect: {\n\t\t\tget: function( elem ) {\n\t\t\t\tvar value, option,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tindex = elem.selectedIndex,\n\t\t\t\t\tone = elem.type === \"select-one\" || index < 0,\n\t\t\t\t\tvalues = one ? null : [],\n\t\t\t\t\tmax = one ? index + 1 : options.length,\n\t\t\t\t\ti = index < 0 ?\n\t\t\t\t\t\tmax :\n\t\t\t\t\t\tone ? index : 0;\n\n\t\t\t\t// Loop through all the selected options\n\t\t\t\tfor ( ; i < max; i++ ) {\n\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\t// oldIE doesn't update selected after form reset (#2551)\n\t\t\t\t\tif ( ( option.selected || i === index ) &&\n\t\t\t\t\t\t\t// Don't return options that are disabled or in a disabled optgroup\n\t\t\t\t\t\t\t( jQuery.support.optDisabled ? !option.disabled : option.getAttribute(\"disabled\") === null ) &&\n\t\t\t\t\t\t\t( !option.parentNode.disabled || !jQuery.nodeName( option.parentNode, \"optgroup\" ) ) ) {\n\n\t\t\t\t\t\t// Get the specific value for the option\n\t\t\t\t\t\tvalue = jQuery( option ).val();\n\n\t\t\t\t\t\t// We don't need an array for one selects\n\t\t\t\t\t\tif ( one ) {\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Multi-Selects return an array\n\t\t\t\t\t\tvalues.push( value );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn values;\n\t\t\t},\n\n\t\t\tset: function( elem, value ) {\n\t\t\t\tvar values = jQuery.makeArray( value );\n\n\t\t\t\tjQuery(elem).find(\"option\").each(function() {\n\t\t\t\t\tthis.selected = jQuery.inArray( jQuery(this).val(), values ) >= 0;\n\t\t\t\t});\n\n\t\t\t\tif ( !values.length ) {\n\t\t\t\t\telem.selectedIndex = -1;\n\t\t\t\t}\n\t\t\t\treturn values;\n\t\t\t}\n\t\t}\n\t},\n\n\tattr: function( elem, name, value ) {\n\t\tvar hooks, notxml, ret,\n\t\t\tnType = elem.nodeType;\n\n\t\t// don't get/set attributes on text, comment and attribute nodes\n\t\tif ( !elem || nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Fallback to prop when attributes are not supported\n\t\tif ( typeof elem.getAttribute === core_strundefined ) {\n\t\t\treturn jQuery.prop( elem, name, value );\n\t\t}\n\n\t\tnotxml = nType !== 1 || !jQuery.isXMLDoc( elem );\n\n\t\t// All attributes are lowercase\n\t\t// Grab necessary hook if one is defined\n\t\tif ( notxml ) {\n\t\t\tname = name.toLowerCase();\n\t\t\thooks = jQuery.attrHooks[ name ] || ( rboolean.test( name ) ? boolHook : nodeHook );\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\n\t\t\tif ( value === null ) {\n\t\t\t\tjQuery.removeAttr( elem, name );\n\n\t\t\t} else if ( hooks && notxml && \"set\" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ) {\n\t\t\t\treturn ret;\n\n\t\t\t} else {\n\t\t\t\telem.setAttribute( name, value + \"\" );\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t} else if ( hooks && notxml && \"get\" in hooks && (ret = hooks.get( elem, name )) !== null ) {\n\t\t\treturn ret;\n\n\t\t} else {\n\n\t\t\t// In IE9+, Flash objects don't have .getAttribute (#12945)\n\t\t\t// Support: IE9+\n\t\t\tif ( typeof elem.getAttribute !== core_strundefined ) {\n\t\t\t\tret =  elem.getAttribute( name );\n\t\t\t}\n\n\t\t\t// Non-existent attributes return null, we normalize to undefined\n\t\t\treturn ret == null ?\n\t\t\t\tundefined :\n\t\t\t\tret;\n\t\t}\n\t},\n\n\tremoveAttr: function( elem, value ) {\n\t\tvar name, propName,\n\t\t\ti = 0,\n\t\t\tattrNames = value && value.match( core_rnotwhite );\n\n\t\tif ( attrNames && elem.nodeType === 1 ) {\n\t\t\twhile ( (name = attrNames[i++]) ) {\n\t\t\t\tpropName = jQuery.propFix[ name ] || name;\n\n\t\t\t\t// Boolean attributes get special treatment (#10870)\n\t\t\t\tif ( rboolean.test( name ) ) {\n\t\t\t\t\t// Set corresponding property to false for boolean attributes\n\t\t\t\t\t// Also clear defaultChecked/defaultSelected (if appropriate) for IE<8\n\t\t\t\t\tif ( !getSetAttribute && ruseDefault.test( name ) ) {\n\t\t\t\t\t\telem[ jQuery.camelCase( \"default-\" + name ) ] =\n\t\t\t\t\t\t\telem[ propName ] = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\telem[ propName ] = false;\n\t\t\t\t\t}\n\n\t\t\t\t// See #9699 for explanation of this approach (setting first, then removal)\n\t\t\t\t} else {\n\t\t\t\t\tjQuery.attr( elem, name, \"\" );\n\t\t\t\t}\n\n\t\t\t\telem.removeAttribute( getSetAttribute ? name : propName );\n\t\t\t}\n\t\t}\n\t},\n\n\tattrHooks: {\n\t\ttype: {\n\t\t\tset: function( elem, value ) {\n\t\t\t\tif ( !jQuery.support.radioValue && value === \"radio\" && jQuery.nodeName(elem, \"input\") ) {\n\t\t\t\t\t// Setting the type on a radio button after the value resets the value in IE6-9\n\t\t\t\t\t// Reset value to default in case type is set after value during creation\n\t\t\t\t\tvar val = elem.value;\n\t\t\t\t\telem.setAttribute( \"type\", value );\n\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\telem.value = val;\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tpropFix: {\n\t\ttabindex: \"tabIndex\",\n\t\treadonly: \"readOnly\",\n\t\t\"for\": \"htmlFor\",\n\t\t\"class\": \"className\",\n\t\tmaxlength: \"maxLength\",\n\t\tcellspacing: \"cellSpacing\",\n\t\tcellpadding: \"cellPadding\",\n\t\trowspan: \"rowSpan\",\n\t\tcolspan: \"colSpan\",\n\t\tusemap: \"useMap\",\n\t\tframeborder: \"frameBorder\",\n\t\tcontenteditable: \"contentEditable\"\n\t},\n\n\tprop: function( elem, name, value ) {\n\t\tvar ret, hooks, notxml,\n\t\t\tnType = elem.nodeType;\n\n\t\t// don't get/set properties on text, comment and attribute nodes\n\t\tif ( !elem || nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tnotxml = nType !== 1 || !jQuery.isXMLDoc( elem );\n\n\t\tif ( notxml ) {\n\t\t\t// Fix name and attach hooks\n\t\t\tname = jQuery.propFix[ name ] || name;\n\t\t\thooks = jQuery.propHooks[ name ];\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\t\t\tif ( hooks && \"set\" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ) {\n\t\t\t\treturn ret;\n\n\t\t\t} else {\n\t\t\t\treturn ( elem[ name ] = value );\n\t\t\t}\n\n\t\t} else {\n\t\t\tif ( hooks && \"get\" in hooks && (ret = hooks.get( elem, name )) !== null ) {\n\t\t\t\treturn ret;\n\n\t\t\t} else {\n\t\t\t\treturn elem[ name ];\n\t\t\t}\n\t\t}\n\t},\n\n\tpropHooks: {\n\t\ttabIndex: {\n\t\t\tget: function( elem ) {\n\t\t\t\t// elem.tabIndex doesn't always return the correct value when it hasn't been explicitly set\n\t\t\t\t// http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/\n\t\t\t\tvar attributeNode = elem.getAttributeNode(\"tabindex\");\n\n\t\t\t\treturn attributeNode && attributeNode.specified ?\n\t\t\t\t\tparseInt( attributeNode.value, 10 ) :\n\t\t\t\t\trfocusable.test( elem.nodeName ) || rclickable.test( elem.nodeName ) && elem.href ?\n\t\t\t\t\t\t0 :\n\t\t\t\t\t\tundefined;\n\t\t\t}\n\t\t}\n\t}\n});\n\n// Hook for boolean attributes\nboolHook = {\n\tget: function( elem, name ) {\n\t\tvar\n\t\t\t// Use .prop to determine if this attribute is understood as boolean\n\t\t\tprop = jQuery.prop( elem, name ),\n\n\t\t\t// Fetch it accordingly\n\t\t\tattr = typeof prop === \"boolean\" && elem.getAttribute( name ),\n\t\t\tdetail = typeof prop === \"boolean\" ?\n\n\t\t\t\tgetSetInput && getSetAttribute ?\n\t\t\t\t\tattr != null :\n\t\t\t\t\t// oldIE fabricates an empty string for missing boolean attributes\n\t\t\t\t\t// and conflates checked/selected into attroperties\n\t\t\t\t\truseDefault.test( name ) ?\n\t\t\t\t\t\telem[ jQuery.camelCase( \"default-\" + name ) ] :\n\t\t\t\t\t\t!!attr :\n\n\t\t\t\t// fetch an attribute node for properties not recognized as boolean\n\t\t\t\telem.getAttributeNode( name );\n\n\t\treturn detail && detail.value !== false ?\n\t\t\tname.toLowerCase() :\n\t\t\tundefined;\n\t},\n\tset: function( elem, value, name ) {\n\t\tif ( value === false ) {\n\t\t\t// Remove boolean attributes when set to false\n\t\t\tjQuery.removeAttr( elem, name );\n\t\t} else if ( getSetInput && getSetAttribute || !ruseDefault.test( name ) ) {\n\t\t\t// IE<8 needs the *property* name\n\t\t\telem.setAttribute( !getSetAttribute && jQuery.propFix[ name ] || name, name );\n\n\t\t// Use defaultChecked and defaultSelected for oldIE\n\t\t} else {\n\t\t\telem[ jQuery.camelCase( \"default-\" + name ) ] = elem[ name ] = true;\n\t\t}\n\n\t\treturn name;\n\t}\n};\n\n// fix oldIE value attroperty\nif ( !getSetInput || !getSetAttribute ) {\n\tjQuery.attrHooks.value = {\n\t\tget: function( elem, name ) {\n\t\t\tvar ret = elem.getAttributeNode( name );\n\t\t\treturn jQuery.nodeName( elem, \"input\" ) ?\n\n\t\t\t\t// Ignore the value *property* by using defaultValue\n\t\t\t\telem.defaultValue :\n\n\t\t\t\tret && ret.specified ? ret.value : undefined;\n\t\t},\n\t\tset: function( elem, value, name ) {\n\t\t\tif ( jQuery.nodeName( elem, \"input\" ) ) {\n\t\t\t\t// Does not return so that setAttribute is also used\n\t\t\t\telem.defaultValue = value;\n\t\t\t} else {\n\t\t\t\t// Use nodeHook if defined (#1954); otherwise setAttribute is fine\n\t\t\t\treturn nodeHook && nodeHook.set( elem, value, name );\n\t\t\t}\n\t\t}\n\t};\n}\n\n// IE6/7 do not support getting/setting some attributes with get/setAttribute\nif ( !getSetAttribute ) {\n\n\t// Use this for any attribute in IE6/7\n\t// This fixes almost every IE6/7 issue\n\tnodeHook = jQuery.valHooks.button = {\n\t\tget: function( elem, name ) {\n\t\t\tvar ret = elem.getAttributeNode( name );\n\t\t\treturn ret && ( name === \"id\" || name === \"name\" || name === \"coords\" ? ret.value !== \"\" : ret.specified ) ?\n\t\t\t\tret.value :\n\t\t\t\tundefined;\n\t\t},\n\t\tset: function( elem, value, name ) {\n\t\t\t// Set the existing or create a new attribute node\n\t\t\tvar ret = elem.getAttributeNode( name );\n\t\t\tif ( !ret ) {\n\t\t\t\telem.setAttributeNode(\n\t\t\t\t\t(ret = elem.ownerDocument.createAttribute( name ))\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tret.value = value += \"\";\n\n\t\t\t// Break association with cloned elements by also using setAttribute (#9646)\n\t\t\treturn name === \"value\" || value === elem.getAttribute( name ) ?\n\t\t\t\tvalue :\n\t\t\t\tundefined;\n\t\t}\n\t};\n\n\t// Set contenteditable to false on removals(#10429)\n\t// Setting to empty string throws an error as an invalid value\n\tjQuery.attrHooks.contenteditable = {\n\t\tget: nodeHook.get,\n\t\tset: function( elem, value, name ) {\n\t\t\tnodeHook.set( elem, value === \"\" ? false : value, name );\n\t\t}\n\t};\n\n\t// Set width and height to auto instead of 0 on empty string( Bug #8150 )\n\t// This is for removals\n\tjQuery.each([ \"width\", \"height\" ], function( i, name ) {\n\t\tjQuery.attrHooks[ name ] = jQuery.extend( jQuery.attrHooks[ name ], {\n\t\t\tset: function( elem, value ) {\n\t\t\t\tif ( value === \"\" ) {\n\t\t\t\t\telem.setAttribute( name, \"auto\" );\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}\n\n\n// Some attributes require a special call on IE\n// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx\nif ( !jQuery.support.hrefNormalized ) {\n\tjQuery.each([ \"href\", \"src\", \"width\", \"height\" ], function( i, name ) {\n\t\tjQuery.attrHooks[ name ] = jQuery.extend( jQuery.attrHooks[ name ], {\n\t\t\tget: function( elem ) {\n\t\t\t\tvar ret = elem.getAttribute( name, 2 );\n\t\t\t\treturn ret == null ? undefined : ret;\n\t\t\t}\n\t\t});\n\t});\n\n\t// href/src property should get the full normalized URL (#10299/#12915)\n\tjQuery.each([ \"href\", \"src\" ], function( i, name ) {\n\t\tjQuery.propHooks[ name ] = {\n\t\t\tget: function( elem ) {\n\t\t\t\treturn elem.getAttribute( name, 4 );\n\t\t\t}\n\t\t};\n\t});\n}\n\nif ( !jQuery.support.style ) {\n\tjQuery.attrHooks.style = {\n\t\tget: function( elem ) {\n\t\t\t// Return undefined in the case of empty string\n\t\t\t// Note: IE uppercases css property names, but if we were to .toLowerCase()\n\t\t\t// .cssText, that would destroy case senstitivity in URL's, like in \"background\"\n\t\t\treturn elem.style.cssText || undefined;\n\t\t},\n\t\tset: function( elem, value ) {\n\t\t\treturn ( elem.style.cssText = value + \"\" );\n\t\t}\n\t};\n}\n\n// Safari mis-reports the default selected property of an option\n// Accessing the parent's selectedIndex property fixes it\nif ( !jQuery.support.optSelected ) {\n\tjQuery.propHooks.selected = jQuery.extend( jQuery.propHooks.selected, {\n\t\tget: function( elem ) {\n\t\t\tvar parent = elem.parentNode;\n\n\t\t\tif ( parent ) {\n\t\t\t\tparent.selectedIndex;\n\n\t\t\t\t// Make sure that it also works with optgroups, see #5701\n\t\t\t\tif ( parent.parentNode ) {\n\t\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t});\n}\n\n// IE6/7 call enctype encoding\nif ( !jQuery.support.enctype ) {\n\tjQuery.propFix.enctype = \"encoding\";\n}\n\n// Radios and checkboxes getter/setter\nif ( !jQuery.support.checkOn ) {\n\tjQuery.each([ \"radio\", \"checkbox\" ], function() {\n\t\tjQuery.valHooks[ this ] = {\n\t\t\tget: function( elem ) {\n\t\t\t\t// Handle the case where in Webkit \"\" is returned instead of \"on\" if a value isn't specified\n\t\t\t\treturn elem.getAttribute(\"value\") === null ? \"on\" : elem.value;\n\t\t\t}\n\t\t};\n\t});\n}\njQuery.each([ \"radio\", \"checkbox\" ], function() {\n\tjQuery.valHooks[ this ] = jQuery.extend( jQuery.valHooks[ this ], {\n\t\tset: function( elem, value ) {\n\t\t\tif ( jQuery.isArray( value ) ) {\n\t\t\t\treturn ( elem.checked = jQuery.inArray( jQuery(elem).val(), value ) >= 0 );\n\t\t\t}\n\t\t}\n\t});\n});\nvar rformElems = /^(?:input|select|textarea)$/i,\n\trkeyEvent = /^key/,\n\trmouseEvent = /^(?:mouse|contextmenu)|click/,\n\trfocusMorph = /^(?:focusinfocus|focusoutblur)$/,\n\trtypenamespace = /^([^.]*)(?:\\.(.+)|)$/;\n\nfunction returnTrue() {\n\treturn true;\n}\n\nfunction returnFalse() {\n\treturn false;\n}\n\n/*\n * Helper functions for managing events -- not part of the public interface.\n * Props to Dean Edwards' addEvent library for many of the ideas.\n */\njQuery.event = {\n\n\tglobal: {},\n\n\tadd: function( elem, types, handler, data, selector ) {\n\t\tvar tmp, events, t, handleObjIn,\n\t\t\tspecial, eventHandle, handleObj,\n\t\t\thandlers, type, namespaces, origType,\n\t\t\telemData = jQuery._data( elem );\n\n\t\t// Don't attach events to noData or text/comment nodes (but allow plain objects)\n\t\tif ( !elemData ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Caller can pass in an object of custom data in lieu of the handler\n\t\tif ( handler.handler ) {\n\t\t\thandleObjIn = handler;\n\t\t\thandler = handleObjIn.handler;\n\t\t\tselector = handleObjIn.selector;\n\t\t}\n\n\t\t// Make sure that the handler has a unique ID, used to find/remove it later\n\t\tif ( !handler.guid ) {\n\t\t\thandler.guid = jQuery.guid++;\n\t\t}\n\n\t\t// Init the element's event structure and main handler, if this is the first\n\t\tif ( !(events = elemData.events) ) {\n\t\t\tevents = elemData.events = {};\n\t\t}\n\t\tif ( !(eventHandle = elemData.handle) ) {\n\t\t\teventHandle = elemData.handle = function( e ) {\n\t\t\t\t// Discard the second event of a jQuery.event.trigger() and\n\t\t\t\t// when an event is called after a page has unloaded\n\t\t\t\treturn typeof jQuery !== core_strundefined && (!e || jQuery.event.triggered !== e.type) ?\n\t\t\t\t\tjQuery.event.dispatch.apply( eventHandle.elem, arguments ) :\n\t\t\t\t\tundefined;\n\t\t\t};\n\t\t\t// Add elem as a property of the handle fn to prevent a memory leak with IE non-native events\n\t\t\teventHandle.elem = elem;\n\t\t}\n\n\t\t// Handle multiple events separated by a space\n\t\t// jQuery(...).bind(\"mouseover mouseout\", fn);\n\t\ttypes = ( types || \"\" ).match( core_rnotwhite ) || [\"\"];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[t] ) || [];\n\t\t\ttype = origType = tmp[1];\n\t\t\tnamespaces = ( tmp[2] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// If event changes its type, use the special event handlers for the changed type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// If selector defined, determine special event api type, otherwise given type\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\n\t\t\t// Update special based on newly reset type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// handleObj is passed to all event handlers\n\t\t\thandleObj = jQuery.extend({\n\t\t\t\ttype: type,\n\t\t\t\torigType: origType,\n\t\t\t\tdata: data,\n\t\t\t\thandler: handler,\n\t\t\t\tguid: handler.guid,\n\t\t\t\tselector: selector,\n\t\t\t\tneedsContext: selector && jQuery.expr.match.needsContext.test( selector ),\n\t\t\t\tnamespace: namespaces.join(\".\")\n\t\t\t}, handleObjIn );\n\n\t\t\t// Init the event handler queue if we're the first\n\t\t\tif ( !(handlers = events[ type ]) ) {\n\t\t\t\thandlers = events[ type ] = [];\n\t\t\t\thandlers.delegateCount = 0;\n\n\t\t\t\t// Only use addEventListener/attachEvent if the special events handler returns false\n\t\t\t\tif ( !special.setup || special.setup.call( elem, data, namespaces, eventHandle ) === false ) {\n\t\t\t\t\t// Bind the global event handler to the element\n\t\t\t\t\tif ( elem.addEventListener ) {\n\t\t\t\t\t\telem.addEventListener( type, eventHandle, false );\n\n\t\t\t\t\t} else if ( elem.attachEvent ) {\n\t\t\t\t\t\telem.attachEvent( \"on\" + type, eventHandle );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( special.add ) {\n\t\t\t\tspecial.add.call( elem, handleObj );\n\n\t\t\t\tif ( !handleObj.handler.guid ) {\n\t\t\t\t\thandleObj.handler.guid = handler.guid;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add to the element's handler list, delegates in front\n\t\t\tif ( selector ) {\n\t\t\t\thandlers.splice( handlers.delegateCount++, 0, handleObj );\n\t\t\t} else {\n\t\t\t\thandlers.push( handleObj );\n\t\t\t}\n\n\t\t\t// Keep track of which events have ever been used, for event optimization\n\t\t\tjQuery.event.global[ type ] = true;\n\t\t}\n\n\t\t// Nullify elem to prevent memory leaks in IE\n\t\telem = null;\n\t},\n\n\t// Detach an event or set of events from an element\n\tremove: function( elem, types, handler, selector, mappedTypes ) {\n\t\tvar j, handleObj, tmp,\n\t\t\torigCount, t, events,\n\t\t\tspecial, handlers, type,\n\t\t\tnamespaces, origType,\n\t\t\telemData = jQuery.hasData( elem ) && jQuery._data( elem );\n\n\t\tif ( !elemData || !(events = elemData.events) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Once for each type.namespace in types; type may be omitted\n\t\ttypes = ( types || \"\" ).match( core_rnotwhite ) || [\"\"];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[t] ) || [];\n\t\t\ttype = origType = tmp[1];\n\t\t\tnamespaces = ( tmp[2] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// Unbind all events (on this namespace, if provided) for the element\n\t\t\tif ( !type ) {\n\t\t\t\tfor ( type in events ) {\n\t\t\t\t\tjQuery.event.remove( elem, type + types[ t ], handler, selector, true );\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\t\t\thandlers = events[ type ] || [];\n\t\t\ttmp = tmp[2] && new RegExp( \"(^|\\\\.)\" + namespaces.join(\"\\\\.(?:.*\\\\.|)\") + \"(\\\\.|$)\" );\n\n\t\t\t// Remove matching events\n\t\t\torigCount = j = handlers.length;\n\t\t\twhile ( j-- ) {\n\t\t\t\thandleObj = handlers[ j ];\n\n\t\t\t\tif ( ( mappedTypes || origType === handleObj.origType ) &&\n\t\t\t\t\t( !handler || handler.guid === handleObj.guid ) &&\n\t\t\t\t\t( !tmp || tmp.test( handleObj.namespace ) ) &&\n\t\t\t\t\t( !selector || selector === handleObj.selector || selector === \"**\" && handleObj.selector ) ) {\n\t\t\t\t\thandlers.splice( j, 1 );\n\n\t\t\t\t\tif ( handleObj.selector ) {\n\t\t\t\t\t\thandlers.delegateCount--;\n\t\t\t\t\t}\n\t\t\t\t\tif ( special.remove ) {\n\t\t\t\t\t\tspecial.remove.call( elem, handleObj );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove generic event handler if we removed something and no more handlers exist\n\t\t\t// (avoids potential for endless recursion during removal of special event handlers)\n\t\t\tif ( origCount && !handlers.length ) {\n\t\t\t\tif ( !special.teardown || special.teardown.call( elem, namespaces, elemData.handle ) === false ) {\n\t\t\t\t\tjQuery.removeEvent( elem, type, elemData.handle );\n\t\t\t\t}\n\n\t\t\t\tdelete events[ type ];\n\t\t\t}\n\t\t}\n\n\t\t// Remove the expando if it's no longer used\n\t\tif ( jQuery.isEmptyObject( events ) ) {\n\t\t\tdelete elemData.handle;\n\n\t\t\t// removeData also checks for emptiness and clears the expando if empty\n\t\t\t// so use it instead of delete\n\t\t\tjQuery._removeData( elem, \"events\" );\n\t\t}\n\t},\n\n\ttrigger: function( event, data, elem, onlyHandlers ) {\n\t\tvar handle, ontype, cur,\n\t\t\tbubbleType, special, tmp, i,\n\t\t\teventPath = [ elem || document ],\n\t\t\ttype = core_hasOwn.call( event, \"type\" ) ? event.type : event,\n\t\t\tnamespaces = core_hasOwn.call( event, \"namespace\" ) ? event.namespace.split(\".\") : [];\n\n\t\tcur = tmp = elem = elem || document;\n\n\t\t// Don't do events on text and comment nodes\n\t\tif ( elem.nodeType === 3 || elem.nodeType === 8 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// focus/blur morphs to focusin/out; ensure we're not firing them right now\n\t\tif ( rfocusMorph.test( type + jQuery.event.triggered ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( type.indexOf(\".\") >= 0 ) {\n\t\t\t// Namespaced trigger; create a regexp to match event type in handle()\n\t\t\tnamespaces = type.split(\".\");\n\t\t\ttype = namespaces.shift();\n\t\t\tnamespaces.sort();\n\t\t}\n\t\tontype = type.indexOf(\":\") < 0 && \"on\" + type;\n\n\t\t// Caller can pass in a jQuery.Event object, Object, or just an event type string\n\t\tevent = event[ jQuery.expando ] ?\n\t\t\tevent :\n\t\t\tnew jQuery.Event( type, typeof event === \"object\" && event );\n\n\t\tevent.isTrigger = true;\n\t\tevent.namespace = namespaces.join(\".\");\n\t\tevent.namespace_re = event.namespace ?\n\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join(\"\\\\.(?:.*\\\\.|)\") + \"(\\\\.|$)\" ) :\n\t\t\tnull;\n\n\t\t// Clean up the event in case it is being reused\n\t\tevent.result = undefined;\n\t\tif ( !event.target ) {\n\t\t\tevent.target = elem;\n\t\t}\n\n\t\t// Clone any incoming data and prepend the event, creating the handler arg list\n\t\tdata = data == null ?\n\t\t\t[ event ] :\n\t\t\tjQuery.makeArray( data, [ event ] );\n\n\t\t// Allow special events to draw outside the lines\n\t\tspecial = jQuery.event.special[ type ] || {};\n\t\tif ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine event propagation path in advance, per W3C events spec (#9951)\n\t\t// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)\n\t\tif ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {\n\n\t\t\tbubbleType = special.delegateType || type;\n\t\t\tif ( !rfocusMorph.test( bubbleType + type ) ) {\n\t\t\t\tcur = cur.parentNode;\n\t\t\t}\n\t\t\tfor ( ; cur; cur = cur.parentNode ) {\n\t\t\t\teventPath.push( cur );\n\t\t\t\ttmp = cur;\n\t\t\t}\n\n\t\t\t// Only add window if we got to document (e.g., not plain obj or detached DOM)\n\t\t\tif ( tmp === (elem.ownerDocument || document) ) {\n\t\t\t\teventPath.push( tmp.defaultView || tmp.parentWindow || window );\n\t\t\t}\n\t\t}\n\n\t\t// Fire handlers on the event path\n\t\ti = 0;\n\t\twhile ( (cur = eventPath[i++]) && !event.isPropagationStopped() ) {\n\n\t\t\tevent.type = i > 1 ?\n\t\t\t\tbubbleType :\n\t\t\t\tspecial.bindType || type;\n\n\t\t\t// jQuery handler\n\t\t\thandle = ( jQuery._data( cur, \"events\" ) || {} )[ event.type ] && jQuery._data( cur, \"handle\" );\n\t\t\tif ( handle ) {\n\t\t\t\thandle.apply( cur, data );\n\t\t\t}\n\n\t\t\t// Native handler\n\t\t\thandle = ontype && cur[ ontype ];\n\t\t\tif ( handle && jQuery.acceptData( cur ) && handle.apply && handle.apply( cur, data ) === false ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\t\tevent.type = type;\n\n\t\t// If nobody prevented the default action, do it now\n\t\tif ( !onlyHandlers && !event.isDefaultPrevented() ) {\n\n\t\t\tif ( (!special._default || special._default.apply( elem.ownerDocument, data ) === false) &&\n\t\t\t\t!(type === \"click\" && jQuery.nodeName( elem, \"a\" )) && jQuery.acceptData( elem ) ) {\n\n\t\t\t\t// Call a native DOM method on the target with the same name name as the event.\n\t\t\t\t// Can't use an .isFunction() check here because IE6/7 fails that test.\n\t\t\t\t// Don't do default actions on window, that's where global variables be (#6170)\n\t\t\t\tif ( ontype && elem[ type ] && !jQuery.isWindow( elem ) ) {\n\n\t\t\t\t\t// Don't re-trigger an onFOO event when we call its FOO() method\n\t\t\t\t\ttmp = elem[ ontype ];\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = null;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prevent re-triggering of the same event, since we already bubbled it above\n\t\t\t\t\tjQuery.event.triggered = type;\n\t\t\t\t\ttry {\n\t\t\t\t\t\telem[ type ]();\n\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t// IE<9 dies on focus/blur to hidden element (#1486,#12518)\n\t\t\t\t\t\t// only reproducible on winXP IE8 native, not IE9 in IE8 mode\n\t\t\t\t\t}\n\t\t\t\t\tjQuery.event.triggered = undefined;\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = tmp;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\tdispatch: function( event ) {\n\n\t\t// Make a writable jQuery.Event from the native event object\n\t\tevent = jQuery.event.fix( event );\n\n\t\tvar i, ret, handleObj, matched, j,\n\t\t\thandlerQueue = [],\n\t\t\targs = core_slice.call( arguments ),\n\t\t\thandlers = ( jQuery._data( this, \"events\" ) || {} )[ event.type ] || [],\n\t\t\tspecial = jQuery.event.special[ event.type ] || {};\n\n\t\t// Use the fix-ed jQuery.Event rather than the (read-only) native event\n\t\targs[0] = event;\n\t\tevent.delegateTarget = this;\n\n\t\t// Call the preDispatch hook for the mapped type, and let it bail if desired\n\t\tif ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine handlers\n\t\thandlerQueue = jQuery.event.handlers.call( this, event, handlers );\n\n\t\t// Run delegates first; they may want to stop propagation beneath us\n\t\ti = 0;\n\t\twhile ( (matched = handlerQueue[ i++ ]) && !event.isPropagationStopped() ) {\n\t\t\tevent.currentTarget = matched.elem;\n\n\t\t\tj = 0;\n\t\t\twhile ( (handleObj = matched.handlers[ j++ ]) && !event.isImmediatePropagationStopped() ) {\n\n\t\t\t\t// Triggered event must either 1) have no namespace, or\n\t\t\t\t// 2) have namespace(s) a subset or equal to those in the bound event (both can have no namespace).\n\t\t\t\tif ( !event.namespace_re || event.namespace_re.test( handleObj.namespace ) ) {\n\n\t\t\t\t\tevent.handleObj = handleObj;\n\t\t\t\t\tevent.data = handleObj.data;\n\n\t\t\t\t\tret = ( (jQuery.event.special[ handleObj.origType ] || {}).handle || handleObj.handler )\n\t\t\t\t\t\t\t.apply( matched.elem, args );\n\n\t\t\t\t\tif ( ret !== undefined ) {\n\t\t\t\t\t\tif ( (event.result = ret) === false ) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Call the postDispatch hook for the mapped type\n\t\tif ( special.postDispatch ) {\n\t\t\tspecial.postDispatch.call( this, event );\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\thandlers: function( event, handlers ) {\n\t\tvar sel, handleObj, matches, i,\n\t\t\thandlerQueue = [],\n\t\t\tdelegateCount = handlers.delegateCount,\n\t\t\tcur = event.target;\n\n\t\t// Find delegate handlers\n\t\t// Black-hole SVG <use> instance trees (#13180)\n\t\t// Avoid non-left-click bubbling in Firefox (#3861)\n\t\tif ( delegateCount && cur.nodeType && (!event.button || event.type !== \"click\") ) {\n\n\t\t\tfor ( ; cur != this; cur = cur.parentNode || this ) {\n\n\t\t\t\t// Don't check non-elements (#13208)\n\t\t\t\t// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)\n\t\t\t\tif ( cur.nodeType === 1 && (cur.disabled !== true || event.type !== \"click\") ) {\n\t\t\t\t\tmatches = [];\n\t\t\t\t\tfor ( i = 0; i < delegateCount; i++ ) {\n\t\t\t\t\t\thandleObj = handlers[ i ];\n\n\t\t\t\t\t\t// Don't conflict with Object.prototype properties (#13203)\n\t\t\t\t\t\tsel = handleObj.selector + \" \";\n\n\t\t\t\t\t\tif ( matches[ sel ] === undefined ) {\n\t\t\t\t\t\t\tmatches[ sel ] = handleObj.needsContext ?\n\t\t\t\t\t\t\t\tjQuery( sel, this ).index( cur ) >= 0 :\n\t\t\t\t\t\t\t\tjQuery.find( sel, this, null, [ cur ] ).length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( matches[ sel ] ) {\n\t\t\t\t\t\t\tmatches.push( handleObj );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( matches.length ) {\n\t\t\t\t\t\thandlerQueue.push({ elem: cur, handlers: matches });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Add the remaining (directly-bound) handlers\n\t\tif ( delegateCount < handlers.length ) {\n\t\t\thandlerQueue.push({ elem: this, handlers: handlers.slice( delegateCount ) });\n\t\t}\n\n\t\treturn handlerQueue;\n\t},\n\n\tfix: function( event ) {\n\t\tif ( event[ jQuery.expando ] ) {\n\t\t\treturn event;\n\t\t}\n\n\t\t// Create a writable copy of the event object and normalize some properties\n\t\tvar i, prop, copy,\n\t\t\ttype = event.type,\n\t\t\toriginalEvent = event,\n\t\t\tfixHook = this.fixHooks[ type ];\n\n\t\tif ( !fixHook ) {\n\t\t\tthis.fixHooks[ type ] = fixHook =\n\t\t\t\trmouseEvent.test( type ) ? this.mouseHooks :\n\t\t\t\trkeyEvent.test( type ) ? this.keyHooks :\n\t\t\t\t{};\n\t\t}\n\t\tcopy = fixHook.props ? this.props.concat( fixHook.props ) : this.props;\n\n\t\tevent = new jQuery.Event( originalEvent );\n\n\t\ti = copy.length;\n\t\twhile ( i-- ) {\n\t\t\tprop = copy[ i ];\n\t\t\tevent[ prop ] = originalEvent[ prop ];\n\t\t}\n\n\t\t// Support: IE<9\n\t\t// Fix target property (#1925)\n\t\tif ( !event.target ) {\n\t\t\tevent.target = originalEvent.srcElement || document;\n\t\t}\n\n\t\t// Support: Chrome 23+, Safari?\n\t\t// Target should not be a text node (#504, #13143)\n\t\tif ( event.target.nodeType === 3 ) {\n\t\t\tevent.target = event.target.parentNode;\n\t\t}\n\n\t\t// Support: IE<9\n\t\t// For mouse/key events, metaKey==false if it's undefined (#3368, #11328)\n\t\tevent.metaKey = !!event.metaKey;\n\n\t\treturn fixHook.filter ? fixHook.filter( event, originalEvent ) : event;\n\t},\n\n\t// Includes some event props shared by KeyEvent and MouseEvent\n\tprops: \"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which\".split(\" \"),\n\n\tfixHooks: {},\n\n\tkeyHooks: {\n\t\tprops: \"char charCode key keyCode\".split(\" \"),\n\t\tfilter: function( event, original ) {\n\n\t\t\t// Add which for key events\n\t\t\tif ( event.which == null ) {\n\t\t\t\tevent.which = original.charCode != null ? original.charCode : original.keyCode;\n\t\t\t}\n\n\t\t\treturn event;\n\t\t}\n\t},\n\n\tmouseHooks: {\n\t\tprops: \"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement\".split(\" \"),\n\t\tfilter: function( event, original ) {\n\t\t\tvar body, eventDoc, doc,\n\t\t\t\tbutton = original.button,\n\t\t\t\tfromElement = original.fromElement;\n\n\t\t\t// Calculate pageX/Y if missing and clientX/Y available\n\t\t\tif ( event.pageX == null && original.clientX != null ) {\n\t\t\t\teventDoc = event.target.ownerDocument || document;\n\t\t\t\tdoc = eventDoc.documentElement;\n\t\t\t\tbody = eventDoc.body;\n\n\t\t\t\tevent.pageX = original.clientX + ( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) - ( doc && doc.clientLeft || body && body.clientLeft || 0 );\n\t\t\t\tevent.pageY = original.clientY + ( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) - ( doc && doc.clientTop  || body && body.clientTop  || 0 );\n\t\t\t}\n\n\t\t\t// Add relatedTarget, if necessary\n\t\t\tif ( !event.relatedTarget && fromElement ) {\n\t\t\t\tevent.relatedTarget = fromElement === event.target ? original.toElement : fromElement;\n\t\t\t}\n\n\t\t\t// Add which for click: 1 === left; 2 === middle; 3 === right\n\t\t\t// Note: button is not normalized, so don't use it\n\t\t\tif ( !event.which && button !== undefined ) {\n\t\t\t\tevent.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );\n\t\t\t}\n\n\t\t\treturn event;\n\t\t}\n\t},\n\n\tspecial: {\n\t\tload: {\n\t\t\t// Prevent triggered image.load events from bubbling to window.load\n\t\t\tnoBubble: true\n\t\t},\n\t\tclick: {\n\t\t\t// For checkbox, fire native event so checked state will be right\n\t\t\ttrigger: function() {\n\t\t\t\tif ( jQuery.nodeName( this, \"input\" ) && this.type === \"checkbox\" && this.click ) {\n\t\t\t\t\tthis.click();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tfocus: {\n\t\t\t// Fire native event if possible so blur/focus sequence is correct\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this !== document.activeElement && this.focus ) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tthis.focus();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t// Support: IE<9\n\t\t\t\t\t\t// If we error on focus to hidden element (#1486, #12518),\n\t\t\t\t\t\t// let .trigger() run the handlers\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelegateType: \"focusin\"\n\t\t},\n\t\tblur: {\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this === document.activeElement && this.blur ) {\n\t\t\t\t\tthis.blur();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelegateType: \"focusout\"\n\t\t},\n\n\t\tbeforeunload: {\n\t\t\tpostDispatch: function( event ) {\n\n\t\t\t\t// Even when returnValue equals to undefined Firefox will still show alert\n\t\t\t\tif ( event.result !== undefined ) {\n\t\t\t\t\tevent.originalEvent.returnValue = event.result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tsimulate: function( type, elem, event, bubble ) {\n\t\t// Piggyback on a donor event to simulate a different one.\n\t\t// Fake originalEvent to avoid donor's stopPropagation, but if the\n\t\t// simulated event prevents default then we do the same on the donor.\n\t\tvar e = jQuery.extend(\n\t\t\tnew jQuery.Event(),\n\t\t\tevent,\n\t\t\t{ type: type,\n\t\t\t\tisSimulated: true,\n\t\t\t\toriginalEvent: {}\n\t\t\t}\n\t\t);\n\t\tif ( bubble ) {\n\t\t\tjQuery.event.trigger( e, null, elem );\n\t\t} else {\n\t\t\tjQuery.event.dispatch.call( elem, e );\n\t\t}\n\t\tif ( e.isDefaultPrevented() ) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n};\n\njQuery.removeEvent = document.removeEventListener ?\n\tfunction( elem, type, handle ) {\n\t\tif ( elem.removeEventListener ) {\n\t\t\telem.removeEventListener( type, handle, false );\n\t\t}\n\t} :\n\tfunction( elem, type, handle ) {\n\t\tvar name = \"on\" + type;\n\n\t\tif ( elem.detachEvent ) {\n\n\t\t\t// #8545, #7054, preventing memory leaks for custom events in IE6-8\n\t\t\t// detachEvent needed property on element, by name of that event, to properly expose it to GC\n\t\t\tif ( typeof elem[ name ] === core_strundefined ) {\n\t\t\t\telem[ name ] = null;\n\t\t\t}\n\n\t\t\telem.detachEvent( name, handle );\n\t\t}\n\t};\n\njQuery.Event = function( src, props ) {\n\t// Allow instantiation without the 'new' keyword\n\tif ( !(this instanceof jQuery.Event) ) {\n\t\treturn new jQuery.Event( src, props );\n\t}\n\n\t// Event object\n\tif ( src && src.type ) {\n\t\tthis.originalEvent = src;\n\t\tthis.type = src.type;\n\n\t\t// Events bubbling up the document may have been marked as prevented\n\t\t// by a handler lower down the tree; reflect the correct value.\n\t\tthis.isDefaultPrevented = ( src.defaultPrevented || src.returnValue === false ||\n\t\t\tsrc.getPreventDefault && src.getPreventDefault() ) ? returnTrue : returnFalse;\n\n\t// Event type\n\t} else {\n\t\tthis.type = src;\n\t}\n\n\t// Put explicitly provided properties onto the event object\n\tif ( props ) {\n\t\tjQuery.extend( this, props );\n\t}\n\n\t// Create a timestamp if incoming event doesn't have one\n\tthis.timeStamp = src && src.timeStamp || jQuery.now();\n\n\t// Mark it as fixed\n\tthis[ jQuery.expando ] = true;\n};\n\n// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding\n// http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html\njQuery.Event.prototype = {\n\tisDefaultPrevented: returnFalse,\n\tisPropagationStopped: returnFalse,\n\tisImmediatePropagationStopped: returnFalse,\n\n\tpreventDefault: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isDefaultPrevented = returnTrue;\n\t\tif ( !e ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If preventDefault exists, run it on the original event\n\t\tif ( e.preventDefault ) {\n\t\t\te.preventDefault();\n\n\t\t// Support: IE\n\t\t// Otherwise set the returnValue property of the original event to false\n\t\t} else {\n\t\t\te.returnValue = false;\n\t\t}\n\t},\n\tstopPropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isPropagationStopped = returnTrue;\n\t\tif ( !e ) {\n\t\t\treturn;\n\t\t}\n\t\t// If stopPropagation exists, run it on the original event\n\t\tif ( e.stopPropagation ) {\n\t\t\te.stopPropagation();\n\t\t}\n\n\t\t// Support: IE\n\t\t// Set the cancelBubble property of the original event to true\n\t\te.cancelBubble = true;\n\t},\n\tstopImmediatePropagation: function() {\n\t\tthis.isImmediatePropagationStopped = returnTrue;\n\t\tthis.stopPropagation();\n\t}\n};\n\n// Create mouseenter/leave events using mouseover/out and event-time checks\njQuery.each({\n\tmouseenter: \"mouseover\",\n\tmouseleave: \"mouseout\"\n}, function( orig, fix ) {\n\tjQuery.event.special[ orig ] = {\n\t\tdelegateType: fix,\n\t\tbindType: fix,\n\n\t\thandle: function( event ) {\n\t\t\tvar ret,\n\t\t\t\ttarget = this,\n\t\t\t\trelated = event.relatedTarget,\n\t\t\t\thandleObj = event.handleObj;\n\n\t\t\t// For mousenter/leave call the handler if related is outside the target.\n\t\t\t// NB: No relatedTarget if the mouse left/entered the browser window\n\t\t\tif ( !related || (related !== target && !jQuery.contains( target, related )) ) {\n\t\t\t\tevent.type = handleObj.origType;\n\t\t\t\tret = handleObj.handler.apply( this, arguments );\n\t\t\t\tevent.type = fix;\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\t};\n});\n\n// IE submit delegation\nif ( !jQuery.support.submitBubbles ) {\n\n\tjQuery.event.special.submit = {\n\t\tsetup: function() {\n\t\t\t// Only need this for delegated form submit events\n\t\t\tif ( jQuery.nodeName( this, \"form\" ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Lazy-add a submit handler when a descendant form may potentially be submitted\n\t\t\tjQuery.event.add( this, \"click._submit keypress._submit\", function( e ) {\n\t\t\t\t// Node name check avoids a VML-related crash in IE (#9807)\n\t\t\t\tvar elem = e.target,\n\t\t\t\t\tform = jQuery.nodeName( elem, \"input\" ) || jQuery.nodeName( elem, \"button\" ) ? elem.form : undefined;\n\t\t\t\tif ( form && !jQuery._data( form, \"submitBubbles\" ) ) {\n\t\t\t\t\tjQuery.event.add( form, \"submit._submit\", function( event ) {\n\t\t\t\t\t\tevent._submit_bubble = true;\n\t\t\t\t\t});\n\t\t\t\t\tjQuery._data( form, \"submitBubbles\", true );\n\t\t\t\t}\n\t\t\t});\n\t\t\t// return undefined since we don't need an event listener\n\t\t},\n\n\t\tpostDispatch: function( event ) {\n\t\t\t// If form was submitted by the user, bubble the event up the tree\n\t\t\tif ( event._submit_bubble ) {\n\t\t\t\tdelete event._submit_bubble;\n\t\t\t\tif ( this.parentNode && !event.isTrigger ) {\n\t\t\t\t\tjQuery.event.simulate( \"submit\", this.parentNode, event, true );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tteardown: function() {\n\t\t\t// Only need this for delegated form submit events\n\t\t\tif ( jQuery.nodeName( this, \"form\" ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Remove delegated handlers; cleanData eventually reaps submit handlers attached above\n\t\t\tjQuery.event.remove( this, \"._submit\" );\n\t\t}\n\t};\n}\n\n// IE change delegation and checkbox/radio fix\nif ( !jQuery.support.changeBubbles ) {\n\n\tjQuery.event.special.change = {\n\n\t\tsetup: function() {\n\n\t\t\tif ( rformElems.test( this.nodeName ) ) {\n\t\t\t\t// IE doesn't fire change on a check/radio until blur; trigger it on click\n\t\t\t\t// after a propertychange. Eat the blur-change in special.change.handle.\n\t\t\t\t// This still fires onchange a second time for check/radio after blur.\n\t\t\t\tif ( this.type === \"checkbox\" || this.type === \"radio\" ) {\n\t\t\t\t\tjQuery.event.add( this, \"propertychange._change\", function( event ) {\n\t\t\t\t\t\tif ( event.originalEvent.propertyName === \"checked\" ) {\n\t\t\t\t\t\t\tthis._just_changed = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tjQuery.event.add( this, \"click._change\", function( event ) {\n\t\t\t\t\t\tif ( this._just_changed && !event.isTrigger ) {\n\t\t\t\t\t\t\tthis._just_changed = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Allow triggered, simulated change events (#11500)\n\t\t\t\t\t\tjQuery.event.simulate( \"change\", this, event, true );\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// Delegated event; lazy-add a change handler on descendant inputs\n\t\t\tjQuery.event.add( this, \"beforeactivate._change\", function( e ) {\n\t\t\t\tvar elem = e.target;\n\n\t\t\t\tif ( rformElems.test( elem.nodeName ) && !jQuery._data( elem, \"changeBubbles\" ) ) {\n\t\t\t\t\tjQuery.event.add( elem, \"change._change\", function( event ) {\n\t\t\t\t\t\tif ( this.parentNode && !event.isSimulated && !event.isTrigger ) {\n\t\t\t\t\t\t\tjQuery.event.simulate( \"change\", this.parentNode, event, true );\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tjQuery._data( elem, \"changeBubbles\", true );\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\thandle: function( event ) {\n\t\t\tvar elem = event.target;\n\n\t\t\t// Swallow native change events from checkbox/radio, we already triggered them above\n\t\t\tif ( this !== elem || event.isSimulated || event.isTrigger || (elem.type !== \"radio\" && elem.type !== \"checkbox\") ) {\n\t\t\t\treturn event.handleObj.handler.apply( this, arguments );\n\t\t\t}\n\t\t},\n\n\t\tteardown: function() {\n\t\t\tjQuery.event.remove( this, \"._change\" );\n\n\t\t\treturn !rformElems.test( this.nodeName );\n\t\t}\n\t};\n}\n\n// Create \"bubbling\" focus and blur events\nif ( !jQuery.support.focusinBubbles ) {\n\tjQuery.each({ focus: \"focusin\", blur: \"focusout\" }, function( orig, fix ) {\n\n\t\t// Attach a single capturing handler while someone wants focusin/focusout\n\t\tvar attaches = 0,\n\t\t\thandler = function( event ) {\n\t\t\t\tjQuery.event.simulate( fix, event.target, jQuery.event.fix( event ), true );\n\t\t\t};\n\n\t\tjQuery.event.special[ fix ] = {\n\t\t\tsetup: function() {\n\t\t\t\tif ( attaches++ === 0 ) {\n\t\t\t\t\tdocument.addEventListener( orig, handler, true );\n\t\t\t\t}\n\t\t\t},\n\t\t\tteardown: function() {\n\t\t\t\tif ( --attaches === 0 ) {\n\t\t\t\t\tdocument.removeEventListener( orig, handler, true );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t});\n}\n\njQuery.fn.extend({\n\n\ton: function( types, selector, data, fn, /*INTERNAL*/ one ) {\n\t\tvar type, origFn;\n\n\t\t// Types can be a map of types/handlers\n\t\tif ( typeof types === \"object\" ) {\n\t\t\t// ( types-Object, selector, data )\n\t\t\tif ( typeof selector !== \"string\" ) {\n\t\t\t\t// ( types-Object, data )\n\t\t\t\tdata = data || selector;\n\t\t\t\tselector = undefined;\n\t\t\t}\n\t\t\tfor ( type in types ) {\n\t\t\t\tthis.on( type, selector, data, types[ type ], one );\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\n\t\tif ( data == null && fn == null ) {\n\t\t\t// ( types, fn )\n\t\t\tfn = selector;\n\t\t\tdata = selector = undefined;\n\t\t} else if ( fn == null ) {\n\t\t\tif ( typeof selector === \"string\" ) {\n\t\t\t\t// ( types, selector, fn )\n\t\t\t\tfn = data;\n\t\t\t\tdata = undefined;\n\t\t\t} else {\n\t\t\t\t// ( types, data, fn )\n\t\t\t\tfn = data;\n\t\t\t\tdata = selector;\n\t\t\t\tselector = undefined;\n\t\t\t}\n\t\t}\n\t\tif ( fn === false ) {\n\t\t\tfn = returnFalse;\n\t\t} else if ( !fn ) {\n\t\t\treturn this;\n\t\t}\n\n\t\tif ( one === 1 ) {\n\t\t\torigFn = fn;\n\t\t\tfn = function( event ) {\n\t\t\t\t// Can use an empty set, since event contains the info\n\t\t\t\tjQuery().off( event );\n\t\t\t\treturn origFn.apply( this, arguments );\n\t\t\t};\n\t\t\t// Use same guid so caller can remove using origFn\n\t\t\tfn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );\n\t\t}\n\t\treturn this.each( function() {\n\t\t\tjQuery.event.add( this, types, fn, data, selector );\n\t\t});\n\t},\n\tone: function( types, selector, data, fn ) {\n\t\treturn this.on( types, selector, data, fn, 1 );\n\t},\n\toff: function( types, selector, fn ) {\n\t\tvar handleObj, type;\n\t\tif ( types && types.preventDefault && types.handleObj ) {\n\t\t\t// ( event )  dispatched jQuery.Event\n\t\t\thandleObj = types.handleObj;\n\t\t\tjQuery( types.delegateTarget ).off(\n\t\t\t\thandleObj.namespace ? handleObj.origType + \".\" + handleObj.namespace : handleObj.origType,\n\t\t\t\thandleObj.selector,\n\t\t\t\thandleObj.handler\n\t\t\t);\n\t\t\treturn this;\n\t\t}\n\t\tif ( typeof types === \"object\" ) {\n\t\t\t// ( types-object [, selector] )\n\t\t\tfor ( type in types ) {\n\t\t\t\tthis.off( type, selector, types[ type ] );\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t\tif ( selector === false || typeof selector === \"function\" ) {\n\t\t\t// ( types [, fn] )\n\t\t\tfn = selector;\n\t\t\tselector = undefined;\n\t\t}\n\t\tif ( fn === false ) {\n\t\t\tfn = returnFalse;\n\t\t}\n\t\treturn this.each(function() {\n\t\t\tjQuery.event.remove( this, types, fn, selector );\n\t\t});\n\t},\n\n\tbind: function( types, data, fn ) {\n\t\treturn this.on( types, null, data, fn );\n\t},\n\tunbind: function( types, fn ) {\n\t\treturn this.off( types, null, fn );\n\t},\n\n\tdelegate: function( selector, types, data, fn ) {\n\t\treturn this.on( types, selector, data, fn );\n\t},\n\tundelegate: function( selector, types, fn ) {\n\t\t// ( namespace ) or ( selector, types [, fn] )\n\t\treturn arguments.length === 1 ? this.off( selector, \"**\" ) : this.off( types, selector || \"**\", fn );\n\t},\n\n\ttrigger: function( type, data ) {\n\t\treturn this.each(function() {\n\t\t\tjQuery.event.trigger( type, data, this );\n\t\t});\n\t},\n\ttriggerHandler: function( type, data ) {\n\t\tvar elem = this[0];\n\t\tif ( elem ) {\n\t\t\treturn jQuery.event.trigger( type, data, elem, true );\n\t\t}\n\t}\n});\n/*!\n * Sizzle CSS Selector Engine\n * Copyright 2012 jQuery Foundation and other contributors\n * Released under the MIT license\n * http://sizzlejs.com/\n */\n(function( window, undefined ) {\n\nvar i,\n\tcachedruns,\n\tExpr,\n\tgetText,\n\tisXML,\n\tcompile,\n\thasDuplicate,\n\toutermostContext,\n\n\t// Local document vars\n\tsetDocument,\n\tdocument,\n\tdocElem,\n\tdocumentIsXML,\n\trbuggyQSA,\n\trbuggyMatches,\n\tmatches,\n\tcontains,\n\tsortOrder,\n\n\t// Instance-specific data\n\texpando = \"sizzle\" + -(new Date()),\n\tpreferredDoc = window.document,\n\tsupport = {},\n\tdirruns = 0,\n\tdone = 0,\n\tclassCache = createCache(),\n\ttokenCache = createCache(),\n\tcompilerCache = createCache(),\n\n\t// General-purpose constants\n\tstrundefined = typeof undefined,\n\tMAX_NEGATIVE = 1 << 31,\n\n\t// Array methods\n\tarr = [],\n\tpop = arr.pop,\n\tpush = arr.push,\n\tslice = arr.slice,\n\t// Use a stripped-down indexOf if we can't use a native one\n\tindexOf = arr.indexOf || function( elem ) {\n\t\tvar i = 0,\n\t\t\tlen = this.length;\n\t\tfor ( ; i < len; i++ ) {\n\t\t\tif ( this[i] === elem ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t},\n\n\n\t// Regular expressions\n\n\t// Whitespace characters http://www.w3.org/TR/css3-selectors/#whitespace\n\twhitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n\t// http://www.w3.org/TR/css3-syntax/#characters\n\tcharacterEncoding = \"(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+\",\n\n\t// Loosely modeled on CSS identifier characters\n\t// An unquoted value should be a CSS identifier http://www.w3.org/TR/css3-selectors/#attribute-selectors\n\t// Proper syntax: http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier\n\tidentifier = characterEncoding.replace( \"w\", \"w#\" ),\n\n\t// Acceptable operators http://www.w3.org/TR/selectors/#attribute-selectors\n\toperators = \"([*^$|!~]?=)\",\n\tattributes = \"\\\\[\" + whitespace + \"*(\" + characterEncoding + \")\" + whitespace +\n\t\t\"*(?:\" + operators + whitespace + \"*(?:(['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|(\" + identifier + \")|)|)\" + whitespace + \"*\\\\]\",\n\n\t// Prefer arguments quoted,\n\t//   then not containing pseudos/brackets,\n\t//   then attribute selectors/non-parenthetical expressions,\n\t//   then anything else\n\t// These preferences are here to reduce the number of selectors\n\t//   needing tokenize in the PSEUDO preFilter\n\tpseudos = \":(\" + characterEncoding + \")(?:\\\\(((['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + attributes.replace( 3, 8 ) + \")*)|.*)\\\\)|)\",\n\n\t// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter\n\trtrim = new RegExp( \"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" + whitespace + \"+$\", \"g\" ),\n\n\trcomma = new RegExp( \"^\" + whitespace + \"*,\" + whitespace + \"*\" ),\n\trcombinators = new RegExp( \"^\" + whitespace + \"*([\\\\x20\\\\t\\\\r\\\\n\\\\f>+~])\" + whitespace + \"*\" ),\n\trpseudo = new RegExp( pseudos ),\n\tridentifier = new RegExp( \"^\" + identifier + \"$\" ),\n\n\tmatchExpr = {\n\t\t\"ID\": new RegExp( \"^#(\" + characterEncoding + \")\" ),\n\t\t\"CLASS\": new RegExp( \"^\\\\.(\" + characterEncoding + \")\" ),\n\t\t\"NAME\": new RegExp( \"^\\\\[name=['\\\"]?(\" + characterEncoding + \")['\\\"]?\\\\]\" ),\n\t\t\"TAG\": new RegExp( \"^(\" + characterEncoding.replace( \"w\", \"w*\" ) + \")\" ),\n\t\t\"ATTR\": new RegExp( \"^\" + attributes ),\n\t\t\"PSEUDO\": new RegExp( \"^\" + pseudos ),\n\t\t\"CHILD\": new RegExp( \"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" + whitespace +\n\t\t\t\"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" + whitespace +\n\t\t\t\"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\", \"i\" ),\n\t\t// For use in libraries implementing .is()\n\t\t// We use this for POS matching in `select`\n\t\t\"needsContext\": new RegExp( \"^\" + whitespace + \"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" +\n\t\t\twhitespace + \"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\", \"i\" )\n\t},\n\n\trsibling = /[\\x20\\t\\r\\n\\f]*[+~]/,\n\n\trnative = /^[^{]+\\{\\s*\\[native code/,\n\n\t// Easily-parseable/retrievable ID or TAG or CLASS selectors\n\trquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,\n\n\trinputs = /^(?:input|select|textarea|button)$/i,\n\trheader = /^h\\d$/i,\n\n\trescape = /'|\\\\/g,\n\trattributeQuotes = /\\=[\\x20\\t\\r\\n\\f]*([^'\"\\]]*)[\\x20\\t\\r\\n\\f]*\\]/g,\n\n\t// CSS escapes http://www.w3.org/TR/CSS21/syndata.html#escaped-characters\n\trunescape = /\\\\([\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|.)/g,\n\tfunescape = function( _, escaped ) {\n\t\tvar high = \"0x\" + escaped - 0x10000;\n\t\t// NaN means non-codepoint\n\t\treturn high !== high ?\n\t\t\tescaped :\n\t\t\t// BMP codepoint\n\t\t\thigh < 0 ?\n\t\t\t\tString.fromCharCode( high + 0x10000 ) :\n\t\t\t\t// Supplemental Plane codepoint (surrogate pair)\n\t\t\t\tString.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );\n\t};\n\n// Use a stripped-down slice if we can't use a native one\ntry {\n\tslice.call( preferredDoc.documentElement.childNodes, 0 )[0].nodeType;\n} catch ( e ) {\n\tslice = function( i ) {\n\t\tvar elem,\n\t\t\tresults = [];\n\t\twhile ( (elem = this[i++]) ) {\n\t\t\tresults.push( elem );\n\t\t}\n\t\treturn results;\n\t};\n}\n\n/**\n * For feature detection\n * @param {Function} fn The function to test for native support\n */\nfunction isNative( fn ) {\n\treturn rnative.test( fn + \"\" );\n}\n\n/**\n * Create key-value caches of limited size\n * @returns {Function(string, Object)} Returns the Object data after storing it on itself with\n *\tproperty name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)\n *\tdeleting the oldest entry\n */\nfunction createCache() {\n\tvar cache,\n\t\tkeys = [];\n\n\treturn (cache = function( key, value ) {\n\t\t// Use (key + \" \") to avoid collision with native prototype properties (see Issue #157)\n\t\tif ( keys.push( key += \" \" ) > Expr.cacheLength ) {\n\t\t\t// Only keep the most recent entries\n\t\t\tdelete cache[ keys.shift() ];\n\t\t}\n\t\treturn (cache[ key ] = value);\n\t});\n}\n\n/**\n * Mark a function for special use by Sizzle\n * @param {Function} fn The function to mark\n */\nfunction markFunction( fn ) {\n\tfn[ expando ] = true;\n\treturn fn;\n}\n\n/**\n * Support testing using an element\n * @param {Function} fn Passed the created div and expects a boolean result\n */\nfunction assert( fn ) {\n\tvar div = document.createElement(\"div\");\n\n\ttry {\n\t\treturn fn( div );\n\t} catch (e) {\n\t\treturn false;\n\t} finally {\n\t\t// release memory in IE\n\t\tdiv = null;\n\t}\n}\n\nfunction Sizzle( selector, context, results, seed ) {\n\tvar match, elem, m, nodeType,\n\t\t// QSA vars\n\t\ti, groups, old, nid, newContext, newSelector;\n\n\tif ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {\n\t\tsetDocument( context );\n\t}\n\n\tcontext = context || document;\n\tresults = results || [];\n\n\tif ( !selector || typeof selector !== \"string\" ) {\n\t\treturn results;\n\t}\n\n\tif ( (nodeType = context.nodeType) !== 1 && nodeType !== 9 ) {\n\t\treturn [];\n\t}\n\n\tif ( !documentIsXML && !seed ) {\n\n\t\t// Shortcuts\n\t\tif ( (match = rquickExpr.exec( selector )) ) {\n\t\t\t// Speed-up: Sizzle(\"#ID\")\n\t\t\tif ( (m = match[1]) ) {\n\t\t\t\tif ( nodeType === 9 ) {\n\t\t\t\t\telem = context.getElementById( m );\n\t\t\t\t\t// Check parentNode to catch when Blackberry 4.6 returns\n\t\t\t\t\t// nodes that are no longer in the document #6963\n\t\t\t\t\tif ( elem && elem.parentNode ) {\n\t\t\t\t\t\t// Handle the case where IE, Opera, and Webkit return items\n\t\t\t\t\t\t// by name instead of ID\n\t\t\t\t\t\tif ( elem.id === m ) {\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Context is not a document\n\t\t\t\t\tif ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&\n\t\t\t\t\t\tcontains( context, elem ) && elem.id === m ) {\n\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// Speed-up: Sizzle(\"TAG\")\n\t\t\t} else if ( match[2] ) {\n\t\t\t\tpush.apply( results, slice.call(context.getElementsByTagName( selector ), 0) );\n\t\t\t\treturn results;\n\n\t\t\t// Speed-up: Sizzle(\".CLASS\")\n\t\t\t} else if ( (m = match[3]) && support.getByClassName && context.getElementsByClassName ) {\n\t\t\t\tpush.apply( results, slice.call(context.getElementsByClassName( m ), 0) );\n\t\t\t\treturn results;\n\t\t\t}\n\t\t}\n\n\t\t// QSA path\n\t\tif ( support.qsa && !rbuggyQSA.test(selector) ) {\n\t\t\told = true;\n\t\t\tnid = expando;\n\t\t\tnewContext = context;\n\t\t\tnewSelector = nodeType === 9 && selector;\n\n\t\t\t// qSA works strangely on Element-rooted queries\n\t\t\t// We can work around this by specifying an extra ID on the root\n\t\t\t// and working up from there (Thanks to Andrew Dupont for the technique)\n\t\t\t// IE 8 doesn't work on object elements\n\t\t\tif ( nodeType === 1 && context.nodeName.toLowerCase() !== \"object\" ) {\n\t\t\t\tgroups = tokenize( selector );\n\n\t\t\t\tif ( (old = context.getAttribute(\"id\")) ) {\n\t\t\t\t\tnid = old.replace( rescape, \"\\\\$&\" );\n\t\t\t\t} else {\n\t\t\t\t\tcontext.setAttribute( \"id\", nid );\n\t\t\t\t}\n\t\t\t\tnid = \"[id='\" + nid + \"'] \";\n\n\t\t\t\ti = groups.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tgroups[i] = nid + toSelector( groups[i] );\n\t\t\t\t}\n\t\t\t\tnewContext = rsibling.test( selector ) && context.parentNode || context;\n\t\t\t\tnewSelector = groups.join(\",\");\n\t\t\t}\n\n\t\t\tif ( newSelector ) {\n\t\t\t\ttry {\n\t\t\t\t\tpush.apply( results, slice.call( newContext.querySelectorAll(\n\t\t\t\t\t\tnewSelector\n\t\t\t\t\t), 0 ) );\n\t\t\t\t\treturn results;\n\t\t\t\t} catch(qsaError) {\n\t\t\t\t} finally {\n\t\t\t\t\tif ( !old ) {\n\t\t\t\t\t\tcontext.removeAttribute(\"id\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// All others\n\treturn select( selector.replace( rtrim, \"$1\" ), context, results, seed );\n}\n\n/**\n * Detect xml\n * @param {Element|Object} elem An element or a document\n */\nisXML = Sizzle.isXML = function( elem ) {\n\t// documentElement is verified for cases where it doesn't yet exist\n\t// (such as loading iframes in IE - #4833)\n\tvar documentElement = elem && (elem.ownerDocument || elem).documentElement;\n\treturn documentElement ? documentElement.nodeName !== \"HTML\" : false;\n};\n\n/**\n * Sets document-related variables once based on the current document\n * @param {Element|Object} [doc] An element or document object to use to set the document\n * @returns {Object} Returns the current document\n */\nsetDocument = Sizzle.setDocument = function( node ) {\n\tvar doc = node ? node.ownerDocument || node : preferredDoc;\n\n\t// If no document and documentElement is available, return\n\tif ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {\n\t\treturn document;\n\t}\n\n\t// Set our document\n\tdocument = doc;\n\tdocElem = doc.documentElement;\n\n\t// Support tests\n\tdocumentIsXML = isXML( doc );\n\n\t// Check if getElementsByTagName(\"*\") returns only elements\n\tsupport.tagNameNoComments = assert(function( div ) {\n\t\tdiv.appendChild( doc.createComment(\"\") );\n\t\treturn !div.getElementsByTagName(\"*\").length;\n\t});\n\n\t// Check if attributes should be retrieved by attribute nodes\n\tsupport.attributes = assert(function( div ) {\n\t\tdiv.innerHTML = \"<select></select>\";\n\t\tvar type = typeof div.lastChild.getAttribute(\"multiple\");\n\t\t// IE8 returns a string for some attributes even when not present\n\t\treturn type !== \"boolean\" && type !== \"string\";\n\t});\n\n\t// Check if getElementsByClassName can be trusted\n\tsupport.getByClassName = assert(function( div ) {\n\t\t// Opera can't find a second classname (in 9.6)\n\t\tdiv.innerHTML = \"<div class='hidden e'></div><div class='hidden'></div>\";\n\t\tif ( !div.getElementsByClassName || !div.getElementsByClassName(\"e\").length ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Safari 3.2 caches class attributes and doesn't catch changes\n\t\tdiv.lastChild.className = \"e\";\n\t\treturn div.getElementsByClassName(\"e\").length === 2;\n\t});\n\n\t// Check if getElementById returns elements by name\n\t// Check if getElementsByName privileges form controls or returns elements by ID\n\tsupport.getByName = assert(function( div ) {\n\t\t// Inject content\n\t\tdiv.id = expando + 0;\n\t\tdiv.innerHTML = \"<a name='\" + expando + \"'></a><div name='\" + expando + \"'></div>\";\n\t\tdocElem.insertBefore( div, docElem.firstChild );\n\n\t\t// Test\n\t\tvar pass = doc.getElementsByName &&\n\t\t\t// buggy browsers will return fewer than the correct 2\n\t\t\tdoc.getElementsByName( expando ).length === 2 +\n\t\t\t// buggy browsers will return more than the correct 0\n\t\t\tdoc.getElementsByName( expando + 0 ).length;\n\t\tsupport.getIdNotName = !doc.getElementById( expando );\n\n\t\t// Cleanup\n\t\tdocElem.removeChild( div );\n\n\t\treturn pass;\n\t});\n\n\t// IE6/7 return modified attributes\n\tExpr.attrHandle = assert(function( div ) {\n\t\tdiv.innerHTML = \"<a href='#'></a>\";\n\t\treturn div.firstChild && typeof div.firstChild.getAttribute !== strundefined &&\n\t\t\tdiv.firstChild.getAttribute(\"href\") === \"#\";\n\t}) ?\n\t\t{} :\n\t\t{\n\t\t\t\"href\": function( elem ) {\n\t\t\t\treturn elem.getAttribute( \"href\", 2 );\n\t\t\t},\n\t\t\t\"type\": function( elem ) {\n\t\t\t\treturn elem.getAttribute(\"type\");\n\t\t\t}\n\t\t};\n\n\t// ID find and filter\n\tif ( support.getIdNotName ) {\n\t\tExpr.find[\"ID\"] = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== strundefined && !documentIsXML ) {\n\t\t\t\tvar m = context.getElementById( id );\n\t\t\t\t// Check parentNode to catch when Blackberry 4.6 returns\n\t\t\t\t// nodes that are no longer in the document #6963\n\t\t\t\treturn m && m.parentNode ? [m] : [];\n\t\t\t}\n\t\t};\n\t\tExpr.filter[\"ID\"] = function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn elem.getAttribute(\"id\") === attrId;\n\t\t\t};\n\t\t};\n\t} else {\n\t\tExpr.find[\"ID\"] = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== strundefined && !documentIsXML ) {\n\t\t\t\tvar m = context.getElementById( id );\n\n\t\t\t\treturn m ?\n\t\t\t\t\tm.id === id || typeof m.getAttributeNode !== strundefined && m.getAttributeNode(\"id\").value === id ?\n\t\t\t\t\t\t[m] :\n\t\t\t\t\t\tundefined :\n\t\t\t\t\t[];\n\t\t\t}\n\t\t};\n\t\tExpr.filter[\"ID\"] =  function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\tvar node = typeof elem.getAttributeNode !== strundefined && elem.getAttributeNode(\"id\");\n\t\t\t\treturn node && node.value === attrId;\n\t\t\t};\n\t\t};\n\t}\n\n\t// Tag\n\tExpr.find[\"TAG\"] = support.tagNameNoComments ?\n\t\tfunction( tag, context ) {\n\t\t\tif ( typeof context.getElementsByTagName !== strundefined ) {\n\t\t\t\treturn context.getElementsByTagName( tag );\n\t\t\t}\n\t\t} :\n\t\tfunction( tag, context ) {\n\t\t\tvar elem,\n\t\t\t\ttmp = [],\n\t\t\t\ti = 0,\n\t\t\t\tresults = context.getElementsByTagName( tag );\n\n\t\t\t// Filter out possible comments\n\t\t\tif ( tag === \"*\" ) {\n\t\t\t\twhile ( (elem = results[i++]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\ttmp.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn tmp;\n\t\t\t}\n\t\t\treturn results;\n\t\t};\n\n\t// Name\n\tExpr.find[\"NAME\"] = support.getByName && function( tag, context ) {\n\t\tif ( typeof context.getElementsByName !== strundefined ) {\n\t\t\treturn context.getElementsByName( name );\n\t\t}\n\t};\n\n\t// Class\n\tExpr.find[\"CLASS\"] = support.getByClassName && function( className, context ) {\n\t\tif ( typeof context.getElementsByClassName !== strundefined && !documentIsXML ) {\n\t\t\treturn context.getElementsByClassName( className );\n\t\t}\n\t};\n\n\t// QSA and matchesSelector support\n\n\t// matchesSelector(:active) reports false when true (IE9/Opera 11.5)\n\trbuggyMatches = [];\n\n\t// qSa(:focus) reports false when true (Chrome 21),\n\t// no need to also add to buggyMatches since matches checks buggyQSA\n\t// A support test would require too much code (would include document ready)\n\trbuggyQSA = [ \":focus\" ];\n\n\tif ( (support.qsa = isNative(doc.querySelectorAll)) ) {\n\t\t// Build QSA regex\n\t\t// Regex strategy adopted from Diego Perini\n\t\tassert(function( div ) {\n\t\t\t// Select is set to empty string on purpose\n\t\t\t// This is to test IE's treatment of not explictly\n\t\t\t// setting a boolean content attribute,\n\t\t\t// since its presence should be enough\n\t\t\t// http://bugs.jquery.com/ticket/12359\n\t\t\tdiv.innerHTML = \"<select><option selected=''></option></select>\";\n\n\t\t\t// IE8 - Some boolean attributes are not treated correctly\n\t\t\tif ( !div.querySelectorAll(\"[selected]\").length ) {\n\t\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*(?:checked|disabled|ismap|multiple|readonly|selected|value)\" );\n\t\t\t}\n\n\t\t\t// Webkit/Opera - :checked should return selected option elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( !div.querySelectorAll(\":checked\").length ) {\n\t\t\t\trbuggyQSA.push(\":checked\");\n\t\t\t}\n\t\t});\n\n\t\tassert(function( div ) {\n\n\t\t\t// Opera 10-12/IE8 - ^= $= *= and empty values\n\t\t\t// Should not select anything\n\t\t\tdiv.innerHTML = \"<input type='hidden' i=''/>\";\n\t\t\tif ( div.querySelectorAll(\"[i^='']\").length ) {\n\t\t\t\trbuggyQSA.push( \"[*^$]=\" + whitespace + \"*(?:\\\"\\\"|'')\" );\n\t\t\t}\n\n\t\t\t// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( !div.querySelectorAll(\":enabled\").length ) {\n\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n\t\t\t}\n\n\t\t\t// Opera 10-11 does not throw on post-comma invalid pseudos\n\t\t\tdiv.querySelectorAll(\"*,:x\");\n\t\t\trbuggyQSA.push(\",.*:\");\n\t\t});\n\t}\n\n\tif ( (support.matchesSelector = isNative( (matches = docElem.matchesSelector ||\n\t\tdocElem.mozMatchesSelector ||\n\t\tdocElem.webkitMatchesSelector ||\n\t\tdocElem.oMatchesSelector ||\n\t\tdocElem.msMatchesSelector) )) ) {\n\n\t\tassert(function( div ) {\n\t\t\t// Check to see if it's possible to do matchesSelector\n\t\t\t// on a disconnected node (IE 9)\n\t\t\tsupport.disconnectedMatch = matches.call( div, \"div\" );\n\n\t\t\t// This should fail with an exception\n\t\t\t// Gecko does not error, returns false instead\n\t\t\tmatches.call( div, \"[s!='']:x\" );\n\t\t\trbuggyMatches.push( \"!=\", pseudos );\n\t\t});\n\t}\n\n\trbuggyQSA = new RegExp( rbuggyQSA.join(\"|\") );\n\trbuggyMatches = new RegExp( rbuggyMatches.join(\"|\") );\n\n\t// Element contains another\n\t// Purposefully does not implement inclusive descendent\n\t// As in, an element does not contain itself\n\tcontains = isNative(docElem.contains) || docElem.compareDocumentPosition ?\n\t\tfunction( a, b ) {\n\t\t\tvar adown = a.nodeType === 9 ? a.documentElement : a,\n\t\t\t\tbup = b && b.parentNode;\n\t\t\treturn a === bup || !!( bup && bup.nodeType === 1 && (\n\t\t\t\tadown.contains ?\n\t\t\t\t\tadown.contains( bup ) :\n\t\t\t\t\ta.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16\n\t\t\t));\n\t\t} :\n\t\tfunction( a, b ) {\n\t\t\tif ( b ) {\n\t\t\t\twhile ( (b = b.parentNode) ) {\n\t\t\t\t\tif ( b === a ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t// Document order sorting\n\tsortOrder = docElem.compareDocumentPosition ?\n\tfunction( a, b ) {\n\t\tvar compare;\n\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\tif ( (compare = b.compareDocumentPosition && a.compareDocumentPosition && a.compareDocumentPosition( b )) ) {\n\t\t\tif ( compare & 1 || a.parentNode && a.parentNode.nodeType === 11 ) {\n\t\t\t\tif ( a === doc || contains( preferredDoc, a ) ) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\tif ( b === doc || contains( preferredDoc, b ) ) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\treturn compare & 4 ? -1 : 1;\n\t\t}\n\n\t\treturn a.compareDocumentPosition ? -1 : 1;\n\t} :\n\tfunction( a, b ) {\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\taup = a.parentNode,\n\t\t\tbup = b.parentNode,\n\t\t\tap = [ a ],\n\t\t\tbp = [ b ];\n\n\t\t// Exit early if the nodes are identical\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\n\t\t// Parentless nodes are either documents or disconnected\n\t\t} else if ( !aup || !bup ) {\n\t\t\treturn a === doc ? -1 :\n\t\t\t\tb === doc ? 1 :\n\t\t\t\taup ? -1 :\n\t\t\t\tbup ? 1 :\n\t\t\t\t0;\n\n\t\t// If the nodes are siblings, we can do a quick check\n\t\t} else if ( aup === bup ) {\n\t\t\treturn siblingCheck( a, b );\n\t\t}\n\n\t\t// Otherwise we need full lists of their ancestors for comparison\n\t\tcur = a;\n\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\tap.unshift( cur );\n\t\t}\n\t\tcur = b;\n\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\tbp.unshift( cur );\n\t\t}\n\n\t\t// Walk down the tree looking for a discrepancy\n\t\twhile ( ap[i] === bp[i] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i ?\n\t\t\t// Do a sibling check if the nodes have a common ancestor\n\t\t\tsiblingCheck( ap[i], bp[i] ) :\n\n\t\t\t// Otherwise nodes in our document sort first\n\t\t\tap[i] === preferredDoc ? -1 :\n\t\t\tbp[i] === preferredDoc ? 1 :\n\t\t\t0;\n\t};\n\n\t// Always assume the presence of duplicates if sort doesn't\n\t// pass them to our comparison function (as in Google Chrome).\n\thasDuplicate = false;\n\t[0, 0].sort( sortOrder );\n\tsupport.detectDuplicates = hasDuplicate;\n\n\treturn document;\n};\n\nSizzle.matches = function( expr, elements ) {\n\treturn Sizzle( expr, null, null, elements );\n};\n\nSizzle.matchesSelector = function( elem, expr ) {\n\t// Set document vars if needed\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\tsetDocument( elem );\n\t}\n\n\t// Make sure that attribute selectors are quoted\n\texpr = expr.replace( rattributeQuotes, \"='$1']\" );\n\n\t// rbuggyQSA always contains :focus, so no need for an existence check\n\tif ( support.matchesSelector && !documentIsXML && (!rbuggyMatches || !rbuggyMatches.test(expr)) && !rbuggyQSA.test(expr) ) {\n\t\ttry {\n\t\t\tvar ret = matches.call( elem, expr );\n\n\t\t\t// IE 9's matchesSelector returns false on disconnected nodes\n\t\t\tif ( ret || support.disconnectedMatch ||\n\t\t\t\t\t// As well, disconnected nodes are said to be in a document\n\t\t\t\t\t// fragment in IE 9\n\t\t\t\t\telem.document && elem.document.nodeType !== 11 ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t} catch(e) {}\n\t}\n\n\treturn Sizzle( expr, document, null, [elem] ).length > 0;\n};\n\nSizzle.contains = function( context, elem ) {\n\t// Set document vars if needed\n\tif ( ( context.ownerDocument || context ) !== document ) {\n\t\tsetDocument( context );\n\t}\n\treturn contains( context, elem );\n};\n\nSizzle.attr = function( elem, name ) {\n\tvar val;\n\n\t// Set document vars if needed\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\tsetDocument( elem );\n\t}\n\n\tif ( !documentIsXML ) {\n\t\tname = name.toLowerCase();\n\t}\n\tif ( (val = Expr.attrHandle[ name ]) ) {\n\t\treturn val( elem );\n\t}\n\tif ( documentIsXML || support.attributes ) {\n\t\treturn elem.getAttribute( name );\n\t}\n\treturn ( (val = elem.getAttributeNode( name )) || elem.getAttribute( name ) ) && elem[ name ] === true ?\n\t\tname :\n\t\tval && val.specified ? val.value : null;\n};\n\nSizzle.error = function( msg ) {\n\tthrow new Error( \"Syntax error, unrecognized expression: \" + msg );\n};\n\n// Document sorting and removing duplicates\nSizzle.uniqueSort = function( results ) {\n\tvar elem,\n\t\tduplicates = [],\n\t\ti = 1,\n\t\tj = 0;\n\n\t// Unless we *know* we can detect duplicates, assume their presence\n\thasDuplicate = !support.detectDuplicates;\n\tresults.sort( sortOrder );\n\n\tif ( hasDuplicate ) {\n\t\tfor ( ; (elem = results[i]); i++ ) {\n\t\t\tif ( elem === results[ i - 1 ] ) {\n\t\t\t\tj = duplicates.push( i );\n\t\t\t}\n\t\t}\n\t\twhile ( j-- ) {\n\t\t\tresults.splice( duplicates[ j ], 1 );\n\t\t}\n\t}\n\n\treturn results;\n};\n\nfunction siblingCheck( a, b ) {\n\tvar cur = b && a,\n\t\tdiff = cur && ( ~b.sourceIndex || MAX_NEGATIVE ) - ( ~a.sourceIndex || MAX_NEGATIVE );\n\n\t// Use IE sourceIndex if available on both nodes\n\tif ( diff ) {\n\t\treturn diff;\n\t}\n\n\t// Check if b follows a\n\tif ( cur ) {\n\t\twhile ( (cur = cur.nextSibling) ) {\n\t\t\tif ( cur === b ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn a ? 1 : -1;\n}\n\n// Returns a function to use in pseudos for input types\nfunction createInputPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn name === \"input\" && elem.type === type;\n\t};\n}\n\n// Returns a function to use in pseudos for buttons\nfunction createButtonPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn (name === \"input\" || name === \"button\") && elem.type === type;\n\t};\n}\n\n// Returns a function to use in pseudos for positionals\nfunction createPositionalPseudo( fn ) {\n\treturn markFunction(function( argument ) {\n\t\targument = +argument;\n\t\treturn markFunction(function( seed, matches ) {\n\t\t\tvar j,\n\t\t\t\tmatchIndexes = fn( [], seed.length, argument ),\n\t\t\t\ti = matchIndexes.length;\n\n\t\t\t// Match elements found at the specified indexes\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( seed[ (j = matchIndexes[i]) ] ) {\n\t\t\t\t\tseed[j] = !(matches[j] = seed[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Utility function for retrieving the text value of an array of DOM nodes\n * @param {Array|Element} elem\n */\ngetText = Sizzle.getText = function( elem ) {\n\tvar node,\n\t\tret = \"\",\n\t\ti = 0,\n\t\tnodeType = elem.nodeType;\n\n\tif ( !nodeType ) {\n\t\t// If no nodeType, this is expected to be an array\n\t\tfor ( ; (node = elem[i]); i++ ) {\n\t\t\t// Do not traverse comment nodes\n\t\t\tret += getText( node );\n\t\t}\n\t} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {\n\t\t// Use textContent for elements\n\t\t// innerText usage removed for consistency of new lines (see #11153)\n\t\tif ( typeof elem.textContent === \"string\" ) {\n\t\t\treturn elem.textContent;\n\t\t} else {\n\t\t\t// Traverse its children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tret += getText( elem );\n\t\t\t}\n\t\t}\n\t} else if ( nodeType === 3 || nodeType === 4 ) {\n\t\treturn elem.nodeValue;\n\t}\n\t// Do not include comment or processing instruction nodes\n\n\treturn ret;\n};\n\nExpr = Sizzle.selectors = {\n\n\t// Can be adjusted by the user\n\tcacheLength: 50,\n\n\tcreatePseudo: markFunction,\n\n\tmatch: matchExpr,\n\n\tfind: {},\n\n\trelative: {\n\t\t\">\": { dir: \"parentNode\", first: true },\n\t\t\" \": { dir: \"parentNode\" },\n\t\t\"+\": { dir: \"previousSibling\", first: true },\n\t\t\"~\": { dir: \"previousSibling\" }\n\t},\n\n\tpreFilter: {\n\t\t\"ATTR\": function( match ) {\n\t\t\tmatch[1] = match[1].replace( runescape, funescape );\n\n\t\t\t// Move the given value to match[3] whether quoted or unquoted\n\t\t\tmatch[3] = ( match[4] || match[5] || \"\" ).replace( runescape, funescape );\n\n\t\t\tif ( match[2] === \"~=\" ) {\n\t\t\t\tmatch[3] = \" \" + match[3] + \" \";\n\t\t\t}\n\n\t\t\treturn match.slice( 0, 4 );\n\t\t},\n\n\t\t\"CHILD\": function( match ) {\n\t\t\t/* matches from matchExpr[\"CHILD\"]\n\t\t\t\t1 type (only|nth|...)\n\t\t\t\t2 what (child|of-type)\n\t\t\t\t3 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)\n\t\t\t\t4 xn-component of xn+y argument ([+-]?\\d*n|)\n\t\t\t\t5 sign of xn-component\n\t\t\t\t6 x of xn-component\n\t\t\t\t7 sign of y-component\n\t\t\t\t8 y of y-component\n\t\t\t*/\n\t\t\tmatch[1] = match[1].toLowerCase();\n\n\t\t\tif ( match[1].slice( 0, 3 ) === \"nth\" ) {\n\t\t\t\t// nth-* requires argument\n\t\t\t\tif ( !match[3] ) {\n\t\t\t\t\tSizzle.error( match[0] );\n\t\t\t\t}\n\n\t\t\t\t// numeric x and y parameters for Expr.filter.CHILD\n\t\t\t\t// remember that false/true cast respectively to 0/1\n\t\t\t\tmatch[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === \"even\" || match[3] === \"odd\" ) );\n\t\t\t\tmatch[5] = +( ( match[7] + match[8] ) || match[3] === \"odd\" );\n\n\t\t\t// other types prohibit arguments\n\t\t\t} else if ( match[3] ) {\n\t\t\t\tSizzle.error( match[0] );\n\t\t\t}\n\n\t\t\treturn match;\n\t\t},\n\n\t\t\"PSEUDO\": function( match ) {\n\t\t\tvar excess,\n\t\t\t\tunquoted = !match[5] && match[2];\n\n\t\t\tif ( matchExpr[\"CHILD\"].test( match[0] ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Accept quoted arguments as-is\n\t\t\tif ( match[4] ) {\n\t\t\t\tmatch[2] = match[4];\n\n\t\t\t// Strip excess characters from unquoted arguments\n\t\t\t} else if ( unquoted && rpseudo.test( unquoted ) &&\n\t\t\t\t// Get excess from tokenize (recursively)\n\t\t\t\t(excess = tokenize( unquoted, true )) &&\n\t\t\t\t// advance to the next closing parenthesis\n\t\t\t\t(excess = unquoted.indexOf( \")\", unquoted.length - excess ) - unquoted.length) ) {\n\n\t\t\t\t// excess is a negative index\n\t\t\t\tmatch[0] = match[0].slice( 0, excess );\n\t\t\t\tmatch[2] = unquoted.slice( 0, excess );\n\t\t\t}\n\n\t\t\t// Return only captures needed by the pseudo filter method (type and argument)\n\t\t\treturn match.slice( 0, 3 );\n\t\t}\n\t},\n\n\tfilter: {\n\n\t\t\"TAG\": function( nodeName ) {\n\t\t\tif ( nodeName === \"*\" ) {\n\t\t\t\treturn function() { return true; };\n\t\t\t}\n\n\t\t\tnodeName = nodeName.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn function( elem ) {\n\t\t\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n\t\t\t};\n\t\t},\n\n\t\t\"CLASS\": function( className ) {\n\t\t\tvar pattern = classCache[ className + \" \" ];\n\n\t\t\treturn pattern ||\n\t\t\t\t(pattern = new RegExp( \"(^|\" + whitespace + \")\" + className + \"(\" + whitespace + \"|$)\" )) &&\n\t\t\t\tclassCache( className, function( elem ) {\n\t\t\t\t\treturn pattern.test( elem.className || (typeof elem.getAttribute !== strundefined && elem.getAttribute(\"class\")) || \"\" );\n\t\t\t\t});\n\t\t},\n\n\t\t\"ATTR\": function( name, operator, check ) {\n\t\t\treturn function( elem ) {\n\t\t\t\tvar result = Sizzle.attr( elem, name );\n\n\t\t\t\tif ( result == null ) {\n\t\t\t\t\treturn operator === \"!=\";\n\t\t\t\t}\n\t\t\t\tif ( !operator ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tresult += \"\";\n\n\t\t\t\treturn operator === \"=\" ? result === check :\n\t\t\t\t\toperator === \"!=\" ? result !== check :\n\t\t\t\t\toperator === \"^=\" ? check && result.indexOf( check ) === 0 :\n\t\t\t\t\toperator === \"*=\" ? check && result.indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"$=\" ? check && result.slice( -check.length ) === check :\n\t\t\t\t\toperator === \"~=\" ? ( \" \" + result + \" \" ).indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"|=\" ? result === check || result.slice( 0, check.length + 1 ) === check + \"-\" :\n\t\t\t\t\tfalse;\n\t\t\t};\n\t\t},\n\n\t\t\"CHILD\": function( type, what, argument, first, last ) {\n\t\t\tvar simple = type.slice( 0, 3 ) !== \"nth\",\n\t\t\t\tforward = type.slice( -4 ) !== \"last\",\n\t\t\t\tofType = what === \"of-type\";\n\n\t\t\treturn first === 1 && last === 0 ?\n\n\t\t\t\t// Shortcut for :nth-*(n)\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn !!elem.parentNode;\n\t\t\t\t} :\n\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tvar cache, outerCache, node, diff, nodeIndex, start,\n\t\t\t\t\t\tdir = simple !== forward ? \"nextSibling\" : \"previousSibling\",\n\t\t\t\t\t\tparent = elem.parentNode,\n\t\t\t\t\t\tname = ofType && elem.nodeName.toLowerCase(),\n\t\t\t\t\t\tuseCache = !xml && !ofType;\n\n\t\t\t\t\tif ( parent ) {\n\n\t\t\t\t\t\t// :(first|last|only)-(child|of-type)\n\t\t\t\t\t\tif ( simple ) {\n\t\t\t\t\t\t\twhile ( dir ) {\n\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\twhile ( (node = node[ dir ]) ) {\n\t\t\t\t\t\t\t\t\tif ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// Reverse direction for :only-* (if we haven't yet done so)\n\t\t\t\t\t\t\t\tstart = dir = type === \"only\" && !start && \"nextSibling\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstart = [ forward ? parent.firstChild : parent.lastChild ];\n\n\t\t\t\t\t\t// non-xml :nth-child(...) stores cache data on `parent`\n\t\t\t\t\t\tif ( forward && useCache ) {\n\t\t\t\t\t\t\t// Seek `elem` from a previously-cached index\n\t\t\t\t\t\t\touterCache = parent[ expando ] || (parent[ expando ] = {});\n\t\t\t\t\t\t\tcache = outerCache[ type ] || [];\n\t\t\t\t\t\t\tnodeIndex = cache[0] === dirruns && cache[1];\n\t\t\t\t\t\t\tdiff = cache[0] === dirruns && cache[2];\n\t\t\t\t\t\t\tnode = nodeIndex && parent.childNodes[ nodeIndex ];\n\n\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\n\t\t\t\t\t\t\t\t// Fallback to seeking `elem` from the start\n\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\t// When found, cache indexes on `parent` and break\n\t\t\t\t\t\t\t\tif ( node.nodeType === 1 && ++diff && node === elem ) {\n\t\t\t\t\t\t\t\t\touterCache[ type ] = [ dirruns, nodeIndex, diff ];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Use previously-cached element index if available\n\t\t\t\t\t\t} else if ( useCache && (cache = (elem[ expando ] || (elem[ expando ] = {}))[ type ]) && cache[0] === dirruns ) {\n\t\t\t\t\t\t\tdiff = cache[1];\n\n\t\t\t\t\t\t// xml :nth-child(...) or :nth-last-child(...) or :nth(-last)?-of-type(...)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Use the same loop as above to seek `elem` from the start\n\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\tif ( ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) && ++diff ) {\n\t\t\t\t\t\t\t\t\t// Cache the index of each encountered element\n\t\t\t\t\t\t\t\t\tif ( useCache ) {\n\t\t\t\t\t\t\t\t\t\t(node[ expando ] || (node[ expando ] = {}))[ type ] = [ dirruns, diff ];\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif ( node === elem ) {\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Incorporate the offset, then check against cycle size\n\t\t\t\t\t\tdiff -= last;\n\t\t\t\t\t\treturn diff === first || ( diff % first === 0 && diff / first >= 0 );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t},\n\n\t\t\"PSEUDO\": function( pseudo, argument ) {\n\t\t\t// pseudo-class names are case-insensitive\n\t\t\t// http://www.w3.org/TR/selectors/#pseudo-classes\n\t\t\t// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters\n\t\t\t// Remember that setFilters inherits from pseudos\n\t\t\tvar args,\n\t\t\t\tfn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||\n\t\t\t\t\tSizzle.error( \"unsupported pseudo: \" + pseudo );\n\n\t\t\t// The user may use createPseudo to indicate that\n\t\t\t// arguments are needed to create the filter function\n\t\t\t// just as Sizzle does\n\t\t\tif ( fn[ expando ] ) {\n\t\t\t\treturn fn( argument );\n\t\t\t}\n\n\t\t\t// But maintain support for old signatures\n\t\t\tif ( fn.length > 1 ) {\n\t\t\t\targs = [ pseudo, pseudo, \"\", argument ];\n\t\t\t\treturn Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?\n\t\t\t\t\tmarkFunction(function( seed, matches ) {\n\t\t\t\t\t\tvar idx,\n\t\t\t\t\t\t\tmatched = fn( seed, argument ),\n\t\t\t\t\t\t\ti = matched.length;\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tidx = indexOf.call( seed, matched[i] );\n\t\t\t\t\t\t\tseed[ idx ] = !( matches[ idx ] = matched[i] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}) :\n\t\t\t\t\tfunction( elem ) {\n\t\t\t\t\t\treturn fn( elem, 0, args );\n\t\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn fn;\n\t\t}\n\t},\n\n\tpseudos: {\n\t\t// Potentially complex pseudos\n\t\t\"not\": markFunction(function( selector ) {\n\t\t\t// Trim the selector passed to compile\n\t\t\t// to avoid treating leading and trailing\n\t\t\t// spaces as combinators\n\t\t\tvar input = [],\n\t\t\t\tresults = [],\n\t\t\t\tmatcher = compile( selector.replace( rtrim, \"$1\" ) );\n\n\t\t\treturn matcher[ expando ] ?\n\t\t\t\tmarkFunction(function( seed, matches, context, xml ) {\n\t\t\t\t\tvar elem,\n\t\t\t\t\t\tunmatched = matcher( seed, null, xml, [] ),\n\t\t\t\t\t\ti = seed.length;\n\n\t\t\t\t\t// Match elements unmatched by `matcher`\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( (elem = unmatched[i]) ) {\n\t\t\t\t\t\t\tseed[i] = !(matches[i] = elem);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}) :\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tinput[0] = elem;\n\t\t\t\t\tmatcher( input, null, xml, results );\n\t\t\t\t\treturn !results.pop();\n\t\t\t\t};\n\t\t}),\n\n\t\t\"has\": markFunction(function( selector ) {\n\t\t\treturn function( elem ) {\n\t\t\t\treturn Sizzle( selector, elem ).length > 0;\n\t\t\t};\n\t\t}),\n\n\t\t\"contains\": markFunction(function( text ) {\n\t\t\treturn function( elem ) {\n\t\t\t\treturn ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;\n\t\t\t};\n\t\t}),\n\n\t\t// \"Whether an element is represented by a :lang() selector\n\t\t// is based solely on the element's language value\n\t\t// being equal to the identifier C,\n\t\t// or beginning with the identifier C immediately followed by \"-\".\n\t\t// The matching of C against the element's language value is performed case-insensitively.\n\t\t// The identifier C does not have to be a valid language name.\"\n\t\t// http://www.w3.org/TR/selectors/#lang-pseudo\n\t\t\"lang\": markFunction( function( lang ) {\n\t\t\t// lang value must be a valid identifider\n\t\t\tif ( !ridentifier.test(lang || \"\") ) {\n\t\t\t\tSizzle.error( \"unsupported lang: \" + lang );\n\t\t\t}\n\t\t\tlang = lang.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn function( elem ) {\n\t\t\t\tvar elemLang;\n\t\t\t\tdo {\n\t\t\t\t\tif ( (elemLang = documentIsXML ?\n\t\t\t\t\t\telem.getAttribute(\"xml:lang\") || elem.getAttribute(\"lang\") :\n\t\t\t\t\t\telem.lang) ) {\n\n\t\t\t\t\t\telemLang = elemLang.toLowerCase();\n\t\t\t\t\t\treturn elemLang === lang || elemLang.indexOf( lang + \"-\" ) === 0;\n\t\t\t\t\t}\n\t\t\t\t} while ( (elem = elem.parentNode) && elem.nodeType === 1 );\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}),\n\n\t\t// Miscellaneous\n\t\t\"target\": function( elem ) {\n\t\t\tvar hash = window.location && window.location.hash;\n\t\t\treturn hash && hash.slice( 1 ) === elem.id;\n\t\t},\n\n\t\t\"root\": function( elem ) {\n\t\t\treturn elem === docElem;\n\t\t},\n\n\t\t\"focus\": function( elem ) {\n\t\t\treturn elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n\t\t},\n\n\t\t// Boolean properties\n\t\t\"enabled\": function( elem ) {\n\t\t\treturn elem.disabled === false;\n\t\t},\n\n\t\t\"disabled\": function( elem ) {\n\t\t\treturn elem.disabled === true;\n\t\t},\n\n\t\t\"checked\": function( elem ) {\n\t\t\t// In CSS3, :checked should return both checked and selected elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\tvar nodeName = elem.nodeName.toLowerCase();\n\t\t\treturn (nodeName === \"input\" && !!elem.checked) || (nodeName === \"option\" && !!elem.selected);\n\t\t},\n\n\t\t\"selected\": function( elem ) {\n\t\t\t// Accessing this property makes selected-by-default\n\t\t\t// options in Safari work properly\n\t\t\tif ( elem.parentNode ) {\n\t\t\t\telem.parentNode.selectedIndex;\n\t\t\t}\n\n\t\t\treturn elem.selected === true;\n\t\t},\n\n\t\t// Contents\n\t\t\"empty\": function( elem ) {\n\t\t\t// http://www.w3.org/TR/selectors/#empty-pseudo\n\t\t\t// :empty is only affected by element nodes and content nodes(including text(3), cdata(4)),\n\t\t\t//   not comment, processing instructions, or others\n\t\t\t// Thanks to Diego Perini for the nodeName shortcut\n\t\t\t//   Greater than \"@\" means alpha characters (specifically not starting with \"#\" or \"?\")\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tif ( elem.nodeName > \"@\" || elem.nodeType === 3 || elem.nodeType === 4 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\t\"parent\": function( elem ) {\n\t\t\treturn !Expr.pseudos[\"empty\"]( elem );\n\t\t},\n\n\t\t// Element/input types\n\t\t\"header\": function( elem ) {\n\t\t\treturn rheader.test( elem.nodeName );\n\t\t},\n\n\t\t\"input\": function( elem ) {\n\t\t\treturn rinputs.test( elem.nodeName );\n\t\t},\n\n\t\t\"button\": function( elem ) {\n\t\t\tvar name = elem.nodeName.toLowerCase();\n\t\t\treturn name === \"input\" && elem.type === \"button\" || name === \"button\";\n\t\t},\n\n\t\t\"text\": function( elem ) {\n\t\t\tvar attr;\n\t\t\t// IE6 and 7 will map elem.type to 'text' for new HTML5 types (search, etc)\n\t\t\t// use getAttribute instead to test this case\n\t\t\treturn elem.nodeName.toLowerCase() === \"input\" &&\n\t\t\t\telem.type === \"text\" &&\n\t\t\t\t( (attr = elem.getAttribute(\"type\")) == null || attr.toLowerCase() === elem.type );\n\t\t},\n\n\t\t// Position-in-collection\n\t\t\"first\": createPositionalPseudo(function() {\n\t\t\treturn [ 0 ];\n\t\t}),\n\n\t\t\"last\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\treturn [ length - 1 ];\n\t\t}),\n\n\t\t\"eq\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\treturn [ argument < 0 ? argument + length : argument ];\n\t\t}),\n\n\t\t\"even\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"odd\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\tvar i = 1;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"lt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; --i >= 0; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"gt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; ++i < length; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t})\n\t}\n};\n\n// Add button/input type pseudos\nfor ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {\n\tExpr.pseudos[ i ] = createInputPseudo( i );\n}\nfor ( i in { submit: true, reset: true } ) {\n\tExpr.pseudos[ i ] = createButtonPseudo( i );\n}\n\nfunction tokenize( selector, parseOnly ) {\n\tvar matched, match, tokens, type,\n\t\tsoFar, groups, preFilters,\n\t\tcached = tokenCache[ selector + \" \" ];\n\n\tif ( cached ) {\n\t\treturn parseOnly ? 0 : cached.slice( 0 );\n\t}\n\n\tsoFar = selector;\n\tgroups = [];\n\tpreFilters = Expr.preFilter;\n\n\twhile ( soFar ) {\n\n\t\t// Comma and first run\n\t\tif ( !matched || (match = rcomma.exec( soFar )) ) {\n\t\t\tif ( match ) {\n\t\t\t\t// Don't consume trailing commas as valid\n\t\t\t\tsoFar = soFar.slice( match[0].length ) || soFar;\n\t\t\t}\n\t\t\tgroups.push( tokens = [] );\n\t\t}\n\n\t\tmatched = false;\n\n\t\t// Combinators\n\t\tif ( (match = rcombinators.exec( soFar )) ) {\n\t\t\tmatched = match.shift();\n\t\t\ttokens.push( {\n\t\t\t\tvalue: matched,\n\t\t\t\t// Cast descendant combinators to space\n\t\t\t\ttype: match[0].replace( rtrim, \" \" )\n\t\t\t} );\n\t\t\tsoFar = soFar.slice( matched.length );\n\t\t}\n\n\t\t// Filters\n\t\tfor ( type in Expr.filter ) {\n\t\t\tif ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||\n\t\t\t\t(match = preFilters[ type ]( match ))) ) {\n\t\t\t\tmatched = match.shift();\n\t\t\t\ttokens.push( {\n\t\t\t\t\tvalue: matched,\n\t\t\t\t\ttype: type,\n\t\t\t\t\tmatches: match\n\t\t\t\t} );\n\t\t\t\tsoFar = soFar.slice( matched.length );\n\t\t\t}\n\t\t}\n\n\t\tif ( !matched ) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Return the length of the invalid excess\n\t// if we're just parsing\n\t// Otherwise, throw an error or return tokens\n\treturn parseOnly ?\n\t\tsoFar.length :\n\t\tsoFar ?\n\t\t\tSizzle.error( selector ) :\n\t\t\t// Cache the tokens\n\t\t\ttokenCache( selector, groups ).slice( 0 );\n}\n\nfunction toSelector( tokens ) {\n\tvar i = 0,\n\t\tlen = tokens.length,\n\t\tselector = \"\";\n\tfor ( ; i < len; i++ ) {\n\t\tselector += tokens[i].value;\n\t}\n\treturn selector;\n}\n\nfunction addCombinator( matcher, combinator, base ) {\n\tvar dir = combinator.dir,\n\t\tcheckNonElements = base && dir === \"parentNode\",\n\t\tdoneName = done++;\n\n\treturn combinator.first ?\n\t\t// Check against closest ancestor/preceding element\n\t\tfunction( elem, context, xml ) {\n\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\treturn matcher( elem, context, xml );\n\t\t\t\t}\n\t\t\t}\n\t\t} :\n\n\t\t// Check against all ancestor/preceding elements\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar data, cache, outerCache,\n\t\t\t\tdirkey = dirruns + \" \" + doneName;\n\n\t\t\t// We can't set arbitrary data on XML nodes, so they don't benefit from dir caching\n\t\t\tif ( xml ) {\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\touterCache = elem[ expando ] || (elem[ expando ] = {});\n\t\t\t\t\t\tif ( (cache = outerCache[ dir ]) && cache[0] === dirkey ) {\n\t\t\t\t\t\t\tif ( (data = cache[1]) === true || data === cachedruns ) {\n\t\t\t\t\t\t\t\treturn data === true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcache = outerCache[ dir ] = [ dirkey ];\n\t\t\t\t\t\t\tcache[1] = matcher( elem, context, xml ) || cachedruns;\n\t\t\t\t\t\t\tif ( cache[1] === true ) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n}\n\nfunction elementMatcher( matchers ) {\n\treturn matchers.length > 1 ?\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar i = matchers.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( !matchers[i]( elem, context, xml ) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t} :\n\t\tmatchers[0];\n}\n\nfunction condense( unmatched, map, filter, context, xml ) {\n\tvar elem,\n\t\tnewUnmatched = [],\n\t\ti = 0,\n\t\tlen = unmatched.length,\n\t\tmapped = map != null;\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( (elem = unmatched[i]) ) {\n\t\t\tif ( !filter || filter( elem, context, xml ) ) {\n\t\t\t\tnewUnmatched.push( elem );\n\t\t\t\tif ( mapped ) {\n\t\t\t\t\tmap.push( i );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn newUnmatched;\n}\n\nfunction setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {\n\tif ( postFilter && !postFilter[ expando ] ) {\n\t\tpostFilter = setMatcher( postFilter );\n\t}\n\tif ( postFinder && !postFinder[ expando ] ) {\n\t\tpostFinder = setMatcher( postFinder, postSelector );\n\t}\n\treturn markFunction(function( seed, results, context, xml ) {\n\t\tvar temp, i, elem,\n\t\t\tpreMap = [],\n\t\t\tpostMap = [],\n\t\t\tpreexisting = results.length,\n\n\t\t\t// Get initial elements from seed or context\n\t\t\telems = seed || multipleContexts( selector || \"*\", context.nodeType ? [ context ] : context, [] ),\n\n\t\t\t// Prefilter to get matcher input, preserving a map for seed-results synchronization\n\t\t\tmatcherIn = preFilter && ( seed || !selector ) ?\n\t\t\t\tcondense( elems, preMap, preFilter, context, xml ) :\n\t\t\t\telems,\n\n\t\t\tmatcherOut = matcher ?\n\t\t\t\t// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,\n\t\t\t\tpostFinder || ( seed ? preFilter : preexisting || postFilter ) ?\n\n\t\t\t\t\t// ...intermediate processing is necessary\n\t\t\t\t\t[] :\n\n\t\t\t\t\t// ...otherwise use results directly\n\t\t\t\t\tresults :\n\t\t\t\tmatcherIn;\n\n\t\t// Find primary matches\n\t\tif ( matcher ) {\n\t\t\tmatcher( matcherIn, matcherOut, context, xml );\n\t\t}\n\n\t\t// Apply postFilter\n\t\tif ( postFilter ) {\n\t\t\ttemp = condense( matcherOut, postMap );\n\t\t\tpostFilter( temp, [], context, xml );\n\n\t\t\t// Un-match failing elements by moving them back to matcherIn\n\t\t\ti = temp.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( (elem = temp[i]) ) {\n\t\t\t\t\tmatcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( seed ) {\n\t\t\tif ( postFinder || preFilter ) {\n\t\t\t\tif ( postFinder ) {\n\t\t\t\t\t// Get the final matcherOut by condensing this intermediate into postFinder contexts\n\t\t\t\t\ttemp = [];\n\t\t\t\t\ti = matcherOut.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( (elem = matcherOut[i]) ) {\n\t\t\t\t\t\t\t// Restore matcherIn since elem is not yet a final match\n\t\t\t\t\t\t\ttemp.push( (matcherIn[i] = elem) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpostFinder( null, (matcherOut = []), temp, xml );\n\t\t\t\t}\n\n\t\t\t\t// Move matched elements from seed to results to keep them synchronized\n\t\t\t\ti = matcherOut.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tif ( (elem = matcherOut[i]) &&\n\t\t\t\t\t\t(temp = postFinder ? indexOf.call( seed, elem ) : preMap[i]) > -1 ) {\n\n\t\t\t\t\t\tseed[temp] = !(results[temp] = elem);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Add elements to results, through postFinder if defined\n\t\t} else {\n\t\t\tmatcherOut = condense(\n\t\t\t\tmatcherOut === results ?\n\t\t\t\t\tmatcherOut.splice( preexisting, matcherOut.length ) :\n\t\t\t\t\tmatcherOut\n\t\t\t);\n\t\t\tif ( postFinder ) {\n\t\t\t\tpostFinder( null, results, matcherOut, xml );\n\t\t\t} else {\n\t\t\t\tpush.apply( results, matcherOut );\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction matcherFromTokens( tokens ) {\n\tvar checkContext, matcher, j,\n\t\tlen = tokens.length,\n\t\tleadingRelative = Expr.relative[ tokens[0].type ],\n\t\timplicitRelative = leadingRelative || Expr.relative[\" \"],\n\t\ti = leadingRelative ? 1 : 0,\n\n\t\t// The foundational matcher ensures that elements are reachable from top-level context(s)\n\t\tmatchContext = addCombinator( function( elem ) {\n\t\t\treturn elem === checkContext;\n\t\t}, implicitRelative, true ),\n\t\tmatchAnyContext = addCombinator( function( elem ) {\n\t\t\treturn indexOf.call( checkContext, elem ) > -1;\n\t\t}, implicitRelative, true ),\n\t\tmatchers = [ function( elem, context, xml ) {\n\t\t\treturn ( !leadingRelative && ( xml || context !== outermostContext ) ) || (\n\t\t\t\t(checkContext = context).nodeType ?\n\t\t\t\t\tmatchContext( elem, context, xml ) :\n\t\t\t\t\tmatchAnyContext( elem, context, xml ) );\n\t\t} ];\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( (matcher = Expr.relative[ tokens[i].type ]) ) {\n\t\t\tmatchers = [ addCombinator(elementMatcher( matchers ), matcher) ];\n\t\t} else {\n\t\t\tmatcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );\n\n\t\t\t// Return special upon seeing a positional matcher\n\t\t\tif ( matcher[ expando ] ) {\n\t\t\t\t// Find the next relative operator (if any) for proper handling\n\t\t\t\tj = ++i;\n\t\t\t\tfor ( ; j < len; j++ ) {\n\t\t\t\t\tif ( Expr.relative[ tokens[j].type ] ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn setMatcher(\n\t\t\t\t\ti > 1 && elementMatcher( matchers ),\n\t\t\t\t\ti > 1 && toSelector( tokens.slice( 0, i - 1 ) ).replace( rtrim, \"$1\" ),\n\t\t\t\t\tmatcher,\n\t\t\t\t\ti < j && matcherFromTokens( tokens.slice( i, j ) ),\n\t\t\t\t\tj < len && matcherFromTokens( (tokens = tokens.slice( j )) ),\n\t\t\t\t\tj < len && toSelector( tokens )\n\t\t\t\t);\n\t\t\t}\n\t\t\tmatchers.push( matcher );\n\t\t}\n\t}\n\n\treturn elementMatcher( matchers );\n}\n\nfunction matcherFromGroupMatchers( elementMatchers, setMatchers ) {\n\t// A counter to specify which element is currently being matched\n\tvar matcherCachedRuns = 0,\n\t\tbySet = setMatchers.length > 0,\n\t\tbyElement = elementMatchers.length > 0,\n\t\tsuperMatcher = function( seed, context, xml, results, expandContext ) {\n\t\t\tvar elem, j, matcher,\n\t\t\t\tsetMatched = [],\n\t\t\t\tmatchedCount = 0,\n\t\t\t\ti = \"0\",\n\t\t\t\tunmatched = seed && [],\n\t\t\t\toutermost = expandContext != null,\n\t\t\t\tcontextBackup = outermostContext,\n\t\t\t\t// We must always have either seed elements or context\n\t\t\t\telems = seed || byElement && Expr.find[\"TAG\"]( \"*\", expandContext && context.parentNode || context ),\n\t\t\t\t// Use integer dirruns iff this is the outermost matcher\n\t\t\t\tdirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1);\n\n\t\t\tif ( outermost ) {\n\t\t\t\toutermostContext = context !== document && context;\n\t\t\t\tcachedruns = matcherCachedRuns;\n\t\t\t}\n\n\t\t\t// Add elements passing elementMatchers directly to results\n\t\t\t// Keep `i` a string if there are no elements so `matchedCount` will be \"00\" below\n\t\t\tfor ( ; (elem = elems[i]) != null; i++ ) {\n\t\t\t\tif ( byElement && elem ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( (matcher = elementMatchers[j++]) ) {\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( outermost ) {\n\t\t\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\t\t\tcachedruns = ++matcherCachedRuns;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Track unmatched elements for set filters\n\t\t\t\tif ( bySet ) {\n\t\t\t\t\t// They will have gone through all possible matchers\n\t\t\t\t\tif ( (elem = !matcher && elem) ) {\n\t\t\t\t\t\tmatchedCount--;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Lengthen the array for every element, matched or not\n\t\t\t\t\tif ( seed ) {\n\t\t\t\t\t\tunmatched.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Apply set filters to unmatched elements\n\t\t\tmatchedCount += i;\n\t\t\tif ( bySet && i !== matchedCount ) {\n\t\t\t\tj = 0;\n\t\t\t\twhile ( (matcher = setMatchers[j++]) ) {\n\t\t\t\t\tmatcher( unmatched, setMatched, context, xml );\n\t\t\t\t}\n\n\t\t\t\tif ( seed ) {\n\t\t\t\t\t// Reintegrate element matches to eliminate the need for sorting\n\t\t\t\t\tif ( matchedCount > 0 ) {\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tif ( !(unmatched[i] || setMatched[i]) ) {\n\t\t\t\t\t\t\t\tsetMatched[i] = pop.call( results );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Discard index placeholder values to get only actual matches\n\t\t\t\t\tsetMatched = condense( setMatched );\n\t\t\t\t}\n\n\t\t\t\t// Add matches to results\n\t\t\t\tpush.apply( results, setMatched );\n\n\t\t\t\t// Seedless set matches succeeding multiple successful matchers stipulate sorting\n\t\t\t\tif ( outermost && !seed && setMatched.length > 0 &&\n\t\t\t\t\t( matchedCount + setMatchers.length ) > 1 ) {\n\n\t\t\t\t\tSizzle.uniqueSort( results );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Override manipulation of globals by nested matchers\n\t\t\tif ( outermost ) {\n\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\toutermostContext = contextBackup;\n\t\t\t}\n\n\t\t\treturn unmatched;\n\t\t};\n\n\treturn bySet ?\n\t\tmarkFunction( superMatcher ) :\n\t\tsuperMatcher;\n}\n\ncompile = Sizzle.compile = function( selector, group /* Internal Use Only */ ) {\n\tvar i,\n\t\tsetMatchers = [],\n\t\telementMatchers = [],\n\t\tcached = compilerCache[ selector + \" \" ];\n\n\tif ( !cached ) {\n\t\t// Generate a function of recursive functions that can be used to check each element\n\t\tif ( !group ) {\n\t\t\tgroup = tokenize( selector );\n\t\t}\n\t\ti = group.length;\n\t\twhile ( i-- ) {\n\t\t\tcached = matcherFromTokens( group[i] );\n\t\t\tif ( cached[ expando ] ) {\n\t\t\t\tsetMatchers.push( cached );\n\t\t\t} else {\n\t\t\t\telementMatchers.push( cached );\n\t\t\t}\n\t\t}\n\n\t\t// Cache the compiled function\n\t\tcached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );\n\t}\n\treturn cached;\n};\n\nfunction multipleContexts( selector, contexts, results ) {\n\tvar i = 0,\n\t\tlen = contexts.length;\n\tfor ( ; i < len; i++ ) {\n\t\tSizzle( selector, contexts[i], results );\n\t}\n\treturn results;\n}\n\nfunction select( selector, context, results, seed ) {\n\tvar i, tokens, token, type, find,\n\t\tmatch = tokenize( selector );\n\n\tif ( !seed ) {\n\t\t// Try to minimize operations if there is only one group\n\t\tif ( match.length === 1 ) {\n\n\t\t\t// Take a shortcut and set the context if the root selector is an ID\n\t\t\ttokens = match[0] = match[0].slice( 0 );\n\t\t\tif ( tokens.length > 2 && (token = tokens[0]).type === \"ID\" &&\n\t\t\t\t\tcontext.nodeType === 9 && !documentIsXML &&\n\t\t\t\t\tExpr.relative[ tokens[1].type ] ) {\n\n\t\t\t\tcontext = Expr.find[\"ID\"]( token.matches[0].replace( runescape, funescape ), context )[0];\n\t\t\t\tif ( !context ) {\n\t\t\t\t\treturn results;\n\t\t\t\t}\n\n\t\t\t\tselector = selector.slice( tokens.shift().value.length );\n\t\t\t}\n\n\t\t\t// Fetch a seed set for right-to-left matching\n\t\t\ti = matchExpr[\"needsContext\"].test( selector ) ? 0 : tokens.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\ttoken = tokens[i];\n\n\t\t\t\t// Abort if we hit a combinator\n\t\t\t\tif ( Expr.relative[ (type = token.type) ] ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif ( (find = Expr.find[ type ]) ) {\n\t\t\t\t\t// Search, expanding context for leading sibling combinators\n\t\t\t\t\tif ( (seed = find(\n\t\t\t\t\t\ttoken.matches[0].replace( runescape, funescape ),\n\t\t\t\t\t\trsibling.test( tokens[0].type ) && context.parentNode || context\n\t\t\t\t\t)) ) {\n\n\t\t\t\t\t\t// If seed is empty or no tokens remain, we can return early\n\t\t\t\t\t\ttokens.splice( i, 1 );\n\t\t\t\t\t\tselector = seed.length && toSelector( tokens );\n\t\t\t\t\t\tif ( !selector ) {\n\t\t\t\t\t\t\tpush.apply( results, slice.call( seed, 0 ) );\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Compile and execute a filtering function\n\t// Provide `match` to avoid retokenization if we modified the selector above\n\tcompile( selector, match )(\n\t\tseed,\n\t\tcontext,\n\t\tdocumentIsXML,\n\t\tresults,\n\t\trsibling.test( selector )\n\t);\n\treturn results;\n}\n\n// Deprecated\nExpr.pseudos[\"nth\"] = Expr.pseudos[\"eq\"];\n\n// Easy API for creating new setFilters\nfunction setFilters() {}\nExpr.filters = setFilters.prototype = Expr.pseudos;\nExpr.setFilters = new setFilters();\n\n// Initialize with the default document\nsetDocument();\n\n// Override sizzle attribute retrieval\nSizzle.attr = jQuery.attr;\njQuery.find = Sizzle;\njQuery.expr = Sizzle.selectors;\njQuery.expr[\":\"] = jQuery.expr.pseudos;\njQuery.unique = Sizzle.uniqueSort;\njQuery.text = Sizzle.getText;\njQuery.isXMLDoc = Sizzle.isXML;\njQuery.contains = Sizzle.contains;\n\n\n})( window );\nvar runtil = /Until$/,\n\trparentsprev = /^(?:parents|prev(?:Until|All))/,\n\tisSimple = /^.[^:#\\[\\.,]*$/,\n\trneedsContext = jQuery.expr.match.needsContext,\n\t// methods guaranteed to produce a unique set when starting from a unique set\n\tguaranteedUnique = {\n\t\tchildren: true,\n\t\tcontents: true,\n\t\tnext: true,\n\t\tprev: true\n\t};\n\njQuery.fn.extend({\n\tfind: function( selector ) {\n\t\tvar i, ret, self,\n\t\t\tlen = this.length;\n\n\t\tif ( typeof selector !== \"string\" ) {\n\t\t\tself = this;\n\t\t\treturn this.pushStack( jQuery( selector ).filter(function() {\n\t\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\t\tif ( jQuery.contains( self[ i ], this ) ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}) );\n\t\t}\n\n\t\tret = [];\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\tjQuery.find( selector, this[ i ], ret );\n\t\t}\n\n\t\t// Needed because $( selector, context ) becomes $( context ).find( selector )\n\t\tret = this.pushStack( len > 1 ? jQuery.unique( ret ) : ret );\n\t\tret.selector = ( this.selector ? this.selector + \" \" : \"\" ) + selector;\n\t\treturn ret;\n\t},\n\n\thas: function( target ) {\n\t\tvar i,\n\t\t\ttargets = jQuery( target, this ),\n\t\t\tlen = targets.length;\n\n\t\treturn this.filter(function() {\n\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\tif ( jQuery.contains( this, targets[i] ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\tnot: function( selector ) {\n\t\treturn this.pushStack( winnow(this, selector, false) );\n\t},\n\n\tfilter: function( selector ) {\n\t\treturn this.pushStack( winnow(this, selector, true) );\n\t},\n\n\tis: function( selector ) {\n\t\treturn !!selector && (\n\t\t\ttypeof selector === \"string\" ?\n\t\t\t\t// If this is a positional/relative selector, check membership in the returned set\n\t\t\t\t// so $(\"p:first\").is(\"p:last\") won't return true for a doc with two \"p\".\n\t\t\t\trneedsContext.test( selector ) ?\n\t\t\t\t\tjQuery( selector, this.context ).index( this[0] ) >= 0 :\n\t\t\t\t\tjQuery.filter( selector, this ).length > 0 :\n\t\t\t\tthis.filter( selector ).length > 0 );\n\t},\n\n\tclosest: function( selectors, context ) {\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\tl = this.length,\n\t\t\tret = [],\n\t\t\tpos = rneedsContext.test( selectors ) || typeof selectors !== \"string\" ?\n\t\t\t\tjQuery( selectors, context || this.context ) :\n\t\t\t\t0;\n\n\t\tfor ( ; i < l; i++ ) {\n\t\t\tcur = this[i];\n\n\t\t\twhile ( cur && cur.ownerDocument && cur !== context && cur.nodeType !== 11 ) {\n\t\t\t\tif ( pos ? pos.index(cur) > -1 : jQuery.find.matchesSelector(cur, selectors) ) {\n\t\t\t\t\tret.push( cur );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcur = cur.parentNode;\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( ret.length > 1 ? jQuery.unique( ret ) : ret );\n\t},\n\n\t// Determine the position of an element within\n\t// the matched set of elements\n\tindex: function( elem ) {\n\n\t\t// No argument, return index in parent\n\t\tif ( !elem ) {\n\t\t\treturn ( this[0] && this[0].parentNode ) ? this.first().prevAll().length : -1;\n\t\t}\n\n\t\t// index in selector\n\t\tif ( typeof elem === \"string\" ) {\n\t\t\treturn jQuery.inArray( this[0], jQuery( elem ) );\n\t\t}\n\n\t\t// Locate the position of the desired element\n\t\treturn jQuery.inArray(\n\t\t\t// If it receives a jQuery object, the first element is used\n\t\t\telem.jquery ? elem[0] : elem, this );\n\t},\n\n\tadd: function( selector, context ) {\n\t\tvar set = typeof selector === \"string\" ?\n\t\t\t\tjQuery( selector, context ) :\n\t\t\t\tjQuery.makeArray( selector && selector.nodeType ? [ selector ] : selector ),\n\t\t\tall = jQuery.merge( this.get(), set );\n\n\t\treturn this.pushStack( jQuery.unique(all) );\n\t},\n\n\taddBack: function( selector ) {\n\t\treturn this.add( selector == null ?\n\t\t\tthis.prevObject : this.prevObject.filter(selector)\n\t\t);\n\t}\n});\n\njQuery.fn.andSelf = jQuery.fn.addBack;\n\nfunction sibling( cur, dir ) {\n\tdo {\n\t\tcur = cur[ dir ];\n\t} while ( cur && cur.nodeType !== 1 );\n\n\treturn cur;\n}\n\njQuery.each({\n\tparent: function( elem ) {\n\t\tvar parent = elem.parentNode;\n\t\treturn parent && parent.nodeType !== 11 ? parent : null;\n\t},\n\tparents: function( elem ) {\n\t\treturn jQuery.dir( elem, \"parentNode\" );\n\t},\n\tparentsUntil: function( elem, i, until ) {\n\t\treturn jQuery.dir( elem, \"parentNode\", until );\n\t},\n\tnext: function( elem ) {\n\t\treturn sibling( elem, \"nextSibling\" );\n\t},\n\tprev: function( elem ) {\n\t\treturn sibling( elem, \"previousSibling\" );\n\t},\n\tnextAll: function( elem ) {\n\t\treturn jQuery.dir( elem, \"nextSibling\" );\n\t},\n\tprevAll: function( elem ) {\n\t\treturn jQuery.dir( elem, \"previousSibling\" );\n\t},\n\tnextUntil: function( elem, i, until ) {\n\t\treturn jQuery.dir( elem, \"nextSibling\", until );\n\t},\n\tprevUntil: function( elem, i, until ) {\n\t\treturn jQuery.dir( elem, \"previousSibling\", until );\n\t},\n\tsiblings: function( elem ) {\n\t\treturn jQuery.sibling( ( elem.parentNode || {} ).firstChild, elem );\n\t},\n\tchildren: function( elem ) {\n\t\treturn jQuery.sibling( elem.firstChild );\n\t},\n\tcontents: function( elem ) {\n\t\treturn jQuery.nodeName( elem, \"iframe\" ) ?\n\t\t\telem.contentDocument || elem.contentWindow.document :\n\t\t\tjQuery.merge( [], elem.childNodes );\n\t}\n}, function( name, fn ) {\n\tjQuery.fn[ name ] = function( until, selector ) {\n\t\tvar ret = jQuery.map( this, fn, until );\n\n\t\tif ( !runtil.test( name ) ) {\n\t\t\tselector = until;\n\t\t}\n\n\t\tif ( selector && typeof selector === \"string\" ) {\n\t\t\tret = jQuery.filter( selector, ret );\n\t\t}\n\n\t\tret = this.length > 1 && !guaranteedUnique[ name ] ? jQuery.unique( ret ) : ret;\n\n\t\tif ( this.length > 1 && rparentsprev.test( name ) ) {\n\t\t\tret = ret.reverse();\n\t\t}\n\n\t\treturn this.pushStack( ret );\n\t};\n});\n\njQuery.extend({\n\tfilter: function( expr, elems, not ) {\n\t\tif ( not ) {\n\t\t\texpr = \":not(\" + expr + \")\";\n\t\t}\n\n\t\treturn elems.length === 1 ?\n\t\t\tjQuery.find.matchesSelector(elems[0], expr) ? [ elems[0] ] : [] :\n\t\t\tjQuery.find.matches(expr, elems);\n\t},\n\n\tdir: function( elem, dir, until ) {\n\t\tvar matched = [],\n\t\t\tcur = elem[ dir ];\n\n\t\twhile ( cur && cur.nodeType !== 9 && (until === undefined || cur.nodeType !== 1 || !jQuery( cur ).is( until )) ) {\n\t\t\tif ( cur.nodeType === 1 ) {\n\t\t\t\tmatched.push( cur );\n\t\t\t}\n\t\t\tcur = cur[dir];\n\t\t}\n\t\treturn matched;\n\t},\n\n\tsibling: function( n, elem ) {\n\t\tvar r = [];\n\n\t\tfor ( ; n; n = n.nextSibling ) {\n\t\t\tif ( n.nodeType === 1 && n !== elem ) {\n\t\t\t\tr.push( n );\n\t\t\t}\n\t\t}\n\n\t\treturn r;\n\t}\n});\n\n// Implement the identical functionality for filter and not\nfunction winnow( elements, qualifier, keep ) {\n\n\t// Can't pass null or undefined to indexOf in Firefox 4\n\t// Set to 0 to skip string check\n\tqualifier = qualifier || 0;\n\n\tif ( jQuery.isFunction( qualifier ) ) {\n\t\treturn jQuery.grep(elements, function( elem, i ) {\n\t\t\tvar retVal = !!qualifier.call( elem, i, elem );\n\t\t\treturn retVal === keep;\n\t\t});\n\n\t} else if ( qualifier.nodeType ) {\n\t\treturn jQuery.grep(elements, function( elem ) {\n\t\t\treturn ( elem === qualifier ) === keep;\n\t\t});\n\n\t} else if ( typeof qualifier === \"string\" ) {\n\t\tvar filtered = jQuery.grep(elements, function( elem ) {\n\t\t\treturn elem.nodeType === 1;\n\t\t});\n\n\t\tif ( isSimple.test( qualifier ) ) {\n\t\t\treturn jQuery.filter(qualifier, filtered, !keep);\n\t\t} else {\n\t\t\tqualifier = jQuery.filter( qualifier, filtered );\n\t\t}\n\t}\n\n\treturn jQuery.grep(elements, function( elem ) {\n\t\treturn ( jQuery.inArray( elem, qualifier ) >= 0 ) === keep;\n\t});\n}\nfunction createSafeFragment( document ) {\n\tvar list = nodeNames.split( \"|\" ),\n\t\tsafeFrag = document.createDocumentFragment();\n\n\tif ( safeFrag.createElement ) {\n\t\twhile ( list.length ) {\n\t\t\tsafeFrag.createElement(\n\t\t\t\tlist.pop()\n\t\t\t);\n\t\t}\n\t}\n\treturn safeFrag;\n}\n\nvar nodeNames = \"abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|\" +\n\t\t\"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video\",\n\trinlinejQuery = / jQuery\\d+=\"(?:null|\\d+)\"/g,\n\trnoshimcache = new RegExp(\"<(?:\" + nodeNames + \")[\\\\s/>]\", \"i\"),\n\trleadingWhitespace = /^\\s+/,\n\trxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,\n\trtagName = /<([\\w:]+)/,\n\trtbody = /<tbody/i,\n\trhtml = /<|&#?\\w+;/,\n\trnoInnerhtml = /<(?:script|style|link)/i,\n\tmanipulation_rcheckableType = /^(?:checkbox|radio)$/i,\n\t// checked=\"checked\" or checked\n\trchecked = /checked\\s*(?:[^=]|=\\s*.checked.)/i,\n\trscriptType = /^$|\\/(?:java|ecma)script/i,\n\trscriptTypeMasked = /^true\\/(.*)/,\n\trcleanScript = /^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g,\n\n\t// We have to close these tags to support XHTML (#13200)\n\twrapMap = {\n\t\toption: [ 1, \"<select multiple='multiple'>\", \"</select>\" ],\n\t\tlegend: [ 1, \"<fieldset>\", \"</fieldset>\" ],\n\t\tarea: [ 1, \"<map>\", \"</map>\" ],\n\t\tparam: [ 1, \"<object>\", \"</object>\" ],\n\t\tthead: [ 1, \"<table>\", \"</table>\" ],\n\t\ttr: [ 2, \"<table><tbody>\", \"</tbody></table>\" ],\n\t\tcol: [ 2, \"<table><tbody></tbody><colgroup>\", \"</colgroup></table>\" ],\n\t\ttd: [ 3, \"<table><tbody><tr>\", \"</tr></tbody></table>\" ],\n\n\t\t// IE6-8 can't serialize link, script, style, or any html5 (NoScope) tags,\n\t\t// unless wrapped in a div with non-breaking characters in front of it.\n\t\t_default: jQuery.support.htmlSerialize ? [ 0, \"\", \"\" ] : [ 1, \"X<div>\", \"</div>\"  ]\n\t},\n\tsafeFragment = createSafeFragment( document ),\n\tfragmentDiv = safeFragment.appendChild( document.createElement(\"div\") );\n\nwrapMap.optgroup = wrapMap.option;\nwrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;\nwrapMap.th = wrapMap.td;\n\njQuery.fn.extend({\n\ttext: function( value ) {\n\t\treturn jQuery.access( this, function( value ) {\n\t\t\treturn value === undefined ?\n\t\t\t\tjQuery.text( this ) :\n\t\t\t\tthis.empty().append( ( this[0] && this[0].ownerDocument || document ).createTextNode( value ) );\n\t\t}, null, value, arguments.length );\n\t},\n\n\twrapAll: function( html ) {\n\t\tif ( jQuery.isFunction( html ) ) {\n\t\t\treturn this.each(function(i) {\n\t\t\t\tjQuery(this).wrapAll( html.call(this, i) );\n\t\t\t});\n\t\t}\n\n\t\tif ( this[0] ) {\n\t\t\t// The elements to wrap the target around\n\t\t\tvar wrap = jQuery( html, this[0].ownerDocument ).eq(0).clone(true);\n\n\t\t\tif ( this[0].parentNode ) {\n\t\t\t\twrap.insertBefore( this[0] );\n\t\t\t}\n\n\t\t\twrap.map(function() {\n\t\t\t\tvar elem = this;\n\n\t\t\t\twhile ( elem.firstChild && elem.firstChild.nodeType === 1 ) {\n\t\t\t\t\telem = elem.firstChild;\n\t\t\t\t}\n\n\t\t\t\treturn elem;\n\t\t\t}).append( this );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\twrapInner: function( html ) {\n\t\tif ( jQuery.isFunction( html ) ) {\n\t\t\treturn this.each(function(i) {\n\t\t\t\tjQuery(this).wrapInner( html.call(this, i) );\n\t\t\t});\n\t\t}\n\n\t\treturn this.each(function() {\n\t\t\tvar self = jQuery( this ),\n\t\t\t\tcontents = self.contents();\n\n\t\t\tif ( contents.length ) {\n\t\t\t\tcontents.wrapAll( html );\n\n\t\t\t} else {\n\t\t\t\tself.append( html );\n\t\t\t}\n\t\t});\n\t},\n\n\twrap: function( html ) {\n\t\tvar isFunction = jQuery.isFunction( html );\n\n\t\treturn this.each(function(i) {\n\t\t\tjQuery( this ).wrapAll( isFunction ? html.call(this, i) : html );\n\t\t});\n\t},\n\n\tunwrap: function() {\n\t\treturn this.parent().each(function() {\n\t\t\tif ( !jQuery.nodeName( this, \"body\" ) ) {\n\t\t\t\tjQuery( this ).replaceWith( this.childNodes );\n\t\t\t}\n\t\t}).end();\n\t},\n\n\tappend: function() {\n\t\treturn this.domManip(arguments, true, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tthis.appendChild( elem );\n\t\t\t}\n\t\t});\n\t},\n\n\tprepend: function() {\n\t\treturn this.domManip(arguments, true, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tthis.insertBefore( elem, this.firstChild );\n\t\t\t}\n\t\t});\n\t},\n\n\tbefore: function() {\n\t\treturn this.domManip( arguments, false, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this );\n\t\t\t}\n\t\t});\n\t},\n\n\tafter: function() {\n\t\treturn this.domManip( arguments, false, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this.nextSibling );\n\t\t\t}\n\t\t});\n\t},\n\n\t// keepData is for internal use only--do not document\n\tremove: function( selector, keepData ) {\n\t\tvar elem,\n\t\t\ti = 0;\n\n\t\tfor ( ; (elem = this[i]) != null; i++ ) {\n\t\t\tif ( !selector || jQuery.filter( selector, [ elem ] ).length > 0 ) {\n\t\t\t\tif ( !keepData && elem.nodeType === 1 ) {\n\t\t\t\t\tjQuery.cleanData( getAll( elem ) );\n\t\t\t\t}\n\n\t\t\t\tif ( elem.parentNode ) {\n\t\t\t\t\tif ( keepData && jQuery.contains( elem.ownerDocument, elem ) ) {\n\t\t\t\t\t\tsetGlobalEval( getAll( elem, \"script\" ) );\n\t\t\t\t\t}\n\t\t\t\t\telem.parentNode.removeChild( elem );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tempty: function() {\n\t\tvar elem,\n\t\t\ti = 0;\n\n\t\tfor ( ; (elem = this[i]) != null; i++ ) {\n\t\t\t// Remove element nodes and prevent memory leaks\n\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\t\t\t}\n\n\t\t\t// Remove any remaining nodes\n\t\t\twhile ( elem.firstChild ) {\n\t\t\t\telem.removeChild( elem.firstChild );\n\t\t\t}\n\n\t\t\t// If this is a select, ensure that it displays empty (#12336)\n\t\t\t// Support: IE<9\n\t\t\tif ( elem.options && jQuery.nodeName( elem, \"select\" ) ) {\n\t\t\t\telem.options.length = 0;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tclone: function( dataAndEvents, deepDataAndEvents ) {\n\t\tdataAndEvents = dataAndEvents == null ? false : dataAndEvents;\n\t\tdeepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;\n\n\t\treturn this.map( function () {\n\t\t\treturn jQuery.clone( this, dataAndEvents, deepDataAndEvents );\n\t\t});\n\t},\n\n\thtml: function( value ) {\n\t\treturn jQuery.access( this, function( value ) {\n\t\t\tvar elem = this[0] || {},\n\t\t\t\ti = 0,\n\t\t\t\tl = this.length;\n\n\t\t\tif ( value === undefined ) {\n\t\t\t\treturn elem.nodeType === 1 ?\n\t\t\t\t\telem.innerHTML.replace( rinlinejQuery, \"\" ) :\n\t\t\t\t\tundefined;\n\t\t\t}\n\n\t\t\t// See if we can take a shortcut and just use innerHTML\n\t\t\tif ( typeof value === \"string\" && !rnoInnerhtml.test( value ) &&\n\t\t\t\t( jQuery.support.htmlSerialize || !rnoshimcache.test( value )  ) &&\n\t\t\t\t( jQuery.support.leadingWhitespace || !rleadingWhitespace.test( value ) ) &&\n\t\t\t\t!wrapMap[ ( rtagName.exec( value ) || [\"\", \"\"] )[1].toLowerCase() ] ) {\n\n\t\t\t\tvalue = value.replace( rxhtmlTag, \"<$1></$2>\" );\n\n\t\t\t\ttry {\n\t\t\t\t\tfor (; i < l; i++ ) {\n\t\t\t\t\t\t// Remove element nodes and prevent memory leaks\n\t\t\t\t\t\telem = this[i] || {};\n\t\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\t\t\t\t\t\t\telem.innerHTML = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\telem = 0;\n\n\t\t\t\t// If using innerHTML throws an exception, use the fallback method\n\t\t\t\t} catch(e) {}\n\t\t\t}\n\n\t\t\tif ( elem ) {\n\t\t\t\tthis.empty().append( value );\n\t\t\t}\n\t\t}, null, value, arguments.length );\n\t},\n\n\treplaceWith: function( value ) {\n\t\tvar isFunc = jQuery.isFunction( value );\n\n\t\t// Make sure that the elements are removed from the DOM before they are inserted\n\t\t// this can help fix replacing a parent with child elements\n\t\tif ( !isFunc && typeof value !== \"string\" ) {\n\t\t\tvalue = jQuery( value ).not( this ).detach();\n\t\t}\n\n\t\treturn this.domManip( [ value ], true, function( elem ) {\n\t\t\tvar next = this.nextSibling,\n\t\t\t\tparent = this.parentNode;\n\n\t\t\tif ( parent ) {\n\t\t\t\tjQuery( this ).remove();\n\t\t\t\tparent.insertBefore( elem, next );\n\t\t\t}\n\t\t});\n\t},\n\n\tdetach: function( selector ) {\n\t\treturn this.remove( selector, true );\n\t},\n\n\tdomManip: function( args, table, callback ) {\n\n\t\t// Flatten any nested arrays\n\t\targs = core_concat.apply( [], args );\n\n\t\tvar first, node, hasScripts,\n\t\t\tscripts, doc, fragment,\n\t\t\ti = 0,\n\t\t\tl = this.length,\n\t\t\tset = this,\n\t\t\tiNoClone = l - 1,\n\t\t\tvalue = args[0],\n\t\t\tisFunction = jQuery.isFunction( value );\n\n\t\t// We can't cloneNode fragments that contain checked, in WebKit\n\t\tif ( isFunction || !( l <= 1 || typeof value !== \"string\" || jQuery.support.checkClone || !rchecked.test( value ) ) ) {\n\t\t\treturn this.each(function( index ) {\n\t\t\t\tvar self = set.eq( index );\n\t\t\t\tif ( isFunction ) {\n\t\t\t\t\targs[0] = value.call( this, index, table ? self.html() : undefined );\n\t\t\t\t}\n\t\t\t\tself.domManip( args, table, callback );\n\t\t\t});\n\t\t}\n\n\t\tif ( l ) {\n\t\t\tfragment = jQuery.buildFragment( args, this[ 0 ].ownerDocument, false, this );\n\t\t\tfirst = fragment.firstChild;\n\n\t\t\tif ( fragment.childNodes.length === 1 ) {\n\t\t\t\tfragment = first;\n\t\t\t}\n\n\t\t\tif ( first ) {\n\t\t\t\ttable = table && jQuery.nodeName( first, \"tr\" );\n\t\t\t\tscripts = jQuery.map( getAll( fragment, \"script\" ), disableScript );\n\t\t\t\thasScripts = scripts.length;\n\n\t\t\t\t// Use the original fragment for the last item instead of the first because it can end up\n\t\t\t\t// being emptied incorrectly in certain situations (#8070).\n\t\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\t\tnode = fragment;\n\n\t\t\t\t\tif ( i !== iNoClone ) {\n\t\t\t\t\t\tnode = jQuery.clone( node, true, true );\n\n\t\t\t\t\t\t// Keep references to cloned scripts for later restoration\n\t\t\t\t\t\tif ( hasScripts ) {\n\t\t\t\t\t\t\tjQuery.merge( scripts, getAll( node, \"script\" ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback.call(\n\t\t\t\t\t\ttable && jQuery.nodeName( this[i], \"table\" ) ?\n\t\t\t\t\t\t\tfindOrAppend( this[i], \"tbody\" ) :\n\t\t\t\t\t\t\tthis[i],\n\t\t\t\t\t\tnode,\n\t\t\t\t\t\ti\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif ( hasScripts ) {\n\t\t\t\t\tdoc = scripts[ scripts.length - 1 ].ownerDocument;\n\n\t\t\t\t\t// Reenable scripts\n\t\t\t\t\tjQuery.map( scripts, restoreScript );\n\n\t\t\t\t\t// Evaluate executable scripts on first document insertion\n\t\t\t\t\tfor ( i = 0; i < hasScripts; i++ ) {\n\t\t\t\t\t\tnode = scripts[ i ];\n\t\t\t\t\t\tif ( rscriptType.test( node.type || \"\" ) &&\n\t\t\t\t\t\t\t!jQuery._data( node, \"globalEval\" ) && jQuery.contains( doc, node ) ) {\n\n\t\t\t\t\t\t\tif ( node.src ) {\n\t\t\t\t\t\t\t\t// Hope ajax is available...\n\t\t\t\t\t\t\t\tjQuery.ajax({\n\t\t\t\t\t\t\t\t\turl: node.src,\n\t\t\t\t\t\t\t\t\ttype: \"GET\",\n\t\t\t\t\t\t\t\t\tdataType: \"script\",\n\t\t\t\t\t\t\t\t\tasync: false,\n\t\t\t\t\t\t\t\t\tglobal: false,\n\t\t\t\t\t\t\t\t\t\"throws\": true\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tjQuery.globalEval( ( node.text || node.textContent || node.innerHTML || \"\" ).replace( rcleanScript, \"\" ) );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Fix #11809: Avoid leaking memory\n\t\t\t\tfragment = first = null;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n});\n\nfunction findOrAppend( elem, tag ) {\n\treturn elem.getElementsByTagName( tag )[0] || elem.appendChild( elem.ownerDocument.createElement( tag ) );\n}\n\n// Replace/restore the type attribute of script elements for safe DOM manipulation\nfunction disableScript( elem ) {\n\tvar attr = elem.getAttributeNode(\"type\");\n\telem.type = ( attr && attr.specified ) + \"/\" + elem.type;\n\treturn elem;\n}\nfunction restoreScript( elem ) {\n\tvar match = rscriptTypeMasked.exec( elem.type );\n\tif ( match ) {\n\t\telem.type = match[1];\n\t} else {\n\t\telem.removeAttribute(\"type\");\n\t}\n\treturn elem;\n}\n\n// Mark scripts as having already been evaluated\nfunction setGlobalEval( elems, refElements ) {\n\tvar elem,\n\t\ti = 0;\n\tfor ( ; (elem = elems[i]) != null; i++ ) {\n\t\tjQuery._data( elem, \"globalEval\", !refElements || jQuery._data( refElements[i], \"globalEval\" ) );\n\t}\n}\n\nfunction cloneCopyEvent( src, dest ) {\n\n\tif ( dest.nodeType !== 1 || !jQuery.hasData( src ) ) {\n\t\treturn;\n\t}\n\n\tvar type, i, l,\n\t\toldData = jQuery._data( src ),\n\t\tcurData = jQuery._data( dest, oldData ),\n\t\tevents = oldData.events;\n\n\tif ( events ) {\n\t\tdelete curData.handle;\n\t\tcurData.events = {};\n\n\t\tfor ( type in events ) {\n\t\t\tfor ( i = 0, l = events[ type ].length; i < l; i++ ) {\n\t\t\t\tjQuery.event.add( dest, type, events[ type ][ i ] );\n\t\t\t}\n\t\t}\n\t}\n\n\t// make the cloned public data object a copy from the original\n\tif ( curData.data ) {\n\t\tcurData.data = jQuery.extend( {}, curData.data );\n\t}\n}\n\nfunction fixCloneNodeIssues( src, dest ) {\n\tvar nodeName, e, data;\n\n\t// We do not need to do anything for non-Elements\n\tif ( dest.nodeType !== 1 ) {\n\t\treturn;\n\t}\n\n\tnodeName = dest.nodeName.toLowerCase();\n\n\t// IE6-8 copies events bound via attachEvent when using cloneNode.\n\tif ( !jQuery.support.noCloneEvent && dest[ jQuery.expando ] ) {\n\t\tdata = jQuery._data( dest );\n\n\t\tfor ( e in data.events ) {\n\t\t\tjQuery.removeEvent( dest, e, data.handle );\n\t\t}\n\n\t\t// Event data gets referenced instead of copied if the expando gets copied too\n\t\tdest.removeAttribute( jQuery.expando );\n\t}\n\n\t// IE blanks contents when cloning scripts, and tries to evaluate newly-set text\n\tif ( nodeName === \"script\" && dest.text !== src.text ) {\n\t\tdisableScript( dest ).text = src.text;\n\t\trestoreScript( dest );\n\n\t// IE6-10 improperly clones children of object elements using classid.\n\t// IE10 throws NoModificationAllowedError if parent is null, #12132.\n\t} else if ( nodeName === \"object\" ) {\n\t\tif ( dest.parentNode ) {\n\t\t\tdest.outerHTML = src.outerHTML;\n\t\t}\n\n\t\t// This path appears unavoidable for IE9. When cloning an object\n\t\t// element in IE9, the outerHTML strategy above is not sufficient.\n\t\t// If the src has innerHTML and the destination does not,\n\t\t// copy the src.innerHTML into the dest.innerHTML. #10324\n\t\tif ( jQuery.support.html5Clone && ( src.innerHTML && !jQuery.trim(dest.innerHTML) ) ) {\n\t\t\tdest.innerHTML = src.innerHTML;\n\t\t}\n\n\t} else if ( nodeName === \"input\" && manipulation_rcheckableType.test( src.type ) ) {\n\t\t// IE6-8 fails to persist the checked state of a cloned checkbox\n\t\t// or radio button. Worse, IE6-7 fail to give the cloned element\n\t\t// a checked appearance if the defaultChecked value isn't also set\n\n\t\tdest.defaultChecked = dest.checked = src.checked;\n\n\t\t// IE6-7 get confused and end up setting the value of a cloned\n\t\t// checkbox/radio button to an empty string instead of \"on\"\n\t\tif ( dest.value !== src.value ) {\n\t\t\tdest.value = src.value;\n\t\t}\n\n\t// IE6-8 fails to return the selected option to the default selected\n\t// state when cloning options\n\t} else if ( nodeName === \"option\" ) {\n\t\tdest.defaultSelected = dest.selected = src.defaultSelected;\n\n\t// IE6-8 fails to set the defaultValue to the correct value when\n\t// cloning other types of input fields\n\t} else if ( nodeName === \"input\" || nodeName === \"textarea\" ) {\n\t\tdest.defaultValue = src.defaultValue;\n\t}\n}\n\njQuery.each({\n\tappendTo: \"append\",\n\tprependTo: \"prepend\",\n\tinsertBefore: \"before\",\n\tinsertAfter: \"after\",\n\treplaceAll: \"replaceWith\"\n}, function( name, original ) {\n\tjQuery.fn[ name ] = function( selector ) {\n\t\tvar elems,\n\t\t\ti = 0,\n\t\t\tret = [],\n\t\t\tinsert = jQuery( selector ),\n\t\t\tlast = insert.length - 1;\n\n\t\tfor ( ; i <= last; i++ ) {\n\t\t\telems = i === last ? this : this.clone(true);\n\t\t\tjQuery( insert[i] )[ original ]( elems );\n\n\t\t\t// Modern browsers can apply jQuery collections as arrays, but oldIE needs a .get()\n\t\t\tcore_push.apply( ret, elems.get() );\n\t\t}\n\n\t\treturn this.pushStack( ret );\n\t};\n});\n\nfunction getAll( context, tag ) {\n\tvar elems, elem,\n\t\ti = 0,\n\t\tfound = typeof context.getElementsByTagName !== core_strundefined ? context.getElementsByTagName( tag || \"*\" ) :\n\t\t\ttypeof context.querySelectorAll !== core_strundefined ? context.querySelectorAll( tag || \"*\" ) :\n\t\t\tundefined;\n\n\tif ( !found ) {\n\t\tfor ( found = [], elems = context.childNodes || context; (elem = elems[i]) != null; i++ ) {\n\t\t\tif ( !tag || jQuery.nodeName( elem, tag ) ) {\n\t\t\t\tfound.push( elem );\n\t\t\t} else {\n\t\t\t\tjQuery.merge( found, getAll( elem, tag ) );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn tag === undefined || tag && jQuery.nodeName( context, tag ) ?\n\t\tjQuery.merge( [ context ], found ) :\n\t\tfound;\n}\n\n// Used in buildFragment, fixes the defaultChecked property\nfunction fixDefaultChecked( elem ) {\n\tif ( manipulation_rcheckableType.test( elem.type ) ) {\n\t\telem.defaultChecked = elem.checked;\n\t}\n}\n\njQuery.extend({\n\tclone: function( elem, dataAndEvents, deepDataAndEvents ) {\n\t\tvar destElements, node, clone, i, srcElements,\n\t\t\tinPage = jQuery.contains( elem.ownerDocument, elem );\n\n\t\tif ( jQuery.support.html5Clone || jQuery.isXMLDoc(elem) || !rnoshimcache.test( \"<\" + elem.nodeName + \">\" ) ) {\n\t\t\tclone = elem.cloneNode( true );\n\n\t\t// IE<=8 does not properly clone detached, unknown element nodes\n\t\t} else {\n\t\t\tfragmentDiv.innerHTML = elem.outerHTML;\n\t\t\tfragmentDiv.removeChild( clone = fragmentDiv.firstChild );\n\t\t}\n\n\t\tif ( (!jQuery.support.noCloneEvent || !jQuery.support.noCloneChecked) &&\n\t\t\t\t(elem.nodeType === 1 || elem.nodeType === 11) && !jQuery.isXMLDoc(elem) ) {\n\n\t\t\t// We eschew Sizzle here for performance reasons: http://jsperf.com/getall-vs-sizzle/2\n\t\t\tdestElements = getAll( clone );\n\t\t\tsrcElements = getAll( elem );\n\n\t\t\t// Fix all IE cloning issues\n\t\t\tfor ( i = 0; (node = srcElements[i]) != null; ++i ) {\n\t\t\t\t// Ensure that the destination node is not null; Fixes #9587\n\t\t\t\tif ( destElements[i] ) {\n\t\t\t\t\tfixCloneNodeIssues( node, destElements[i] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Copy the events from the original to the clone\n\t\tif ( dataAndEvents ) {\n\t\t\tif ( deepDataAndEvents ) {\n\t\t\t\tsrcElements = srcElements || getAll( elem );\n\t\t\t\tdestElements = destElements || getAll( clone );\n\n\t\t\t\tfor ( i = 0; (node = srcElements[i]) != null; i++ ) {\n\t\t\t\t\tcloneCopyEvent( node, destElements[i] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcloneCopyEvent( elem, clone );\n\t\t\t}\n\t\t}\n\n\t\t// Preserve script evaluation history\n\t\tdestElements = getAll( clone, \"script\" );\n\t\tif ( destElements.length > 0 ) {\n\t\t\tsetGlobalEval( destElements, !inPage && getAll( elem, \"script\" ) );\n\t\t}\n\n\t\tdestElements = srcElements = node = null;\n\n\t\t// Return the cloned set\n\t\treturn clone;\n\t},\n\n\tbuildFragment: function( elems, context, scripts, selection ) {\n\t\tvar j, elem, contains,\n\t\t\ttmp, tag, tbody, wrap,\n\t\t\tl = elems.length,\n\n\t\t\t// Ensure a safe fragment\n\t\t\tsafe = createSafeFragment( context ),\n\n\t\t\tnodes = [],\n\t\t\ti = 0;\n\n\t\tfor ( ; i < l; i++ ) {\n\t\t\telem = elems[ i ];\n\n\t\t\tif ( elem || elem === 0 ) {\n\n\t\t\t\t// Add nodes directly\n\t\t\t\tif ( jQuery.type( elem ) === \"object\" ) {\n\t\t\t\t\tjQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );\n\n\t\t\t\t// Convert non-html into a text node\n\t\t\t\t} else if ( !rhtml.test( elem ) ) {\n\t\t\t\t\tnodes.push( context.createTextNode( elem ) );\n\n\t\t\t\t// Convert html into DOM nodes\n\t\t\t\t} else {\n\t\t\t\t\ttmp = tmp || safe.appendChild( context.createElement(\"div\") );\n\n\t\t\t\t\t// Deserialize a standard representation\n\t\t\t\t\ttag = ( rtagName.exec( elem ) || [\"\", \"\"] )[1].toLowerCase();\n\t\t\t\t\twrap = wrapMap[ tag ] || wrapMap._default;\n\n\t\t\t\t\ttmp.innerHTML = wrap[1] + elem.replace( rxhtmlTag, \"<$1></$2>\" ) + wrap[2];\n\n\t\t\t\t\t// Descend through wrappers to the right content\n\t\t\t\t\tj = wrap[0];\n\t\t\t\t\twhile ( j-- ) {\n\t\t\t\t\t\ttmp = tmp.lastChild;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Manually add leading whitespace removed by IE\n\t\t\t\t\tif ( !jQuery.support.leadingWhitespace && rleadingWhitespace.test( elem ) ) {\n\t\t\t\t\t\tnodes.push( context.createTextNode( rleadingWhitespace.exec( elem )[0] ) );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Remove IE's autoinserted <tbody> from table fragments\n\t\t\t\t\tif ( !jQuery.support.tbody ) {\n\n\t\t\t\t\t\t// String was a <table>, *may* have spurious <tbody>\n\t\t\t\t\t\telem = tag === \"table\" && !rtbody.test( elem ) ?\n\t\t\t\t\t\t\ttmp.firstChild :\n\n\t\t\t\t\t\t\t// String was a bare <thead> or <tfoot>\n\t\t\t\t\t\t\twrap[1] === \"<table>\" && !rtbody.test( elem ) ?\n\t\t\t\t\t\t\t\ttmp :\n\t\t\t\t\t\t\t\t0;\n\n\t\t\t\t\t\tj = elem && elem.childNodes.length;\n\t\t\t\t\t\twhile ( j-- ) {\n\t\t\t\t\t\t\tif ( jQuery.nodeName( (tbody = elem.childNodes[j]), \"tbody\" ) && !tbody.childNodes.length ) {\n\t\t\t\t\t\t\t\telem.removeChild( tbody );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tjQuery.merge( nodes, tmp.childNodes );\n\n\t\t\t\t\t// Fix #12392 for WebKit and IE > 9\n\t\t\t\t\ttmp.textContent = \"\";\n\n\t\t\t\t\t// Fix #12392 for oldIE\n\t\t\t\t\twhile ( tmp.firstChild ) {\n\t\t\t\t\t\ttmp.removeChild( tmp.firstChild );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Remember the top-level container for proper cleanup\n\t\t\t\t\ttmp = safe.lastChild;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Fix #11356: Clear elements from fragment\n\t\tif ( tmp ) {\n\t\t\tsafe.removeChild( tmp );\n\t\t}\n\n\t\t// Reset defaultChecked for any radios and checkboxes\n\t\t// about to be appended to the DOM in IE 6/7 (#8060)\n\t\tif ( !jQuery.support.appendChecked ) {\n\t\t\tjQuery.grep( getAll( nodes, \"input\" ), fixDefaultChecked );\n\t\t}\n\n\t\ti = 0;\n\t\twhile ( (elem = nodes[ i++ ]) ) {\n\n\t\t\t// #4087 - If origin and destination elements are the same, and this is\n\t\t\t// that element, do not do anything\n\t\t\tif ( selection && jQuery.inArray( elem, selection ) !== -1 ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tcontains = jQuery.contains( elem.ownerDocument, elem );\n\n\t\t\t// Append to fragment\n\t\t\ttmp = getAll( safe.appendChild( elem ), \"script\" );\n\n\t\t\t// Preserve script evaluation history\n\t\t\tif ( contains ) {\n\t\t\t\tsetGlobalEval( tmp );\n\t\t\t}\n\n\t\t\t// Capture executables\n\t\t\tif ( scripts ) {\n\t\t\t\tj = 0;\n\t\t\t\twhile ( (elem = tmp[ j++ ]) ) {\n\t\t\t\t\tif ( rscriptType.test( elem.type || \"\" ) ) {\n\t\t\t\t\t\tscripts.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\ttmp = null;\n\n\t\treturn safe;\n\t},\n\n\tcleanData: function( elems, /* internal */ acceptData ) {\n\t\tvar elem, type, id, data,\n\t\t\ti = 0,\n\t\t\tinternalKey = jQuery.expando,\n\t\t\tcache = jQuery.cache,\n\t\t\tdeleteExpando = jQuery.support.deleteExpando,\n\t\t\tspecial = jQuery.event.special;\n\n\t\tfor ( ; (elem = elems[i]) != null; i++ ) {\n\n\t\t\tif ( acceptData || jQuery.acceptData( elem ) ) {\n\n\t\t\t\tid = elem[ internalKey ];\n\t\t\t\tdata = id && cache[ id ];\n\n\t\t\t\tif ( data ) {\n\t\t\t\t\tif ( data.events ) {\n\t\t\t\t\t\tfor ( type in data.events ) {\n\t\t\t\t\t\t\tif ( special[ type ] ) {\n\t\t\t\t\t\t\t\tjQuery.event.remove( elem, type );\n\n\t\t\t\t\t\t\t// This is a shortcut to avoid jQuery.event.remove's overhead\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tjQuery.removeEvent( elem, type, data.handle );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Remove cache only if it was not already removed by jQuery.event.remove\n\t\t\t\t\tif ( cache[ id ] ) {\n\n\t\t\t\t\t\tdelete cache[ id ];\n\n\t\t\t\t\t\t// IE does not allow us to delete expando properties from nodes,\n\t\t\t\t\t\t// nor does it have a removeAttribute function on Document nodes;\n\t\t\t\t\t\t// we must handle all of these cases\n\t\t\t\t\t\tif ( deleteExpando ) {\n\t\t\t\t\t\t\tdelete elem[ internalKey ];\n\n\t\t\t\t\t\t} else if ( typeof elem.removeAttribute !== core_strundefined ) {\n\t\t\t\t\t\t\telem.removeAttribute( internalKey );\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\telem[ internalKey ] = null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcore_deletedIds.push( id );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\nvar iframe, getStyles, curCSS,\n\tralpha = /alpha\\([^)]*\\)/i,\n\tropacity = /opacity\\s*=\\s*([^)]*)/,\n\trposition = /^(top|right|bottom|left)$/,\n\t// swappable if display is none or starts with table except \"table\", \"table-cell\", or \"table-caption\"\n\t// see here for display values: https://developer.mozilla.org/en-US/docs/CSS/display\n\trdisplayswap = /^(none|table(?!-c[ea]).+)/,\n\trmargin = /^margin/,\n\trnumsplit = new RegExp( \"^(\" + core_pnum + \")(.*)$\", \"i\" ),\n\trnumnonpx = new RegExp( \"^(\" + core_pnum + \")(?!px)[a-z%]+$\", \"i\" ),\n\trrelNum = new RegExp( \"^([+-])=(\" + core_pnum + \")\", \"i\" ),\n\telemdisplay = { BODY: \"block\" },\n\n\tcssShow = { position: \"absolute\", visibility: \"hidden\", display: \"block\" },\n\tcssNormalTransform = {\n\t\tletterSpacing: 0,\n\t\tfontWeight: 400\n\t},\n\n\tcssExpand = [ \"Top\", \"Right\", \"Bottom\", \"Left\" ],\n\tcssPrefixes = [ \"Webkit\", \"O\", \"Moz\", \"ms\" ];\n\n// return a css property mapped to a potentially vendor prefixed property\nfunction vendorPropName( style, name ) {\n\n\t// shortcut for names that are not vendor prefixed\n\tif ( name in style ) {\n\t\treturn name;\n\t}\n\n\t// check for vendor prefixed names\n\tvar capName = name.charAt(0).toUpperCase() + name.slice(1),\n\t\torigName = name,\n\t\ti = cssPrefixes.length;\n\n\twhile ( i-- ) {\n\t\tname = cssPrefixes[ i ] + capName;\n\t\tif ( name in style ) {\n\t\t\treturn name;\n\t\t}\n\t}\n\n\treturn origName;\n}\n\nfunction isHidden( elem, el ) {\n\t// isHidden might be called from jQuery#filter function;\n\t// in that case, element will be second argument\n\telem = el || elem;\n\treturn jQuery.css( elem, \"display\" ) === \"none\" || !jQuery.contains( elem.ownerDocument, elem );\n}\n\nfunction showHide( elements, show ) {\n\tvar display, elem, hidden,\n\t\tvalues = [],\n\t\tindex = 0,\n\t\tlength = elements.length;\n\n\tfor ( ; index < length; index++ ) {\n\t\telem = elements[ index ];\n\t\tif ( !elem.style ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tvalues[ index ] = jQuery._data( elem, \"olddisplay\" );\n\t\tdisplay = elem.style.display;\n\t\tif ( show ) {\n\t\t\t// Reset the inline display of this element to learn if it is\n\t\t\t// being hidden by cascaded rules or not\n\t\t\tif ( !values[ index ] && display === \"none\" ) {\n\t\t\t\telem.style.display = \"\";\n\t\t\t}\n\n\t\t\t// Set elements which have been overridden with display: none\n\t\t\t// in a stylesheet to whatever the default browser style is\n\t\t\t// for such an element\n\t\t\tif ( elem.style.display === \"\" && isHidden( elem ) ) {\n\t\t\t\tvalues[ index ] = jQuery._data( elem, \"olddisplay\", css_defaultDisplay(elem.nodeName) );\n\t\t\t}\n\t\t} else {\n\n\t\t\tif ( !values[ index ] ) {\n\t\t\t\thidden = isHidden( elem );\n\n\t\t\t\tif ( display && display !== \"none\" || !hidden ) {\n\t\t\t\t\tjQuery._data( elem, \"olddisplay\", hidden ? display : jQuery.css( elem, \"display\" ) );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Set the display of most of the elements in a second loop\n\t// to avoid the constant reflow\n\tfor ( index = 0; index < length; index++ ) {\n\t\telem = elements[ index ];\n\t\tif ( !elem.style ) {\n\t\t\tcontinue;\n\t\t}\n\t\tif ( !show || elem.style.display === \"none\" || elem.style.display === \"\" ) {\n\t\t\telem.style.display = show ? values[ index ] || \"\" : \"none\";\n\t\t}\n\t}\n\n\treturn elements;\n}\n\njQuery.fn.extend({\n\tcss: function( name, value ) {\n\t\treturn jQuery.access( this, function( elem, name, value ) {\n\t\t\tvar len, styles,\n\t\t\t\tmap = {},\n\t\t\t\ti = 0;\n\n\t\t\tif ( jQuery.isArray( name ) ) {\n\t\t\t\tstyles = getStyles( elem );\n\t\t\t\tlen = name.length;\n\n\t\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\t\tmap[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );\n\t\t\t\t}\n\n\t\t\t\treturn map;\n\t\t\t}\n\n\t\t\treturn value !== undefined ?\n\t\t\t\tjQuery.style( elem, name, value ) :\n\t\t\t\tjQuery.css( elem, name );\n\t\t}, name, value, arguments.length > 1 );\n\t},\n\tshow: function() {\n\t\treturn showHide( this, true );\n\t},\n\thide: function() {\n\t\treturn showHide( this );\n\t},\n\ttoggle: function( state ) {\n\t\tvar bool = typeof state === \"boolean\";\n\n\t\treturn this.each(function() {\n\t\t\tif ( bool ? state : isHidden( this ) ) {\n\t\t\t\tjQuery( this ).show();\n\t\t\t} else {\n\t\t\t\tjQuery( this ).hide();\n\t\t\t}\n\t\t});\n\t}\n});\n\njQuery.extend({\n\t// Add in style property hooks for overriding the default\n\t// behavior of getting and setting a style property\n\tcssHooks: {\n\t\topacity: {\n\t\t\tget: function( elem, computed ) {\n\t\t\t\tif ( computed ) {\n\t\t\t\t\t// We should always get a number back from opacity\n\t\t\t\t\tvar ret = curCSS( elem, \"opacity\" );\n\t\t\t\t\treturn ret === \"\" ? \"1\" : ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t// Exclude the following css properties to add px\n\tcssNumber: {\n\t\t\"columnCount\": true,\n\t\t\"fillOpacity\": true,\n\t\t\"fontWeight\": true,\n\t\t\"lineHeight\": true,\n\t\t\"opacity\": true,\n\t\t\"orphans\": true,\n\t\t\"widows\": true,\n\t\t\"zIndex\": true,\n\t\t\"zoom\": true\n\t},\n\n\t// Add in properties whose names you wish to fix before\n\t// setting or getting the value\n\tcssProps: {\n\t\t// normalize float css property\n\t\t\"float\": jQuery.support.cssFloat ? \"cssFloat\" : \"styleFloat\"\n\t},\n\n\t// Get and set the style property on a DOM Node\n\tstyle: function( elem, name, value, extra ) {\n\t\t// Don't set styles on text and comment nodes\n\t\tif ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Make sure that we're working with the right name\n\t\tvar ret, type, hooks,\n\t\t\torigName = jQuery.camelCase( name ),\n\t\t\tstyle = elem.style;\n\n\t\tname = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( style, origName ) );\n\n\t\t// gets hook for the prefixed version\n\t\t// followed by the unprefixed version\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// Check if we're setting a value\n\t\tif ( value !== undefined ) {\n\t\t\ttype = typeof value;\n\n\t\t\t// convert relative number strings (+= or -=) to relative numbers. #7345\n\t\t\tif ( type === \"string\" && (ret = rrelNum.exec( value )) ) {\n\t\t\t\tvalue = ( ret[1] + 1 ) * ret[2] + parseFloat( jQuery.css( elem, name ) );\n\t\t\t\t// Fixes bug #9237\n\t\t\t\ttype = \"number\";\n\t\t\t}\n\n\t\t\t// Make sure that NaN and null values aren't set. See: #7116\n\t\t\tif ( value == null || type === \"number\" && isNaN( value ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If a number was passed in, add 'px' to the (except for certain CSS properties)\n\t\t\tif ( type === \"number\" && !jQuery.cssNumber[ origName ] ) {\n\t\t\t\tvalue += \"px\";\n\t\t\t}\n\n\t\t\t// Fixes #8908, it can be done more correctly by specifing setters in cssHooks,\n\t\t\t// but it would mean to define eight (for every problematic property) identical functions\n\t\t\tif ( !jQuery.support.clearCloneStyle && value === \"\" && name.indexOf(\"background\") === 0 ) {\n\t\t\t\tstyle[ name ] = \"inherit\";\n\t\t\t}\n\n\t\t\t// If a hook was provided, use that value, otherwise just set the specified value\n\t\t\tif ( !hooks || !(\"set\" in hooks) || (value = hooks.set( elem, value, extra )) !== undefined ) {\n\n\t\t\t\t// Wrapped to prevent IE from throwing errors when 'invalid' values are provided\n\t\t\t\t// Fixes bug #5509\n\t\t\t\ttry {\n\t\t\t\t\tstyle[ name ] = value;\n\t\t\t\t} catch(e) {}\n\t\t\t}\n\n\t\t} else {\n\t\t\t// If a hook was provided get the non-computed value from there\n\t\t\tif ( hooks && \"get\" in hooks && (ret = hooks.get( elem, false, extra )) !== undefined ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\t// Otherwise just get the value from the style object\n\t\t\treturn style[ name ];\n\t\t}\n\t},\n\n\tcss: function( elem, name, extra, styles ) {\n\t\tvar num, val, hooks,\n\t\t\torigName = jQuery.camelCase( name );\n\n\t\t// Make sure that we're working with the right name\n\t\tname = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( elem.style, origName ) );\n\n\t\t// gets hook for the prefixed version\n\t\t// followed by the unprefixed version\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// If a hook was provided get the computed value from there\n\t\tif ( hooks && \"get\" in hooks ) {\n\t\t\tval = hooks.get( elem, true, extra );\n\t\t}\n\n\t\t// Otherwise, if a way to get the computed value exists, use that\n\t\tif ( val === undefined ) {\n\t\t\tval = curCSS( elem, name, styles );\n\t\t}\n\n\t\t//convert \"normal\" to computed value\n\t\tif ( val === \"normal\" && name in cssNormalTransform ) {\n\t\t\tval = cssNormalTransform[ name ];\n\t\t}\n\n\t\t// Return, converting to number if forced or a qualifier was provided and val looks numeric\n\t\tif ( extra === \"\" || extra ) {\n\t\t\tnum = parseFloat( val );\n\t\t\treturn extra === true || jQuery.isNumeric( num ) ? num || 0 : val;\n\t\t}\n\t\treturn val;\n\t},\n\n\t// A method for quickly swapping in/out CSS properties to get correct calculations\n\tswap: function( elem, options, callback, args ) {\n\t\tvar ret, name,\n\t\t\told = {};\n\n\t\t// Remember the old values, and insert the new ones\n\t\tfor ( name in options ) {\n\t\t\told[ name ] = elem.style[ name ];\n\t\t\telem.style[ name ] = options[ name ];\n\t\t}\n\n\t\tret = callback.apply( elem, args || [] );\n\n\t\t// Revert the old values\n\t\tfor ( name in options ) {\n\t\t\telem.style[ name ] = old[ name ];\n\t\t}\n\n\t\treturn ret;\n\t}\n});\n\n// NOTE: we've included the \"window\" in window.getComputedStyle\n// because jsdom on node.js will break without it.\nif ( window.getComputedStyle ) {\n\tgetStyles = function( elem ) {\n\t\treturn window.getComputedStyle( elem, null );\n\t};\n\n\tcurCSS = function( elem, name, _computed ) {\n\t\tvar width, minWidth, maxWidth,\n\t\t\tcomputed = _computed || getStyles( elem ),\n\n\t\t\t// getPropertyValue is only needed for .css('filter') in IE9, see #12537\n\t\t\tret = computed ? computed.getPropertyValue( name ) || computed[ name ] : undefined,\n\t\t\tstyle = elem.style;\n\n\t\tif ( computed ) {\n\n\t\t\tif ( ret === \"\" && !jQuery.contains( elem.ownerDocument, elem ) ) {\n\t\t\t\tret = jQuery.style( elem, name );\n\t\t\t}\n\n\t\t\t// A tribute to the \"awesome hack by Dean Edwards\"\n\t\t\t// Chrome < 17 and Safari 5.0 uses \"computed value\" instead of \"used value\" for margin-right\n\t\t\t// Safari 5.1.7 (at least) returns percentage for a larger set of values, but width seems to be reliably pixels\n\t\t\t// this is against the CSSOM draft spec: http://dev.w3.org/csswg/cssom/#resolved-values\n\t\t\tif ( rnumnonpx.test( ret ) && rmargin.test( name ) ) {\n\n\t\t\t\t// Remember the original values\n\t\t\t\twidth = style.width;\n\t\t\t\tminWidth = style.minWidth;\n\t\t\t\tmaxWidth = style.maxWidth;\n\n\t\t\t\t// Put in the new values to get a computed value out\n\t\t\t\tstyle.minWidth = style.maxWidth = style.width = ret;\n\t\t\t\tret = computed.width;\n\n\t\t\t\t// Revert the changed values\n\t\t\t\tstyle.width = width;\n\t\t\t\tstyle.minWidth = minWidth;\n\t\t\t\tstyle.maxWidth = maxWidth;\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t};\n} else if ( document.documentElement.currentStyle ) {\n\tgetStyles = function( elem ) {\n\t\treturn elem.currentStyle;\n\t};\n\n\tcurCSS = function( elem, name, _computed ) {\n\t\tvar left, rs, rsLeft,\n\t\t\tcomputed = _computed || getStyles( elem ),\n\t\t\tret = computed ? computed[ name ] : undefined,\n\t\t\tstyle = elem.style;\n\n\t\t// Avoid setting ret to empty string here\n\t\t// so we don't default to auto\n\t\tif ( ret == null && style && style[ name ] ) {\n\t\t\tret = style[ name ];\n\t\t}\n\n\t\t// From the awesome hack by Dean Edwards\n\t\t// http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291\n\n\t\t// If we're not dealing with a regular pixel number\n\t\t// but a number that has a weird ending, we need to convert it to pixels\n\t\t// but not position css attributes, as those are proportional to the parent element instead\n\t\t// and we can't measure the parent instead because it might trigger a \"stacking dolls\" problem\n\t\tif ( rnumnonpx.test( ret ) && !rposition.test( name ) ) {\n\n\t\t\t// Remember the original values\n\t\t\tleft = style.left;\n\t\t\trs = elem.runtimeStyle;\n\t\t\trsLeft = rs && rs.left;\n\n\t\t\t// Put in the new values to get a computed value out\n\t\t\tif ( rsLeft ) {\n\t\t\t\trs.left = elem.currentStyle.left;\n\t\t\t}\n\t\t\tstyle.left = name === \"fontSize\" ? \"1em\" : ret;\n\t\t\tret = style.pixelLeft + \"px\";\n\n\t\t\t// Revert the changed values\n\t\t\tstyle.left = left;\n\t\t\tif ( rsLeft ) {\n\t\t\t\trs.left = rsLeft;\n\t\t\t}\n\t\t}\n\n\t\treturn ret === \"\" ? \"auto\" : ret;\n\t};\n}\n\nfunction setPositiveNumber( elem, value, subtract ) {\n\tvar matches = rnumsplit.exec( value );\n\treturn matches ?\n\t\t// Guard against undefined \"subtract\", e.g., when used as in cssHooks\n\t\tMath.max( 0, matches[ 1 ] - ( subtract || 0 ) ) + ( matches[ 2 ] || \"px\" ) :\n\t\tvalue;\n}\n\nfunction augmentWidthOrHeight( elem, name, extra, isBorderBox, styles ) {\n\tvar i = extra === ( isBorderBox ? \"border\" : \"content\" ) ?\n\t\t// If we already have the right measurement, avoid augmentation\n\t\t4 :\n\t\t// Otherwise initialize for horizontal or vertical properties\n\t\tname === \"width\" ? 1 : 0,\n\n\t\tval = 0;\n\n\tfor ( ; i < 4; i += 2 ) {\n\t\t// both box models exclude margin, so add it if we want it\n\t\tif ( extra === \"margin\" ) {\n\t\t\tval += jQuery.css( elem, extra + cssExpand[ i ], true, styles );\n\t\t}\n\n\t\tif ( isBorderBox ) {\n\t\t\t// border-box includes padding, so remove it if we want content\n\t\t\tif ( extra === \"content\" ) {\n\t\t\t\tval -= jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\t\t\t}\n\n\t\t\t// at this point, extra isn't border nor margin, so remove border\n\t\t\tif ( extra !== \"margin\" ) {\n\t\t\t\tval -= jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\t\t} else {\n\t\t\t// at this point, extra isn't content, so add padding\n\t\t\tval += jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\n\t\t\t// at this point, extra isn't content nor padding, so add border\n\t\t\tif ( extra !== \"padding\" ) {\n\t\t\t\tval += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn val;\n}\n\nfunction getWidthOrHeight( elem, name, extra ) {\n\n\t// Start with offset property, which is equivalent to the border-box value\n\tvar valueIsBorderBox = true,\n\t\tval = name === \"width\" ? elem.offsetWidth : elem.offsetHeight,\n\t\tstyles = getStyles( elem ),\n\t\tisBorderBox = jQuery.support.boxSizing && jQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\";\n\n\t// some non-html elements return undefined for offsetWidth, so check for null/undefined\n\t// svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285\n\t// MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668\n\tif ( val <= 0 || val == null ) {\n\t\t// Fall back to computed then uncomputed css if necessary\n\t\tval = curCSS( elem, name, styles );\n\t\tif ( val < 0 || val == null ) {\n\t\t\tval = elem.style[ name ];\n\t\t}\n\n\t\t// Computed unit is not pixels. Stop here and return.\n\t\tif ( rnumnonpx.test(val) ) {\n\t\t\treturn val;\n\t\t}\n\n\t\t// we need the check for style in case a browser which returns unreliable values\n\t\t// for getComputedStyle silently falls back to the reliable elem.style\n\t\tvalueIsBorderBox = isBorderBox && ( jQuery.support.boxSizingReliable || val === elem.style[ name ] );\n\n\t\t// Normalize \"\", auto, and prepare for extra\n\t\tval = parseFloat( val ) || 0;\n\t}\n\n\t// use the active box-sizing model to add/subtract irrelevant styles\n\treturn ( val +\n\t\taugmentWidthOrHeight(\n\t\t\telem,\n\t\t\tname,\n\t\t\textra || ( isBorderBox ? \"border\" : \"content\" ),\n\t\t\tvalueIsBorderBox,\n\t\t\tstyles\n\t\t)\n\t) + \"px\";\n}\n\n// Try to determine the default display value of an element\nfunction css_defaultDisplay( nodeName ) {\n\tvar doc = document,\n\t\tdisplay = elemdisplay[ nodeName ];\n\n\tif ( !display ) {\n\t\tdisplay = actualDisplay( nodeName, doc );\n\n\t\t// If the simple way fails, read from inside an iframe\n\t\tif ( display === \"none\" || !display ) {\n\t\t\t// Use the already-created iframe if possible\n\t\t\tiframe = ( iframe ||\n\t\t\t\tjQuery(\"<iframe frameborder='0' width='0' height='0'/>\")\n\t\t\t\t.css( \"cssText\", \"display:block !important\" )\n\t\t\t).appendTo( doc.documentElement );\n\n\t\t\t// Always write a new HTML skeleton so Webkit and Firefox don't choke on reuse\n\t\t\tdoc = ( iframe[0].contentWindow || iframe[0].contentDocument ).document;\n\t\t\tdoc.write(\"<!doctype html><html><body>\");\n\t\t\tdoc.close();\n\n\t\t\tdisplay = actualDisplay( nodeName, doc );\n\t\t\tiframe.detach();\n\t\t}\n\n\t\t// Store the correct default display\n\t\telemdisplay[ nodeName ] = display;\n\t}\n\n\treturn display;\n}\n\n// Called ONLY from within css_defaultDisplay\nfunction actualDisplay( name, doc ) {\n\tvar elem = jQuery( doc.createElement( name ) ).appendTo( doc.body ),\n\t\tdisplay = jQuery.css( elem[0], \"display\" );\n\telem.remove();\n\treturn display;\n}\n\njQuery.each([ \"height\", \"width\" ], function( i, name ) {\n\tjQuery.cssHooks[ name ] = {\n\t\tget: function( elem, computed, extra ) {\n\t\t\tif ( computed ) {\n\t\t\t\t// certain elements can have dimension info if we invisibly show them\n\t\t\t\t// however, it must have a current display style that would benefit from this\n\t\t\t\treturn elem.offsetWidth === 0 && rdisplayswap.test( jQuery.css( elem, \"display\" ) ) ?\n\t\t\t\t\tjQuery.swap( elem, cssShow, function() {\n\t\t\t\t\t\treturn getWidthOrHeight( elem, name, extra );\n\t\t\t\t\t}) :\n\t\t\t\t\tgetWidthOrHeight( elem, name, extra );\n\t\t\t}\n\t\t},\n\n\t\tset: function( elem, value, extra ) {\n\t\t\tvar styles = extra && getStyles( elem );\n\t\t\treturn setPositiveNumber( elem, value, extra ?\n\t\t\t\taugmentWidthOrHeight(\n\t\t\t\t\telem,\n\t\t\t\t\tname,\n\t\t\t\t\textra,\n\t\t\t\t\tjQuery.support.boxSizing && jQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n\t\t\t\t\tstyles\n\t\t\t\t) : 0\n\t\t\t);\n\t\t}\n\t};\n});\n\nif ( !jQuery.support.opacity ) {\n\tjQuery.cssHooks.opacity = {\n\t\tget: function( elem, computed ) {\n\t\t\t// IE uses filters for opacity\n\t\t\treturn ropacity.test( (computed && elem.currentStyle ? elem.currentStyle.filter : elem.style.filter) || \"\" ) ?\n\t\t\t\t( 0.01 * parseFloat( RegExp.$1 ) ) + \"\" :\n\t\t\t\tcomputed ? \"1\" : \"\";\n\t\t},\n\n\t\tset: function( elem, value ) {\n\t\t\tvar style = elem.style,\n\t\t\t\tcurrentStyle = elem.currentStyle,\n\t\t\t\topacity = jQuery.isNumeric( value ) ? \"alpha(opacity=\" + value * 100 + \")\" : \"\",\n\t\t\t\tfilter = currentStyle && currentStyle.filter || style.filter || \"\";\n\n\t\t\t// IE has trouble with opacity if it does not have layout\n\t\t\t// Force it by setting the zoom level\n\t\t\tstyle.zoom = 1;\n\n\t\t\t// if setting opacity to 1, and no other filters exist - attempt to remove filter attribute #6652\n\t\t\t// if value === \"\", then remove inline opacity #12685\n\t\t\tif ( ( value >= 1 || value === \"\" ) &&\n\t\t\t\t\tjQuery.trim( filter.replace( ralpha, \"\" ) ) === \"\" &&\n\t\t\t\t\tstyle.removeAttribute ) {\n\n\t\t\t\t// Setting style.filter to null, \"\" & \" \" still leave \"filter:\" in the cssText\n\t\t\t\t// if \"filter:\" is present at all, clearType is disabled, we want to avoid this\n\t\t\t\t// style.removeAttribute is IE Only, but so apparently is this code path...\n\t\t\t\tstyle.removeAttribute( \"filter\" );\n\n\t\t\t\t// if there is no filter style applied in a css rule or unset inline opacity, we are done\n\t\t\t\tif ( value === \"\" || currentStyle && !currentStyle.filter ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// otherwise, set new filter values\n\t\t\tstyle.filter = ralpha.test( filter ) ?\n\t\t\t\tfilter.replace( ralpha, opacity ) :\n\t\t\t\tfilter + \" \" + opacity;\n\t\t}\n\t};\n}\n\n// These hooks cannot be added until DOM ready because the support test\n// for it is not run until after DOM ready\njQuery(function() {\n\tif ( !jQuery.support.reliableMarginRight ) {\n\t\tjQuery.cssHooks.marginRight = {\n\t\t\tget: function( elem, computed ) {\n\t\t\t\tif ( computed ) {\n\t\t\t\t\t// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right\n\t\t\t\t\t// Work around by temporarily setting element display to inline-block\n\t\t\t\t\treturn jQuery.swap( elem, { \"display\": \"inline-block\" },\n\t\t\t\t\t\tcurCSS, [ elem, \"marginRight\" ] );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\t// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084\n\t// getComputedStyle returns percent when specified for top/left/bottom/right\n\t// rather than make the css module depend on the offset module, we just check for it here\n\tif ( !jQuery.support.pixelPosition && jQuery.fn.position ) {\n\t\tjQuery.each( [ \"top\", \"left\" ], function( i, prop ) {\n\t\t\tjQuery.cssHooks[ prop ] = {\n\t\t\t\tget: function( elem, computed ) {\n\t\t\t\t\tif ( computed ) {\n\t\t\t\t\t\tcomputed = curCSS( elem, prop );\n\t\t\t\t\t\t// if curCSS returns percentage, fallback to offset\n\t\t\t\t\t\treturn rnumnonpx.test( computed ) ?\n\t\t\t\t\t\t\tjQuery( elem ).position()[ prop ] + \"px\" :\n\t\t\t\t\t\t\tcomputed;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\t}\n\n});\n\nif ( jQuery.expr && jQuery.expr.filters ) {\n\tjQuery.expr.filters.hidden = function( elem ) {\n\t\t// Support: Opera <= 12.12\n\t\t// Opera reports offsetWidths and offsetHeights less than zero on some elements\n\t\treturn elem.offsetWidth <= 0 && elem.offsetHeight <= 0 ||\n\t\t\t(!jQuery.support.reliableHiddenOffsets && ((elem.style && elem.style.display) || jQuery.css( elem, \"display\" )) === \"none\");\n\t};\n\n\tjQuery.expr.filters.visible = function( elem ) {\n\t\treturn !jQuery.expr.filters.hidden( elem );\n\t};\n}\n\n// These hooks are used by animate to expand properties\njQuery.each({\n\tmargin: \"\",\n\tpadding: \"\",\n\tborder: \"Width\"\n}, function( prefix, suffix ) {\n\tjQuery.cssHooks[ prefix + suffix ] = {\n\t\texpand: function( value ) {\n\t\t\tvar i = 0,\n\t\t\t\texpanded = {},\n\n\t\t\t\t// assumes a single number if not a string\n\t\t\t\tparts = typeof value === \"string\" ? value.split(\" \") : [ value ];\n\n\t\t\tfor ( ; i < 4; i++ ) {\n\t\t\t\texpanded[ prefix + cssExpand[ i ] + suffix ] =\n\t\t\t\t\tparts[ i ] || parts[ i - 2 ] || parts[ 0 ];\n\t\t\t}\n\n\t\t\treturn expanded;\n\t\t}\n\t};\n\n\tif ( !rmargin.test( prefix ) ) {\n\t\tjQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;\n\t}\n});\nvar r20 = /%20/g,\n\trbracket = /\\[\\]$/,\n\trCRLF = /\\r?\\n/g,\n\trsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,\n\trsubmittable = /^(?:input|select|textarea|keygen)/i;\n\njQuery.fn.extend({\n\tserialize: function() {\n\t\treturn jQuery.param( this.serializeArray() );\n\t},\n\tserializeArray: function() {\n\t\treturn this.map(function(){\n\t\t\t// Can add propHook for \"elements\" to filter or add form elements\n\t\t\tvar elements = jQuery.prop( this, \"elements\" );\n\t\t\treturn elements ? jQuery.makeArray( elements ) : this;\n\t\t})\n\t\t.filter(function(){\n\t\t\tvar type = this.type;\n\t\t\t// Use .is(\":disabled\") so that fieldset[disabled] works\n\t\t\treturn this.name && !jQuery( this ).is( \":disabled\" ) &&\n\t\t\t\trsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&\n\t\t\t\t( this.checked || !manipulation_rcheckableType.test( type ) );\n\t\t})\n\t\t.map(function( i, elem ){\n\t\t\tvar val = jQuery( this ).val();\n\n\t\t\treturn val == null ?\n\t\t\t\tnull :\n\t\t\t\tjQuery.isArray( val ) ?\n\t\t\t\t\tjQuery.map( val, function( val ){\n\t\t\t\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t\t\t\t}) :\n\t\t\t\t\t{ name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t}).get();\n\t}\n});\n\n//Serialize an array of form elements or a set of\n//key/values into a query string\njQuery.param = function( a, traditional ) {\n\tvar prefix,\n\t\ts = [],\n\t\tadd = function( key, value ) {\n\t\t\t// If value is a function, invoke it and return its value\n\t\t\tvalue = jQuery.isFunction( value ) ? value() : ( value == null ? \"\" : value );\n\t\t\ts[ s.length ] = encodeURIComponent( key ) + \"=\" + encodeURIComponent( value );\n\t\t};\n\n\t// Set traditional to true for jQuery <= 1.3.2 behavior.\n\tif ( traditional === undefined ) {\n\t\ttraditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;\n\t}\n\n\t// If an array was passed in, assume that it is an array of form elements.\n\tif ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {\n\t\t// Serialize the form elements\n\t\tjQuery.each( a, function() {\n\t\t\tadd( this.name, this.value );\n\t\t});\n\n\t} else {\n\t\t// If traditional, encode the \"old\" way (the way 1.3.2 or older\n\t\t// did it), otherwise encode params recursively.\n\t\tfor ( prefix in a ) {\n\t\t\tbuildParams( prefix, a[ prefix ], traditional, add );\n\t\t}\n\t}\n\n\t// Return the resulting serialization\n\treturn s.join( \"&\" ).replace( r20, \"+\" );\n};\n\nfunction buildParams( prefix, obj, traditional, add ) {\n\tvar name;\n\n\tif ( jQuery.isArray( obj ) ) {\n\t\t// Serialize array item.\n\t\tjQuery.each( obj, function( i, v ) {\n\t\t\tif ( traditional || rbracket.test( prefix ) ) {\n\t\t\t\t// Treat each array item as a scalar.\n\t\t\t\tadd( prefix, v );\n\n\t\t\t} else {\n\t\t\t\t// Item is non-scalar (array or object), encode its numeric index.\n\t\t\t\tbuildParams( prefix + \"[\" + ( typeof v === \"object\" ? i : \"\" ) + \"]\", v, traditional, add );\n\t\t\t}\n\t\t});\n\n\t} else if ( !traditional && jQuery.type( obj ) === \"object\" ) {\n\t\t// Serialize object item.\n\t\tfor ( name in obj ) {\n\t\t\tbuildParams( prefix + \"[\" + name + \"]\", obj[ name ], traditional, add );\n\t\t}\n\n\t} else {\n\t\t// Serialize scalar item.\n\t\tadd( prefix, obj );\n\t}\n}\njQuery.each( (\"blur focus focusin focusout load resize scroll unload click dblclick \" +\n\t\"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \" +\n\t\"change select submit keydown keypress keyup error contextmenu\").split(\" \"), function( i, name ) {\n\n\t// Handle event binding\n\tjQuery.fn[ name ] = function( data, fn ) {\n\t\treturn arguments.length > 0 ?\n\t\t\tthis.on( name, null, data, fn ) :\n\t\t\tthis.trigger( name );\n\t};\n});\n\njQuery.fn.hover = function( fnOver, fnOut ) {\n\treturn this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );\n};\nvar\n\t// Document location\n\tajaxLocParts,\n\tajaxLocation,\n\tajax_nonce = jQuery.now(),\n\n\tajax_rquery = /\\?/,\n\trhash = /#.*$/,\n\trts = /([?&])_=[^&]*/,\n\trheaders = /^(.*?):[ \\t]*([^\\r\\n]*)\\r?$/mg, // IE leaves an \\r character at EOL\n\t// #7653, #8125, #8152: local protocol detection\n\trlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,\n\trnoContent = /^(?:GET|HEAD)$/,\n\trprotocol = /^\\/\\//,\n\trurl = /^([\\w.+-]+:)(?:\\/\\/([^\\/?#:]*)(?::(\\d+)|)|)/,\n\n\t// Keep a copy of the old load method\n\t_load = jQuery.fn.load,\n\n\t/* Prefilters\n\t * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)\n\t * 2) These are called:\n\t *    - BEFORE asking for a transport\n\t *    - AFTER param serialization (s.data is a string if s.processData is true)\n\t * 3) key is the dataType\n\t * 4) the catchall symbol \"*\" can be used\n\t * 5) execution will start with transport dataType and THEN continue down to \"*\" if needed\n\t */\n\tprefilters = {},\n\n\t/* Transports bindings\n\t * 1) key is the dataType\n\t * 2) the catchall symbol \"*\" can be used\n\t * 3) selection will start with transport dataType and THEN go to \"*\" if needed\n\t */\n\ttransports = {},\n\n\t// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression\n\tallTypes = \"*/\".concat(\"*\");\n\n// #8138, IE may throw an exception when accessing\n// a field from window.location if document.domain has been set\ntry {\n\tajaxLocation = location.href;\n} catch( e ) {\n\t// Use the href attribute of an A element\n\t// since IE will modify it given document.location\n\tajaxLocation = document.createElement( \"a\" );\n\tajaxLocation.href = \"\";\n\tajaxLocation = ajaxLocation.href;\n}\n\n// Segment location into parts\najaxLocParts = rurl.exec( ajaxLocation.toLowerCase() ) || [];\n\n// Base \"constructor\" for jQuery.ajaxPrefilter and jQuery.ajaxTransport\nfunction addToPrefiltersOrTransports( structure ) {\n\n\t// dataTypeExpression is optional and defaults to \"*\"\n\treturn function( dataTypeExpression, func ) {\n\n\t\tif ( typeof dataTypeExpression !== \"string\" ) {\n\t\t\tfunc = dataTypeExpression;\n\t\t\tdataTypeExpression = \"*\";\n\t\t}\n\n\t\tvar dataType,\n\t\t\ti = 0,\n\t\t\tdataTypes = dataTypeExpression.toLowerCase().match( core_rnotwhite ) || [];\n\n\t\tif ( jQuery.isFunction( func ) ) {\n\t\t\t// For each dataType in the dataTypeExpression\n\t\t\twhile ( (dataType = dataTypes[i++]) ) {\n\t\t\t\t// Prepend if requested\n\t\t\t\tif ( dataType[0] === \"+\" ) {\n\t\t\t\t\tdataType = dataType.slice( 1 ) || \"*\";\n\t\t\t\t\t(structure[ dataType ] = structure[ dataType ] || []).unshift( func );\n\n\t\t\t\t// Otherwise append\n\t\t\t\t} else {\n\t\t\t\t\t(structure[ dataType ] = structure[ dataType ] || []).push( func );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\n// Base inspection function for prefilters and transports\nfunction inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {\n\n\tvar inspected = {},\n\t\tseekingTransport = ( structure === transports );\n\n\tfunction inspect( dataType ) {\n\t\tvar selected;\n\t\tinspected[ dataType ] = true;\n\t\tjQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {\n\t\t\tvar dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );\n\t\t\tif( typeof dataTypeOrTransport === \"string\" && !seekingTransport && !inspected[ dataTypeOrTransport ] ) {\n\t\t\t\toptions.dataTypes.unshift( dataTypeOrTransport );\n\t\t\t\tinspect( dataTypeOrTransport );\n\t\t\t\treturn false;\n\t\t\t} else if ( seekingTransport ) {\n\t\t\t\treturn !( selected = dataTypeOrTransport );\n\t\t\t}\n\t\t});\n\t\treturn selected;\n\t}\n\n\treturn inspect( options.dataTypes[ 0 ] ) || !inspected[ \"*\" ] && inspect( \"*\" );\n}\n\n// A special extend for ajax options\n// that takes \"flat\" options (not to be deep extended)\n// Fixes #9887\nfunction ajaxExtend( target, src ) {\n\tvar deep, key,\n\t\tflatOptions = jQuery.ajaxSettings.flatOptions || {};\n\n\tfor ( key in src ) {\n\t\tif ( src[ key ] !== undefined ) {\n\t\t\t( flatOptions[ key ] ? target : ( deep || (deep = {}) ) )[ key ] = src[ key ];\n\t\t}\n\t}\n\tif ( deep ) {\n\t\tjQuery.extend( true, target, deep );\n\t}\n\n\treturn target;\n}\n\njQuery.fn.load = function( url, params, callback ) {\n\tif ( typeof url !== \"string\" && _load ) {\n\t\treturn _load.apply( this, arguments );\n\t}\n\n\tvar selector, response, type,\n\t\tself = this,\n\t\toff = url.indexOf(\" \");\n\n\tif ( off >= 0 ) {\n\t\tselector = url.slice( off, url.length );\n\t\turl = url.slice( 0, off );\n\t}\n\n\t// If it's a function\n\tif ( jQuery.isFunction( params ) ) {\n\n\t\t// We assume that it's the callback\n\t\tcallback = params;\n\t\tparams = undefined;\n\n\t// Otherwise, build a param string\n\t} else if ( params && typeof params === \"object\" ) {\n\t\ttype = \"POST\";\n\t}\n\n\t// If we have elements to modify, make the request\n\tif ( self.length > 0 ) {\n\t\tjQuery.ajax({\n\t\t\turl: url,\n\n\t\t\t// if \"type\" variable is undefined, then \"GET\" method will be used\n\t\t\ttype: type,\n\t\t\tdataType: \"html\",\n\t\t\tdata: params\n\t\t}).done(function( responseText ) {\n\n\t\t\t// Save response for use in complete callback\n\t\t\tresponse = arguments;\n\n\t\t\tself.html( selector ?\n\n\t\t\t\t// If a selector was specified, locate the right elements in a dummy div\n\t\t\t\t// Exclude scripts to avoid IE 'Permission Denied' errors\n\t\t\t\tjQuery(\"<div>\").append( jQuery.parseHTML( responseText ) ).find( selector ) :\n\n\t\t\t\t// Otherwise use the full result\n\t\t\t\tresponseText );\n\n\t\t}).complete( callback && function( jqXHR, status ) {\n\t\t\tself.each( callback, response || [ jqXHR.responseText, status, jqXHR ] );\n\t\t});\n\t}\n\n\treturn this;\n};\n\n// Attach a bunch of functions for handling common AJAX events\njQuery.each( [ \"ajaxStart\", \"ajaxStop\", \"ajaxComplete\", \"ajaxError\", \"ajaxSuccess\", \"ajaxSend\" ], function( i, type ){\n\tjQuery.fn[ type ] = function( fn ){\n\t\treturn this.on( type, fn );\n\t};\n});\n\njQuery.each( [ \"get\", \"post\" ], function( i, method ) {\n\tjQuery[ method ] = function( url, data, callback, type ) {\n\t\t// shift arguments if data argument was omitted\n\t\tif ( jQuery.isFunction( data ) ) {\n\t\t\ttype = type || callback;\n\t\t\tcallback = data;\n\t\t\tdata = undefined;\n\t\t}\n\n\t\treturn jQuery.ajax({\n\t\t\turl: url,\n\t\t\ttype: method,\n\t\t\tdataType: type,\n\t\t\tdata: data,\n\t\t\tsuccess: callback\n\t\t});\n\t};\n});\n\njQuery.extend({\n\n\t// Counter for holding the number of active queries\n\tactive: 0,\n\n\t// Last-Modified header cache for next request\n\tlastModified: {},\n\tetag: {},\n\n\tajaxSettings: {\n\t\turl: ajaxLocation,\n\t\ttype: \"GET\",\n\t\tisLocal: rlocalProtocol.test( ajaxLocParts[ 1 ] ),\n\t\tglobal: true,\n\t\tprocessData: true,\n\t\tasync: true,\n\t\tcontentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\n\t\t/*\n\t\ttimeout: 0,\n\t\tdata: null,\n\t\tdataType: null,\n\t\tusername: null,\n\t\tpassword: null,\n\t\tcache: null,\n\t\tthrows: false,\n\t\ttraditional: false,\n\t\theaders: {},\n\t\t*/\n\n\t\taccepts: {\n\t\t\t\"*\": allTypes,\n\t\t\ttext: \"text/plain\",\n\t\t\thtml: \"text/html\",\n\t\t\txml: \"application/xml, text/xml\",\n\t\t\tjson: \"application/json, text/javascript\"\n\t\t},\n\n\t\tcontents: {\n\t\t\txml: /xml/,\n\t\t\thtml: /html/,\n\t\t\tjson: /json/\n\t\t},\n\n\t\tresponseFields: {\n\t\t\txml: \"responseXML\",\n\t\t\ttext: \"responseText\"\n\t\t},\n\n\t\t// Data converters\n\t\t// Keys separate source (or catchall \"*\") and destination types with a single space\n\t\tconverters: {\n\n\t\t\t// Convert anything to text\n\t\t\t\"* text\": window.String,\n\n\t\t\t// Text to html (true = no transformation)\n\t\t\t\"text html\": true,\n\n\t\t\t// Evaluate text as a json expression\n\t\t\t\"text json\": jQuery.parseJSON,\n\n\t\t\t// Parse text as xml\n\t\t\t\"text xml\": jQuery.parseXML\n\t\t},\n\n\t\t// For options that shouldn't be deep extended:\n\t\t// you can add your own custom options here if\n\t\t// and when you create one that shouldn't be\n\t\t// deep extended (see ajaxExtend)\n\t\tflatOptions: {\n\t\t\turl: true,\n\t\t\tcontext: true\n\t\t}\n\t},\n\n\t// Creates a full fledged settings object into target\n\t// with both ajaxSettings and settings fields.\n\t// If target is omitted, writes into ajaxSettings.\n\tajaxSetup: function( target, settings ) {\n\t\treturn settings ?\n\n\t\t\t// Building a settings object\n\t\t\tajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :\n\n\t\t\t// Extending ajaxSettings\n\t\t\tajaxExtend( jQuery.ajaxSettings, target );\n\t},\n\n\tajaxPrefilter: addToPrefiltersOrTransports( prefilters ),\n\tajaxTransport: addToPrefiltersOrTransports( transports ),\n\n\t// Main method\n\tajax: function( url, options ) {\n\n\t\t// If url is an object, simulate pre-1.5 signature\n\t\tif ( typeof url === \"object\" ) {\n\t\t\toptions = url;\n\t\t\turl = undefined;\n\t\t}\n\n\t\t// Force options to be an object\n\t\toptions = options || {};\n\n\t\tvar // Cross-domain detection vars\n\t\t\tparts,\n\t\t\t// Loop variable\n\t\t\ti,\n\t\t\t// URL without anti-cache param\n\t\t\tcacheURL,\n\t\t\t// Response headers as string\n\t\t\tresponseHeadersString,\n\t\t\t// timeout handle\n\t\t\ttimeoutTimer,\n\n\t\t\t// To know if global events are to be dispatched\n\t\t\tfireGlobals,\n\n\t\t\ttransport,\n\t\t\t// Response headers\n\t\t\tresponseHeaders,\n\t\t\t// Create the final options object\n\t\t\ts = jQuery.ajaxSetup( {}, options ),\n\t\t\t// Callbacks context\n\t\t\tcallbackContext = s.context || s,\n\t\t\t// Context for global events is callbackContext if it is a DOM node or jQuery collection\n\t\t\tglobalEventContext = s.context && ( callbackContext.nodeType || callbackContext.jquery ) ?\n\t\t\t\tjQuery( callbackContext ) :\n\t\t\t\tjQuery.event,\n\t\t\t// Deferreds\n\t\t\tdeferred = jQuery.Deferred(),\n\t\t\tcompleteDeferred = jQuery.Callbacks(\"once memory\"),\n\t\t\t// Status-dependent callbacks\n\t\t\tstatusCode = s.statusCode || {},\n\t\t\t// Headers (they are sent all at once)\n\t\t\trequestHeaders = {},\n\t\t\trequestHeadersNames = {},\n\t\t\t// The jqXHR state\n\t\t\tstate = 0,\n\t\t\t// Default abort message\n\t\t\tstrAbort = \"canceled\",\n\t\t\t// Fake xhr\n\t\t\tjqXHR = {\n\t\t\t\treadyState: 0,\n\n\t\t\t\t// Builds headers hashtable if needed\n\t\t\t\tgetResponseHeader: function( key ) {\n\t\t\t\t\tvar match;\n\t\t\t\t\tif ( state === 2 ) {\n\t\t\t\t\t\tif ( !responseHeaders ) {\n\t\t\t\t\t\t\tresponseHeaders = {};\n\t\t\t\t\t\t\twhile ( (match = rheaders.exec( responseHeadersString )) ) {\n\t\t\t\t\t\t\t\tresponseHeaders[ match[1].toLowerCase() ] = match[ 2 ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmatch = responseHeaders[ key.toLowerCase() ];\n\t\t\t\t\t}\n\t\t\t\t\treturn match == null ? null : match;\n\t\t\t\t},\n\n\t\t\t\t// Raw string\n\t\t\t\tgetAllResponseHeaders: function() {\n\t\t\t\t\treturn state === 2 ? responseHeadersString : null;\n\t\t\t\t},\n\n\t\t\t\t// Caches the header\n\t\t\t\tsetRequestHeader: function( name, value ) {\n\t\t\t\t\tvar lname = name.toLowerCase();\n\t\t\t\t\tif ( !state ) {\n\t\t\t\t\t\tname = requestHeadersNames[ lname ] = requestHeadersNames[ lname ] || name;\n\t\t\t\t\t\trequestHeaders[ name ] = value;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Overrides response content-type header\n\t\t\t\toverrideMimeType: function( type ) {\n\t\t\t\t\tif ( !state ) {\n\t\t\t\t\t\ts.mimeType = type;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Status-dependent callbacks\n\t\t\t\tstatusCode: function( map ) {\n\t\t\t\t\tvar code;\n\t\t\t\t\tif ( map ) {\n\t\t\t\t\t\tif ( state < 2 ) {\n\t\t\t\t\t\t\tfor ( code in map ) {\n\t\t\t\t\t\t\t\t// Lazy-add the new callback in a way that preserves old ones\n\t\t\t\t\t\t\t\tstatusCode[ code ] = [ statusCode[ code ], map[ code ] ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Execute the appropriate callbacks\n\t\t\t\t\t\t\tjqXHR.always( map[ jqXHR.status ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Cancel the request\n\t\t\t\tabort: function( statusText ) {\n\t\t\t\t\tvar finalText = statusText || strAbort;\n\t\t\t\t\tif ( transport ) {\n\t\t\t\t\t\ttransport.abort( finalText );\n\t\t\t\t\t}\n\t\t\t\t\tdone( 0, finalText );\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t};\n\n\t\t// Attach deferreds\n\t\tdeferred.promise( jqXHR ).complete = completeDeferred.add;\n\t\tjqXHR.success = jqXHR.done;\n\t\tjqXHR.error = jqXHR.fail;\n\n\t\t// Remove hash character (#7531: and string promotion)\n\t\t// Add protocol if not provided (#5866: IE7 issue with protocol-less urls)\n\t\t// Handle falsy url in the settings object (#10093: consistency with old signature)\n\t\t// We also use the url parameter if available\n\t\ts.url = ( ( url || s.url || ajaxLocation ) + \"\" ).replace( rhash, \"\" ).replace( rprotocol, ajaxLocParts[ 1 ] + \"//\" );\n\n\t\t// Alias method option to type as per ticket #12004\n\t\ts.type = options.method || options.type || s.method || s.type;\n\n\t\t// Extract dataTypes list\n\t\ts.dataTypes = jQuery.trim( s.dataType || \"*\" ).toLowerCase().match( core_rnotwhite ) || [\"\"];\n\n\t\t// A cross-domain request is in order when we have a protocol:host:port mismatch\n\t\tif ( s.crossDomain == null ) {\n\t\t\tparts = rurl.exec( s.url.toLowerCase() );\n\t\t\ts.crossDomain = !!( parts &&\n\t\t\t\t( parts[ 1 ] !== ajaxLocParts[ 1 ] || parts[ 2 ] !== ajaxLocParts[ 2 ] ||\n\t\t\t\t\t( parts[ 3 ] || ( parts[ 1 ] === \"http:\" ? 80 : 443 ) ) !=\n\t\t\t\t\t\t( ajaxLocParts[ 3 ] || ( ajaxLocParts[ 1 ] === \"http:\" ? 80 : 443 ) ) )\n\t\t\t);\n\t\t}\n\n\t\t// Convert data if not already a string\n\t\tif ( s.data && s.processData && typeof s.data !== \"string\" ) {\n\t\t\ts.data = jQuery.param( s.data, s.traditional );\n\t\t}\n\n\t\t// Apply prefilters\n\t\tinspectPrefiltersOrTransports( prefilters, s, options, jqXHR );\n\n\t\t// If request was aborted inside a prefilter, stop there\n\t\tif ( state === 2 ) {\n\t\t\treturn jqXHR;\n\t\t}\n\n\t\t// We can fire global events as of now if asked to\n\t\tfireGlobals = s.global;\n\n\t\t// Watch for a new set of requests\n\t\tif ( fireGlobals && jQuery.active++ === 0 ) {\n\t\t\tjQuery.event.trigger(\"ajaxStart\");\n\t\t}\n\n\t\t// Uppercase the type\n\t\ts.type = s.type.toUpperCase();\n\n\t\t// Determine if request has content\n\t\ts.hasContent = !rnoContent.test( s.type );\n\n\t\t// Save the URL in case we're toying with the If-Modified-Since\n\t\t// and/or If-None-Match header later on\n\t\tcacheURL = s.url;\n\n\t\t// More options handling for requests with no content\n\t\tif ( !s.hasContent ) {\n\n\t\t\t// If data is available, append data to url\n\t\t\tif ( s.data ) {\n\t\t\t\tcacheURL = ( s.url += ( ajax_rquery.test( cacheURL ) ? \"&\" : \"?\" ) + s.data );\n\t\t\t\t// #9682: remove data so that it's not used in an eventual retry\n\t\t\t\tdelete s.data;\n\t\t\t}\n\n\t\t\t// Add anti-cache in url if needed\n\t\t\tif ( s.cache === false ) {\n\t\t\t\ts.url = rts.test( cacheURL ) ?\n\n\t\t\t\t\t// If there is already a '_' parameter, set its value\n\t\t\t\t\tcacheURL.replace( rts, \"$1_=\" + ajax_nonce++ ) :\n\n\t\t\t\t\t// Otherwise add one to the end\n\t\t\t\t\tcacheURL + ( ajax_rquery.test( cacheURL ) ? \"&\" : \"?\" ) + \"_=\" + ajax_nonce++;\n\t\t\t}\n\t\t}\n\n\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\tif ( s.ifModified ) {\n\t\t\tif ( jQuery.lastModified[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-Modified-Since\", jQuery.lastModified[ cacheURL ] );\n\t\t\t}\n\t\t\tif ( jQuery.etag[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-None-Match\", jQuery.etag[ cacheURL ] );\n\t\t\t}\n\t\t}\n\n\t\t// Set the correct header, if data is being sent\n\t\tif ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {\n\t\t\tjqXHR.setRequestHeader( \"Content-Type\", s.contentType );\n\t\t}\n\n\t\t// Set the Accepts header for the server, depending on the dataType\n\t\tjqXHR.setRequestHeader(\n\t\t\t\"Accept\",\n\t\t\ts.dataTypes[ 0 ] && s.accepts[ s.dataTypes[0] ] ?\n\t\t\t\ts.accepts[ s.dataTypes[0] ] + ( s.dataTypes[ 0 ] !== \"*\" ? \", \" + allTypes + \"; q=0.01\" : \"\" ) :\n\t\t\t\ts.accepts[ \"*\" ]\n\t\t);\n\n\t\t// Check for headers option\n\t\tfor ( i in s.headers ) {\n\t\t\tjqXHR.setRequestHeader( i, s.headers[ i ] );\n\t\t}\n\n\t\t// Allow custom headers/mimetypes and early abort\n\t\tif ( s.beforeSend && ( s.beforeSend.call( callbackContext, jqXHR, s ) === false || state === 2 ) ) {\n\t\t\t// Abort if not done already and return\n\t\t\treturn jqXHR.abort();\n\t\t}\n\n\t\t// aborting is no longer a cancellation\n\t\tstrAbort = \"abort\";\n\n\t\t// Install callbacks on deferreds\n\t\tfor ( i in { success: 1, error: 1, complete: 1 } ) {\n\t\t\tjqXHR[ i ]( s[ i ] );\n\t\t}\n\n\t\t// Get transport\n\t\ttransport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );\n\n\t\t// If no transport, we auto-abort\n\t\tif ( !transport ) {\n\t\t\tdone( -1, \"No Transport\" );\n\t\t} else {\n\t\t\tjqXHR.readyState = 1;\n\n\t\t\t// Send global event\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxSend\", [ jqXHR, s ] );\n\t\t\t}\n\t\t\t// Timeout\n\t\t\tif ( s.async && s.timeout > 0 ) {\n\t\t\t\ttimeoutTimer = setTimeout(function() {\n\t\t\t\t\tjqXHR.abort(\"timeout\");\n\t\t\t\t}, s.timeout );\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tstate = 1;\n\t\t\t\ttransport.send( requestHeaders, done );\n\t\t\t} catch ( e ) {\n\t\t\t\t// Propagate exception as error if not done\n\t\t\t\tif ( state < 2 ) {\n\t\t\t\t\tdone( -1, e );\n\t\t\t\t// Simply rethrow otherwise\n\t\t\t\t} else {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Callback for when everything is done\n\t\tfunction done( status, nativeStatusText, responses, headers ) {\n\t\t\tvar isSuccess, success, error, response, modified,\n\t\t\t\tstatusText = nativeStatusText;\n\n\t\t\t// Called once\n\t\t\tif ( state === 2 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// State is \"done\" now\n\t\t\tstate = 2;\n\n\t\t\t// Clear timeout if it exists\n\t\t\tif ( timeoutTimer ) {\n\t\t\t\tclearTimeout( timeoutTimer );\n\t\t\t}\n\n\t\t\t// Dereference transport for early garbage collection\n\t\t\t// (no matter how long the jqXHR object will be used)\n\t\t\ttransport = undefined;\n\n\t\t\t// Cache response headers\n\t\t\tresponseHeadersString = headers || \"\";\n\n\t\t\t// Set readyState\n\t\t\tjqXHR.readyState = status > 0 ? 4 : 0;\n\n\t\t\t// Get response data\n\t\t\tif ( responses ) {\n\t\t\t\tresponse = ajaxHandleResponses( s, jqXHR, responses );\n\t\t\t}\n\n\t\t\t// If successful, handle type chaining\n\t\t\tif ( status >= 200 && status < 300 || status === 304 ) {\n\n\t\t\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\t\t\tif ( s.ifModified ) {\n\t\t\t\t\tmodified = jqXHR.getResponseHeader(\"Last-Modified\");\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.lastModified[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t\tmodified = jqXHR.getResponseHeader(\"etag\");\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.etag[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// if no content\n\t\t\t\tif ( status === 204 ) {\n\t\t\t\t\tisSuccess = true;\n\t\t\t\t\tstatusText = \"nocontent\";\n\n\t\t\t\t// if not modified\n\t\t\t\t} else if ( status === 304 ) {\n\t\t\t\t\tisSuccess = true;\n\t\t\t\t\tstatusText = \"notmodified\";\n\n\t\t\t\t// If we have data, let's convert it\n\t\t\t\t} else {\n\t\t\t\t\tisSuccess = ajaxConvert( s, response );\n\t\t\t\t\tstatusText = isSuccess.state;\n\t\t\t\t\tsuccess = isSuccess.data;\n\t\t\t\t\terror = isSuccess.error;\n\t\t\t\t\tisSuccess = !error;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// We extract error from statusText\n\t\t\t\t// then normalize statusText and status for non-aborts\n\t\t\t\terror = statusText;\n\t\t\t\tif ( status || !statusText ) {\n\t\t\t\t\tstatusText = \"error\";\n\t\t\t\t\tif ( status < 0 ) {\n\t\t\t\t\t\tstatus = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Set data for the fake xhr object\n\t\t\tjqXHR.status = status;\n\t\t\tjqXHR.statusText = ( nativeStatusText || statusText ) + \"\";\n\n\t\t\t// Success/Error\n\t\t\tif ( isSuccess ) {\n\t\t\t\tdeferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );\n\t\t\t} else {\n\t\t\t\tdeferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );\n\t\t\t}\n\n\t\t\t// Status-dependent callbacks\n\t\t\tjqXHR.statusCode( statusCode );\n\t\t\tstatusCode = undefined;\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( isSuccess ? \"ajaxSuccess\" : \"ajaxError\",\n\t\t\t\t\t[ jqXHR, s, isSuccess ? success : error ] );\n\t\t\t}\n\n\t\t\t// Complete\n\t\t\tcompleteDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxComplete\", [ jqXHR, s ] );\n\t\t\t\t// Handle the global AJAX counter\n\t\t\t\tif ( !( --jQuery.active ) ) {\n\t\t\t\t\tjQuery.event.trigger(\"ajaxStop\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn jqXHR;\n\t},\n\n\tgetScript: function( url, callback ) {\n\t\treturn jQuery.get( url, undefined, callback, \"script\" );\n\t},\n\n\tgetJSON: function( url, data, callback ) {\n\t\treturn jQuery.get( url, data, callback, \"json\" );\n\t}\n});\n\n/* Handles responses to an ajax request:\n * - sets all responseXXX fields accordingly\n * - finds the right dataType (mediates between content-type and expected dataType)\n * - returns the corresponding response\n */\nfunction ajaxHandleResponses( s, jqXHR, responses ) {\n\tvar firstDataType, ct, finalDataType, type,\n\t\tcontents = s.contents,\n\t\tdataTypes = s.dataTypes,\n\t\tresponseFields = s.responseFields;\n\n\t// Fill responseXXX fields\n\tfor ( type in responseFields ) {\n\t\tif ( type in responses ) {\n\t\t\tjqXHR[ responseFields[type] ] = responses[ type ];\n\t\t}\n\t}\n\n\t// Remove auto dataType and get content-type in the process\n\twhile( dataTypes[ 0 ] === \"*\" ) {\n\t\tdataTypes.shift();\n\t\tif ( ct === undefined ) {\n\t\t\tct = s.mimeType || jqXHR.getResponseHeader(\"Content-Type\");\n\t\t}\n\t}\n\n\t// Check if we're dealing with a known content-type\n\tif ( ct ) {\n\t\tfor ( type in contents ) {\n\t\t\tif ( contents[ type ] && contents[ type ].test( ct ) ) {\n\t\t\t\tdataTypes.unshift( type );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Check to see if we have a response for the expected dataType\n\tif ( dataTypes[ 0 ] in responses ) {\n\t\tfinalDataType = dataTypes[ 0 ];\n\t} else {\n\t\t// Try convertible dataTypes\n\t\tfor ( type in responses ) {\n\t\t\tif ( !dataTypes[ 0 ] || s.converters[ type + \" \" + dataTypes[0] ] ) {\n\t\t\t\tfinalDataType = type;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( !firstDataType ) {\n\t\t\t\tfirstDataType = type;\n\t\t\t}\n\t\t}\n\t\t// Or just use first one\n\t\tfinalDataType = finalDataType || firstDataType;\n\t}\n\n\t// If we found a dataType\n\t// We add the dataType to the list if needed\n\t// and return the corresponding response\n\tif ( finalDataType ) {\n\t\tif ( finalDataType !== dataTypes[ 0 ] ) {\n\t\t\tdataTypes.unshift( finalDataType );\n\t\t}\n\t\treturn responses[ finalDataType ];\n\t}\n}\n\n// Chain conversions given the request and the original response\nfunction ajaxConvert( s, response ) {\n\tvar conv2, current, conv, tmp,\n\t\tconverters = {},\n\t\ti = 0,\n\t\t// Work with a copy of dataTypes in case we need to modify it for conversion\n\t\tdataTypes = s.dataTypes.slice(),\n\t\tprev = dataTypes[ 0 ];\n\n\t// Apply the dataFilter if provided\n\tif ( s.dataFilter ) {\n\t\tresponse = s.dataFilter( response, s.dataType );\n\t}\n\n\t// Create converters map with lowercased keys\n\tif ( dataTypes[ 1 ] ) {\n\t\tfor ( conv in s.converters ) {\n\t\t\tconverters[ conv.toLowerCase() ] = s.converters[ conv ];\n\t\t}\n\t}\n\n\t// Convert to each sequential dataType, tolerating list modification\n\tfor ( ; (current = dataTypes[++i]); ) {\n\n\t\t// There's only work to do if current dataType is non-auto\n\t\tif ( current !== \"*\" ) {\n\n\t\t\t// Convert response if prev dataType is non-auto and differs from current\n\t\t\tif ( prev !== \"*\" && prev !== current ) {\n\n\t\t\t\t// Seek a direct converter\n\t\t\t\tconv = converters[ prev + \" \" + current ] || converters[ \"* \" + current ];\n\n\t\t\t\t// If none found, seek a pair\n\t\t\t\tif ( !conv ) {\n\t\t\t\t\tfor ( conv2 in converters ) {\n\n\t\t\t\t\t\t// If conv2 outputs current\n\t\t\t\t\t\ttmp = conv2.split(\" \");\n\t\t\t\t\t\tif ( tmp[ 1 ] === current ) {\n\n\t\t\t\t\t\t\t// If prev can be converted to accepted input\n\t\t\t\t\t\t\tconv = converters[ prev + \" \" + tmp[ 0 ] ] ||\n\t\t\t\t\t\t\t\tconverters[ \"* \" + tmp[ 0 ] ];\n\t\t\t\t\t\t\tif ( conv ) {\n\t\t\t\t\t\t\t\t// Condense equivalence converters\n\t\t\t\t\t\t\t\tif ( conv === true ) {\n\t\t\t\t\t\t\t\t\tconv = converters[ conv2 ];\n\n\t\t\t\t\t\t\t\t// Otherwise, insert the intermediate dataType\n\t\t\t\t\t\t\t\t} else if ( converters[ conv2 ] !== true ) {\n\t\t\t\t\t\t\t\t\tcurrent = tmp[ 0 ];\n\t\t\t\t\t\t\t\t\tdataTypes.splice( i--, 0, current );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Apply converter (if not an equivalence)\n\t\t\t\tif ( conv !== true ) {\n\n\t\t\t\t\t// Unless errors are allowed to bubble, catch and return them\n\t\t\t\t\tif ( conv && s[\"throws\"] ) {\n\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\treturn { state: \"parsererror\", error: conv ? e : \"No conversion from \" + prev + \" to \" + current };\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Update prev for next iteration\n\t\t\tprev = current;\n\t\t}\n\t}\n\n\treturn { state: \"success\", data: response };\n}\n// Install script dataType\njQuery.ajaxSetup({\n\taccepts: {\n\t\tscript: \"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"\n\t},\n\tcontents: {\n\t\tscript: /(?:java|ecma)script/\n\t},\n\tconverters: {\n\t\t\"text script\": function( text ) {\n\t\t\tjQuery.globalEval( text );\n\t\t\treturn text;\n\t\t}\n\t}\n});\n\n// Handle cache's special case and global\njQuery.ajaxPrefilter( \"script\", function( s ) {\n\tif ( s.cache === undefined ) {\n\t\ts.cache = false;\n\t}\n\tif ( s.crossDomain ) {\n\t\ts.type = \"GET\";\n\t\ts.global = false;\n\t}\n});\n\n// Bind script tag hack transport\njQuery.ajaxTransport( \"script\", function(s) {\n\n\t// This transport only deals with cross domain requests\n\tif ( s.crossDomain ) {\n\n\t\tvar script,\n\t\t\thead = document.head || jQuery(\"head\")[0] || document.documentElement;\n\n\t\treturn {\n\n\t\t\tsend: function( _, callback ) {\n\n\t\t\t\tscript = document.createElement(\"script\");\n\n\t\t\t\tscript.async = true;\n\n\t\t\t\tif ( s.scriptCharset ) {\n\t\t\t\t\tscript.charset = s.scriptCharset;\n\t\t\t\t}\n\n\t\t\t\tscript.src = s.url;\n\n\t\t\t\t// Attach handlers for all browsers\n\t\t\t\tscript.onload = script.onreadystatechange = function( _, isAbort ) {\n\n\t\t\t\t\tif ( isAbort || !script.readyState || /loaded|complete/.test( script.readyState ) ) {\n\n\t\t\t\t\t\t// Handle memory leak in IE\n\t\t\t\t\t\tscript.onload = script.onreadystatechange = null;\n\n\t\t\t\t\t\t// Remove the script\n\t\t\t\t\t\tif ( script.parentNode ) {\n\t\t\t\t\t\t\tscript.parentNode.removeChild( script );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Dereference the script\n\t\t\t\t\t\tscript = null;\n\n\t\t\t\t\t\t// Callback if not abort\n\t\t\t\t\t\tif ( !isAbort ) {\n\t\t\t\t\t\t\tcallback( 200, \"success\" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t// Circumvent IE6 bugs with base elements (#2709 and #4378) by prepending\n\t\t\t\t// Use native DOM manipulation to avoid our domManip AJAX trickery\n\t\t\t\thead.insertBefore( script, head.firstChild );\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tif ( script ) {\n\t\t\t\t\tscript.onload( undefined, true );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n});\nvar oldCallbacks = [],\n\trjsonp = /(=)\\?(?=&|$)|\\?\\?/;\n\n// Default jsonp settings\njQuery.ajaxSetup({\n\tjsonp: \"callback\",\n\tjsonpCallback: function() {\n\t\tvar callback = oldCallbacks.pop() || ( jQuery.expando + \"_\" + ( ajax_nonce++ ) );\n\t\tthis[ callback ] = true;\n\t\treturn callback;\n\t}\n});\n\n// Detect, normalize options and install callbacks for jsonp requests\njQuery.ajaxPrefilter( \"json jsonp\", function( s, originalSettings, jqXHR ) {\n\n\tvar callbackName, overwritten, responseContainer,\n\t\tjsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?\n\t\t\t\"url\" :\n\t\t\ttypeof s.data === \"string\" && !( s.contentType || \"\" ).indexOf(\"application/x-www-form-urlencoded\") && rjsonp.test( s.data ) && \"data\"\n\t\t);\n\n\t// Handle iff the expected data type is \"jsonp\" or we have a parameter to set\n\tif ( jsonProp || s.dataTypes[ 0 ] === \"jsonp\" ) {\n\n\t\t// Get callback name, remembering preexisting value associated with it\n\t\tcallbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?\n\t\t\ts.jsonpCallback() :\n\t\t\ts.jsonpCallback;\n\n\t\t// Insert callback into url or form data\n\t\tif ( jsonProp ) {\n\t\t\ts[ jsonProp ] = s[ jsonProp ].replace( rjsonp, \"$1\" + callbackName );\n\t\t} else if ( s.jsonp !== false ) {\n\t\t\ts.url += ( ajax_rquery.test( s.url ) ? \"&\" : \"?\" ) + s.jsonp + \"=\" + callbackName;\n\t\t}\n\n\t\t// Use data converter to retrieve json after script execution\n\t\ts.converters[\"script json\"] = function() {\n\t\t\tif ( !responseContainer ) {\n\t\t\t\tjQuery.error( callbackName + \" was not called\" );\n\t\t\t}\n\t\t\treturn responseContainer[ 0 ];\n\t\t};\n\n\t\t// force json dataType\n\t\ts.dataTypes[ 0 ] = \"json\";\n\n\t\t// Install callback\n\t\toverwritten = window[ callbackName ];\n\t\twindow[ callbackName ] = function() {\n\t\t\tresponseContainer = arguments;\n\t\t};\n\n\t\t// Clean-up function (fires after converters)\n\t\tjqXHR.always(function() {\n\t\t\t// Restore preexisting value\n\t\t\twindow[ callbackName ] = overwritten;\n\n\t\t\t// Save back as free\n\t\t\tif ( s[ callbackName ] ) {\n\t\t\t\t// make sure that re-using the options doesn't screw things around\n\t\t\t\ts.jsonpCallback = originalSettings.jsonpCallback;\n\n\t\t\t\t// save the callback name for future use\n\t\t\t\toldCallbacks.push( callbackName );\n\t\t\t}\n\n\t\t\t// Call if it was a function and we have a response\n\t\t\tif ( responseContainer && jQuery.isFunction( overwritten ) ) {\n\t\t\t\toverwritten( responseContainer[ 0 ] );\n\t\t\t}\n\n\t\t\tresponseContainer = overwritten = undefined;\n\t\t});\n\n\t\t// Delegate to script\n\t\treturn \"script\";\n\t}\n});\nvar xhrCallbacks, xhrSupported,\n\txhrId = 0,\n\t// #5280: Internet Explorer will keep connections alive if we don't abort on unload\n\txhrOnUnloadAbort = window.ActiveXObject && function() {\n\t\t// Abort all pending requests\n\t\tvar key;\n\t\tfor ( key in xhrCallbacks ) {\n\t\t\txhrCallbacks[ key ]( undefined, true );\n\t\t}\n\t};\n\n// Functions to create xhrs\nfunction createStandardXHR() {\n\ttry {\n\t\treturn new window.XMLHttpRequest();\n\t} catch( e ) {}\n}\n\nfunction createActiveXHR() {\n\ttry {\n\t\treturn new window.ActiveXObject(\"Microsoft.XMLHTTP\");\n\t} catch( e ) {}\n}\n\n// Create the request object\n// (This is still attached to ajaxSettings for backward compatibility)\njQuery.ajaxSettings.xhr = window.ActiveXObject ?\n\t/* Microsoft failed to properly\n\t * implement the XMLHttpRequest in IE7 (can't request local files),\n\t * so we use the ActiveXObject when it is available\n\t * Additionally XMLHttpRequest can be disabled in IE7/IE8 so\n\t * we need a fallback.\n\t */\n\tfunction() {\n\t\treturn !this.isLocal && createStandardXHR() || createActiveXHR();\n\t} :\n\t// For all other browsers, use the standard XMLHttpRequest object\n\tcreateStandardXHR;\n\n// Determine support properties\nxhrSupported = jQuery.ajaxSettings.xhr();\njQuery.support.cors = !!xhrSupported && ( \"withCredentials\" in xhrSupported );\nxhrSupported = jQuery.support.ajax = !!xhrSupported;\n\n// Create transport if the browser can provide an xhr\nif ( xhrSupported ) {\n\n\tjQuery.ajaxTransport(function( s ) {\n\t\t// Cross domain only allowed if supported through XMLHttpRequest\n\t\tif ( !s.crossDomain || jQuery.support.cors ) {\n\n\t\t\tvar callback;\n\n\t\t\treturn {\n\t\t\t\tsend: function( headers, complete ) {\n\n\t\t\t\t\t// Get a new xhr\n\t\t\t\t\tvar handle, i,\n\t\t\t\t\t\txhr = s.xhr();\n\n\t\t\t\t\t// Open the socket\n\t\t\t\t\t// Passing null username, generates a login popup on Opera (#2865)\n\t\t\t\t\tif ( s.username ) {\n\t\t\t\t\t\txhr.open( s.type, s.url, s.async, s.username, s.password );\n\t\t\t\t\t} else {\n\t\t\t\t\t\txhr.open( s.type, s.url, s.async );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Apply custom fields if provided\n\t\t\t\t\tif ( s.xhrFields ) {\n\t\t\t\t\t\tfor ( i in s.xhrFields ) {\n\t\t\t\t\t\t\txhr[ i ] = s.xhrFields[ i ];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Override mime type if needed\n\t\t\t\t\tif ( s.mimeType && xhr.overrideMimeType ) {\n\t\t\t\t\t\txhr.overrideMimeType( s.mimeType );\n\t\t\t\t\t}\n\n\t\t\t\t\t// X-Requested-With header\n\t\t\t\t\t// For cross-domain requests, seeing as conditions for a preflight are\n\t\t\t\t\t// akin to a jigsaw puzzle, we simply never set it to be sure.\n\t\t\t\t\t// (it can always be set on a per-request basis or even using ajaxSetup)\n\t\t\t\t\t// For same-domain requests, won't change header if already provided.\n\t\t\t\t\tif ( !s.crossDomain && !headers[\"X-Requested-With\"] ) {\n\t\t\t\t\t\theaders[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\t\t\t\t\t}\n\n\t\t\t\t\t// Need an extra try/catch for cross domain requests in Firefox 3\n\t\t\t\t\ttry {\n\t\t\t\t\t\tfor ( i in headers ) {\n\t\t\t\t\t\t\txhr.setRequestHeader( i, headers[ i ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch( err ) {}\n\n\t\t\t\t\t// Do send the request\n\t\t\t\t\t// This may raise an exception which is actually\n\t\t\t\t\t// handled in jQuery.ajax (so no try/catch here)\n\t\t\t\t\txhr.send( ( s.hasContent && s.data ) || null );\n\n\t\t\t\t\t// Listener\n\t\t\t\t\tcallback = function( _, isAbort ) {\n\t\t\t\t\t\tvar status, responseHeaders, statusText, responses;\n\n\t\t\t\t\t\t// Firefox throws exceptions when accessing properties\n\t\t\t\t\t\t// of an xhr when a network error occurred\n\t\t\t\t\t\t// http://helpful.knobs-dials.com/index.php/Component_returned_failure_code:_0x80040111_(NS_ERROR_NOT_AVAILABLE)\n\t\t\t\t\t\ttry {\n\n\t\t\t\t\t\t\t// Was never called and is aborted or complete\n\t\t\t\t\t\t\tif ( callback && ( isAbort || xhr.readyState === 4 ) ) {\n\n\t\t\t\t\t\t\t\t// Only called once\n\t\t\t\t\t\t\t\tcallback = undefined;\n\n\t\t\t\t\t\t\t\t// Do not keep as active anymore\n\t\t\t\t\t\t\t\tif ( handle ) {\n\t\t\t\t\t\t\t\t\txhr.onreadystatechange = jQuery.noop;\n\t\t\t\t\t\t\t\t\tif ( xhrOnUnloadAbort ) {\n\t\t\t\t\t\t\t\t\t\tdelete xhrCallbacks[ handle ];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// If it's an abort\n\t\t\t\t\t\t\t\tif ( isAbort ) {\n\t\t\t\t\t\t\t\t\t// Abort it manually if needed\n\t\t\t\t\t\t\t\t\tif ( xhr.readyState !== 4 ) {\n\t\t\t\t\t\t\t\t\t\txhr.abort();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tresponses = {};\n\t\t\t\t\t\t\t\t\tstatus = xhr.status;\n\t\t\t\t\t\t\t\t\tresponseHeaders = xhr.getAllResponseHeaders();\n\n\t\t\t\t\t\t\t\t\t// When requesting binary data, IE6-9 will throw an exception\n\t\t\t\t\t\t\t\t\t// on any attempt to access responseText (#11426)\n\t\t\t\t\t\t\t\t\tif ( typeof xhr.responseText === \"string\" ) {\n\t\t\t\t\t\t\t\t\t\tresponses.text = xhr.responseText;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Firefox throws an exception when accessing\n\t\t\t\t\t\t\t\t\t// statusText for faulty cross-domain requests\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tstatusText = xhr.statusText;\n\t\t\t\t\t\t\t\t\t} catch( e ) {\n\t\t\t\t\t\t\t\t\t\t// We normalize with Webkit giving an empty statusText\n\t\t\t\t\t\t\t\t\t\tstatusText = \"\";\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Filter status for non standard behaviors\n\n\t\t\t\t\t\t\t\t\t// If the request is local and we have data: assume a success\n\t\t\t\t\t\t\t\t\t// (success with no data won't get notified, that's the best we\n\t\t\t\t\t\t\t\t\t// can do given current implementations)\n\t\t\t\t\t\t\t\t\tif ( !status && s.isLocal && !s.crossDomain ) {\n\t\t\t\t\t\t\t\t\t\tstatus = responses.text ? 200 : 404;\n\t\t\t\t\t\t\t\t\t// IE - #1450: sometimes returns 1223 when it should be 204\n\t\t\t\t\t\t\t\t\t} else if ( status === 1223 ) {\n\t\t\t\t\t\t\t\t\t\tstatus = 204;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch( firefoxAccessException ) {\n\t\t\t\t\t\t\tif ( !isAbort ) {\n\t\t\t\t\t\t\t\tcomplete( -1, firefoxAccessException );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Call complete if needed\n\t\t\t\t\t\tif ( responses ) {\n\t\t\t\t\t\t\tcomplete( status, statusText, responses, responseHeaders );\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tif ( !s.async ) {\n\t\t\t\t\t\t// if we're in sync mode we fire the callback\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t} else if ( xhr.readyState === 4 ) {\n\t\t\t\t\t\t// (IE6 & IE7) if it's in cache and has been\n\t\t\t\t\t\t// retrieved directly we need to fire the callback\n\t\t\t\t\t\tsetTimeout( callback );\n\t\t\t\t\t} else {\n\t\t\t\t\t\thandle = ++xhrId;\n\t\t\t\t\t\tif ( xhrOnUnloadAbort ) {\n\t\t\t\t\t\t\t// Create the active xhrs callbacks list if needed\n\t\t\t\t\t\t\t// and attach the unload handler\n\t\t\t\t\t\t\tif ( !xhrCallbacks ) {\n\t\t\t\t\t\t\t\txhrCallbacks = {};\n\t\t\t\t\t\t\t\tjQuery( window ).unload( xhrOnUnloadAbort );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// Add to list of active xhrs callbacks\n\t\t\t\t\t\t\txhrCallbacks[ handle ] = callback;\n\t\t\t\t\t\t}\n\t\t\t\t\t\txhr.onreadystatechange = callback;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tabort: function() {\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback( undefined, true );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t});\n}\nvar fxNow, timerId,\n\trfxtypes = /^(?:toggle|show|hide)$/,\n\trfxnum = new RegExp( \"^(?:([+-])=|)(\" + core_pnum + \")([a-z%]*)$\", \"i\" ),\n\trrun = /queueHooks$/,\n\tanimationPrefilters = [ defaultPrefilter ],\n\ttweeners = {\n\t\t\"*\": [function( prop, value ) {\n\t\t\tvar end, unit,\n\t\t\t\ttween = this.createTween( prop, value ),\n\t\t\t\tparts = rfxnum.exec( value ),\n\t\t\t\ttarget = tween.cur(),\n\t\t\t\tstart = +target || 0,\n\t\t\t\tscale = 1,\n\t\t\t\tmaxIterations = 20;\n\n\t\t\tif ( parts ) {\n\t\t\t\tend = +parts[2];\n\t\t\t\tunit = parts[3] || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" );\n\n\t\t\t\t// We need to compute starting value\n\t\t\t\tif ( unit !== \"px\" && start ) {\n\t\t\t\t\t// Iteratively approximate from a nonzero starting point\n\t\t\t\t\t// Prefer the current property, because this process will be trivial if it uses the same units\n\t\t\t\t\t// Fallback to end or a simple constant\n\t\t\t\t\tstart = jQuery.css( tween.elem, prop, true ) || end || 1;\n\n\t\t\t\t\tdo {\n\t\t\t\t\t\t// If previous iteration zeroed out, double until we get *something*\n\t\t\t\t\t\t// Use a string for doubling factor so we don't accidentally see scale as unchanged below\n\t\t\t\t\t\tscale = scale || \".5\";\n\n\t\t\t\t\t\t// Adjust and apply\n\t\t\t\t\t\tstart = start / scale;\n\t\t\t\t\t\tjQuery.style( tween.elem, prop, start + unit );\n\n\t\t\t\t\t// Update scale, tolerating zero or NaN from tween.cur()\n\t\t\t\t\t// And breaking the loop if scale is unchanged or perfect, or if we've just had enough\n\t\t\t\t\t} while ( scale !== (scale = tween.cur() / target) && scale !== 1 && --maxIterations );\n\t\t\t\t}\n\n\t\t\t\ttween.unit = unit;\n\t\t\t\ttween.start = start;\n\t\t\t\t// If a +=/-= token was provided, we're doing a relative animation\n\t\t\t\ttween.end = parts[1] ? start + ( parts[1] + 1 ) * end : end;\n\t\t\t}\n\t\t\treturn tween;\n\t\t}]\n\t};\n\n// Animations created synchronously will run synchronously\nfunction createFxNow() {\n\tsetTimeout(function() {\n\t\tfxNow = undefined;\n\t});\n\treturn ( fxNow = jQuery.now() );\n}\n\nfunction createTweens( animation, props ) {\n\tjQuery.each( props, function( prop, value ) {\n\t\tvar collection = ( tweeners[ prop ] || [] ).concat( tweeners[ \"*\" ] ),\n\t\t\tindex = 0,\n\t\t\tlength = collection.length;\n\t\tfor ( ; index < length; index++ ) {\n\t\t\tif ( collection[ index ].call( animation, prop, value ) ) {\n\n\t\t\t\t// we're done with this property\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction Animation( elem, properties, options ) {\n\tvar result,\n\t\tstopped,\n\t\tindex = 0,\n\t\tlength = animationPrefilters.length,\n\t\tdeferred = jQuery.Deferred().always( function() {\n\t\t\t// don't match elem in the :animated selector\n\t\t\tdelete tick.elem;\n\t\t}),\n\t\ttick = function() {\n\t\t\tif ( stopped ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar currentTime = fxNow || createFxNow(),\n\t\t\t\tremaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),\n\t\t\t\t// archaic crash bug won't allow us to use 1 - ( 0.5 || 0 ) (#12497)\n\t\t\t\ttemp = remaining / animation.duration || 0,\n\t\t\t\tpercent = 1 - temp,\n\t\t\t\tindex = 0,\n\t\t\t\tlength = animation.tweens.length;\n\n\t\t\tfor ( ; index < length ; index++ ) {\n\t\t\t\tanimation.tweens[ index ].run( percent );\n\t\t\t}\n\n\t\t\tdeferred.notifyWith( elem, [ animation, percent, remaining ]);\n\n\t\t\tif ( percent < 1 && length ) {\n\t\t\t\treturn remaining;\n\t\t\t} else {\n\t\t\t\tdeferred.resolveWith( elem, [ animation ] );\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tanimation = deferred.promise({\n\t\t\telem: elem,\n\t\t\tprops: jQuery.extend( {}, properties ),\n\t\t\topts: jQuery.extend( true, { specialEasing: {} }, options ),\n\t\t\toriginalProperties: properties,\n\t\t\toriginalOptions: options,\n\t\t\tstartTime: fxNow || createFxNow(),\n\t\t\tduration: options.duration,\n\t\t\ttweens: [],\n\t\t\tcreateTween: function( prop, end ) {\n\t\t\t\tvar tween = jQuery.Tween( elem, animation.opts, prop, end,\n\t\t\t\t\t\tanimation.opts.specialEasing[ prop ] || animation.opts.easing );\n\t\t\t\tanimation.tweens.push( tween );\n\t\t\t\treturn tween;\n\t\t\t},\n\t\t\tstop: function( gotoEnd ) {\n\t\t\t\tvar index = 0,\n\t\t\t\t\t// if we are going to the end, we want to run all the tweens\n\t\t\t\t\t// otherwise we skip this part\n\t\t\t\t\tlength = gotoEnd ? animation.tweens.length : 0;\n\t\t\t\tif ( stopped ) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t\tstopped = true;\n\t\t\t\tfor ( ; index < length ; index++ ) {\n\t\t\t\t\tanimation.tweens[ index ].run( 1 );\n\t\t\t\t}\n\n\t\t\t\t// resolve when we played the last frame\n\t\t\t\t// otherwise, reject\n\t\t\t\tif ( gotoEnd ) {\n\t\t\t\t\tdeferred.resolveWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t} else {\n\t\t\t\t\tdeferred.rejectWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}),\n\t\tprops = animation.props;\n\n\tpropFilter( props, animation.opts.specialEasing );\n\n\tfor ( ; index < length ; index++ ) {\n\t\tresult = animationPrefilters[ index ].call( animation, elem, props, animation.opts );\n\t\tif ( result ) {\n\t\t\treturn result;\n\t\t}\n\t}\n\n\tcreateTweens( animation, props );\n\n\tif ( jQuery.isFunction( animation.opts.start ) ) {\n\t\tanimation.opts.start.call( elem, animation );\n\t}\n\n\tjQuery.fx.timer(\n\t\tjQuery.extend( tick, {\n\t\t\telem: elem,\n\t\t\tanim: animation,\n\t\t\tqueue: animation.opts.queue\n\t\t})\n\t);\n\n\t// attach callbacks from options\n\treturn animation.progress( animation.opts.progress )\n\t\t.done( animation.opts.done, animation.opts.complete )\n\t\t.fail( animation.opts.fail )\n\t\t.always( animation.opts.always );\n}\n\nfunction propFilter( props, specialEasing ) {\n\tvar value, name, index, easing, hooks;\n\n\t// camelCase, specialEasing and expand cssHook pass\n\tfor ( index in props ) {\n\t\tname = jQuery.camelCase( index );\n\t\teasing = specialEasing[ name ];\n\t\tvalue = props[ index ];\n\t\tif ( jQuery.isArray( value ) ) {\n\t\t\teasing = value[ 1 ];\n\t\t\tvalue = props[ index ] = value[ 0 ];\n\t\t}\n\n\t\tif ( index !== name ) {\n\t\t\tprops[ name ] = value;\n\t\t\tdelete props[ index ];\n\t\t}\n\n\t\thooks = jQuery.cssHooks[ name ];\n\t\tif ( hooks && \"expand\" in hooks ) {\n\t\t\tvalue = hooks.expand( value );\n\t\t\tdelete props[ name ];\n\n\t\t\t// not quite $.extend, this wont overwrite keys already present.\n\t\t\t// also - reusing 'index' from above because we have the correct \"name\"\n\t\t\tfor ( index in value ) {\n\t\t\t\tif ( !( index in props ) ) {\n\t\t\t\t\tprops[ index ] = value[ index ];\n\t\t\t\t\tspecialEasing[ index ] = easing;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tspecialEasing[ name ] = easing;\n\t\t}\n\t}\n}\n\njQuery.Animation = jQuery.extend( Animation, {\n\n\ttweener: function( props, callback ) {\n\t\tif ( jQuery.isFunction( props ) ) {\n\t\t\tcallback = props;\n\t\t\tprops = [ \"*\" ];\n\t\t} else {\n\t\t\tprops = props.split(\" \");\n\t\t}\n\n\t\tvar prop,\n\t\t\tindex = 0,\n\t\t\tlength = props.length;\n\n\t\tfor ( ; index < length ; index++ ) {\n\t\t\tprop = props[ index ];\n\t\t\ttweeners[ prop ] = tweeners[ prop ] || [];\n\t\t\ttweeners[ prop ].unshift( callback );\n\t\t}\n\t},\n\n\tprefilter: function( callback, prepend ) {\n\t\tif ( prepend ) {\n\t\t\tanimationPrefilters.unshift( callback );\n\t\t} else {\n\t\t\tanimationPrefilters.push( callback );\n\t\t}\n\t}\n});\n\nfunction defaultPrefilter( elem, props, opts ) {\n\t/*jshint validthis:true */\n\tvar prop, index, length,\n\t\tvalue, dataShow, toggle,\n\t\ttween, hooks, oldfire,\n\t\tanim = this,\n\t\tstyle = elem.style,\n\t\torig = {},\n\t\thandled = [],\n\t\thidden = elem.nodeType && isHidden( elem );\n\n\t// handle queue: false promises\n\tif ( !opts.queue ) {\n\t\thooks = jQuery._queueHooks( elem, \"fx\" );\n\t\tif ( hooks.unqueued == null ) {\n\t\t\thooks.unqueued = 0;\n\t\t\toldfire = hooks.empty.fire;\n\t\t\thooks.empty.fire = function() {\n\t\t\t\tif ( !hooks.unqueued ) {\n\t\t\t\t\toldfire();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\thooks.unqueued++;\n\n\t\tanim.always(function() {\n\t\t\t// doing this makes sure that the complete handler will be called\n\t\t\t// before this completes\n\t\t\tanim.always(function() {\n\t\t\t\thooks.unqueued--;\n\t\t\t\tif ( !jQuery.queue( elem, \"fx\" ).length ) {\n\t\t\t\t\thooks.empty.fire();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t// height/width overflow pass\n\tif ( elem.nodeType === 1 && ( \"height\" in props || \"width\" in props ) ) {\n\t\t// Make sure that nothing sneaks out\n\t\t// Record all 3 overflow attributes because IE does not\n\t\t// change the overflow attribute when overflowX and\n\t\t// overflowY are set to the same value\n\t\topts.overflow = [ style.overflow, style.overflowX, style.overflowY ];\n\n\t\t// Set display property to inline-block for height/width\n\t\t// animations on inline elements that are having width/height animated\n\t\tif ( jQuery.css( elem, \"display\" ) === \"inline\" &&\n\t\t\t\tjQuery.css( elem, \"float\" ) === \"none\" ) {\n\n\t\t\t// inline-level elements accept inline-block;\n\t\t\t// block-level elements need to be inline with layout\n\t\t\tif ( !jQuery.support.inlineBlockNeedsLayout || css_defaultDisplay( elem.nodeName ) === \"inline\" ) {\n\t\t\t\tstyle.display = \"inline-block\";\n\n\t\t\t} else {\n\t\t\t\tstyle.zoom = 1;\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( opts.overflow ) {\n\t\tstyle.overflow = \"hidden\";\n\t\tif ( !jQuery.support.shrinkWrapBlocks ) {\n\t\t\tanim.always(function() {\n\t\t\t\tstyle.overflow = opts.overflow[ 0 ];\n\t\t\t\tstyle.overflowX = opts.overflow[ 1 ];\n\t\t\t\tstyle.overflowY = opts.overflow[ 2 ];\n\t\t\t});\n\t\t}\n\t}\n\n\n\t// show/hide pass\n\tfor ( index in props ) {\n\t\tvalue = props[ index ];\n\t\tif ( rfxtypes.exec( value ) ) {\n\t\t\tdelete props[ index ];\n\t\t\ttoggle = toggle || value === \"toggle\";\n\t\t\tif ( value === ( hidden ? \"hide\" : \"show\" ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\thandled.push( index );\n\t\t}\n\t}\n\n\tlength = handled.length;\n\tif ( length ) {\n\t\tdataShow = jQuery._data( elem, \"fxshow\" ) || jQuery._data( elem, \"fxshow\", {} );\n\t\tif ( \"hidden\" in dataShow ) {\n\t\t\thidden = dataShow.hidden;\n\t\t}\n\n\t\t// store state if its toggle - enables .stop().toggle() to \"reverse\"\n\t\tif ( toggle ) {\n\t\t\tdataShow.hidden = !hidden;\n\t\t}\n\t\tif ( hidden ) {\n\t\t\tjQuery( elem ).show();\n\t\t} else {\n\t\t\tanim.done(function() {\n\t\t\t\tjQuery( elem ).hide();\n\t\t\t});\n\t\t}\n\t\tanim.done(function() {\n\t\t\tvar prop;\n\t\t\tjQuery._removeData( elem, \"fxshow\" );\n\t\t\tfor ( prop in orig ) {\n\t\t\t\tjQuery.style( elem, prop, orig[ prop ] );\n\t\t\t}\n\t\t});\n\t\tfor ( index = 0 ; index < length ; index++ ) {\n\t\t\tprop = handled[ index ];\n\t\t\ttween = anim.createTween( prop, hidden ? dataShow[ prop ] : 0 );\n\t\t\torig[ prop ] = dataShow[ prop ] || jQuery.style( elem, prop );\n\n\t\t\tif ( !( prop in dataShow ) ) {\n\t\t\t\tdataShow[ prop ] = tween.start;\n\t\t\t\tif ( hidden ) {\n\t\t\t\t\ttween.end = tween.start;\n\t\t\t\t\ttween.start = prop === \"width\" || prop === \"height\" ? 1 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction Tween( elem, options, prop, end, easing ) {\n\treturn new Tween.prototype.init( elem, options, prop, end, easing );\n}\njQuery.Tween = Tween;\n\nTween.prototype = {\n\tconstructor: Tween,\n\tinit: function( elem, options, prop, end, easing, unit ) {\n\t\tthis.elem = elem;\n\t\tthis.prop = prop;\n\t\tthis.easing = easing || \"swing\";\n\t\tthis.options = options;\n\t\tthis.start = this.now = this.cur();\n\t\tthis.end = end;\n\t\tthis.unit = unit || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" );\n\t},\n\tcur: function() {\n\t\tvar hooks = Tween.propHooks[ this.prop ];\n\n\t\treturn hooks && hooks.get ?\n\t\t\thooks.get( this ) :\n\t\t\tTween.propHooks._default.get( this );\n\t},\n\trun: function( percent ) {\n\t\tvar eased,\n\t\t\thooks = Tween.propHooks[ this.prop ];\n\n\t\tif ( this.options.duration ) {\n\t\t\tthis.pos = eased = jQuery.easing[ this.easing ](\n\t\t\t\tpercent, this.options.duration * percent, 0, 1, this.options.duration\n\t\t\t);\n\t\t} else {\n\t\t\tthis.pos = eased = percent;\n\t\t}\n\t\tthis.now = ( this.end - this.start ) * eased + this.start;\n\n\t\tif ( this.options.step ) {\n\t\t\tthis.options.step.call( this.elem, this.now, this );\n\t\t}\n\n\t\tif ( hooks && hooks.set ) {\n\t\t\thooks.set( this );\n\t\t} else {\n\t\t\tTween.propHooks._default.set( this );\n\t\t}\n\t\treturn this;\n\t}\n};\n\nTween.prototype.init.prototype = Tween.prototype;\n\nTween.propHooks = {\n\t_default: {\n\t\tget: function( tween ) {\n\t\t\tvar result;\n\n\t\t\tif ( tween.elem[ tween.prop ] != null &&\n\t\t\t\t(!tween.elem.style || tween.elem.style[ tween.prop ] == null) ) {\n\t\t\t\treturn tween.elem[ tween.prop ];\n\t\t\t}\n\n\t\t\t// passing an empty string as a 3rd parameter to .css will automatically\n\t\t\t// attempt a parseFloat and fallback to a string if the parse fails\n\t\t\t// so, simple values such as \"10px\" are parsed to Float.\n\t\t\t// complex values such as \"rotate(1rad)\" are returned as is.\n\t\t\tresult = jQuery.css( tween.elem, tween.prop, \"\" );\n\t\t\t// Empty strings, null, undefined and \"auto\" are converted to 0.\n\t\t\treturn !result || result === \"auto\" ? 0 : result;\n\t\t},\n\t\tset: function( tween ) {\n\t\t\t// use step hook for back compat - use cssHook if its there - use .style if its\n\t\t\t// available and use plain properties where available\n\t\t\tif ( jQuery.fx.step[ tween.prop ] ) {\n\t\t\t\tjQuery.fx.step[ tween.prop ]( tween );\n\t\t\t} else if ( tween.elem.style && ( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null || jQuery.cssHooks[ tween.prop ] ) ) {\n\t\t\t\tjQuery.style( tween.elem, tween.prop, tween.now + tween.unit );\n\t\t\t} else {\n\t\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t\t}\n\t\t}\n\t}\n};\n\n// Remove in 2.0 - this supports IE8's panic based approach\n// to setting things on disconnected nodes\n\nTween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {\n\tset: function( tween ) {\n\t\tif ( tween.elem.nodeType && tween.elem.parentNode ) {\n\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t}\n\t}\n};\n\njQuery.each([ \"toggle\", \"show\", \"hide\" ], function( i, name ) {\n\tvar cssFn = jQuery.fn[ name ];\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn speed == null || typeof speed === \"boolean\" ?\n\t\t\tcssFn.apply( this, arguments ) :\n\t\t\tthis.animate( genFx( name, true ), speed, easing, callback );\n\t};\n});\n\njQuery.fn.extend({\n\tfadeTo: function( speed, to, easing, callback ) {\n\n\t\t// show any hidden elements after setting opacity to 0\n\t\treturn this.filter( isHidden ).css( \"opacity\", 0 ).show()\n\n\t\t\t// animate to the value specified\n\t\t\t.end().animate({ opacity: to }, speed, easing, callback );\n\t},\n\tanimate: function( prop, speed, easing, callback ) {\n\t\tvar empty = jQuery.isEmptyObject( prop ),\n\t\t\toptall = jQuery.speed( speed, easing, callback ),\n\t\t\tdoAnimation = function() {\n\t\t\t\t// Operate on a copy of prop so per-property easing won't be lost\n\t\t\t\tvar anim = Animation( this, jQuery.extend( {}, prop ), optall );\n\t\t\t\tdoAnimation.finish = function() {\n\t\t\t\t\tanim.stop( true );\n\t\t\t\t};\n\t\t\t\t// Empty animations, or finishing resolves immediately\n\t\t\t\tif ( empty || jQuery._data( this, \"finish\" ) ) {\n\t\t\t\t\tanim.stop( true );\n\t\t\t\t}\n\t\t\t};\n\t\t\tdoAnimation.finish = doAnimation;\n\n\t\treturn empty || optall.queue === false ?\n\t\t\tthis.each( doAnimation ) :\n\t\t\tthis.queue( optall.queue, doAnimation );\n\t},\n\tstop: function( type, clearQueue, gotoEnd ) {\n\t\tvar stopQueue = function( hooks ) {\n\t\t\tvar stop = hooks.stop;\n\t\t\tdelete hooks.stop;\n\t\t\tstop( gotoEnd );\n\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tgotoEnd = clearQueue;\n\t\t\tclearQueue = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\tif ( clearQueue && type !== false ) {\n\t\t\tthis.queue( type || \"fx\", [] );\n\t\t}\n\n\t\treturn this.each(function() {\n\t\t\tvar dequeue = true,\n\t\t\t\tindex = type != null && type + \"queueHooks\",\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tdata = jQuery._data( this );\n\n\t\t\tif ( index ) {\n\t\t\t\tif ( data[ index ] && data[ index ].stop ) {\n\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( index in data ) {\n\t\t\t\t\tif ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {\n\t\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this && (type == null || timers[ index ].queue === type) ) {\n\t\t\t\t\ttimers[ index ].anim.stop( gotoEnd );\n\t\t\t\t\tdequeue = false;\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// start the next in the queue if the last step wasn't forced\n\t\t\t// timers currently will call their complete callbacks, which will dequeue\n\t\t\t// but only if they were gotoEnd\n\t\t\tif ( dequeue || !gotoEnd ) {\n\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t}\n\t\t});\n\t},\n\tfinish: function( type ) {\n\t\tif ( type !== false ) {\n\t\t\ttype = type || \"fx\";\n\t\t}\n\t\treturn this.each(function() {\n\t\t\tvar index,\n\t\t\t\tdata = jQuery._data( this ),\n\t\t\t\tqueue = data[ type + \"queue\" ],\n\t\t\t\thooks = data[ type + \"queueHooks\" ],\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tlength = queue ? queue.length : 0;\n\n\t\t\t// enable finishing flag on private data\n\t\t\tdata.finish = true;\n\n\t\t\t// empty the queue first\n\t\t\tjQuery.queue( this, type, [] );\n\n\t\t\tif ( hooks && hooks.cur && hooks.cur.finish ) {\n\t\t\t\thooks.cur.finish.call( this );\n\t\t\t}\n\n\t\t\t// look for any active animations, and finish them\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this && timers[ index ].queue === type ) {\n\t\t\t\t\ttimers[ index ].anim.stop( true );\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// look for any animations in the old queue and finish them\n\t\t\tfor ( index = 0; index < length; index++ ) {\n\t\t\t\tif ( queue[ index ] && queue[ index ].finish ) {\n\t\t\t\t\tqueue[ index ].finish.call( this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// turn off finishing flag\n\t\t\tdelete data.finish;\n\t\t});\n\t}\n});\n\n// Generate parameters to create a standard animation\nfunction genFx( type, includeWidth ) {\n\tvar which,\n\t\tattrs = { height: type },\n\t\ti = 0;\n\n\t// if we include width, step value is 1 to do all cssExpand values,\n\t// if we don't include width, step value is 2 to skip over Left and Right\n\tincludeWidth = includeWidth? 1 : 0;\n\tfor( ; i < 4 ; i += 2 - includeWidth ) {\n\t\twhich = cssExpand[ i ];\n\t\tattrs[ \"margin\" + which ] = attrs[ \"padding\" + which ] = type;\n\t}\n\n\tif ( includeWidth ) {\n\t\tattrs.opacity = attrs.width = type;\n\t}\n\n\treturn attrs;\n}\n\n// Generate shortcuts for custom animations\njQuery.each({\n\tslideDown: genFx(\"show\"),\n\tslideUp: genFx(\"hide\"),\n\tslideToggle: genFx(\"toggle\"),\n\tfadeIn: { opacity: \"show\" },\n\tfadeOut: { opacity: \"hide\" },\n\tfadeToggle: { opacity: \"toggle\" }\n}, function( name, props ) {\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn this.animate( props, speed, easing, callback );\n\t};\n});\n\njQuery.speed = function( speed, easing, fn ) {\n\tvar opt = speed && typeof speed === \"object\" ? jQuery.extend( {}, speed ) : {\n\t\tcomplete: fn || !fn && easing ||\n\t\t\tjQuery.isFunction( speed ) && speed,\n\t\tduration: speed,\n\t\teasing: fn && easing || easing && !jQuery.isFunction( easing ) && easing\n\t};\n\n\topt.duration = jQuery.fx.off ? 0 : typeof opt.duration === \"number\" ? opt.duration :\n\t\topt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[ opt.duration ] : jQuery.fx.speeds._default;\n\n\t// normalize opt.queue - true/undefined/null -> \"fx\"\n\tif ( opt.queue == null || opt.queue === true ) {\n\t\topt.queue = \"fx\";\n\t}\n\n\t// Queueing\n\topt.old = opt.complete;\n\n\topt.complete = function() {\n\t\tif ( jQuery.isFunction( opt.old ) ) {\n\t\t\topt.old.call( this );\n\t\t}\n\n\t\tif ( opt.queue ) {\n\t\t\tjQuery.dequeue( this, opt.queue );\n\t\t}\n\t};\n\n\treturn opt;\n};\n\njQuery.easing = {\n\tlinear: function( p ) {\n\t\treturn p;\n\t},\n\tswing: function( p ) {\n\t\treturn 0.5 - Math.cos( p*Math.PI ) / 2;\n\t}\n};\n\njQuery.timers = [];\njQuery.fx = Tween.prototype.init;\njQuery.fx.tick = function() {\n\tvar timer,\n\t\ttimers = jQuery.timers,\n\t\ti = 0;\n\n\tfxNow = jQuery.now();\n\n\tfor ( ; i < timers.length; i++ ) {\n\t\ttimer = timers[ i ];\n\t\t// Checks the timer has not already been removed\n\t\tif ( !timer() && timers[ i ] === timer ) {\n\t\t\ttimers.splice( i--, 1 );\n\t\t}\n\t}\n\n\tif ( !timers.length ) {\n\t\tjQuery.fx.stop();\n\t}\n\tfxNow = undefined;\n};\n\njQuery.fx.timer = function( timer ) {\n\tif ( timer() && jQuery.timers.push( timer ) ) {\n\t\tjQuery.fx.start();\n\t}\n};\n\njQuery.fx.interval = 13;\n\njQuery.fx.start = function() {\n\tif ( !timerId ) {\n\t\ttimerId = setInterval( jQuery.fx.tick, jQuery.fx.interval );\n\t}\n};\n\njQuery.fx.stop = function() {\n\tclearInterval( timerId );\n\ttimerId = null;\n};\n\njQuery.fx.speeds = {\n\tslow: 600,\n\tfast: 200,\n\t// Default speed\n\t_default: 400\n};\n\n// Back Compat <1.8 extension point\njQuery.fx.step = {};\n\nif ( jQuery.expr && jQuery.expr.filters ) {\n\tjQuery.expr.filters.animated = function( elem ) {\n\t\treturn jQuery.grep(jQuery.timers, function( fn ) {\n\t\t\treturn elem === fn.elem;\n\t\t}).length;\n\t};\n}\njQuery.fn.offset = function( options ) {\n\tif ( arguments.length ) {\n\t\treturn options === undefined ?\n\t\t\tthis :\n\t\t\tthis.each(function( i ) {\n\t\t\t\tjQuery.offset.setOffset( this, options, i );\n\t\t\t});\n\t}\n\n\tvar docElem, win,\n\t\tbox = { top: 0, left: 0 },\n\t\telem = this[ 0 ],\n\t\tdoc = elem && elem.ownerDocument;\n\n\tif ( !doc ) {\n\t\treturn;\n\t}\n\n\tdocElem = doc.documentElement;\n\n\t// Make sure it's not a disconnected DOM node\n\tif ( !jQuery.contains( docElem, elem ) ) {\n\t\treturn box;\n\t}\n\n\t// If we don't have gBCR, just use 0,0 rather than error\n\t// BlackBerry 5, iOS 3 (original iPhone)\n\tif ( typeof elem.getBoundingClientRect !== core_strundefined ) {\n\t\tbox = elem.getBoundingClientRect();\n\t}\n\twin = getWindow( doc );\n\treturn {\n\t\ttop: box.top  + ( win.pageYOffset || docElem.scrollTop )  - ( docElem.clientTop  || 0 ),\n\t\tleft: box.left + ( win.pageXOffset || docElem.scrollLeft ) - ( docElem.clientLeft || 0 )\n\t};\n};\n\njQuery.offset = {\n\n\tsetOffset: function( elem, options, i ) {\n\t\tvar position = jQuery.css( elem, \"position\" );\n\n\t\t// set position first, in-case top/left are set even on static elem\n\t\tif ( position === \"static\" ) {\n\t\t\telem.style.position = \"relative\";\n\t\t}\n\n\t\tvar curElem = jQuery( elem ),\n\t\t\tcurOffset = curElem.offset(),\n\t\t\tcurCSSTop = jQuery.css( elem, \"top\" ),\n\t\t\tcurCSSLeft = jQuery.css( elem, \"left\" ),\n\t\t\tcalculatePosition = ( position === \"absolute\" || position === \"fixed\" ) && jQuery.inArray(\"auto\", [curCSSTop, curCSSLeft]) > -1,\n\t\t\tprops = {}, curPosition = {}, curTop, curLeft;\n\n\t\t// need to be able to calculate position if either top or left is auto and position is either absolute or fixed\n\t\tif ( calculatePosition ) {\n\t\t\tcurPosition = curElem.position();\n\t\t\tcurTop = curPosition.top;\n\t\t\tcurLeft = curPosition.left;\n\t\t} else {\n\t\t\tcurTop = parseFloat( curCSSTop ) || 0;\n\t\t\tcurLeft = parseFloat( curCSSLeft ) || 0;\n\t\t}\n\n\t\tif ( jQuery.isFunction( options ) ) {\n\t\t\toptions = options.call( elem, i, curOffset );\n\t\t}\n\n\t\tif ( options.top != null ) {\n\t\t\tprops.top = ( options.top - curOffset.top ) + curTop;\n\t\t}\n\t\tif ( options.left != null ) {\n\t\t\tprops.left = ( options.left - curOffset.left ) + curLeft;\n\t\t}\n\n\t\tif ( \"using\" in options ) {\n\t\t\toptions.using.call( elem, props );\n\t\t} else {\n\t\t\tcurElem.css( props );\n\t\t}\n\t}\n};\n\n\njQuery.fn.extend({\n\n\tposition: function() {\n\t\tif ( !this[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar offsetParent, offset,\n\t\t\tparentOffset = { top: 0, left: 0 },\n\t\t\telem = this[ 0 ];\n\n\t\t// fixed elements are offset from window (parentOffset = {top:0, left: 0}, because it is it's only offset parent\n\t\tif ( jQuery.css( elem, \"position\" ) === \"fixed\" ) {\n\t\t\t// we assume that getBoundingClientRect is available when computed position is fixed\n\t\t\toffset = elem.getBoundingClientRect();\n\t\t} else {\n\t\t\t// Get *real* offsetParent\n\t\t\toffsetParent = this.offsetParent();\n\n\t\t\t// Get correct offsets\n\t\t\toffset = this.offset();\n\t\t\tif ( !jQuery.nodeName( offsetParent[ 0 ], \"html\" ) ) {\n\t\t\t\tparentOffset = offsetParent.offset();\n\t\t\t}\n\n\t\t\t// Add offsetParent borders\n\t\t\tparentOffset.top  += jQuery.css( offsetParent[ 0 ], \"borderTopWidth\", true );\n\t\t\tparentOffset.left += jQuery.css( offsetParent[ 0 ], \"borderLeftWidth\", true );\n\t\t}\n\n\t\t// Subtract parent offsets and element margins\n\t\t// note: when an element has margin: auto the offsetLeft and marginLeft\n\t\t// are the same in Safari causing offset.left to incorrectly be 0\n\t\treturn {\n\t\t\ttop:  offset.top  - parentOffset.top - jQuery.css( elem, \"marginTop\", true ),\n\t\t\tleft: offset.left - parentOffset.left - jQuery.css( elem, \"marginLeft\", true)\n\t\t};\n\t},\n\n\toffsetParent: function() {\n\t\treturn this.map(function() {\n\t\t\tvar offsetParent = this.offsetParent || document.documentElement;\n\t\t\twhile ( offsetParent && ( !jQuery.nodeName( offsetParent, \"html\" ) && jQuery.css( offsetParent, \"position\") === \"static\" ) ) {\n\t\t\t\toffsetParent = offsetParent.offsetParent;\n\t\t\t}\n\t\t\treturn offsetParent || document.documentElement;\n\t\t});\n\t}\n});\n\n\n// Create scrollLeft and scrollTop methods\njQuery.each( {scrollLeft: \"pageXOffset\", scrollTop: \"pageYOffset\"}, function( method, prop ) {\n\tvar top = /Y/.test( prop );\n\n\tjQuery.fn[ method ] = function( val ) {\n\t\treturn jQuery.access( this, function( elem, method, val ) {\n\t\t\tvar win = getWindow( elem );\n\n\t\t\tif ( val === undefined ) {\n\t\t\t\treturn win ? (prop in win) ? win[ prop ] :\n\t\t\t\t\twin.document.documentElement[ method ] :\n\t\t\t\t\telem[ method ];\n\t\t\t}\n\n\t\t\tif ( win ) {\n\t\t\t\twin.scrollTo(\n\t\t\t\t\t!top ? val : jQuery( win ).scrollLeft(),\n\t\t\t\t\ttop ? val : jQuery( win ).scrollTop()\n\t\t\t\t);\n\n\t\t\t} else {\n\t\t\t\telem[ method ] = val;\n\t\t\t}\n\t\t}, method, val, arguments.length, null );\n\t};\n});\n\nfunction getWindow( elem ) {\n\treturn jQuery.isWindow( elem ) ?\n\t\telem :\n\t\telem.nodeType === 9 ?\n\t\t\telem.defaultView || elem.parentWindow :\n\t\t\tfalse;\n}\n// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods\njQuery.each( { Height: \"height\", Width: \"width\" }, function( name, type ) {\n\tjQuery.each( { padding: \"inner\" + name, content: type, \"\": \"outer\" + name }, function( defaultExtra, funcName ) {\n\t\t// margin is only for outerHeight, outerWidth\n\t\tjQuery.fn[ funcName ] = function( margin, value ) {\n\t\t\tvar chainable = arguments.length && ( defaultExtra || typeof margin !== \"boolean\" ),\n\t\t\t\textra = defaultExtra || ( margin === true || value === true ? \"margin\" : \"border\" );\n\n\t\t\treturn jQuery.access( this, function( elem, type, value ) {\n\t\t\t\tvar doc;\n\n\t\t\t\tif ( jQuery.isWindow( elem ) ) {\n\t\t\t\t\t// As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there\n\t\t\t\t\t// isn't a whole lot we can do. See pull request at this URL for discussion:\n\t\t\t\t\t// https://github.com/jquery/jquery/pull/764\n\t\t\t\t\treturn elem.document.documentElement[ \"client\" + name ];\n\t\t\t\t}\n\n\t\t\t\t// Get document width or height\n\t\t\t\tif ( elem.nodeType === 9 ) {\n\t\t\t\t\tdoc = elem.documentElement;\n\n\t\t\t\t\t// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height], whichever is greatest\n\t\t\t\t\t// unfortunately, this causes bug #3838 in IE6/8 only, but there is currently no good, small way to fix it.\n\t\t\t\t\treturn Math.max(\n\t\t\t\t\t\telem.body[ \"scroll\" + name ], doc[ \"scroll\" + name ],\n\t\t\t\t\t\telem.body[ \"offset\" + name ], doc[ \"offset\" + name ],\n\t\t\t\t\t\tdoc[ \"client\" + name ]\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn value === undefined ?\n\t\t\t\t\t// Get width or height on the element, requesting but not forcing parseFloat\n\t\t\t\t\tjQuery.css( elem, type, extra ) :\n\n\t\t\t\t\t// Set width or height on the element\n\t\t\t\t\tjQuery.style( elem, type, value, extra );\n\t\t\t}, type, chainable ? margin : undefined, chainable, null );\n\t\t};\n\t});\n});\n// Limit scope pollution from any deprecated API\n// (function() {\n\n// })();\n// Expose jQuery to the global object\nwindow.jQuery = window.$ = jQuery;\n\n// Expose jQuery as an AMD module, but only for AMD loaders that\n// understand the issues with loading multiple versions of jQuery\n// in a page that all might call define(). The loader will indicate\n// they have special allowances for multiple jQuery versions by\n// specifying define.amd.jQuery = true. Register as a named module,\n// since jQuery can be concatenated with other files that may use define,\n// but not use a proper concatenation script that understands anonymous\n// AMD modules. A named AMD is safest and most robust way to register.\n// Lowercase jquery is used because AMD module names are derived from\n// file names, and jQuery is normally delivered in a lowercase file name.\n// Do this after creating the global so that if an AMD module wants to call\n// noConflict to hide this version of jQuery, it will work.\nif ( typeof define === \"function\" && define.amd && define.amd.jQuery ) {\n\tdefine( \"jquery\", [], function () { return jQuery; } );\n}\n\n})( window );\n\n}\n, \"ep_etherpad-lite/static/js/rjquery.js\": function (require, exports, module) {\n\n// Proviedes a require'able version of jQuery without leaking $ and jQuery;\nrequire('./jquery');\nvar jq = window.$.noConflict(true);\nexports.jQuery = exports.$ = jq;\n\n}\n, \"async.js\": null\n, \"async/lib/async.js\": function (require, exports, module) {\n/*!\n * async\n * https://github.com/caolan/async\n *\n * Copyright 2010-2014 Caolan McMahon\n * Released under the MIT license\n */\n/*jshint onevar: false, indent:4 */\n/*global setImmediate: false, setTimeout: false, console: false */\n(function () {\n\n    var async = {};\n\n    // global on the server, window in the browser\n    var root, previous_async;\n\n    root = this;\n    if (root != null) {\n      previous_async = root.async;\n    }\n\n    async.noConflict = function () {\n        root.async = previous_async;\n        return async;\n    };\n\n    function only_once(fn) {\n        var called = false;\n        return function() {\n            if (called) throw new Error(\"Callback was already called.\");\n            called = true;\n            fn.apply(root, arguments);\n        }\n    }\n\n    //// cross-browser compatiblity functions ////\n\n    var _toString = Object.prototype.toString;\n\n    var _isArray = Array.isArray || function (obj) {\n        return _toString.call(obj) === '[object Array]';\n    };\n\n    var _each = function (arr, iterator) {\n        if (arr.forEach) {\n            return arr.forEach(iterator);\n        }\n        for (var i = 0; i < arr.length; i += 1) {\n            iterator(arr[i], i, arr);\n        }\n    };\n\n    var _map = function (arr, iterator) {\n        if (arr.map) {\n            return arr.map(iterator);\n        }\n        var results = [];\n        _each(arr, function (x, i, a) {\n            results.push(iterator(x, i, a));\n        });\n        return results;\n    };\n\n    var _reduce = function (arr, iterator, memo) {\n        if (arr.reduce) {\n            return arr.reduce(iterator, memo);\n        }\n        _each(arr, function (x, i, a) {\n            memo = iterator(memo, x, i, a);\n        });\n        return memo;\n    };\n\n    var _keys = function (obj) {\n        if (Object.keys) {\n            return Object.keys(obj);\n        }\n        var keys = [];\n        for (var k in obj) {\n            if (obj.hasOwnProperty(k)) {\n                keys.push(k);\n            }\n        }\n        return keys;\n    };\n\n    //// exported async module functions ////\n\n    //// nextTick implementation with browser-compatible fallback ////\n    if (typeof process === 'undefined' || !(process.nextTick)) {\n        if (typeof setImmediate === 'function') {\n            async.nextTick = function (fn) {\n                // not a direct alias for IE10 compatibility\n                setImmediate(fn);\n            };\n            async.setImmediate = async.nextTick;\n        }\n        else {\n            async.nextTick = function (fn) {\n                setTimeout(fn, 0);\n            };\n            async.setImmediate = async.nextTick;\n        }\n    }\n    else {\n        async.nextTick = process.nextTick;\n        if (typeof setImmediate !== 'undefined') {\n            async.setImmediate = function (fn) {\n              // not a direct alias for IE10 compatibility\n              setImmediate(fn);\n            };\n        }\n        else {\n            async.setImmediate = async.nextTick;\n        }\n    }\n\n    async.each = function (arr, iterator, callback) {\n        callback = callback || function () {};\n        if (!arr.length) {\n            return callback();\n        }\n        var completed = 0;\n        _each(arr, function (x) {\n            iterator(x, only_once(done) );\n        });\n        function done(err) {\n          if (err) {\n              callback(err);\n              callback = function () {};\n          }\n          else {\n              completed += 1;\n              if (completed >= arr.length) {\n                  callback();\n              }\n          }\n        }\n    };\n    async.forEach = async.each;\n\n    async.eachSeries = function (arr, iterator, callback) {\n        callback = callback || function () {};\n        if (!arr.length) {\n            return callback();\n        }\n        var completed = 0;\n        var iterate = function () {\n            iterator(arr[completed], function (err) {\n                if (err) {\n                    callback(err);\n                    callback = function () {};\n                }\n                else {\n                    completed += 1;\n                    if (completed >= arr.length) {\n                        callback();\n                    }\n                    else {\n                        iterate();\n                    }\n                }\n            });\n        };\n        iterate();\n    };\n    async.forEachSeries = async.eachSeries;\n\n    async.eachLimit = function (arr, limit, iterator, callback) {\n        var fn = _eachLimit(limit);\n        fn.apply(null, [arr, iterator, callback]);\n    };\n    async.forEachLimit = async.eachLimit;\n\n    var _eachLimit = function (limit) {\n\n        return function (arr, iterator, callback) {\n            callback = callback || function () {};\n            if (!arr.length || limit <= 0) {\n                return callback();\n            }\n            var completed = 0;\n            var started = 0;\n            var running = 0;\n\n            (function replenish () {\n                if (completed >= arr.length) {\n                    return callback();\n                }\n\n                while (running < limit && started < arr.length) {\n                    started += 1;\n                    running += 1;\n                    iterator(arr[started - 1], function (err) {\n                        if (err) {\n                            callback(err);\n                            callback = function () {};\n                        }\n                        else {\n                            completed += 1;\n                            running -= 1;\n                            if (completed >= arr.length) {\n                                callback();\n                            }\n                            else {\n                                replenish();\n                            }\n                        }\n                    });\n                }\n            })();\n        };\n    };\n\n\n    var doParallel = function (fn) {\n        return function () {\n            var args = Array.prototype.slice.call(arguments);\n            return fn.apply(null, [async.each].concat(args));\n        };\n    };\n    var doParallelLimit = function(limit, fn) {\n        return function () {\n            var args = Array.prototype.slice.call(arguments);\n            return fn.apply(null, [_eachLimit(limit)].concat(args));\n        };\n    };\n    var doSeries = function (fn) {\n        return function () {\n            var args = Array.prototype.slice.call(arguments);\n            return fn.apply(null, [async.eachSeries].concat(args));\n        };\n    };\n\n\n    var _asyncMap = function (eachfn, arr, iterator, callback) {\n        arr = _map(arr, function (x, i) {\n            return {index: i, value: x};\n        });\n        if (!callback) {\n            eachfn(arr, function (x, callback) {\n                iterator(x.value, function (err) {\n                    callback(err);\n                });\n            });\n        } else {\n            var results = [];\n            eachfn(arr, function (x, callback) {\n                iterator(x.value, function (err, v) {\n                    results[x.index] = v;\n                    callback(err);\n                });\n            }, function (err) {\n                callback(err, results);\n            });\n        }\n    };\n    async.map = doParallel(_asyncMap);\n    async.mapSeries = doSeries(_asyncMap);\n    async.mapLimit = function (arr, limit, iterator, callback) {\n        return _mapLimit(limit)(arr, iterator, callback);\n    };\n\n    var _mapLimit = function(limit) {\n        return doParallelLimit(limit, _asyncMap);\n    };\n\n    // reduce only has a series version, as doing reduce in parallel won't\n    // work in many situations.\n    async.reduce = function (arr, memo, iterator, callback) {\n        async.eachSeries(arr, function (x, callback) {\n            iterator(memo, x, function (err, v) {\n                memo = v;\n                callback(err);\n            });\n        }, function (err) {\n            callback(err, memo);\n        });\n    };\n    // inject alias\n    async.inject = async.reduce;\n    // foldl alias\n    async.foldl = async.reduce;\n\n    async.reduceRight = function (arr, memo, iterator, callback) {\n        var reversed = _map(arr, function (x) {\n            return x;\n        }).reverse();\n        async.reduce(reversed, memo, iterator, callback);\n    };\n    // foldr alias\n    async.foldr = async.reduceRight;\n\n    var _filter = function (eachfn, arr, iterator, callback) {\n        var results = [];\n        arr = _map(arr, function (x, i) {\n            return {index: i, value: x};\n        });\n        eachfn(arr, function (x, callback) {\n            iterator(x.value, function (v) {\n                if (v) {\n                    results.push(x);\n                }\n                callback();\n            });\n        }, function (err) {\n            callback(_map(results.sort(function (a, b) {\n                return a.index - b.index;\n            }), function (x) {\n                return x.value;\n            }));\n        });\n    };\n    async.filter = doParallel(_filter);\n    async.filterSeries = doSeries(_filter);\n    // select alias\n    async.select = async.filter;\n    async.selectSeries = async.filterSeries;\n\n    var _reject = function (eachfn, arr, iterator, callback) {\n        var results = [];\n        arr = _map(arr, function (x, i) {\n            return {index: i, value: x};\n        });\n        eachfn(arr, function (x, callback) {\n            iterator(x.value, function (v) {\n                if (!v) {\n                    results.push(x);\n                }\n                callback();\n            });\n        }, function (err) {\n            callback(_map(results.sort(function (a, b) {\n                return a.index - b.index;\n            }), function (x) {\n                return x.value;\n            }));\n        });\n    };\n    async.reject = doParallel(_reject);\n    async.rejectSeries = doSeries(_reject);\n\n    var _detect = function (eachfn, arr, iterator, main_callback) {\n        eachfn(arr, function (x, callback) {\n            iterator(x, function (result) {\n                if (result) {\n                    main_callback(x);\n                    main_callback = function () {};\n                }\n                else {\n                    callback();\n                }\n            });\n        }, function (err) {\n            main_callback();\n        });\n    };\n    async.detect = doParallel(_detect);\n    async.detectSeries = doSeries(_detect);\n\n    async.some = function (arr, iterator, main_callback) {\n        async.each(arr, function (x, callback) {\n            iterator(x, function (v) {\n                if (v) {\n                    main_callback(true);\n                    main_callback = function () {};\n                }\n                callback();\n            });\n        }, function (err) {\n            main_callback(false);\n        });\n    };\n    // any alias\n    async.any = async.some;\n\n    async.every = function (arr, iterator, main_callback) {\n        async.each(arr, function (x, callback) {\n            iterator(x, function (v) {\n                if (!v) {\n                    main_callback(false);\n                    main_callback = function () {};\n                }\n                callback();\n            });\n        }, function (err) {\n            main_callback(true);\n        });\n    };\n    // all alias\n    async.all = async.every;\n\n    async.sortBy = function (arr, iterator, callback) {\n        async.map(arr, function (x, callback) {\n            iterator(x, function (err, criteria) {\n                if (err) {\n                    callback(err);\n                }\n                else {\n                    callback(null, {value: x, criteria: criteria});\n                }\n            });\n        }, function (err, results) {\n            if (err) {\n                return callback(err);\n            }\n            else {\n                var fn = function (left, right) {\n                    var a = left.criteria, b = right.criteria;\n                    return a < b ? -1 : a > b ? 1 : 0;\n                };\n                callback(null, _map(results.sort(fn), function (x) {\n                    return x.value;\n                }));\n            }\n        });\n    };\n\n    async.auto = function (tasks, callback) {\n        callback = callback || function () {};\n        var keys = _keys(tasks);\n        var remainingTasks = keys.length\n        if (!remainingTasks) {\n            return callback();\n        }\n\n        var results = {};\n\n        var listeners = [];\n        var addListener = function (fn) {\n            listeners.unshift(fn);\n        };\n        var removeListener = function (fn) {\n            for (var i = 0; i < listeners.length; i += 1) {\n                if (listeners[i] === fn) {\n                    listeners.splice(i, 1);\n                    return;\n                }\n            }\n        };\n        var taskComplete = function () {\n            remainingTasks--\n            _each(listeners.slice(0), function (fn) {\n                fn();\n            });\n        };\n\n        addListener(function () {\n            if (!remainingTasks) {\n                var theCallback = callback;\n                // prevent final callback from calling itself if it errors\n                callback = function () {};\n\n                theCallback(null, results);\n            }\n        });\n\n        _each(keys, function (k) {\n            var task = _isArray(tasks[k]) ? tasks[k]: [tasks[k]];\n            var taskCallback = function (err) {\n                var args = Array.prototype.slice.call(arguments, 1);\n                if (args.length <= 1) {\n                    args = args[0];\n                }\n                if (err) {\n                    var safeResults = {};\n                    _each(_keys(results), function(rkey) {\n                        safeResults[rkey] = results[rkey];\n                    });\n                    safeResults[k] = args;\n                    callback(err, safeResults);\n                    // stop subsequent errors hitting callback multiple times\n                    callback = function () {};\n                }\n                else {\n                    results[k] = args;\n                    async.setImmediate(taskComplete);\n                }\n            };\n            var requires = task.slice(0, Math.abs(task.length - 1)) || [];\n            var ready = function () {\n                return _reduce(requires, function (a, x) {\n                    return (a && results.hasOwnProperty(x));\n                }, true) && !results.hasOwnProperty(k);\n            };\n            if (ready()) {\n                task[task.length - 1](taskCallback, results);\n            }\n            else {\n                var listener = function () {\n                    if (ready()) {\n                        removeListener(listener);\n                        task[task.length - 1](taskCallback, results);\n                    }\n                };\n                addListener(listener);\n            }\n        });\n    };\n\n    async.retry = function(times, task, callback) {\n        var DEFAULT_TIMES = 5;\n        var attempts = [];\n        // Use defaults if times not passed\n        if (typeof times === 'function') {\n            callback = task;\n            task = times;\n            times = DEFAULT_TIMES;\n        }\n        // Make sure times is a number\n        times = parseInt(times, 10) || DEFAULT_TIMES;\n        var wrappedTask = function(wrappedCallback, wrappedResults) {\n            var retryAttempt = function(task, finalAttempt) {\n                return function(seriesCallback) {\n                    task(function(err, result){\n                        seriesCallback(!err || finalAttempt, {err: err, result: result});\n                    }, wrappedResults);\n                };\n            };\n            while (times) {\n                attempts.push(retryAttempt(task, !(times-=1)));\n            }\n            async.series(attempts, function(done, data){\n                data = data[data.length - 1];\n                (wrappedCallback || callback)(data.err, data.result);\n            });\n        }\n        // If a callback is passed, run this as a controll flow\n        return callback ? wrappedTask() : wrappedTask\n    };\n\n    async.waterfall = function (tasks, callback) {\n        callback = callback || function () {};\n        if (!_isArray(tasks)) {\n          var err = new Error('First argument to waterfall must be an array of functions');\n          return callback(err);\n        }\n        if (!tasks.length) {\n            return callback();\n        }\n        var wrapIterator = function (iterator) {\n            return function (err) {\n                if (err) {\n                    callback.apply(null, arguments);\n                    callback = function () {};\n                }\n                else {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    var next = iterator.next();\n                    if (next) {\n                        args.push(wrapIterator(next));\n                    }\n                    else {\n                        args.push(callback);\n                    }\n                    async.setImmediate(function () {\n                        iterator.apply(null, args);\n                    });\n                }\n            };\n        };\n        wrapIterator(async.iterator(tasks))();\n    };\n\n    var _parallel = function(eachfn, tasks, callback) {\n        callback = callback || function () {};\n        if (_isArray(tasks)) {\n            eachfn.map(tasks, function (fn, callback) {\n                if (fn) {\n                    fn(function (err) {\n                        var args = Array.prototype.slice.call(arguments, 1);\n                        if (args.length <= 1) {\n                            args = args[0];\n                        }\n                        callback.call(null, err, args);\n                    });\n                }\n            }, callback);\n        }\n        else {\n            var results = {};\n            eachfn.each(_keys(tasks), function (k, callback) {\n                tasks[k](function (err) {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    if (args.length <= 1) {\n                        args = args[0];\n                    }\n                    results[k] = args;\n                    callback(err);\n                });\n            }, function (err) {\n                callback(err, results);\n            });\n        }\n    };\n\n    async.parallel = function (tasks, callback) {\n        _parallel({ map: async.map, each: async.each }, tasks, callback);\n    };\n\n    async.parallelLimit = function(tasks, limit, callback) {\n        _parallel({ map: _mapLimit(limit), each: _eachLimit(limit) }, tasks, callback);\n    };\n\n    async.series = function (tasks, callback) {\n        callback = callback || function () {};\n        if (_isArray(tasks)) {\n            async.mapSeries(tasks, function (fn, callback) {\n                if (fn) {\n                    fn(function (err) {\n                        var args = Array.prototype.slice.call(arguments, 1);\n                        if (args.length <= 1) {\n                            args = args[0];\n                        }\n                        callback.call(null, err, args);\n                    });\n                }\n            }, callback);\n        }\n        else {\n            var results = {};\n            async.eachSeries(_keys(tasks), function (k, callback) {\n                tasks[k](function (err) {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    if (args.length <= 1) {\n                        args = args[0];\n                    }\n                    results[k] = args;\n                    callback(err);\n                });\n            }, function (err) {\n                callback(err, results);\n            });\n        }\n    };\n\n    async.iterator = function (tasks) {\n        var makeCallback = function (index) {\n            var fn = function () {\n                if (tasks.length) {\n                    tasks[index].apply(null, arguments);\n                }\n                return fn.next();\n            };\n            fn.next = function () {\n                return (index < tasks.length - 1) ? makeCallback(index + 1): null;\n            };\n            return fn;\n        };\n        return makeCallback(0);\n    };\n\n    async.apply = function (fn) {\n        var args = Array.prototype.slice.call(arguments, 1);\n        return function () {\n            return fn.apply(\n                null, args.concat(Array.prototype.slice.call(arguments))\n            );\n        };\n    };\n\n    var _concat = function (eachfn, arr, fn, callback) {\n        var r = [];\n        eachfn(arr, function (x, cb) {\n            fn(x, function (err, y) {\n                r = r.concat(y || []);\n                cb(err);\n            });\n        }, function (err) {\n            callback(err, r);\n        });\n    };\n    async.concat = doParallel(_concat);\n    async.concatSeries = doSeries(_concat);\n\n    async.whilst = function (test, iterator, callback) {\n        if (test()) {\n            iterator(function (err) {\n                if (err) {\n                    return callback(err);\n                }\n                async.whilst(test, iterator, callback);\n            });\n        }\n        else {\n            callback();\n        }\n    };\n\n    async.doWhilst = function (iterator, test, callback) {\n        iterator(function (err) {\n            if (err) {\n                return callback(err);\n            }\n            var args = Array.prototype.slice.call(arguments, 1);\n            if (test.apply(null, args)) {\n                async.doWhilst(iterator, test, callback);\n            }\n            else {\n                callback();\n            }\n        });\n    };\n\n    async.until = function (test, iterator, callback) {\n        if (!test()) {\n            iterator(function (err) {\n                if (err) {\n                    return callback(err);\n                }\n                async.until(test, iterator, callback);\n            });\n        }\n        else {\n            callback();\n        }\n    };\n\n    async.doUntil = function (iterator, test, callback) {\n        iterator(function (err) {\n            if (err) {\n                return callback(err);\n            }\n            var args = Array.prototype.slice.call(arguments, 1);\n            if (!test.apply(null, args)) {\n                async.doUntil(iterator, test, callback);\n            }\n            else {\n                callback();\n            }\n        });\n    };\n\n    async.queue = function (worker, concurrency) {\n        if (concurrency === undefined) {\n            concurrency = 1;\n        }\n        function _insert(q, data, pos, callback) {\n          if (!q.started){\n            q.started = true;\n          }\n          if (!_isArray(data)) {\n              data = [data];\n          }\n          if(data.length == 0) {\n             // call drain immediately if there are no tasks\n             return async.setImmediate(function() {\n                 if (q.drain) {\n                     q.drain();\n                 }\n             });\n          }\n          _each(data, function(task) {\n              var item = {\n                  data: task,\n                  callback: typeof callback === 'function' ? callback : null\n              };\n\n              if (pos) {\n                q.tasks.unshift(item);\n              } else {\n                q.tasks.push(item);\n              }\n\n              if (q.saturated && q.tasks.length === q.concurrency) {\n                  q.saturated();\n              }\n              async.setImmediate(q.process);\n          });\n        }\n\n        var workers = 0;\n        var q = {\n            tasks: [],\n            concurrency: concurrency,\n            saturated: null,\n            empty: null,\n            drain: null,\n            started: false,\n            paused: false,\n            push: function (data, callback) {\n              _insert(q, data, false, callback);\n            },\n            kill: function () {\n              q.drain = null;\n              q.tasks = [];\n            },\n            unshift: function (data, callback) {\n              _insert(q, data, true, callback);\n            },\n            process: function () {\n                if (!q.paused && workers < q.concurrency && q.tasks.length) {\n                    var task = q.tasks.shift();\n                    if (q.empty && q.tasks.length === 0) {\n                        q.empty();\n                    }\n                    workers += 1;\n                    var next = function () {\n                        workers -= 1;\n                        if (task.callback) {\n                            task.callback.apply(task, arguments);\n                        }\n                        if (q.drain && q.tasks.length + workers === 0) {\n                            q.drain();\n                        }\n                        q.process();\n                    };\n                    var cb = only_once(next);\n                    worker(task.data, cb);\n                }\n            },\n            length: function () {\n                return q.tasks.length;\n            },\n            running: function () {\n                return workers;\n            },\n            idle: function() {\n                return q.tasks.length + workers === 0;\n            },\n            pause: function () {\n                if (q.paused === true) { return; }\n                q.paused = true;\n                q.process();\n            },\n            resume: function () {\n                if (q.paused === false) { return; }\n                q.paused = false;\n                q.process();\n            }\n        };\n        return q;\n    };\n    \n    async.priorityQueue = function (worker, concurrency) {\n        \n        function _compareTasks(a, b){\n          return a.priority - b.priority;\n        };\n        \n        function _binarySearch(sequence, item, compare) {\n          var beg = -1,\n              end = sequence.length - 1;\n          while (beg < end) {\n            var mid = beg + ((end - beg + 1) >>> 1);\n            if (compare(item, sequence[mid]) >= 0) {\n              beg = mid;\n            } else {\n              end = mid - 1;\n            }\n          }\n          return beg;\n        }\n        \n        function _insert(q, data, priority, callback) {\n          if (!q.started){\n            q.started = true;\n          }\n          if (!_isArray(data)) {\n              data = [data];\n          }\n          if(data.length == 0) {\n             // call drain immediately if there are no tasks\n             return async.setImmediate(function() {\n                 if (q.drain) {\n                     q.drain();\n                 }\n             });\n          }\n          _each(data, function(task) {\n              var item = {\n                  data: task,\n                  priority: priority,\n                  callback: typeof callback === 'function' ? callback : null\n              };\n              \n              q.tasks.splice(_binarySearch(q.tasks, item, _compareTasks) + 1, 0, item);\n\n              if (q.saturated && q.tasks.length === q.concurrency) {\n                  q.saturated();\n              }\n              async.setImmediate(q.process);\n          });\n        }\n        \n        // Start with a normal queue\n        var q = async.queue(worker, concurrency);\n        \n        // Override push to accept second parameter representing priority\n        q.push = function (data, priority, callback) {\n          _insert(q, data, priority, callback);\n        };\n        \n        // Remove unshift function\n        delete q.unshift;\n\n        return q;\n    };\n\n    async.cargo = function (worker, payload) {\n        var working     = false,\n            tasks       = [];\n\n        var cargo = {\n            tasks: tasks,\n            payload: payload,\n            saturated: null,\n            empty: null,\n            drain: null,\n            drained: true,\n            push: function (data, callback) {\n                if (!_isArray(data)) {\n                    data = [data];\n                }\n                _each(data, function(task) {\n                    tasks.push({\n                        data: task,\n                        callback: typeof callback === 'function' ? callback : null\n                    });\n                    cargo.drained = false;\n                    if (cargo.saturated && tasks.length === payload) {\n                        cargo.saturated();\n                    }\n                });\n                async.setImmediate(cargo.process);\n            },\n            process: function process() {\n                if (working) return;\n                if (tasks.length === 0) {\n                    if(cargo.drain && !cargo.drained) cargo.drain();\n                    cargo.drained = true;\n                    return;\n                }\n\n                var ts = typeof payload === 'number'\n                            ? tasks.splice(0, payload)\n                            : tasks.splice(0, tasks.length);\n\n                var ds = _map(ts, function (task) {\n                    return task.data;\n                });\n\n                if(cargo.empty) cargo.empty();\n                working = true;\n                worker(ds, function () {\n                    working = false;\n\n                    var args = arguments;\n                    _each(ts, function (data) {\n                        if (data.callback) {\n                            data.callback.apply(null, args);\n                        }\n                    });\n\n                    process();\n                });\n            },\n            length: function () {\n                return tasks.length;\n            },\n            running: function () {\n                return working;\n            }\n        };\n        return cargo;\n    };\n\n    var _console_fn = function (name) {\n        return function (fn) {\n            var args = Array.prototype.slice.call(arguments, 1);\n            fn.apply(null, args.concat([function (err) {\n                var args = Array.prototype.slice.call(arguments, 1);\n                if (typeof console !== 'undefined') {\n                    if (err) {\n                        if (console.error) {\n                            console.error(err);\n                        }\n                    }\n                    else if (console[name]) {\n                        _each(args, function (x) {\n                            console[name](x);\n                        });\n                    }\n                }\n            }]));\n        };\n    };\n    async.log = _console_fn('log');\n    async.dir = _console_fn('dir');\n    /*async.info = _console_fn('info');\n    async.warn = _console_fn('warn');\n    async.error = _console_fn('error');*/\n\n    async.memoize = function (fn, hasher) {\n        var memo = {};\n        var queues = {};\n        hasher = hasher || function (x) {\n            return x;\n        };\n        var memoized = function () {\n            var args = Array.prototype.slice.call(arguments);\n            var callback = args.pop();\n            var key = hasher.apply(null, args);\n            if (key in memo) {\n                async.nextTick(function () {\n                    callback.apply(null, memo[key]);\n                });\n            }\n            else if (key in queues) {\n                queues[key].push(callback);\n            }\n            else {\n                queues[key] = [callback];\n                fn.apply(null, args.concat([function () {\n                    memo[key] = arguments;\n                    var q = queues[key];\n                    delete queues[key];\n                    for (var i = 0, l = q.length; i < l; i++) {\n                      q[i].apply(null, arguments);\n                    }\n                }]));\n            }\n        };\n        memoized.memo = memo;\n        memoized.unmemoized = fn;\n        return memoized;\n    };\n\n    async.unmemoize = function (fn) {\n      return function () {\n        return (fn.unmemoized || fn).apply(null, arguments);\n      };\n    };\n\n    async.times = function (count, iterator, callback) {\n        var counter = [];\n        for (var i = 0; i < count; i++) {\n            counter.push(i);\n        }\n        return async.map(counter, iterator, callback);\n    };\n\n    async.timesSeries = function (count, iterator, callback) {\n        var counter = [];\n        for (var i = 0; i < count; i++) {\n            counter.push(i);\n        }\n        return async.mapSeries(counter, iterator, callback);\n    };\n\n    async.seq = function (/* functions... */) {\n        var fns = arguments;\n        return function () {\n            var that = this;\n            var args = Array.prototype.slice.call(arguments);\n            var callback = args.pop();\n            async.reduce(fns, args, function (newargs, fn, cb) {\n                fn.apply(that, newargs.concat([function () {\n                    var err = arguments[0];\n                    var nextargs = Array.prototype.slice.call(arguments, 1);\n                    cb(err, nextargs);\n                }]))\n            },\n            function (err, results) {\n                callback.apply(that, [err].concat(results));\n            });\n        };\n    };\n\n    async.compose = function (/* functions... */) {\n      return async.seq.apply(null, Array.prototype.reverse.call(arguments));\n    };\n\n    var _applyEach = function (eachfn, fns /*args...*/) {\n        var go = function () {\n            var that = this;\n            var args = Array.prototype.slice.call(arguments);\n            var callback = args.pop();\n            return eachfn(fns, function (fn, cb) {\n                fn.apply(that, args.concat([cb]));\n            },\n            callback);\n        };\n        if (arguments.length > 2) {\n            var args = Array.prototype.slice.call(arguments, 2);\n            return go.apply(this, args);\n        }\n        else {\n            return go;\n        }\n    };\n    async.applyEach = doParallel(_applyEach);\n    async.applyEachSeries = doSeries(_applyEach);\n\n    async.forever = function (fn, callback) {\n        function next(err) {\n            if (err) {\n                if (callback) {\n                    return callback(err);\n                }\n                throw err;\n            }\n            fn(next);\n        }\n        next();\n    };\n\n    // Node.js\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = async;\n    }\n    // AMD / RequireJS\n    else if (typeof define !== 'undefined' && define.amd) {\n        define([], function () {\n            return async;\n        });\n    }\n    // included directly via <script> tag\n    else {\n        root.async = async;\n    }\n\n}());\n\n}\n, \"ep_etherpad-lite/static/js/underscore.js\": function (require, exports, module) {\nmodule.exports = require('underscore');\n\n}\n, \"underscore.js\": null\n, \"underscore/underscore.js\": function (require, exports, module) {\n//     Underscore.js 1.8.3\n//     http://underscorejs.org\n//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Underscore may be freely distributed under the MIT license.\n\n(function() {\n\n  // Baseline setup\n  // --------------\n\n  // Establish the root object, `window` in the browser, or `exports` on the server.\n  var root = this;\n\n  // Save the previous value of the `_` variable.\n  var previousUnderscore = root._;\n\n  // Save bytes in the minified (but not gzipped) version:\n  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;\n\n  // Create quick reference variables for speed access to core prototypes.\n  var\n    push             = ArrayProto.push,\n    slice            = ArrayProto.slice,\n    toString         = ObjProto.toString,\n    hasOwnProperty   = ObjProto.hasOwnProperty;\n\n  // All **ECMAScript 5** native function implementations that we hope to use\n  // are declared here.\n  var\n    nativeIsArray      = Array.isArray,\n    nativeKeys         = Object.keys,\n    nativeBind         = FuncProto.bind,\n    nativeCreate       = Object.create;\n\n  // Naked function reference for surrogate-prototype-swapping.\n  var Ctor = function(){};\n\n  // Create a safe reference to the Underscore object for use below.\n  var _ = function(obj) {\n    if (obj instanceof _) return obj;\n    if (!(this instanceof _)) return new _(obj);\n    this._wrapped = obj;\n  };\n\n  // Export the Underscore object for **Node.js**, with\n  // backwards-compatibility for the old `require()` API. If we're in\n  // the browser, add `_` as a global object.\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = _;\n    }\n    exports._ = _;\n  } else {\n    root._ = _;\n  }\n\n  // Current version.\n  _.VERSION = '1.8.3';\n\n  // Internal function that returns an efficient (for current engines) version\n  // of the passed-in callback, to be repeatedly applied in other Underscore\n  // functions.\n  var optimizeCb = function(func, context, argCount) {\n    if (context === void 0) return func;\n    switch (argCount == null ? 3 : argCount) {\n      case 1: return function(value) {\n        return func.call(context, value);\n      };\n      case 2: return function(value, other) {\n        return func.call(context, value, other);\n      };\n      case 3: return function(value, index, collection) {\n        return func.call(context, value, index, collection);\n      };\n      case 4: return function(accumulator, value, index, collection) {\n        return func.call(context, accumulator, value, index, collection);\n      };\n    }\n    return function() {\n      return func.apply(context, arguments);\n    };\n  };\n\n  // A mostly-internal function to generate callbacks that can be applied\n  // to each element in a collection, returning the desired result — either\n  // identity, an arbitrary callback, a property matcher, or a property accessor.\n  var cb = function(value, context, argCount) {\n    if (value == null) return _.identity;\n    if (_.isFunction(value)) return optimizeCb(value, context, argCount);\n    if (_.isObject(value)) return _.matcher(value);\n    return _.property(value);\n  };\n  _.iteratee = function(value, context) {\n    return cb(value, context, Infinity);\n  };\n\n  // An internal function for creating assigner functions.\n  var createAssigner = function(keysFunc, undefinedOnly) {\n    return function(obj) {\n      var length = arguments.length;\n      if (length < 2 || obj == null) return obj;\n      for (var index = 1; index < length; index++) {\n        var source = arguments[index],\n            keys = keysFunc(source),\n            l = keys.length;\n        for (var i = 0; i < l; i++) {\n          var key = keys[i];\n          if (!undefinedOnly || obj[key] === void 0) obj[key] = source[key];\n        }\n      }\n      return obj;\n    };\n  };\n\n  // An internal function for creating a new object that inherits from another.\n  var baseCreate = function(prototype) {\n    if (!_.isObject(prototype)) return {};\n    if (nativeCreate) return nativeCreate(prototype);\n    Ctor.prototype = prototype;\n    var result = new Ctor;\n    Ctor.prototype = null;\n    return result;\n  };\n\n  var property = function(key) {\n    return function(obj) {\n      return obj == null ? void 0 : obj[key];\n    };\n  };\n\n  // Helper for collection methods to determine whether a collection\n  // should be iterated as an array or as an object\n  // Related: http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n  // Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\n  var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n  var getLength = property('length');\n  var isArrayLike = function(collection) {\n    var length = getLength(collection);\n    return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\n  };\n\n  // Collection Functions\n  // --------------------\n\n  // The cornerstone, an `each` implementation, aka `forEach`.\n  // Handles raw objects in addition to array-likes. Treats all\n  // sparse array-likes as if they were dense.\n  _.each = _.forEach = function(obj, iteratee, context) {\n    iteratee = optimizeCb(iteratee, context);\n    var i, length;\n    if (isArrayLike(obj)) {\n      for (i = 0, length = obj.length; i < length; i++) {\n        iteratee(obj[i], i, obj);\n      }\n    } else {\n      var keys = _.keys(obj);\n      for (i = 0, length = keys.length; i < length; i++) {\n        iteratee(obj[keys[i]], keys[i], obj);\n      }\n    }\n    return obj;\n  };\n\n  // Return the results of applying the iteratee to each element.\n  _.map = _.collect = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length,\n        results = Array(length);\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      results[index] = iteratee(obj[currentKey], currentKey, obj);\n    }\n    return results;\n  };\n\n  // Create a reducing function iterating left or right.\n  function createReduce(dir) {\n    // Optimized iterator function as using arguments.length\n    // in the main function will deoptimize the, see #1991.\n    function iterator(obj, iteratee, memo, keys, index, length) {\n      for (; index >= 0 && index < length; index += dir) {\n        var currentKey = keys ? keys[index] : index;\n        memo = iteratee(memo, obj[currentKey], currentKey, obj);\n      }\n      return memo;\n    }\n\n    return function(obj, iteratee, memo, context) {\n      iteratee = optimizeCb(iteratee, context, 4);\n      var keys = !isArrayLike(obj) && _.keys(obj),\n          length = (keys || obj).length,\n          index = dir > 0 ? 0 : length - 1;\n      // Determine the initial value if none is provided.\n      if (arguments.length < 3) {\n        memo = obj[keys ? keys[index] : index];\n        index += dir;\n      }\n      return iterator(obj, iteratee, memo, keys, index, length);\n    };\n  }\n\n  // **Reduce** builds up a single result from a list of values, aka `inject`,\n  // or `foldl`.\n  _.reduce = _.foldl = _.inject = createReduce(1);\n\n  // The right-associative version of reduce, also known as `foldr`.\n  _.reduceRight = _.foldr = createReduce(-1);\n\n  // Return the first value which passes a truth test. Aliased as `detect`.\n  _.find = _.detect = function(obj, predicate, context) {\n    var key;\n    if (isArrayLike(obj)) {\n      key = _.findIndex(obj, predicate, context);\n    } else {\n      key = _.findKey(obj, predicate, context);\n    }\n    if (key !== void 0 && key !== -1) return obj[key];\n  };\n\n  // Return all the elements that pass a truth test.\n  // Aliased as `select`.\n  _.filter = _.select = function(obj, predicate, context) {\n    var results = [];\n    predicate = cb(predicate, context);\n    _.each(obj, function(value, index, list) {\n      if (predicate(value, index, list)) results.push(value);\n    });\n    return results;\n  };\n\n  // Return all the elements for which a truth test fails.\n  _.reject = function(obj, predicate, context) {\n    return _.filter(obj, _.negate(cb(predicate)), context);\n  };\n\n  // Determine whether all of the elements match a truth test.\n  // Aliased as `all`.\n  _.every = _.all = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (!predicate(obj[currentKey], currentKey, obj)) return false;\n    }\n    return true;\n  };\n\n  // Determine if at least one element in the object matches a truth test.\n  // Aliased as `any`.\n  _.some = _.any = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (predicate(obj[currentKey], currentKey, obj)) return true;\n    }\n    return false;\n  };\n\n  // Determine if the array or object contains a given item (using `===`).\n  // Aliased as `includes` and `include`.\n  _.contains = _.includes = _.include = function(obj, item, fromIndex, guard) {\n    if (!isArrayLike(obj)) obj = _.values(obj);\n    if (typeof fromIndex != 'number' || guard) fromIndex = 0;\n    return _.indexOf(obj, item, fromIndex) >= 0;\n  };\n\n  // Invoke a method (with arguments) on every item in a collection.\n  _.invoke = function(obj, method) {\n    var args = slice.call(arguments, 2);\n    var isFunc = _.isFunction(method);\n    return _.map(obj, function(value) {\n      var func = isFunc ? method : value[method];\n      return func == null ? func : func.apply(value, args);\n    });\n  };\n\n  // Convenience version of a common use case of `map`: fetching a property.\n  _.pluck = function(obj, key) {\n    return _.map(obj, _.property(key));\n  };\n\n  // Convenience version of a common use case of `filter`: selecting only objects\n  // containing specific `key:value` pairs.\n  _.where = function(obj, attrs) {\n    return _.filter(obj, _.matcher(attrs));\n  };\n\n  // Convenience version of a common use case of `find`: getting the first object\n  // containing specific `key:value` pairs.\n  _.findWhere = function(obj, attrs) {\n    return _.find(obj, _.matcher(attrs));\n  };\n\n  // Return the maximum element (or element-based computation).\n  _.max = function(obj, iteratee, context) {\n    var result = -Infinity, lastComputed = -Infinity,\n        value, computed;\n    if (iteratee == null && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value > result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index, list) {\n        computed = iteratee(value, index, list);\n        if (computed > lastComputed || computed === -Infinity && result === -Infinity) {\n          result = value;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Return the minimum element (or element-based computation).\n  _.min = function(obj, iteratee, context) {\n    var result = Infinity, lastComputed = Infinity,\n        value, computed;\n    if (iteratee == null && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value < result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index, list) {\n        computed = iteratee(value, index, list);\n        if (computed < lastComputed || computed === Infinity && result === Infinity) {\n          result = value;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Shuffle a collection, using the modern version of the\n  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher–Yates_shuffle).\n  _.shuffle = function(obj) {\n    var set = isArrayLike(obj) ? obj : _.values(obj);\n    var length = set.length;\n    var shuffled = Array(length);\n    for (var index = 0, rand; index < length; index++) {\n      rand = _.random(0, index);\n      if (rand !== index) shuffled[index] = shuffled[rand];\n      shuffled[rand] = set[index];\n    }\n    return shuffled;\n  };\n\n  // Sample **n** random values from a collection.\n  // If **n** is not specified, returns a single random element.\n  // The internal `guard` argument allows it to work with `map`.\n  _.sample = function(obj, n, guard) {\n    if (n == null || guard) {\n      if (!isArrayLike(obj)) obj = _.values(obj);\n      return obj[_.random(obj.length - 1)];\n    }\n    return _.shuffle(obj).slice(0, Math.max(0, n));\n  };\n\n  // Sort the object's values by a criterion produced by an iteratee.\n  _.sortBy = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    return _.pluck(_.map(obj, function(value, index, list) {\n      return {\n        value: value,\n        index: index,\n        criteria: iteratee(value, index, list)\n      };\n    }).sort(function(left, right) {\n      var a = left.criteria;\n      var b = right.criteria;\n      if (a !== b) {\n        if (a > b || a === void 0) return 1;\n        if (a < b || b === void 0) return -1;\n      }\n      return left.index - right.index;\n    }), 'value');\n  };\n\n  // An internal function used for aggregate \"group by\" operations.\n  var group = function(behavior) {\n    return function(obj, iteratee, context) {\n      var result = {};\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index) {\n        var key = iteratee(value, index, obj);\n        behavior(result, value, key);\n      });\n      return result;\n    };\n  };\n\n  // Groups the object's values by a criterion. Pass either a string attribute\n  // to group by, or a function that returns the criterion.\n  _.groupBy = group(function(result, value, key) {\n    if (_.has(result, key)) result[key].push(value); else result[key] = [value];\n  });\n\n  // Indexes the object's values by a criterion, similar to `groupBy`, but for\n  // when you know that your index values will be unique.\n  _.indexBy = group(function(result, value, key) {\n    result[key] = value;\n  });\n\n  // Counts instances of an object that group by a certain criterion. Pass\n  // either a string attribute to count by, or a function that returns the\n  // criterion.\n  _.countBy = group(function(result, value, key) {\n    if (_.has(result, key)) result[key]++; else result[key] = 1;\n  });\n\n  // Safely create a real, live array from anything iterable.\n  _.toArray = function(obj) {\n    if (!obj) return [];\n    if (_.isArray(obj)) return slice.call(obj);\n    if (isArrayLike(obj)) return _.map(obj, _.identity);\n    return _.values(obj);\n  };\n\n  // Return the number of elements in an object.\n  _.size = function(obj) {\n    if (obj == null) return 0;\n    return isArrayLike(obj) ? obj.length : _.keys(obj).length;\n  };\n\n  // Split a collection into two arrays: one whose elements all satisfy the given\n  // predicate, and one whose elements all do not satisfy the predicate.\n  _.partition = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var pass = [], fail = [];\n    _.each(obj, function(value, key, obj) {\n      (predicate(value, key, obj) ? pass : fail).push(value);\n    });\n    return [pass, fail];\n  };\n\n  // Array Functions\n  // ---------------\n\n  // Get the first element of an array. Passing **n** will return the first N\n  // values in the array. Aliased as `head` and `take`. The **guard** check\n  // allows it to work with `_.map`.\n  _.first = _.head = _.take = function(array, n, guard) {\n    if (array == null) return void 0;\n    if (n == null || guard) return array[0];\n    return _.initial(array, array.length - n);\n  };\n\n  // Returns everything but the last entry of the array. Especially useful on\n  // the arguments object. Passing **n** will return all the values in\n  // the array, excluding the last N.\n  _.initial = function(array, n, guard) {\n    return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n  };\n\n  // Get the last element of an array. Passing **n** will return the last N\n  // values in the array.\n  _.last = function(array, n, guard) {\n    if (array == null) return void 0;\n    if (n == null || guard) return array[array.length - 1];\n    return _.rest(array, Math.max(0, array.length - n));\n  };\n\n  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.\n  // Especially useful on the arguments object. Passing an **n** will return\n  // the rest N values in the array.\n  _.rest = _.tail = _.drop = function(array, n, guard) {\n    return slice.call(array, n == null || guard ? 1 : n);\n  };\n\n  // Trim out all falsy values from an array.\n  _.compact = function(array) {\n    return _.filter(array, _.identity);\n  };\n\n  // Internal implementation of a recursive `flatten` function.\n  var flatten = function(input, shallow, strict, startIndex) {\n    var output = [], idx = 0;\n    for (var i = startIndex || 0, length = getLength(input); i < length; i++) {\n      var value = input[i];\n      if (isArrayLike(value) && (_.isArray(value) || _.isArguments(value))) {\n        //flatten current level of array or arguments object\n        if (!shallow) value = flatten(value, shallow, strict);\n        var j = 0, len = value.length;\n        output.length += len;\n        while (j < len) {\n          output[idx++] = value[j++];\n        }\n      } else if (!strict) {\n        output[idx++] = value;\n      }\n    }\n    return output;\n  };\n\n  // Flatten out an array, either recursively (by default), or just one level.\n  _.flatten = function(array, shallow) {\n    return flatten(array, shallow, false);\n  };\n\n  // Return a version of the array that does not contain the specified value(s).\n  _.without = function(array) {\n    return _.difference(array, slice.call(arguments, 1));\n  };\n\n  // Produce a duplicate-free version of the array. If the array has already\n  // been sorted, you have the option of using a faster algorithm.\n  // Aliased as `unique`.\n  _.uniq = _.unique = function(array, isSorted, iteratee, context) {\n    if (!_.isBoolean(isSorted)) {\n      context = iteratee;\n      iteratee = isSorted;\n      isSorted = false;\n    }\n    if (iteratee != null) iteratee = cb(iteratee, context);\n    var result = [];\n    var seen = [];\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var value = array[i],\n          computed = iteratee ? iteratee(value, i, array) : value;\n      if (isSorted) {\n        if (!i || seen !== computed) result.push(value);\n        seen = computed;\n      } else if (iteratee) {\n        if (!_.contains(seen, computed)) {\n          seen.push(computed);\n          result.push(value);\n        }\n      } else if (!_.contains(result, value)) {\n        result.push(value);\n      }\n    }\n    return result;\n  };\n\n  // Produce an array that contains the union: each distinct element from all of\n  // the passed-in arrays.\n  _.union = function() {\n    return _.uniq(flatten(arguments, true, true));\n  };\n\n  // Produce an array that contains every item shared between all the\n  // passed-in arrays.\n  _.intersection = function(array) {\n    var result = [];\n    var argsLength = arguments.length;\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var item = array[i];\n      if (_.contains(result, item)) continue;\n      for (var j = 1; j < argsLength; j++) {\n        if (!_.contains(arguments[j], item)) break;\n      }\n      if (j === argsLength) result.push(item);\n    }\n    return result;\n  };\n\n  // Take the difference between one array and a number of other arrays.\n  // Only the elements present in just the first array will remain.\n  _.difference = function(array) {\n    var rest = flatten(arguments, true, true, 1);\n    return _.filter(array, function(value){\n      return !_.contains(rest, value);\n    });\n  };\n\n  // Zip together multiple lists into a single array -- elements that share\n  // an index go together.\n  _.zip = function() {\n    return _.unzip(arguments);\n  };\n\n  // Complement of _.zip. Unzip accepts an array of arrays and groups\n  // each array's elements on shared indices\n  _.unzip = function(array) {\n    var length = array && _.max(array, getLength).length || 0;\n    var result = Array(length);\n\n    for (var index = 0; index < length; index++) {\n      result[index] = _.pluck(array, index);\n    }\n    return result;\n  };\n\n  // Converts lists into objects. Pass either a single array of `[key, value]`\n  // pairs, or two parallel arrays of the same length -- one of keys, and one of\n  // the corresponding values.\n  _.object = function(list, values) {\n    var result = {};\n    for (var i = 0, length = getLength(list); i < length; i++) {\n      if (values) {\n        result[list[i]] = values[i];\n      } else {\n        result[list[i][0]] = list[i][1];\n      }\n    }\n    return result;\n  };\n\n  // Generator function to create the findIndex and findLastIndex functions\n  function createPredicateIndexFinder(dir) {\n    return function(array, predicate, context) {\n      predicate = cb(predicate, context);\n      var length = getLength(array);\n      var index = dir > 0 ? 0 : length - 1;\n      for (; index >= 0 && index < length; index += dir) {\n        if (predicate(array[index], index, array)) return index;\n      }\n      return -1;\n    };\n  }\n\n  // Returns the first index on an array-like that passes a predicate test\n  _.findIndex = createPredicateIndexFinder(1);\n  _.findLastIndex = createPredicateIndexFinder(-1);\n\n  // Use a comparator function to figure out the smallest index at which\n  // an object should be inserted so as to maintain order. Uses binary search.\n  _.sortedIndex = function(array, obj, iteratee, context) {\n    iteratee = cb(iteratee, context, 1);\n    var value = iteratee(obj);\n    var low = 0, high = getLength(array);\n    while (low < high) {\n      var mid = Math.floor((low + high) / 2);\n      if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n    }\n    return low;\n  };\n\n  // Generator function to create the indexOf and lastIndexOf functions\n  function createIndexFinder(dir, predicateFind, sortedIndex) {\n    return function(array, item, idx) {\n      var i = 0, length = getLength(array);\n      if (typeof idx == 'number') {\n        if (dir > 0) {\n            i = idx >= 0 ? idx : Math.max(idx + length, i);\n        } else {\n            length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\n        }\n      } else if (sortedIndex && idx && length) {\n        idx = sortedIndex(array, item);\n        return array[idx] === item ? idx : -1;\n      }\n      if (item !== item) {\n        idx = predicateFind(slice.call(array, i, length), _.isNaN);\n        return idx >= 0 ? idx + i : -1;\n      }\n      for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\n        if (array[idx] === item) return idx;\n      }\n      return -1;\n    };\n  }\n\n  // Return the position of the first occurrence of an item in an array,\n  // or -1 if the item is not included in the array.\n  // If the array is large and already in sort order, pass `true`\n  // for **isSorted** to use binary search.\n  _.indexOf = createIndexFinder(1, _.findIndex, _.sortedIndex);\n  _.lastIndexOf = createIndexFinder(-1, _.findLastIndex);\n\n  // Generate an integer Array containing an arithmetic progression. A port of\n  // the native Python `range()` function. See\n  // [the Python documentation](http://docs.python.org/library/functions.html#range).\n  _.range = function(start, stop, step) {\n    if (stop == null) {\n      stop = start || 0;\n      start = 0;\n    }\n    step = step || 1;\n\n    var length = Math.max(Math.ceil((stop - start) / step), 0);\n    var range = Array(length);\n\n    for (var idx = 0; idx < length; idx++, start += step) {\n      range[idx] = start;\n    }\n\n    return range;\n  };\n\n  // Function (ahem) Functions\n  // ------------------\n\n  // Determines whether to execute a function as a constructor\n  // or a normal function with the provided arguments\n  var executeBound = function(sourceFunc, boundFunc, context, callingContext, args) {\n    if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n    var self = baseCreate(sourceFunc.prototype);\n    var result = sourceFunc.apply(self, args);\n    if (_.isObject(result)) return result;\n    return self;\n  };\n\n  // Create a function bound to a given object (assigning `this`, and arguments,\n  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if\n  // available.\n  _.bind = function(func, context) {\n    if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));\n    if (!_.isFunction(func)) throw new TypeError('Bind must be called on a function');\n    var args = slice.call(arguments, 2);\n    var bound = function() {\n      return executeBound(func, bound, context, this, args.concat(slice.call(arguments)));\n    };\n    return bound;\n  };\n\n  // Partially apply a function by creating a version that has had some of its\n  // arguments pre-filled, without changing its dynamic `this` context. _ acts\n  // as a placeholder, allowing any combination of arguments to be pre-filled.\n  _.partial = function(func) {\n    var boundArgs = slice.call(arguments, 1);\n    var bound = function() {\n      var position = 0, length = boundArgs.length;\n      var args = Array(length);\n      for (var i = 0; i < length; i++) {\n        args[i] = boundArgs[i] === _ ? arguments[position++] : boundArgs[i];\n      }\n      while (position < arguments.length) args.push(arguments[position++]);\n      return executeBound(func, bound, this, this, args);\n    };\n    return bound;\n  };\n\n  // Bind a number of an object's methods to that object. Remaining arguments\n  // are the method names to be bound. Useful for ensuring that all callbacks\n  // defined on an object belong to it.\n  _.bindAll = function(obj) {\n    var i, length = arguments.length, key;\n    if (length <= 1) throw new Error('bindAll must be passed function names');\n    for (i = 1; i < length; i++) {\n      key = arguments[i];\n      obj[key] = _.bind(obj[key], obj);\n    }\n    return obj;\n  };\n\n  // Memoize an expensive function by storing its results.\n  _.memoize = function(func, hasher) {\n    var memoize = function(key) {\n      var cache = memoize.cache;\n      var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n      if (!_.has(cache, address)) cache[address] = func.apply(this, arguments);\n      return cache[address];\n    };\n    memoize.cache = {};\n    return memoize;\n  };\n\n  // Delays a function for the given number of milliseconds, and then calls\n  // it with the arguments supplied.\n  _.delay = function(func, wait) {\n    var args = slice.call(arguments, 2);\n    return setTimeout(function(){\n      return func.apply(null, args);\n    }, wait);\n  };\n\n  // Defers a function, scheduling it to run after the current call stack has\n  // cleared.\n  _.defer = _.partial(_.delay, _, 1);\n\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time. Normally, the throttled function will run\n  // as much as it can, without ever going more than once per `wait` duration;\n  // but if you'd like to disable the execution on the leading edge, pass\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\n  _.throttle = function(func, wait, options) {\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    if (!options) options = {};\n    var later = function() {\n      previous = options.leading === false ? 0 : _.now();\n      timeout = null;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    };\n    return function() {\n      var now = _.now();\n      if (!previous && options.leading === false) previous = now;\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0 || remaining > wait) {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n        previous = now;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  };\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds. If `immediate` is passed, trigger the function on the\n  // leading edge, instead of the trailing.\n  _.debounce = function(func, wait, immediate) {\n    var timeout, args, context, timestamp, result;\n\n    var later = function() {\n      var last = _.now() - timestamp;\n\n      if (last < wait && last >= 0) {\n        timeout = setTimeout(later, wait - last);\n      } else {\n        timeout = null;\n        if (!immediate) {\n          result = func.apply(context, args);\n          if (!timeout) context = args = null;\n        }\n      }\n    };\n\n    return function() {\n      context = this;\n      args = arguments;\n      timestamp = _.now();\n      var callNow = immediate && !timeout;\n      if (!timeout) timeout = setTimeout(later, wait);\n      if (callNow) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n\n      return result;\n    };\n  };\n\n  // Returns the first function passed as an argument to the second,\n  // allowing you to adjust arguments, run code before and after, and\n  // conditionally execute the original function.\n  _.wrap = function(func, wrapper) {\n    return _.partial(wrapper, func);\n  };\n\n  // Returns a negated version of the passed-in predicate.\n  _.negate = function(predicate) {\n    return function() {\n      return !predicate.apply(this, arguments);\n    };\n  };\n\n  // Returns a function that is the composition of a list of functions, each\n  // consuming the return value of the function that follows.\n  _.compose = function() {\n    var args = arguments;\n    var start = args.length - 1;\n    return function() {\n      var i = start;\n      var result = args[start].apply(this, arguments);\n      while (i--) result = args[i].call(this, result);\n      return result;\n    };\n  };\n\n  // Returns a function that will only be executed on and after the Nth call.\n  _.after = function(times, func) {\n    return function() {\n      if (--times < 1) {\n        return func.apply(this, arguments);\n      }\n    };\n  };\n\n  // Returns a function that will only be executed up to (but not including) the Nth call.\n  _.before = function(times, func) {\n    var memo;\n    return function() {\n      if (--times > 0) {\n        memo = func.apply(this, arguments);\n      }\n      if (times <= 1) func = null;\n      return memo;\n    };\n  };\n\n  // Returns a function that will be executed at most one time, no matter how\n  // often you call it. Useful for lazy initialization.\n  _.once = _.partial(_.before, 2);\n\n  // Object Functions\n  // ----------------\n\n  // Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\n  var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\n  var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n                      'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n  function collectNonEnumProps(obj, keys) {\n    var nonEnumIdx = nonEnumerableProps.length;\n    var constructor = obj.constructor;\n    var proto = (_.isFunction(constructor) && constructor.prototype) || ObjProto;\n\n    // Constructor is a special case.\n    var prop = 'constructor';\n    if (_.has(obj, prop) && !_.contains(keys, prop)) keys.push(prop);\n\n    while (nonEnumIdx--) {\n      prop = nonEnumerableProps[nonEnumIdx];\n      if (prop in obj && obj[prop] !== proto[prop] && !_.contains(keys, prop)) {\n        keys.push(prop);\n      }\n    }\n  }\n\n  // Retrieve the names of an object's own properties.\n  // Delegates to **ECMAScript 5**'s native `Object.keys`\n  _.keys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    if (nativeKeys) return nativeKeys(obj);\n    var keys = [];\n    for (var key in obj) if (_.has(obj, key)) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve all the property names of an object.\n  _.allKeys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    var keys = [];\n    for (var key in obj) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve the values of an object's properties.\n  _.values = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var values = Array(length);\n    for (var i = 0; i < length; i++) {\n      values[i] = obj[keys[i]];\n    }\n    return values;\n  };\n\n  // Returns the results of applying the iteratee to each element of the object\n  // In contrast to _.map it returns an object\n  _.mapObject = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys =  _.keys(obj),\n          length = keys.length,\n          results = {},\n          currentKey;\n      for (var index = 0; index < length; index++) {\n        currentKey = keys[index];\n        results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n      }\n      return results;\n  };\n\n  // Convert an object into a list of `[key, value]` pairs.\n  _.pairs = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var pairs = Array(length);\n    for (var i = 0; i < length; i++) {\n      pairs[i] = [keys[i], obj[keys[i]]];\n    }\n    return pairs;\n  };\n\n  // Invert the keys and values of an object. The values must be serializable.\n  _.invert = function(obj) {\n    var result = {};\n    var keys = _.keys(obj);\n    for (var i = 0, length = keys.length; i < length; i++) {\n      result[obj[keys[i]]] = keys[i];\n    }\n    return result;\n  };\n\n  // Return a sorted list of the function names available on the object.\n  // Aliased as `methods`\n  _.functions = _.methods = function(obj) {\n    var names = [];\n    for (var key in obj) {\n      if (_.isFunction(obj[key])) names.push(key);\n    }\n    return names.sort();\n  };\n\n  // Extend a given object with all the properties in passed-in object(s).\n  _.extend = createAssigner(_.allKeys);\n\n  // Assigns a given object with all the own properties in the passed-in object(s)\n  // (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\n  _.extendOwn = _.assign = createAssigner(_.keys);\n\n  // Returns the first key on an object that passes a predicate test\n  _.findKey = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = _.keys(obj), key;\n    for (var i = 0, length = keys.length; i < length; i++) {\n      key = keys[i];\n      if (predicate(obj[key], key, obj)) return key;\n    }\n  };\n\n  // Return a copy of the object only containing the whitelisted properties.\n  _.pick = function(object, oiteratee, context) {\n    var result = {}, obj = object, iteratee, keys;\n    if (obj == null) return result;\n    if (_.isFunction(oiteratee)) {\n      keys = _.allKeys(obj);\n      iteratee = optimizeCb(oiteratee, context);\n    } else {\n      keys = flatten(arguments, false, false, 1);\n      iteratee = function(value, key, obj) { return key in obj; };\n      obj = Object(obj);\n    }\n    for (var i = 0, length = keys.length; i < length; i++) {\n      var key = keys[i];\n      var value = obj[key];\n      if (iteratee(value, key, obj)) result[key] = value;\n    }\n    return result;\n  };\n\n   // Return a copy of the object without the blacklisted properties.\n  _.omit = function(obj, iteratee, context) {\n    if (_.isFunction(iteratee)) {\n      iteratee = _.negate(iteratee);\n    } else {\n      var keys = _.map(flatten(arguments, false, false, 1), String);\n      iteratee = function(value, key) {\n        return !_.contains(keys, key);\n      };\n    }\n    return _.pick(obj, iteratee, context);\n  };\n\n  // Fill in a given object with default properties.\n  _.defaults = createAssigner(_.allKeys, true);\n\n  // Creates an object that inherits from the given prototype object.\n  // If additional properties are provided then they will be added to the\n  // created object.\n  _.create = function(prototype, props) {\n    var result = baseCreate(prototype);\n    if (props) _.extendOwn(result, props);\n    return result;\n  };\n\n  // Create a (shallow-cloned) duplicate of an object.\n  _.clone = function(obj) {\n    if (!_.isObject(obj)) return obj;\n    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);\n  };\n\n  // Invokes interceptor with the obj, and then returns obj.\n  // The primary purpose of this method is to \"tap into\" a method chain, in\n  // order to perform operations on intermediate results within the chain.\n  _.tap = function(obj, interceptor) {\n    interceptor(obj);\n    return obj;\n  };\n\n  // Returns whether an object has a given set of `key:value` pairs.\n  _.isMatch = function(object, attrs) {\n    var keys = _.keys(attrs), length = keys.length;\n    if (object == null) return !length;\n    var obj = Object(object);\n    for (var i = 0; i < length; i++) {\n      var key = keys[i];\n      if (attrs[key] !== obj[key] || !(key in obj)) return false;\n    }\n    return true;\n  };\n\n\n  // Internal recursive comparison function for `isEqual`.\n  var eq = function(a, b, aStack, bStack) {\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\n    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\n    if (a === b) return a !== 0 || 1 / a === 1 / b;\n    // A strict comparison is necessary because `null == undefined`.\n    if (a == null || b == null) return a === b;\n    // Unwrap any wrapped objects.\n    if (a instanceof _) a = a._wrapped;\n    if (b instanceof _) b = b._wrapped;\n    // Compare `[[Class]]` names.\n    var className = toString.call(a);\n    if (className !== toString.call(b)) return false;\n    switch (className) {\n      // Strings, numbers, regular expressions, dates, and booleans are compared by value.\n      case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n      case '[object String]':\n        // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n        // equivalent to `new String(\"5\")`.\n        return '' + a === '' + b;\n      case '[object Number]':\n        // `NaN`s are equivalent, but non-reflexive.\n        // Object(NaN) is equivalent to NaN\n        if (+a !== +a) return +b !== +b;\n        // An `egal` comparison is performed for other numeric values.\n        return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n      case '[object Date]':\n      case '[object Boolean]':\n        // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n        // millisecond representations. Note that invalid dates with millisecond representations\n        // of `NaN` are not equivalent.\n        return +a === +b;\n    }\n\n    var areArrays = className === '[object Array]';\n    if (!areArrays) {\n      if (typeof a != 'object' || typeof b != 'object') return false;\n\n      // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n      // from different frames are.\n      var aCtor = a.constructor, bCtor = b.constructor;\n      if (aCtor !== bCtor && !(_.isFunction(aCtor) && aCtor instanceof aCtor &&\n                               _.isFunction(bCtor) && bCtor instanceof bCtor)\n                          && ('constructor' in a && 'constructor' in b)) {\n        return false;\n      }\n    }\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n\n    // Initializing stack of traversed objects.\n    // It's done here since we only need them for objects and arrays comparison.\n    aStack = aStack || [];\n    bStack = bStack || [];\n    var length = aStack.length;\n    while (length--) {\n      // Linear search. Performance is inversely proportional to the number of\n      // unique nested structures.\n      if (aStack[length] === a) return bStack[length] === b;\n    }\n\n    // Add the first object to the stack of traversed objects.\n    aStack.push(a);\n    bStack.push(b);\n\n    // Recursively compare objects and arrays.\n    if (areArrays) {\n      // Compare array lengths to determine if a deep comparison is necessary.\n      length = a.length;\n      if (length !== b.length) return false;\n      // Deep compare the contents, ignoring non-numeric properties.\n      while (length--) {\n        if (!eq(a[length], b[length], aStack, bStack)) return false;\n      }\n    } else {\n      // Deep compare objects.\n      var keys = _.keys(a), key;\n      length = keys.length;\n      // Ensure that both objects contain the same number of properties before comparing deep equality.\n      if (_.keys(b).length !== length) return false;\n      while (length--) {\n        // Deep compare each member\n        key = keys[length];\n        if (!(_.has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n      }\n    }\n    // Remove the first object from the stack of traversed objects.\n    aStack.pop();\n    bStack.pop();\n    return true;\n  };\n\n  // Perform a deep comparison to check if two objects are equal.\n  _.isEqual = function(a, b) {\n    return eq(a, b);\n  };\n\n  // Is a given array, string, or object empty?\n  // An \"empty\" object has no enumerable own-properties.\n  _.isEmpty = function(obj) {\n    if (obj == null) return true;\n    if (isArrayLike(obj) && (_.isArray(obj) || _.isString(obj) || _.isArguments(obj))) return obj.length === 0;\n    return _.keys(obj).length === 0;\n  };\n\n  // Is a given value a DOM element?\n  _.isElement = function(obj) {\n    return !!(obj && obj.nodeType === 1);\n  };\n\n  // Is a given value an array?\n  // Delegates to ECMA5's native Array.isArray\n  _.isArray = nativeIsArray || function(obj) {\n    return toString.call(obj) === '[object Array]';\n  };\n\n  // Is a given variable an object?\n  _.isObject = function(obj) {\n    var type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n  };\n\n  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp, isError.\n  _.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp', 'Error'], function(name) {\n    _['is' + name] = function(obj) {\n      return toString.call(obj) === '[object ' + name + ']';\n    };\n  });\n\n  // Define a fallback version of the method in browsers (ahem, IE < 9), where\n  // there isn't any inspectable \"Arguments\" type.\n  if (!_.isArguments(arguments)) {\n    _.isArguments = function(obj) {\n      return _.has(obj, 'callee');\n    };\n  }\n\n  // Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,\n  // IE 11 (#1621), and in Safari 8 (#1929).\n  if (typeof /./ != 'function' && typeof Int8Array != 'object') {\n    _.isFunction = function(obj) {\n      return typeof obj == 'function' || false;\n    };\n  }\n\n  // Is a given object a finite number?\n  _.isFinite = function(obj) {\n    return isFinite(obj) && !isNaN(parseFloat(obj));\n  };\n\n  // Is the given value `NaN`? (NaN is the only number which does not equal itself).\n  _.isNaN = function(obj) {\n    return _.isNumber(obj) && obj !== +obj;\n  };\n\n  // Is a given value a boolean?\n  _.isBoolean = function(obj) {\n    return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n  };\n\n  // Is a given value equal to null?\n  _.isNull = function(obj) {\n    return obj === null;\n  };\n\n  // Is a given variable undefined?\n  _.isUndefined = function(obj) {\n    return obj === void 0;\n  };\n\n  // Shortcut function for checking if an object has a given property directly\n  // on itself (in other words, not on a prototype).\n  _.has = function(obj, key) {\n    return obj != null && hasOwnProperty.call(obj, key);\n  };\n\n  // Utility Functions\n  // -----------------\n\n  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its\n  // previous owner. Returns a reference to the Underscore object.\n  _.noConflict = function() {\n    root._ = previousUnderscore;\n    return this;\n  };\n\n  // Keep the identity function around for default iteratees.\n  _.identity = function(value) {\n    return value;\n  };\n\n  // Predicate-generating functions. Often useful outside of Underscore.\n  _.constant = function(value) {\n    return function() {\n      return value;\n    };\n  };\n\n  _.noop = function(){};\n\n  _.property = property;\n\n  // Generates a function for a given object that returns a given property.\n  _.propertyOf = function(obj) {\n    return obj == null ? function(){} : function(key) {\n      return obj[key];\n    };\n  };\n\n  // Returns a predicate for checking whether an object has a given set of\n  // `key:value` pairs.\n  _.matcher = _.matches = function(attrs) {\n    attrs = _.extendOwn({}, attrs);\n    return function(obj) {\n      return _.isMatch(obj, attrs);\n    };\n  };\n\n  // Run a function **n** times.\n  _.times = function(n, iteratee, context) {\n    var accum = Array(Math.max(0, n));\n    iteratee = optimizeCb(iteratee, context, 1);\n    for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n    return accum;\n  };\n\n  // Return a random integer between min and max (inclusive).\n  _.random = function(min, max) {\n    if (max == null) {\n      max = min;\n      min = 0;\n    }\n    return min + Math.floor(Math.random() * (max - min + 1));\n  };\n\n  // A (possibly faster) way to get the current timestamp as an integer.\n  _.now = Date.now || function() {\n    return new Date().getTime();\n  };\n\n   // List of HTML entities for escaping.\n  var escapeMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;',\n    '`': '&#x60;'\n  };\n  var unescapeMap = _.invert(escapeMap);\n\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\n  var createEscaper = function(map) {\n    var escaper = function(match) {\n      return map[match];\n    };\n    // Regexes for identifying a key that needs to be escaped\n    var source = '(?:' + _.keys(map).join('|') + ')';\n    var testRegexp = RegExp(source);\n    var replaceRegexp = RegExp(source, 'g');\n    return function(string) {\n      string = string == null ? '' : '' + string;\n      return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n    };\n  };\n  _.escape = createEscaper(escapeMap);\n  _.unescape = createEscaper(unescapeMap);\n\n  // If the value of the named `property` is a function then invoke it with the\n  // `object` as context; otherwise, return it.\n  _.result = function(object, property, fallback) {\n    var value = object == null ? void 0 : object[property];\n    if (value === void 0) {\n      value = fallback;\n    }\n    return _.isFunction(value) ? value.call(object) : value;\n  };\n\n  // Generate a unique integer id (unique within the entire client session).\n  // Useful for temporary DOM ids.\n  var idCounter = 0;\n  _.uniqueId = function(prefix) {\n    var id = ++idCounter + '';\n    return prefix ? prefix + id : id;\n  };\n\n  // By default, Underscore uses ERB-style template delimiters, change the\n  // following template settings to use alternative delimiters.\n  _.templateSettings = {\n    evaluate    : /<%([\\s\\S]+?)%>/g,\n    interpolate : /<%=([\\s\\S]+?)%>/g,\n    escape      : /<%-([\\s\\S]+?)%>/g\n  };\n\n  // When customizing `templateSettings`, if you don't want to define an\n  // interpolation, evaluation or escaping regex, we need one that is\n  // guaranteed not to match.\n  var noMatch = /(.)^/;\n\n  // Certain characters need to be escaped so that they can be put into a\n  // string literal.\n  var escapes = {\n    \"'\":      \"'\",\n    '\\\\':     '\\\\',\n    '\\r':     'r',\n    '\\n':     'n',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  var escaper = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\n  var escapeChar = function(match) {\n    return '\\\\' + escapes[match];\n  };\n\n  // JavaScript micro-templating, similar to John Resig's implementation.\n  // Underscore templating handles arbitrary delimiters, preserves whitespace,\n  // and correctly escapes quotes within interpolated code.\n  // NB: `oldSettings` only exists for backwards compatibility.\n  _.template = function(text, settings, oldSettings) {\n    if (!settings && oldSettings) settings = oldSettings;\n    settings = _.defaults({}, settings, _.templateSettings);\n\n    // Combine delimiters into one regular expression via alternation.\n    var matcher = RegExp([\n      (settings.escape || noMatch).source,\n      (settings.interpolate || noMatch).source,\n      (settings.evaluate || noMatch).source\n    ].join('|') + '|$', 'g');\n\n    // Compile the template source, escaping string literals appropriately.\n    var index = 0;\n    var source = \"__p+='\";\n    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n      source += text.slice(index, offset).replace(escaper, escapeChar);\n      index = offset + match.length;\n\n      if (escape) {\n        source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n      } else if (interpolate) {\n        source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n      } else if (evaluate) {\n        source += \"';\\n\" + evaluate + \"\\n__p+='\";\n      }\n\n      // Adobe VMs need the match returned to produce the correct offest.\n      return match;\n    });\n    source += \"';\\n\";\n\n    // If a variable is not specified, place data values in local scope.\n    if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\n\n    source = \"var __t,__p='',__j=Array.prototype.join,\" +\n      \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n      source + 'return __p;\\n';\n\n    try {\n      var render = new Function(settings.variable || 'obj', '_', source);\n    } catch (e) {\n      e.source = source;\n      throw e;\n    }\n\n    var template = function(data) {\n      return render.call(this, data, _);\n    };\n\n    // Provide the compiled source as a convenience for precompilation.\n    var argument = settings.variable || 'obj';\n    template.source = 'function(' + argument + '){\\n' + source + '}';\n\n    return template;\n  };\n\n  // Add a \"chain\" function. Start chaining a wrapped Underscore object.\n  _.chain = function(obj) {\n    var instance = _(obj);\n    instance._chain = true;\n    return instance;\n  };\n\n  // OOP\n  // ---------------\n  // If Underscore is called as a function, it returns a wrapped object that\n  // can be used OO-style. This wrapper holds altered versions of all the\n  // underscore functions. Wrapped objects may be chained.\n\n  // Helper function to continue chaining intermediate results.\n  var result = function(instance, obj) {\n    return instance._chain ? _(obj).chain() : obj;\n  };\n\n  // Add your own custom functions to the Underscore object.\n  _.mixin = function(obj) {\n    _.each(_.functions(obj), function(name) {\n      var func = _[name] = obj[name];\n      _.prototype[name] = function() {\n        var args = [this._wrapped];\n        push.apply(args, arguments);\n        return result(this, func.apply(_, args));\n      };\n    });\n  };\n\n  // Add all of the Underscore functions to the wrapper object.\n  _.mixin(_);\n\n  // Add all mutator Array functions to the wrapper.\n  _.each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      var obj = this._wrapped;\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) delete obj[0];\n      return result(this, obj);\n    };\n  });\n\n  // Add all accessor Array functions to the wrapper.\n  _.each(['concat', 'join', 'slice'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      return result(this, method.apply(this._wrapped, arguments));\n    };\n  });\n\n  // Extracts the result from a wrapped and chained object.\n  _.prototype.value = function() {\n    return this._wrapped;\n  };\n\n  // Provide unwrapping proxy for some methods used in engine operations\n  // such as arithmetic and JSON stringification.\n  _.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n\n  _.prototype.toString = function() {\n    return '' + this._wrapped;\n  };\n\n  // AMD registration happens at the end for compatibility with AMD loaders\n  // that may not enforce next-turn semantics on modules. Even though general\n  // practice for AMD registration is to be anonymous, underscore registers\n  // as a named module because, like jQuery, it is a base library that is\n  // popular enough to be bundled in a third party lib, but not be part of\n  // an AMD load request. Those cases could generate an error when an\n  // anonymous define() is called outside of a loader request.\n  if (typeof define === 'function' && define.amd) {\n    define('underscore', [], function() {\n      return _;\n    });\n  }\n}.call(this));\n\n}\n, \"ep_etherpad-lite/static/js/security.js\": function (require, exports, module) {\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nmodule.exports = require('security');\n\n}\n, \"security.js\": null\n, \"ep_etherpad-lite/static/js/json2.js\": function (require, exports, module) {\n/*\n    http://www.JSON.org/json2.js\n    2011-02-23\n\n    Public Domain.\n\n    NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\n\n    See http://www.JSON.org/js.html\n\n\n    This code should be minified before deployment.\n    See http://javascript.crockford.com/jsmin.html\n\n    USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO\n    NOT CONTROL.\n\n\n    This file creates a global JSON object containing two methods: stringify\n    and parse.\n\n        JSON.stringify(value, replacer, space)\n            value       any JavaScript value, usually an object or array.\n\n            replacer    an optional parameter that determines how object\n                        values are stringified for objects. It can be a\n                        function or an array of strings.\n\n            space       an optional parameter that specifies the indentation\n                        of nested structures. If it is omitted, the text will\n                        be packed without extra whitespace. If it is a number,\n                        it will specify the number of spaces to indent at each\n                        level. If it is a string (such as '\\t' or '&nbsp;'),\n                        it contains the characters used to indent at each level.\n\n            This method produces a JSON text from a JavaScript value.\n\n            When an object value is found, if the object contains a toJSON\n            method, its toJSON method will be called and the result will be\n            stringified. A toJSON method does not serialize: it returns the\n            value represented by the name/value pair that should be serialized,\n            or undefined if nothing should be serialized. The toJSON method\n            will be passed the key associated with the value, and this will be\n            bound to the value\n\n            For example, this would serialize Dates as ISO strings.\n\n                Date.prototype.toJSON = function (key) {\n                    function f(n) {\n                        // Format integers to have at least two digits.\n                        return n < 10 ? '0' + n : n;\n                    }\n\n                    return this.getUTCFullYear()   + '-' +\n                         f(this.getUTCMonth() + 1) + '-' +\n                         f(this.getUTCDate())      + 'T' +\n                         f(this.getUTCHours())     + ':' +\n                         f(this.getUTCMinutes())   + ':' +\n                         f(this.getUTCSeconds())   + 'Z';\n                };\n\n            You can provide an optional replacer method. It will be passed the\n            key and value of each member, with this bound to the containing\n            object. The value that is returned from your method will be\n            serialized. If your method returns undefined, then the member will\n            be excluded from the serialization.\n\n            If the replacer parameter is an array of strings, then it will be\n            used to select the members to be serialized. It filters the results\n            such that only members with keys listed in the replacer array are\n            stringified.\n\n            Values that do not have JSON representations, such as undefined or\n            functions, will not be serialized. Such values in objects will be\n            dropped; in arrays they will be replaced with null. You can use\n            a replacer function to replace those with JSON values.\n            JSON.stringify(undefined) returns undefined.\n\n            The optional space parameter produces a stringification of the\n            value that is filled with line breaks and indentation to make it\n            easier to read.\n\n            If the space parameter is a non-empty string, then that string will\n            be used for indentation. If the space parameter is a number, then\n            the indentation will be that many spaces.\n\n            Example:\n\n            text = JSON.stringify(['e', {pluribus: 'unum'}]);\n            // text is '[\"e\",{\"pluribus\":\"unum\"}]'\n\n\n            text = JSON.stringify(['e', {pluribus: 'unum'}], null, '\\t');\n            // text is '[\\n\\t\"e\",\\n\\t{\\n\\t\\t\"pluribus\": \"unum\"\\n\\t}\\n]'\n\n            text = JSON.stringify([new Date()], function (key, value) {\n                return this[key] instanceof Date ?\n                    'Date(' + this[key] + ')' : value;\n            });\n            // text is '[\"Date(---current time---)\"]'\n\n\n        JSON.parse(text, reviver)\n            This method parses a JSON text to produce an object or array.\n            It can throw a SyntaxError exception.\n\n            The optional reviver parameter is a function that can filter and\n            transform the results. It receives each of the keys and values,\n            and its return value is used instead of the original value.\n            If it returns what it received, then the structure is not modified.\n            If it returns undefined then the member is deleted.\n\n            Example:\n\n            // Parse the text. Values that look like ISO date strings will\n            // be converted to Date objects.\n\n            myData = JSON.parse(text, function (key, value) {\n                var a;\n                if (typeof value === 'string') {\n                    a =\n/^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2}(?:\\.\\d*)?)Z$/.exec(value);\n                    if (a) {\n                        return new Date(Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4],\n                            +a[5], +a[6]));\n                    }\n                }\n                return value;\n            });\n\n            myData = JSON.parse('[\"Date(09/09/2001)\"]', function (key, value) {\n                var d;\n                if (typeof value === 'string' &&\n                        value.slice(0, 5) === 'Date(' &&\n                        value.slice(-1) === ')') {\n                    d = new Date(value.slice(5, -1));\n                    if (d) {\n                        return d;\n                    }\n                }\n                return value;\n            });\n\n\n    This is a reference implementation. You are free to copy, modify, or\n    redistribute.\n*/\n\n/*jslint evil: true, strict: false, regexp: false */\n\n/*members \"\", \"\\b\", \"\\t\", \"\\n\", \"\\f\", \"\\r\", \"\\\"\", JSON, \"\\\\\", apply,\n    call, charCodeAt, getUTCDate, getUTCFullYear, getUTCHours,\n    getUTCMinutes, getUTCMonth, getUTCSeconds, hasOwnProperty, join,\n    lastIndex, length, parse, prototype, push, replace, slice, stringify,\n    test, toJSON, toString, valueOf\n*/\n\n\n// Create a JSON object only if one does not already exist. We create the\n// methods in a closure to avoid creating global variables.\nvar JSON;\nif (!JSON)\n{\n  JSON = {};\n}\n\n(function()\n{\n  \"use strict\";\n\n  function f(n)\n  {\n    // Format integers to have at least two digits.\n    return n < 10 ? '0' + n : n;\n  }\n\n  if (typeof Date.prototype.toJSON !== 'function')\n  {\n\n    Date.prototype.toJSON = function(key)\n    {\n\n      return isFinite(this.valueOf()) ? this.getUTCFullYear() + '-' + f(this.getUTCMonth() + 1) + '-' + f(this.getUTCDate()) + 'T' + f(this.getUTCHours()) + ':' + f(this.getUTCMinutes()) + ':' + f(this.getUTCSeconds()) + 'Z' : null;\n    };\n\n    String.prototype.toJSON = Number.prototype.toJSON = Boolean.prototype.toJSON = function(key)\n    {\n      return this.valueOf();\n    };\n  }\n\n  var cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n      escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n      gap, indent, meta = { // table of character substitutions\n      '\\b': '\\\\b',\n      '\\t': '\\\\t',\n      '\\n': '\\\\n',\n      '\\f': '\\\\f',\n      '\\r': '\\\\r',\n      '\"': '\\\\\"',\n      '\\\\': '\\\\\\\\'\n      },\n      rep;\n\n\n  function quote(string)\n  {\n\n    // If the string contains no control characters, no quote characters, and no\n    // backslash characters, then we can safely slap some quotes around it.\n    // Otherwise we must also replace the offending characters with safe escape\n    // sequences.\n    escapable.lastIndex = 0;\n    return escapable.test(string) ? '\"' + string.replace(escapable, function(a)\n    {\n      var c = meta[a];\n      return typeof c === 'string' ? c : '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n    }) + '\"' : '\"' + string + '\"';\n  }\n\n\n  function str(key, holder)\n  {\n\n    // Produce a string from holder[key].\n    var i, // The loop counter.\n    k, // The member key.\n    v, // The member value.\n    length, mind = gap,\n        partial, value = holder[key];\n\n    // If the value has a toJSON method, call it to obtain a replacement value.\n    if (value && typeof value === 'object' && typeof value.toJSON === 'function')\n    {\n      value = value.toJSON(key);\n    }\n\n    // If we were called with a replacer function, then call the replacer to\n    // obtain a replacement value.\n    if (typeof rep === 'function')\n    {\n      value = rep.call(holder, key, value);\n    }\n\n    // What happens next depends on the value's type.\n    switch (typeof value)\n    {\n    case 'string':\n      return quote(value);\n\n    case 'number':\n\n      // JSON numbers must be finite. Encode non-finite numbers as null.\n      return isFinite(value) ? String(value) : 'null';\n\n    case 'boolean':\n    case 'null':\n\n      // If the value is a boolean or null, convert it to a string. Note:\n      // typeof null does not produce 'null'. The case is included here in\n      // the remote chance that this gets fixed someday.\n      return String(value);\n\n      // If the type is 'object', we might be dealing with an object or an array or\n      // null.\n    case 'object':\n\n      // Due to a specification blunder in ECMAScript, typeof null is 'object',\n      // so watch out for that case.\n      if (!value)\n      {\n        return 'null';\n      }\n\n      // Make an array to hold the partial results of stringifying this object value.\n      gap += indent;\n      partial = [];\n\n      // Is the value an array?\n      if (Object.prototype.toString.apply(value) === '[object Array]')\n      {\n\n        // The value is an array. Stringify every element. Use null as a placeholder\n        // for non-JSON values.\n        length = value.length;\n        for (i = 0; i < length; i += 1)\n        {\n          partial[i] = str(i, value) || 'null';\n        }\n\n        // Join all of the elements together, separated with commas, and wrap them in\n        // brackets.\n        v = partial.length === 0 ? '[]' : gap ? '[\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + ']' : '[' + partial.join(',') + ']';\n        gap = mind;\n        return v;\n      }\n\n      // If the replacer is an array, use it to select the members to be stringified.\n      if (rep && typeof rep === 'object')\n      {\n        length = rep.length;\n        for (i = 0; i < length; i += 1)\n        {\n          if (typeof rep[i] === 'string')\n          {\n            k = rep[i];\n            v = str(k, value);\n            if (v)\n            {\n              partial.push(quote(k) + (gap ? ': ' : ':') + v);\n            }\n          }\n        }\n      }\n      else\n      {\n\n        // Otherwise, iterate through all of the keys in the object.\n        for (k in value)\n        {\n          if (Object.prototype.hasOwnProperty.call(value, k))\n          {\n            v = str(k, value);\n            if (v)\n            {\n              partial.push(quote(k) + (gap ? ': ' : ':') + v);\n            }\n          }\n        }\n      }\n\n      // Join all of the member texts together, separated with commas,\n      // and wrap them in braces.\n      v = partial.length === 0 ? '{}' : gap ? '{\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + '}' : '{' + partial.join(',') + '}';\n      gap = mind;\n      return v;\n    }\n  }\n\n  // If the JSON object does not yet have a stringify method, give it one.\n  if (typeof JSON.stringify !== 'function')\n  {\n    JSON.stringify = function(value, replacer, space)\n    {\n\n      // The stringify method takes a value and an optional replacer, and an optional\n      // space parameter, and returns a JSON text. The replacer can be a function\n      // that can replace values, or an array of strings that will select the keys.\n      // A default replacer method can be provided. Use of the space parameter can\n      // produce text that is more easily readable.\n      var i;\n      gap = '';\n      indent = '';\n\n      // If the space parameter is a number, make an indent string containing that\n      // many spaces.\n      if (typeof space === 'number')\n      {\n        for (i = 0; i < space; i += 1)\n        {\n          indent += ' ';\n        }\n\n        // If the space parameter is a string, it will be used as the indent string.\n      }\n      else if (typeof space === 'string')\n      {\n        indent = space;\n      }\n\n      // If there is a replacer, it must be a function or an array.\n      // Otherwise, throw an error.\n      rep = replacer;\n      if (replacer && typeof replacer !== 'function' && (typeof replacer !== 'object' || typeof replacer.length !== 'number'))\n      {\n        throw new Error('JSON.stringify');\n      }\n\n      // Make a fake root object containing our value under the key of ''.\n      // Return the result of stringifying the value.\n      return str('', {\n        '': value\n      });\n    };\n  }\n\n\n  // If the JSON object does not yet have a parse method, give it one.\n  if (typeof JSON.parse !== 'function')\n  {\n    JSON.parse = function(text, reviver)\n    {\n\n      // The parse method takes a text and an optional reviver function, and returns\n      // a JavaScript value if the text is a valid JSON text.\n      var j;\n\n      function walk(holder, key)\n      {\n\n        // The walk method is used to recursively walk the resulting structure so\n        // that modifications can be made.\n        var k, v, value = holder[key];\n        if (value && typeof value === 'object')\n        {\n          for (k in value)\n          {\n            if (Object.prototype.hasOwnProperty.call(value, k))\n            {\n              v = walk(value, k);\n              if (v !== undefined)\n              {\n                value[k] = v;\n              }\n              else\n              {\n                delete value[k];\n              }\n            }\n          }\n        }\n        return reviver.call(holder, key, value);\n      }\n\n\n      // Parsing happens in four stages. In the first stage, we replace certain\n      // Unicode characters with escape sequences. JavaScript handles many characters\n      // incorrectly, either silently deleting them, or treating them as line endings.\n      text = String(text);\n      cx.lastIndex = 0;\n      if (cx.test(text))\n      {\n        text = text.replace(cx, function(a)\n        {\n          return '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n        });\n      }\n\n      // In the second stage, we run the text against regular expressions that look\n      // for non-JSON patterns. We are especially concerned with '()' and 'new'\n      // because they can cause invocation, and '=' because it can cause mutation.\n      // But just to be safe, we want to reject all unexpected forms.\n      // We split the second stage into 4 regexp operations in order to work around\n      // crippling inefficiencies in IE's and Safari's regexp engines. First we\n      // replace the JSON backslash pairs with '@' (a non-JSON character). Second, we\n      // replace all simple value tokens with ']' characters. Third, we delete all\n      // open brackets that follow a colon or comma or that begin the text. Finally,\n      // we look to see that the remaining characters are only whitespace or ']' or\n      // ',' or ':' or '{' or '}'. If that is so, then the text is safe for eval.\n      if (/^[\\],:{}\\s]*$/.test(text.replace(/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@').replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, ']').replace(/(?:^|:|,)(?:\\s*\\[)+/g, '')))\n      {\n\n        // In the third stage we use the eval function to compile the text into a\n        // JavaScript structure. The '{' operator is subject to a syntactic ambiguity\n        // in JavaScript: it can begin a block or an object literal. We wrap the text\n        // in parens to eliminate the ambiguity.\n        j = eval('(' + text + ')');\n\n        // In the optional fourth stage, we recursively walk the new structure, passing\n        // each name/value pair to a reviver function for possible transformation.\n        return typeof reviver === 'function' ? walk(\n        {\n          '': j\n        }, '') : j;\n      }\n\n      // If the text is not JSON parseable, then a SyntaxError is thrown.\n      throw new SyntaxError('JSON.parse: ' + text);\n    };\n  }\n}());\n\nmodule.exports = JSON;\n\n}\n, \"ep_etherpad-lite/static/js/pluginfw/client_plugins.js\": function (require, exports, module) {\nvar $, jQuery;\n$ = jQuery = require(\"ep_etherpad-lite/static/js/rjquery\").$;\nvar _ = require(\"underscore\");\n\nvar pluginUtils = require('./shared');\n\nexports.loaded = false;\nexports.plugins = {};\nexports.parts = [];\nexports.hooks = {};\nexports.baseURL = '';\n\nexports.ensure = function (cb) {\n  if (!exports.loaded)\n    exports.update(cb);\n  else\n    cb();\n};\n\nexports.update = function (cb) {\n  // It appears that this response (see #620) may interrupt the current thread\n  // of execution on Firefox. This schedules the response in the run-loop,\n  // which appears to fix the issue.\n  var callback = function () {setTimeout(cb, 0);};\n\n  jQuery.getJSON(exports.baseURL + 'pluginfw/plugin-definitions.json', function(data) {\n    exports.plugins = data.plugins;\n    exports.parts = data.parts;\n    exports.hooks = pluginUtils.extractHooks(exports.parts, \"client_hooks\");\n    exports.loaded = true;\n    callback();\n   }).error(function(xhr, s, err){\n     console.error(\"Failed to load plugin-definitions: \" + err);\n     callback();\n   });\n};\n\nfunction adoptPlugins(plugins) {\n  var keys = [\n      'loaded', 'plugins', 'parts', 'hooks', 'baseURL', 'ensure', 'update'];\n\n  for (var i = 0, ii = keys.length; i < ii; i++) {\n    var key = keys[i];\n    exports[key] = plugins[key];\n  }\n}\n\nfunction adoptPluginsFromAncestorsOf(frame) {\n  // Bind plugins with parent;\n  var parentRequire = null;\n  try {\n    while (frame = frame.parent) {\n      if (typeof (frame.require) !== \"undefined\") {\n        parentRequire = frame.require;\n        break;\n      }\n    }\n  } catch (error) {\n    // Silence (this can only be a XDomain issue).\n  }\n  if (parentRequire) {\n    var ancestorPlugins = parentRequire(\"ep_etherpad-lite/static/js/pluginfw/client_plugins\");\n    exports.adoptPlugins(ancestorPlugins);\n  } else {\n    throw new Error(\"Parent plugins could not be found.\")\n  }\n}\n\nexports.adoptPlugins = adoptPlugins;\nexports.adoptPluginsFromAncestorsOf = adoptPluginsFromAncestorsOf;\n\n}\n, \"ep_etherpad-lite/static/js/pluginfw/shared.js\": function (require, exports, module) {\nvar _ = require(\"underscore\");\n\nfunction loadFn(path, hookName) {\n  var functionName\n    , parts = path.split(\":\");\n\n  // on windows: C:\\foo\\bar:xyz\n  if (parts[0].length == 1) {\n    if (parts.length == 3) {\n      functionName = parts.pop();\n    }\n    path = parts.join(\":\");\n  } else {\n    path = parts[0];\n    functionName = parts[1];\n  }\n\n  var fn = require(path);\n  functionName = functionName ? functionName : hookName;\n\n  _.each(functionName.split(\".\"), function (name) {\n    fn = fn[name];\n  });\n  return fn;\n};\n\nfunction extractHooks(parts, hook_set_name, normalizer) {\n  var hooks = {};\n  _.each(parts,function (part) {\n    _.chain(part[hook_set_name] || {})\n    .keys()\n    .each(function (hook_name) {\n      if (hooks[hook_name] === undefined) hooks[hook_name] = [];\n\n      var hook_fn_name = part[hook_set_name][hook_name];\n\n      /* On the server side, you can't just\n       * require(\"pluginname/whatever\") if the plugin is installed as\n       * a dependency of another plugin! Bah, pesky little details of\n       * npm... */\n      if (normalizer) {\n        hook_fn_name = normalizer(part, hook_fn_name);\n      }\n\n      try {\n        var hook_fn = loadFn(hook_fn_name, hook_name);\n        if (!hook_fn) {\n          throw \"Not a function\";\n        }\n      } catch (exc) {\n        console.error(\"Failed to load '\" + hook_fn_name + \"' for '\" + part.full_name + \"/\" + hook_set_name + \"/\" + hook_name + \"': \" + exc.toString())\n      }\n      if (hook_fn) {\n        hooks[hook_name].push({\"hook_name\": hook_name, \"hook_fn\": hook_fn, \"hook_fn_name\": hook_fn_name, \"part\": part});\n      }\n    });\n  });\n  return hooks;\n};\n\nexports.extractHooks = extractHooks;\n\n}\n, \"ep_etherpad-lite/static/js/pluginfw/hooks.js\": function (require, exports, module) {\nvar async = require(\"async\");\nvar _ = require(\"underscore\");\n\nexports.bubbleExceptions = true\n\nvar hookCallWrapper = function (hook, hook_name, args, cb) {\n  if (cb === undefined) cb = function (x) { return x; };\n\n  // Normalize output to list for both sync and async cases\n  var normalize = function(x) {\n    if (x === undefined) return [];\n    return x;\n  }\n  var normalizedhook = function () {\n    return normalize(hook.hook_fn(hook_name, args, function (x) {\n      return cb(normalize(x));\n    }));\n  }\n\n  if (exports.bubbleExceptions) {\n      return normalizedhook();\n  } else {\n    try {\n      return normalizedhook();\n    } catch (ex) {\n      console.error([hook_name, hook.part.full_name, ex.stack || ex]);\n    }\n  }\n}\n\nexports.syncMapFirst = function (lst, fn) {\n  var i;\n  var result;\n  for (i = 0; i < lst.length; i++) {\n    result = fn(lst[i])\n    if (result.length) return result;\n  }\n  return undefined;\n}\n\nexports.mapFirst = function (lst, fn, cb) {\n  var i = 0;\n\n  var next = function () {\n    if (i >= lst.length) return cb(undefined);\n    fn(lst[i++], function (err, result) {\n      if (err) return cb(err);\n      if (result.length) return cb(null, result);\n      next();\n    });\n  }\n  next();\n}\n\n\n/* Don't use Array.concat as it flatterns arrays within the array */\nexports.flatten = function (lst) {\n  var res = [];\n  if (lst != undefined && lst != null) {\n    for (var i = 0; i < lst.length; i++) {\n      if (lst[i] != undefined && lst[i] != null) {\n        for (var j = 0; j < lst[i].length; j++) {\n          res.push(lst[i][j]);\n    }\n      }\n    }\n  }\n  return res;\n}\n\nexports.callAll = function (hook_name, args) {\n  if (!args) args = {};\n  if (exports.plugins){\n    if (exports.plugins.hooks[hook_name] === undefined) return [];\n    return _.flatten(_.map(exports.plugins.hooks[hook_name], function (hook) {\n      return hookCallWrapper(hook, hook_name, args);\n    }), true);\n  }\n}\n\nexports.aCallAll = function (hook_name, args, cb) {\n  if (!args) args = {};\n  if (!cb) cb = function () {};\n  if (exports.plugins.hooks[hook_name] === undefined) return cb(null, []);\n  async.map(\n    exports.plugins.hooks[hook_name],\n    function (hook, cb) {\n      hookCallWrapper(hook, hook_name, args, function (res) { cb(null, res); });\n    },\n    function (err, res) {\n        cb(null, _.flatten(res, true));\n    }\n  );\n}\n\nexports.callFirst = function (hook_name, args) {\n  if (!args) args = {};\n  if (exports.plugins.hooks[hook_name] === undefined) return [];\n  return exports.syncMapFirst(exports.plugins.hooks[hook_name], function (hook) {\n    return hookCallWrapper(hook, hook_name, args);\n  });\n}\n\nexports.aCallFirst = function (hook_name, args, cb) {\n  if (!args) args = {};\n  if (!cb) cb = function () {};\n  if (exports.plugins.hooks[hook_name] === undefined) return cb(null, []);\n  exports.mapFirst(\n    exports.plugins.hooks[hook_name],\n    function (hook, cb) {\n      hookCallWrapper(hook, hook_name, args, function (res) { cb(null, res); });\n    },\n    cb\n  );\n}\n\nexports.callAllStr = function(hook_name, args, sep, pre, post) {\n  if (sep == undefined) sep = '';\n  if (pre == undefined) pre = '';\n  if (post == undefined) post = '';\n  var newCallhooks = [];\n  var callhooks = exports.callAll(hook_name, args);\n  for (var i = 0, ii = callhooks.length; i < ii; i++) {\n    newCallhooks[i] = pre + callhooks[i] + post;\n  }\n  return newCallhooks.join(sep || \"\");\n}\n\n}\n, \"ep_etherpad-lite/static/js/ace2_common\": null\n, \"ep_etherpad-lite/static/js/browser\": null\n, \"ep_etherpad-lite/static/js/jquery\": null\n, \"ep_etherpad-lite/static/js/rjquery\": null\n, \"async\": null\n, \"async/lib/async\": null\n, \"ep_etherpad-lite/static/js/underscore\": null\n, \"underscore\": null\n, \"underscore/underscore\": null\n, \"ep_etherpad-lite/static/js/security\": null\n, \"security\": null\n, \"ep_etherpad-lite/static/js/json2\": null\n, \"ep_etherpad-lite/static/js/pluginfw/client_plugins\": null\n, \"ep_etherpad-lite/static/js/pluginfw/shared\": null\n, \"ep_etherpad-lite/static/js/pluginfw/hooks\": null\n, \"ep_etherpad-lite/static/js/ace2_common/index.js\": null\n, \"ep_etherpad-lite/static/js/browser/index.js\": null\n, \"ep_etherpad-lite/static/js/jquery/index.js\": null\n, \"ep_etherpad-lite/static/js/rjquery/index.js\": null\n, \"async/index.js\": null\n, \"async/lib/async/index.js\": null\n, \"ep_etherpad-lite/static/js/underscore/index.js\": null\n, \"underscore/index.js\": null\n, \"underscore/underscore/index.js\": null\n, \"ep_etherpad-lite/static/js/security/index.js\": null\n, \"security/index.js\": function (require, exports, module) {\n/*!\n\n  Copyright (c) 2011 Chad Weider\n\n  Permission is hereby granted, free of charge, to any person obtaining a copy\n  of this software and associated documentation files (the \"Software\"), to deal\n  in the Software without restriction, including without limitation the rights\n  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n  copies of the Software, and to permit persons to whom the Software is\n  furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in\n  all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n\n*/\n\nvar HTML_ENTITY_MAP = {\n  '&': '&amp;'\n, '<': '&lt;'\n, '>': '&gt;'\n, '\"': '&quot;'\n, \"'\": '&#x27;'\n, '/': '&#x2F;'\n};\n\n// OSWASP Guidlines: &, <, >, \", ' plus forward slash.\nvar HTML_CHARACTERS_EXPRESSION = /[&\"'<>\\/]/gm;\nfunction escapeHTML(text) {\n  return text && text.replace(HTML_CHARACTERS_EXPRESSION, function (c) {\n    return HTML_ENTITY_MAP[c] || c;\n  });\n}\n\n// OSWASP Guidlines: escape all non alphanumeric characters in ASCII space.\nvar HTML_ATTRIBUTE_CHARACTERS_EXPRESSION =\n    /[\\x00-\\x2F\\x3A-\\x40\\x5B-\\x60\\x7B-\\xFF]/gm;\nfunction escapeHTMLAttribute(text) {\n  return text && text.replace(HTML_ATTRIBUTE_CHARACTERS_EXPRESSION, function (c) {\n    return HTML_ENTITY_MAP[c] || \"&#x\" + ('00' + c.charCodeAt(0).toString(16)).slice(-2) + \";\";\n  });\n};\n\n// OSWASP Guidlines: escape all non alphanumeric characters in ASCII space.\n// Also include line breaks (for literal).\nvar JAVASCRIPT_CHARACTERS_EXPRESSION =\n    /[\\x00-\\x2F\\x3A-\\x40\\x5B-\\x60\\x7B-\\xFF\\u2028\\u2029]/gm;\nfunction encodeJavaScriptIdentifier(text) {\n  return text && text.replace(JAVASCRIPT_CHARACTERS_EXPRESSION, function (c) {\n    return \"\\\\u\" + ('0000' + c.charCodeAt(0).toString(16)).slice(-4);\n  });\n}\nfunction encodeJavaScriptString(text) {\n  return text && '\"' + encodeJavaScriptIdentifier(text) + '\"';\n}\n\n// This is not great, but it is useful.\nvar JSON_STRING_LITERAL_EXPRESSION =\n    /\"(?:\\\\.|[^\"])*\"/gm;\nfunction encodeJavaScriptData(object) {\n  return JSON.stringify(object).replace(JSON_STRING_LITERAL_EXPRESSION, function (string) {\n    return encodeJavaScriptString(JSON.parse(string));\n  });\n}\n\n\n// OSWASP Guidlines: escape all non alphanumeric characters in ASCII space.\nvar CSS_CHARACTERS_EXPRESSION =\n    /[\\x00-\\x2F\\x3A-\\x40\\x5B-\\x60\\x7B-\\xFF]/gm;\nfunction encodeCSSIdentifier(text) {\n  return text && text.replace(CSS_CHARACTERS_EXPRESSION, function (c) {\n    return \"\\\\\" + ('000000' + c.charCodeAt(0).toString(16)).slice(-6);\n  });\n}\n\nfunction encodeCSSString(text) {\n  return text && '\"' + encodeCSSIdentifier(text) + '\"';\n}\n\nexports.escapeHTML = escapeHTML;\nexports.escapeHTMLAttribute = escapeHTMLAttribute;\n\nexports.encodeJavaScriptIdentifier = encodeJavaScriptIdentifier;\nexports.encodeJavaScriptString = encodeJavaScriptString;\nexports.encodeJavaScriptData = encodeJavaScriptData;\n\nexports.encodeCSSIdentifier = encodeCSSIdentifier;\nexports.encodeCSSString = encodeCSSString;\n\n}\n, \"ep_etherpad-lite/static/js/json2/index.js\": null\n, \"ep_etherpad-lite/static/js/pluginfw/client_plugins/index.js\": null\n, \"ep_etherpad-lite/static/js/pluginfw/shared/index.js\": null\n, \"ep_etherpad-lite/static/js/pluginfw/hooks/index.js\": null\n});\n"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": -1,
          "_transferSize": 324
        },
        "cache": {},
        "timings": {
          "blocked": 13.4509999998045,
          "dns": -1,
          "connect": -1,
          "send": 0,
          "wait": 0.5070000006525994,
          "receive": 10.347999999794416,
          "ssl": -1
        },
        "pageref": "page_2"
      },
      {
        "startedDateTime": "2015-06-09T16:53:05.800Z",
        "time": 11.98599999952421,
        "request": {
          "method": "GET",
          "url": "http://localhost:9001/javascripts/lib/ep_etherpad-lite/static/js/ace2_inner.js?callback=require.define",
          "httpVersion": "unknown",
          "headers": [
            {
              "name": "Referer",
              "value": "http://localhost:9001/p/bla"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.81 Safari/537.36"
            }
          ],
          "queryString": [
            {
              "name": "callback",
              "value": "require.define"
            }
          ],
          "cookies": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "unknown",
          "headers": [
            {
              "name": "date",
              "value": "Tue, 09 Jun 2015 16:53:05 GMT"
            },
            {
              "name": "x-content-type-options",
              "value": "nosniff"
            },
            {
              "name": "last-modified",
              "value": "Wed, 03 Jun 2015 18:13:43 GMT"
            },
            {
              "name": "Server",
              "value": "Etherpad d11c92c (http://etherpad.org)"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            },
            {
              "name": "content-type",
              "value": "application/javascript; charset=utf-8"
            },
            {
              "name": "cache-control",
              "value": "max-age=21600"
            },
            {
              "name": "X-UA-Compatible",
              "value": "IE=Edge,chrome=1"
            },
            {
              "name": "expires",
              "value": "Tue, 09 Jun 2015 22:53:05 GMT"
            }
          ],
          "cookies": [],
          "content": {
            "size": 332500,
            "mimeType": "application/javascript",
            "text": "require.define({\n  \"ep_etherpad-lite/static/js/ace2_inner.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code.\n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _, $, jQuery, plugins, Ace2Common;\n\nvar browser = require('./browser').browser;\nif(browser.msie){\n  // Honestly fuck IE royally.\n  // Basically every hack we have since V11 causes a problem\n  if(parseInt(browser.version) >= 11){\n    delete browser.msie;\n    browser.chrome = true;\n    browser.modernIE = true;\n  }\n}\n\nAce2Common = require('./ace2_common');\n\nplugins = require('ep_etherpad-lite/static/js/pluginfw/client_plugins');\n$ = jQuery = require('./rjquery').$;\n_ = require(\"./underscore\");\n\nvar isNodeText = Ace2Common.isNodeText,\n  getAssoc = Ace2Common.getAssoc,\n  setAssoc = Ace2Common.setAssoc,\n  isTextNode = Ace2Common.isTextNode,\n  binarySearchInfinite = Ace2Common.binarySearchInfinite,\n  htmlPrettyEscape = Ace2Common.htmlPrettyEscape,\n  noop = Ace2Common.noop;\nvar hooks = require('./pluginfw/hooks');\n\nfunction Ace2Inner(){\n\n  var makeChangesetTracker = require('./changesettracker').makeChangesetTracker;\n  var colorutils = require('./colorutils').colorutils;\n  var makeContentCollector = require('./contentcollector').makeContentCollector;\n  var makeCSSManager = require('./cssmanager').makeCSSManager;\n  var domline = require('./domline').domline;\n  var AttribPool = require('./AttributePool');\n  var Changeset = require('./Changeset');\n  var ChangesetUtils = require('./ChangesetUtils');\n  var linestylefilter = require('./linestylefilter').linestylefilter;\n  var SkipList = require('./skiplist');\n  var undoModule = require('./undomodule').undoModule;\n  var AttributeManager = require('./AttributeManager');\n\n  var DEBUG = false; //$$ build script replaces the string \"var DEBUG=true;//$$\" with \"var DEBUG=false;\"\n  // changed to false\n  var isSetUp = false;\n\n  var THE_TAB = '    '; //4\n  var MAX_LIST_LEVEL = 16;\n\n  var LINE_NUMBER_PADDING_RIGHT = 4;\n  var LINE_NUMBER_PADDING_LEFT = 4;\n  var MIN_LINEDIV_WIDTH = 20;\n  var EDIT_BODY_PADDING_TOP = 8;\n  var EDIT_BODY_PADDING_LEFT = 8;\n\n  var caughtErrors = [];\n\n  var thisAuthor = '';\n\n  var disposed = false;\n  var editorInfo = parent.editorInfo;\n\n  var iframe = window.frameElement;\n  var outerWin = iframe.ace_outerWin;\n  iframe.ace_outerWin = null; // prevent IE 6 memory leak\n  var sideDiv = iframe.nextSibling;\n  var lineMetricsDiv = sideDiv.nextSibling;\n  initLineNumbers();\n\n  var outsideKeyDown = noop;\n\n  var outsideKeyPress = function(){return true;};\n\n  var outsideNotifyDirty = noop;\n\n  // selFocusAtStart -- determines whether the selection extends \"backwards\", so that the focus\n  // point (controlled with the arrow keys) is at the beginning; not supported in IE, though\n  // native IE selections have that behavior (which we try not to interfere with).\n  // Must be false if selection is collapsed!\n  var rep = {\n    lines: new SkipList(),\n    selStart: null,\n    selEnd: null,\n    selFocusAtStart: false,\n    alltext: \"\",\n    alines: [],\n    apool: new AttribPool()\n  };\n\n  // lines, alltext, alines, and DOM are set up in init()\n  if (undoModule.enabled)\n  {\n    undoModule.apool = rep.apool;\n  }\n\n  var root, doc; // set in init()\n  var isEditable = true;\n  var doesWrap = true;\n  var hasLineNumbers = true;\n  var isStyled = true;\n\n  // space around the innermost iframe element\n  var iframePadLeft = MIN_LINEDIV_WIDTH + LINE_NUMBER_PADDING_RIGHT + EDIT_BODY_PADDING_LEFT;\n  var iframePadTop = EDIT_BODY_PADDING_TOP;\n  var iframePadBottom = 0,\n      iframePadRight = 0;\n\n  var console = (DEBUG && window.console);\n  var documentAttributeManager;\n\n  if (!window.console)\n  {\n    var names = [\"log\", \"debug\", \"info\", \"warn\", \"error\", \"assert\", \"dir\", \"dirxml\", \"group\", \"groupEnd\", \"time\", \"timeEnd\", \"count\", \"trace\", \"profile\", \"profileEnd\"];\n    console = {};\n    for (var i = 0; i < names.length; ++i)\n    console[names[i]] = noop;\n    //console.error = function(str) { alert(str); };\n  }\n\n  var PROFILER = window.PROFILER;\n  if (!PROFILER)\n  {\n    PROFILER = function()\n    {\n      return {\n        start: noop,\n        mark: noop,\n        literal: noop,\n        end: noop,\n        cancel: noop\n      };\n    };\n  }\n\n  // \"dmesg\" is for displaying messages in the in-page output pane\n  // visible when \"?djs=1\" is appended to the pad URL.  It generally\n  // remains a no-op unless djs is enabled, but we make a habit of\n  // only calling it in error cases or while debugging.\n  var dmesg = noop;\n  window.dmesg = noop;\n\n  var scheduler = parent; // hack for opera required\n\n  var textFace = 'monospace';\n  var textSize = 12;\n\n\n  function textLineHeight()\n  {\n    return Math.round(textSize * 4 / 3);\n  }\n\n  var dynamicCSS = null;\n  var outerDynamicCSS = null;\n  var parentDynamicCSS = null;\n\n  function initDynamicCSS()\n  {\n    dynamicCSS = makeCSSManager(\"dynamicsyntax\");\n    outerDynamicCSS = makeCSSManager(\"dynamicsyntax\", \"outer\");\n    parentDynamicCSS = makeCSSManager(\"dynamicsyntax\", \"parent\");\n  }\n\n  var changesetTracker = makeChangesetTracker(scheduler, rep.apool, {\n    withCallbacks: function(operationName, f)\n    {\n      inCallStackIfNecessary(operationName, function()\n      {\n        fastIncorp(1);\n        f(\n        {\n          setDocumentAttributedText: function(atext)\n          {\n            setDocAText(atext);\n          },\n          applyChangesetToDocument: function(changeset, preferInsertionAfterCaret)\n          {\n            var oldEventType = currentCallStack.editEvent.eventType;\n            currentCallStack.startNewEvent(\"nonundoable\");\n\n            performDocumentApplyChangeset(changeset, preferInsertionAfterCaret);\n\n            currentCallStack.startNewEvent(oldEventType);\n          }\n        });\n      });\n    }\n  });\n\n  var authorInfos = {}; // presence of key determines if author is present in doc\n\n  function getAuthorInfos(){\n    return authorInfos;\n  };\n  editorInfo.ace_getAuthorInfos= getAuthorInfos;\n\n  function setAuthorStyle(author, info)\n  {\n    if (!dynamicCSS) {\n      return;\n    }\n    var authorSelector = getAuthorColorClassSelector(getAuthorClassName(author));\n\n    var authorStyleSet = hooks.callAll('aceSetAuthorStyle', {\n      dynamicCSS: dynamicCSS,\n      parentDynamicCSS: parentDynamicCSS,\n      outerDynamicCSS: outerDynamicCSS,\n      info: info,\n      author: author,\n      authorSelector: authorSelector,\n    });\n\n    // Prevent default behaviour if any hook says so\n    if (_.any(authorStyleSet, function(it) { return it }))\n    {\n      return\n    }\n\n    if (!info)\n    {\n      dynamicCSS.removeSelectorStyle(authorSelector);\n      parentDynamicCSS.removeSelectorStyle(authorSelector);\n    }\n    else\n    {\n      if (info.bgcolor)\n      {\n        var bgcolor = info.bgcolor;\n        if ((typeof info.fade) == \"number\")\n        {\n          bgcolor = fadeColor(bgcolor, info.fade);\n        }\n\n        var authorStyle = dynamicCSS.selectorStyle(authorSelector);\n        var parentAuthorStyle = parentDynamicCSS.selectorStyle(authorSelector);\n        var anchorStyle = dynamicCSS.selectorStyle(authorSelector + ' > a')\n\n        // author color\n        authorStyle.backgroundColor = bgcolor;\n        parentAuthorStyle.backgroundColor = bgcolor;\n\n        // text contrast\n        if(colorutils.luminosity(colorutils.css2triple(bgcolor)) < 0.5)\n        {\n          authorStyle.color = '#ffffff';\n          parentAuthorStyle.color = '#ffffff';\n        }else{\n          authorStyle.color = null;\n          parentAuthorStyle.color = null;\n        }\n\n        // anchor text contrast\n        if(colorutils.luminosity(colorutils.css2triple(bgcolor)) < 0.55)\n        {\n          anchorStyle.color = colorutils.triple2css(colorutils.complementary(colorutils.css2triple(bgcolor)));\n        }else{\n          anchorStyle.color = null;\n        }\n      }\n    }\n  }\n\n  function setAuthorInfo(author, info)\n  {\n    if ((typeof author) != \"string\")\n    {\n      throw new Error(\"setAuthorInfo: author (\" + author + \") is not a string\");\n    }\n    if (!info)\n    {\n      delete authorInfos[author];\n    }\n    else\n    {\n      authorInfos[author] = info;\n    }\n    setAuthorStyle(author, info);\n  }\n\n  function getAuthorClassName(author)\n  {\n    return \"author-\" + author.replace(/[^a-y0-9]/g, function(c)\n    {\n      if (c == \".\") return \"-\";\n      return 'z' + c.charCodeAt(0) + 'z';\n    });\n  }\n\n  function className2Author(className)\n  {\n    if (className.substring(0, 7) == \"author-\")\n    {\n      return className.substring(7).replace(/[a-y0-9]+|-|z.+?z/g, function(cc)\n      {\n        if (cc == '-') return '.';\n        else if (cc.charAt(0) == 'z')\n        {\n          return String.fromCharCode(Number(cc.slice(1, -1)));\n        }\n        else\n        {\n          return cc;\n        }\n      });\n    }\n    return null;\n  }\n\n  function getAuthorColorClassSelector(oneClassName)\n  {\n    return \".authorColors .\" + oneClassName;\n  }\n\n  function setUpTrackingCSS()\n  {\n    if (dynamicCSS)\n    {\n      var backgroundHeight = lineMetricsDiv.offsetHeight;\n      var lineHeight = textLineHeight();\n      var extraBodding = 0;\n      var extraTodding = 0;\n      if (backgroundHeight < lineHeight)\n      {\n        extraBodding = Math.ceil((lineHeight - backgroundHeight) / 2);\n        extraTodding = lineHeight - backgroundHeight - extraBodding;\n      }\n      var spanStyle = dynamicCSS.selectorStyle(\"#innerdocbody span\");\n      spanStyle.paddingTop = extraTodding + \"px\";\n      spanStyle.paddingBottom = extraBodding + \"px\";\n    }\n  }\n\n  function fadeColor(colorCSS, fadeFrac)\n  {\n    var color = colorutils.css2triple(colorCSS);\n    color = colorutils.blend(color, [1, 1, 1], fadeFrac);\n    return colorutils.triple2css(color);\n  }\n\n  editorInfo.ace_getRep = function()\n  {\n    return rep;\n  };\n\n  editorInfo.ace_getAuthor = function()\n  {\n    return thisAuthor;\n  }\n\n  var currentCallStack = null;\n\n  function inCallStack(type, action)\n  {\n    if (disposed) return;\n\n    if (currentCallStack)\n    {\n      console.error(\"Can't enter callstack \" + type + \", already in \" + currentCallStack.type);\n    }\n\n    var profiling = false;\n\n    function profileRest()\n    {\n      profiling = true;\n      console.profile();\n    }\n\n    function newEditEvent(eventType)\n    {\n      return {\n        eventType: eventType,\n        backset: null\n      };\n    }\n\n    function submitOldEvent(evt)\n    {\n      if (rep.selStart && rep.selEnd)\n      {\n        var selStartChar = rep.lines.offsetOfIndex(rep.selStart[0]) + rep.selStart[1];\n        var selEndChar = rep.lines.offsetOfIndex(rep.selEnd[0]) + rep.selEnd[1];\n        evt.selStart = selStartChar;\n        evt.selEnd = selEndChar;\n        evt.selFocusAtStart = rep.selFocusAtStart;\n      }\n      if (undoModule.enabled)\n      {\n        var undoWorked = false;\n        try\n        {\n          if (evt.eventType == \"setup\" || evt.eventType == \"importText\" || evt.eventType == \"setBaseText\")\n          {\n            undoModule.clearHistory();\n          }\n          else if (evt.eventType == \"nonundoable\")\n          {\n            if (evt.changeset)\n            {\n              undoModule.reportExternalChange(evt.changeset);\n            }\n          }\n          else\n          {\n            undoModule.reportEvent(evt);\n          }\n          undoWorked = true;\n        }\n        finally\n        {\n          if (!undoWorked)\n          {\n            undoModule.enabled = false; // for safety\n          }\n        }\n      }\n    }\n\n    function startNewEvent(eventType, dontSubmitOld)\n    {\n      var oldEvent = currentCallStack.editEvent;\n      if (!dontSubmitOld)\n      {\n        submitOldEvent(oldEvent);\n      }\n      currentCallStack.editEvent = newEditEvent(eventType);\n      return oldEvent;\n    }\n\n    currentCallStack = {\n      type: type,\n      docTextChanged: false,\n      selectionAffected: false,\n      userChangedSelection: false,\n      domClean: false,\n      profileRest: profileRest,\n      isUserChange: false,\n      // is this a \"user change\" type of call-stack\n      repChanged: false,\n      editEvent: newEditEvent(type),\n      startNewEvent: startNewEvent\n    };\n    var cleanExit = false;\n    var result;\n    try\n    {\n      result = action();\n\n      hooks.callAll('aceEditEvent', {\n        callstack: currentCallStack,\n        editorInfo: editorInfo,\n        rep: rep,\n        documentAttributeManager: documentAttributeManager\n      });\n\n      //console.log(\"Just did action for: \"+type);\n      cleanExit = true;\n    }\n    catch (e)\n    {\n      caughtErrors.push(\n      {\n        error: e,\n        time: +new Date()\n      });\n      dmesg(e.toString());\n      throw e;\n    }\n    finally\n    {\n      var cs = currentCallStack;\n      //console.log(\"Finished action for: \"+type);\n      if (cleanExit)\n      {\n        submitOldEvent(cs.editEvent);\n        if (cs.domClean && cs.type != \"setup\")\n        {\n          // if (cs.isUserChange)\n          // {\n          //  if (cs.repChanged) parenModule.notifyChange();\n          //  else parenModule.notifyTick();\n          // }\n          if (cs.selectionAffected)\n          {\n            updateBrowserSelectionFromRep();\n          }\n          if ((cs.docTextChanged || cs.userChangedSelection) && cs.type != \"applyChangesToBase\")\n          {\n            scrollSelectionIntoView();\n          }\n          if (cs.docTextChanged && cs.type.indexOf(\"importText\") < 0)\n          {\n            outsideNotifyDirty();\n          }\n        }\n      }\n      else\n      {\n        // non-clean exit\n        if (currentCallStack.type == \"idleWorkTimer\")\n        {\n          idleWorkTimer.atLeast(1000);\n        }\n      }\n      currentCallStack = null;\n      if (profiling) console.profileEnd();\n    }\n    return result;\n  }\n  editorInfo.ace_inCallStack = inCallStack;\n\n  function inCallStackIfNecessary(type, action)\n  {\n    if (!currentCallStack)\n    {\n      inCallStack(type, action);\n    }\n    else\n    {\n      action();\n    }\n  }\n  editorInfo.ace_inCallStackIfNecessary = inCallStackIfNecessary;\n\n  function dispose()\n  {\n    disposed = true;\n    if (idleWorkTimer) idleWorkTimer.never();\n    teardown();\n  }\n\n  function checkALines()\n  {\n    return; // disable for speed\n\n\n    function error()\n    {\n      throw new Error(\"checkALines\");\n    }\n    if (rep.alines.length != rep.lines.length())\n    {\n      error();\n    }\n    for (var i = 0; i < rep.alines.length; i++)\n    {\n      var aline = rep.alines[i];\n      var lineText = rep.lines.atIndex(i).text + \"\\n\";\n      var lineTextLength = lineText.length;\n      var opIter = Changeset.opIterator(aline);\n      var alineLength = 0;\n      while (opIter.hasNext())\n      {\n        var o = opIter.next();\n        alineLength += o.chars;\n        if (opIter.hasNext())\n        {\n          if (o.lines !== 0) error();\n        }\n        else\n        {\n          if (o.lines != 1) error();\n        }\n      }\n      if (alineLength != lineTextLength)\n      {\n        error();\n      }\n    }\n  }\n\n  function setWraps(newVal)\n  {\n    doesWrap = newVal;\n    var dwClass = \"doesWrap\";\n    setClassPresence(root, \"doesWrap\", doesWrap);\n    scheduler.setTimeout(function()\n    {\n      inCallStackIfNecessary(\"setWraps\", function()\n      {\n        fastIncorp(7);\n        recreateDOM();\n        fixView();\n      });\n    }, 0);\n\n    // Chrome can't handle the truth..  If CSS rule white-space:pre-wrap\n    // is true then any paste event will insert two lines..\n    // Sadly this will mean you get a walking Caret in Chrome when clicking on a URL\n    // So this has to be set to pre-wrap ;(\n    // We need to file a bug w/ the Chromium team.\n    if(browser.chrome){\n      $(\"#innerdocbody\").addClass(\"noprewrap\");\n    }\n\n  }\n\n  function setStyled(newVal)\n  {\n    var oldVal = isStyled;\n    isStyled = !! newVal;\n\n    if (newVal != oldVal)\n    {\n      if (!newVal)\n      {\n        // clear styles\n        inCallStackIfNecessary(\"setStyled\", function()\n        {\n          fastIncorp(12);\n          var clearStyles = [];\n          for (var k in STYLE_ATTRIBS)\n          {\n            clearStyles.push([k, '']);\n          }\n          performDocumentApplyAttributesToCharRange(0, rep.alltext.length, clearStyles);\n        });\n      }\n    }\n  }\n\n  function setTextFace(face)\n  {\n    textFace = face;\n    root.style.fontFamily = textFace;\n    lineMetricsDiv.style.fontFamily = textFace;\n    scheduler.setTimeout(function()\n    {\n      setUpTrackingCSS();\n    }, 0);\n  }\n\n  function setTextSize(size)\n  {\n    textSize = size;\n    root.style.fontSize = textSize + \"px\";\n    root.style.lineHeight = textLineHeight() + \"px\";\n    sideDiv.style.lineHeight = textLineHeight() + \"px\";\n    lineMetricsDiv.style.fontSize = textSize + \"px\";\n    scheduler.setTimeout(function()\n    {\n      setUpTrackingCSS();\n    }, 0);\n  }\n\n  function recreateDOM()\n  {\n    // precond: normalized\n    recolorLinesInRange(0, rep.alltext.length);\n  }\n\n  function setEditable(newVal)\n  {\n    isEditable = newVal;\n\n    // the following may fail, e.g. if iframe is hidden\n    if (!isEditable)\n    {\n      setDesignMode(false);\n    }\n    else\n    {\n      setDesignMode(true);\n    }\n    setClassPresence(root, \"static\", !isEditable);\n  }\n\n  function enforceEditability()\n  {\n    setEditable(isEditable);\n  }\n\n  function importText(text, undoable, dontProcess)\n  {\n    var lines;\n    if (dontProcess)\n    {\n      if (text.charAt(text.length - 1) != \"\\n\")\n      {\n        throw new Error(\"new raw text must end with newline\");\n      }\n      if (/[\\r\\t\\xa0]/.exec(text))\n      {\n        throw new Error(\"new raw text must not contain CR, tab, or nbsp\");\n      }\n      lines = text.substring(0, text.length - 1).split('\\n');\n    }\n    else\n    {\n      lines = _.map(text.split('\\n'), textify);\n    }\n    var newText = \"\\n\";\n    if (lines.length > 0)\n    {\n      newText = lines.join('\\n') + '\\n';\n    }\n\n    inCallStackIfNecessary(\"importText\" + (undoable ? \"Undoable\" : \"\"), function()\n    {\n      setDocText(newText);\n    });\n\n    if (dontProcess && rep.alltext != text)\n    {\n      throw new Error(\"mismatch error setting raw text in importText\");\n    }\n  }\n\n  function importAText(atext, apoolJsonObj, undoable)\n  {\n    atext = Changeset.cloneAText(atext);\n    if (apoolJsonObj)\n    {\n      var wireApool = (new AttribPool()).fromJsonable(apoolJsonObj);\n      atext.attribs = Changeset.moveOpsToNewPool(atext.attribs, wireApool, rep.apool);\n    }\n    inCallStackIfNecessary(\"importText\" + (undoable ? \"Undoable\" : \"\"), function()\n    {\n      setDocAText(atext);\n    });\n  }\n\n  function setDocAText(atext)\n  {\n    fastIncorp(8);\n\n    var oldLen = rep.lines.totalWidth();\n    var numLines = rep.lines.length();\n    var upToLastLine = rep.lines.offsetOfIndex(numLines - 1);\n    var lastLineLength = rep.lines.atIndex(numLines - 1).text.length;\n    var assem = Changeset.smartOpAssembler();\n    var o = Changeset.newOp('-');\n    o.chars = upToLastLine;\n    o.lines = numLines - 1;\n    assem.append(o);\n    o.chars = lastLineLength;\n    o.lines = 0;\n    assem.append(o);\n    Changeset.appendATextToAssembler(atext, assem);\n    var newLen = oldLen + assem.getLengthChange();\n    var changeset = Changeset.checkRep(\n    Changeset.pack(oldLen, newLen, assem.toString(), atext.text.slice(0, -1)));\n    performDocumentApplyChangeset(changeset);\n\n    performSelectionChange([0, rep.lines.atIndex(0).lineMarker], [0, rep.lines.atIndex(0).lineMarker]);\n\n    idleWorkTimer.atMost(100);\n\n    if (rep.alltext != atext.text)\n    {\n      dmesg(htmlPrettyEscape(rep.alltext));\n      dmesg(htmlPrettyEscape(atext.text));\n      throw new Error(\"mismatch error setting raw text in setDocAText\");\n    }\n  }\n\n  function setDocText(text)\n  {\n    setDocAText(Changeset.makeAText(text));\n  }\n\n  function getDocText()\n  {\n    var alltext = rep.alltext;\n    var len = alltext.length;\n    if (len > 0) len--; // final extra newline\n    return alltext.substring(0, len);\n  }\n\n  function exportText()\n  {\n    if (currentCallStack && !currentCallStack.domClean)\n    {\n      inCallStackIfNecessary(\"exportText\", function()\n      {\n        fastIncorp(2);\n      });\n    }\n    return getDocText();\n  }\n\n  function editorChangedSize()\n  {\n    fixView();\n  }\n\n  function setOnKeyPress(handler)\n  {\n    outsideKeyPress = handler;\n  }\n\n  function setOnKeyDown(handler)\n  {\n    outsideKeyDown = handler;\n  }\n\n  function setNotifyDirty(handler)\n  {\n    outsideNotifyDirty = handler;\n  }\n\n  function getFormattedCode()\n  {\n    if (currentCallStack && !currentCallStack.domClean)\n    {\n      inCallStackIfNecessary(\"getFormattedCode\", incorporateUserChanges);\n    }\n    var buf = [];\n    if (rep.lines.length() > 0)\n    {\n      // should be the case, even for empty file\n      var entry = rep.lines.atIndex(0);\n      while (entry)\n      {\n        var domInfo = entry.domInfo;\n        buf.push((domInfo && domInfo.getInnerHTML()) || domline.processSpaces(domline.escapeHTML(entry.text), doesWrap) || '&nbsp;' /*empty line*/ );\n        entry = rep.lines.next(entry);\n      }\n    }\n    return '<div class=\"syntax\"><div>' + buf.join('</div>\\n<div>') + '</div></div>';\n  }\n\n  var CMDS = {\n    clearauthorship: function(prompt)\n    {\n      if ((!(rep.selStart && rep.selEnd)) || isCaret())\n      {\n        if (prompt)\n        {\n          prompt();\n        }\n        else\n        {\n          performDocumentApplyAttributesToCharRange(0, rep.alltext.length, [\n            ['author', '']\n          ]);\n        }\n      }\n      else\n      {\n        setAttributeOnSelection('author', '');\n      }\n    }\n  };\n\n  function execCommand(cmd)\n  {\n    cmd = cmd.toLowerCase();\n    var cmdArgs = Array.prototype.slice.call(arguments, 1);\n    if (CMDS[cmd])\n    {\n      inCallStackIfNecessary(cmd, function()\n      {\n        fastIncorp(9);\n        CMDS[cmd].apply(CMDS, cmdArgs);\n      });\n    }\n  }\n\n  function replaceRange(start, end, text)\n  {\n    inCallStackIfNecessary('replaceRange', function()\n    {\n      fastIncorp(9);\n      performDocumentReplaceRange(start, end, text);\n    });\n  }\n\n  editorInfo.ace_focus = focus;\n  editorInfo.ace_importText = importText;\n  editorInfo.ace_importAText = importAText;\n  editorInfo.ace_exportText = exportText;\n  editorInfo.ace_editorChangedSize = editorChangedSize;\n  editorInfo.ace_setOnKeyPress = setOnKeyPress;\n  editorInfo.ace_setOnKeyDown = setOnKeyDown;\n  editorInfo.ace_setNotifyDirty = setNotifyDirty;\n  editorInfo.ace_dispose = dispose;\n  editorInfo.ace_getFormattedCode = getFormattedCode;\n  editorInfo.ace_setEditable = setEditable;\n  editorInfo.ace_execCommand = execCommand;\n  editorInfo.ace_replaceRange = replaceRange;\n  editorInfo.ace_getAuthorInfos= getAuthorInfos;\n  editorInfo.ace_performDocumentReplaceRange = performDocumentReplaceRange;\n  editorInfo.ace_performDocumentReplaceCharRange = performDocumentReplaceCharRange;\n  editorInfo.ace_renumberList = renumberList;\n  editorInfo.ace_doReturnKey = doReturnKey;\n  editorInfo.ace_isBlockElement = isBlockElement;\n  editorInfo.ace_getLineListType = getLineListType;\n\n  editorInfo.ace_callWithAce = function(fn, callStack, normalize)\n  {\n    var wrapper = function()\n    {\n      return fn(editorInfo);\n    };\n\n    if (normalize !== undefined)\n    {\n      var wrapper1 = wrapper;\n      wrapper = function()\n      {\n        editorInfo.ace_fastIncorp(9);\n        wrapper1();\n      };\n    }\n\n    if (callStack !== undefined)\n    {\n      return editorInfo.ace_inCallStack(callStack, wrapper);\n    }\n    else\n    {\n      return wrapper();\n    }\n  };\n\n  // This methed exposes a setter for some ace properties\n  // @param key the name of the parameter\n  // @param value the value to set to\n  editorInfo.ace_setProperty = function(key, value)\n  {\n\n    // Convinience function returning a setter for a class on an element\n    var setClassPresenceNamed = function(element, cls){\n      return function(value){\n         setClassPresence(element, cls, !! value)\n      }\n    };\n\n    // These properties are exposed\n    var setters = {\n      wraps: setWraps,\n      showsauthorcolors: setClassPresenceNamed(root, \"authorColors\"),\n      showsuserselections: setClassPresenceNamed(root, \"userSelections\"),\n      showslinenumbers : function(value){\n        hasLineNumbers = !! value;\n        // disable line numbers on mobile devices\n        if (browser.mobile) hasLineNumbers = false;\n        setClassPresence(sideDiv, \"sidedivhidden\", !hasLineNumbers);\n        fixView();\n      },\n      grayedout: setClassPresenceNamed(outerWin.document.body, \"grayedout\"),\n      dmesg: function(){ dmesg = window.dmesg = value; },\n      userauthor: function(value){\n        thisAuthor = String(value);\n        documentAttributeManager.author = thisAuthor;\n      },\n      styled: setStyled,\n      textface: setTextFace,\n      textsize: setTextSize,\n      rtlistrue: function(value) {\n        setClassPresence(root, \"rtl\", value)\n        setClassPresence(root, \"ltr\", !value)\n        document.documentElement.dir = value? 'rtl' : 'ltr'\n      }\n    };\n\n    var setter = setters[key.toLowerCase()];\n\n    // check if setter is present\n    if(setter !== undefined){\n      setter(value)\n    }\n  };\n\n  editorInfo.ace_setBaseText = function(txt)\n  {\n    changesetTracker.setBaseText(txt);\n  };\n  editorInfo.ace_setBaseAttributedText = function(atxt, apoolJsonObj)\n  {\n    setUpTrackingCSS();\n    changesetTracker.setBaseAttributedText(atxt, apoolJsonObj);\n  };\n  editorInfo.ace_applyChangesToBase = function(c, optAuthor, apoolJsonObj)\n  {\n    changesetTracker.applyChangesToBase(c, optAuthor, apoolJsonObj);\n  };\n  editorInfo.ace_prepareUserChangeset = function()\n  {\n    return changesetTracker.prepareUserChangeset();\n  };\n  editorInfo.ace_applyPreparedChangesetToBase = function()\n  {\n    changesetTracker.applyPreparedChangesetToBase();\n  };\n  editorInfo.ace_setUserChangeNotificationCallback = function(f)\n  {\n    changesetTracker.setUserChangeNotificationCallback(f);\n  };\n  editorInfo.ace_setAuthorInfo = function(author, info)\n  {\n    setAuthorInfo(author, info);\n  };\n  editorInfo.ace_setAuthorSelectionRange = function(author, start, end)\n  {\n    changesetTracker.setAuthorSelectionRange(author, start, end);\n  };\n\n  editorInfo.ace_getUnhandledErrors = function()\n  {\n    return caughtErrors.slice();\n  };\n\n  editorInfo.ace_getDocument = function()\n  {\n    return doc;\n  };\n\n  editorInfo.ace_getDebugProperty = function(prop)\n  {\n    if (prop == \"debugger\")\n    {\n      // obfuscate \"eval\" so as not to scare yuicompressor\n      window['ev' + 'al'](\"debugger\");\n    }\n    else if (prop == \"rep\")\n    {\n      return rep;\n    }\n    else if (prop == \"window\")\n    {\n      return window;\n    }\n    else if (prop == \"document\")\n    {\n      return document;\n    }\n    return undefined;\n  };\n\n  function now()\n  {\n    return (new Date()).getTime();\n  }\n\n  function newTimeLimit(ms)\n  {\n    //console.debug(\"new time limit\");\n    var startTime = now();\n    var lastElapsed = 0;\n    var exceededAlready = false;\n    var printedTrace = false;\n    var isTimeUp = function()\n      {\n        if (exceededAlready)\n        {\n          if ((!printedTrace))\n          { // && now() - startTime - ms > 300) {\n            //console.trace();\n            printedTrace = true;\n          }\n          return true;\n        }\n        var elapsed = now() - startTime;\n        if (elapsed > ms)\n        {\n          exceededAlready = true;\n          //console.debug(\"time limit hit, before was %d/%d\", lastElapsed, ms);\n          //console.trace();\n          return true;\n        }\n        else\n        {\n          lastElapsed = elapsed;\n          return false;\n        }\n      };\n\n    isTimeUp.elapsed = function()\n    {\n      return now() - startTime;\n    };\n    return isTimeUp;\n  }\n\n\n  function makeIdleAction(func)\n  {\n    var scheduledTimeout = null;\n    var scheduledTime = 0;\n\n    function unschedule()\n    {\n      if (scheduledTimeout)\n      {\n        scheduler.clearTimeout(scheduledTimeout);\n        scheduledTimeout = null;\n      }\n    }\n\n    function reschedule(time)\n    {\n      unschedule();\n      scheduledTime = time;\n      var delay = time - now();\n      if (delay < 0) delay = 0;\n      scheduledTimeout = scheduler.setTimeout(callback, delay);\n    }\n\n    function callback()\n    {\n      scheduledTimeout = null;\n      // func may reschedule the action\n      func();\n    }\n    return {\n      atMost: function(ms)\n      {\n        var latestTime = now() + ms;\n        if ((!scheduledTimeout) || scheduledTime > latestTime)\n        {\n          reschedule(latestTime);\n        }\n      },\n      // atLeast(ms) will schedule the action if not scheduled yet.\n      // In other words, \"infinity\" is replaced by ms, even though\n      // it is technically larger.\n      atLeast: function(ms)\n      {\n        var earliestTime = now() + ms;\n        if ((!scheduledTimeout) || scheduledTime < earliestTime)\n        {\n          reschedule(earliestTime);\n        }\n      },\n      never: function()\n      {\n        unschedule();\n      }\n    };\n  }\n\n  function fastIncorp(n)\n  {\n    // normalize but don't do any lexing or anything\n    incorporateUserChanges(newTimeLimit(0));\n  }\n  editorInfo.ace_fastIncorp = fastIncorp;\n\n  var idleWorkTimer = makeIdleAction(function()\n  {\n\n    //if (! top.BEFORE) top.BEFORE = [];\n    //top.BEFORE.push(magicdom.root.dom.innerHTML);\n    //if (! isEditable) return; // and don't reschedule\n    if (inInternationalComposition)\n    {\n      // don't do idle input incorporation during international input composition\n      idleWorkTimer.atLeast(500);\n      return;\n    }\n\n    inCallStackIfNecessary(\"idleWorkTimer\", function()\n    {\n\n      var isTimeUp = newTimeLimit(250);\n\n      //console.time(\"idlework\");\n      var finishedImportantWork = false;\n      var finishedWork = false;\n\n      try\n      {\n\n        // isTimeUp() is a soft constraint for incorporateUserChanges,\n        // which always renormalizes the DOM, no matter how long it takes,\n        // but doesn't necessarily lex and highlight it\n        incorporateUserChanges(isTimeUp);\n\n        if (isTimeUp()) return;\n\n        updateLineNumbers(); // update line numbers if any time left\n        if (isTimeUp()) return;\n\n        var visibleRange = getVisibleCharRange();\n        var docRange = [0, rep.lines.totalWidth()];\n        //console.log(\"%o %o\", docRange, visibleRange);\n        finishedImportantWork = true;\n        finishedWork = true;\n      }\n      finally\n      {\n        //console.timeEnd(\"idlework\");\n        if (finishedWork)\n        {\n          idleWorkTimer.atMost(1000);\n        }\n        else if (finishedImportantWork)\n        {\n          // if we've finished highlighting the view area,\n          // more highlighting could be counter-productive,\n          // e.g. if the user just opened a triple-quote and will soon close it.\n          idleWorkTimer.atMost(500);\n        }\n        else\n        {\n          var timeToWait = Math.round(isTimeUp.elapsed() / 2);\n          if (timeToWait < 100) timeToWait = 100;\n          idleWorkTimer.atMost(timeToWait);\n        }\n      }\n    });\n\n    //if (! top.AFTER) top.AFTER = [];\n    //top.AFTER.push(magicdom.root.dom.innerHTML);\n  });\n\n  var _nextId = 1;\n\n  function uniqueId(n)\n  {\n    // not actually guaranteed to be unique, e.g. if user copy-pastes\n    // nodes with ids\n    var nid = n.id;\n    if (nid) return nid;\n    return (n.id = \"magicdomid\" + (_nextId++));\n  }\n\n\n  function recolorLinesInRange(startChar, endChar, isTimeUp, optModFunc)\n  {\n    if (endChar <= startChar) return;\n    if (startChar < 0 || startChar >= rep.lines.totalWidth()) return;\n    var lineEntry = rep.lines.atOffset(startChar); // rounds down to line boundary\n    var lineStart = rep.lines.offsetOfEntry(lineEntry);\n    var lineIndex = rep.lines.indexOfEntry(lineEntry);\n    var selectionNeedsResetting = false;\n    var firstLine = null;\n    var lastLine = null;\n    isTimeUp = (isTimeUp || noop);\n\n    // tokenFunc function; accesses current value of lineEntry and curDocChar,\n    // also mutates curDocChar\n    var curDocChar;\n    var tokenFunc = function(tokenText, tokenClass)\n      {\n        lineEntry.domInfo.appendSpan(tokenText, tokenClass);\n        };\n    if (optModFunc)\n    {\n      var f = tokenFunc;\n      tokenFunc = function(tokenText, tokenClass)\n      {\n        optModFunc(tokenText, tokenClass, f, curDocChar);\n        curDocChar += tokenText.length;\n      };\n    }\n\n    while (lineEntry && lineStart < endChar && !isTimeUp())\n    {\n      //var timer = newTimeLimit(200);\n      var lineEnd = lineStart + lineEntry.width;\n\n      curDocChar = lineStart;\n      lineEntry.domInfo.clearSpans();\n      getSpansForLine(lineEntry, tokenFunc, lineStart);\n      lineEntry.domInfo.finishUpdate();\n\n      markNodeClean(lineEntry.lineNode);\n\n      if (rep.selStart && rep.selStart[0] == lineIndex || rep.selEnd && rep.selEnd[0] == lineIndex)\n      {\n        selectionNeedsResetting = true;\n      }\n\n      //if (timer()) console.dirxml(lineEntry.lineNode.dom);\n      if (firstLine === null) firstLine = lineIndex;\n      lastLine = lineIndex;\n      lineStart = lineEnd;\n      lineEntry = rep.lines.next(lineEntry);\n      lineIndex++;\n    }\n    if (selectionNeedsResetting)\n    {\n      currentCallStack.selectionAffected = true;\n    }\n    //console.debug(\"Recolored line range %d-%d\", firstLine, lastLine);\n  }\n\n  // like getSpansForRange, but for a line, and the func takes (text,class)\n  // instead of (width,class); excludes the trailing '\\n' from\n  // consideration by func\n\n\n  function getSpansForLine(lineEntry, textAndClassFunc, lineEntryOffsetHint)\n  {\n    var lineEntryOffset = lineEntryOffsetHint;\n    if ((typeof lineEntryOffset) != \"number\")\n    {\n      lineEntryOffset = rep.lines.offsetOfEntry(lineEntry);\n    }\n    var text = lineEntry.text;\n    var width = lineEntry.width; // text.length+1\n    if (text.length === 0)\n    {\n      // allow getLineStyleFilter to set line-div styles\n      var func = linestylefilter.getLineStyleFilter(\n      0, '', textAndClassFunc, rep.apool);\n      func('', '');\n    }\n    else\n    {\n      var offsetIntoLine = 0;\n      var filteredFunc = linestylefilter.getFilterStack(text, textAndClassFunc, browser);\n      var lineNum = rep.lines.indexOfEntry(lineEntry);\n      var aline = rep.alines[lineNum];\n      filteredFunc = linestylefilter.getLineStyleFilter(\n      text.length, aline, filteredFunc, rep.apool);\n      filteredFunc(text, '');\n    }\n  }\n\n  var observedChanges;\n\n  function clearObservedChanges()\n  {\n    observedChanges = {\n      cleanNodesNearChanges: {}\n    };\n  }\n  clearObservedChanges();\n\n  function getCleanNodeByKey(key)\n  {\n    var p = PROFILER(\"getCleanNodeByKey\", false);\n    p.extra = 0;\n    var n = doc.getElementById(key);\n    // copying and pasting can lead to duplicate ids\n    while (n && isNodeDirty(n))\n    {\n      p.extra++;\n      n.id = \"\";\n      n = doc.getElementById(key);\n    }\n    p.literal(p.extra, \"extra\");\n    p.end();\n    return n;\n  }\n\n  function observeChangesAroundNode(node)\n  {\n    // Around this top-level DOM node, look for changes to the document\n    // (from how it looks in our representation) and record them in a way\n    // that can be used to \"normalize\" the document (apply the changes to our\n    // representation, and put the DOM in a canonical form).\n    // top.console.log(\"observeChangesAroundNode(%o)\", node);\n    var cleanNode;\n    var hasAdjacentDirtyness;\n    if (!isNodeDirty(node))\n    {\n      cleanNode = node;\n      var prevSib = cleanNode.previousSibling;\n      var nextSib = cleanNode.nextSibling;\n      hasAdjacentDirtyness = ((prevSib && isNodeDirty(prevSib)) || (nextSib && isNodeDirty(nextSib)));\n    }\n    else\n    {\n      // node is dirty, look for clean node above\n      var upNode = node.previousSibling;\n      while (upNode && isNodeDirty(upNode))\n      {\n        upNode = upNode.previousSibling;\n      }\n      if (upNode)\n      {\n        cleanNode = upNode;\n      }\n      else\n      {\n        var downNode = node.nextSibling;\n        while (downNode && isNodeDirty(downNode))\n        {\n          downNode = downNode.nextSibling;\n        }\n        if (downNode)\n        {\n          cleanNode = downNode;\n        }\n      }\n      if (!cleanNode)\n      {\n        // Couldn't find any adjacent clean nodes!\n        // Since top and bottom of doc is dirty, the dirty area will be detected.\n        return;\n      }\n      hasAdjacentDirtyness = true;\n    }\n\n    if (hasAdjacentDirtyness)\n    {\n      // previous or next line is dirty\n      observedChanges.cleanNodesNearChanges['$' + uniqueId(cleanNode)] = true;\n    }\n    else\n    {\n      // next and prev lines are clean (if they exist)\n      var lineKey = uniqueId(cleanNode);\n      var prevSib = cleanNode.previousSibling;\n      var nextSib = cleanNode.nextSibling;\n      var actualPrevKey = ((prevSib && uniqueId(prevSib)) || null);\n      var actualNextKey = ((nextSib && uniqueId(nextSib)) || null);\n      var repPrevEntry = rep.lines.prev(rep.lines.atKey(lineKey));\n      var repNextEntry = rep.lines.next(rep.lines.atKey(lineKey));\n      var repPrevKey = ((repPrevEntry && repPrevEntry.key) || null);\n      var repNextKey = ((repNextEntry && repNextEntry.key) || null);\n      if (actualPrevKey != repPrevKey || actualNextKey != repNextKey)\n      {\n        observedChanges.cleanNodesNearChanges['$' + uniqueId(cleanNode)] = true;\n      }\n    }\n  }\n\n  function observeChangesAroundSelection()\n  {\n    if (currentCallStack.observedSelection) return;\n    currentCallStack.observedSelection = true;\n\n    var p = PROFILER(\"getSelection\", false);\n    var selection = getSelection();\n    p.end();\n\n    function topLevel(n)\n    {\n      if ((!n) || n == root) return null;\n      while (n.parentNode != root)\n      {\n        n = n.parentNode;\n      }\n      return n;\n    }\n\n    if (selection)\n    {\n      var node1 = topLevel(selection.startPoint.node);\n      var node2 = topLevel(selection.endPoint.node);\n      if (node1) observeChangesAroundNode(node1);\n      if (node2 && node1 != node2)\n      {\n        observeChangesAroundNode(node2);\n      }\n    }\n  }\n\n  function observeSuspiciousNodes()\n  {\n    // inspired by Firefox bug #473255, where pasting formatted text\n    // causes the cursor to jump away, making the new HTML never found.\n    if (root.getElementsByTagName)\n    {\n      var nds = root.getElementsByTagName(\"style\");\n      for (var i = 0; i < nds.length; i++)\n      {\n        var n = nds[i];\n        while (n.parentNode && n.parentNode != root)\n        {\n          n = n.parentNode;\n        }\n        if (n.parentNode == root)\n        {\n          observeChangesAroundNode(n);\n        }\n      }\n    }\n  }\n\n  function incorporateUserChanges(isTimeUp)\n  {\n\n    if (currentCallStack.domClean) return false;\n\n    currentCallStack.isUserChange = true;\n\n    isTimeUp = (isTimeUp ||\n    function()\n    {\n      return false;\n    });\n\n    if (DEBUG && window.DONT_INCORP || window.DEBUG_DONT_INCORP) return false;\n\n    var p = PROFILER(\"incorp\", false);\n\n    //if (doc.body.innerHTML.indexOf(\"AppJet\") >= 0)\n    //dmesg(htmlPrettyEscape(doc.body.innerHTML));\n    //if (top.RECORD) top.RECORD.push(doc.body.innerHTML);\n    // returns true if dom changes were made\n    if (!root.firstChild)\n    {\n      root.innerHTML = \"<div><!-- --></div>\";\n    }\n\n    p.mark(\"obs\");\n    observeChangesAroundSelection();\n    observeSuspiciousNodes();\n    p.mark(\"dirty\");\n    var dirtyRanges = getDirtyRanges();\n    //console.log(\"dirtyRanges: \"+toSource(dirtyRanges));\n    var dirtyRangesCheckOut = true;\n    var j = 0;\n    var a, b;\n    while (j < dirtyRanges.length)\n    {\n      a = dirtyRanges[j][0];\n      b = dirtyRanges[j][1];\n      if (!((a === 0 || getCleanNodeByKey(rep.lines.atIndex(a - 1).key)) && (b == rep.lines.length() || getCleanNodeByKey(rep.lines.atIndex(b).key))))\n      {\n        dirtyRangesCheckOut = false;\n        break;\n      }\n      j++;\n    }\n    if (!dirtyRangesCheckOut)\n    {\n      var numBodyNodes = root.childNodes.length;\n      for (var k = 0; k < numBodyNodes; k++)\n      {\n        var bodyNode = root.childNodes.item(k);\n        if ((bodyNode.tagName) && ((!bodyNode.id) || (!rep.lines.containsKey(bodyNode.id))))\n        {\n          observeChangesAroundNode(bodyNode);\n        }\n      }\n      dirtyRanges = getDirtyRanges();\n    }\n\n    clearObservedChanges();\n\n    p.mark(\"getsel\");\n    var selection = getSelection();\n\n    //console.log(magicdom.root.dom.innerHTML);\n    //console.log(\"got selection: %o\", selection);\n    var selStart, selEnd; // each one, if truthy, has [line,char] needed to set selection\n    var i = 0;\n    var splicesToDo = [];\n    var netNumLinesChangeSoFar = 0;\n    var toDeleteAtEnd = [];\n    p.mark(\"ranges\");\n    p.literal(dirtyRanges.length, \"numdirt\");\n    var domInsertsNeeded = []; // each entry is [nodeToInsertAfter, [info1, info2, ...]]\n    while (i < dirtyRanges.length)\n    {\n      var range = dirtyRanges[i];\n      a = range[0];\n      b = range[1];\n      var firstDirtyNode = (((a === 0) && root.firstChild) || getCleanNodeByKey(rep.lines.atIndex(a - 1).key).nextSibling);\n      firstDirtyNode = (firstDirtyNode && isNodeDirty(firstDirtyNode) && firstDirtyNode);\n      var lastDirtyNode = (((b == rep.lines.length()) && root.lastChild) || getCleanNodeByKey(rep.lines.atIndex(b).key).previousSibling);\n      lastDirtyNode = (lastDirtyNode && isNodeDirty(lastDirtyNode) && lastDirtyNode);\n      if (firstDirtyNode && lastDirtyNode)\n      {\n        var cc = makeContentCollector(isStyled, browser, rep.apool, null, className2Author);\n        cc.notifySelection(selection);\n        var dirtyNodes = [];\n        for (var n = firstDirtyNode; n && !(n.previousSibling && n.previousSibling == lastDirtyNode);\n        n = n.nextSibling)\n        {\n          if (browser.msie)\n          {\n            // try to undo IE's pesky and overzealous linkification\n            try\n            {\n              n.createTextRange().execCommand(\"unlink\", false, null);\n            }\n            catch (e)\n            {}\n          }\n          cc.collectContent(n);\n          dirtyNodes.push(n);\n        }\n        cc.notifyNextNode(lastDirtyNode.nextSibling);\n        var lines = cc.getLines();\n        if ((lines.length <= 1 || lines[lines.length - 1] !== \"\") && lastDirtyNode.nextSibling)\n        {\n          // dirty region doesn't currently end a line, even taking the following node\n          // (or lack of node) into account, so include the following clean node.\n          // It could be SPAN or a DIV; basically this is any case where the contentCollector\n          // decides it isn't done.\n          // Note that this clean node might need to be there for the next dirty range.\n          //console.log(\"inclusive of \"+lastDirtyNode.next().dom.tagName);\n          b++;\n          var cleanLine = lastDirtyNode.nextSibling;\n          cc.collectContent(cleanLine);\n          toDeleteAtEnd.push(cleanLine);\n          cc.notifyNextNode(cleanLine.nextSibling);\n        }\n\n        var ccData = cc.finish();\n        var ss = ccData.selStart;\n        var se = ccData.selEnd;\n        lines = ccData.lines;\n        var lineAttribs = ccData.lineAttribs;\n        var linesWrapped = ccData.linesWrapped;\n        var scrollToTheLeftNeeded = false;\n\n        if (linesWrapped > 0)\n        {\n          if(!browser.msie){\n            // chrome decides in it's infinite wisdom that its okay to put the browsers visisble window in the middle of the span\n            // an outcome of this is that the first chars of the string are no longer visible to the user..  Yay chrome..\n            // Move the browsers visible area to the left hand side of the span\n            // Firefox isn't quite so bad, but it's still pretty quirky.\n            var scrollToTheLeftNeeded = true;\n          }\n          // console.log(\"Editor warning: \" + linesWrapped + \" long line\" + (linesWrapped == 1 ? \" was\" : \"s were\") + \" hard-wrapped into \" + ccData.numLinesAfter + \" lines.\");\n        }\n\n        if (ss[0] >= 0) selStart = [ss[0] + a + netNumLinesChangeSoFar, ss[1]];\n        if (se[0] >= 0) selEnd = [se[0] + a + netNumLinesChangeSoFar, se[1]];\n\n        var entries = [];\n        var nodeToAddAfter = lastDirtyNode;\n        var lineNodeInfos = new Array(lines.length);\n        for (var k = 0; k < lines.length; k++)\n        {\n          var lineString = lines[k];\n          var newEntry = createDomLineEntry(lineString);\n          entries.push(newEntry);\n          lineNodeInfos[k] = newEntry.domInfo;\n        }\n        //var fragment = magicdom.wrapDom(document.createDocumentFragment());\n        domInsertsNeeded.push([nodeToAddAfter, lineNodeInfos]);\n        _.each(dirtyNodes,function(n){\n          toDeleteAtEnd.push(n);\n        });\n        var spliceHints = {};\n        if (selStart) spliceHints.selStart = selStart;\n        if (selEnd) spliceHints.selEnd = selEnd;\n        splicesToDo.push([a + netNumLinesChangeSoFar, b - a, entries, lineAttribs, spliceHints]);\n        netNumLinesChangeSoFar += (lines.length - (b - a));\n      }\n      else if (b > a)\n      {\n        splicesToDo.push([a + netNumLinesChangeSoFar, b - a, [],\n          []\n        ]);\n      }\n      i++;\n    }\n\n    var domChanges = (splicesToDo.length > 0);\n\n    // update the representation\n    p.mark(\"splice\");\n    _.each(splicesToDo, function(splice)\n    {\n      doIncorpLineSplice(splice[0], splice[1], splice[2], splice[3], splice[4]);\n    });\n\n    //p.mark(\"relex\");\n    //rep.lexer.lexCharRange(getVisibleCharRange(), function() { return false; });\n    //var isTimeUp = newTimeLimit(100);\n    // do DOM inserts\n    p.mark(\"insert\");\n    _.each(domInsertsNeeded,function(ins)\n    {\n      insertDomLines(ins[0], ins[1], isTimeUp);\n    });\n\n    p.mark(\"del\");\n    // delete old dom nodes\n    _.each(toDeleteAtEnd,function(n)\n    {\n      //var id = n.uniqueId();\n      // parent of n may not be \"root\" in IE due to non-tree-shaped DOM (wtf)\n      if(n.parentNode) n.parentNode.removeChild(n);\n\n      //dmesg(htmlPrettyEscape(htmlForRemovedChild(n)));\n      //console.log(\"removed: \"+id);\n    });\n\n    if(scrollToTheLeftNeeded){ // needed to stop chrome from breaking the ui when long strings without spaces are pasted\n      $(\"#innerdocbody\").scrollLeft(0);\n    }\n\n    p.mark(\"findsel\");\n    // if the nodes that define the selection weren't encountered during\n    // content collection, figure out where those nodes are now.\n    if (selection && !selStart)\n    {\n      //if (domChanges) dmesg(\"selection not collected\");\n      var selStartFromHook = hooks.callAll('aceStartLineAndCharForPoint', {\n        callstack: currentCallStack,\n        editorInfo: editorInfo,\n        rep: rep,\n        root:root,\n        point:selection.startPoint,\n        documentAttributeManager: documentAttributeManager\n      });\n      selStart = (selStartFromHook==null||selStartFromHook.length==0)?getLineAndCharForPoint(selection.startPoint):selStartFromHook;\n    }\n    if (selection && !selEnd)\n    {\n      var selEndFromHook = hooks.callAll('aceEndLineAndCharForPoint', {\n        callstack: currentCallStack,\n        editorInfo: editorInfo,\n        rep: rep,\n        root:root,\n        point:selection.endPoint,\n        documentAttributeManager: documentAttributeManager\n      });\n      selEnd = (selEndFromHook==null||selEndFromHook.length==0)?getLineAndCharForPoint(selection.endPoint):selEndFromHook;\n    }\n\n    // selection from content collection can, in various ways, extend past final\n    // BR in firefox DOM, so cap the line\n    var numLines = rep.lines.length();\n    if (selStart && selStart[0] >= numLines)\n    {\n      selStart[0] = numLines - 1;\n      selStart[1] = rep.lines.atIndex(selStart[0]).text.length;\n    }\n    if (selEnd && selEnd[0] >= numLines)\n    {\n      selEnd[0] = numLines - 1;\n      selEnd[1] = rep.lines.atIndex(selEnd[0]).text.length;\n    }\n\n    p.mark(\"repsel\");\n    // update rep if we have a new selection\n    // NOTE: IE loses the selection when you click stuff in e.g. the\n    // editbar, so removing the selection when it's lost is not a good\n    // idea.\n    if (selection) repSelectionChange(selStart, selEnd, selection && selection.focusAtStart);\n    // update browser selection\n    p.mark(\"browsel\");\n    if (selection && (domChanges || isCaret()))\n    {\n      // if no DOM changes (not this case), want to treat range selection delicately,\n      // e.g. in IE not lose which end of the selection is the focus/anchor;\n      // on the other hand, we may have just noticed a press of PageUp/PageDown\n      currentCallStack.selectionAffected = true;\n    }\n\n    currentCallStack.domClean = true;\n\n    p.mark(\"fixview\");\n\n    fixView();\n\n    p.end(\"END\");\n\n    return domChanges;\n  }\n\n  var STYLE_ATTRIBS = {\n    bold: true,\n    italic: true,\n    underline: true,\n    strikethrough: true,\n    list: true\n  };\n  var OTHER_INCORPED_ATTRIBS = {\n    insertorder: true,\n    author: true\n  };\n\n  function isStyleAttribute(aname)\n  {\n    return !!STYLE_ATTRIBS[aname];\n  }\n\n  function isIncorpedAttribute(aname)\n  {\n    return ( !! STYLE_ATTRIBS[aname]) || ( !! OTHER_INCORPED_ATTRIBS[aname]);\n  }\n\n  function insertDomLines(nodeToAddAfter, infoStructs, isTimeUp)\n  {\n    isTimeUp = (isTimeUp ||\n    function()\n    {\n      return false;\n    });\n\n    var lastEntry;\n    var lineStartOffset;\n    if (infoStructs.length < 1) return;\n    var startEntry = rep.lines.atKey(uniqueId(infoStructs[0].node));\n    var endEntry = rep.lines.atKey(uniqueId(infoStructs[infoStructs.length - 1].node));\n    var charStart = rep.lines.offsetOfEntry(startEntry);\n    var charEnd = rep.lines.offsetOfEntry(endEntry) + endEntry.width;\n\n    //rep.lexer.lexCharRange([charStart, charEnd], isTimeUp);\n    _.each(infoStructs, function(info)\n    {\n      var p2 = PROFILER(\"insertLine\", false);\n      var node = info.node;\n      var key = uniqueId(node);\n      var entry;\n      p2.mark(\"findEntry\");\n      if (lastEntry)\n      {\n        // optimization to avoid recalculation\n        var next = rep.lines.next(lastEntry);\n        if (next && next.key == key)\n        {\n          entry = next;\n          lineStartOffset += lastEntry.width;\n        }\n      }\n      if (!entry)\n      {\n        p2.literal(1, \"nonopt\");\n        entry = rep.lines.atKey(key);\n        lineStartOffset = rep.lines.offsetOfKey(key);\n      }\n      else p2.literal(0, \"nonopt\");\n      lastEntry = entry;\n      p2.mark(\"spans\");\n      getSpansForLine(entry, function(tokenText, tokenClass)\n      {\n        info.appendSpan(tokenText, tokenClass);\n      }, lineStartOffset, isTimeUp());\n      //else if (entry.text.length > 0) {\n      //info.appendSpan(entry.text, 'dirty');\n      //}\n      p2.mark(\"addLine\");\n      info.prepareForAdd();\n      entry.lineMarker = info.lineMarker;\n      if (!nodeToAddAfter)\n      {\n        root.insertBefore(node, root.firstChild);\n      }\n      else\n      {\n        root.insertBefore(node, nodeToAddAfter.nextSibling);\n      }\n      nodeToAddAfter = node;\n      info.notifyAdded();\n      p2.mark(\"markClean\");\n      markNodeClean(node);\n      p2.end();\n    });\n  }\n\n  function isCaret()\n  {\n    return (rep.selStart && rep.selEnd && rep.selStart[0] == rep.selEnd[0] && rep.selStart[1] == rep.selEnd[1]);\n  }\n  editorInfo.ace_isCaret = isCaret;\n\n  // prereq: isCaret()\n\n\n  function caretLine()\n  {\n    return rep.selStart[0];\n  }\n  editorInfo.ace_caretLine = caretLine;\n\n  function caretColumn()\n  {\n    return rep.selStart[1];\n  }\n  editorInfo.ace_caretColumn = caretColumn;\n\n  function caretDocChar()\n  {\n    return rep.lines.offsetOfIndex(caretLine()) + caretColumn();\n  }\n  editorInfo.ace_caretDocChar = caretDocChar;\n\n  function handleReturnIndentation()\n  {\n    // on return, indent to level of previous line\n    if (isCaret() && caretColumn() === 0 && caretLine() > 0)\n    {\n      var lineNum = caretLine();\n      var thisLine = rep.lines.atIndex(lineNum);\n      var prevLine = rep.lines.prev(thisLine);\n      var prevLineText = prevLine.text;\n      var theIndent = /^ *(?:)/.exec(prevLineText)[0];\n      if (/[\\[\\(\\:\\{]\\s*$/.exec(prevLineText)) theIndent += THE_TAB;\n      var cs = Changeset.builder(rep.lines.totalWidth()).keep(\n      rep.lines.offsetOfIndex(lineNum), lineNum).insert(\n      theIndent, [\n        ['author', thisAuthor]\n      ], rep.apool).toString();\n      performDocumentApplyChangeset(cs);\n      performSelectionChange([lineNum, theIndent.length], [lineNum, theIndent.length]);\n    }\n  }\n\n  function getPointForLineAndChar(lineAndChar)\n  {\n    var line = lineAndChar[0];\n    var charsLeft = lineAndChar[1];\n    //console.log(\"line: %d, key: %s, node: %o\", line, rep.lines.atIndex(line).key,\n    //getCleanNodeByKey(rep.lines.atIndex(line).key));\n    var lineEntry = rep.lines.atIndex(line);\n    charsLeft -= lineEntry.lineMarker;\n    if (charsLeft < 0)\n    {\n      charsLeft = 0;\n    }\n    var lineNode = lineEntry.lineNode;\n    var n = lineNode;\n    var after = false;\n    if (charsLeft === 0)\n    {\n      var index = 0;\n\n      if (browser.msie && parseInt(browser.version) >= 11) {\n        browser.msie = false; // Temp fix to resolve enter and backspace issues..\n        // Note that this makes MSIE behave like modern browsers..\n      }\n      if (browser.msie && line == (rep.lines.length() - 1) && lineNode.childNodes.length === 0)\n      {\n        // best to stay at end of last empty div in IE\n        index = 1;\n      }\n      return {\n        node: lineNode,\n        index: index,\n        maxIndex: 1\n      };\n    }\n    while (!(n == lineNode && after))\n    {\n      if (after)\n      {\n        if (n.nextSibling)\n        {\n          n = n.nextSibling;\n          after = false;\n        }\n        else n = n.parentNode;\n      }\n      else\n      {\n        if (isNodeText(n))\n        {\n          var len = n.nodeValue.length;\n          if (charsLeft <= len)\n          {\n            return {\n              node: n,\n              index: charsLeft,\n              maxIndex: len\n            };\n          }\n          charsLeft -= len;\n          after = true;\n        }\n        else\n        {\n          if (n.firstChild) n = n.firstChild;\n          else after = true;\n        }\n      }\n    }\n    return {\n      node: lineNode,\n      index: 1,\n      maxIndex: 1\n    };\n  }\n\n  function nodeText(n)\n  {\n      if (browser.msie) {\n\t  return n.innerText;\n      } else {\n\t  return n.textContent || n.nodeValue || '';\n      }\n  }\n\n  function getLineAndCharForPoint(point)\n  {\n    // Turn DOM node selection into [line,char] selection.\n    // This method has to work when the DOM is not pristine,\n    // assuming the point is not in a dirty node.\n    if (point.node == root)\n    {\n      if (point.index === 0)\n      {\n        return [0, 0];\n      }\n      else\n      {\n        var N = rep.lines.length();\n        var ln = rep.lines.atIndex(N - 1);\n        return [N - 1, ln.text.length];\n      }\n    }\n    else\n    {\n      var n = point.node;\n      var col = 0;\n      // if this part fails, it probably means the selection node\n      // was dirty, and we didn't see it when collecting dirty nodes.\n      if (isNodeText(n))\n      {\n        col = point.index;\n      }\n      else if (point.index > 0)\n      {\n        col = nodeText(n).length;\n      }\n      var parNode, prevSib;\n      while ((parNode = n.parentNode) != root)\n      {\n        if ((prevSib = n.previousSibling))\n        {\n          n = prevSib;\n          col += nodeText(n).length;\n        }\n        else\n        {\n          n = parNode;\n        }\n      }\n      if (n.id === \"\") console.debug(\"BAD\");\n      if (n.firstChild && isBlockElement(n.firstChild))\n      {\n        col += 1; // lineMarker\n      }\n      var lineEntry = rep.lines.atKey(n.id);\n      var lineNum = rep.lines.indexOfEntry(lineEntry);\n      return [lineNum, col];\n    }\n  }\n  editorInfo.ace_getLineAndCharForPoint = getLineAndCharForPoint;\n\n  function createDomLineEntry(lineString)\n  {\n    var info = doCreateDomLine(lineString.length > 0);\n    var newNode = info.node;\n    return {\n      key: uniqueId(newNode),\n      text: lineString,\n      lineNode: newNode,\n      domInfo: info,\n      lineMarker: 0\n    };\n  }\n\n  function canApplyChangesetToDocument(changes)\n  {\n    return Changeset.oldLen(changes) == rep.alltext.length;\n  }\n\n  function performDocumentApplyChangeset(changes, insertsAfterSelection)\n  {\n    doRepApplyChangeset(changes, insertsAfterSelection);\n\n    var requiredSelectionSetting = null;\n    if (rep.selStart && rep.selEnd)\n    {\n      var selStartChar = rep.lines.offsetOfIndex(rep.selStart[0]) + rep.selStart[1];\n      var selEndChar = rep.lines.offsetOfIndex(rep.selEnd[0]) + rep.selEnd[1];\n      var result = Changeset.characterRangeFollow(changes, selStartChar, selEndChar, insertsAfterSelection);\n      requiredSelectionSetting = [result[0], result[1], rep.selFocusAtStart];\n    }\n\n    var linesMutatee = {\n      splice: function(start, numRemoved, newLinesVA)\n      {\n        var args = Array.prototype.slice.call(arguments, 2);\n        domAndRepSplice(start, numRemoved, _.map(args, function(s){ return s.slice(0, -1); }), null);\n      },\n      get: function(i)\n      {\n        return rep.lines.atIndex(i).text + '\\n';\n      },\n      length: function()\n      {\n        return rep.lines.length();\n      },\n      slice_notused: function(start, end)\n      {\n        return _.map(rep.lines.slice(start, end), function(e)\n        {\n          return e.text + '\\n';\n        });\n      }\n    };\n\n    Changeset.mutateTextLines(changes, linesMutatee);\n\n    checkALines();\n\n    if (requiredSelectionSetting)\n    {\n      performSelectionChange(lineAndColumnFromChar(requiredSelectionSetting[0]), lineAndColumnFromChar(requiredSelectionSetting[1]), requiredSelectionSetting[2]);\n    }\n\n    function domAndRepSplice(startLine, deleteCount, newLineStrings, isTimeUp)\n    {\n      // dgreensp 3/2009: the spliced lines may be in the middle of a dirty region,\n      // so if no explicit time limit, don't spend a lot of time highlighting\n      isTimeUp = (isTimeUp || newTimeLimit(50));\n\n      var keysToDelete = [];\n      if (deleteCount > 0)\n      {\n        var entryToDelete = rep.lines.atIndex(startLine);\n        for (var i = 0; i < deleteCount; i++)\n        {\n          keysToDelete.push(entryToDelete.key);\n          entryToDelete = rep.lines.next(entryToDelete);\n        }\n      }\n\n      var lineEntries = _.map(newLineStrings, createDomLineEntry);\n\n      doRepLineSplice(startLine, deleteCount, lineEntries);\n\n      var nodeToAddAfter;\n      if (startLine > 0)\n      {\n        nodeToAddAfter = getCleanNodeByKey(rep.lines.atIndex(startLine - 1).key);\n      }\n      else nodeToAddAfter = null;\n\n      insertDomLines(nodeToAddAfter, _.map(lineEntries, function(entry)\n      {\n        return entry.domInfo;\n      }), isTimeUp);\n\n      _.each(keysToDelete, function(k)\n      {\n        var n = doc.getElementById(k);\n        n.parentNode.removeChild(n);\n      });\n\n      if ((rep.selStart && rep.selStart[0] >= startLine && rep.selStart[0] <= startLine + deleteCount) || (rep.selEnd && rep.selEnd[0] >= startLine && rep.selEnd[0] <= startLine + deleteCount))\n      {\n        currentCallStack.selectionAffected = true;\n      }\n    }\n  }\n\n  function checkChangesetLineInformationAgainstRep(changes)\n  {\n    return true; // disable for speed\n    var opIter = Changeset.opIterator(Changeset.unpack(changes).ops);\n    var curOffset = 0;\n    var curLine = 0;\n    var curCol = 0;\n    while (opIter.hasNext())\n    {\n      var o = opIter.next();\n      if (o.opcode == '-' || o.opcode == '=')\n      {\n        curOffset += o.chars;\n        if (o.lines)\n        {\n          curLine += o.lines;\n          curCol = 0;\n        }\n        else\n        {\n          curCol += o.chars;\n        }\n      }\n      var calcLine = rep.lines.indexOfOffset(curOffset);\n      var calcLineStart = rep.lines.offsetOfIndex(calcLine);\n      var calcCol = curOffset - calcLineStart;\n      if (calcCol != curCol || calcLine != curLine)\n      {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  function doRepApplyChangeset(changes, insertsAfterSelection)\n  {\n    Changeset.checkRep(changes);\n\n    if (Changeset.oldLen(changes) != rep.alltext.length) throw new Error(\"doRepApplyChangeset length mismatch: \" + Changeset.oldLen(changes) + \"/\" + rep.alltext.length);\n\n    if (!checkChangesetLineInformationAgainstRep(changes))\n    {\n      throw new Error(\"doRepApplyChangeset line break mismatch\");\n    }\n\n    (function doRecordUndoInformation(changes)\n    {\n      var editEvent = currentCallStack.editEvent;\n      if (editEvent.eventType == \"nonundoable\")\n      {\n        if (!editEvent.changeset)\n        {\n          editEvent.changeset = changes;\n        }\n        else\n        {\n          editEvent.changeset = Changeset.compose(editEvent.changeset, changes, rep.apool);\n        }\n      }\n      else\n      {\n        var inverseChangeset = Changeset.inverse(changes, {\n          get: function(i)\n          {\n            return rep.lines.atIndex(i).text + '\\n';\n          },\n          length: function()\n          {\n            return rep.lines.length();\n          }\n        }, rep.alines, rep.apool);\n\n        if (!editEvent.backset)\n        {\n          editEvent.backset = inverseChangeset;\n        }\n        else\n        {\n          editEvent.backset = Changeset.compose(inverseChangeset, editEvent.backset, rep.apool);\n        }\n      }\n    })(changes);\n\n    //rep.alltext = Changeset.applyToText(changes, rep.alltext);\n    Changeset.mutateAttributionLines(changes, rep.alines, rep.apool);\n\n    if (changesetTracker.isTracking())\n    {\n      changesetTracker.composeUserChangeset(changes);\n    }\n\n  }\n\n  /*\n    Converts the position of a char (index in String) into a [row, col] tuple\n  */\n  function lineAndColumnFromChar(x)\n  {\n    var lineEntry = rep.lines.atOffset(x);\n    var lineStart = rep.lines.offsetOfEntry(lineEntry);\n    var lineNum = rep.lines.indexOfEntry(lineEntry);\n    return [lineNum, x - lineStart];\n  }\n\n  function performDocumentReplaceCharRange(startChar, endChar, newText)\n  {\n    if (startChar == endChar && newText.length === 0)\n    {\n      return;\n    }\n    // Requires that the replacement preserve the property that the\n    // internal document text ends in a newline.  Given this, we\n    // rewrite the splice so that it doesn't touch the very last\n    // char of the document.\n    if (endChar == rep.alltext.length)\n    {\n      if (startChar == endChar)\n      {\n        // an insert at end\n        startChar--;\n        endChar--;\n        newText = '\\n' + newText.substring(0, newText.length - 1);\n      }\n      else if (newText.length === 0)\n      {\n        // a delete at end\n        startChar--;\n        endChar--;\n      }\n      else\n      {\n        // a replace at end\n        endChar--;\n        newText = newText.substring(0, newText.length - 1);\n      }\n    }\n    performDocumentReplaceRange(lineAndColumnFromChar(startChar), lineAndColumnFromChar(endChar), newText);\n  }\n\n  function performDocumentReplaceRange(start, end, newText)\n  {\n    if (start === undefined) start = rep.selStart;\n    if (end === undefined) end = rep.selEnd;\n\n    //dmesg(String([start.toSource(),end.toSource(),newText.toSource()]));\n    // start[0]: <--- start[1] --->CCCCCCCCCCC\\n\n    //           CCCCCCCCCCCCCCCCCCCC\\n\n    //           CCCC\\n\n    // end[0]:   <CCC end[1] CCC>-------\\n\n    var builder = Changeset.builder(rep.lines.totalWidth());\n    ChangesetUtils.buildKeepToStartOfRange(rep, builder, start);\n    ChangesetUtils.buildRemoveRange(rep, builder, start, end);\n    builder.insert(newText, [\n      ['author', thisAuthor]\n    ], rep.apool);\n    var cs = builder.toString();\n\n    performDocumentApplyChangeset(cs);\n  }\n\n  function performDocumentApplyAttributesToCharRange(start, end, attribs)\n  {\n    end = Math.min(end, rep.alltext.length - 1);\n    documentAttributeManager.setAttributesOnRange(lineAndColumnFromChar(start), lineAndColumnFromChar(end), attribs);\n  }\n  editorInfo.ace_performDocumentApplyAttributesToCharRange = performDocumentApplyAttributesToCharRange;\n\n\n  function setAttributeOnSelection(attributeName, attributeValue)\n  {\n    if (!(rep.selStart && rep.selEnd)) return;\n\n    documentAttributeManager.setAttributesOnRange(rep.selStart, rep.selEnd, [\n      [attributeName, attributeValue]\n    ]);\n  }\n  editorInfo.ace_setAttributeOnSelection = setAttributeOnSelection;\n\n\n  function getAttributeOnSelection(attributeName){\n    if (!(rep.selStart && rep.selEnd)) return\n    \n    var withIt = Changeset.makeAttribsString('+', [\n      [attributeName, 'true']\n    ], rep.apool);\n    var withItRegex = new RegExp(withIt.replace(/\\*/g, '\\\\*') + \"(\\\\*|$)\");\n    function hasIt(attribs)\n    {\n      return withItRegex.test(attribs);\n    }\n\n    return rangeHasAttrib(rep.selStart, rep.selEnd)\n    \n    function rangeHasAttrib(selStart, selEnd) {\n      // if range is collapsed -> no attribs in range\n      if(selStart[1] == selEnd[1] && selStart[0] == selEnd[0]) return false\n      \n      if(selStart[0] != selEnd[0]) { // -> More than one line selected\n        var hasAttrib = true\n        \n        // from selStart to the end of the first line\n        hasAttrib = hasAttrib && rangeHasAttrib(selStart, [selStart[0], rep.lines.atIndex(selStart[0]).text.length])\n\n        // for all lines in between\n        for(var n=selStart[0]+1; n < selEnd[0]; n++) {\n          hasAttrib = hasAttrib && rangeHasAttrib([n, 0], [n, rep.lines.atIndex(n).text.length])\n        }\n\n        // for the last, potentially partial, line\n        hasAttrib = hasAttrib && rangeHasAttrib([selEnd[0], 0], [selEnd[0], selEnd[1]])\n        \n        return hasAttrib\n      }\n      \n      // Logic tells us we now have a range on a single line\n      \n      var lineNum = selStart[0]\n        , start = selStart[1]\n        , end = selEnd[1]\n        , hasAttrib = true\n      \n      // Iterate over attribs on this line\n      \n      var opIter = Changeset.opIterator(rep.alines[lineNum])\n        , indexIntoLine = 0\n      \n      while (opIter.hasNext()) {\n        var op = opIter.next();\n        var opStartInLine = indexIntoLine;\n        var opEndInLine = opStartInLine + op.chars;\n        if (!hasIt(op.attribs)) {\n          // does op overlap selection?\n          if (!(opEndInLine <= start || opStartInLine >= end)) {\n            hasAttrib = false; // since it's overlapping but hasn't got the attrib -> range hasn't got it\n            break;\n          }\n        }\n        indexIntoLine = opEndInLine;\n      }\n      \n      return hasAttrib\n    }\n  }\n  \n  editorInfo.ace_getAttributeOnSelection = getAttributeOnSelection;\n\n  function toggleAttributeOnSelection(attributeName)\n  {\n    if (!(rep.selStart && rep.selEnd)) return;\n\n    var selectionAllHasIt = true;\n    var withIt = Changeset.makeAttribsString('+', [\n      [attributeName, 'true']\n    ], rep.apool);\n    var withItRegex = new RegExp(withIt.replace(/\\*/g, '\\\\*') + \"(\\\\*|$)\");\n\n    function hasIt(attribs)\n    {\n      return withItRegex.test(attribs);\n    }\n\n    var selStartLine = rep.selStart[0];\n    var selEndLine = rep.selEnd[0];\n    for (var n = selStartLine; n <= selEndLine; n++)\n    {\n      var opIter = Changeset.opIterator(rep.alines[n]);\n      var indexIntoLine = 0;\n      var selectionStartInLine = 0;\n      var selectionEndInLine = rep.lines.atIndex(n).text.length; // exclude newline\n      if (n == selStartLine)\n      {\n        selectionStartInLine = rep.selStart[1];\n      }\n      if (n == selEndLine)\n      {\n        selectionEndInLine = rep.selEnd[1];\n      }\n      while (opIter.hasNext())\n      {\n        var op = opIter.next();\n        var opStartInLine = indexIntoLine;\n        var opEndInLine = opStartInLine + op.chars;\n        if (!hasIt(op.attribs))\n        {\n          // does op overlap selection?\n          if (!(opEndInLine <= selectionStartInLine || opStartInLine >= selectionEndInLine))\n          {\n            selectionAllHasIt = false;\n            break;\n          }\n        }\n        indexIntoLine = opEndInLine;\n      }\n      if (!selectionAllHasIt)\n      {\n        break;\n      }\n    }\n\n    if (selectionAllHasIt)\n    {\n      documentAttributeManager.setAttributesOnRange(rep.selStart, rep.selEnd, [\n        [attributeName, '']\n      ]);\n    }\n    else\n    {\n      documentAttributeManager.setAttributesOnRange(rep.selStart, rep.selEnd, [\n        [attributeName, 'true']\n      ]);\n    }\n  }\n  editorInfo.ace_toggleAttributeOnSelection = toggleAttributeOnSelection;\n\n  function performDocumentReplaceSelection(newText)\n  {\n    if (!(rep.selStart && rep.selEnd)) return;\n    performDocumentReplaceRange(rep.selStart, rep.selEnd, newText);\n  }\n\n  // Change the abstract representation of the document to have a different set of lines.\n  // Must be called after rep.alltext is set.\n\n\n  function doRepLineSplice(startLine, deleteCount, newLineEntries)\n  {\n\n    _.each(newLineEntries, function(entry)\n    {\n      entry.width = entry.text.length + 1;\n    });\n\n    var startOldChar = rep.lines.offsetOfIndex(startLine);\n    var endOldChar = rep.lines.offsetOfIndex(startLine + deleteCount);\n\n    var oldRegionStart = rep.lines.offsetOfIndex(startLine);\n    var oldRegionEnd = rep.lines.offsetOfIndex(startLine + deleteCount);\n    rep.lines.splice(startLine, deleteCount, newLineEntries);\n    currentCallStack.docTextChanged = true;\n    currentCallStack.repChanged = true;\n    var newRegionEnd = rep.lines.offsetOfIndex(startLine + newLineEntries.length);\n\n    var newText = _.map(newLineEntries, function(e)\n    {\n      return e.text + '\\n';\n    }).join('');\n\n    rep.alltext = rep.alltext.substring(0, startOldChar) + newText + rep.alltext.substring(endOldChar, rep.alltext.length);\n\n    //var newTotalLength = rep.alltext.length;\n    //rep.lexer.updateBuffer(rep.alltext, oldRegionStart, oldRegionEnd - oldRegionStart,\n    //newRegionEnd - oldRegionStart);\n  }\n\n  function doIncorpLineSplice(startLine, deleteCount, newLineEntries, lineAttribs, hints)\n  {\n\n    var startOldChar = rep.lines.offsetOfIndex(startLine);\n    var endOldChar = rep.lines.offsetOfIndex(startLine + deleteCount);\n\n    var oldRegionStart = rep.lines.offsetOfIndex(startLine);\n\n    var selStartHintChar, selEndHintChar;\n    if (hints && hints.selStart)\n    {\n      selStartHintChar = rep.lines.offsetOfIndex(hints.selStart[0]) + hints.selStart[1] - oldRegionStart;\n    }\n    if (hints && hints.selEnd)\n    {\n      selEndHintChar = rep.lines.offsetOfIndex(hints.selEnd[0]) + hints.selEnd[1] - oldRegionStart;\n    }\n\n    var newText = _.map(newLineEntries, function(e)\n    {\n      return e.text + '\\n';\n    }).join('');\n    var oldText = rep.alltext.substring(startOldChar, endOldChar);\n    var oldAttribs = rep.alines.slice(startLine, startLine + deleteCount).join('');\n    var newAttribs = lineAttribs.join('|1+1') + '|1+1'; // not valid in a changeset\n    var analysis = analyzeChange(oldText, newText, oldAttribs, newAttribs, selStartHintChar, selEndHintChar);\n    var commonStart = analysis[0];\n    var commonEnd = analysis[1];\n    var shortOldText = oldText.substring(commonStart, oldText.length - commonEnd);\n    var shortNewText = newText.substring(commonStart, newText.length - commonEnd);\n    var spliceStart = startOldChar + commonStart;\n    var spliceEnd = endOldChar - commonEnd;\n    var shiftFinalNewlineToBeforeNewText = false;\n\n    // adjust the splice to not involve the final newline of the document;\n    // be very defensive\n    if (shortOldText.charAt(shortOldText.length - 1) == '\\n' && shortNewText.charAt(shortNewText.length - 1) == '\\n')\n    {\n      // replacing text that ends in newline with text that also ends in newline\n      // (still, after analysis, somehow)\n      shortOldText = shortOldText.slice(0, -1);\n      shortNewText = shortNewText.slice(0, -1);\n      spliceEnd--;\n      commonEnd++;\n    }\n    if (shortOldText.length === 0 && spliceStart == rep.alltext.length && shortNewText.length > 0)\n    {\n      // inserting after final newline, bad\n      spliceStart--;\n      spliceEnd--;\n      shortNewText = '\\n' + shortNewText.slice(0, -1);\n      shiftFinalNewlineToBeforeNewText = true;\n    }\n    if (spliceEnd == rep.alltext.length && shortOldText.length > 0 && shortNewText.length === 0)\n    {\n      // deletion at end of rep.alltext\n      if (rep.alltext.charAt(spliceStart - 1) == '\\n')\n      {\n        // (if not then what the heck?  it will definitely lead\n        // to a rep.alltext without a final newline)\n        spliceStart--;\n        spliceEnd--;\n      }\n    }\n\n    if (!(shortOldText.length === 0 && shortNewText.length === 0))\n    {\n      var oldDocText = rep.alltext;\n      var oldLen = oldDocText.length;\n\n      var spliceStartLine = rep.lines.indexOfOffset(spliceStart);\n      var spliceStartLineStart = rep.lines.offsetOfIndex(spliceStartLine);\n\n      var startBuilder = function()\n      {\n        var builder = Changeset.builder(oldLen);\n        builder.keep(spliceStartLineStart, spliceStartLine);\n        builder.keep(spliceStart - spliceStartLineStart);\n        return builder;\n      };\n\n      var eachAttribRun = function(attribs, func /*(startInNewText, endInNewText, attribs)*/ )\n      {\n        var attribsIter = Changeset.opIterator(attribs);\n        var textIndex = 0;\n        var newTextStart = commonStart;\n        var newTextEnd = newText.length - commonEnd - (shiftFinalNewlineToBeforeNewText ? 1 : 0);\n        while (attribsIter.hasNext())\n        {\n          var op = attribsIter.next();\n          var nextIndex = textIndex + op.chars;\n          if (!(nextIndex <= newTextStart || textIndex >= newTextEnd))\n          {\n            func(Math.max(newTextStart, textIndex), Math.min(newTextEnd, nextIndex), op.attribs);\n          }\n          textIndex = nextIndex;\n        }\n      };\n\n      var justApplyStyles = (shortNewText == shortOldText);\n      var theChangeset;\n\n      if (justApplyStyles)\n      {\n        // create changeset that clears the incorporated styles on\n        // the existing text.  we compose this with the\n        // changeset the applies the styles found in the DOM.\n        // This allows us to incorporate, e.g., Safari's native \"unbold\".\n        var incorpedAttribClearer = cachedStrFunc(function(oldAtts)\n        {\n          return Changeset.mapAttribNumbers(oldAtts, function(n)\n          {\n            var k = rep.apool.getAttribKey(n);\n            if (isStyleAttribute(k))\n            {\n              return rep.apool.putAttrib([k, '']);\n            }\n            return false;\n          });\n        });\n\n        var builder1 = startBuilder();\n        if (shiftFinalNewlineToBeforeNewText)\n        {\n          builder1.keep(1, 1);\n        }\n        eachAttribRun(oldAttribs, function(start, end, attribs)\n        {\n          builder1.keepText(newText.substring(start, end), incorpedAttribClearer(attribs));\n        });\n        var clearer = builder1.toString();\n\n        var builder2 = startBuilder();\n        if (shiftFinalNewlineToBeforeNewText)\n        {\n          builder2.keep(1, 1);\n        }\n        eachAttribRun(newAttribs, function(start, end, attribs)\n        {\n          builder2.keepText(newText.substring(start, end), attribs);\n        });\n        var styler = builder2.toString();\n\n        theChangeset = Changeset.compose(clearer, styler, rep.apool);\n      }\n      else\n      {\n        var builder = startBuilder();\n\n        var spliceEndLine = rep.lines.indexOfOffset(spliceEnd);\n        var spliceEndLineStart = rep.lines.offsetOfIndex(spliceEndLine);\n        if (spliceEndLineStart > spliceStart)\n        {\n          builder.remove(spliceEndLineStart - spliceStart, spliceEndLine - spliceStartLine);\n          builder.remove(spliceEnd - spliceEndLineStart);\n        }\n        else\n        {\n          builder.remove(spliceEnd - spliceStart);\n        }\n\n        var isNewTextMultiauthor = false;\n        var authorAtt = Changeset.makeAttribsString('+', (thisAuthor ? [\n          ['author', thisAuthor]\n        ] : []), rep.apool);\n        var authorizer = cachedStrFunc(function(oldAtts)\n        {\n          if (isNewTextMultiauthor)\n          {\n            // prefer colors from DOM\n            return Changeset.composeAttributes(authorAtt, oldAtts, true, rep.apool);\n          }\n          else\n          {\n            // use this author's color\n            return Changeset.composeAttributes(oldAtts, authorAtt, true, rep.apool);\n          }\n        });\n\n        var foundDomAuthor = '';\n        eachAttribRun(newAttribs, function(start, end, attribs)\n        {\n          var a = Changeset.attribsAttributeValue(attribs, 'author', rep.apool);\n          if (a && a != foundDomAuthor)\n          {\n            if (!foundDomAuthor)\n            {\n              foundDomAuthor = a;\n            }\n            else\n            {\n              isNewTextMultiauthor = true; // multiple authors in DOM!\n            }\n          }\n        });\n\n        if (shiftFinalNewlineToBeforeNewText)\n        {\n          builder.insert('\\n', authorizer(''));\n        }\n\n        eachAttribRun(newAttribs, function(start, end, attribs)\n        {\n          builder.insert(newText.substring(start, end), authorizer(attribs));\n        });\n        theChangeset = builder.toString();\n      }\n\n      //dmesg(htmlPrettyEscape(theChangeset));\n      doRepApplyChangeset(theChangeset);\n    }\n\n    // do this no matter what, because we need to get the right\n    // line keys into the rep.\n    doRepLineSplice(startLine, deleteCount, newLineEntries);\n\n    checkALines();\n  }\n\n  function cachedStrFunc(func)\n  {\n    var cache = {};\n    return function(s)\n    {\n      if (!cache[s])\n      {\n        cache[s] = func(s);\n      }\n      return cache[s];\n    };\n  }\n\n  function analyzeChange(oldText, newText, oldAttribs, newAttribs, optSelStartHint, optSelEndHint)\n  {\n    function incorpedAttribFilter(anum)\n    {\n      return isStyleAttribute(rep.apool.getAttribKey(anum));\n    }\n\n    function attribRuns(attribs)\n    {\n      var lengs = [];\n      var atts = [];\n      var iter = Changeset.opIterator(attribs);\n      while (iter.hasNext())\n      {\n        var op = iter.next();\n        lengs.push(op.chars);\n        atts.push(op.attribs);\n      }\n      return [lengs, atts];\n    }\n\n    function attribIterator(runs, backward)\n    {\n      var lengs = runs[0];\n      var atts = runs[1];\n      var i = (backward ? lengs.length - 1 : 0);\n      var j = 0;\n      return function next()\n      {\n        while (j >= lengs[i])\n        {\n          if (backward) i--;\n          else i++;\n          j = 0;\n        }\n        var a = atts[i];\n        j++;\n        return a;\n      };\n    }\n\n    var oldLen = oldText.length;\n    var newLen = newText.length;\n    var minLen = Math.min(oldLen, newLen);\n\n    var oldARuns = attribRuns(Changeset.filterAttribNumbers(oldAttribs, incorpedAttribFilter));\n    var newARuns = attribRuns(Changeset.filterAttribNumbers(newAttribs, incorpedAttribFilter));\n\n    var commonStart = 0;\n    var oldStartIter = attribIterator(oldARuns, false);\n    var newStartIter = attribIterator(newARuns, false);\n    while (commonStart < minLen)\n    {\n      if (oldText.charAt(commonStart) == newText.charAt(commonStart) && oldStartIter() == newStartIter())\n      {\n        commonStart++;\n      }\n      else break;\n    }\n\n    var commonEnd = 0;\n    var oldEndIter = attribIterator(oldARuns, true);\n    var newEndIter = attribIterator(newARuns, true);\n    while (commonEnd < minLen)\n    {\n      if (commonEnd === 0)\n      {\n        // assume newline in common\n        oldEndIter();\n        newEndIter();\n        commonEnd++;\n      }\n      else if (oldText.charAt(oldLen - 1 - commonEnd) == newText.charAt(newLen - 1 - commonEnd) && oldEndIter() == newEndIter())\n      {\n        commonEnd++;\n      }\n      else break;\n    }\n\n    var hintedCommonEnd = -1;\n    if ((typeof optSelEndHint) == \"number\")\n    {\n      hintedCommonEnd = newLen - optSelEndHint;\n    }\n\n\n    if (commonStart + commonEnd > oldLen)\n    {\n      // ambiguous insertion\n      var minCommonEnd = oldLen - commonStart;\n      var maxCommonEnd = commonEnd;\n      if (hintedCommonEnd >= minCommonEnd && hintedCommonEnd <= maxCommonEnd)\n      {\n        commonEnd = hintedCommonEnd;\n      }\n      else\n      {\n        commonEnd = minCommonEnd;\n      }\n      commonStart = oldLen - commonEnd;\n    }\n    if (commonStart + commonEnd > newLen)\n    {\n      // ambiguous deletion\n      var minCommonEnd = newLen - commonStart;\n      var maxCommonEnd = commonEnd;\n      if (hintedCommonEnd >= minCommonEnd && hintedCommonEnd <= maxCommonEnd)\n      {\n        commonEnd = hintedCommonEnd;\n      }\n      else\n      {\n        commonEnd = minCommonEnd;\n      }\n      commonStart = newLen - commonEnd;\n    }\n\n    return [commonStart, commonEnd];\n  }\n\n  function equalLineAndChars(a, b)\n  {\n    if (!a) return !b;\n    if (!b) return !a;\n    return (a[0] == b[0] && a[1] == b[1]);\n  }\n\n  function performSelectionChange(selectStart, selectEnd, focusAtStart)\n  {\n    if (repSelectionChange(selectStart, selectEnd, focusAtStart))\n    {\n      currentCallStack.selectionAffected = true;\n    }\n  }\n  editorInfo.ace_performSelectionChange = performSelectionChange;\n\n  // Change the abstract representation of the document to have a different selection.\n  // Should not rely on the line representation.  Should not affect the DOM.\n\n\n  function repSelectionChange(selectStart, selectEnd, focusAtStart)\n  {\n    focusAtStart = !! focusAtStart;\n\n    var newSelFocusAtStart = (focusAtStart && ((!selectStart) || (!selectEnd) || (selectStart[0] != selectEnd[0]) || (selectStart[1] != selectEnd[1])));\n\n    if ((!equalLineAndChars(rep.selStart, selectStart)) || (!equalLineAndChars(rep.selEnd, selectEnd)) || (rep.selFocusAtStart != newSelFocusAtStart))\n    {\n      rep.selStart = selectStart;\n      rep.selEnd = selectEnd;\n      rep.selFocusAtStart = newSelFocusAtStart;\n      currentCallStack.repChanged = true;\n\n      return true;\n      //console.log(\"selStart: %o, selEnd: %o, focusAtStart: %s\", rep.selStart, rep.selEnd,\n      //String(!!rep.selFocusAtStart));\n    }\n    return false;\n    //console.log(\"%o %o %s\", rep.selStart, rep.selEnd, rep.selFocusAtStart);\n  }\n\n  function doCreateDomLine(nonEmpty)\n  {\n    if (browser.msie && (!nonEmpty))\n    {\n      var result = {\n        node: null,\n        appendSpan: noop,\n        prepareForAdd: noop,\n        notifyAdded: noop,\n        clearSpans: noop,\n        finishUpdate: noop,\n        lineMarker: 0\n      };\n\n      var lineElem = doc.createElement(\"div\");\n      result.node = lineElem;\n\n      result.notifyAdded = function()\n      {\n        // magic -- settng an empty div's innerHTML to the empty string\n        // keeps it from collapsing.  Apparently innerHTML must be set *after*\n        // adding the node to the DOM.\n        // Such a div is what IE 6 creates naturally when you make a blank line\n        // in a document of divs.  However, when copy-and-pasted the div will\n        // contain a space, so we note its emptiness with a property.\n        lineElem.innerHTML = \" \"; // Frist we set a value that isnt blank\n        // a primitive-valued property survives copy-and-paste\n        setAssoc(lineElem, \"shouldBeEmpty\", true);\n        // an object property doesn't\n        setAssoc(lineElem, \"unpasted\", {});\n        lineElem.innerHTML = \"\"; // Then we make it blank..  New line and no space = Awesome :)\n      };\n      var lineClass = 'ace-line';\n      result.appendSpan = function(txt, cls)\n      {\n        if ((!txt) && cls)\n        {\n          // gain a whole-line style (currently to show insertion point in CSS)\n          lineClass = domline.addToLineClass(lineClass, cls);\n        }\n        // otherwise, ignore appendSpan, this is an empty line\n      };\n      result.clearSpans = function()\n      {\n        lineClass = ''; // non-null to cause update\n      };\n\n      var writeClass = function()\n      {\n        if (lineClass !== null) lineElem.className = lineClass;\n      };\n\n      result.prepareForAdd = writeClass;\n      result.finishUpdate = writeClass;\n      result.getInnerHTML = function()\n      {\n        return \"\";\n      };\n      return result;\n    }\n    else\n    {\n      return domline.createDomLine(nonEmpty, doesWrap, browser, doc);\n    }\n  }\n\n  function textify(str)\n  {\n    return str.replace(/[\\n\\r ]/g, ' ').replace(/\\xa0/g, ' ').replace(/\\t/g, '        ');\n  }\n\n  var _blockElems = {\n    \"div\": 1,\n    \"p\": 1,\n    \"pre\": 1,\n    \"li\": 1,\n    \"ol\": 1,\n    \"ul\": 1\n  };\n\n  _.each(hooks.callAll('aceRegisterBlockElements'), function(element){\n      _blockElems[element] = 1;\n  });\n\n  function isBlockElement(n)\n  {\n    return !!_blockElems[(n.tagName || \"\").toLowerCase()];\n  }\n\n  function getDirtyRanges()\n  {\n    // based on observedChanges, return a list of ranges of original lines\n    // that need to be removed or replaced with new user content to incorporate\n    // the user's changes into the line representation.  ranges may be zero-length,\n    // indicating inserted content.  for example, [0,0] means content was inserted\n    // at the top of the document, while [3,4] means line 3 was deleted, modified,\n    // or replaced with one or more new lines of content. ranges do not touch.\n    var p = PROFILER(\"getDirtyRanges\", false);\n    p.forIndices = 0;\n    p.consecutives = 0;\n    p.corrections = 0;\n\n    var cleanNodeForIndexCache = {};\n    var N = rep.lines.length(); // old number of lines\n\n\n    function cleanNodeForIndex(i)\n    {\n      // if line (i) in the un-updated line representation maps to a clean node\n      // in the document, return that node.\n      // if (i) is out of bounds, return true. else return false.\n      if (cleanNodeForIndexCache[i] === undefined)\n      {\n        p.forIndices++;\n        var result;\n        if (i < 0 || i >= N)\n        {\n          result = true; // truthy, but no actual node\n        }\n        else\n        {\n          var key = rep.lines.atIndex(i).key;\n          result = (getCleanNodeByKey(key) || false);\n        }\n        cleanNodeForIndexCache[i] = result;\n      }\n      return cleanNodeForIndexCache[i];\n    }\n    var isConsecutiveCache = {};\n\n    function isConsecutive(i)\n    {\n      if (isConsecutiveCache[i] === undefined)\n      {\n        p.consecutives++;\n        isConsecutiveCache[i] = (function()\n        {\n          // returns whether line (i) and line (i-1), assumed to be map to clean DOM nodes,\n          // or document boundaries, are consecutive in the changed DOM\n          var a = cleanNodeForIndex(i - 1);\n          var b = cleanNodeForIndex(i);\n          if ((!a) || (!b)) return false; // violates precondition\n          if ((a === true) && (b === true)) return !root.firstChild;\n          if ((a === true) && b.previousSibling) return false;\n          if ((b === true) && a.nextSibling) return false;\n          if ((a === true) || (b === true)) return true;\n          return a.nextSibling == b;\n        })();\n      }\n      return isConsecutiveCache[i];\n    }\n\n    function isClean(i)\n    {\n      // returns whether line (i) in the un-updated representation maps to a clean node,\n      // or is outside the bounds of the document\n      return !!cleanNodeForIndex(i);\n    }\n    // list of pairs, each representing a range of lines that is clean and consecutive\n    // in the changed DOM.  lines (-1) and (N) are always clean, but may or may not\n    // be consecutive with lines in the document.  pairs are in sorted order.\n    var cleanRanges = [\n      [-1, N + 1]\n    ];\n\n    function rangeForLine(i)\n    {\n      // returns index of cleanRange containing i, or -1 if none\n      var answer = -1;\n      _.each(cleanRanges ,function(r, idx)\n      {\n        if (i >= r[1]) return false; // keep looking\n        if (i < r[0]) return true; // not found, stop looking\n        answer = idx;\n        return true; // found, stop looking\n      });\n      return answer;\n    }\n\n    function removeLineFromRange(rng, line)\n    {\n      // rng is index into cleanRanges, line is line number\n      // precond: line is in rng\n      var a = cleanRanges[rng][0];\n      var b = cleanRanges[rng][1];\n      if ((a + 1) == b) cleanRanges.splice(rng, 1);\n      else if (line == a) cleanRanges[rng][0]++;\n      else if (line == (b - 1)) cleanRanges[rng][1]--;\n      else cleanRanges.splice(rng, 1, [a, line], [line + 1, b]);\n    }\n\n    function splitRange(rng, pt)\n    {\n      // precond: pt splits cleanRanges[rng] into two non-empty ranges\n      var a = cleanRanges[rng][0];\n      var b = cleanRanges[rng][1];\n      cleanRanges.splice(rng, 1, [a, pt], [pt, b]);\n    }\n    var correctedLines = {};\n\n    function correctlyAssignLine(line)\n    {\n      if (correctedLines[line]) return true;\n      p.corrections++;\n      correctedLines[line] = true;\n      // \"line\" is an index of a line in the un-updated rep.\n      // returns whether line was already correctly assigned (i.e. correctly\n      // clean or dirty, according to cleanRanges, and if clean, correctly\n      // attached or not attached (i.e. in the same range as) the prev and next lines).\n      //console.log(\"correctly assigning: %d\", line);\n      var rng = rangeForLine(line);\n      var lineClean = isClean(line);\n      if (rng < 0)\n      {\n        if (lineClean)\n        {\n          console.debug(\"somehow lost clean line\");\n        }\n        return true;\n      }\n      if (!lineClean)\n      {\n        // a clean-range includes this dirty line, fix it\n        removeLineFromRange(rng, line);\n        return false;\n      }\n      else\n      {\n        // line is clean, but could be wrongly connected to a clean line\n        // above or below\n        var a = cleanRanges[rng][0];\n        var b = cleanRanges[rng][1];\n        var didSomething = false;\n        // we'll leave non-clean adjacent nodes in the clean range for the caller to\n        // detect and deal with.  we deal with whether the range should be split\n        // just above or just below this line.\n        if (a < line && isClean(line - 1) && !isConsecutive(line))\n        {\n          splitRange(rng, line);\n          didSomething = true;\n        }\n        if (b > (line + 1) && isClean(line + 1) && !isConsecutive(line + 1))\n        {\n          splitRange(rng, line + 1);\n          didSomething = true;\n        }\n        return !didSomething;\n      }\n    }\n\n    function detectChangesAroundLine(line, reqInARow)\n    {\n      // make sure cleanRanges is correct about line number \"line\" and the surrounding\n      // lines; only stops checking at end of document or after no changes need\n      // making for several consecutive lines. note that iteration is over old lines,\n      // so this operation takes time proportional to the number of old lines\n      // that are changed or missing, not the number of new lines inserted.\n      var correctInARow = 0;\n      var currentIndex = line;\n      while (correctInARow < reqInARow && currentIndex >= 0)\n      {\n        if (correctlyAssignLine(currentIndex))\n        {\n          correctInARow++;\n        }\n        else correctInARow = 0;\n        currentIndex--;\n      }\n      correctInARow = 0;\n      currentIndex = line;\n      while (correctInARow < reqInARow && currentIndex < N)\n      {\n        if (correctlyAssignLine(currentIndex))\n        {\n          correctInARow++;\n        }\n        else correctInARow = 0;\n        currentIndex++;\n      }\n    }\n\n    if (N === 0)\n    {\n      p.cancel();\n      if (!isConsecutive(0))\n      {\n        splitRange(0, 0);\n      }\n    }\n    else\n    {\n      p.mark(\"topbot\");\n      detectChangesAroundLine(0, 1);\n      detectChangesAroundLine(N - 1, 1);\n\n      p.mark(\"obs\");\n      //console.log(\"observedChanges: \"+toSource(observedChanges));\n      for (var k in observedChanges.cleanNodesNearChanges)\n      {\n        var key = k.substring(1);\n        if (rep.lines.containsKey(key))\n        {\n          var line = rep.lines.indexOfKey(key);\n          detectChangesAroundLine(line, 2);\n        }\n      }\n      p.mark(\"stats&calc\");\n      p.literal(p.forIndices, \"byidx\");\n      p.literal(p.consecutives, \"cons\");\n      p.literal(p.corrections, \"corr\");\n    }\n\n    var dirtyRanges = [];\n    for (var r = 0; r < cleanRanges.length - 1; r++)\n    {\n      dirtyRanges.push([cleanRanges[r][1], cleanRanges[r + 1][0]]);\n    }\n\n    p.end();\n\n    return dirtyRanges;\n  }\n\n  function markNodeClean(n)\n  {\n    // clean nodes have knownHTML that matches their innerHTML\n    var dirtiness = {};\n    dirtiness.nodeId = uniqueId(n);\n    dirtiness.knownHTML = n.innerHTML;\n    if (browser.msie)\n    {\n      // adding a space to an \"empty\" div in IE designMode doesn't\n      // change the innerHTML of the div's parent; also, other\n      // browsers don't support innerText\n      dirtiness.knownText = n.innerText;\n    }\n    setAssoc(n, \"dirtiness\", dirtiness);\n  }\n\n  function isNodeDirty(n)\n  {\n    var p = PROFILER(\"cleanCheck\", false);\n    if (n.parentNode != root) return true;\n    var data = getAssoc(n, \"dirtiness\");\n    if (!data) return true;\n    if (n.id !== data.nodeId) return true;\n    if (browser.msie)\n    {\n      if (n.innerText !== data.knownText) return true;\n    }\n    if (n.innerHTML !== data.knownHTML) return true;\n    p.end();\n    return false;\n  }\n\n  function getLineEntryTopBottom(entry, destObj)\n  {\n    var dom = entry.lineNode;\n    var top = dom.offsetTop;\n    var height = dom.offsetHeight;\n    var obj = (destObj || {});\n    obj.top = top;\n    obj.bottom = (top + height);\n    return obj;\n  }\n\n  function getViewPortTopBottom()\n  {\n    var theTop = getScrollY();\n    var doc = outerWin.document;\n    var height = doc.documentElement.clientHeight;\n    return {\n      top: theTop,\n      bottom: (theTop + height)\n    };\n  }\n\n  function getVisibleLineRange()\n  {\n    var viewport = getViewPortTopBottom();\n    //console.log(\"viewport top/bottom: %o\", viewport);\n    var obj = {};\n    var start = rep.lines.search(function(e)\n    {\n      return getLineEntryTopBottom(e, obj).bottom > viewport.top;\n    });\n    var end = rep.lines.search(function(e)\n    {\n      return getLineEntryTopBottom(e, obj).top >= viewport.bottom;\n    });\n    if (end < start) end = start; // unlikely\n    //console.log(start+\",\"+end);\n    return [start, end];\n  }\n\n  function getVisibleCharRange()\n  {\n    var lineRange = getVisibleLineRange();\n    return [rep.lines.offsetOfIndex(lineRange[0]), rep.lines.offsetOfIndex(lineRange[1])];\n  }\n\n  function handleCut(evt)\n  {\n    inCallStackIfNecessary(\"handleCut\", function()\n    {\n      doDeleteKey(evt);\n    });\n    return true;\n  }\n\n  function handleClick(evt)\n  {\n    inCallStackIfNecessary(\"handleClick\", function()\n    {\n      idleWorkTimer.atMost(200);\n    });\n\n    function isLink(n)\n    {\n      return (n.tagName || '').toLowerCase() == \"a\" && n.href;\n    }\n\n    // only want to catch left-click\n    if ((!evt.ctrlKey) && (evt.button != 2) && (evt.button != 3))\n    {\n      // find A tag with HREF\n      var n = evt.target;\n      while (n && n.parentNode && !isLink(n))\n      {\n        n = n.parentNode;\n      }\n      if (n && isLink(n))\n      {\n        try\n        {\n          var newWindow = window.open(n.href, '_blank');\n          newWindow.focus();\n        }\n        catch (e)\n        {\n          // absorb \"user canceled\" error in IE for certain prompts\n        }\n        evt.preventDefault();\n      }\n    }\n    //hide the dropdownso\n    if(window.parent.parent.padeditbar){ // required in case its in an iframe should probably use parent..  See Issue 327 https://github.com/ether/etherpad-lite/issues/327\n      window.parent.parent.padeditbar.toggleDropDown(\"none\");\n    }\n  }\n\n  function doReturnKey()\n  {\n    if (!(rep.selStart && rep.selEnd))\n    {\n      return;\n    }\n\n    var lineNum = rep.selStart[0];\n    var listType = getLineListType(lineNum);\n\n    if (listType)\n    {\n      var text = rep.lines.atIndex(lineNum).text;\n      listType = /([a-z]+)([0-9]+)/.exec(listType);\n      var type  = listType[1];\n      var level = Number(listType[2]);\n\n      //detect empty list item; exclude indentation\n      if(text === '*' && type !== \"indent\")\n      {\n        //if not already on the highest level\n        if(level > 1)\n        {\n          setLineListType(lineNum, type+(level-1));//automatically decrease the level\n        }\n        else\n        {\n          setLineListType(lineNum, '');//remove the list\n          renumberList(lineNum + 1);//trigger renumbering of list that may be right after\n        }\n      }\n      else if (lineNum + 1 < rep.lines.length())\n      {\n        performDocumentReplaceSelection('\\n');\n        setLineListType(lineNum + 1, type+level);\n      }\n    }\n    else\n    {\n      performDocumentReplaceSelection('\\n');\n      handleReturnIndentation();\n    }\n  }\n\n  function doIndentOutdent(isOut)\n  {\n    if (!((rep.selStart && rep.selEnd) ||\n        ((rep.selStart[0] == rep.selEnd[0]) && (rep.selStart[1] == rep.selEnd[1]) &&  rep.selEnd[1] > 1)) &&\n        (isOut != true)\n       )\n    {\n      return false;\n    }\n\n    var firstLine, lastLine;\n    firstLine = rep.selStart[0];\n    lastLine = Math.max(firstLine, rep.selEnd[0] - ((rep.selEnd[1] === 0) ? 1 : 0));\n    var mods = [];\n    for (var n = firstLine; n <= lastLine; n++)\n    {\n      var listType = getLineListType(n);\n      var t = 'indent';\n      var level = 0;\n      if (listType)\n      {\n        listType = /([a-z]+)([0-9]+)/.exec(listType);\n        if (listType)\n        {\n          t = listType[1];\n          level = Number(listType[2]);\n        }\n      }\n      var newLevel = Math.max(0, Math.min(MAX_LIST_LEVEL, level + (isOut ? -1 : 1)));\n      if (level != newLevel)\n      {\n        mods.push([n, (newLevel > 0) ? t + newLevel : '']);\n      }\n    }\n\n    _.each(mods, function(mod){\n      setLineListType(mod[0], mod[1]);\n    });\n    return true;\n  }\n  editorInfo.ace_doIndentOutdent = doIndentOutdent;\n\n  function doTabKey(shiftDown)\n  {\n    if (!doIndentOutdent(shiftDown))\n    {\n      performDocumentReplaceSelection(THE_TAB);\n    }\n  }\n\n  function doDeleteKey(optEvt)\n  {\n    var evt = optEvt || {};\n    var handled = false;\n    if (rep.selStart)\n    {\n      if (isCaret())\n      {\n        var lineNum = caretLine();\n        var col = caretColumn();\n        var lineEntry = rep.lines.atIndex(lineNum);\n        var lineText = lineEntry.text;\n        var lineMarker = lineEntry.lineMarker;\n        if (/^ +$/.exec(lineText.substring(lineMarker, col)))\n        {\n          var col2 = col - lineMarker;\n          var tabSize = THE_TAB.length;\n          var toDelete = ((col2 - 1) % tabSize) + 1;\n          performDocumentReplaceRange([lineNum, col - toDelete], [lineNum, col], '');\n          //scrollSelectionIntoView();\n          handled = true;\n        }\n      }\n      if (!handled)\n      {\n        if (isCaret())\n        {\n          var theLine = caretLine();\n          var lineEntry = rep.lines.atIndex(theLine);\n          if (caretColumn() <= lineEntry.lineMarker)\n          {\n            // delete at beginning of line\n            var action = 'delete_newline';\n            var prevLineListType = (theLine > 0 ? getLineListType(theLine - 1) : '');\n            var thisLineListType = getLineListType(theLine);\n            var prevLineEntry = (theLine > 0 && rep.lines.atIndex(theLine - 1));\n            var prevLineBlank = (prevLineEntry && prevLineEntry.text.length == prevLineEntry.lineMarker);\n\n            var thisLineHasMarker = documentAttributeManager.lineHasMarker(theLine);\n\n            if (thisLineListType)\n            {\n              // this line is a list\n              if (prevLineBlank && !prevLineListType)\n              {\n                // previous line is blank, remove it\n                performDocumentReplaceRange([theLine - 1, prevLineEntry.text.length], [theLine, 0], '');\n              }\n              else\n              {\n                // delistify\n                performDocumentReplaceRange([theLine, 0], [theLine, lineEntry.lineMarker], '');\n              }\n            }else if (thisLineHasMarker && prevLineEntry){\n              // If the line has any attributes assigned, remove them by removing the marker '*'\n              performDocumentReplaceRange([theLine -1 , prevLineEntry.text.length], [theLine, lineEntry.lineMarker], '');\n            }\n            else if (theLine > 0)\n            {\n              // remove newline\n              performDocumentReplaceRange([theLine - 1, prevLineEntry.text.length], [theLine, 0], '');\n            }\n          }\n          else\n          {\n            var docChar = caretDocChar();\n            if (docChar > 0)\n            {\n              if (evt.metaKey || evt.ctrlKey || evt.altKey)\n              {\n                // delete as many unicode \"letters or digits\" in a row as possible;\n                // always delete one char, delete further even if that first char\n                // isn't actually a word char.\n                var deleteBackTo = docChar - 1;\n                while (deleteBackTo > lineEntry.lineMarker && isWordChar(rep.alltext.charAt(deleteBackTo - 1)))\n                {\n                  deleteBackTo--;\n                }\n                performDocumentReplaceCharRange(deleteBackTo, docChar, '');\n              }\n              else\n              {\n                // normal delete\n                performDocumentReplaceCharRange(docChar - 1, docChar, '');\n              }\n            }\n          }\n        }\n        else\n        {\n          performDocumentReplaceSelection('');\n        }\n      }\n    }\n     //if the list has been removed, it is necessary to renumber\n    //starting from the *next* line because the list may have been\n    //separated. If it returns null, it means that the list was not cut, try\n    //from the current one.\n    var line = caretLine();\n    if(line != -1 && renumberList(line+1) === null)\n    {\n      renumberList(line);\n    }\n  }\n\n  // set of \"letter or digit\" chars is based on section 20.5.16 of the original Java Language Spec\n  var REGEX_WORDCHAR = /[\\u0030-\\u0039\\u0041-\\u005A\\u0061-\\u007A\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u00FF\\u0100-\\u1FFF\\u3040-\\u9FFF\\uF900-\\uFDFF\\uFE70-\\uFEFE\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFDC]/;\n  var REGEX_SPACE = /\\s/;\n\n  function isWordChar(c)\n  {\n    return !!REGEX_WORDCHAR.exec(c);\n  }\n  editorInfo.ace_isWordChar = isWordChar;\n\n  function isSpaceChar(c)\n  {\n    return !!REGEX_SPACE.exec(c);\n  }\n\n  function moveByWordInLine(lineText, initialIndex, forwardNotBack)\n  {\n    var i = initialIndex;\n\n    function nextChar()\n    {\n      if (forwardNotBack) return lineText.charAt(i);\n      else return lineText.charAt(i - 1);\n    }\n\n    function advance()\n    {\n      if (forwardNotBack) i++;\n      else i--;\n    }\n\n    function isDone()\n    {\n      if (forwardNotBack) return i >= lineText.length;\n      else return i <= 0;\n    }\n\n    // On Mac and Linux, move right moves to end of word and move left moves to start;\n    // on Windows, always move to start of word.\n    // On Windows, Firefox and IE disagree on whether to stop for punctuation (FF says no).\n    if (browser.msie && forwardNotBack)\n    {\n      while ((!isDone()) && isWordChar(nextChar()))\n      {\n        advance();\n      }\n      while ((!isDone()) && !isWordChar(nextChar()))\n      {\n        advance();\n      }\n    }\n    else\n    {\n      while ((!isDone()) && !isWordChar(nextChar()))\n      {\n        advance();\n      }\n      while ((!isDone()) && isWordChar(nextChar()))\n      {\n        advance();\n      }\n    }\n\n    return i;\n  }\n\n  function handleKeyEvent(evt)\n  {\n    // if (DEBUG && window.DONT_INCORP) return;\n    if (!isEditable) return;\n    var type = evt.type;\n    var charCode = evt.charCode;\n    var keyCode = evt.keyCode;\n    var which = evt.which;\n    var altKey = evt.altKey;\n    var shiftKey = evt.shiftKey;\n\n    // prevent ESC key\n    if (keyCode == 27)\n    {\n      evt.preventDefault();\n      return;\n    }\n    // Is caret potentially hidden by the chat button?\n    var myselection = document.getSelection(); // get the current caret selection\n    var caretOffsetTop = myselection.focusNode.parentNode.offsetTop | myselection.focusNode.offsetTop; // get the carets selection offset in px IE 214\n    \n    if(myselection.focusNode.wholeText){ // Is there any content?  If not lineHeight will report wrong..\n      var lineHeight = myselection.focusNode.parentNode.offsetHeight; // line height of populated links\n    }else{\n      var lineHeight = myselection.focusNode.offsetHeight; // line height of blank lines\n    }\n\n    var heightOfChatIcon = parent.parent.$('#chaticon').height(); // height of the chat icon button\n    lineHeight = (lineHeight *2) + heightOfChatIcon;\n    var viewport = getViewPortTopBottom();\n    var viewportHeight = viewport.bottom - viewport.top - lineHeight;\n    var relCaretOffsetTop = caretOffsetTop - viewport.top; // relative Caret Offset Top to viewport\n    if (viewportHeight < relCaretOffsetTop){\n      parent.parent.$(\"#chaticon\").css(\"opacity\",\".3\"); // make chaticon opacity low when user types near it\n    }else{\n      parent.parent.$(\"#chaticon\").css(\"opacity\",\"1\"); // make chaticon opacity back to full (so fully visible)\n    }\n\n    //dmesg(\"keyevent type: \"+type+\", which: \"+which);\n    // Don't take action based on modifier keys going up and down.\n    // Modifier keys do not generate \"keypress\" events.\n    // 224 is the command-key under Mac Firefox.\n    // 91 is the Windows key in IE; it is ASCII for open-bracket but isn't the keycode for that key\n    // 20 is capslock in IE.\n    var isModKey = ((!charCode) && ((type == \"keyup\") || (type == \"keydown\")) && (keyCode == 16 || keyCode == 17 || keyCode == 18 || keyCode == 20 || keyCode == 224 || keyCode == 91));\n    if (isModKey) return;\n\n    // If the key is a keypress and the browser is opera and the key is enter, do nothign at all as this fires twice.\n    if (keyCode == 13 && browser.opera && (type == \"keypress\")){\n      return; // This stops double enters in Opera but double Tabs still show on single tab keypress, adding keyCode == 9 to this doesn't help as the event is fired twice\n    }\n    var specialHandled = false;\n    var isTypeForSpecialKey = ((browser.msie || browser.safari || browser.chrome) ? (type == \"keydown\") : (type == \"keypress\"));\n    var isTypeForCmdKey = ((browser.msie || browser.safari || browser.chrome) ? (type == \"keydown\") : (type == \"keypress\"));\n    var stopped = false;\n\n    inCallStackIfNecessary(\"handleKeyEvent\", function()\n    {\n      if (type == \"keypress\" || (isTypeForSpecialKey && keyCode == 13 /*return*/ ))\n      {\n        // in IE, special keys don't send keypress, the keydown does the action\n        if (!outsideKeyPress(evt))\n        {\n          evt.preventDefault();\n          stopped = true;\n        }\n      }\n      else if (evt.key === \"Dead\"){\n        // If it's a dead key we don't want to do any Etherpad behavior.\n        stopped = true;\n        return true;\n      }\n      else if (type == \"keydown\")\n      {\n        outsideKeyDown(evt);\n      }\n      if (!stopped)\n      {\n        var specialHandledInHook = hooks.callAll('aceKeyEvent', {\n          callstack: currentCallStack,\n          editorInfo: editorInfo,\n          rep: rep,\n          documentAttributeManager: documentAttributeManager,\n          evt:evt\n        });\n        specialHandled = (specialHandledInHook&&specialHandledInHook.length>0)?specialHandledInHook[0]:specialHandled;\n        if ((!specialHandled) && altKey && isTypeForSpecialKey && keyCode == 120){\n          // Alt F9 focuses on the File Menu and/or editbar.\n          // Note that while most editors use Alt F10 this is not desirable\n          // As ubuntu cannot use Alt F10....\n          // Focus on the editbar. -- TODO: Move Focus back to previous state (we know it so we can use it)\n          var firstEditbarElement = parent.parent.$('#editbar').children(\"ul\").first().children().first().children().first().children().first();\n          $(this).blur(); \n          firstEditbarElement.focus();\n          evt.preventDefault();\n        }\n        if ((!specialHandled) && altKey && keyCode == 67 && type === \"keydown\"){\n          // Alt c focuses on the Chat window\n          $(this).blur(); \n          parent.parent.chat.show();\n          parent.parent.$(\"#chatinput\").focus();\n          evt.preventDefault();\n        }\n        if ((!specialHandled) && evt.ctrlKey && shiftKey && keyCode == 50 && type === \"keydown\"){\n          // Control-Shift-2 shows a gritter popup showing a line author\n          var lineNumber = rep.selEnd[0];\n          var alineAttrs = rep.alines[lineNumber];\n          var apool = rep.apool;\n\n          // TODO: support selection ranges\n          // TODO: Still work when authorship colors have been cleared\n          // TODO: i18n\n          // TODO: There appears to be a race condition or so.\n\n          var author = null;\n          if (alineAttrs) {\n            var authors = [];\n            var authorNames = [];\n            var opIter = Changeset.opIterator(alineAttrs);\n\n            while (opIter.hasNext()){\n              var op = opIter.next();\n              authorId = Changeset.opAttributeValue(op, 'author', apool);\n\n              // Only push unique authors and ones with values\n              if(authors.indexOf(authorId) === -1 && authorId !== \"\"){\n                authors.push(authorId);\n              }\n\n            }\n\n          }\n\n          // No author information is available IE on a new pad.\n          if(authors.length === 0){\n            var authorString = \"No author information is available\";\n          }\n          else{\n            // Known authors info, both current and historical\n            var padAuthors = parent.parent.pad.userList();\n            var authorObj = {};\n            authors.forEach(function(authorId){\n              padAuthors.forEach(function(padAuthor){\n                // If the person doing the lookup is the author..\n                if(padAuthor.userId === authorId){\n                  if(parent.parent.clientVars.userId === authorId){\n                    authorObj = {\n                      name: \"Me\"\n                    }\n                  }else{\n                    authorObj = padAuthor;\n                  }\n                }\n              });\n              if(!authorObj){\n                author = \"Unknown\";\n                return;\n              }\n              author = authorObj.name;\n              if(!author) author = \"Unknown\";\n              authorNames.push(author);\n            })\n          }\n          if(authors.length === 1){\n            var authorString = \"The author of this line is \" + authorNames;\n          }\n          if(authors.length > 1){\n            var authorString = \"The authors of this line are \" + authorNames.join(\" & \");\n\t  }\n\n          parent.parent.$.gritter.add({\n            // (string | mandatory) the heading of the notification\n            title: 'Line Authors',\n            // (string | mandatory) the text inside the notification\n            text: authorString,\n            // (bool | optional) if you want it to fade out on its own or just sit there\n            sticky: false,\n            // (int | optional) the time you want it to be alive for before fading out\n            time: '4000'\n          });\n        }\n        if ((!specialHandled) && isTypeForSpecialKey && keyCode == 8)\n        {\n          // \"delete\" key; in mozilla, if we're at the beginning of a line, normalize now,\n          // or else deleting a blank line can take two delete presses.\n          // --\n          // we do deletes completely customly now:\n          //  - allows consistent (and better) meta-delete behavior\n          //  - normalizing and then allowing default behavior confused IE\n          //  - probably eliminates a few minor quirks\n          fastIncorp(3);\n          evt.preventDefault();\n          doDeleteKey(evt);\n          specialHandled = true;\n        }\n        if ((!specialHandled) && isTypeForSpecialKey && keyCode == 13)\n        {\n          // return key, handle specially;\n          // note that in mozilla we need to do an incorporation for proper return behavior anyway.\n          fastIncorp(4);\n          evt.preventDefault();\n          doReturnKey();\n          //scrollSelectionIntoView();\n          scheduler.setTimeout(function()\n          {\n            outerWin.scrollBy(-100, 0);\n          }, 0);\n          specialHandled = true;\n        }\n        if ((!specialHandled) && isTypeForCmdKey && String.fromCharCode(which).toLowerCase() == \"s\" && (evt.metaKey || evt.ctrlKey) && !evt.altKey) /* Do a saved revision on ctrl S */\n        {\n          evt.preventDefault();\n          var originalBackground = parent.parent.$('#revisionlink').css(\"background\")\n          parent.parent.$('#revisionlink').css({\"background\":\"lightyellow\"});\n          scheduler.setTimeout(function(){\n            parent.parent.$('#revisionlink').css({\"background\":originalBackground});\n          }, 1000);\n          parent.parent.pad.collabClient.sendMessage({\"type\":\"SAVE_REVISION\"}); /* The parent.parent part of this is BAD and I feel bad..  It may break something */\n          specialHandled = true;\n        }\n        if ((!specialHandled) && isTypeForSpecialKey && keyCode == 9 && !(evt.metaKey || evt.ctrlKey))\n        {\n          // tab\n          fastIncorp(5);\n          evt.preventDefault();\n          doTabKey(evt.shiftKey);\n          //scrollSelectionIntoView();\n          specialHandled = true;\n        }\n        if ((!specialHandled) && isTypeForCmdKey && String.fromCharCode(which).toLowerCase() == \"z\" && (evt.metaKey || evt.ctrlKey) && !evt.altKey)\n        {\n          // cmd-Z (undo)\n          fastIncorp(6);\n          evt.preventDefault();\n          if (evt.shiftKey)\n          {\n            doUndoRedo(\"redo\");\n          }\n          else\n          {\n            doUndoRedo(\"undo\");\n          }\n          specialHandled = true;\n        }\n        if ((!specialHandled) && isTypeForCmdKey && String.fromCharCode(which).toLowerCase() == \"y\" && (evt.metaKey || evt.ctrlKey))\n        {\n          // cmd-Y (redo)\n          fastIncorp(10);\n          evt.preventDefault();\n          doUndoRedo(\"redo\");\n          specialHandled = true;\n        }\n        if ((!specialHandled) && isTypeForCmdKey && String.fromCharCode(which).toLowerCase() == \"b\" && (evt.metaKey || evt.ctrlKey))\n        {\n          // cmd-B (bold)\n          fastIncorp(13);\n          evt.preventDefault();\n          toggleAttributeOnSelection('bold');\n          specialHandled = true;\n        }\n        if ((!specialHandled) && isTypeForCmdKey && String.fromCharCode(which).toLowerCase() == \"i\" && (evt.metaKey || evt.ctrlKey))\n        {\n          // cmd-I (italic)\n          fastIncorp(14);\n          evt.preventDefault();\n          toggleAttributeOnSelection('italic');\n          specialHandled = true;\n        }\n        if ((!specialHandled) && isTypeForCmdKey && String.fromCharCode(which).toLowerCase() == \"u\" && (evt.metaKey || evt.ctrlKey))\n        {\n          // cmd-U (underline)\n          fastIncorp(15);\n          evt.preventDefault();\n          toggleAttributeOnSelection('underline');\n          specialHandled = true;\n        }\n        if ((!specialHandled) && isTypeForCmdKey && String.fromCharCode(which).toLowerCase() == \"5\" && (evt.metaKey || evt.ctrlKey) && evt.altKey !== true)\n        {\n          // cmd-5 (strikethrough)\n          fastIncorp(13);\n          evt.preventDefault();\n          toggleAttributeOnSelection('strikethrough');\n          specialHandled = true;\n        }\n        if ((!specialHandled) && isTypeForCmdKey && String.fromCharCode(which).toLowerCase() == \"l\" && (evt.metaKey || evt.ctrlKey) && evt.shiftKey)\n        {\n          // cmd-shift-L (unorderedlist)\n          fastIncorp(9);\n          evt.preventDefault();\n          doInsertUnorderedList()\n          specialHandled = true;\n\t}\n        if ((!specialHandled) && isTypeForCmdKey && (String.fromCharCode(which).toLowerCase() == \"n\" || String.fromCharCode(which) == 1) && (evt.metaKey || evt.ctrlKey) && evt.shiftKey)\n        {\n          // cmd-shift-N (orderedlist)\n          fastIncorp(9);\n          evt.preventDefault();\n          doInsertOrderedList()\n          specialHandled = true;\n\t}\n        if ((!specialHandled) && isTypeForCmdKey && String.fromCharCode(which).toLowerCase() == \"c\" && (evt.metaKey || evt.ctrlKey) && evt.shiftKey) {\n          // cmd-shift-C (clearauthorship)\n          fastIncorp(9);\n          evt.preventDefault();\n          CMDS.clearauthorship();\n        }\n        if ((!specialHandled) && isTypeForCmdKey && String.fromCharCode(which).toLowerCase() == \"h\" && (evt.ctrlKey))\n        {\n          // cmd-H (backspace)\n          fastIncorp(20);\n          evt.preventDefault();\n          doDeleteKey();\n          specialHandled = true;\n        }\n        if((evt.which == 36 && evt.ctrlKey == true)){ setScrollY(0); } // Control Home send to Y = 0\n        if((evt.which == 33 || evt.which == 34) && type == 'keydown' && !evt.ctrlKey){\n\n          evt.preventDefault(); // This is required, browsers will try to do normal default behavior on page up / down and the default behavior SUCKS\n\n          var oldVisibleLineRange = getVisibleLineRange();\n          var topOffset = rep.selStart[0] - oldVisibleLineRange[0];\n          if(topOffset < 0 ){\n            topOffset = 0;\n          }\n\n          var isPageDown = evt.which === 34;\n          var isPageUp = evt.which === 33;\n\n          scheduler.setTimeout(function(){\n            var newVisibleLineRange = getVisibleLineRange(); // the visible lines IE 1,10\n            var linesCount = rep.lines.length(); // total count of lines in pad IE 10\n            var numberOfLinesInViewport = newVisibleLineRange[1] - newVisibleLineRange[0]; // How many lines are in the viewport right now?\n\n            if(isPageUp){\n              rep.selEnd[0] = rep.selEnd[0] - numberOfLinesInViewport; // move to the bottom line +1 in the viewport (essentially skipping over a page)\n              rep.selStart[0] = rep.selStart[0] - numberOfLinesInViewport; // move to the bottom line +1 in the viewport (essentially skipping over a page)\n            }\n\n            if(isPageDown){ // if we hit page down\n              if(rep.selEnd[0] >= oldVisibleLineRange[0]){ // If the new viewpoint position is actually further than where we are right now\n                rep.selStart[0] = oldVisibleLineRange[1] -1; // dont go further in the page down than what's visible IE go from 0 to 50 if 50 is visible on screen but dont go below that else we miss content\n                rep.selEnd[0] = oldVisibleLineRange[1] -1; // dont go further in the page down than what's visible IE go from 0 to 50 if 50 is visible on screen but dont go below that else we miss content\n              }\n            }\n\n            //ensure min and max\n            if(rep.selEnd[0] < 0){\n              rep.selEnd[0] = 0;\n            }\n            if(rep.selStart[0] < 0){\n              rep.selStart[0] = 0;\n            }\n            if(rep.selEnd[0] >= linesCount){\n              rep.selEnd[0] = linesCount-1;\n            }\n            updateBrowserSelectionFromRep();\n            var myselection = document.getSelection(); // get the current caret selection, can't use rep. here because that only gives us the start position not the current\n            var caretOffsetTop = myselection.focusNode.parentNode.offsetTop || myselection.focusNode.offsetTop; // get the carets selection offset in px IE 214\n\n            // sometimes the first selection is -1 which causes problems (Especially with ep_page_view)\n            // so use focusNode.offsetTop value.\n            if(caretOffsetTop === -1) caretOffsetTop = myselection.focusNode.offsetTop;\n            setScrollY(caretOffsetTop); // set the scrollY offset of the viewport on the document\n\n          }, 200);\n        }\n        /* Attempt to apply some sanity to cursor handling in Chrome after a copy / paste event\n           We have to do this the way we do because rep. doesn't hold the value for keyheld events IE if the user\n           presses and holds the arrow key ..  Sorry if this is ugly, blame Chrome's weird handling of viewports after new content is added*/\n        if((evt.which == 37 || evt.which == 38 || evt.which == 39 || evt.which == 40) && browser.chrome){\n          var viewport = getViewPortTopBottom();\n          var myselection = document.getSelection(); // get the current caret selection, can't use rep. here because that only gives us the start position not the current\n          var caretOffsetTop = myselection.focusNode.parentNode.offsetTop || myselection.focusNode.offsetTop; // get the carets selection offset in px IE 214\n          var lineHeight = $(myselection.focusNode.parentNode).parent(\"div\").height(); // get the line height of the caret line\n          // top.console.log(\"offsetTop\", myselection.focusNode.parentNode.parentNode.offsetTop);\n          try {\n            lineHeight = $(myselection.focusNode).height() // needed for how chrome handles line heights of null objects\n            // console.log(\"lineHeight now\", lineHeight);\n          }catch(e){}\n          var caretOffsetTopBottom = caretOffsetTop + lineHeight;\n          var visibleLineRange = getVisibleLineRange(); // the visible lines IE 1,10\n\n          if(caretOffsetTop){ // sometimes caretOffsetTop bugs out and returns 0, not sure why, possible Chrome bug?  Either way if it does we don't wanna mess with it\n            // top.console.log(caretOffsetTop, viewport.top, caretOffsetTopBottom, viewport.bottom);\n            var caretIsNotVisible = (caretOffsetTop < viewport.top || caretOffsetTopBottom >= viewport.bottom); // Is the Caret Visible to the user?\n            // Expect some weird behavior caretOffsetTopBottom is greater than viewport.bottom on a keypress down\n            var offsetTopSamePlace = caretOffsetTop == viewport.top; // sometimes moving key left & up leaves the caret at the same point as the viewport.top, technically the caret is visible but it's not fully visible so we should move to it\n            if(offsetTopSamePlace && (evt.which == 37 || evt.which == 38)){\n                var newY = caretOffsetTop;\n                setScrollY(newY);\n            }\n\n            if(caretIsNotVisible){ // is the cursor no longer visible to the user?\n              // top.console.log(\"Caret is NOT visible to the user\");\n              // top.console.log(caretOffsetTop,viewport.top,caretOffsetTopBottom,viewport.bottom);\n              // Oh boy the caret is out of the visible area, I need to scroll the browser window to lineNum.\n              if(evt.which == 37 || evt.which == 38){ // If left or up arrow\n                var newY = caretOffsetTop; // That was easy!\n              }\n              if(evt.which == 39 || evt.which == 40){ // if down or right arrow\n                // only move the viewport if we're at the bottom of the viewport, if we hit down any other time the viewport shouldn't change\n                // NOTE: This behavior only fires if Chrome decides to break the page layout after a paste, it's annoying but nothing I can do\n                var selection = getSelection();\n                // top.console.log(\"line #\", rep.selStart[0]); // the line our caret is on\n                // top.console.log(\"firstvisible\", visibleLineRange[0]); // the first visiblel ine\n                // top.console.log(\"lastVisible\", visibleLineRange[1]); // the last visible line\n                // top.console.log(rep.selStart[0], visibleLineRange[1], rep.selStart[0], visibleLineRange[0]);\n                var newY = viewport.top + lineHeight;\n              }\n              if(newY){\n                setScrollY(newY); // set the scrollY offset of the viewport on the document\n              }\n            }\n          }\n        }\n      }\n\n      if (type == \"keydown\")\n      {\n        idleWorkTimer.atLeast(500);\n      }\n      else if (type == \"keypress\")\n      {\n        if ((!specialHandled) && false /*parenModule.shouldNormalizeOnChar(charCode)*/)\n        {\n          idleWorkTimer.atMost(0);\n        }\n        else\n        {\n          idleWorkTimer.atLeast(500);\n        }\n      }\n      else if (type == \"keyup\")\n      {\n        var wait = 0;\n        idleWorkTimer.atLeast(wait);\n        idleWorkTimer.atMost(wait);\n      }\n\n      // Is part of multi-keystroke international character on Firefox Mac\n      var isFirefoxHalfCharacter = (browser.firefox && evt.altKey && charCode === 0 && keyCode === 0);\n\n      // Is part of multi-keystroke international character on Safari Mac\n      var isSafariHalfCharacter = (browser.safari && evt.altKey && keyCode == 229);\n\n      if (thisKeyDoesntTriggerNormalize || isFirefoxHalfCharacter || isSafariHalfCharacter)\n      {\n        idleWorkTimer.atLeast(3000); // give user time to type\n        // if this is a keydown, e.g., the keyup shouldn't trigger a normalize\n        thisKeyDoesntTriggerNormalize = true;\n      }\n\n      if ((!specialHandled) && (!thisKeyDoesntTriggerNormalize) && (!inInternationalComposition))\n      {\n        if (type != \"keyup\")\n        {\n          observeChangesAroundSelection();\n        }\n      }\n\n      if (type == \"keyup\")\n      {\n        thisKeyDoesntTriggerNormalize = false;\n      }\n    });\n  }\n\n  var thisKeyDoesntTriggerNormalize = false;\n\n  function doUndoRedo(which)\n  {\n    // precond: normalized DOM\n    if (undoModule.enabled)\n    {\n      var whichMethod;\n      if (which == \"undo\") whichMethod = 'performUndo';\n      if (which == \"redo\") whichMethod = 'performRedo';\n      if (whichMethod)\n      {\n        var oldEventType = currentCallStack.editEvent.eventType;\n        currentCallStack.startNewEvent(which);\n        undoModule[whichMethod](function(backset, selectionInfo)\n        {\n          if (backset)\n          {\n            performDocumentApplyChangeset(backset);\n          }\n          if (selectionInfo)\n          {\n            performSelectionChange(lineAndColumnFromChar(selectionInfo.selStart), lineAndColumnFromChar(selectionInfo.selEnd), selectionInfo.selFocusAtStart);\n          }\n          var oldEvent = currentCallStack.startNewEvent(oldEventType, true);\n          return oldEvent;\n        });\n      }\n    }\n  }\n  editorInfo.ace_doUndoRedo = doUndoRedo;\n\n  function updateBrowserSelectionFromRep()\n  {\n    // requires normalized DOM!\n    var selStart = rep.selStart,\n        selEnd = rep.selEnd;\n\n    if (!(selStart && selEnd))\n    {\n      setSelection(null);\n      return;\n    }\n\n    var selection = {};\n\n    var ss = [selStart[0], selStart[1]];\n    selection.startPoint = getPointForLineAndChar(ss);\n\n    var se = [selEnd[0], selEnd[1]];\n    selection.endPoint = getPointForLineAndChar(se);\n\n    selection.focusAtStart = !! rep.selFocusAtStart;\n    setSelection(selection);\n  }\n  editorInfo.ace_updateBrowserSelectionFromRep = updateBrowserSelectionFromRep;\n\n  function nodeMaxIndex(nd)\n  {\n    if (isNodeText(nd)) return nd.nodeValue.length;\n    else return 1;\n  }\n\n  function hasIESelection()\n  {\n    var browserSelection;\n    try\n    {\n      browserSelection = doc.selection;\n    }\n    catch (e)\n    {}\n    if (!browserSelection) return false;\n    var origSelectionRange;\n    try\n    {\n      origSelectionRange = browserSelection.createRange();\n    }\n    catch (e)\n    {}\n    if (!origSelectionRange) return false;\n    return true;\n  }\n\n  function getSelection()\n  {\n    // returns null, or a structure containing startPoint and endPoint,\n    // each of which has node (a magicdom node), index, and maxIndex.  If the node\n    // is a text node, maxIndex is the length of the text; else maxIndex is 1.\n    // index is between 0 and maxIndex, inclusive.\n    if (browser.msie)\n    {\n      var browserSelection;\n      try\n      {\n        browserSelection = doc.selection;\n      }\n      catch (e)\n      {}\n      if (!browserSelection) return null;\n      var origSelectionRange;\n      try\n      {\n        origSelectionRange = browserSelection.createRange();\n      }\n      catch (e)\n      {}\n      if (!origSelectionRange) return null;\n      var selectionParent = origSelectionRange.parentElement();\n      if (selectionParent.ownerDocument != doc) return null;\n\n      var newRange = function()\n      {\n        return doc.body.createTextRange();\n      };\n\n      var rangeForElementNode = function(nd)\n      {\n        var rng = newRange();\n        // doesn't work on text nodes\n        rng.moveToElementText(nd);\n        return rng;\n      };\n\n      var pointFromCollapsedRange = function(rng)\n      {\n        var parNode = rng.parentElement();\n        var elemBelow = -1;\n        var elemAbove = parNode.childNodes.length;\n        var rangeWithin = rangeForElementNode(parNode);\n\n        if (rng.compareEndPoints(\"StartToStart\", rangeWithin) === 0)\n        {\n          return {\n            node: parNode,\n            index: 0,\n            maxIndex: 1\n          };\n        }\n        else if (rng.compareEndPoints(\"EndToEnd\", rangeWithin) === 0)\n        {\n          if (isBlockElement(parNode) && parNode.nextSibling)\n          {\n            // caret after block is not consistent across browsers\n            // (same line vs next) so put caret before next node\n            return {\n              node: parNode.nextSibling,\n              index: 0,\n              maxIndex: 1\n            };\n          }\n          return {\n            node: parNode,\n            index: 1,\n            maxIndex: 1\n          };\n        }\n        else if (parNode.childNodes.length === 0)\n        {\n          return {\n            node: parNode,\n            index: 0,\n            maxIndex: 1\n          };\n        }\n\n        for (var i = 0; i < parNode.childNodes.length; i++)\n        {\n          var n = parNode.childNodes.item(i);\n          if (!isNodeText(n))\n          {\n            var nodeRange = rangeForElementNode(n);\n            var startComp = rng.compareEndPoints(\"StartToStart\", nodeRange);\n            var endComp = rng.compareEndPoints(\"EndToEnd\", nodeRange);\n            if (startComp >= 0 && endComp <= 0)\n            {\n              var index = 0;\n              if (startComp > 0)\n              {\n                index = 1;\n              }\n              return {\n                node: n,\n                index: index,\n                maxIndex: 1\n              };\n            }\n            else if (endComp > 0)\n            {\n              if (i > elemBelow)\n              {\n                elemBelow = i;\n                rangeWithin.setEndPoint(\"StartToEnd\", nodeRange);\n              }\n            }\n            else if (startComp < 0)\n            {\n              if (i < elemAbove)\n              {\n                elemAbove = i;\n                rangeWithin.setEndPoint(\"EndToStart\", nodeRange);\n              }\n            }\n          }\n        }\n        if ((elemAbove - elemBelow) == 1)\n        {\n          if (elemBelow >= 0)\n          {\n            return {\n              node: parNode.childNodes.item(elemBelow),\n              index: 1,\n              maxIndex: 1\n            };\n          }\n          else\n          {\n            return {\n              node: parNode.childNodes.item(elemAbove),\n              index: 0,\n              maxIndex: 1\n            };\n          }\n        }\n        var idx = 0;\n        var r = rng.duplicate();\n        // infinite stateful binary search! call function for values 0 to inf,\n        // expecting the answer to be about 40.  return index of smallest\n        // true value.\n        var indexIntoRange = binarySearchInfinite(40, function(i)\n        {\n          // the search algorithm whips the caret back and forth,\n          // though it has to be moved relatively and may hit\n          // the end of the buffer\n          var delta = i - idx;\n          var moved = Math.abs(r.move(\"character\", -delta));\n          // next line is work-around for fact that when moving left, the beginning\n          // of a text node is considered to be after the start of the parent element:\n          if (r.move(\"character\", -1)) r.move(\"character\", 1);\n          if (delta < 0) idx -= moved;\n          else idx += moved;\n          return (r.compareEndPoints(\"StartToStart\", rangeWithin) <= 0);\n        });\n        // iterate over consecutive text nodes, point is in one of them\n        var textNode = elemBelow + 1;\n        var indexLeft = indexIntoRange;\n        while (textNode < elemAbove)\n        {\n          var tn = parNode.childNodes.item(textNode);\n          if (indexLeft <= tn.nodeValue.length)\n          {\n            return {\n              node: tn,\n              index: indexLeft,\n              maxIndex: tn.nodeValue.length\n            };\n          }\n          indexLeft -= tn.nodeValue.length;\n          textNode++;\n        }\n        var tn = parNode.childNodes.item(textNode - 1);\n        return {\n          node: tn,\n          index: tn.nodeValue.length,\n          maxIndex: tn.nodeValue.length\n        };\n      };\n\n      var selection = {};\n      if (origSelectionRange.compareEndPoints(\"StartToEnd\", origSelectionRange) === 0)\n      {\n        // collapsed\n        var pnt = pointFromCollapsedRange(origSelectionRange);\n        selection.startPoint = pnt;\n        selection.endPoint = {\n          node: pnt.node,\n          index: pnt.index,\n          maxIndex: pnt.maxIndex\n        };\n      }\n      else\n      {\n        var start = origSelectionRange.duplicate();\n        start.collapse(true);\n        var end = origSelectionRange.duplicate();\n        end.collapse(false);\n        selection.startPoint = pointFromCollapsedRange(start);\n        selection.endPoint = pointFromCollapsedRange(end);\n      }\n      return selection;\n    }\n    else\n    {\n      // non-IE browser\n      var browserSelection = window.getSelection();\n      if (browserSelection && browserSelection.type != \"None\" && browserSelection.rangeCount !== 0)\n      {\n        var range = browserSelection.getRangeAt(0);\n\n        function isInBody(n)\n        {\n          while (n && !(n.tagName && n.tagName.toLowerCase() == \"body\"))\n          {\n            n = n.parentNode;\n          }\n          return !!n;\n        }\n\n        function pointFromRangeBound(container, offset)\n        {\n          if (!isInBody(container))\n          {\n            // command-click in Firefox selects whole document, HEAD and BODY!\n            return {\n              node: root,\n              index: 0,\n              maxIndex: 1\n            };\n          }\n          var n = container;\n          var childCount = n.childNodes.length;\n          if (isNodeText(n))\n          {\n            return {\n              node: n,\n              index: offset,\n              maxIndex: n.nodeValue.length\n            };\n          }\n          else if (childCount === 0)\n          {\n            return {\n              node: n,\n              index: 0,\n              maxIndex: 1\n            };\n          }\n          // treat point between two nodes as BEFORE the second (rather than after the first)\n          // if possible; this way point at end of a line block-element is treated as\n          // at beginning of next line\n          else if (offset == childCount)\n          {\n            var nd = n.childNodes.item(childCount - 1);\n            var max = nodeMaxIndex(nd);\n            return {\n              node: nd,\n              index: max,\n              maxIndex: max\n            };\n          }\n          else\n          {\n            var nd = n.childNodes.item(offset);\n            var max = nodeMaxIndex(nd);\n            return {\n              node: nd,\n              index: 0,\n              maxIndex: max\n            };\n          }\n        }\n        var selection = {};\n        selection.startPoint = pointFromRangeBound(range.startContainer, range.startOffset);\n        selection.endPoint = pointFromRangeBound(range.endContainer, range.endOffset);\n        selection.focusAtStart = (((range.startContainer != range.endContainer) || (range.startOffset != range.endOffset)) && browserSelection.anchorNode && (browserSelection.anchorNode == range.endContainer) && (browserSelection.anchorOffset == range.endOffset));\n\n        if(selection.startPoint.node.ownerDocument !== window.document){\n          return null;\n        }\n\n        return selection;\n      }\n      else return null;\n    }\n  }\n\n  function setSelection(selection)\n  {\n    function copyPoint(pt)\n    {\n      return {\n        node: pt.node,\n        index: pt.index,\n        maxIndex: pt.maxIndex\n      };\n    }\n    if (browser.msie)\n    {\n      // Oddly enough, accessing scrollHeight fixes return key handling on IE 8,\n      // presumably by forcing some kind of internal DOM update.\n      doc.body.scrollHeight;\n\n      function moveToElementText(s, n)\n      {\n        while (n.firstChild && !isNodeText(n.firstChild))\n        {\n          n = n.firstChild;\n        }\n        s.moveToElementText(n);\n      }\n\n      function newRange()\n      {\n        return doc.body.createTextRange();\n      }\n\n      function setCollapsedBefore(s, n)\n      {\n        // s is an IE TextRange, n is a dom node\n        if (isNodeText(n))\n        {\n          // previous node should not also be text, but prevent inf recurs\n          if (n.previousSibling && !isNodeText(n.previousSibling))\n          {\n            setCollapsedAfter(s, n.previousSibling);\n          }\n          else\n          {\n            setCollapsedBefore(s, n.parentNode);\n          }\n        }\n        else\n        {\n          moveToElementText(s, n);\n          // work around for issue that caret at beginning of line\n          // somehow ends up at end of previous line\n          if (s.move('character', 1))\n          {\n            s.move('character', -1);\n          }\n          s.collapse(true); // to start\n        }\n      }\n\n      function setCollapsedAfter(s, n)\n      {\n        // s is an IE TextRange, n is a magicdom node\n        if (isNodeText(n))\n        {\n          // can't use end of container when no nextSibling (could be on next line),\n          // so use previousSibling or start of container and move forward.\n          setCollapsedBefore(s, n);\n          s.move(\"character\", n.nodeValue.length);\n        }\n        else\n        {\n          moveToElementText(s, n);\n          s.collapse(false); // to end\n        }\n      }\n\n      function getPointRange(point)\n      {\n        var s = newRange();\n        var n = point.node;\n        if (isNodeText(n))\n        {\n          setCollapsedBefore(s, n);\n          s.move(\"character\", point.index);\n        }\n        else if (point.index === 0)\n        {\n          setCollapsedBefore(s, n);\n        }\n        else\n        {\n          setCollapsedAfter(s, n);\n        }\n        return s;\n      }\n\n      if (selection)\n      {\n        if (!hasIESelection())\n        {\n          return; // don't steal focus\n        }\n\n        var startPoint = copyPoint(selection.startPoint);\n        var endPoint = copyPoint(selection.endPoint);\n\n        // fix issue where selection can't be extended past end of line\n        // with shift-rightarrow or shift-downarrow\n        if (endPoint.index == endPoint.maxIndex && endPoint.node.nextSibling)\n        {\n          endPoint.node = endPoint.node.nextSibling;\n          endPoint.index = 0;\n          endPoint.maxIndex = nodeMaxIndex(endPoint.node);\n        }\n        var range = getPointRange(startPoint);\n        range.setEndPoint(\"EndToEnd\", getPointRange(endPoint));\n\n        // setting the selection in IE causes everything to scroll\n        // so that the selection is visible.  if setting the selection\n        // definitely accomplishes nothing, don't do it.\n\n\n        function isEqualToDocumentSelection(rng)\n        {\n          var browserSelection;\n          try\n          {\n            browserSelection = doc.selection;\n          }\n          catch (e)\n          {}\n          if (!browserSelection) return false;\n          var rng2 = browserSelection.createRange();\n          if (rng2.parentElement().ownerDocument != doc) return false;\n          if (rng.compareEndPoints(\"StartToStart\", rng2) !== 0) return false;\n          if (rng.compareEndPoints(\"EndToEnd\", rng2) !== 0) return false;\n          return true;\n        }\n        if (!isEqualToDocumentSelection(range))\n        {\n          //dmesg(toSource(selection));\n          //dmesg(escapeHTML(doc.body.innerHTML));\n          range.select();\n        }\n      }\n      else\n      {\n        try\n        {\n          doc.selection.empty();\n        }\n        catch (e)\n        {}\n      }\n    }\n    else\n    {\n      // non-IE browser\n      var isCollapsed;\n\n      function pointToRangeBound(pt)\n      {\n        var p = copyPoint(pt);\n        // Make sure Firefox cursor is deep enough; fixes cursor jumping when at top level,\n        // and also problem where cut/copy of a whole line selected with fake arrow-keys\n        // copies the next line too.\n        if (isCollapsed)\n        {\n          function diveDeep()\n          {\n            while (p.node.childNodes.length > 0)\n            {\n              //&& (p.node == root || p.node.parentNode == root)) {\n              if (p.index === 0)\n              {\n                p.node = p.node.firstChild;\n                p.maxIndex = nodeMaxIndex(p.node);\n              }\n              else if (p.index == p.maxIndex)\n              {\n                p.node = p.node.lastChild;\n                p.maxIndex = nodeMaxIndex(p.node);\n                p.index = p.maxIndex;\n              }\n              else break;\n            }\n          }\n          // now fix problem where cursor at end of text node at end of span-like element\n          // with background doesn't seem to show up...\n          if (isNodeText(p.node) && p.index == p.maxIndex)\n          {\n            var n = p.node;\n            while ((!n.nextSibling) && (n != root) && (n.parentNode != root))\n            {\n              n = n.parentNode;\n            }\n            if (n.nextSibling && (!((typeof n.nextSibling.tagName) == \"string\" && n.nextSibling.tagName.toLowerCase() == \"br\")) && (n != p.node) && (n != root) && (n.parentNode != root))\n            {\n              // found a parent, go to next node and dive in\n              p.node = n.nextSibling;\n              p.maxIndex = nodeMaxIndex(p.node);\n              p.index = 0;\n              diveDeep();\n            }\n          }\n          // try to make sure insertion point is styled;\n          // also fixes other FF problems\n          if (!isNodeText(p.node))\n          {\n            diveDeep();\n          }\n        }\n        if (isNodeText(p.node))\n        {\n          return {\n            container: p.node,\n            offset: p.index\n          };\n        }\n        else\n        {\n          // p.index in {0,1}\n          return {\n            container: p.node.parentNode,\n            offset: childIndex(p.node) + p.index\n          };\n        }\n      }\n      var browserSelection = window.getSelection();\n      if (browserSelection)\n      {\n        browserSelection.removeAllRanges();\n        if (selection)\n        {\n          isCollapsed = (selection.startPoint.node === selection.endPoint.node && selection.startPoint.index === selection.endPoint.index);\n          var start = pointToRangeBound(selection.startPoint);\n          var end = pointToRangeBound(selection.endPoint);\n\n          if ((!isCollapsed) && selection.focusAtStart && browserSelection.collapse && browserSelection.extend)\n          {\n            // can handle \"backwards\"-oriented selection, shift-arrow-keys move start\n            // of selection\n            browserSelection.collapse(end.container, end.offset);\n            //console.trace();\n            //console.log(htmlPrettyEscape(rep.alltext));\n            //console.log(\"%o %o\", rep.selStart, rep.selEnd);\n            //console.log(\"%o %d\", start.container, start.offset);\n            browserSelection.extend(start.container, start.offset);\n          }\n          else\n          {\n            var range = doc.createRange();\n            range.setStart(start.container, start.offset);\n            range.setEnd(end.container, end.offset);\n            browserSelection.removeAllRanges();\n            browserSelection.addRange(range);\n          }\n        }\n      }\n    }\n  }\n\n  function childIndex(n)\n  {\n    var idx = 0;\n    while (n.previousSibling)\n    {\n      idx++;\n      n = n.previousSibling;\n    }\n    return idx;\n  }\n\n  function fixView()\n  {\n    // calling this method repeatedly should be fast\n    if (getInnerWidth() === 0 || getInnerHeight() === 0)\n    {\n      return;\n    }\n\n    function setIfNecessary(obj, prop, value)\n    {\n      if (obj[prop] != value)\n      {\n        obj[prop] = value;\n      }\n    }\n\n    var lineNumberWidth = sideDiv.firstChild.offsetWidth;\n    var newSideDivWidth = lineNumberWidth + LINE_NUMBER_PADDING_LEFT;\n    if (newSideDivWidth < MIN_LINEDIV_WIDTH) newSideDivWidth = MIN_LINEDIV_WIDTH;\n    iframePadLeft = EDIT_BODY_PADDING_LEFT;\n    if (hasLineNumbers) iframePadLeft += newSideDivWidth + LINE_NUMBER_PADDING_RIGHT;\n    setIfNecessary(iframe.style, \"left\", iframePadLeft + \"px\");\n    setIfNecessary(sideDiv.style, \"width\", newSideDivWidth + \"px\");\n\n    for (var i = 0; i < 2; i++)\n    {\n      var newHeight = root.clientHeight;\n      var newWidth = (browser.msie ? root.createTextRange().boundingWidth : root.clientWidth);\n      var viewHeight = getInnerHeight() - iframePadBottom - iframePadTop;\n      var viewWidth = getInnerWidth() - iframePadLeft - iframePadRight;\n      if (newHeight < viewHeight)\n      {\n        newHeight = viewHeight;\n        if (browser.msie) setIfNecessary(outerWin.document.documentElement.style, 'overflowY', 'auto');\n      }\n      else\n      {\n        if (browser.msie) setIfNecessary(outerWin.document.documentElement.style, 'overflowY', 'scroll');\n      }\n      if (doesWrap)\n      {\n        newWidth = viewWidth;\n      }\n      else\n      {\n        if (newWidth < viewWidth) newWidth = viewWidth;\n      }\n      setIfNecessary(iframe.style, \"height\", newHeight + \"px\");\n      setIfNecessary(iframe.style, \"width\", newWidth + \"px\");\n      setIfNecessary(sideDiv.style, \"height\", newHeight + \"px\");\n    }\n    if (browser.firefox)\n    {\n      if (!doesWrap)\n      {\n        // the body:display:table-cell hack makes mozilla do scrolling\n        // correctly by shrinking the <body> to fit around its content,\n        // but mozilla won't act on clicks below the body.  We keep the\n        // style.height property set to the viewport height (editor height\n        // not including scrollbar), so it will never shrink so that part of\n        // the editor isn't clickable.\n        var body = root;\n        var styleHeight = viewHeight + \"px\";\n        setIfNecessary(body.style, \"height\", styleHeight);\n      }\n      else\n      {\n        setIfNecessary(root.style, \"height\", \"\");\n      }\n    }\n    // if near edge, scroll to edge\n    var scrollX = getScrollX();\n    var scrollY = getScrollY();\n    var win = outerWin;\n    var r = 20;\n\n    enforceEditability();\n\n    $(sideDiv).addClass('sidedivdelayed');\n  }\n\n  function getScrollXY()\n  {\n    var win = outerWin;\n    var odoc = outerWin.document;\n    if (typeof(win.pageYOffset) == \"number\")\n    {\n      return {\n        x: win.pageXOffset,\n        y: win.pageYOffset\n      };\n    }\n    var docel = odoc.documentElement;\n    if (docel && typeof(docel.scrollTop) == \"number\")\n    {\n      return {\n        x: docel.scrollLeft,\n        y: docel.scrollTop\n      };\n    }\n  }\n\n  function getScrollX()\n  {\n    return getScrollXY().x;\n  }\n\n  function getScrollY()\n  {\n    return getScrollXY().y;\n  }\n\n  function setScrollX(x)\n  {\n    outerWin.scrollTo(x, getScrollY());\n  }\n\n  function setScrollY(y)\n  {\n    outerWin.scrollTo(getScrollX(), y);\n  }\n\n  function setScrollXY(x, y)\n  {\n    outerWin.scrollTo(x, y);\n  }\n\n  var _teardownActions = [];\n\n  function teardown()\n  {\n    _.each(_teardownActions, function(a)\n    {\n      a();\n    });\n  }\n\n  function setDesignMode(newVal)\n  {\n    try\n    {\n      function setIfNecessary(target, prop, val)\n      {\n        if (String(target[prop]).toLowerCase() != val)\n        {\n          target[prop] = val;\n          return true;\n        }\n        return false;\n      }\n      if (browser.msie || browser.safari)\n      {\n        setIfNecessary(root, 'contentEditable', (newVal ? 'true' : 'false'));\n      }\n      else\n      {\n        var wasSet = setIfNecessary(doc, 'designMode', (newVal ? 'on' : 'off'));\n        if (wasSet && newVal && browser.opera)\n        {\n          // turning on designMode clears event handlers\n          bindTheEventHandlers();\n        }\n      }\n      return true;\n    }\n    catch (e)\n    {\n      return false;\n    }\n  }\n\n  var iePastedLines = null;\n\n  function handleIEPaste(evt)\n  {\n    // Pasting in IE loses blank lines in a way that loses information;\n    // \"one\\n\\ntwo\\nthree\" becomes \"<p>one</p><p>two</p><p>three</p>\",\n    // which becomes \"one\\ntwo\\nthree\".  We can get the correct text\n    // from the clipboard directly, but we still have to let the paste\n    // happen to get the style information.\n    var clipText = window.clipboardData && window.clipboardData.getData(\"Text\");\n    if (clipText && doc.selection)\n    {\n      // this \"paste\" event seems to mess with the selection whether we try to\n      // stop it or not, so can't really do document-level manipulation now\n      // or in an idle call-stack.  instead, use IE native manipulation\n      //function escapeLine(txt) {\n      //return processSpaces(escapeHTML(textify(txt)));\n      //}\n      //var newHTML = map(clipText.replace(/\\r/g,'').split('\\n'), escapeLine).join('<br>');\n      //doc.selection.createRange().pasteHTML(newHTML);\n      //evt.preventDefault();\n      //iePastedLines = map(clipText.replace(/\\r/g,'').split('\\n'), textify);\n    }\n  }\n\n\n  var inInternationalComposition = false;\n  function handleCompositionEvent(evt)\n  {\n    // international input events, fired in FF3, at least;  allow e.g. Japanese input\n    if (evt.type == \"compositionstart\")\n    {\n      inInternationalComposition = true;\n    }\n    else if (evt.type == \"compositionend\")\n    {\n      inInternationalComposition = false;\n    }\n  }\n\n  editorInfo.ace_getInInternationalComposition = function ()\n  {\n    return inInternationalComposition;\n  }\n\n  function bindTheEventHandlers()\n  {\n    $(document).on(\"keydown\", handleKeyEvent);\n    $(document).on(\"keypress\", handleKeyEvent);\n    $(document).on(\"keyup\", handleKeyEvent);\n    $(document).on(\"click\", handleClick);\n\n    // Disabled: https://github.com/ether/etherpad-lite/issues/2546\n    // Will break OL re-numbering: https://github.com/ether/etherpad-lite/pull/2533\n    // $(document).on(\"cut\", handleCut); \n\n    $(root).on(\"blur\", handleBlur);\n    if (browser.msie)\n    {\n      $(document).on(\"click\", handleIEOuterClick);\n    }\n    if (browser.msie) $(root).on(\"paste\", handleIEPaste);\n\n    // Don't paste on middle click of links\n    $(root).on(\"paste\", function(e){\n      // TODO: this breaks pasting strings into URLS when using \n      // Control C and Control V -- the Event is never available\n      // here.. :(\n      if(e.target.a || e.target.localName === \"a\"){\n        e.preventDefault();\n      }\n    })\n\n    // CompositionEvent is not implemented below IE version 8\n    if ( !(browser.msie && parseInt(browser.version <= 9)) && document.documentElement)\n    {\n      $(document.documentElement).on(\"compositionstart\", handleCompositionEvent);\n      $(document.documentElement).on(\"compositionend\", handleCompositionEvent);\n    }\n  }\n\n  function handleIEOuterClick(evt)\n  {\n    if ((evt.target.tagName || '').toLowerCase() != \"html\")\n    {\n      return;\n    }\n    if (!(evt.pageY > root.clientHeight))\n    {\n      return;\n    }\n\n    // click below the body\n    inCallStackIfNecessary(\"handleOuterClick\", function()\n    {\n      // put caret at bottom of doc\n      fastIncorp(11);\n      if (isCaret())\n      { // don't interfere with drag\n        var lastLine = rep.lines.length() - 1;\n        var lastCol = rep.lines.atIndex(lastLine).text.length;\n        performSelectionChange([lastLine, lastCol], [lastLine, lastCol]);\n      }\n    });\n  }\n\n  function getClassArray(elem, optFilter)\n  {\n    var bodyClasses = [];\n    (elem.className || '').replace(/\\S+/g, function(c)\n    {\n      if ((!optFilter) || (optFilter(c)))\n      {\n        bodyClasses.push(c);\n      }\n    });\n    return bodyClasses;\n  }\n\n  function setClassArray(elem, array)\n  {\n    elem.className = array.join(' ');\n  }\n\n  function setClassPresence(elem, className, present)\n  {\n    if (present) $(elem).addClass(className);\n    else $(elem).removeClass(className);\n  }\n\n  function focus()\n  {\n    window.focus();\n  }\n\n  function handleBlur(evt)\n  {\n    if (browser.msie)\n    {\n      // a fix: in IE, clicking on a control like a button outside the\n      // iframe can \"blur\" the editor, causing it to stop getting\n      // events, though typing still affects it(!).\n      setSelection(null);\n    }\n  }\n\n  function getSelectionPointX(point)\n  {\n    // doesn't work in wrap-mode\n    var node = point.node;\n    var index = point.index;\n\n    function leftOf(n)\n    {\n      return n.offsetLeft;\n    }\n\n    function rightOf(n)\n    {\n      return n.offsetLeft + n.offsetWidth;\n    }\n    if (!isNodeText(node))\n    {\n      if (index === 0) return leftOf(node);\n      else return rightOf(node);\n    }\n    else\n    {\n      // we can get bounds of element nodes, so look for those.\n      // allow consecutive text nodes for robustness.\n      var charsToLeft = index;\n      var charsToRight = node.nodeValue.length - index;\n      var n;\n      for (n = node.previousSibling; n && isNodeText(n); n = n.previousSibling)\n      charsToLeft += n.nodeValue;\n      var leftEdge = (n ? rightOf(n) : leftOf(node.parentNode));\n      for (n = node.nextSibling; n && isNodeText(n); n = n.nextSibling)\n      charsToRight += n.nodeValue;\n      var rightEdge = (n ? leftOf(n) : rightOf(node.parentNode));\n      var frac = (charsToLeft / (charsToLeft + charsToRight));\n      var pixLoc = leftEdge + frac * (rightEdge - leftEdge);\n      return Math.round(pixLoc);\n    }\n  }\n\n  function getPageHeight()\n  {\n    var win = outerWin;\n    var odoc = win.document;\n    if (win.innerHeight && win.scrollMaxY) return win.innerHeight + win.scrollMaxY;\n    else if (odoc.body.scrollHeight > odoc.body.offsetHeight) return odoc.body.scrollHeight;\n    else return odoc.body.offsetHeight;\n  }\n\n  function getPageWidth()\n  {\n    var win = outerWin;\n    var odoc = win.document;\n    if (win.innerWidth && win.scrollMaxX) return win.innerWidth + win.scrollMaxX;\n    else if (odoc.body.scrollWidth > odoc.body.offsetWidth) return odoc.body.scrollWidth;\n    else return odoc.body.offsetWidth;\n  }\n\n  function getInnerHeight()\n  {\n    var win = outerWin;\n    var odoc = win.document;\n    var h;\n    if (browser.opera) h = win.innerHeight;\n    else h = odoc.documentElement.clientHeight;\n    if (h) return h;\n\n    // deal with case where iframe is hidden, hope that\n    // style.height of iframe container is set in px\n    return Number(editorInfo.frame.parentNode.style.height.replace(/[^0-9]/g, '') || 0);\n  }\n\n  function getInnerWidth()\n  {\n    var win = outerWin;\n    var odoc = win.document;\n    return odoc.documentElement.clientWidth;\n  }\n\n  function scrollNodeVerticallyIntoView(node)\n  {\n    // requires element (non-text) node;\n    // if node extends above top of viewport or below bottom of viewport (or top of scrollbar),\n    // scroll it the minimum distance needed to be completely in view.\n    var win = outerWin;\n    var odoc = outerWin.document;\n    var distBelowTop = node.offsetTop + iframePadTop - win.scrollY;\n    var distAboveBottom = win.scrollY + getInnerHeight() - (node.offsetTop + iframePadTop + node.offsetHeight);\n\n    if (distBelowTop < 0)\n    {\n      win.scrollBy(0, distBelowTop);\n    }\n    else if (distAboveBottom < 0)\n    {\n      win.scrollBy(0, -distAboveBottom);\n    }\n  }\n\n  function scrollXHorizontallyIntoView(pixelX)\n  {\n    var win = outerWin;\n    var odoc = outerWin.document;\n    pixelX += iframePadLeft;\n    var distInsideLeft = pixelX - win.scrollX;\n    var distInsideRight = win.scrollX + getInnerWidth() - pixelX;\n    if (distInsideLeft < 0)\n    {\n      win.scrollBy(distInsideLeft, 0);\n    }\n    else if (distInsideRight < 0)\n    {\n      win.scrollBy(-distInsideRight + 1, 0);\n    }\n  }\n\n  function scrollSelectionIntoView()\n  {\n    if (!rep.selStart) return;\n    fixView();\n    var focusLine = (rep.selFocusAtStart ? rep.selStart[0] : rep.selEnd[0]);\n    scrollNodeVerticallyIntoView(rep.lines.atIndex(focusLine).lineNode);\n    if (!doesWrap)\n    {\n      var browserSelection = getSelection();\n      if (browserSelection)\n      {\n        var focusPoint = (browserSelection.focusAtStart ? browserSelection.startPoint : browserSelection.endPoint);\n        var selectionPointX = getSelectionPointX(focusPoint);\n        scrollXHorizontallyIntoView(selectionPointX);\n        fixView();\n      }\n    }\n  }\n\n  var listAttributeName = 'list';\n\n  function getLineListType(lineNum)\n  {\n    return documentAttributeManager.getAttributeOnLine(lineNum, listAttributeName)\n  }\n\n  function setLineListType(lineNum, listType)\n  {\n    if(listType == ''){\n      documentAttributeManager.removeAttributeOnLine(lineNum, listAttributeName);\n      documentAttributeManager.removeAttributeOnLine(lineNum, 'start');\n    }else{\n      documentAttributeManager.setAttributeOnLine(lineNum, listAttributeName, listType);\n    }\n\n    //if the list has been removed, it is necessary to renumber\n    //starting from the *next* line because the list may have been\n    //separated. If it returns null, it means that the list was not cut, try\n    //from the current one.\n    if(renumberList(lineNum+1)==null)\n    {\n      renumberList(lineNum);\n    }\n  }\n\n  function renumberList(lineNum){\n    //1-check we are in a list\n    var type = getLineListType(lineNum);\n    if(!type)\n    {\n      return null;\n    }\n    type = /([a-z]+)[0-9]+/.exec(type);\n    if(type[1] == \"indent\")\n    {\n      return null;\n    }\n\n    //2-find the first line of the list\n    while(lineNum-1 >= 0 && (type=getLineListType(lineNum-1)))\n    {\n      type = /([a-z]+)[0-9]+/.exec(type);\n      if(type[1] == \"indent\")\n        break;\n      lineNum--;\n    }\n\n    //3-renumber every list item of the same level from the beginning, level 1\n    //IMPORTANT: never skip a level because there imbrication may be arbitrary\n    var builder = Changeset.builder(rep.lines.totalWidth());\n    var loc = [0,0];\n    function applyNumberList(line, level)\n    {\n      //init\n      var position = 1;\n      var curLevel = level;\n      var listType;\n      //loop over the lines\n      while(listType = getLineListType(line))\n      {\n        //apply new num\n        listType = /([a-z]+)([0-9]+)/.exec(listType);\n        curLevel = Number(listType[2]);\n        if(isNaN(curLevel) || listType[0] == \"indent\")\n        {\n          return line;\n        }\n        else if(curLevel == level)\n        {\n          ChangesetUtils.buildKeepRange(rep, builder, loc, (loc = [line, 0]));\n          ChangesetUtils.buildKeepRange(rep, builder, loc, (loc = [line, 1]), [\n            ['start', position]\n          ], rep.apool);\n\n          position++;\n          line++;\n        }\n        else if(curLevel < level)\n        {\n          return line;//back to parent\n        }\n        else\n        {\n          line = applyNumberList(line, level+1);//recursive call\n        }\n      }\n      return line;\n    }\n\n    applyNumberList(lineNum, 1);\n    var cs = builder.toString();\n    if (!Changeset.isIdentity(cs))\n    {\n      performDocumentApplyChangeset(cs);\n    }\n\n    //4-apply the modifications\n\n\n  }\n\n\n  function doInsertList(type)\n  {\n    if (!(rep.selStart && rep.selEnd))\n    {\n      return;\n    }\n\n    var firstLine, lastLine;\n    firstLine = rep.selStart[0];\n    lastLine = Math.max(firstLine, rep.selEnd[0] - ((rep.selEnd[1] === 0) ? 1 : 0));\n\n    var allLinesAreList = true;\n    for (var n = firstLine; n <= lastLine; n++)\n    {\n      var listType = getLineListType(n);\n      if (!listType || listType.slice(0, type.length) != type)\n      {\n        allLinesAreList = false;\n        break;\n      }\n    }\n\n    var mods = [];\n    for (var n = firstLine; n <= lastLine; n++)\n    {\n      var t = '';\n      var level = 0;\n      var listType = /([a-z]+)([0-9]+)/.exec(getLineListType(n));\n      if (listType)\n      {\n        t = listType[1];\n        level = Number(listType[2]);\n      }\n      var t = getLineListType(n);\n      mods.push([n, allLinesAreList ? 'indent' + level : (t ? type + level : type + '1')]);\n    }\n\n    _.each(mods, function(mod){\n      setLineListType(mod[0], mod[1]);\n    });\n  }\n\n  function doInsertUnorderedList(){\n    doInsertList('bullet');\n  }\n  function doInsertOrderedList(){\n    doInsertList('number');\n  }\n  editorInfo.ace_doInsertUnorderedList = doInsertUnorderedList;\n  editorInfo.ace_doInsertOrderedList = doInsertOrderedList;\n\n  var lineNumbersShown;\n  var sideDivInner;\n\n  function initLineNumbers()\n  {\n    lineNumbersShown = 1;\n    sideDiv.innerHTML = '<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"right\"><tr><td id=\"sidedivinner\"><div>1</div></td></tr></table>';\n    sideDivInner = outerWin.document.getElementById(\"sidedivinner\");\n  }\n\n  function updateLineNumbers()\n  {\n    var newNumLines = rep.lines.length();\n    if (newNumLines < 1) newNumLines = 1;\n    //update height of all current line numbers\n\n    var a = sideDivInner.firstChild;\n    var b = doc.body.firstChild;\n    var n = 0;\n\n    if (currentCallStack && currentCallStack.domClean)\n    {\n\n      while (a && b)\n      {\n        if(n > lineNumbersShown) //all updated, break\n        break;\n        var h = (b.clientHeight || b.offsetHeight);\n        if (b.nextSibling)\n        {\n          // when text is zoomed in mozilla, divs have fractional\n          // heights (though the properties are always integers)\n          // and the line-numbers don't line up unless we pay\n          // attention to where the divs are actually placed...\n          // (also: padding on TTs/SPANs in IE...)\n          h = b.nextSibling.offsetTop - b.offsetTop;\n        }\n        if (h)\n        {\n          var hpx = h + \"px\";\n          if (a.style.height != hpx) {\n            a.style.height = hpx;\n          }\n        }\n        a = a.nextSibling;\n        b = b.nextSibling;\n        n++;\n      }\n    }\n\n    if (newNumLines != lineNumbersShown)\n    {\n      var container = sideDivInner;\n      var odoc = outerWin.document;\n      var fragment = odoc.createDocumentFragment();\n      while (lineNumbersShown < newNumLines)\n      {\n        lineNumbersShown++;\n        var n = lineNumbersShown;\n        var div = odoc.createElement(\"DIV\");\n        //calculate height for new line number\n        if(b){\n          var h = (b.clientHeight || b.offsetHeight);\n\n          if (b.nextSibling){\n            h = b.nextSibling.offsetTop - b.offsetTop;\n          }\n        }\n\n        if(h){ // apply style to div\n          div.style.height = h +\"px\";\n        }\n\n        div.appendChild(odoc.createTextNode(String(n)));\n        fragment.appendChild(div);\n        if(b){\n          b = b.nextSibling;\n        }\n      }\n\n      container.appendChild(fragment);\n      while (lineNumbersShown > newNumLines)\n      {\n        container.removeChild(container.lastChild);\n        lineNumbersShown--;\n      }\n    }\n  }\n\n\n  // Init documentAttributeManager\n  documentAttributeManager = new AttributeManager(rep, performDocumentApplyChangeset);\n  editorInfo.ace_performDocumentApplyAttributesToRange = function () {\n    return documentAttributeManager.setAttributesOnRange.apply(documentAttributeManager, arguments);\n  };\n\n  this.init = function () {\n    $(document).ready(function(){\n      doc = document; // defined as a var in scope outside\n      inCallStack(\"setup\", function()\n      {\n        var body = doc.getElementById(\"innerdocbody\");\n        root = body; // defined as a var in scope outside\n        if (browser.firefox) $(root).addClass(\"mozilla\");\n        if (browser.safari) $(root).addClass(\"safari\");\n        if (browser.msie) $(root).addClass(\"msie\");\n        setClassPresence(root, \"authorColors\", true);\n        setClassPresence(root, \"doesWrap\", doesWrap);\n\n        initDynamicCSS();\n\n        enforceEditability();\n\n        // set up dom and rep\n        while (root.firstChild) root.removeChild(root.firstChild);\n        var oneEntry = createDomLineEntry(\"\");\n        doRepLineSplice(0, rep.lines.length(), [oneEntry]);\n        insertDomLines(null, [oneEntry.domInfo], null);\n        rep.alines = Changeset.splitAttributionLines(\n        Changeset.makeAttribution(\"\\n\"), \"\\n\");\n\n        bindTheEventHandlers();\n\n      });\n\n      hooks.callAll('aceInitialized', {\n        editorInfo: editorInfo,\n        rep: rep,\n        documentAttributeManager: documentAttributeManager\n      });\n\n      scheduler.setTimeout(function()\n      {\n        parent.readyFunc(); // defined in code that sets up the inner iframe\n      }, 0);\n\n      isSetUp = true;\n    });\n  }\n\n}\n\nexports.init = function () {\n  var editor = new Ace2Inner()\n  editor.init();\n};\n\n}\n, \"ep_etherpad-lite/static/js/browser.js\": function (require, exports, module) {\n/*!\n  * Bowser - a browser detector\n  * https://github.com/ded/bowser\n  * MIT License | (c) Dustin Diaz 2014\n  */\n\n!function (name, definition) {\n  if (typeof module != 'undefined' && module.exports) module.exports['browser'] = definition()\n  else if (typeof define == 'function' && define.amd) define(definition)\n  else this[name] = definition()\n}('bowser', function () {\n  /**\n    * See useragents.js for examples of navigator.userAgent\n    */\n\n  var t = true\n\n  function detect(ua) {\n\n    function getFirstMatch(regex) {\n      var match = ua.match(regex);\n      return (match && match.length > 1 && match[1]) || '';\n    }\n\n    var iosdevice = getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase()\n      , likeAndroid = /like android/i.test(ua)\n      , android = !likeAndroid && /android/i.test(ua)\n      , versionIdentifier = getFirstMatch(/version\\/(\\d+(\\.\\d+)?)/i)\n      , tablet = /tablet/i.test(ua)\n      , mobile = !tablet && /[^-]mobi/i.test(ua)\n      , result\n\n    if (/opera|opr/i.test(ua)) {\n      result = {\n        name: 'Opera'\n      , opera: t\n      , version: versionIdentifier || getFirstMatch(/(?:opera|opr)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/windows phone/i.test(ua)) {\n      result = {\n        name: 'Windows Phone'\n      , windowsphone: t\n      , msie: t\n      , version: getFirstMatch(/iemobile\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/msie|trident/i.test(ua)) {\n      result = {\n        name: 'Internet Explorer'\n      , msie: t\n      , version: getFirstMatch(/(?:msie |rv:)(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/chrome|crios|crmo/i.test(ua)) {\n      result = {\n        name: 'Chrome'\n      , chrome: t\n      , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (iosdevice) {\n      result = {\n        name : iosdevice == 'iphone' ? 'iPhone' : iosdevice == 'ipad' ? 'iPad' : 'iPod'\n      }\n      // WTF: version is not part of user agent in web apps\n      if (versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    }\n    else if (/sailfish/i.test(ua)) {\n      result = {\n        name: 'Sailfish'\n      , sailfish: t\n      , version: getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/seamonkey\\//i.test(ua)) {\n      result = {\n        name: 'SeaMonkey'\n      , seamonkey: t\n      , version: getFirstMatch(/seamonkey\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/firefox|iceweasel/i.test(ua)) {\n      result = {\n        name: 'Firefox'\n      , firefox: t\n      , version: getFirstMatch(/(?:firefox|iceweasel)[ \\/](\\d+(\\.\\d+)?)/i)\n      }\n      if (/\\((mobile|tablet);[^\\)]*rv:[\\d\\.]+\\)/i.test(ua)) {\n        result.firefoxos = t\n      }\n    }\n    else if (/silk/i.test(ua)) {\n      result =  {\n        name: 'Amazon Silk'\n      , silk: t\n      , version : getFirstMatch(/silk\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (android) {\n      result = {\n        name: 'Android'\n      , version: versionIdentifier\n      }\n    }\n    else if (/phantom/i.test(ua)) {\n      result = {\n        name: 'PhantomJS'\n      , phantom: t\n      , version: getFirstMatch(/phantomjs\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/blackberry|\\bbb\\d+/i.test(ua) || /rim\\stablet/i.test(ua)) {\n      result = {\n        name: 'BlackBerry'\n      , blackberry: t\n      , version: versionIdentifier || getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/(web|hpw)os/i.test(ua)) {\n      result = {\n        name: 'WebOS'\n      , webos: t\n      , version: versionIdentifier || getFirstMatch(/w(?:eb)?osbrowser\\/(\\d+(\\.\\d+)?)/i)\n      };\n      /touchpad\\//i.test(ua) && (result.touchpad = t)\n    }\n    else if (/bada/i.test(ua)) {\n      result = {\n        name: 'Bada'\n      , bada: t\n      , version: getFirstMatch(/dolfin\\/(\\d+(\\.\\d+)?)/i)\n      };\n    }\n    else if (/tizen/i.test(ua)) {\n      result = {\n        name: 'Tizen'\n      , tizen: t\n      , version: getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n      };\n    }\n    else if (/safari/i.test(ua)) {\n      result = {\n        name: 'Safari'\n      , safari: t\n      , version: versionIdentifier\n      }\n    }\n    else result = {}\n\n    // set webkit or gecko flag for browsers based on these engines\n    if (/(apple)?webkit/i.test(ua)) {\n      result.name = result.name || \"Webkit\"\n      result.webkit = t\n      if (!result.version && versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    } else if (!result.opera && /gecko\\//i.test(ua)) {\n      result.name = result.name || \"Gecko\"\n      result.gecko = t\n      result.version = result.version || getFirstMatch(/gecko\\/(\\d+(\\.\\d+)?)/i)\n    }\n\n    // set OS flags for platforms that have multiple browsers\n    if (android || result.silk) {\n      result.android = t\n    } else if (iosdevice) {\n      result[iosdevice] = t\n      result.ios = t\n    }\n\n    // OS version extraction\n    var osVersion = '';\n    if (iosdevice) {\n      osVersion = getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i);\n      osVersion = osVersion.replace(/[_\\s]/g, '.');\n    } else if (android) {\n      osVersion = getFirstMatch(/android[ \\/-](\\d+(\\.\\d+)*)/i);\n    } else if (result.windowsphone) {\n      osVersion = getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i);\n    } else if (result.webos) {\n      osVersion = getFirstMatch(/(?:web|hpw)os\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.blackberry) {\n      osVersion = getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i);\n    } else if (result.bada) {\n      osVersion = getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.tizen) {\n      osVersion = getFirstMatch(/tizen[\\/\\s](\\d+(\\.\\d+)*)/i);\n    }\n    if (osVersion) {\n      result.osversion = osVersion;\n    }\n\n    // device type extraction\n    var osMajorVersion = osVersion.split('.')[0];\n    if (tablet || iosdevice == 'ipad' || (android && (osMajorVersion == 3 || (osMajorVersion == 4 && !mobile))) || result.silk) {\n      result.tablet = t\n    } else if (mobile || iosdevice == 'iphone' || iosdevice == 'ipod' || android || result.blackberry || result.webos || result.bada) {\n      result.mobile = t\n    }\n\n    // Graded Browser Support\n    // http://developer.yahoo.com/yui/articles/gbs\n    if ((result.msie && result.version >= 10) ||\n        (result.chrome && result.version >= 20) ||\n        (result.firefox && result.version >= 20.0) ||\n        (result.safari && result.version >= 6) ||\n        (result.opera && result.version >= 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] >= 6) ||\n        (result.blackberry && result.version >= 10.1)\n        ) {\n      result.a = t;\n    }\n    else if ((result.msie && result.version < 10) ||\n        (result.chrome && result.version < 20) ||\n        (result.firefox && result.version < 20.0) ||\n        (result.safari && result.version < 6) ||\n        (result.opera && result.version < 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] < 6)\n        ) {\n      result.c = t\n    } else result.x = t\n\n    return result\n  }\n\n  var bowser = detect(typeof navigator !== 'undefined' ? navigator.userAgent : '')\n\n\n  /*\n   * Set our detect method to the main bowser object so we can\n   * reuse it to test other user agents.\n   * This is needed to implement future tests.\n   */\n  bowser._detect = detect;\n\n  return bowser\n});\n\n}\n, \"ep_etherpad-lite/static/js/AttributePool.js\": function (require, exports, module) {\n/**\n * This code represents the Attribute Pool Object of the original Etherpad.\n * 90% of the code is still like in the original Etherpad\n * Look at https://github.com/ether/pad/blob/master/infrastructure/ace/www/easysync2.js\n * You can find a explanation what a attribute pool is here:\n * https://github.com/ether/etherpad-lite/blob/master/doc/easysync/easysync-notes.txt\n */\n\n/*\n * Copyright 2009 Google Inc., 2011 Peter 'Pita' Martischka (Primary Technology Ltd)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*\n  An AttributePool maintains a mapping from [key,value] Pairs called\n  Attributes to Numbers (unsigened integers) and vice versa. These numbers are\n  used to reference Attributes in Changesets.\n*/\n\nvar AttributePool = function () {\n  this.numToAttrib = {}; // e.g. {0: ['foo','bar']}\n  this.attribToNum = {}; // e.g. {'foo,bar': 0}\n  this.nextNum = 0;\n};\n\nAttributePool.prototype.putAttrib = function (attrib, dontAddIfAbsent) {\n  var str = String(attrib);\n  if (str in this.attribToNum) {\n    return this.attribToNum[str];\n  }\n  if (dontAddIfAbsent) {\n    return -1;\n  }\n  var num = this.nextNum++;\n  this.attribToNum[str] = num;\n  this.numToAttrib[num] = [String(attrib[0] || ''), String(attrib[1] || '')];\n  return num;\n};\n\nAttributePool.prototype.getAttrib = function (num) {\n  var pair = this.numToAttrib[num];\n  if (!pair) {\n    return pair;\n  }\n  return [pair[0], pair[1]]; // return a mutable copy\n};\n\nAttributePool.prototype.getAttribKey = function (num) {\n  var pair = this.numToAttrib[num];\n  if (!pair) return '';\n  return pair[0];\n};\n\nAttributePool.prototype.getAttribValue = function (num) {\n  var pair = this.numToAttrib[num];\n  if (!pair) return '';\n  return pair[1];\n};\n\nAttributePool.prototype.eachAttrib = function (func) {\n  for (var n in this.numToAttrib) {\n    var pair = this.numToAttrib[n];\n    func(pair[0], pair[1]);\n  }\n};\n\nAttributePool.prototype.toJsonable = function () {\n  return {\n    numToAttrib: this.numToAttrib,\n    nextNum: this.nextNum\n  };\n};\n\nAttributePool.prototype.fromJsonable = function (obj) {\n  this.numToAttrib = obj.numToAttrib;\n  this.nextNum = obj.nextNum;\n  this.attribToNum = {};\n  for (var n in this.numToAttrib) {\n    this.attribToNum[String(this.numToAttrib[n])] = Number(n);\n  }\n  return this;\n};\n  \n\nmodule.exports = AttributePool;\n}\n, \"ep_etherpad-lite/static/js/Changeset.js\": function (require, exports, module) {\n/*\n * This is the Changeset library copied from the old Etherpad with some modifications to use it in node.js\n * Can be found in https://github.com/ether/pad/blob/master/infrastructure/ace/www/easysync2.js\n */\n\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code.\n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n/*\n * Copyright 2009 Google Inc., 2011 Peter 'Pita' Martischka (Primary Technology Ltd)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar AttributePool = require(\"./AttributePool\");\n\n/**\n * ==================== General Util Functions =======================\n */\n\n/**\n * This method is called whenever there is an error in the sync process\n * @param msg {string} Just some message\n */\nexports.error = function error(msg) {\n  var e = new Error(msg);\n  e.easysync = true;\n  throw e;\n};\n\n/**\n * This method is used for assertions with Messages \n * if assert fails, the error function is called.\n * @param b {boolean} assertion condition\n * @param msgParts {string} error to be passed if it fails\n */\nexports.assert = function assert(b, msgParts) {\n  if (!b) {\n    var msg = Array.prototype.slice.call(arguments, 1).join('');\n    exports.error(\"Failed assertion: \" + msg);\n  }\n};\n\n/**\n * Parses a number from string base 36\n * @param str {string} string of the number in base 36\n * @returns {int} number\n */\nexports.parseNum = function (str) {\n  return parseInt(str, 36);\n};\n\n/**\n * Writes a number in base 36 and puts it in a string\n * @param num {int} number\n * @returns {string} string\n */\nexports.numToString = function (num) {\n  return num.toString(36).toLowerCase();\n};\n\n/**\n * Converts stuff before $ to base 10\n * @obsolete not really used anywhere??\n * @param cs {string} the string\n * @return integer \n */\nexports.toBaseTen = function (cs) {\n  var dollarIndex = cs.indexOf('$');\n  var beforeDollar = cs.substring(0, dollarIndex);\n  var fromDollar = cs.substring(dollarIndex);\n  return beforeDollar.replace(/[0-9a-z]+/g, function (s) {\n    return String(exports.parseNum(s));\n  }) + fromDollar;\n};\n\n\n/**\n * ==================== Changeset Functions =======================\n */\n\n/**\n * returns the required length of the text before changeset \n * can be applied\n * @param cs {string} String representation of the Changeset\n */ \nexports.oldLen = function (cs) {\n  return exports.unpack(cs).oldLen;\n};\n\n/**\n * returns the length of the text after changeset is applied\n * @param cs {string} String representation of the Changeset\n */ \nexports.newLen = function (cs) {\n  return exports.unpack(cs).newLen;\n};\n\n/**\n * this function creates an iterator which decodes string changeset operations\n * @param opsStr {string} String encoding of the change operations to be performed \n * @param optStartIndex {int} from where in the string should the iterator start \n * @return {Op} type object iterator \n */\nexports.opIterator = function (opsStr, optStartIndex) {\n  //print(opsStr);\n  var regex = /((?:\\*[0-9a-z]+)*)(?:\\|([0-9a-z]+))?([-+=])([0-9a-z]+)|\\?|/g;\n  var startIndex = (optStartIndex || 0);\n  var curIndex = startIndex;\n  var prevIndex = curIndex;\n\n  function nextRegexMatch() {\n    prevIndex = curIndex;\n    var result;\n    regex.lastIndex = curIndex;\n    result = regex.exec(opsStr);\n    curIndex = regex.lastIndex;\n    if (result[0] == '?') {\n      exports.error(\"Hit error opcode in op stream\");\n    }\n  \n    return result;\n  }\n  var regexResult = nextRegexMatch();\n  var obj = exports.newOp();\n\n  function next(optObj) {\n    var op = (optObj || obj);\n    if (regexResult[0]) {\n      op.attribs = regexResult[1];\n      op.lines = exports.parseNum(regexResult[2] || 0);\n      op.opcode = regexResult[3];\n      op.chars = exports.parseNum(regexResult[4]);\n      regexResult = nextRegexMatch();\n    } else {\n      exports.clearOp(op);\n    }\n    return op;\n  }\n\n  function hasNext() {\n    return !!(regexResult[0]);\n  }\n\n  function lastIndex() {\n    return prevIndex;\n  }\n  return {\n    next: next,\n    hasNext: hasNext,\n    lastIndex: lastIndex\n  };\n};\n\n/**\n * Cleans an Op object\n * @param {Op} object to be cleared\n */\nexports.clearOp = function (op) {\n  op.opcode = '';\n  op.chars = 0;\n  op.lines = 0;\n  op.attribs = '';\n};\n\n/**\n * Creates a new Op object\n * @param optOpcode the type operation of the Op object\n */\nexports.newOp = function (optOpcode) {\n  return {\n    opcode: (optOpcode || ''),\n    chars: 0,\n    lines: 0,\n    attribs: ''\n  };\n};\n\n/**\n * Clones an Op\n * @param op Op to be cloned\n */\nexports.cloneOp = function (op) {\n  return {\n    opcode: op.opcode,\n    chars: op.chars,\n    lines: op.lines,\n    attribs: op.attribs\n  };\n};\n\n/**\n * Copies op1 to op2\n * @param op1 src Op\n * @param op2 dest Op\n */\nexports.copyOp = function (op1, op2) {\n  op2.opcode = op1.opcode;\n  op2.chars = op1.chars;\n  op2.lines = op1.lines;\n  op2.attribs = op1.attribs;\n};\n\n/**\n * Writes the Op in a string the way that changesets need it\n */\nexports.opString = function (op) {\n  // just for debugging\n  if (!op.opcode) return 'null';\n  var assem = exports.opAssembler();\n  assem.append(op);\n  return assem.toString();\n};\n\n/**\n * Used just for debugging\n */\nexports.stringOp = function (str) {\n  // just for debugging\n  return exports.opIterator(str).next();\n};\n\n/**\n * Used to check if a Changeset if valid\n * @param cs {Changeset} Changeset to be checked\n */\nexports.checkRep = function (cs) {\n  // doesn't check things that require access to attrib pool (e.g. attribute order)\n  // or original string (e.g. newline positions)\n  var unpacked = exports.unpack(cs);\n  var oldLen = unpacked.oldLen;\n  var newLen = unpacked.newLen;\n  var ops = unpacked.ops;\n  var charBank = unpacked.charBank;\n\n  var assem = exports.smartOpAssembler();\n  var oldPos = 0;\n  var calcNewLen = 0;\n  var numInserted = 0;\n  var iter = exports.opIterator(ops);\n  while (iter.hasNext()) {\n    var o = iter.next();\n    switch (o.opcode) {\n    case '=':\n      oldPos += o.chars;\n      calcNewLen += o.chars;\n      break;\n    case '-':\n      oldPos += o.chars;\n      exports.assert(oldPos <= oldLen, oldPos, \" > \", oldLen, \" in \", cs);\n      break;\n    case '+':\n      {\n        calcNewLen += o.chars;\n        numInserted += o.chars;\n        exports.assert(calcNewLen <= newLen, calcNewLen, \" > \", newLen, \" in \", cs);\n        break;\n      }\n    }\n    assem.append(o);\n  }\n\n  calcNewLen += oldLen - oldPos;\n  charBank = charBank.substring(0, numInserted);\n  while (charBank.length < numInserted) {\n    charBank += \"?\";\n  }\n\n  assem.endDocument();\n  var normalized = exports.pack(oldLen, calcNewLen, assem.toString(), charBank);\n  exports.assert(normalized == cs, 'Invalid changeset (checkRep failed)');\n\n  return cs;\n}\n\n\n/**\n * ==================== Util Functions =======================\n */\n\n/**\n * creates an object that allows you to append operations (type Op) and also\n * compresses them if possible\n */\nexports.smartOpAssembler = function () {\n  // Like opAssembler but able to produce conforming exportss\n  // from slightly looser input, at the cost of speed.\n  // Specifically:\n  // - merges consecutive operations that can be merged\n  // - strips final \"=\"\n  // - ignores 0-length changes\n  // - reorders consecutive + and - (which margingOpAssembler doesn't do)\n  var minusAssem = exports.mergingOpAssembler();\n  var plusAssem = exports.mergingOpAssembler();\n  var keepAssem = exports.mergingOpAssembler();\n  var assem = exports.stringAssembler();\n  var lastOpcode = '';\n  var lengthChange = 0;\n\n  function flushKeeps() {\n    assem.append(keepAssem.toString());\n    keepAssem.clear();\n  }\n\n  function flushPlusMinus() {\n    assem.append(minusAssem.toString());\n    minusAssem.clear();\n    assem.append(plusAssem.toString());\n    plusAssem.clear();\n  }\n\n  function append(op) {\n    if (!op.opcode) return;\n    if (!op.chars) return;\n\n    if (op.opcode == '-') {\n      if (lastOpcode == '=') {\n        flushKeeps();\n      }\n      minusAssem.append(op);\n      lengthChange -= op.chars;\n    } else if (op.opcode == '+') {\n      if (lastOpcode == '=') {\n        flushKeeps();\n      }\n      plusAssem.append(op);\n      lengthChange += op.chars;\n    } else if (op.opcode == '=') {\n      if (lastOpcode != '=') {\n        flushPlusMinus();\n      }\n      keepAssem.append(op);\n    }\n    lastOpcode = op.opcode;\n  }\n\n  function appendOpWithText(opcode, text, attribs, pool) {\n    var op = exports.newOp(opcode);\n    op.attribs = exports.makeAttribsString(opcode, attribs, pool);\n    var lastNewlinePos = text.lastIndexOf('\\n');\n    if (lastNewlinePos < 0) {\n      op.chars = text.length;\n      op.lines = 0;\n      append(op);\n    } else {\n      op.chars = lastNewlinePos + 1;\n      op.lines = text.match(/\\n/g).length;\n      append(op);\n      op.chars = text.length - (lastNewlinePos + 1);\n      op.lines = 0;\n      append(op);\n    }\n  }\n\n  function toString() {\n    flushPlusMinus();\n    flushKeeps();\n    return assem.toString();\n  }\n\n  function clear() {\n    minusAssem.clear();\n    plusAssem.clear();\n    keepAssem.clear();\n    assem.clear();\n    lengthChange = 0;\n  }\n\n  function endDocument() {\n    keepAssem.endDocument();\n  }\n\n  function getLengthChange() {\n    return lengthChange;\n  }\n\n  return {\n    append: append,\n    toString: toString,\n    clear: clear,\n    endDocument: endDocument,\n    appendOpWithText: appendOpWithText,\n    getLengthChange: getLengthChange\n  };\n};\n\n\nexports.mergingOpAssembler = function () {\n  // This assembler can be used in production; it efficiently\n  // merges consecutive operations that are mergeable, ignores\n  // no-ops, and drops final pure \"keeps\".  It does not re-order\n  // operations.\n  var assem = exports.opAssembler();\n  var bufOp = exports.newOp();\n\n  // If we get, for example, insertions [xxx\\n,yyy], those don't merge,\n  // but if we get [xxx\\n,yyy,zzz\\n], that merges to [xxx\\nyyyzzz\\n].\n  // This variable stores the length of yyy and any other newline-less\n  // ops immediately after it.\n  var bufOpAdditionalCharsAfterNewline = 0;\n\n  function flush(isEndDocument) {\n    if (bufOp.opcode) {\n      if (isEndDocument && bufOp.opcode == '=' && !bufOp.attribs) {\n        // final merged keep, leave it implicit\n      } else {\n        assem.append(bufOp);\n        if (bufOpAdditionalCharsAfterNewline) {\n          bufOp.chars = bufOpAdditionalCharsAfterNewline;\n          bufOp.lines = 0;\n          assem.append(bufOp);\n          bufOpAdditionalCharsAfterNewline = 0;\n        }\n      }\n      bufOp.opcode = '';\n    }\n  }\n\n  function append(op) {\n    if (op.chars > 0) {\n      if (bufOp.opcode == op.opcode && bufOp.attribs == op.attribs) {\n        if (op.lines > 0) {\n          // bufOp and additional chars are all mergeable into a multi-line op\n          bufOp.chars += bufOpAdditionalCharsAfterNewline + op.chars;\n          bufOp.lines += op.lines;\n          bufOpAdditionalCharsAfterNewline = 0;\n        } else if (bufOp.lines == 0) {\n          // both bufOp and op are in-line\n          bufOp.chars += op.chars;\n        } else {\n          // append in-line text to multi-line bufOp\n          bufOpAdditionalCharsAfterNewline += op.chars;\n        }\n      } else {\n        flush();\n        exports.copyOp(op, bufOp);\n      }\n    }\n  }\n\n  function endDocument() {\n    flush(true);\n  }\n\n  function toString() {\n    flush();\n    return assem.toString();\n  }\n\n  function clear() {\n    assem.clear();\n    exports.clearOp(bufOp);\n  }\n  return {\n    append: append,\n    toString: toString,\n    clear: clear,\n    endDocument: endDocument\n  };\n};\n\n\n\nexports.opAssembler = function () {\n  var pieces = [];\n  // this function allows op to be mutated later (doesn't keep a ref)\n\n  function append(op) {\n    pieces.push(op.attribs);\n    if (op.lines) {\n      pieces.push('|', exports.numToString(op.lines));\n    }\n    pieces.push(op.opcode);\n    pieces.push(exports.numToString(op.chars));\n  }\n\n  function toString() {\n    return pieces.join('');\n  }\n\n  function clear() {\n    pieces.length = 0;\n  }\n  return {\n    append: append,\n    toString: toString,\n    clear: clear\n  };\n};\n\n/**\n * A custom made String Iterator\n * @param str {string} String to be iterated over\n */ \nexports.stringIterator = function (str) {\n  var curIndex = 0;\n  // newLines is the number of \\n between curIndex and str.length\n  var newLines = str.split(\"\\n\").length - 1\n  function getnewLines(){\n    return newLines\n  }\n\n  function assertRemaining(n) {\n    exports.assert(n <= remaining(), \"!(\", n, \" <= \", remaining(), \")\");\n  }\n\n  function take(n) {\n    assertRemaining(n);\n    var s = str.substr(curIndex, n);\n    newLines -= s.split(\"\\n\").length - 1\n    curIndex += n;\n    return s;\n  }\n\n  function peek(n) {\n    assertRemaining(n);\n    var s = str.substr(curIndex, n);\n    return s;\n  }\n\n  function skip(n) {\n    assertRemaining(n);\n    curIndex += n;\n  }\n\n  function remaining() {\n    return str.length - curIndex;\n  }\n  return {\n    take: take,\n    skip: skip,\n    remaining: remaining,\n    peek: peek,\n    newlines: getnewLines\n  };\n};\n\n/**\n * A custom made StringBuffer \n */\nexports.stringAssembler = function () {\n  var pieces = [];\n\n  function append(x) {\n    pieces.push(String(x));\n  }\n\n  function toString() {\n    return pieces.join('');\n  }\n  return {\n    append: append,\n    toString: toString\n  };\n};\n\n/**\n * This class allows to iterate and modify texts which have several lines\n * It is used for applying Changesets on arrays of lines\n * Note from prev docs: \"lines\" need not be an array as long as it supports certain calls (lines_foo inside).\n */\nexports.textLinesMutator = function (lines) {\n  // Mutates lines, an array of strings, in place.\n  // Mutation operations have the same constraints as exports operations\n  // with respect to newlines, but not the other additional constraints\n  // (i.e. ins/del ordering, forbidden no-ops, non-mergeability, final newline).\n  // Can be used to mutate lists of strings where the last char of each string\n  // is not actually a newline, but for the purposes of N and L values,\n  // the caller should pretend it is, and for things to work right in that case, the input\n  // to insert() should be a single line with no newlines.\n  var curSplice = [0, 0];\n  var inSplice = false;\n  // position in document after curSplice is applied:\n  var curLine = 0,\n      curCol = 0;\n  // invariant: if (inSplice) then (curLine is in curSplice[0] + curSplice.length - {2,3}) &&\n  //            curLine >= curSplice[0]\n  // invariant: if (inSplice && (curLine >= curSplice[0] + curSplice.length - 2)) then\n  //            curCol == 0\n\n  function lines_applySplice(s) {\n    lines.splice.apply(lines, s);\n  }\n\n  function lines_toSource() {\n    return lines.toSource();\n  }\n\n  function lines_get(idx) {\n    if (lines.get) {\n      return lines.get(idx);\n    } else {\n      return lines[idx];\n    }\n  }\n  // can be unimplemented if removeLines's return value not needed\n\n  function lines_slice(start, end) {\n    if (lines.slice) {\n      return lines.slice(start, end);\n    } else {\n      return [];\n    }\n  }\n\n  function lines_length() {\n    if ((typeof lines.length) == \"number\") {\n      return lines.length;\n    } else {\n      return lines.length();\n    }\n  }\n\n  function enterSplice() {\n    curSplice[0] = curLine;\n    curSplice[1] = 0;\n    if (curCol > 0) {\n      putCurLineInSplice();\n    }\n    inSplice = true;\n  }\n\n  function leaveSplice() {\n    lines_applySplice(curSplice);\n    curSplice.length = 2;\n    curSplice[0] = curSplice[1] = 0;\n    inSplice = false;\n  }\n\n  function isCurLineInSplice() {\n    return (curLine - curSplice[0] < (curSplice.length - 2));\n  }\n\n  function debugPrint(typ) {\n    print(typ + \": \" + curSplice.toSource() + \" / \" + curLine + \",\" + curCol + \" / \" + lines_toSource());\n  }\n\n  function putCurLineInSplice() {\n    if (!isCurLineInSplice()) {\n      curSplice.push(lines_get(curSplice[0] + curSplice[1]));\n      curSplice[1]++;\n    }\n    return 2 + curLine - curSplice[0];\n  }\n\n  function skipLines(L, includeInSplice) {\n    if (L) {\n      if (includeInSplice) {\n        if (!inSplice) {\n          enterSplice();\n        }\n        for (var i = 0; i < L; i++) {\n          curCol = 0;\n          putCurLineInSplice();\n          curLine++;\n        }\n      } else {\n        if (inSplice) {\n          if (L > 1) {\n            leaveSplice();\n          } else {\n            putCurLineInSplice();\n          }\n        }\n        curLine += L;\n        curCol = 0;\n      }\n      //print(inSplice+\" / \"+isCurLineInSplice()+\" / \"+curSplice[0]+\" / \"+curSplice[1]+\" / \"+lines.length);\n/*if (inSplice && (! isCurLineInSplice()) && (curSplice[0] + curSplice[1] < lines.length)) {\n  print(\"BLAH\");\n  putCurLineInSplice();\n}*/\n      // tests case foo in remove(), which isn't otherwise covered in current impl\n    }\n    //debugPrint(\"skip\");\n  }\n\n  function skip(N, L, includeInSplice) {\n    if (N) {\n      if (L) {\n        skipLines(L, includeInSplice);\n      } else {\n        if (includeInSplice && !inSplice) {\n          enterSplice();\n        }\n        if (inSplice) {\n          putCurLineInSplice();\n        }\n        curCol += N;\n        //debugPrint(\"skip\");\n      }\n    }\n  }\n\n  function removeLines(L) {\n    var removed = '';\n    if (L) {\n      if (!inSplice) {\n        enterSplice();\n      }\n\n      function nextKLinesText(k) {\n        var m = curSplice[0] + curSplice[1];\n        return lines_slice(m, m + k).join('');\n      }\n      if (isCurLineInSplice()) {\n        //print(curCol);\n        if (curCol == 0) {\n          removed = curSplice[curSplice.length - 1];\n          // print(\"FOO\"); // case foo\n          curSplice.length--;\n          removed += nextKLinesText(L - 1);\n          curSplice[1] += L - 1;\n        } else {\n          removed = nextKLinesText(L - 1);\n          curSplice[1] += L - 1;\n          var sline = curSplice.length - 1;\n          removed = curSplice[sline].substring(curCol) + removed;\n          curSplice[sline] = curSplice[sline].substring(0, curCol) + lines_get(curSplice[0] + curSplice[1]);\n          curSplice[1] += 1;\n        }\n      } else {\n        removed = nextKLinesText(L);\n        curSplice[1] += L;\n      }\n      //debugPrint(\"remove\");\n    }\n    return removed;\n  }\n\n  function remove(N, L) {\n    var removed = '';\n    if (N) {\n      if (L) {\n        return removeLines(L);\n      } else {\n        if (!inSplice) {\n          enterSplice();\n        }\n        var sline = putCurLineInSplice();\n        removed = curSplice[sline].substring(curCol, curCol + N);\n        curSplice[sline] = curSplice[sline].substring(0, curCol) + curSplice[sline].substring(curCol + N);\n        //debugPrint(\"remove\");\n      }\n    }\n    return removed;\n  }\n\n  function insert(text, L) {\n    if (text) {\n      if (!inSplice) {\n        enterSplice();\n      }\n      if (L) {\n        var newLines = exports.splitTextLines(text);\n        if (isCurLineInSplice()) {\n          //if (curCol == 0) {\n          //curSplice.length--;\n          //curSplice[1]--;\n          //Array.prototype.push.apply(curSplice, newLines);\n          //curLine += newLines.length;\n          //}\n          //else {\n          var sline = curSplice.length - 1;\n          var theLine = curSplice[sline];\n          var lineCol = curCol;\n          curSplice[sline] = theLine.substring(0, lineCol) + newLines[0];\n          curLine++;\n          newLines.splice(0, 1);\n          Array.prototype.push.apply(curSplice, newLines);\n          curLine += newLines.length;\n          curSplice.push(theLine.substring(lineCol));\n          curCol = 0;\n          //}\n        } else {\n          Array.prototype.push.apply(curSplice, newLines);\n          curLine += newLines.length;\n        }\n      } else {\n        var sline = putCurLineInSplice();\n        curSplice[sline] = curSplice[sline].substring(0, curCol) + text + curSplice[sline].substring(curCol);\n        curCol += text.length;\n      }\n      //debugPrint(\"insert\");\n    }\n  }\n\n  function hasMore() {\n    //print(lines.length+\" / \"+inSplice+\" / \"+(curSplice.length - 2)+\" / \"+curSplice[1]);\n    var docLines = lines_length();\n    if (inSplice) {\n      docLines += curSplice.length - 2 - curSplice[1];\n    }\n    return curLine < docLines;\n  }\n\n  function close() {\n    if (inSplice) {\n      leaveSplice();\n    }\n    //debugPrint(\"close\");\n  }\n\n  var self = {\n    skip: skip,\n    remove: remove,\n    insert: insert,\n    close: close,\n    hasMore: hasMore,\n    removeLines: removeLines,\n    skipLines: skipLines\n  };\n  return self;\n};\n\n/**\n * Function allowing iterating over two Op strings. \n * @params in1 {string} first Op string\n * @params idx1 {int} integer where 1st iterator should start\n * @params in2 {string} second Op string\n * @params idx2 {int} integer where 2nd iterator should start\n * @params func {function} which decides how 1st or 2nd iterator \n *         advances. When opX.opcode = 0, iterator X advances to\n *         next element\n *         func has signature f(op1, op2, opOut)\n *             op1 - current operation of the first iterator\n *             op2 - current operation of the second iterator\n *             opOut - result operator to be put into Changeset\n * @return {string} the integrated changeset\n */\nexports.applyZip = function (in1, idx1, in2, idx2, func) {\n  var iter1 = exports.opIterator(in1, idx1);\n  var iter2 = exports.opIterator(in2, idx2);\n  var assem = exports.smartOpAssembler();\n  var op1 = exports.newOp();\n  var op2 = exports.newOp();\n  var opOut = exports.newOp();\n  while (op1.opcode || iter1.hasNext() || op2.opcode || iter2.hasNext()) {\n    if ((!op1.opcode) && iter1.hasNext()) iter1.next(op1);\n    if ((!op2.opcode) && iter2.hasNext()) iter2.next(op2);\n    func(op1, op2, opOut);\n    if (opOut.opcode) {\n      //print(opOut.toSource());\n      assem.append(opOut);\n      opOut.opcode = '';\n    }\n  }\n  assem.endDocument();\n  return assem.toString();\n};\n\n/**\n * Unpacks a string encoded Changeset into a proper Changeset object\n * @params cs {string} String encoded Changeset\n * @returns {Changeset} a Changeset class\n */\nexports.unpack = function (cs) {\n  var headerRegex = /Z:([0-9a-z]+)([><])([0-9a-z]+)|/;\n  var headerMatch = headerRegex.exec(cs);\n  if ((!headerMatch) || (!headerMatch[0])) {\n    exports.error(\"Not a exports: \" + cs);\n  }\n  var oldLen = exports.parseNum(headerMatch[1]);\n  var changeSign = (headerMatch[2] == '>') ? 1 : -1;\n  var changeMag = exports.parseNum(headerMatch[3]);\n  var newLen = oldLen + changeSign * changeMag;\n  var opsStart = headerMatch[0].length;\n  var opsEnd = cs.indexOf(\"$\");\n  if (opsEnd < 0) opsEnd = cs.length;\n  return {\n    oldLen: oldLen,\n    newLen: newLen,\n    ops: cs.substring(opsStart, opsEnd),\n    charBank: cs.substring(opsEnd + 1)\n  };\n};\n\n/**\n * Packs Changeset object into a string \n * @params oldLen {int} Old length of the Changeset\n * @params newLen {int] New length of the Changeset\n * @params opsStr {string} String encoding of the changes to be made\n * @params bank {string} Charbank of the Changeset\n * @returns {Changeset} a Changeset class\n */\nexports.pack = function (oldLen, newLen, opsStr, bank) {\n  var lenDiff = newLen - oldLen;\n  var lenDiffStr = (lenDiff >= 0 ? '>' + exports.numToString(lenDiff) : '<' + exports.numToString(-lenDiff));\n  var a = [];\n  a.push('Z:', exports.numToString(oldLen), lenDiffStr, opsStr, '$', bank);\n  return a.join('');\n};\n\n/**\n * Applies a Changeset to a string\n * @params cs {string} String encoded Changeset\n * @params str {string} String to which a Changeset should be applied\n */\nexports.applyToText = function (cs, str) {\n  var unpacked = exports.unpack(cs);\n  exports.assert(str.length == unpacked.oldLen, \"mismatched apply: \", str.length, \" / \", unpacked.oldLen);\n  var csIter = exports.opIterator(unpacked.ops);\n  var bankIter = exports.stringIterator(unpacked.charBank);\n  var strIter = exports.stringIterator(str);\n  var assem = exports.stringAssembler();\n  while (csIter.hasNext()) {\n    var op = csIter.next();\n    switch (op.opcode) {\n    case '+':\n      //op is + and op.lines 0: no newlines must be in op.chars\n      //op is + and op.lines >0: op.chars must include op.lines newlines\n      if(op.lines != bankIter.peek(op.chars).split(\"\\n\").length - 1){\n        throw new Error(\"newline count is wrong in op +; cs:\"+cs+\" and text:\"+str);\n      }\n      assem.append(bankIter.take(op.chars));\n      break;\n    case '-':\n      //op is - and op.lines 0: no newlines must be in the deleted string\n      //op is - and op.lines >0: op.lines newlines must be in the deleted string\n      if(op.lines != strIter.peek(op.chars).split(\"\\n\").length - 1){\n        throw new Error(\"newline count is wrong in op -; cs:\"+cs+\" and text:\"+str);\n      }\n      strIter.skip(op.chars);\n      break;\n    case '=':\n      //op is = and op.lines 0: no newlines must be in the copied string\n      //op is = and op.lines >0: op.lines newlines must be in the copied string\n      if(op.lines != strIter.peek(op.chars).split(\"\\n\").length - 1){\n        throw new Error(\"newline count is wrong in op =; cs:\"+cs+\" and text:\"+str);\n      }\n      assem.append(strIter.take(op.chars));\n      break;\n    }\n  }\n  assem.append(strIter.take(strIter.remaining()));\n  return assem.toString();\n};\n\n/**\n * applies a changeset on an array of lines\n * @param CS {Changeset} the changeset to be applied\n * @param lines The lines to which the changeset needs to be applied\n */\nexports.mutateTextLines = function (cs, lines) {\n  var unpacked = exports.unpack(cs);\n  var csIter = exports.opIterator(unpacked.ops);\n  var bankIter = exports.stringIterator(unpacked.charBank);\n  var mut = exports.textLinesMutator(lines);\n  while (csIter.hasNext()) {\n    var op = csIter.next();\n    switch (op.opcode) {\n    case '+':\n      mut.insert(bankIter.take(op.chars), op.lines);\n      break;\n    case '-':\n      mut.remove(op.chars, op.lines);\n      break;\n    case '=':\n      mut.skip(op.chars, op.lines, ( !! op.attribs));\n      break;\n    }\n  }\n  mut.close();\n};\n\n/**\n * Composes two attribute strings (see below) into one.\n * @param att1 {string} first attribute string\n * @param att2 {string} second attribue string\n * @param resultIsMutaton {boolean} \n * @param pool {AttribPool} attribute pool \n */\nexports.composeAttributes = function (att1, att2, resultIsMutation, pool) {\n  // att1 and att2 are strings like \"*3*f*1c\", asMutation is a boolean.\n  // Sometimes attribute (key,value) pairs are treated as attribute presence\n  // information, while other times they are treated as operations that\n  // mutate a set of attributes, and this affects whether an empty value\n  // is a deletion or a change.\n  // Examples, of the form (att1Items, att2Items, resultIsMutation) -> result\n  // ([], [(bold, )], true) -> [(bold, )]\n  // ([], [(bold, )], false) -> []\n  // ([], [(bold, true)], true) -> [(bold, true)]\n  // ([], [(bold, true)], false) -> [(bold, true)]\n  // ([(bold, true)], [(bold, )], true) -> [(bold, )]\n  // ([(bold, true)], [(bold, )], false) -> []\n  // pool can be null if att2 has no attributes.\n  if ((!att1) && resultIsMutation) {\n    // In the case of a mutation (i.e. composing two exportss),\n    // an att2 composed with an empy att1 is just att2.  If att1\n    // is part of an attribution string, then att2 may remove\n    // attributes that are already gone, so don't do this optimization.\n    return att2;\n  }\n  if (!att2) return att1;\n  var atts = [];\n  att1.replace(/\\*([0-9a-z]+)/g, function (_, a) {\n    atts.push(pool.getAttrib(exports.parseNum(a)));\n    return '';\n  });\n  att2.replace(/\\*([0-9a-z]+)/g, function (_, a) {\n    var pair = pool.getAttrib(exports.parseNum(a));\n    var found = false;\n    for (var i = 0; i < atts.length; i++) {\n      var oldPair = atts[i];\n      if (oldPair[0] == pair[0]) {\n        if (pair[1] || resultIsMutation) {\n          oldPair[1] = pair[1];\n        } else {\n          atts.splice(i, 1);\n        }\n        found = true;\n        break;\n      }\n    }\n    if ((!found) && (pair[1] || resultIsMutation)) {\n      atts.push(pair);\n    }\n    return '';\n  });\n  atts.sort();\n  var buf = exports.stringAssembler();\n  for (var i = 0; i < atts.length; i++) {\n    buf.append('*');\n    buf.append(exports.numToString(pool.putAttrib(atts[i])));\n  }\n  //print(att1+\" / \"+att2+\" / \"+buf.toString());\n  return buf.toString();\n};\n\n/**\n * Function used as parameter for applyZip to apply a Changeset to an \n * attribute \n */\nexports._slicerZipperFunc = function (attOp, csOp, opOut, pool) {\n  // attOp is the op from the sequence that is being operated on, either an\n  // attribution string or the earlier of two exportss being composed.\n  // pool can be null if definitely not needed.\n  //print(csOp.toSource()+\" \"+attOp.toSource()+\" \"+opOut.toSource());\n  if (attOp.opcode == '-') {\n    exports.copyOp(attOp, opOut);\n    attOp.opcode = '';\n  } else if (!attOp.opcode) {\n    exports.copyOp(csOp, opOut);\n    csOp.opcode = '';\n  } else {\n    switch (csOp.opcode) {\n    case '-':\n      {\n        if (csOp.chars <= attOp.chars) {\n          // delete or delete part\n          if (attOp.opcode == '=') {\n            opOut.opcode = '-';\n            opOut.chars = csOp.chars;\n            opOut.lines = csOp.lines;\n            opOut.attribs = '';\n          }\n          attOp.chars -= csOp.chars;\n          attOp.lines -= csOp.lines;\n          csOp.opcode = '';\n          if (!attOp.chars) {\n            attOp.opcode = '';\n          }\n        } else {\n          // delete and keep going\n          if (attOp.opcode == '=') {\n            opOut.opcode = '-';\n            opOut.chars = attOp.chars;\n            opOut.lines = attOp.lines;\n            opOut.attribs = '';\n          }\n          csOp.chars -= attOp.chars;\n          csOp.lines -= attOp.lines;\n          attOp.opcode = '';\n        }\n        break;\n      }\n    case '+':\n      {\n        // insert\n        exports.copyOp(csOp, opOut);\n        csOp.opcode = '';\n        break;\n      }\n    case '=':\n      {\n        if (csOp.chars <= attOp.chars) {\n          // keep or keep part\n          opOut.opcode = attOp.opcode;\n          opOut.chars = csOp.chars;\n          opOut.lines = csOp.lines;\n          opOut.attribs = exports.composeAttributes(attOp.attribs, csOp.attribs, attOp.opcode == '=', pool);\n          csOp.opcode = '';\n          attOp.chars -= csOp.chars;\n          attOp.lines -= csOp.lines;\n          if (!attOp.chars) {\n            attOp.opcode = '';\n          }\n        } else {\n          // keep and keep going\n          opOut.opcode = attOp.opcode;\n          opOut.chars = attOp.chars;\n          opOut.lines = attOp.lines;\n          opOut.attribs = exports.composeAttributes(attOp.attribs, csOp.attribs, attOp.opcode == '=', pool);\n          attOp.opcode = '';\n          csOp.chars -= attOp.chars;\n          csOp.lines -= attOp.lines;\n        }\n        break;\n      }\n    case '':\n      {\n        exports.copyOp(attOp, opOut);\n        attOp.opcode = '';\n        break;\n      }\n    }\n  }\n};\n\n/**\n * Applies a Changeset to the attribs string of a AText.\n * @param cs {string} Changeset\n * @param astr {string} the attribs string of a AText\n * @param pool {AttribsPool} the attibutes pool\n */\nexports.applyToAttribution = function (cs, astr, pool) {\n  var unpacked = exports.unpack(cs);\n\n  return exports.applyZip(astr, 0, unpacked.ops, 0, function (op1, op2, opOut) {\n    return exports._slicerZipperFunc(op1, op2, opOut, pool);\n  });\n};\n\n/*exports.oneInsertedLineAtATimeOpIterator = function(opsStr, optStartIndex, charBank) {\n  var iter = exports.opIterator(opsStr, optStartIndex);\n  var bankIndex = 0;\n\n};*/\n\nexports.mutateAttributionLines = function (cs, lines, pool) {\n  //dmesg(cs);\n  //dmesg(lines.toSource()+\" ->\");\n  var unpacked = exports.unpack(cs);\n  var csIter = exports.opIterator(unpacked.ops);\n  var csBank = unpacked.charBank;\n  var csBankIndex = 0;\n  // treat the attribution lines as text lines, mutating a line at a time\n  var mut = exports.textLinesMutator(lines);\n\n  var lineIter = null;\n\n  function isNextMutOp() {\n    return (lineIter && lineIter.hasNext()) || mut.hasMore();\n  }\n\n  function nextMutOp(destOp) {\n    if ((!(lineIter && lineIter.hasNext())) && mut.hasMore()) {\n      var line = mut.removeLines(1);\n      lineIter = exports.opIterator(line);\n    }\n    if (lineIter && lineIter.hasNext()) {\n      lineIter.next(destOp);\n    } else {\n      destOp.opcode = '';\n    }\n  }\n  var lineAssem = null;\n\n  function outputMutOp(op) {\n    //print(\"outputMutOp: \"+op.toSource());\n    if (!lineAssem) {\n      lineAssem = exports.mergingOpAssembler();\n    }\n    lineAssem.append(op);\n    if (op.lines > 0) {\n      exports.assert(op.lines == 1, \"Can't have op.lines of \", op.lines, \" in attribution lines\");\n      // ship it to the mut\n      mut.insert(lineAssem.toString(), 1);\n      lineAssem = null;\n    }\n  }\n\n  var csOp = exports.newOp();\n  var attOp = exports.newOp();\n  var opOut = exports.newOp();\n  while (csOp.opcode || csIter.hasNext() || attOp.opcode || isNextMutOp()) {\n    if ((!csOp.opcode) && csIter.hasNext()) {\n      csIter.next(csOp);\n    }\n    //print(csOp.toSource()+\" \"+attOp.toSource()+\" \"+opOut.toSource());\n    //print(csOp.opcode+\"/\"+csOp.lines+\"/\"+csOp.attribs+\"/\"+lineAssem+\"/\"+lineIter+\"/\"+(lineIter?lineIter.hasNext():null));\n    //print(\"csOp: \"+csOp.toSource());\n    if ((!csOp.opcode) && (!attOp.opcode) && (!lineAssem) && (!(lineIter && lineIter.hasNext()))) {\n      break; // done\n    } else if (csOp.opcode == '=' && csOp.lines > 0 && (!csOp.attribs) && (!attOp.opcode) && (!lineAssem) && (!(lineIter && lineIter.hasNext()))) {\n      // skip multiple lines; this is what makes small changes not order of the document size\n      mut.skipLines(csOp.lines);\n      //print(\"skipped: \"+csOp.lines);\n      csOp.opcode = '';\n    } else if (csOp.opcode == '+') {\n      if (csOp.lines > 1) {\n        var firstLineLen = csBank.indexOf('\\n', csBankIndex) + 1 - csBankIndex;\n        exports.copyOp(csOp, opOut);\n        csOp.chars -= firstLineLen;\n        csOp.lines--;\n        opOut.lines = 1;\n        opOut.chars = firstLineLen;\n      } else {\n        exports.copyOp(csOp, opOut);\n        csOp.opcode = '';\n      }\n      outputMutOp(opOut);\n      csBankIndex += opOut.chars;\n      opOut.opcode = '';\n    } else {\n      if ((!attOp.opcode) && isNextMutOp()) {\n        nextMutOp(attOp);\n      }\n      //print(\"attOp: \"+attOp.toSource());\n      exports._slicerZipperFunc(attOp, csOp, opOut, pool);\n      if (opOut.opcode) {\n        outputMutOp(opOut);\n        opOut.opcode = '';\n      }\n    }\n  }\n\n  exports.assert(!lineAssem, \"line assembler not finished:\"+cs);\n  mut.close();\n\n  //dmesg(\"-> \"+lines.toSource());\n};\n\n/**\n * joins several Attribution lines\n * @param theAlines collection of Attribution lines\n * @returns {string} joined Attribution lines\n */\nexports.joinAttributionLines = function (theAlines) {\n  var assem = exports.mergingOpAssembler();\n  for (var i = 0; i < theAlines.length; i++) {\n    var aline = theAlines[i];\n    var iter = exports.opIterator(aline);\n    while (iter.hasNext()) {\n      assem.append(iter.next());\n    }\n  }\n  return assem.toString();\n};\n\nexports.splitAttributionLines = function (attrOps, text) {\n  var iter = exports.opIterator(attrOps);\n  var assem = exports.mergingOpAssembler();\n  var lines = [];\n  var pos = 0;\n\n  function appendOp(op) {\n    assem.append(op);\n    if (op.lines > 0) {\n      lines.push(assem.toString());\n      assem.clear();\n    }\n    pos += op.chars;\n  }\n\n  while (iter.hasNext()) {\n    var op = iter.next();\n    var numChars = op.chars;\n    var numLines = op.lines;\n    while (numLines > 1) {\n      var newlineEnd = text.indexOf('\\n', pos) + 1;\n      exports.assert(newlineEnd > 0, \"newlineEnd <= 0 in splitAttributionLines\");\n      op.chars = newlineEnd - pos;\n      op.lines = 1;\n      appendOp(op);\n      numChars -= op.chars;\n      numLines -= op.lines;\n    }\n    if (numLines == 1) {\n      op.chars = numChars;\n      op.lines = 1;\n    }\n    appendOp(op);\n  }\n\n  return lines;\n};\n\n/**\n * splits text into lines\n * @param {string} text to be splitted\n */\nexports.splitTextLines = function (text) {\n  return text.match(/[^\\n]*(?:\\n|[^\\n]$)/g);\n};\n\n/**\n * compose two Changesets\n * @param cs1 {Changeset} first Changeset\n * @param cs2 {Changeset} second Changeset\n * @param pool {AtribsPool} Attribs pool\n */\nexports.compose = function (cs1, cs2, pool) {\n  var unpacked1 = exports.unpack(cs1);\n  var unpacked2 = exports.unpack(cs2);\n  var len1 = unpacked1.oldLen;\n  var len2 = unpacked1.newLen;\n  exports.assert(len2 == unpacked2.oldLen, \"mismatched composition of two changesets\");\n  var len3 = unpacked2.newLen;\n  var bankIter1 = exports.stringIterator(unpacked1.charBank);\n  var bankIter2 = exports.stringIterator(unpacked2.charBank);\n  var bankAssem = exports.stringAssembler();\n\n  var newOps = exports.applyZip(unpacked1.ops, 0, unpacked2.ops, 0, function (op1, op2, opOut) {\n    //var debugBuilder = exports.stringAssembler();\n    //debugBuilder.append(exports.opString(op1));\n    //debugBuilder.append(',');\n    //debugBuilder.append(exports.opString(op2));\n    //debugBuilder.append(' / ');\n    var op1code = op1.opcode;\n    var op2code = op2.opcode;\n    if (op1code == '+' && op2code == '-') {\n      bankIter1.skip(Math.min(op1.chars, op2.chars));\n    }\n    exports._slicerZipperFunc(op1, op2, opOut, pool);\n    if (opOut.opcode == '+') {\n      if (op2code == '+') {\n        bankAssem.append(bankIter2.take(opOut.chars));\n      } else {\n        bankAssem.append(bankIter1.take(opOut.chars));\n      }\n    }\n\n    //debugBuilder.append(exports.opString(op1));\n    //debugBuilder.append(',');\n    //debugBuilder.append(exports.opString(op2));\n    //debugBuilder.append(' -> ');\n    //debugBuilder.append(exports.opString(opOut));\n    //print(debugBuilder.toString());\n  });\n\n  return exports.pack(len1, len3, newOps, bankAssem.toString());\n};\n\n/**\n * returns a function that tests if a string of attributes\n * (e.g. *3*4) contains a given attribute key,value that\n * is already present in the pool.\n * @param attribPair array [key,value] of the attribute \n * @param pool {AttribPool} Attribute pool\n */\nexports.attributeTester = function (attribPair, pool) {\n  if (!pool) {\n    return never;\n  }\n  var attribNum = pool.putAttrib(attribPair, true);\n  if (attribNum < 0) {\n    return never;\n  } else {\n    var re = new RegExp('\\\\*' + exports.numToString(attribNum) + '(?!\\\\w)');\n    return function (attribs) {\n      return re.test(attribs);\n    };\n  }\n\n  function never(attribs) {\n    return false;\n  }\n};\n\n/**\n * creates the identity Changeset of length N\n * @param N {int} length of the identity changeset\n */\nexports.identity = function (N) {\n  return exports.pack(N, N, \"\", \"\");\n};\n\n\n/**\n * creates a Changeset which works on oldFullText and removes text \n * from spliceStart to spliceStart+numRemoved and inserts newText \n * instead. Also gives possibility to add attributes optNewTextAPairs \n * for the new text.\n * @param oldFullText {string} old text\n * @param spliecStart {int} where splicing starts\n * @param numRemoved {int} number of characters to be removed\n * @param newText {string} string to be inserted\n * @param optNewTextAPairs {string} new pairs to be inserted\n * @param pool {AttribPool} Attribution Pool\n */\nexports.makeSplice = function (oldFullText, spliceStart, numRemoved, newText, optNewTextAPairs, pool) {\n  var oldLen = oldFullText.length;\n\n  if (spliceStart >= oldLen) {\n    spliceStart = oldLen - 1;\n  }\n  if (numRemoved > oldFullText.length - spliceStart) {\n    numRemoved = oldFullText.length - spliceStart;\n  }\n  var oldText = oldFullText.substring(spliceStart, spliceStart + numRemoved);\n  var newLen = oldLen + newText.length - oldText.length;\n\n  var assem = exports.smartOpAssembler();\n  assem.appendOpWithText('=', oldFullText.substring(0, spliceStart));\n  assem.appendOpWithText('-', oldText);\n  assem.appendOpWithText('+', newText, optNewTextAPairs, pool);\n  assem.endDocument();\n  return exports.pack(oldLen, newLen, assem.toString(), newText);\n};\n\n/**\n * Transforms a changeset into a list of splices in the form\n * [startChar, endChar, newText] meaning replace text from\n * startChar to endChar with newText\n * @param cs Changeset\n */\nexports.toSplices = function (cs) {\n  // \n  var unpacked = exports.unpack(cs);\n  var splices = [];\n\n  var oldPos = 0;\n  var iter = exports.opIterator(unpacked.ops);\n  var charIter = exports.stringIterator(unpacked.charBank);\n  var inSplice = false;\n  while (iter.hasNext()) {\n    var op = iter.next();\n    if (op.opcode == '=') {\n      oldPos += op.chars;\n      inSplice = false;\n    } else {\n      if (!inSplice) {\n        splices.push([oldPos, oldPos, \"\"]);\n        inSplice = true;\n      }\n      if (op.opcode == '-') {\n        oldPos += op.chars;\n        splices[splices.length - 1][1] += op.chars;\n      } else if (op.opcode == '+') {\n        splices[splices.length - 1][2] += charIter.take(op.chars);\n      }\n    }\n  }\n\n  return splices;\n};\n\n/**\n * \n */\nexports.characterRangeFollow = function (cs, startChar, endChar, insertionsAfter) {\n  var newStartChar = startChar;\n  var newEndChar = endChar;\n  var splices = exports.toSplices(cs);\n  var lengthChangeSoFar = 0;\n  for (var i = 0; i < splices.length; i++) {\n    var splice = splices[i];\n    var spliceStart = splice[0] + lengthChangeSoFar;\n    var spliceEnd = splice[1] + lengthChangeSoFar;\n    var newTextLength = splice[2].length;\n    var thisLengthChange = newTextLength - (spliceEnd - spliceStart);\n\n    if (spliceStart <= newStartChar && spliceEnd >= newEndChar) {\n      // splice fully replaces/deletes range\n      // (also case that handles insertion at a collapsed selection)\n      if (insertionsAfter) {\n        newStartChar = newEndChar = spliceStart;\n      } else {\n        newStartChar = newEndChar = spliceStart + newTextLength;\n      }\n    } else if (spliceEnd <= newStartChar) {\n      // splice is before range\n      newStartChar += thisLengthChange;\n      newEndChar += thisLengthChange;\n    } else if (spliceStart >= newEndChar) {\n      // splice is after range\n    } else if (spliceStart >= newStartChar && spliceEnd <= newEndChar) {\n      // splice is inside range\n      newEndChar += thisLengthChange;\n    } else if (spliceEnd < newEndChar) {\n      // splice overlaps beginning of range\n      newStartChar = spliceStart + newTextLength;\n      newEndChar += thisLengthChange;\n    } else {\n      // splice overlaps end of range\n      newEndChar = spliceStart;\n    }\n\n    lengthChangeSoFar += thisLengthChange;\n  }\n\n  return [newStartChar, newEndChar];\n};\n\n/**\n * Iterate over attributes in a changeset and move them from\n * oldPool to newPool\n * @param cs {Changeset} Chageset/attribution string to be iterated over\n * @param oldPool {AttribPool} old attributes pool\n * @param newPool {AttribPool} new attributes pool\n * @return {string} the new Changeset\n */\nexports.moveOpsToNewPool = function (cs, oldPool, newPool) {\n  // works on exports or attribution string\n  var dollarPos = cs.indexOf('$');\n  if (dollarPos < 0) {\n    dollarPos = cs.length;\n  }\n  var upToDollar = cs.substring(0, dollarPos);\n  var fromDollar = cs.substring(dollarPos);\n  // order of attribs stays the same\n  return upToDollar.replace(/\\*([0-9a-z]+)/g, function (_, a) {\n    var oldNum = exports.parseNum(a);\n    var pair = oldPool.getAttrib(oldNum);\n    if(!pair) exports.error('Can\\'t copy unknown attrib (reference attrib string to non-existant pool entry). Inconsistent attrib state!');\n    var newNum = newPool.putAttrib(pair);\n    return '*' + exports.numToString(newNum);\n  }) + fromDollar;\n};\n\n/**\n * create an attribution inserting a text\n * @param text {string} text to be inserted\n */\nexports.makeAttribution = function (text) {\n  var assem = exports.smartOpAssembler();\n  assem.appendOpWithText('+', text);\n  return assem.toString();\n};\n\n/**\n * Iterates over attributes in exports, attribution string, or attribs property of an op\n * and runs function func on them\n * @param cs {Changeset} changeset\n * @param func {function} function to be called\n */ \nexports.eachAttribNumber = function (cs, func) {\n  var dollarPos = cs.indexOf('$');\n  if (dollarPos < 0) {\n    dollarPos = cs.length;\n  }\n  var upToDollar = cs.substring(0, dollarPos);\n\n  upToDollar.replace(/\\*([0-9a-z]+)/g, function (_, a) {\n    func(exports.parseNum(a));\n    return '';\n  });\n};\n\n/**\n * Filter attributes which should remain in a Changeset\n * callable on a exports, attribution string, or attribs property of an op,\n * though it may easily create adjacent ops that can be merged.\n * @param cs {Changeset} changeset to be filtered\n * @param filter {function} fnc which returns true if an \n *        attribute X (int) should be kept in the Changeset\n */ \nexports.filterAttribNumbers = function (cs, filter) {\n  return exports.mapAttribNumbers(cs, filter);\n};\n\n/**\n * does exactly the same as exports.filterAttribNumbers \n */ \nexports.mapAttribNumbers = function (cs, func) {\n  var dollarPos = cs.indexOf('$');\n  if (dollarPos < 0) {\n    dollarPos = cs.length;\n  }\n  var upToDollar = cs.substring(0, dollarPos);\n\n  var newUpToDollar = upToDollar.replace(/\\*([0-9a-z]+)/g, function (s, a) {\n    var n = func(exports.parseNum(a));\n    if (n === true) {\n      return s;\n    } else if ((typeof n) === \"number\") {\n      return '*' + exports.numToString(n);\n    } else {\n      return '';\n    }\n  });\n\n  return newUpToDollar + cs.substring(dollarPos);\n};\n\n/**\n * Create a Changeset going from Identity to a certain state\n * @params text {string} text of the final change\n * @attribs attribs {string} optional, operations which insert \n *    the text and also puts the right attributes\n */\nexports.makeAText = function (text, attribs) {\n  return {\n    text: text,\n    attribs: (attribs || exports.makeAttribution(text))\n  };\n};\n\n/**\n * Apply a Changeset to a AText \n * @param cs {Changeset} Changeset to be applied\n * @param atext {AText} \n * @param pool {AttribPool} Attribute Pool to add to\n */\nexports.applyToAText = function (cs, atext, pool) {\n  return {\n    text: exports.applyToText(cs, atext.text),\n    attribs: exports.applyToAttribution(cs, atext.attribs, pool)\n  };\n};\n\n/**\n * Clones a AText structure\n * @param atext {AText} \n */\nexports.cloneAText = function (atext) {\n  return {\n    text: atext.text,\n    attribs: atext.attribs\n  };\n};\n\n/**\n * Copies a AText structure from atext1 to atext2\n * @param atext {AText} \n */\nexports.copyAText = function (atext1, atext2) {\n  atext2.text = atext1.text;\n  atext2.attribs = atext1.attribs;\n};\n\n/**\n * Append the set of operations from atext to an assembler\n * @param atext {AText} \n * @param assem Assembler like smartOpAssembler\n */\nexports.appendATextToAssembler = function (atext, assem) {\n  // intentionally skips last newline char of atext\n  var iter = exports.opIterator(atext.attribs);\n  var op = exports.newOp();\n  while (iter.hasNext()) {\n    iter.next(op);\n    if (!iter.hasNext()) {\n      // last op, exclude final newline\n      if (op.lines <= 1) {\n        op.lines = 0;\n        op.chars--;\n        if (op.chars) {\n          assem.append(op);\n        }\n      } else {\n        var nextToLastNewlineEnd =\n        atext.text.lastIndexOf('\\n', atext.text.length - 2) + 1;\n        var lastLineLength = atext.text.length - nextToLastNewlineEnd - 1;\n        op.lines--;\n        op.chars -= (lastLineLength + 1);\n        assem.append(op);\n        op.lines = 0;\n        op.chars = lastLineLength;\n        if (op.chars) {\n          assem.append(op);\n        }\n      }\n    } else {\n      assem.append(op);\n    }\n  }\n};\n\n/**\n * Creates a clone of a Changeset and it's APool\n * @param cs {Changeset} \n * @param pool {AtributePool}\n */\nexports.prepareForWire = function (cs, pool) {\n  var newPool = new AttributePool();\n  var newCs = exports.moveOpsToNewPool(cs, pool, newPool);\n  return {\n    translated: newCs,\n    pool: newPool\n  };\n};\n\n/**\n * Checks if a changeset s the identity changeset\n */\nexports.isIdentity = function (cs) {\n  var unpacked = exports.unpack(cs);\n  return unpacked.ops == \"\" && unpacked.oldLen == unpacked.newLen;\n};\n\n/**\n * returns all the values of attributes with a certain key \n * in an Op attribs string \n * @param attribs {string} Attribute string of a Op\n * @param key {string} string to be seached for\n * @param pool {AttribPool} attribute pool\n */\nexports.opAttributeValue = function (op, key, pool) {\n  return exports.attribsAttributeValue(op.attribs, key, pool);\n};\n\n/**\n * returns all the values of attributes with a certain key \n * in an attribs string \n * @param attribs {string} Attribute string\n * @param key {string} string to be seached for\n * @param pool {AttribPool} attribute pool\n */\nexports.attribsAttributeValue = function (attribs, key, pool) {\n  var value = '';\n  if (attribs) {\n    exports.eachAttribNumber(attribs, function (n) {\n      if (pool.getAttribKey(n) == key) {\n        value = pool.getAttribValue(n);\n      }\n    });\n  }\n  return value;\n};\n\n/**\n * Creates a Changeset builder for a string with initial \n * length oldLen. Allows to add/remove parts of it\n * @param oldLen {int} Old length\n */\nexports.builder = function (oldLen) {\n  var assem = exports.smartOpAssembler();\n  var o = exports.newOp();\n  var charBank = exports.stringAssembler();\n\n  var self = {\n    // attribs are [[key1,value1],[key2,value2],...] or '*0*1...' (no pool needed in latter case)\n    keep: function (N, L, attribs, pool) {\n      o.opcode = '=';\n      o.attribs = (attribs && exports.makeAttribsString('=', attribs, pool)) || '';\n      o.chars = N;\n      o.lines = (L || 0);\n      assem.append(o);\n      return self;\n    },\n    keepText: function (text, attribs, pool) {\n      assem.appendOpWithText('=', text, attribs, pool);\n      return self;\n    },\n    insert: function (text, attribs, pool) {\n      assem.appendOpWithText('+', text, attribs, pool);\n      charBank.append(text);\n      return self;\n    },\n    remove: function (N, L) {\n      o.opcode = '-';\n      o.attribs = '';\n      o.chars = N;\n      o.lines = (L || 0);\n      assem.append(o);\n      return self;\n    },\n    toString: function () {\n      assem.endDocument();\n      var newLen = oldLen + assem.getLengthChange();\n      return exports.pack(oldLen, newLen, assem.toString(), charBank.toString());\n    }\n  };\n\n  return self;\n};\n\nexports.makeAttribsString = function (opcode, attribs, pool) {\n  // makeAttribsString(opcode, '*3') or makeAttribsString(opcode, [['foo','bar']], myPool) work\n  if (!attribs) {\n    return '';\n  } else if ((typeof attribs) == \"string\") {\n    return attribs;\n  } else if (pool && attribs && attribs.length) {\n    if (attribs.length > 1) {\n      attribs = attribs.slice();\n      attribs.sort();\n    }\n    var result = [];\n    for (var i = 0; i < attribs.length; i++) {\n      var pair = attribs[i];\n      if (opcode == '=' || (opcode == '+' && pair[1])) {\n        result.push('*' + exports.numToString(pool.putAttrib(pair)));\n      }\n    }\n    return result.join('');\n  }\n};\n\n// like \"substring\" but on a single-line attribution string\nexports.subattribution = function (astr, start, optEnd) {\n  var iter = exports.opIterator(astr, 0);\n  var assem = exports.smartOpAssembler();\n  var attOp = exports.newOp();\n  var csOp = exports.newOp();\n  var opOut = exports.newOp();\n\n  function doCsOp() {\n    if (csOp.chars) {\n      while (csOp.opcode && (attOp.opcode || iter.hasNext())) {\n        if (!attOp.opcode) iter.next(attOp);\n\n        if (csOp.opcode && attOp.opcode && csOp.chars >= attOp.chars && attOp.lines > 0 && csOp.lines <= 0) {\n          csOp.lines++;\n        }\n\n        exports._slicerZipperFunc(attOp, csOp, opOut, null);\n        if (opOut.opcode) {\n          assem.append(opOut);\n          opOut.opcode = '';\n        }\n      }\n    }\n  }\n\n  csOp.opcode = '-';\n  csOp.chars = start;\n\n  doCsOp();\n\n  if (optEnd === undefined) {\n    if (attOp.opcode) {\n      assem.append(attOp);\n    }\n    while (iter.hasNext()) {\n      iter.next(attOp);\n      assem.append(attOp);\n    }\n  } else {\n    csOp.opcode = '=';\n    csOp.chars = optEnd - start;\n    doCsOp();\n  }\n\n  return assem.toString();\n};\n\nexports.inverse = function (cs, lines, alines, pool) {\n  // lines and alines are what the exports is meant to apply to.\n  // They may be arrays or objects with .get(i) and .length methods.\n  // They include final newlines on lines.\n\n  function lines_get(idx) {\n    if (lines.get) {\n      return lines.get(idx);\n    } else {\n      return lines[idx];\n    }\n  }\n\n  function alines_get(idx) {\n    if (alines.get) {\n      return alines.get(idx);\n    } else {\n      return alines[idx];\n    }\n  }\n\n  var curLine = 0;\n  var curChar = 0;\n  var curLineOpIter = null;\n  var curLineOpIterLine;\n  var curLineNextOp = exports.newOp('+');\n\n  var unpacked = exports.unpack(cs);\n  var csIter = exports.opIterator(unpacked.ops);\n  var builder = exports.builder(unpacked.newLen);\n\n  function consumeAttribRuns(numChars, func /*(len, attribs, endsLine)*/ ) {\n\n    if ((!curLineOpIter) || (curLineOpIterLine != curLine)) {\n      // create curLineOpIter and advance it to curChar\n      curLineOpIter = exports.opIterator(alines_get(curLine));\n      curLineOpIterLine = curLine;\n      var indexIntoLine = 0;\n      var done = false;\n      while (!done && curLineOpIter.hasNext()) {\n        curLineOpIter.next(curLineNextOp);\n        if (indexIntoLine + curLineNextOp.chars >= curChar) {\n          curLineNextOp.chars -= (curChar - indexIntoLine);\n          done = true;\n        } else {\n          indexIntoLine += curLineNextOp.chars;\n        }\n      }\n    }\n\n    while (numChars > 0) {\n      if ((!curLineNextOp.chars) && (!curLineOpIter.hasNext())) {\n        curLine++;\n        curChar = 0;\n        curLineOpIterLine = curLine;\n        curLineNextOp.chars = 0;\n        curLineOpIter = exports.opIterator(alines_get(curLine));\n      }\n      if (!curLineNextOp.chars) {\n        curLineOpIter.next(curLineNextOp);\n      }\n      var charsToUse = Math.min(numChars, curLineNextOp.chars);\n      func(charsToUse, curLineNextOp.attribs, charsToUse == curLineNextOp.chars && curLineNextOp.lines > 0);\n      numChars -= charsToUse;\n      curLineNextOp.chars -= charsToUse;\n      curChar += charsToUse;\n    }\n\n    if ((!curLineNextOp.chars) && (!curLineOpIter.hasNext())) {\n      curLine++;\n      curChar = 0;\n    }\n  }\n\n  function skip(N, L) {\n    if (L) {\n      curLine += L;\n      curChar = 0;\n    } else {\n      if (curLineOpIter && curLineOpIterLine == curLine) {\n        consumeAttribRuns(N, function () {});\n      } else {\n        curChar += N;\n      }\n    }\n  }\n\n  function nextText(numChars) {\n    var len = 0;\n    var assem = exports.stringAssembler();\n    var firstString = lines_get(curLine).substring(curChar);\n    len += firstString.length;\n    assem.append(firstString);\n\n    var lineNum = curLine + 1;\n    while (len < numChars) {\n      var nextString = lines_get(lineNum);\n      len += nextString.length;\n      assem.append(nextString);\n      lineNum++;\n    }\n\n    return assem.toString().substring(0, numChars);\n  }\n\n  function cachedStrFunc(func) {\n    var cache = {};\n    return function (s) {\n      if (!cache[s]) {\n        cache[s] = func(s);\n      }\n      return cache[s];\n    };\n  }\n\n  var attribKeys = [];\n  var attribValues = [];\n  while (csIter.hasNext()) {\n    var csOp = csIter.next();\n    if (csOp.opcode == '=') {\n      if (csOp.attribs) {\n        attribKeys.length = 0;\n        attribValues.length = 0;\n        exports.eachAttribNumber(csOp.attribs, function (n) {\n          attribKeys.push(pool.getAttribKey(n));\n          attribValues.push(pool.getAttribValue(n));\n        });\n        var undoBackToAttribs = cachedStrFunc(function (attribs) {\n          var backAttribs = [];\n          for (var i = 0; i < attribKeys.length; i++) {\n            var appliedKey = attribKeys[i];\n            var appliedValue = attribValues[i];\n            var oldValue = exports.attribsAttributeValue(attribs, appliedKey, pool);\n            if (appliedValue != oldValue) {\n              backAttribs.push([appliedKey, oldValue]);\n            }\n          }\n          return exports.makeAttribsString('=', backAttribs, pool);\n        });\n        consumeAttribRuns(csOp.chars, function (len, attribs, endsLine) {\n          builder.keep(len, endsLine ? 1 : 0, undoBackToAttribs(attribs));\n        });\n      } else {\n        skip(csOp.chars, csOp.lines);\n        builder.keep(csOp.chars, csOp.lines);\n      }\n    } else if (csOp.opcode == '+') {\n      builder.remove(csOp.chars, csOp.lines);\n    } else if (csOp.opcode == '-') {\n      var textBank = nextText(csOp.chars);\n      var textBankIndex = 0;\n      consumeAttribRuns(csOp.chars, function (len, attribs, endsLine) {\n        builder.insert(textBank.substr(textBankIndex, len), attribs);\n        textBankIndex += len;\n      });\n    }\n  }\n\n  return exports.checkRep(builder.toString());\n};\n\n// %CLIENT FILE ENDS HERE%\nexports.follow = function (cs1, cs2, reverseInsertOrder, pool) {\n  var unpacked1 = exports.unpack(cs1);\n  var unpacked2 = exports.unpack(cs2);\n  var len1 = unpacked1.oldLen;\n  var len2 = unpacked2.oldLen;\n  exports.assert(len1 == len2, \"mismatched follow - cannot transform cs1 on top of cs2\");\n  var chars1 = exports.stringIterator(unpacked1.charBank);\n  var chars2 = exports.stringIterator(unpacked2.charBank);\n\n  var oldLen = unpacked1.newLen;\n  var oldPos = 0;\n  var newLen = 0;\n\n  var hasInsertFirst = exports.attributeTester(['insertorder', 'first'], pool);\n\n  var newOps = exports.applyZip(unpacked1.ops, 0, unpacked2.ops, 0, function (op1, op2, opOut) {\n    if (op1.opcode == '+' || op2.opcode == '+') {\n      var whichToDo;\n      if (op2.opcode != '+') {\n        whichToDo = 1;\n      } else if (op1.opcode != '+') {\n        whichToDo = 2;\n      } else {\n        // both +\n        var firstChar1 = chars1.peek(1);\n        var firstChar2 = chars2.peek(1);\n        var insertFirst1 = hasInsertFirst(op1.attribs);\n        var insertFirst2 = hasInsertFirst(op2.attribs);\n        if (insertFirst1 && !insertFirst2) {\n          whichToDo = 1;\n        } else if (insertFirst2 && !insertFirst1) {\n          whichToDo = 2;\n        }\n        // insert string that doesn't start with a newline first so as not to break up lines\n        else if (firstChar1 == '\\n' && firstChar2 != '\\n') {\n          whichToDo = 2;\n        } else if (firstChar1 != '\\n' && firstChar2 == '\\n') {\n          whichToDo = 1;\n        }\n        // break symmetry:\n        else if (reverseInsertOrder) {\n          whichToDo = 2;\n        } else {\n          whichToDo = 1;\n        }\n      }\n      if (whichToDo == 1) {\n        chars1.skip(op1.chars);\n        opOut.opcode = '=';\n        opOut.lines = op1.lines;\n        opOut.chars = op1.chars;\n        opOut.attribs = '';\n        op1.opcode = '';\n      } else {\n        // whichToDo == 2\n        chars2.skip(op2.chars);\n        exports.copyOp(op2, opOut);\n        op2.opcode = '';\n      }\n    } else if (op1.opcode == '-') {\n      if (!op2.opcode) {\n        op1.opcode = '';\n      } else {\n        if (op1.chars <= op2.chars) {\n          op2.chars -= op1.chars;\n          op2.lines -= op1.lines;\n          op1.opcode = '';\n          if (!op2.chars) {\n            op2.opcode = '';\n          }\n        } else {\n          op1.chars -= op2.chars;\n          op1.lines -= op2.lines;\n          op2.opcode = '';\n        }\n      }\n    } else if (op2.opcode == '-') {\n      exports.copyOp(op2, opOut);\n      if (!op1.opcode) {\n        op2.opcode = '';\n      } else if (op2.chars <= op1.chars) {\n        // delete part or all of a keep\n        op1.chars -= op2.chars;\n        op1.lines -= op2.lines;\n        op2.opcode = '';\n        if (!op1.chars) {\n          op1.opcode = '';\n        }\n      } else {\n        // delete all of a keep, and keep going\n        opOut.lines = op1.lines;\n        opOut.chars = op1.chars;\n        op2.lines -= op1.lines;\n        op2.chars -= op1.chars;\n        op1.opcode = '';\n      }\n    } else if (!op1.opcode) {\n      exports.copyOp(op2, opOut);\n      op2.opcode = '';\n    } else if (!op2.opcode) {\n      // @NOTE: Critical bugfix for EPL issue #1625. We do not copy op1 here\n      // in order to prevent attributes from leaking into result changesets.\n      // exports.copyOp(op1, opOut);\n      op1.opcode = '';\n    } else {\n      // both keeps\n      opOut.opcode = '=';\n      opOut.attribs = exports.followAttributes(op1.attribs, op2.attribs, pool);\n      if (op1.chars <= op2.chars) {\n        opOut.chars = op1.chars;\n        opOut.lines = op1.lines;\n        op2.chars -= op1.chars;\n        op2.lines -= op1.lines;\n        op1.opcode = '';\n        if (!op2.chars) {\n          op2.opcode = '';\n        }\n      } else {\n        opOut.chars = op2.chars;\n        opOut.lines = op2.lines;\n        op1.chars -= op2.chars;\n        op1.lines -= op2.lines;\n        op2.opcode = '';\n      }\n    }\n    switch (opOut.opcode) {\n    case '=':\n      oldPos += opOut.chars;\n      newLen += opOut.chars;\n      break;\n    case '-':\n      oldPos += opOut.chars;\n      break;\n    case '+':\n      newLen += opOut.chars;\n      break;\n    }\n  });\n  newLen += oldLen - oldPos;\n\n  return exports.pack(oldLen, newLen, newOps, unpacked2.charBank);\n};\n\nexports.followAttributes = function (att1, att2, pool) {\n  // The merge of two sets of attribute changes to the same text\n  // takes the lexically-earlier value if there are two values\n  // for the same key.  Otherwise, all key/value changes from\n  // both attribute sets are taken.  This operation is the \"follow\",\n  // so a set of changes is produced that can be applied to att1\n  // to produce the merged set.\n  if ((!att2) || (!pool)) return '';\n  if (!att1) return att2;\n  var atts = [];\n  att2.replace(/\\*([0-9a-z]+)/g, function (_, a) {\n    atts.push(pool.getAttrib(exports.parseNum(a)));\n    return '';\n  });\n  att1.replace(/\\*([0-9a-z]+)/g, function (_, a) {\n    var pair1 = pool.getAttrib(exports.parseNum(a));\n    for (var i = 0; i < atts.length; i++) {\n      var pair2 = atts[i];\n      if (pair1[0] == pair2[0]) {\n        if (pair1[1] <= pair2[1]) {\n          // winner of merge is pair1, delete this attribute\n          atts.splice(i, 1);\n        }\n        break;\n      }\n    }\n    return '';\n  });\n  // we've only removed attributes, so they're already sorted\n  var buf = exports.stringAssembler();\n  for (var i = 0; i < atts.length; i++) {\n    buf.append('*');\n    buf.append(exports.numToString(pool.putAttrib(atts[i])));\n  }\n  return buf.toString();\n};\n\nexports.composeWithDeletions = function (cs1, cs2, pool) {\n  var unpacked1 = exports.unpack(cs1);\n  var unpacked2 = exports.unpack(cs2);\n  var len1 = unpacked1.oldLen;\n  var len2 = unpacked1.newLen;\n  exports.assert(len2 == unpacked2.oldLen, \"mismatched composition of two changesets\");\n  var len3 = unpacked2.newLen;\n  var bankIter1 = exports.stringIterator(unpacked1.charBank);\n  var bankIter2 = exports.stringIterator(unpacked2.charBank);\n  var bankAssem = exports.stringAssembler();\n\n  var newOps = exports.applyZip(unpacked1.ops, 0, unpacked2.ops, 0, function (op1, op2, opOut) {\n    var op1code = op1.opcode;\n    var op2code = op2.opcode;\n    if (op1code == '+' && op2code == '-') {\n      bankIter1.skip(Math.min(op1.chars, op2.chars));\n    }\n    exports._slicerZipperFuncWithDeletions(op1, op2, opOut, pool);\n    if (opOut.opcode == '+') {\n      if (op2code == '+') {\n        bankAssem.append(bankIter2.take(opOut.chars));\n      } else {\n        bankAssem.append(bankIter1.take(opOut.chars));\n      }\n    }\n  });\n\n  return exports.pack(len1, len3, newOps, bankAssem.toString());\n};\n\n// This function is 95% like _slicerZipperFunc, we just changed two lines to ensure it merges the attribs of deletions properly. \n// This is necassary for correct paddiff. But to ensure these changes doesn't affect anything else, we've created a seperate function only used for paddiffs\nexports._slicerZipperFuncWithDeletions= function (attOp, csOp, opOut, pool) {\n  // attOp is the op from the sequence that is being operated on, either an\n  // attribution string or the earlier of two exportss being composed.\n  // pool can be null if definitely not needed.\n  //print(csOp.toSource()+\" \"+attOp.toSource()+\" \"+opOut.toSource());\n  if (attOp.opcode == '-') {\n    exports.copyOp(attOp, opOut);\n    attOp.opcode = '';\n  } else if (!attOp.opcode) {\n    exports.copyOp(csOp, opOut);\n    csOp.opcode = '';\n  } else {\n    switch (csOp.opcode) {\n    case '-':\n      {\n        if (csOp.chars <= attOp.chars) {\n          // delete or delete part\n          if (attOp.opcode == '=') {\n            opOut.opcode = '-';\n            opOut.chars = csOp.chars;\n            opOut.lines = csOp.lines;\n            opOut.attribs = csOp.attribs; //changed by yammer\n          }\n          attOp.chars -= csOp.chars;\n          attOp.lines -= csOp.lines;\n          csOp.opcode = '';\n          if (!attOp.chars) {\n            attOp.opcode = '';\n          }\n        } else {\n          // delete and keep going\n          if (attOp.opcode == '=') {\n            opOut.opcode = '-';\n            opOut.chars = attOp.chars;\n            opOut.lines = attOp.lines;\n            opOut.attribs = csOp.attribs; //changed by yammer\n          }\n          csOp.chars -= attOp.chars;\n          csOp.lines -= attOp.lines;\n          attOp.opcode = '';\n        }\n        break;\n      }\n    case '+':\n      {\n        // insert\n        exports.copyOp(csOp, opOut);\n        csOp.opcode = '';\n        break;\n      }\n    case '=':\n      {\n        if (csOp.chars <= attOp.chars) {\n          // keep or keep part\n          opOut.opcode = attOp.opcode;\n          opOut.chars = csOp.chars;\n          opOut.lines = csOp.lines;\n          opOut.attribs = exports.composeAttributes(attOp.attribs, csOp.attribs, attOp.opcode == '=', pool);\n          csOp.opcode = '';\n          attOp.chars -= csOp.chars;\n          attOp.lines -= csOp.lines;\n          if (!attOp.chars) {\n            attOp.opcode = '';\n          }\n        } else {\n          // keep and keep going\n          opOut.opcode = attOp.opcode;\n          opOut.chars = attOp.chars;\n          opOut.lines = attOp.lines;\n          opOut.attribs = exports.composeAttributes(attOp.attribs, csOp.attribs, attOp.opcode == '=', pool);\n          attOp.opcode = '';\n          csOp.chars -= attOp.chars;\n          csOp.lines -= attOp.lines;\n        }\n        break;\n      }\n    case '':\n      {\n        exports.copyOp(attOp, opOut);\n        attOp.opcode = '';\n        break;\n      }\n    }\n  }\n};\n\n}\n, \"ep_etherpad-lite/static/js/ChangesetUtils.js\": function (require, exports, module) {\n/**\n * This module contains several helper Functions to build Changesets\n * based on a SkipList\n */\n\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexports.buildRemoveRange = function(rep, builder, start, end)\n{\n  var startLineOffset = rep.lines.offsetOfIndex(start[0]);\n  var endLineOffset = rep.lines.offsetOfIndex(end[0]);\n\n  if (end[0] > start[0])\n  {\n    builder.remove(endLineOffset - startLineOffset - start[1], end[0] - start[0]);\n    builder.remove(end[1]);\n  }\n  else\n  {\n    builder.remove(end[1] - start[1]);\n  }\n}\n\nexports.buildKeepRange = function(rep, builder, start, end, attribs, pool)\n{\n  var startLineOffset = rep.lines.offsetOfIndex(start[0]);\n  var endLineOffset = rep.lines.offsetOfIndex(end[0]);\n\n  if (end[0] > start[0])\n  {\n    builder.keep(endLineOffset - startLineOffset - start[1], end[0] - start[0], attribs, pool);\n    builder.keep(end[1], 0, attribs, pool);\n  }\n  else\n  {\n    builder.keep(end[1] - start[1], 0, attribs, pool);\n  }\n}\n\nexports.buildKeepToStartOfRange = function(rep, builder, start)\n{\n  var startLineOffset = rep.lines.offsetOfIndex(start[0]);\n\n  builder.keep(startLineOffset, start[0]);\n  builder.keep(start[1]);\n}\n\n\n}\n, \"ep_etherpad-lite/static/js/skiplist.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code. \n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar Ace2Common = require('./ace2_common'),\n  _ = require('./underscore');\n\nvar noop = Ace2Common.noop;\n\nfunction SkipList()\n{\n  var PROFILER = window.PROFILER;\n  if (!PROFILER)\n  {\n    PROFILER = function()\n    {\n      return {\n        start: noop,\n        mark: noop,\n        literal: noop,\n        end: noop,\n        cancel: noop\n      };\n    };\n  }\n\n  // if there are N elements in the skiplist, \"start\" is element -1 and \"end\" is element N\n  var start = {\n    key: null,\n    levels: 1,\n    upPtrs: [null],\n    downPtrs: [null],\n    downSkips: [1],\n    downSkipWidths: [0]\n  };\n  var end = {\n    key: null,\n    levels: 1,\n    upPtrs: [null],\n    downPtrs: [null],\n    downSkips: [null],\n    downSkipWidths: [null]\n  };\n  var numNodes = 0;\n  var totalWidth = 0;\n  var keyToNodeMap = {};\n  start.downPtrs[0] = end;\n  end.upPtrs[0] = start;\n  // a \"point\" object at location x allows modifications immediately after the first\n  // x elements of the skiplist, such as multiple inserts or deletes.\n  // After an insert or delete using point P, the point is still valid and points\n  // to the same index in the skiplist.  Other operations with other points invalidate\n  // this point.\n\n\n  function _getPoint(targetLoc)\n  {\n    var numLevels = start.levels;\n    var lvl = numLevels - 1;\n    var i = -1,\n        ws = 0;\n    var nodes = new Array(numLevels);\n    var idxs = new Array(numLevels);\n    var widthSkips = new Array(numLevels);\n    nodes[lvl] = start;\n    idxs[lvl] = -1;\n    widthSkips[lvl] = 0;\n    while (lvl >= 0)\n    {\n      var n = nodes[lvl];\n      while (n.downPtrs[lvl] && (i + n.downSkips[lvl] < targetLoc))\n      {\n        i += n.downSkips[lvl];\n        ws += n.downSkipWidths[lvl];\n        n = n.downPtrs[lvl];\n      }\n      nodes[lvl] = n;\n      idxs[lvl] = i;\n      widthSkips[lvl] = ws;\n      lvl--;\n      if (lvl >= 0)\n      {\n        nodes[lvl] = n;\n      }\n    }\n    return {\n      nodes: nodes,\n      idxs: idxs,\n      loc: targetLoc,\n      widthSkips: widthSkips,\n      toString: function()\n      {\n        return \"getPoint(\" + targetLoc + \")\";\n      }\n    };\n  }\n\n  function _getNodeAtOffset(targetOffset)\n  {\n    var i = 0;\n    var n = start;\n    var lvl = start.levels - 1;\n    while (lvl >= 0 && n.downPtrs[lvl])\n    {\n      while (n.downPtrs[lvl] && (i + n.downSkipWidths[lvl] <= targetOffset))\n      {\n        i += n.downSkipWidths[lvl];\n        n = n.downPtrs[lvl];\n      }\n      lvl--;\n    }\n    if (n === start) return (start.downPtrs[0] || null);\n    else if (n === end) return (targetOffset == totalWidth ? (end.upPtrs[0] || null) : null);\n    return n;\n  }\n\n  function _entryWidth(e)\n  {\n    return (e && e.width) || 0;\n  }\n\n  function _insertKeyAtPoint(point, newKey, entry)\n  {\n    var p = PROFILER(\"insertKey\", false);\n    var newNode = {\n      key: newKey,\n      levels: 0,\n      upPtrs: [],\n      downPtrs: [],\n      downSkips: [],\n      downSkipWidths: []\n    };\n    p.mark(\"donealloc\");\n    var pNodes = point.nodes;\n    var pIdxs = point.idxs;\n    var pLoc = point.loc;\n    var widthLoc = point.widthSkips[0] + point.nodes[0].downSkipWidths[0];\n    var newWidth = _entryWidth(entry);\n    p.mark(\"loop1\");\n    \n    // The new node will have at least level 1\n    // With a proability of 0.01^(n-1) the nodes level will be >= n\n    while (newNode.levels == 0 || Math.random() < 0.01)\n    {\n      var lvl = newNode.levels;\n      newNode.levels++;\n      if (lvl == pNodes.length)\n      {\n        // assume we have just passed the end of point.nodes, and reached one level greater\n        // than the skiplist currently supports\n        pNodes[lvl] = start;\n        pIdxs[lvl] = -1;\n        start.levels++;\n        end.levels++;\n        start.downPtrs[lvl] = end;\n        end.upPtrs[lvl] = start;\n        start.downSkips[lvl] = numNodes + 1;\n        start.downSkipWidths[lvl] = totalWidth;\n        point.widthSkips[lvl] = 0;\n      }\n      var me = newNode;\n      var up = pNodes[lvl];\n      var down = up.downPtrs[lvl];\n      var skip1 = pLoc - pIdxs[lvl];\n      var skip2 = up.downSkips[lvl] + 1 - skip1;\n      up.downSkips[lvl] = skip1;\n      up.downPtrs[lvl] = me;\n      me.downSkips[lvl] = skip2;\n      me.upPtrs[lvl] = up;\n      me.downPtrs[lvl] = down;\n      down.upPtrs[lvl] = me;\n      var widthSkip1 = widthLoc - point.widthSkips[lvl];\n      var widthSkip2 = up.downSkipWidths[lvl] + newWidth - widthSkip1;\n      up.downSkipWidths[lvl] = widthSkip1;\n      me.downSkipWidths[lvl] = widthSkip2;\n    }\n    p.mark(\"loop2\");\n    p.literal(pNodes.length, \"PNL\");\n    for (var lvl = newNode.levels; lvl < pNodes.length; lvl++)\n    {\n      var up = pNodes[lvl];\n      up.downSkips[lvl]++;\n      up.downSkipWidths[lvl] += newWidth;\n    }\n    p.mark(\"map\");\n    keyToNodeMap['$KEY$' + newKey] = newNode;\n    numNodes++;\n    totalWidth += newWidth;\n    p.end();\n  }\n\n  function _getNodeAtPoint(point)\n  {\n    return point.nodes[0].downPtrs[0];\n  }\n\n  function _incrementPoint(point)\n  {\n    point.loc++;\n    for (var i = 0; i < point.nodes.length; i++)\n    {\n      if (point.idxs[i] + point.nodes[i].downSkips[i] < point.loc)\n      {\n        point.idxs[i] += point.nodes[i].downSkips[i];\n        point.widthSkips[i] += point.nodes[i].downSkipWidths[i];\n        point.nodes[i] = point.nodes[i].downPtrs[i];\n      }\n    }\n  }\n\n  function _deleteKeyAtPoint(point)\n  {\n    var elem = point.nodes[0].downPtrs[0];\n    var elemWidth = _entryWidth(elem.entry);\n    for (var i = 0; i < point.nodes.length; i++)\n    {\n      if (i < elem.levels)\n      {\n        var up = elem.upPtrs[i];\n        var down = elem.downPtrs[i];\n        var totalSkip = up.downSkips[i] + elem.downSkips[i] - 1;\n        up.downPtrs[i] = down;\n        down.upPtrs[i] = up;\n        up.downSkips[i] = totalSkip;\n        var totalWidthSkip = up.downSkipWidths[i] + elem.downSkipWidths[i] - elemWidth;\n        up.downSkipWidths[i] = totalWidthSkip;\n      }\n      else\n      {\n        var up = point.nodes[i];\n        var down = up.downPtrs[i];\n        up.downSkips[i]--;\n        up.downSkipWidths[i] -= elemWidth;\n      }\n    }\n    delete keyToNodeMap['$KEY$' + elem.key];\n    numNodes--;\n    totalWidth -= elemWidth;\n  }\n\n  function _propagateWidthChange(node)\n  {\n    var oldWidth = node.downSkipWidths[0];\n    var newWidth = _entryWidth(node.entry);\n    var widthChange = newWidth - oldWidth;\n    var n = node;\n    var lvl = 0;\n    while (lvl < n.levels)\n    {\n      n.downSkipWidths[lvl] += widthChange;\n      lvl++;\n      while (lvl >= n.levels && n.upPtrs[lvl - 1])\n      {\n        n = n.upPtrs[lvl - 1];\n      }\n    }\n    totalWidth += widthChange;\n  }\n\n  function _getNodeIndex(node, byWidth)\n  {\n    var dist = (byWidth ? 0 : -1);\n    var n = node;\n    while (n !== start)\n    {\n      var lvl = n.levels - 1;\n      n = n.upPtrs[lvl];\n      if (byWidth) dist += n.downSkipWidths[lvl];\n      else dist += n.downSkips[lvl];\n    }\n    return dist;\n  }\n\n  function _getNodeByKey(key)\n  {\n    return keyToNodeMap['$KEY$' + key];\n  }\n\n  // Returns index of first entry such that entryFunc(entry) is truthy,\n  // or length() if no such entry.  Assumes all falsy entries come before\n  // all truthy entries.\n\n\n  function _search(entryFunc)\n  {\n    var low = start;\n    var lvl = start.levels - 1;\n    var lowIndex = -1;\n\n    function f(node)\n    {\n      if (node === start) return false;\n      else if (node === end) return true;\n      else return entryFunc(node.entry);\n    }\n    while (lvl >= 0)\n    {\n      var nextLow = low.downPtrs[lvl];\n      while (!f(nextLow))\n      {\n        lowIndex += low.downSkips[lvl];\n        low = nextLow;\n        nextLow = low.downPtrs[lvl];\n      }\n      lvl--;\n    }\n    return lowIndex + 1;\n  }\n\n/*\nThe skip-list contains \"entries\", JavaScript objects that each must have a unique \"key\" property\nthat is a string.\n  */\n  var self = this;\n  _.extend(this, {\n    length: function()\n    {\n      return numNodes;\n    },\n    atIndex: function(i)\n    {\n      if (i < 0) console.warn(\"atIndex(\" + i + \")\");\n      if (i >= numNodes) console.warn(\"atIndex(\" + i + \">=\" + numNodes + \")\");\n      return _getNodeAtPoint(_getPoint(i)).entry;\n    },\n    // differs from Array.splice() in that new elements are in an array, not varargs\n    splice: function(start, deleteCount, newEntryArray)\n    {\n      if (start < 0) console.warn(\"splice(\" + start + \", ...)\");\n      if (start + deleteCount > numNodes)\n      {\n        console.warn(\"splice(\" + start + \", \" + deleteCount + \", ...), N=\" + numNodes);\n        console.warn(\"%s %s %s\", typeof start, typeof deleteCount, typeof numNodes);\n        console.trace();\n      }\n\n      if (!newEntryArray) newEntryArray = [];\n      var pt = _getPoint(start);\n      for (var i = 0; i < deleteCount; i++)\n      {\n        _deleteKeyAtPoint(pt);\n      }\n      for (var i = (newEntryArray.length - 1); i >= 0; i--)\n      {\n        var entry = newEntryArray[i];\n        _insertKeyAtPoint(pt, entry.key, entry);\n        var node = _getNodeByKey(entry.key);\n        node.entry = entry;\n      }\n    },\n    next: function(entry)\n    {\n      return _getNodeByKey(entry.key).downPtrs[0].entry || null;\n    },\n    prev: function(entry)\n    {\n      return _getNodeByKey(entry.key).upPtrs[0].entry || null;\n    },\n    push: function(entry)\n    {\n      self.splice(numNodes, 0, [entry]);\n    },\n    slice: function(start, end)\n    {\n      // act like Array.slice()\n      if (start === undefined) start = 0;\n      else if (start < 0) start += numNodes;\n      if (end === undefined) end = numNodes;\n      else if (end < 0) end += numNodes;\n\n      if (start < 0) start = 0;\n      if (start > numNodes) start = numNodes;\n      if (end < 0) end = 0;\n      if (end > numNodes) end = numNodes;\n\n      dmesg(String([start, end, numNodes]));\n      if (end <= start) return [];\n      var n = self.atIndex(start);\n      var array = [n];\n      for (var i = 1; i < (end - start); i++)\n      {\n        n = self.next(n);\n        array.push(n);\n      }\n      return array;\n    },\n    atKey: function(key)\n    {\n      return _getNodeByKey(key).entry;\n    },\n    indexOfKey: function(key)\n    {\n      return _getNodeIndex(_getNodeByKey(key));\n    },\n    indexOfEntry: function(entry)\n    {\n      return self.indexOfKey(entry.key);\n    },\n    containsKey: function(key)\n    {\n      return !!(_getNodeByKey(key));\n    },\n    // gets the last entry starting at or before the offset\n    atOffset: function(offset)\n    {\n      return _getNodeAtOffset(offset).entry;\n    },\n    keyAtOffset: function(offset)\n    {\n      return self.atOffset(offset).key;\n    },\n    offsetOfKey: function(key)\n    {\n      return _getNodeIndex(_getNodeByKey(key), true);\n    },\n    offsetOfEntry: function(entry)\n    {\n      return self.offsetOfKey(entry.key);\n    },\n    setEntryWidth: function(entry, width)\n    {\n      entry.width = width;\n      _propagateWidthChange(_getNodeByKey(entry.key));\n    },\n    totalWidth: function()\n    {\n      return totalWidth;\n    },\n    offsetOfIndex: function(i)\n    {\n      if (i < 0) return 0;\n      if (i >= numNodes) return totalWidth;\n      return self.offsetOfEntry(self.atIndex(i));\n    },\n    indexOfOffset: function(offset)\n    {\n      if (offset <= 0) return 0;\n      if (offset >= totalWidth) return numNodes;\n      return self.indexOfEntry(self.atOffset(offset));\n    },\n    search: function(entryFunc)\n    {\n      return _search(entryFunc);\n    },\n    //debugToString: _debugToString,\n    debugGetPoint: _getPoint,\n    debugDepth: function()\n    {\n      return start.levels;\n    }\n  });\n}\n\nmodule.exports = SkipList;\n\n}\n, \"ep_etherpad-lite/static/js/cssmanager.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code.\n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nfunction makeCSSManager(emptyStylesheetTitle, doc)\n{\n  if (doc === true)\n  {\n    doc = 'parent';\n  } else if (!doc) {\n    doc = 'inner';\n  }\n\n  function getSheetByTitle(title)\n  {\n    if (doc === 'parent')\n    {\n      win = window.parent.parent;\n    }\n    else if (doc === 'inner') {\n      win = window;\n    }\n    else if (doc === 'outer') {\n      win = window.parent;\n    }\n    else {\n        throw \"Unknown dynamic style container\";\n    }\n    var allSheets = win.document.styleSheets;\n\n    for (var i = 0; i < allSheets.length; i++)\n    {\n      var s = allSheets[i];\n      if (s.title == title)\n      {\n        return s;\n      }\n    }\n    return null;\n  }\n\n  var browserSheet = getSheetByTitle(emptyStylesheetTitle);\n\n  function browserRules()\n  {\n    return (browserSheet.cssRules || browserSheet.rules);\n  }\n\n  function browserDeleteRule(i)\n  {\n    if (browserSheet.deleteRule) browserSheet.deleteRule(i);\n    else browserSheet.removeRule(i);\n  }\n\n  function browserInsertRule(i, selector)\n  {\n    if (browserSheet.insertRule) browserSheet.insertRule(selector + ' {}', i);\n    else browserSheet.addRule(selector, null, i);\n  }\n  var selectorList = [];\n\n  function indexOfSelector(selector)\n  {\n    for (var i = 0; i < selectorList.length; i++)\n    {\n      if (selectorList[i] == selector)\n      {\n        return i;\n      }\n    }\n    return -1;\n  }\n\n  function selectorStyle(selector)\n  {\n    var i = indexOfSelector(selector);\n    if (i < 0)\n    {\n      // add selector\n      browserInsertRule(0, selector);\n      selectorList.splice(0, 0, selector);\n      i = 0;\n    }\n    return browserRules().item(i).style;\n  }\n\n  function removeSelectorStyle(selector)\n  {\n    var i = indexOfSelector(selector);\n    if (i >= 0)\n    {\n      browserDeleteRule(i);\n      selectorList.splice(i, 1);\n    }\n  }\n\n  return {\n    selectorStyle: selectorStyle,\n    removeSelectorStyle: removeSelectorStyle,\n    info: function()\n    {\n      return selectorList.length + \":\" + browserRules().length;\n    }\n  };\n}\n\nexports.makeCSSManager = makeCSSManager;\n\n}\n, \"ep_etherpad-lite/static/js/colorutils.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code. \n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n// DO NOT EDIT THIS FILE, edit infrastructure/ace/www/colorutils.js\n// THIS FILE IS ALSO SERVED AS CLIENT-SIDE JS\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar colorutils = {};\n\n// Check that a given value is a css hex color value, e.g.\n// \"#ffffff\" or \"#fff\"\ncolorutils.isCssHex = function(cssColor)\n{\n  return /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(cssColor);\n}\n\n// \"#ffffff\" or \"#fff\" or \"ffffff\" or \"fff\" to [1.0, 1.0, 1.0]\ncolorutils.css2triple = function(cssColor)\n{\n  var sixHex = colorutils.css2sixhex(cssColor);\n\n  function hexToFloat(hh)\n  {\n    return Number(\"0x\" + hh) / 255;\n  }\n  return [hexToFloat(sixHex.substr(0, 2)), hexToFloat(sixHex.substr(2, 2)), hexToFloat(sixHex.substr(4, 2))];\n}\n\n// \"#ffffff\" or \"#fff\" or \"ffffff\" or \"fff\" to \"ffffff\"\ncolorutils.css2sixhex = function(cssColor)\n{\n  var h = /[0-9a-fA-F]+/.exec(cssColor)[0];\n  if (h.length != 6)\n  {\n    var a = h.charAt(0);\n    var b = h.charAt(1);\n    var c = h.charAt(2);\n    h = a + a + b + b + c + c;\n  }\n  return h;\n}\n\n// [1.0, 1.0, 1.0] -> \"#ffffff\"\ncolorutils.triple2css = function(triple)\n{\n  function floatToHex(n)\n  {\n    var n2 = colorutils.clamp(Math.round(n * 255), 0, 255);\n    return (\"0\" + n2.toString(16)).slice(-2);\n  }\n  return \"#\" + floatToHex(triple[0]) + floatToHex(triple[1]) + floatToHex(triple[2]);\n}\n\n\ncolorutils.clamp = function(v, bot, top)\n{\n  return v < bot ? bot : (v > top ? top : v);\n};\ncolorutils.min3 = function(a, b, c)\n{\n  return (a < b) ? (a < c ? a : c) : (b < c ? b : c);\n};\ncolorutils.max3 = function(a, b, c)\n{\n  return (a > b) ? (a > c ? a : c) : (b > c ? b : c);\n};\ncolorutils.colorMin = function(c)\n{\n  return colorutils.min3(c[0], c[1], c[2]);\n};\ncolorutils.colorMax = function(c)\n{\n  return colorutils.max3(c[0], c[1], c[2]);\n};\ncolorutils.scale = function(v, bot, top)\n{\n  return colorutils.clamp(bot + v * (top - bot), 0, 1);\n};\ncolorutils.unscale = function(v, bot, top)\n{\n  return colorutils.clamp((v - bot) / (top - bot), 0, 1);\n};\n\ncolorutils.scaleColor = function(c, bot, top)\n{\n  return [colorutils.scale(c[0], bot, top), colorutils.scale(c[1], bot, top), colorutils.scale(c[2], bot, top)];\n}\n\ncolorutils.unscaleColor = function(c, bot, top)\n{\n  return [colorutils.unscale(c[0], bot, top), colorutils.unscale(c[1], bot, top), colorutils.unscale(c[2], bot, top)];\n}\n\ncolorutils.luminosity = function(c)\n{\n  // rule of thumb for RGB brightness; 1.0 is white\n  return c[0] * 0.30 + c[1] * 0.59 + c[2] * 0.11;\n}\n\ncolorutils.saturate = function(c)\n{\n  var min = colorutils.colorMin(c);\n  var max = colorutils.colorMax(c);\n  if (max - min <= 0) return [1.0, 1.0, 1.0];\n  return colorutils.unscaleColor(c, min, max);\n}\n\ncolorutils.blend = function(c1, c2, t)\n{\n  return [colorutils.scale(t, c1[0], c2[0]), colorutils.scale(t, c1[1], c2[1]), colorutils.scale(t, c1[2], c2[2])];\n}\n\ncolorutils.invert = function(c)\n{\n  return [1 - c[0], 1 - c[1], 1- c[2]];\n}\n\ncolorutils.complementary = function(c)\n{\n  var inv = colorutils.invert(c);\n  return [\n    (inv[0] >= c[0]) ? Math.min(inv[0] * 1.30, 1) : (c[0] * 0.30),\n    (inv[1] >= c[1]) ? Math.min(inv[1] * 1.59, 1) : (c[1] * 0.59),\n    (inv[2] >= c[2]) ? Math.min(inv[2] * 1.11, 1) : (c[2] * 0.11)\n  ];\n}\n\nexports.colorutils = colorutils;\n\n}\n, \"ep_etherpad-lite/static/js/undomodule.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code. \n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar Changeset = require('./Changeset');\nvar _ = require('./underscore');\n\nvar undoModule = (function()\n{\n  var stack = (function()\n  {\n    var stackElements = [];\n    // two types of stackElements:\n    // 1) { elementType: UNDOABLE_EVENT, eventType: \"anything\", [backset: <changeset>,]\n    //      [selStart: <char number>, selEnd: <char number>, selFocusAtStart: <boolean>] }\n    // 2) { elementType: EXTERNAL_CHANGE, changeset: <changeset> }\n    // invariant: no two consecutive EXTERNAL_CHANGEs\n    var numUndoableEvents = 0;\n\n    var UNDOABLE_EVENT = \"undoableEvent\";\n    var EXTERNAL_CHANGE = \"externalChange\";\n\n    function clearStack()\n    {\n      stackElements.length = 0;\n      stackElements.push(\n      {\n        elementType: UNDOABLE_EVENT,\n        eventType: \"bottom\"\n      });\n      numUndoableEvents = 1;\n    }\n    clearStack();\n\n    function pushEvent(event)\n    {\n      var e = _.extend(\n      {}, event);\n      e.elementType = UNDOABLE_EVENT;\n      stackElements.push(e);\n      numUndoableEvents++;\n      //dmesg(\"pushEvent backset: \"+event.backset);\n    }\n\n    function pushExternalChange(cs)\n    {\n      var idx = stackElements.length - 1;\n      if (stackElements[idx].elementType == EXTERNAL_CHANGE)\n      {\n        stackElements[idx].changeset = Changeset.compose(stackElements[idx].changeset, cs, getAPool());\n      }\n      else\n      {\n        stackElements.push(\n        {\n          elementType: EXTERNAL_CHANGE,\n          changeset: cs\n        });\n      }\n    }\n\n    function _exposeEvent(nthFromTop)\n    {\n      // precond: 0 <= nthFromTop < numUndoableEvents\n      var targetIndex = stackElements.length - 1 - nthFromTop;\n      var idx = stackElements.length - 1;\n      while (idx > targetIndex || stackElements[idx].elementType == EXTERNAL_CHANGE)\n      {\n        if (stackElements[idx].elementType == EXTERNAL_CHANGE)\n        {\n          var ex = stackElements[idx];\n          var un = stackElements[idx - 1];\n          if (un.backset)\n          {\n            var excs = ex.changeset;\n            var unbs = un.backset;\n            un.backset = Changeset.follow(excs, un.backset, false, getAPool());\n            ex.changeset = Changeset.follow(unbs, ex.changeset, true, getAPool());\n            if ((typeof un.selStart) == \"number\")\n            {\n              var newSel = Changeset.characterRangeFollow(excs, un.selStart, un.selEnd);\n              un.selStart = newSel[0];\n              un.selEnd = newSel[1];\n              if (un.selStart == un.selEnd)\n              {\n                un.selFocusAtStart = false;\n              }\n            }\n          }\n          stackElements[idx - 1] = ex;\n          stackElements[idx] = un;\n          if (idx >= 2 && stackElements[idx - 2].elementType == EXTERNAL_CHANGE)\n          {\n            ex.changeset = Changeset.compose(stackElements[idx - 2].changeset, ex.changeset, getAPool());\n            stackElements.splice(idx - 2, 1);\n            idx--;\n          }\n        }\n        else\n        {\n          idx--;\n        }\n      }\n    }\n\n    function getNthFromTop(n)\n    {\n      // precond: 0 <= n < numEvents()\n      _exposeEvent(n);\n      return stackElements[stackElements.length - 1 - n];\n    }\n\n    function numEvents()\n    {\n      return numUndoableEvents;\n    }\n\n    function popEvent()\n    {\n      // precond: numEvents() > 0\n      _exposeEvent(0);\n      numUndoableEvents--;\n      return stackElements.pop();\n    }\n\n    return {\n      numEvents: numEvents,\n      popEvent: popEvent,\n      pushEvent: pushEvent,\n      pushExternalChange: pushExternalChange,\n      clearStack: clearStack,\n      getNthFromTop: getNthFromTop\n    };\n  })();\n\n  // invariant: stack always has at least one undoable event\n  var undoPtr = 0; // zero-index from top of stack, 0 == top\n\n  function clearHistory()\n  {\n    stack.clearStack();\n    undoPtr = 0;\n  }\n\n  function _charOccurrences(str, c)\n  {\n    var i = 0;\n    var count = 0;\n    while (i >= 0 && i < str.length)\n    {\n      i = str.indexOf(c, i);\n      if (i >= 0)\n      {\n        count++;\n        i++;\n      }\n    }\n    return count;\n  }\n\n  function _opcodeOccurrences(cs, opcode)\n  {\n    return _charOccurrences(Changeset.unpack(cs).ops, opcode);\n  }\n\n  function _mergeChangesets(cs1, cs2)\n  {\n    if (!cs1) return cs2;\n    if (!cs2) return cs1;\n\n    // Rough heuristic for whether changesets should be considered one action:\n    // each does exactly one insertion, no dels, and the composition does also; or\n    // each does exactly one deletion, no ins, and the composition does also.\n    // A little weird in that it won't merge \"make bold\" with \"insert char\"\n    // but will merge \"make bold and insert char\" with \"insert char\",\n    // though that isn't expected to come up.\n    var plusCount1 = _opcodeOccurrences(cs1, '+');\n    var plusCount2 = _opcodeOccurrences(cs2, '+');\n    var minusCount1 = _opcodeOccurrences(cs1, '-');\n    var minusCount2 = _opcodeOccurrences(cs2, '-');\n    if (plusCount1 == 1 && plusCount2 == 1 && minusCount1 == 0 && minusCount2 == 0)\n    {\n      var merge = Changeset.compose(cs1, cs2, getAPool());\n      var plusCount3 = _opcodeOccurrences(merge, '+');\n      var minusCount3 = _opcodeOccurrences(merge, '-');\n      if (plusCount3 == 1 && minusCount3 == 0)\n      {\n        return merge;\n      }\n    }\n    else if (plusCount1 == 0 && plusCount2 == 0 && minusCount1 == 1 && minusCount2 == 1)\n    {\n      var merge = Changeset.compose(cs1, cs2, getAPool());\n      var plusCount3 = _opcodeOccurrences(merge, '+');\n      var minusCount3 = _opcodeOccurrences(merge, '-');\n      if (plusCount3 == 0 && minusCount3 == 1)\n      {\n        return merge;\n      }\n    }\n    return null;\n  }\n\n  function reportEvent(event)\n  {\n    var topEvent = stack.getNthFromTop(0);\n\n    function applySelectionToTop()\n    {\n      if ((typeof event.selStart) == \"number\")\n      {\n        topEvent.selStart = event.selStart;\n        topEvent.selEnd = event.selEnd;\n        topEvent.selFocusAtStart = event.selFocusAtStart;\n      }\n    }\n\n    if ((!event.backset) || Changeset.isIdentity(event.backset))\n    {\n      applySelectionToTop();\n    }\n    else\n    {\n      var merged = false;\n      if (topEvent.eventType == event.eventType)\n      {\n        var merge = _mergeChangesets(event.backset, topEvent.backset);\n        if (merge)\n        {\n          topEvent.backset = merge;\n          //dmesg(\"reportEvent merge: \"+merge);\n          applySelectionToTop();\n          merged = true;\n        }\n      }\n      if (!merged)\n      {\n        stack.pushEvent(event);\n      }\n      undoPtr = 0;\n    }\n\n  }\n\n  function reportExternalChange(changeset)\n  {\n    if (changeset && !Changeset.isIdentity(changeset))\n    {\n      stack.pushExternalChange(changeset);\n    }\n  }\n\n  function _getSelectionInfo(event)\n  {\n    if ((typeof event.selStart) != \"number\")\n    {\n      return null;\n    }\n    else\n    {\n      return {\n        selStart: event.selStart,\n        selEnd: event.selEnd,\n        selFocusAtStart: event.selFocusAtStart\n      };\n    }\n  }\n\n  // For \"undo\" and \"redo\", the change event must be returned\n  // by eventFunc and NOT reported through the normal mechanism.\n  // \"eventFunc\" should take a changeset and an optional selection info object,\n  // or can be called with no arguments to mean that no undo is possible.\n  // \"eventFunc\" will be called exactly once.\n\n  function performUndo(eventFunc)\n  {\n    if (undoPtr < stack.numEvents() - 1)\n    {\n      var backsetEvent = stack.getNthFromTop(undoPtr);\n      var selectionEvent = stack.getNthFromTop(undoPtr + 1);\n      var undoEvent = eventFunc(backsetEvent.backset, _getSelectionInfo(selectionEvent));\n      stack.pushEvent(undoEvent);\n      undoPtr += 2;\n    }\n    else eventFunc();\n  }\n\n  function performRedo(eventFunc)\n  {\n    if (undoPtr >= 2)\n    {\n      var backsetEvent = stack.getNthFromTop(0);\n      var selectionEvent = stack.getNthFromTop(1);\n      eventFunc(backsetEvent.backset, _getSelectionInfo(selectionEvent));\n      stack.popEvent();\n      undoPtr -= 2;\n    }\n    else eventFunc();\n  }\n\n  function getAPool()\n  {\n    return undoModule.apool;\n  }\n\n  return {\n    clearHistory: clearHistory,\n    reportEvent: reportEvent,\n    reportExternalChange: reportExternalChange,\n    performUndo: performUndo,\n    performRedo: performRedo,\n    enabled: true,\n    apool: null\n  }; // apool is filled in by caller\n})();\n\nexports.undoModule = undoModule;\n\n}\n, \"unorm.js\": null\n, \"ep_etherpad-lite/static/js/contentcollector.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code. \n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n// THIS FILE IS ALSO AN APPJET MODULE: etherpad.collab.ace.contentcollector\n// %APPJET%: import(\"etherpad.collab.ace.easysync2.Changeset\");\n// %APPJET%: import(\"etherpad.admin.plugins\");\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar _MAX_LIST_LEVEL = 16;\n\nvar UNorm = require('unorm');\nvar Changeset = require('./Changeset');\nvar hooks = require('./pluginfw/hooks');\nvar _ = require('./underscore');\n\nfunction sanitizeUnicode(s)\n{\n  return UNorm.nfc(s);\n}\n\nfunction makeContentCollector(collectStyles, abrowser, apool, domInterface, className2Author)\n{\n  abrowser = abrowser || {};\n  // I don't like the above.\n\n  var dom = domInterface || {\n    isNodeText: function(n)\n    {\n      return (n.nodeType == 3);\n    },\n    nodeTagName: function(n)\n    {\n      return n.tagName;\n    },\n    nodeValue: function(n)\n    {\n      return n.nodeValue;\n    },\n    nodeNumChildren: function(n)\n    {\n      if(n.childNodes == null) return 0;\n      return n.childNodes.length;\n    },\n    nodeChild: function(n, i)\n    {\n      if(n.childNodes.item == null){\n        return n.childNodes[i];\n      }\n      return n.childNodes.item(i);\n    },\n    nodeProp: function(n, p)\n    {\n      return n[p];\n    },\n    nodeAttr: function(n, a)\n    {\n      if(n.getAttribute != null) return n.getAttribute(a);\n      if(n.attribs != null) return n.attribs[a];\n      return null;\n    },\n    optNodeInnerHTML: function(n)\n    {\n      return n.innerHTML;\n    }\n  };\n\n  var _blockElems = {\n    \"div\": 1,\n    \"p\": 1,\n    \"pre\": 1,\n    \"li\": 1\n  };\n\n  _.each(hooks.callAll('ccRegisterBlockElements'), function(element){\n    _blockElems[element] = 1;\n  });\n\n  function isBlockElement(n)\n  {\n    return !!_blockElems[(dom.nodeTagName(n) || \"\").toLowerCase()];\n  }\n\n  function textify(str)\n  {\n    return sanitizeUnicode(\n    str.replace(/\\n/g, '').replace(/[\\n\\r ]/g, ' ').replace(/\\xa0/g, ' ').replace(/\\t/g, '        '));\n  }\n\n  function getAssoc(node, name)\n  {\n    return dom.nodeProp(node, \"_magicdom_\" + name);\n  }\n\n  var lines = (function()\n  {\n    var textArray = [];\n    var attribsArray = [];\n    var attribsBuilder = null;\n    var op = Changeset.newOp('+');\n    var self = {\n      length: function()\n      {\n        return textArray.length;\n      },\n      atColumnZero: function()\n      {\n        return textArray[textArray.length - 1] === \"\";\n      },\n      startNew: function()\n      {\n        textArray.push(\"\");\n        self.flush(true);\n        attribsBuilder = Changeset.smartOpAssembler();\n      },\n      textOfLine: function(i)\n      {\n        return textArray[i];\n      },\n      appendText: function(txt, attrString)\n      {\n        textArray[textArray.length - 1] += txt;\n        //dmesg(txt+\" / \"+attrString);\n        op.attribs = attrString;\n        op.chars = txt.length;\n        attribsBuilder.append(op);\n      },\n      textLines: function()\n      {\n        return textArray.slice();\n      },\n      attribLines: function()\n      {\n        return attribsArray;\n      },\n      // call flush only when you're done\n      flush: function(withNewline)\n      {\n        if (attribsBuilder)\n        {\n          attribsArray.push(attribsBuilder.toString());\n          attribsBuilder = null;\n        }\n      }\n    };\n    self.startNew();\n    return self;\n  }());\n  var cc = {};\n\n  function _ensureColumnZero(state)\n  {\n    if (!lines.atColumnZero())\n    {\n      cc.startNewLine(state);\n    }\n  }\n  var selection, startPoint, endPoint;\n  var selStart = [-1, -1],\n      selEnd = [-1, -1];\n  function _isEmpty(node, state)\n  {\n    // consider clean blank lines pasted in IE to be empty\n    if (dom.nodeNumChildren(node) == 0) return true;\n    if (dom.nodeNumChildren(node) == 1 && getAssoc(node, \"shouldBeEmpty\") && dom.optNodeInnerHTML(node) == \"&nbsp;\" && !getAssoc(node, \"unpasted\"))\n    {\n      if (state)\n      {\n        var child = dom.nodeChild(node, 0);\n        _reachPoint(child, 0, state);\n        _reachPoint(child, 1, state);\n      }\n      return true;\n    }\n    return false;\n  }\n\n  function _pointHere(charsAfter, state)\n  {\n    var ln = lines.length() - 1;\n    var chr = lines.textOfLine(ln).length;\n    if (chr == 0 && !_.isEmpty(state.lineAttributes))\n    {\n      chr += 1; // listMarker\n    }\n    chr += charsAfter;\n    return [ln, chr];\n  }\n\n  function _reachBlockPoint(nd, idx, state)\n  {\n    if (!dom.isNodeText(nd)) _reachPoint(nd, idx, state);\n  }\n\n  function _reachPoint(nd, idx, state)\n  {\n    if (startPoint && nd == startPoint.node && startPoint.index == idx)\n    {\n      selStart = _pointHere(0, state);\n    }\n    if (endPoint && nd == endPoint.node && endPoint.index == idx)\n    {\n      selEnd = _pointHere(0, state);\n    }\n  }\n  cc.incrementFlag = function(state, flagName)\n  {\n    state.flags[flagName] = (state.flags[flagName] || 0) + 1;\n  }\n  cc.decrementFlag = function(state, flagName)\n  {\n    state.flags[flagName]--;\n  }\n  cc.incrementAttrib = function(state, attribName)\n  {\n    if (!state.attribs[attribName])\n    {\n      state.attribs[attribName] = 1;\n    }\n    else\n    {\n      state.attribs[attribName]++;\n    }\n    _recalcAttribString(state);\n  }\n  cc.decrementAttrib = function(state, attribName)\n  {\n    state.attribs[attribName]--;\n    _recalcAttribString(state);\n  }\n\n  function _enterList(state, listType)\n  {\n    var oldListType = state.lineAttributes['list'];\n    if (listType != 'none')\n    {\n      state.listNesting = (state.listNesting || 0) + 1;\n    }\n    \n    if(listType === 'none' || !listType ){\n      delete state.lineAttributes['list']; \n    }\n    else{\n      state.lineAttributes['list'] = listType;\n    }\n    \n    _recalcAttribString(state);\n    return oldListType;\n  }\n\n  function _exitList(state, oldListType)\n  {\n    if (state.lineAttributes['list'])\n    {\n      state.listNesting--;\n    }\n    if (oldListType && oldListType != 'none') { state.lineAttributes['list'] = oldListType; }\n    else { delete state.lineAttributes['list']; }\n    _recalcAttribString(state);\n  }\n\n  function _enterAuthor(state, author)\n  {\n    var oldAuthor = state.author;\n    state.authorLevel = (state.authorLevel || 0) + 1;\n    state.author = author;\n    _recalcAttribString(state);\n    return oldAuthor;\n  }\n\n  function _exitAuthor(state, oldAuthor)\n  {\n    state.authorLevel--;\n    state.author = oldAuthor;\n    _recalcAttribString(state);\n  }\n\n  function _recalcAttribString(state)\n  {\n    var lst = [];\n    for (var a in state.attribs)\n    {\n      if (state.attribs[a])\n      {\n        // The following splitting of the attribute name is a workaround\n        // to enable the content collector to store key-value attributes\n        // see https://github.com/ether/etherpad-lite/issues/2567 for more information\n        // in long term the contentcollector should be refactored to get rid of this workaround\n        var ATTRIBUTE_SPLIT_STRING = \"::\";\n        \n        // see if attributeString is splittable\n        var attributeSplits = a.split(ATTRIBUTE_SPLIT_STRING);\n        if (attributeSplits.length > 1) {\n            // the attribute name follows the convention key::value\n            // so save it as a key value attribute\n            lst.push([attributeSplits[0], attributeSplits[1]]);\n        } else {\n            // the \"normal\" case, the attribute is just a switch\n            // so set it true\n            lst.push([a, 'true']);\n        }\n      }\n    }\n    if (state.authorLevel > 0)\n    {\n      var authorAttrib = ['author', state.author];\n      if (apool.putAttrib(authorAttrib, true) >= 0)\n      {\n        // require that author already be in pool\n        // (don't add authors from other documents, etc.)\n        lst.push(authorAttrib);\n      }\n    }\n    state.attribString = Changeset.makeAttribsString('+', lst, apool);\n  }\n\n  function _produceLineAttributesMarker(state)\n  {\n    // TODO: This has to go to AttributeManager.\n    var attributes = [\n      ['lmkr', '1'],\n      ['insertorder', 'first']\n    ].concat(\n      _.map(state.lineAttributes,function(value,key){\n        return [key, value];\n      })\n    );\n    lines.appendText('*', Changeset.makeAttribsString('+', attributes , apool));\n  }\n  cc.startNewLine = function(state)\n  {\n    if (state)\n    {\n      var atBeginningOfLine = lines.textOfLine(lines.length() - 1).length == 0;\n      if (atBeginningOfLine && !_.isEmpty(state.lineAttributes))\n      {\n        _produceLineAttributesMarker(state);\n      }\n    }\n    lines.startNew();\n  }\n  cc.notifySelection = function(sel)\n  {\n    if (sel)\n    {\n      selection = sel;\n      startPoint = selection.startPoint;\n      endPoint = selection.endPoint;\n    }\n  };\n  cc.doAttrib = function(state, na)\n  {\n    state.localAttribs = (state.localAttribs || []);\n    state.localAttribs.push(na);\n    cc.incrementAttrib(state, na);\n  };\n  cc.collectContent = function(node, state)\n  {\n    if (!state)\n    {\n      state = {\n        flags: { /*name -> nesting counter*/\n        },\n        localAttribs: null,\n        attribs: { /*name -> nesting counter*/\n        },\n        attribString: '',\n        // lineAttributes maintain a map from attributes to attribute values set on a line\n        lineAttributes: {\n          /*\n          example:\n          'list': 'bullet1',\n          */\n        }\n      };\n    }\n    var localAttribs = state.localAttribs;\n    state.localAttribs = null;\n    var isBlock = isBlockElement(node);\n    var isEmpty = _isEmpty(node, state);\n    if (isBlock) _ensureColumnZero(state);\n    var startLine = lines.length() - 1;\n    _reachBlockPoint(node, 0, state);\n    if (dom.isNodeText(node))\n    {\n      var txt = dom.nodeValue(node);\n      var tname = dom.nodeAttr(node.parentNode,\"name\");\n\n      var txtFromHook = hooks.callAll('collectContentLineText', {\n        cc: this,\n        state: state,\n        tname: tname,\n        node:node,\n        text:txt,\n        styl: null,\n        cls: null\n      });  \n      var txt = (typeof(txtFromHook)=='object'&&txtFromHook.length==0)?dom.nodeValue(node):txtFromHook[0];\n\n      var rest = '';\n      var x = 0; // offset into original text\n      if (txt.length == 0)\n      {\n        if (startPoint && node == startPoint.node)\n        {\n          selStart = _pointHere(0, state);\n        }\n        if (endPoint && node == endPoint.node)\n        {\n          selEnd = _pointHere(0, state);\n        }\n      }\n      while (txt.length > 0)\n      {\n        var consumed = 0;\n        if (state.flags.preMode)\n        {\n          var firstLine = txt.split('\\n', 1)[0];\n          consumed = firstLine.length + 1;\n          rest = txt.substring(consumed);\n          txt = firstLine;\n        }\n        else\n        { /* will only run this loop body once */\n        }\n        if (startPoint && node == startPoint.node && startPoint.index - x <= txt.length)\n        {\n          selStart = _pointHere(startPoint.index - x, state);\n        }\n        if (endPoint && node == endPoint.node && endPoint.index - x <= txt.length)\n        {\n          selEnd = _pointHere(endPoint.index - x, state);\n        }\n        var txt2 = txt;\n        if ((!state.flags.preMode) && /^[\\r\\n]*$/.exec(txt))\n        {\n          // prevents textnodes containing just \"\\n\" from being significant\n          // in safari when pasting text, now that we convert them to\n          // spaces instead of removing them, because in other cases\n          // removing \"\\n\" from pasted HTML will collapse words together.\n          txt2 = \"\";\n        }\n        var atBeginningOfLine = lines.textOfLine(lines.length() - 1).length == 0;\n        if (atBeginningOfLine)\n        {\n          // newlines in the source mustn't become spaces at beginning of line box\n          txt2 = txt2.replace(/^\\n*/, '');\n        }\n        if (atBeginningOfLine && !_.isEmpty(state.lineAttributes))\n        {\n          _produceLineAttributesMarker(state);\n        }\n        lines.appendText(textify(txt2), state.attribString);\n        x += consumed;\n        txt = rest;\n        if (txt.length > 0)\n        {\n          cc.startNewLine(state);\n        }\n      }\n    }\n    else\n    {\n      var tname = (dom.nodeTagName(node) || \"\").toLowerCase();\n\n      if (tname == \"img\"){\n        var collectContentImage = hooks.callAll('collectContentImage', {\n          cc: cc,\n          state: state,\n          tname: tname,\n          styl: styl,\n          cls: cls,\n          node: node\n        });\n      }else{\n        // THIS SEEMS VERY HACKY! -- Please submit a better fix!\n        delete state.lineAttributes.img\n      }\n\n      if (tname == \"br\")\n      {\n        this.breakLine = true;\n        var tvalue = dom.nodeAttr(node, 'value');\n        var induceLineBreak = hooks.callAll('collectContentLineBreak', {\n          cc: this,\n          state: state,\n          tname: tname,\n          tvalue:tvalue,\n          styl: null,\n          cls: null\n        });       \n        var startNewLine= (typeof(induceLineBreak)=='object'&&induceLineBreak.length==0)?true:induceLineBreak[0];\n        if(startNewLine){\n          cc.startNewLine(state);\n        }\n      }\n      else if (tname == \"script\" || tname == \"style\")\n      {\n        // ignore\n      }\n      else if (!isEmpty)\n      {\n        var styl = dom.nodeAttr(node, \"style\");\n        var cls = dom.nodeAttr(node, \"class\");\n        var isPre = (tname == \"pre\");\n        if ((!isPre) && abrowser.safari)\n        {\n          isPre = (styl && /\\bwhite-space:\\s*pre\\b/i.exec(styl));\n        }\n        if (isPre) cc.incrementFlag(state, 'preMode');\n        var oldListTypeOrNull = null;\n        var oldAuthorOrNull = null;\n        if (collectStyles)\n        {\n          hooks.callAll('collectContentPre', {\n            cc: cc,\n            state: state,\n            tname: tname,\n            styl: styl,\n            cls: cls\n          });\n          if (tname == \"b\" || (styl && /\\bfont-weight:\\s*bold\\b/i.exec(styl)) || tname == \"strong\")\n          {\n            cc.doAttrib(state, \"bold\");\n          }\n          if (tname == \"i\" || (styl && /\\bfont-style:\\s*italic\\b/i.exec(styl)) || tname == \"em\")\n          {\n            cc.doAttrib(state, \"italic\");\n          }\n          if (tname == \"u\" || (styl && /\\btext-decoration:\\s*underline\\b/i.exec(styl)) || tname == \"ins\")\n          {\n            cc.doAttrib(state, \"underline\");\n          }\n          if (tname == \"s\" || (styl && /\\btext-decoration:\\s*line-through\\b/i.exec(styl)) || tname == \"del\")\n          {\n            cc.doAttrib(state, \"strikethrough\");\n          }\n          if (tname == \"ul\" || tname == \"ol\")\n          {\n            if(node.attribs){\n              var type = node.attribs.class;\n            }else{\n              var type = null;\n            }\n            var rr = cls && /(?:^| )list-([a-z]+[0-9]+)\\b/.exec(cls);\n            // lists do not need to have a type, so before we make a wrong guess, check if we find a better hint within the node's children\n            if(!rr && !type){\n              for (var i in node.children){\n                if(node.children[i] && node.children[i].name=='ul'){\n                  type = node.children[i].attribs.class\n                  if(type){\n                    break\n                  }\n                }\n              }\n            }\n            if(rr && rr[1]){\n              type = rr[1]\n            } else {\n              if(tname == \"ul\"){\n                if((type && type.match(\"indent\")) || (node.attribs && node.attribs.class && node.attribs.class.match(\"indent\"))){\n                  type = \"indent\"\n                } else {\n                  type = \"bullet\"\n                }\n              } else {\n                type = \"number\"\n              }\n              type = type + String(Math.min(_MAX_LIST_LEVEL, (state.listNesting || 0) + 1));\n            }\n            oldListTypeOrNull = (_enterList(state, type) || 'none');\n          }\n          else if ((tname == \"div\" || tname == \"p\") && cls && cls.match(/(?:^| )ace-line\\b/))\n          {\n            // This has undesirable behavior in Chrome but is right in other browsers.\n            // See https://github.com/ether/etherpad-lite/issues/2412 for reasoning\n            if(!abrowser.chrome) oldListTypeOrNull = (_enterList(state, type) || 'none');\n          }\n          if (className2Author && cls)\n          {\n            var classes = cls.match(/\\S+/g);\n            if (classes && classes.length > 0)\n            {\n              for (var i = 0; i < classes.length; i++)\n              {\n                var c = classes[i];\n                var a = className2Author(c);\n                if (a)\n                {\n                  oldAuthorOrNull = (_enterAuthor(state, a) || 'none');\n                  break;\n                }\n              }\n            }\n          }\n        }\n\n        var nc = dom.nodeNumChildren(node);\n        for (var i = 0; i < nc; i++)\n        {\n          var c = dom.nodeChild(node, i);\n          cc.collectContent(c, state);\n        }\n\n        if (collectStyles)\n        {\n          hooks.callAll('collectContentPost', {\n            cc: cc,\n            state: state,\n            tname: tname,\n            styl: styl,\n            cls: cls\n          });\n        }\n\n        if (isPre) cc.decrementFlag(state, 'preMode');\n        if (state.localAttribs)\n        {\n          for (var i = 0; i < state.localAttribs.length; i++)\n          {\n            cc.decrementAttrib(state, state.localAttribs[i]);\n          }\n        }\n        if (oldListTypeOrNull)\n        {\n          _exitList(state, oldListTypeOrNull);\n        }\n        if (oldAuthorOrNull)\n        {\n          _exitAuthor(state, oldAuthorOrNull);\n        }\n      }\n    }\n    if (!abrowser.msie)\n    {\n      _reachBlockPoint(node, 1, state);\n    }\n    if (isBlock)\n    {\n      if (lines.length() - 1 == startLine)\n      {\n        cc.startNewLine(state);\n      }\n      else\n      {\n        _ensureColumnZero(state);\n      }\n    }\n    if (abrowser.msie)\n    {\n      // in IE, a point immediately after a DIV appears on the next line\n      _reachBlockPoint(node, 1, state);\n    }\n    state.localAttribs = localAttribs;\n  };\n  // can pass a falsy value for end of doc\n  cc.notifyNextNode = function(node)\n  {\n    // an \"empty block\" won't end a line; this addresses an issue in IE with\n    // typing into a blank line at the end of the document.  typed text\n    // goes into the body, and the empty line div still looks clean.\n    // it is incorporated as dirty by the rule that a dirty region has\n    // to end a line.\n    if ((!node) || (isBlockElement(node) && !_isEmpty(node)))\n    {\n      _ensureColumnZero(null);\n    }\n  };\n  // each returns [line, char] or [-1,-1]\n  var getSelectionStart = function()\n    {\n      return selStart;\n      };\n  var getSelectionEnd = function()\n    {\n      return selEnd;\n      };\n\n  // returns array of strings for lines found, last entry will be \"\" if\n  // last line is complete (i.e. if a following span should be on a new line).\n  // can be called at any point\n  cc.getLines = function()\n  {\n    return lines.textLines();\n  };\n\n  cc.finish = function()\n  {\n    lines.flush();\n    var lineAttribs = lines.attribLines();\n    var lineStrings = cc.getLines();\n\n    lineStrings.length--;\n    lineAttribs.length--;\n\n    var ss = getSelectionStart();\n    var se = getSelectionEnd();\n\n    function fixLongLines()\n    {\n      // design mode does not deal with with really long lines!\n      var lineLimit = 2000; // chars\n      var buffer = 10; // chars allowed over before wrapping\n      var linesWrapped = 0;\n      var numLinesAfter = 0;\n      for (var i = lineStrings.length - 1; i >= 0; i--)\n      {\n        var oldString = lineStrings[i];\n        var oldAttribString = lineAttribs[i];\n        if (oldString.length > lineLimit + buffer)\n        {\n          var newStrings = [];\n          var newAttribStrings = [];\n          while (oldString.length > lineLimit)\n          {\n            //var semiloc = oldString.lastIndexOf(';', lineLimit-1);\n            //var lengthToTake = (semiloc >= 0 ? (semiloc+1) : lineLimit);\n            var lengthToTake = lineLimit;\n            newStrings.push(oldString.substring(0, lengthToTake));\n            oldString = oldString.substring(lengthToTake);\n            newAttribStrings.push(Changeset.subattribution(oldAttribString, 0, lengthToTake));\n            oldAttribString = Changeset.subattribution(oldAttribString, lengthToTake);\n          }\n          if (oldString.length > 0)\n          {\n            newStrings.push(oldString);\n            newAttribStrings.push(oldAttribString);\n          }\n\n          function fixLineNumber(lineChar)\n          {\n            if (lineChar[0] < 0) return;\n            var n = lineChar[0];\n            var c = lineChar[1];\n            if (n > i)\n            {\n              n += (newStrings.length - 1);\n            }\n            else if (n == i)\n            {\n              var a = 0;\n              while (c > newStrings[a].length)\n              {\n                c -= newStrings[a].length;\n                a++;\n              }\n              n += a;\n            }\n            lineChar[0] = n;\n            lineChar[1] = c;\n          }\n          fixLineNumber(ss);\n          fixLineNumber(se);\n          linesWrapped++;\n          numLinesAfter += newStrings.length;\n\n          newStrings.unshift(i, 1);\n          lineStrings.splice.apply(lineStrings, newStrings);\n          newAttribStrings.unshift(i, 1);\n          lineAttribs.splice.apply(lineAttribs, newAttribStrings);\n        }\n      }\n      return {\n        linesWrapped: linesWrapped,\n        numLinesAfter: numLinesAfter\n      };\n    }\n    var wrapData = fixLongLines();\n\n    return {\n      selStart: ss,\n      selEnd: se,\n      linesWrapped: wrapData.linesWrapped,\n      numLinesAfter: wrapData.numLinesAfter,\n      lines: lineStrings,\n      lineAttribs: lineAttribs\n    };\n  }\n\n  return cc;\n}\n\nexports.sanitizeUnicode = sanitizeUnicode;\nexports.makeContentCollector = makeContentCollector;\n\n}\n, \"ep_etherpad-lite/static/js/changesettracker.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code. \n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar AttributePool = require('./AttributePool');\nvar Changeset = require('./Changeset');\n\nfunction makeChangesetTracker(scheduler, apool, aceCallbacksProvider)\n{\n\n  // latest official text from server\n  var baseAText = Changeset.makeAText(\"\\n\");\n  // changes applied to baseText that have been submitted\n  var submittedChangeset = null;\n  // changes applied to submittedChangeset since it was prepared\n  var userChangeset = Changeset.identity(1);\n  // is the changesetTracker enabled\n  var tracking = false;\n  // stack state flag so that when we change the rep we don't\n  // handle the notification recursively.  When setting, always\n  // unset in a \"finally\" block.  When set to true, the setter\n  // takes change of userChangeset.\n  var applyingNonUserChanges = false;\n\n  var changeCallback = null;\n\n  var changeCallbackTimeout = null;\n\n  function setChangeCallbackTimeout()\n  {\n    // can call this multiple times per call-stack, because\n    // we only schedule a call to changeCallback if it exists\n    // and if there isn't a timeout already scheduled.\n    if (changeCallback && changeCallbackTimeout === null)\n    {\n      changeCallbackTimeout = scheduler.setTimeout(function()\n      {\n        try\n        {\n          changeCallback();\n        }\n        catch(pseudoError) {}\n        finally\n        {\n          changeCallbackTimeout = null;\n        }\n      }, 0);\n    }\n  }\n\n  var self;\n  return self = {\n    isTracking: function()\n    {\n      return tracking;\n    },\n    setBaseText: function(text)\n    {\n      self.setBaseAttributedText(Changeset.makeAText(text), null);\n    },\n    setBaseAttributedText: function(atext, apoolJsonObj)\n    {\n      aceCallbacksProvider.withCallbacks(\"setBaseText\", function(callbacks)\n      {\n        tracking = true;\n        baseAText = Changeset.cloneAText(atext);\n        if (apoolJsonObj)\n        {\n          var wireApool = (new AttributePool()).fromJsonable(apoolJsonObj);\n          baseAText.attribs = Changeset.moveOpsToNewPool(baseAText.attribs, wireApool, apool);\n        }\n        submittedChangeset = null;\n        userChangeset = Changeset.identity(atext.text.length);\n        applyingNonUserChanges = true;\n        try\n        {\n          callbacks.setDocumentAttributedText(atext);\n        }\n        finally\n        {\n          applyingNonUserChanges = false;\n        }\n      });\n    },\n    composeUserChangeset: function(c)\n    {\n      if (!tracking) return;\n      if (applyingNonUserChanges) return;\n      if (Changeset.isIdentity(c)) return;\n      userChangeset = Changeset.compose(userChangeset, c, apool);\n\n      setChangeCallbackTimeout();\n    },\n    applyChangesToBase: function(c, optAuthor, apoolJsonObj)\n    {\n      if (!tracking) return;\n\n      aceCallbacksProvider.withCallbacks(\"applyChangesToBase\", function(callbacks)\n      {\n\n        if (apoolJsonObj)\n        {\n          var wireApool = (new AttributePool()).fromJsonable(apoolJsonObj);\n          c = Changeset.moveOpsToNewPool(c, wireApool, apool);\n        }\n\n        baseAText = Changeset.applyToAText(c, baseAText, apool);\n\n        var c2 = c;\n        if (submittedChangeset)\n        {\n          var oldSubmittedChangeset = submittedChangeset;\n          submittedChangeset = Changeset.follow(c, oldSubmittedChangeset, false, apool);\n          c2 = Changeset.follow(oldSubmittedChangeset, c, true, apool);\n        }\n\n        var preferInsertingAfterUserChanges = true;\n        var oldUserChangeset = userChangeset;\n        userChangeset = Changeset.follow(c2, oldUserChangeset, preferInsertingAfterUserChanges, apool);\n        var postChange = Changeset.follow(oldUserChangeset, c2, !preferInsertingAfterUserChanges, apool);\n\n        var preferInsertionAfterCaret = true; //(optAuthor && optAuthor > thisAuthor);\n        applyingNonUserChanges = true;\n        try\n        {\n          callbacks.applyChangesetToDocument(postChange, preferInsertionAfterCaret);\n        }\n        finally\n        {\n          applyingNonUserChanges = false;\n        }\n      });\n    },\n    prepareUserChangeset: function()\n    {\n      // If there are user changes to submit, 'changeset' will be the\n      // changeset, else it will be null.\n      var toSubmit;\n      if (submittedChangeset)\n      {\n        // submission must have been canceled, prepare new changeset\n        // that includes old submittedChangeset\n        toSubmit = Changeset.compose(submittedChangeset, userChangeset, apool);\n      }\n      else\n      {\n\n        // add forEach function to Array.prototype for IE8      \n        if (!('forEach' in Array.prototype)) {\n          Array.prototype.forEach= function(action, that /*opt*/) {\n            for (var i= 0, n= this.length; i<n; i++)\n              if (i in this)\n                action.call(that, this[i], i, this);\n          };\n        }\n\n        // Get my authorID\n        var authorId = parent.parent.pad.myUserInfo.userId;\n\n        // Sanitize authorship\n        // We need to replace all author attribs with thisSession.author, in case they copy/pasted or otherwise inserted other peoples changes\n        if(apool.numToAttrib){\n          for (var attr in apool.numToAttrib){\n            if (apool.numToAttrib[attr][0] == 'author' && apool.numToAttrib[attr][1] == authorId) var authorAttr = Number(attr).toString(36)\n          }\n\n          // Replace all added 'author' attribs with the value of the current user\n          var cs = Changeset.unpack(userChangeset)\n            , iterator = Changeset.opIterator(cs.ops)\n            , op\n            , assem = Changeset.mergingOpAssembler();\n\n          while(iterator.hasNext()) {\n            op = iterator.next()\n            if(op.opcode == '+') {\n              var newAttrs = ''\n\n              op.attribs.split('*').forEach(function(attrNum) {\n                if(!attrNum) return\n                var attr = apool.getAttrib(parseInt(attrNum, 36))\n                if(!attr) return\n                if('author' == attr[0])  {\n                  // replace that author with the current one\n                  newAttrs += '*'+authorAttr; \n                }\n                else newAttrs += '*'+attrNum // overtake all other attribs as is\n              })\n              op.attribs = newAttrs\n            }\n            assem.append(op)\n          }\n          assem.endDocument();\n          userChangeset = Changeset.pack(cs.oldLen, cs.newLen, assem.toString(), cs.charBank)\n          Changeset.checkRep(userChangeset)\n        }\n        if (Changeset.isIdentity(userChangeset)) toSubmit = null;\n        else toSubmit = userChangeset;\n      }\n\n      var cs = null;\n      if (toSubmit)\n      {\n        submittedChangeset = toSubmit;\n        userChangeset = Changeset.identity(Changeset.newLen(toSubmit));\n\n        cs = toSubmit;\n      }\n      var wireApool = null;\n      if (cs)\n      {\n        var forWire = Changeset.prepareForWire(cs, apool);\n        wireApool = forWire.pool.toJsonable();\n        cs = forWire.translated;\n      }\n\n      var data = {\n        changeset: cs,\n        apool: wireApool\n      };\n      return data;\n    },\n    applyPreparedChangesetToBase: function()\n    {\n      if (!submittedChangeset)\n      {\n        // violation of protocol; use prepareUserChangeset first\n        throw new Error(\"applySubmittedChangesToBase: no submitted changes to apply\");\n      }\n      //bumpDebug(\"applying committed changeset: \"+submittedChangeset.encodeToString(false));\n      baseAText = Changeset.applyToAText(submittedChangeset, baseAText, apool);\n      submittedChangeset = null;\n    },\n    setUserChangeNotificationCallback: function(callback)\n    {\n      changeCallback = callback;\n    },\n    hasUncommittedChanges: function()\n    {\n      return !!(submittedChangeset || (!Changeset.isIdentity(userChangeset)));\n    }\n  };\n\n}\n\nexports.makeChangesetTracker = makeChangesetTracker;\n\n}\n, \"ep_etherpad-lite/static/js/linestylefilter.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code. \n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n// THIS FILE IS ALSO AN APPJET MODULE: etherpad.collab.ace.linestylefilter\n// %APPJET%: import(\"etherpad.collab.ace.easysync2.Changeset\");\n// %APPJET%: import(\"etherpad.admin.plugins\");\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// requires: easysync2.Changeset\n// requires: top\n// requires: plugins\n// requires: undefined\n\nvar Changeset = require('./Changeset');\nvar hooks = require('./pluginfw/hooks');\nvar linestylefilter = {};\nvar _ = require('./underscore');\nvar AttributeManager = require('./AttributeManager');\n\nlinestylefilter.ATTRIB_CLASSES = {\n  'bold': 'tag:b',\n  'italic': 'tag:i',\n  'underline': 'tag:u',\n  'strikethrough': 'tag:s'\n};\n\nvar lineAttributeMarker = 'lineAttribMarker';\nexports.lineAttributeMarker = lineAttributeMarker;\n\nlinestylefilter.getAuthorClassName = function(author)\n{\n  return \"author-\" + author.replace(/[^a-y0-9]/g, function(c)\n  {\n    if (c == \".\") return \"-\";\n    return 'z' + c.charCodeAt(0) + 'z';\n  });\n};\n\n// lineLength is without newline; aline includes newline,\n// but may be falsy if lineLength == 0\nlinestylefilter.getLineStyleFilter = function(lineLength, aline, textAndClassFunc, apool)\n{\n\n  // Plugin Hook to add more Attrib Classes\n  hooks.aCallAll('aceAttribClasses', linestylefilter.ATTRIB_CLASSES, function(err, ATTRIB_CLASSES){\n    if(ATTRIB_CLASSES.length >= 1){\n      linestylefilter.ATTRIB_CLASSES = ATTRIB_CLASSES[0];\n    }\n  });\n\n  if (lineLength == 0) return textAndClassFunc;\n\n  var nextAfterAuthorColors = textAndClassFunc;\n\n  var authorColorFunc = (function()\n  {\n    var lineEnd = lineLength;\n    var curIndex = 0;\n    var extraClasses;\n    var leftInAuthor;\n\n    function attribsToClasses(attribs)\n    {\n      var classes = '';\n      var isLineAttribMarker = false;\n      \n      Changeset.eachAttribNumber(attribs, function(n)\n      {\n        var key = apool.getAttribKey(n);  \n        if (key)\n        {\n          var value = apool.getAttribValue(n);\n          if (value)\n          {\n            if (!isLineAttribMarker && _.indexOf(AttributeManager.lineAttributes, key) >= 0){\n              isLineAttribMarker = true;\n            }\n            if (key == 'author')\n            {\n              classes += ' ' + linestylefilter.getAuthorClassName(value);\n            }\n            else if (key == 'list')\n            {\n              classes += ' list:' + value;\n            }\n            else if (key == 'start')\n            {\n              classes += ' start:' + value;\n            }\n            else if (linestylefilter.ATTRIB_CLASSES[key])\n            {\n              classes += ' ' + linestylefilter.ATTRIB_CLASSES[key];\n            }\n            else\n            {\n              classes += hooks.callAllStr(\"aceAttribsToClasses\", {\n                linestylefilter: linestylefilter,\n                key: key,\n                value: value\n              }, \" \", \" \", \"\");\n            }            \n          }\n        }\n      });\n      \n      if(isLineAttribMarker) classes += ' ' + lineAttributeMarker;\n      return classes.substring(1);\n    }\n\n    var attributionIter = Changeset.opIterator(aline);\n    var nextOp, nextOpClasses;\n\n    function goNextOp()\n    {\n      nextOp = attributionIter.next();\n      nextOpClasses = (nextOp.opcode && attribsToClasses(nextOp.attribs));\n    }\n    goNextOp();\n\n    function nextClasses()\n    {\n      if (curIndex < lineEnd)\n      {\n        extraClasses = nextOpClasses;\n        leftInAuthor = nextOp.chars;\n        goNextOp();\n        while (nextOp.opcode && nextOpClasses == extraClasses)\n        {\n          leftInAuthor += nextOp.chars;\n          goNextOp();\n        }\n      }\n    }\n    nextClasses();\n\n    return function(txt, cls)\n    {\n\n      var disableAuthColorForThisLine = hooks.callAll(\"disableAuthorColorsForThisLine\", {\n        linestylefilter: linestylefilter,\n        text: txt,\n        \"class\": cls\n      }, \" \", \" \", \"\");   \n      var disableAuthors = (disableAuthColorForThisLine==null||disableAuthColorForThisLine.length==0)?false:disableAuthColorForThisLine[0];\n      while (txt.length > 0)\n      {\n        if (leftInAuthor <= 0 || disableAuthors)\n        {\n          // prevent infinite loop if something funny's going on\n          return nextAfterAuthorColors(txt, cls);\n        }\n        var spanSize = txt.length;\n        if (spanSize > leftInAuthor)\n        {\n          spanSize = leftInAuthor;\n        }\n        var curTxt = txt.substring(0, spanSize);\n        txt = txt.substring(spanSize);\n        nextAfterAuthorColors(curTxt, (cls && cls + \" \") + extraClasses);\n        curIndex += spanSize;\n        leftInAuthor -= spanSize;\n        if (leftInAuthor == 0)\n        {\n          nextClasses();\n        }\n      }\n    };\n  })();\n  return authorColorFunc;\n};\n\nlinestylefilter.getAtSignSplitterFilter = function(lineText, textAndClassFunc)\n{\n  var at = /@/g;\n  at.lastIndex = 0;\n  var splitPoints = null;\n  var execResult;\n  while ((execResult = at.exec(lineText)))\n  {\n    if (!splitPoints)\n    {\n      splitPoints = [];\n    }\n    splitPoints.push(execResult.index);\n  }\n\n  if (!splitPoints) return textAndClassFunc;\n\n  return linestylefilter.textAndClassFuncSplitter(textAndClassFunc, splitPoints);\n};\n\nlinestylefilter.getRegexpFilter = function(regExp, tag)\n{\n  return function(lineText, textAndClassFunc)\n  {\n    regExp.lastIndex = 0;\n    var regExpMatchs = null;\n    var splitPoints = null;\n    var execResult;\n    while ((execResult = regExp.exec(lineText)))\n    {\n      if (!regExpMatchs)\n      {\n        regExpMatchs = [];\n        splitPoints = [];\n      }\n      var startIndex = execResult.index;\n      var regExpMatch = execResult[0];\n      regExpMatchs.push([startIndex, regExpMatch]);\n      splitPoints.push(startIndex, startIndex + regExpMatch.length);\n    }\n\n    if (!regExpMatchs) return textAndClassFunc;\n\n    function regExpMatchForIndex(idx)\n    {\n      for (var k = 0; k < regExpMatchs.length; k++)\n      {\n        var u = regExpMatchs[k];\n        if (idx >= u[0] && idx < u[0] + u[1].length)\n        {\n          return u[1];\n        }\n      }\n      return false;\n    }\n\n    var handleRegExpMatchsAfterSplit = (function()\n    {\n      var curIndex = 0;\n      return function(txt, cls)\n      {\n        var txtlen = txt.length;\n        var newCls = cls;\n        var regExpMatch = regExpMatchForIndex(curIndex);\n        if (regExpMatch)\n        {\n          newCls += \" \" + tag + \":\" + regExpMatch;\n        }\n        textAndClassFunc(txt, newCls);\n        curIndex += txtlen;\n      };\n    })();\n\n    return linestylefilter.textAndClassFuncSplitter(handleRegExpMatchsAfterSplit, splitPoints);\n  };\n};\n\n\nlinestylefilter.REGEX_WORDCHAR = /[\\u0030-\\u0039\\u0041-\\u005A\\u0061-\\u007A\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u00FF\\u0100-\\u1FFF\\u3040-\\u9FFF\\uF900-\\uFDFF\\uFE70-\\uFEFE\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFDC]/;\nlinestylefilter.REGEX_URLCHAR = new RegExp('(' + /[-:@a-zA-Z0-9_.,~%+\\/\\\\?=&#!;()\\[\\]$]/.source + '|' + linestylefilter.REGEX_WORDCHAR.source + ')');\nlinestylefilter.REGEX_URL = new RegExp(/(?:(?:https?|s?ftp|ftps|file|nfs):\\/\\/|mailto:|www\\.)/.source + linestylefilter.REGEX_URLCHAR.source + '*(?![:.,;])' + linestylefilter.REGEX_URLCHAR.source, 'g');\nlinestylefilter.getURLFilter = linestylefilter.getRegexpFilter(\nlinestylefilter.REGEX_URL, 'url');\n\nlinestylefilter.textAndClassFuncSplitter = function(func, splitPointsOpt)\n{\n  var nextPointIndex = 0;\n  var idx = 0;\n\n  // don't split at 0\n  while (splitPointsOpt && nextPointIndex < splitPointsOpt.length && splitPointsOpt[nextPointIndex] == 0)\n  {\n    nextPointIndex++;\n  }\n\n  function spanHandler(txt, cls)\n  {\n    if ((!splitPointsOpt) || nextPointIndex >= splitPointsOpt.length)\n    {\n      func(txt, cls);\n      idx += txt.length;\n    }\n    else\n    {\n      var splitPoints = splitPointsOpt;\n      var pointLocInSpan = splitPoints[nextPointIndex] - idx;\n      var txtlen = txt.length;\n      if (pointLocInSpan >= txtlen)\n      {\n        func(txt, cls);\n        idx += txt.length;\n        if (pointLocInSpan == txtlen)\n        {\n          nextPointIndex++;\n        }\n      }\n      else\n      {\n        if (pointLocInSpan > 0)\n        {\n          func(txt.substring(0, pointLocInSpan), cls);\n          idx += pointLocInSpan;\n        }\n        nextPointIndex++;\n        // recurse\n        spanHandler(txt.substring(pointLocInSpan), cls);\n      }\n    }\n  }\n  return spanHandler;\n};\n\nlinestylefilter.getFilterStack = function(lineText, textAndClassFunc, abrowser)\n{\n  var func = linestylefilter.getURLFilter(lineText, textAndClassFunc);\n\n  var hookFilters = hooks.callAll(\"aceGetFilterStack\", {\n    linestylefilter: linestylefilter,\n    browser: abrowser\n  });\n  _.map(hookFilters ,function(hookFilter)\n  {\n    func = hookFilter(lineText, func);\n  });\n\n  if (abrowser !== undefined && abrowser.msie)\n  {\n    // IE7+ will take an e-mail address like <foo@bar.com> and linkify it to foo@bar.com.\n    // We then normalize it back to text with no angle brackets.  It's weird.  So always\n    // break spans at an \"at\" sign.\n    func = linestylefilter.getAtSignSplitterFilter(\n    lineText, func);\n  }\n  return func;\n};\n\n// domLineObj is like that returned by domline.createDomLine\nlinestylefilter.populateDomLine = function(textLine, aline, apool, domLineObj)\n{\n  // remove final newline from text if any\n  var text = textLine;\n  if (text.slice(-1) == '\\n')\n  {\n    text = text.substring(0, text.length - 1);\n  }\n\n  function textAndClassFunc(tokenText, tokenClass)\n  {\n    domLineObj.appendSpan(tokenText, tokenClass);\n  }\n\n  var func = linestylefilter.getFilterStack(text, textAndClassFunc);\n  func = linestylefilter.getLineStyleFilter(text.length, aline, func, apool);\n  func(text, '');\n};\n\nexports.linestylefilter = linestylefilter;\n\n}\n, \"ep_etherpad-lite/static/js/domline.js\": function (require, exports, module) {\n/**\n * This code is mostly from the old Etherpad. Please help us to comment this code. \n * This helps other people to understand this code better and helps them to improve it.\n * TL;DR COMMENTS ON THIS FILE ARE HIGHLY APPRECIATED\n */\n\n// THIS FILE IS ALSO AN APPJET MODULE: etherpad.collab.ace.domline\n// %APPJET%: import(\"etherpad.admin.plugins\");\n/**\n * Copyright 2009 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// requires: top\n// requires: plugins\n// requires: undefined\n\nvar Security = require('./security');\nvar hooks = require('./pluginfw/hooks');\nvar _ = require('./underscore');\nvar lineAttributeMarker = require('./linestylefilter').lineAttributeMarker;\nvar noop = function(){};\n\n\nvar domline = {};\n\ndomline.addToLineClass = function(lineClass, cls)\n{\n  // an \"empty span\" at any point can be used to add classes to\n  // the line, using line:className.  otherwise, we ignore\n  // the span.\n  cls.replace(/\\S+/g, function(c)\n  {\n    if (c.indexOf(\"line:\") == 0)\n    {\n      // add class to line\n      lineClass = (lineClass ? lineClass + ' ' : '') + c.substring(5);\n    }\n  });\n  return lineClass;\n}\n\n// if \"document\" is falsy we don't create a DOM node, just\n// an object with innerHTML and className\ndomline.createDomLine = function(nonEmpty, doesWrap, optBrowser, optDocument)\n{\n  var result = {\n    node: null,\n    appendSpan: noop,\n    prepareForAdd: noop,\n    notifyAdded: noop,\n    clearSpans: noop,\n    finishUpdate: noop,\n    lineMarker: 0\n  };\n\n  var document = optDocument;\n\n  if (document)\n  {\n    result.node = document.createElement(\"div\");\n  }\n  else\n  {\n    result.node = {\n      innerHTML: '',\n      className: ''\n    };\n  }\n\n  var html = [];\n  var preHtml = '', \n  postHtml = '';\n  var curHTML = null;\n\n  function processSpaces(s)\n  {\n    return domline.processSpaces(s, doesWrap);\n  }\n\n  var perTextNodeProcess = (doesWrap ? _.identity : processSpaces);\n  var perHtmlLineProcess = (doesWrap ? processSpaces : _.identity);\n  var lineClass = 'ace-line';\n\n  result.appendSpan = function(txt, cls)\n  {\n\n    var processedMarker = false;\n    // Handle lineAttributeMarker, if present\n    if (cls.indexOf(lineAttributeMarker) >= 0)\n    {\n      var listType = /(?:^| )list:(\\S+)/.exec(cls);\n      var start = /(?:^| )start:(\\S+)/.exec(cls);\n\n      _.map(hooks.callAll(\"aceDomLinePreProcessLineAttributes\", {\n        domline: domline,\n        cls: cls\n      }), function(modifier)\n      {\n        preHtml += modifier.preHtml;\n        postHtml += modifier.postHtml;\n        processedMarker |= modifier.processedMarker;\n      });\n\n      if (listType)\n      {\n        listType = listType[1];\n        if (listType)\n        {\n          if(listType.indexOf(\"number\") < 0)\n          {\n            preHtml += '<ul class=\"list-' + Security.escapeHTMLAttribute(listType) + '\"><li>';\n            postHtml = '</li></ul>' + postHtml;\n          }\n          else\n          {\n            if(start){ // is it a start of a list with more than one item in?\n              if(start[1] == 1){ // if its the first one at this level?\n                lineClass = lineClass + \" \" + \"list-start-\" + listType; // Add start class to DIV node\n              }\n              preHtml += '<ol start='+start[1]+' class=\"list-' + Security.escapeHTMLAttribute(listType) + '\"><li>';\n            }else{\n              preHtml += '<ol class=\"list-' + Security.escapeHTMLAttribute(listType) + '\"><li>'; // Handles pasted contents into existing lists\n            }\n            postHtml += '</li></ol>';\n          }\n        } \n        processedMarker = true;\n      }\n      _.map(hooks.callAll(\"aceDomLineProcessLineAttributes\", {\n        domline: domline,\n        cls: cls\n      }), function(modifier)\n      {\n        preHtml += modifier.preHtml;\n        postHtml += modifier.postHtml;\n        processedMarker |= modifier.processedMarker;\n      });\n      if( processedMarker ){\n        result.lineMarker += txt.length;\n        return; // don't append any text\n      } \n    }\n    var href = null;\n    var simpleTags = null;\n    if (cls.indexOf('url') >= 0)\n    {\n      cls = cls.replace(/(^| )url:(\\S+)/g, function(x0, space, url)\n      {\n        href = url;\n        return space + \"url\";\n      });\n    }\n    if (cls.indexOf('tag') >= 0)\n    {\n      cls = cls.replace(/(^| )tag:(\\S+)/g, function(x0, space, tag)\n      {\n        if (!simpleTags) simpleTags = [];\n        simpleTags.push(tag.toLowerCase());\n        return space + tag;\n      });\n    }\n\n    var extraOpenTags = \"\";\n    var extraCloseTags = \"\";\n\n    _.map(hooks.callAll(\"aceCreateDomLine\", {\n      domline: domline,\n      cls: cls\n    }), function(modifier)\n    {\n      cls = modifier.cls;\n      extraOpenTags = extraOpenTags + modifier.extraOpenTags;\n      extraCloseTags = modifier.extraCloseTags + extraCloseTags;\n    });\n\n    if ((!txt) && cls)\n    {\n      lineClass = domline.addToLineClass(lineClass, cls);\n    }\n    else if (txt)\n    {\n      if (href)\n      {\n        if(!~href.indexOf(\"://\") && !~href.indexOf(\"mailto:\")) // if the url doesn't include a protocol prefix, assume http\n        {\n          href = \"http://\"+href;\n        }\n        extraOpenTags = extraOpenTags + '<a href=\"' + Security.escapeHTMLAttribute(href) + '\">';\n        extraCloseTags = '</a>' + extraCloseTags;\n      }\n      if (simpleTags)\n      {\n        simpleTags.sort();\n        extraOpenTags = extraOpenTags + '<' + simpleTags.join('><') + '>';\n        simpleTags.reverse();\n        extraCloseTags = '</' + simpleTags.join('></') + '>' + extraCloseTags;\n      }\n      html.push('<span class=\"', Security.escapeHTMLAttribute(cls || ''), '\">', extraOpenTags, perTextNodeProcess(Security.escapeHTML(txt)), extraCloseTags, '</span>');\n    }\n  };\n  result.clearSpans = function()\n  {\n    html = [];\n    lineClass = ''; // non-null to cause update\n    result.lineMarker = 0;\n  };\n\n  function writeHTML()\n  {\n    var newHTML = perHtmlLineProcess(html.join(''));\n    if (!newHTML)\n    {\n      if ((!document) || (!optBrowser))\n      {\n        newHTML += '&nbsp;';\n      }\n      else if (!optBrowser.msie)\n      {\n        newHTML += '<br/>';\n      }\n    }\n    if (nonEmpty)\n    {\n      newHTML = (preHtml || '') + newHTML + (postHtml || '');\n    }\n    html = preHtml = postHtml = ''; // free memory\n    if (newHTML !== curHTML)\n    {\n      curHTML = newHTML;\n      result.node.innerHTML = curHTML;\n    }\n    if (lineClass !== null) result.node.className = lineClass;\n\n    hooks.callAll(\"acePostWriteDomLineHTML\", {\n      node: result.node\n    });\n  }\n  result.prepareForAdd = writeHTML;\n  result.finishUpdate = writeHTML;\n  result.getInnerHTML = function()\n  {\n    return curHTML || '';\n  };\n  return result;\n};\n\ndomline.processSpaces = function(s, doesWrap)\n{\n  if (s.indexOf(\"<\") < 0 && !doesWrap)\n  {\n    // short-cut\n    return s.replace(/ /g, '&nbsp;');\n  }\n  var parts = [];\n  s.replace(/<[^>]*>?| |[^ <]+/g, function(m)\n  {\n    parts.push(m);\n  });\n  if (doesWrap)\n  {\n    var endOfLine = true;\n    var beforeSpace = false;\n    // last space in a run is normal, others are nbsp,\n    // end of line is nbsp\n    for (var i = parts.length - 1; i >= 0; i--)\n    {\n      var p = parts[i];\n      if (p == \" \")\n      {\n        if (endOfLine || beforeSpace) parts[i] = '&nbsp;';\n        endOfLine = false;\n        beforeSpace = true;\n      }\n      else if (p.charAt(0) != \"<\")\n      {\n        endOfLine = false;\n        beforeSpace = false;\n      }\n    }\n    // beginning of line is nbsp\n    for (var i = 0; i < parts.length; i++)\n    {\n      var p = parts[i];\n      if (p == \" \")\n      {\n        parts[i] = '&nbsp;';\n        break;\n      }\n      else if (p.charAt(0) != \"<\")\n      {\n        break;\n      }\n    }\n  }\n  else\n  {\n    for (var i = 0; i < parts.length; i++)\n    {\n      var p = parts[i];\n      if (p == \" \")\n      {\n        parts[i] = '&nbsp;';\n      }\n    }\n  }\n  return parts.join('');\n};\n\nexports.domline = domline;\n\n}\n, \"ep_etherpad-lite/static/js/AttributeManager.js\": function (require, exports, module) {\nvar Changeset = require('./Changeset');\nvar ChangesetUtils = require('./ChangesetUtils');\nvar _ = require('./underscore');\n\nvar lineMarkerAttribute = 'lmkr';\n\n// If one of these attributes are set to the first character of a \n// line it is considered as a line attribute marker i.e. attributes\n// set on this marker are applied to the whole line. \n// The list attribute is only maintained for compatibility reasons\nvar lineAttributes = [lineMarkerAttribute,'list'];\n\n/*\n  The Attribute manager builds changesets based on a document \n  representation for setting and removing range or line-based attributes.\n  \n  @param rep the document representation to be used\n  @param applyChangesetCallback this callback will be called \n    once a changeset has been built.\n    \n    \n  A document representation contains \n  - an array `alines` containing 1 attributes string for each line \n  - an Attribute pool `apool`\n  - a SkipList `lines` containing the text lines of the document.\n*/\n\nvar AttributeManager = function(rep, applyChangesetCallback)\n{\n  this.rep = rep;\n  this.applyChangesetCallback = applyChangesetCallback;\n  this.author = '';\n  \n  // If the first char in a line has one of the following attributes\n  // it will be considered as a line marker\n};\n\nAttributeManager.lineAttributes = lineAttributes;\n\nAttributeManager.prototype = _(AttributeManager.prototype).extend({\n  \n  applyChangeset: function(changeset){\n    if(!this.applyChangesetCallback) return changeset;\n    \n    var cs = changeset.toString();\n    if (!Changeset.isIdentity(cs))\n    {\n      this.applyChangesetCallback(cs);\n    }\n    \n    return changeset;\n  },\n  \n  /*\n    Sets attributes on a range\n    @param start [row, col] tuple pointing to the start of the range\n    @param end [row, col] tuple pointing to the end of the range\n    @param attribute: an array of attributes\n  */\n  setAttributesOnRange: function(start, end, attribs)\n  {\n    var builder = Changeset.builder(this.rep.lines.totalWidth());\n    ChangesetUtils.buildKeepToStartOfRange(this.rep, builder, start);\n    ChangesetUtils.buildKeepRange(this.rep, builder, start, end, attribs, this.rep.apool);\n    return this.applyChangeset(builder);\n  },\n\n  /* \n    Returns if the line already has a line marker\n    @param lineNum: the number of the line\n  */\n  lineHasMarker: function(lineNum){\n    var that = this;\n    \n    return _.find(lineAttributes, function(attribute){\n      return that.getAttributeOnLine(lineNum, attribute) != ''; \n    }) !== undefined;\n  },\n  \n  /*\n    Gets a specified attribute on a line\n    @param lineNum: the number of the line to set the attribute for\n    @param attributeKey: the name of the attribute to get, e.g. list  \n  */\n  getAttributeOnLine: function(lineNum, attributeName){\n    // get  `attributeName` attribute of first char of line\n    var aline = this.rep.alines[lineNum];\n    if (aline)\n    {\n      var opIter = Changeset.opIterator(aline);\n      if (opIter.hasNext())\n      {\n        return Changeset.opAttributeValue(opIter.next(), attributeName, this.rep.apool) || '';\n      }\n    }\n    return '';\n  },\n  \n  /*\n    Gets all attributes on a line\n    @param lineNum: the number of the line to get the attribute for \n  */\n  getAttributesOnLine: function(lineNum){\n    // get attributes of first char of line\n    var aline = this.rep.alines[lineNum];\n    var attributes = []\n    if (aline)\n    {\n      var opIter = Changeset.opIterator(aline)\n        , op\n      if (opIter.hasNext())\n      {\n        op = opIter.next()\n        if(!op.attribs) return []\n        \n        Changeset.eachAttribNumber(op.attribs, function(n) {\n          attributes.push([this.rep.apool.getAttribKey(n), this.rep.apool.getAttribValue(n)])\n        }.bind(this))\n        return attributes;\n      }\n    }\n    return [];\n  },\n  \n  /*\n    Gets all attributes at a position containing line number and column\n    @param lineNumber starting with zero\n    @param column starting with zero\n    returns a list of attributes in the format \n    [ [\"key\",\"value\"], [\"key\",\"value\"], ...  ]\n  */\n  getAttributesOnPosition: function(lineNumber, column){\n    // get all attributes of the line\n    var aline = this.rep.alines[lineNumber];\n    \n    if (!aline) {\n        return [];\n    }\n    // iterate through all operations of a line\n    var opIter = Changeset.opIterator(aline);\n    \n    // we need to sum up how much characters each operations take until the wanted position\n    var currentPointer = 0;\n    var attributes = [];    \n    var currentOperation;\n    \n    while (opIter.hasNext()) {\n      currentOperation = opIter.next();\n      currentPointer = currentPointer + currentOperation.chars;      \n      \n      if (currentPointer > column) {\n        // we got the operation of the wanted position, now collect all its attributes\n        Changeset.eachAttribNumber(currentOperation.attribs, function (n) {\n          attributes.push([\n            this.rep.apool.getAttribKey(n),\n            this.rep.apool.getAttribValue(n)\n          ]);\n        }.bind(this));\n        \n        // skip the loop\n        return attributes;\n      }\n    }\n    return attributes;\n    \n  },\n  \n  /*\n    Gets all attributes at caret position \n    if the user selected a range, the start of the selection is taken\n    returns a list of attributes in the format \n    [ [\"key\",\"value\"], [\"key\",\"value\"], ...  ]\n  */\n  getAttributesOnCaret: function(){\n    return this.getAttributesOnPosition(this.rep.selStart[0], this.rep.selStart[1]);\n  },\n  \n  /*\n    Sets a specified attribute on a line\n    @param lineNum: the number of the line to set the attribute for\n    @param attributeKey: the name of the attribute to set, e.g. list\n    @param attributeValue: an optional parameter to pass to the attribute (e.g. indention level)\n  \n  */\n  setAttributeOnLine: function(lineNum, attributeName, attributeValue){\n    var loc = [0,0];\n    var builder = Changeset.builder(this.rep.lines.totalWidth());\n    var hasMarker = this.lineHasMarker(lineNum);\n    \n    ChangesetUtils.buildKeepRange(this.rep, builder, loc, (loc = [lineNum, 0]));\n\n    if(hasMarker){\n      ChangesetUtils.buildKeepRange(this.rep, builder, loc, (loc = [lineNum, 1]), [\n        [attributeName, attributeValue]\n      ], this.rep.apool);\n    }else{      \n        // add a line marker\n        builder.insert('*', [\n          ['author', this.author],\n          ['insertorder', 'first'],\n          [lineMarkerAttribute, '1'],\n          [attributeName, attributeValue]\n        ], this.rep.apool);\n    }\n    \n    return this.applyChangeset(builder);\n  },\n  \n /**\n   * Removes a specified attribute on a line\n   *  @param lineNum the number of the affected line\n   *  @param attributeName the name of the attribute to remove, e.g. list\n   *  @param attributeValue if given only attributes with equal value will be removed\n   */\n removeAttributeOnLine: function(lineNum, attributeName, attributeValue){\n   var builder = Changeset.builder(this.rep.lines.totalWidth());\n   var hasMarker = this.lineHasMarker(lineNum);\n   var found = false;\n\n   var attribs = _(this.getAttributesOnLine(lineNum)).map(function (attrib) {\n     if (attrib[0] === attributeName && (!attributeValue || attrib[0] === attributeValue)){\n       found = true;\n       return [attributeName, ''];\n     }\n     return attrib;\n   });\n\n   if (!found) {\n     return;\n   }\n\n   ChangesetUtils.buildKeepToStartOfRange(this.rep, builder, [lineNum, 0]);\n\n   var countAttribsWithMarker = _.chain(attribs).filter(function(a){return !!a[1];})\n     .map(function(a){return a[0];}).difference(['author', 'lmkr', 'insertorder', 'start']).size().value();\n\n   //if we have marker and any of attributes don't need to have marker. we need delete it\n   if(hasMarker && !countAttribsWithMarker){\n     ChangesetUtils.buildRemoveRange(this.rep, builder, [lineNum, 0], [lineNum, 1]);\n   }else{\n     ChangesetUtils.buildKeepRange(this.rep, builder, [lineNum, 0], [lineNum, 1], attribs, this.rep.apool);\n   }\n\n   return this.applyChangeset(builder);\n },\n  \n   /*\n     Toggles a line attribute for the specified line number\n     If a line attribute with the specified name exists with any value it will be removed\n     Otherwise it will be set to the given value\n     @param lineNum: the number of the line to toggle the attribute for\n     @param attributeKey: the name of the attribute to toggle, e.g. list\n     @param attributeValue: the value to pass to the attribute (e.g. indention level)\n  */\n  toggleAttributeOnLine: function(lineNum, attributeName, attributeValue) {\n    return this.getAttributeOnLine(lineNum, attributeName) ?\n      this.removeAttributeOnLine(lineNum, attributeName) :\n      this.setAttributeOnLine(lineNum, attributeName, attributeValue);\n    \n  }\n});\n\nmodule.exports = AttributeManager;\n\n}\n, \"ep_etherpad-lite/static/js/ace2_inner\": null\n, \"ep_etherpad-lite/static/js/browser\": null\n, \"ep_etherpad-lite/static/js/AttributePool\": null\n, \"ep_etherpad-lite/static/js/Changeset\": null\n, \"ep_etherpad-lite/static/js/ChangesetUtils\": null\n, \"ep_etherpad-lite/static/js/skiplist\": null\n, \"ep_etherpad-lite/static/js/cssmanager\": null\n, \"ep_etherpad-lite/static/js/colorutils\": null\n, \"ep_etherpad-lite/static/js/undomodule\": null\n, \"unorm\": null\n, \"ep_etherpad-lite/static/js/contentcollector\": null\n, \"ep_etherpad-lite/static/js/changesettracker\": null\n, \"ep_etherpad-lite/static/js/linestylefilter\": null\n, \"ep_etherpad-lite/static/js/domline\": null\n, \"ep_etherpad-lite/static/js/AttributeManager\": null\n, \"ep_etherpad-lite/static/js/ace2_inner/index.js\": null\n, \"ep_etherpad-lite/static/js/browser/index.js\": null\n, \"ep_etherpad-lite/static/js/AttributePool/index.js\": null\n, \"ep_etherpad-lite/static/js/Changeset/index.js\": null\n, \"ep_etherpad-lite/static/js/ChangesetUtils/index.js\": null\n, \"ep_etherpad-lite/static/js/skiplist/index.js\": null\n, \"ep_etherpad-lite/static/js/cssmanager/index.js\": null\n, \"ep_etherpad-lite/static/js/colorutils/index.js\": null\n, \"ep_etherpad-lite/static/js/undomodule/index.js\": null\n, \"unorm/index.js\": null\n, \"ep_etherpad-lite/static/js/contentcollector/index.js\": null\n, \"ep_etherpad-lite/static/js/changesettracker/index.js\": null\n, \"ep_etherpad-lite/static/js/linestylefilter/index.js\": null\n, \"ep_etherpad-lite/static/js/domline/index.js\": null\n, \"ep_etherpad-lite/static/js/AttributeManager/index.js\": null\n});\n"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 0,
          "_transferSize": 0
        },
        "cache": {},
        "timings": {
          "blocked": 2.96399999933783,
          "dns": -1,
          "connect": -1,
          "send": 0,
          "wait": 0.27600000066740993,
          "receive": 8.74599999951897,
          "ssl": -1
        },
        "pageref": "page_2"
      },
      {
        "startedDateTime": "2015-06-09T16:53:05.858Z",
        "time": 40.84899999998015,
        "request": {
          "method": "GET",
          "url": "http://localhost:9001/javascripts/lib/unorm/lib/unorm.js?callback=require.define",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "DNT",
              "value": "1"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, sdch"
            },
            {
              "name": "Host",
              "value": "localhost:9001"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.8,de;q=0.6"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.81 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Referer",
              "value": "http://localhost:9001/p/bla"
            },
            {
              "name": "Cookie",
              "value": "token=t.ltaoBcvzTd2Qbc9Uqjas; express_sid=s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo; test=test"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "If-Modified-Since",
              "value": "Mon, 10 Mar 2014 16:53:18 GMT"
            }
          ],
          "queryString": [
            {
              "name": "callback",
              "value": "require.define"
            }
          ],
          "cookies": [
            {
              "name": "token",
              "value": "t.ltaoBcvzTd2Qbc9Uqjas",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "express_sid",
              "value": "s%3AYtVxRYLg2OEZF4oaA9oyOiEFkgo7HS43.xsK%2FjK13H%2B8otXRYlGOCx%2BOTJ25KXcXU07RHn4%2FW%2F%2Fo",
              "expires": null,
              "httpOnly": false,
              "secure": false
            },
            {
              "name": "test",
              "value": "test",
              "expires": null,
              "httpOnly": false,
              "secure": false
            }
          ],
          "headersSize": 584,
          "bodySize": 0
        },
        "response": {
          "status": 304,
          "statusText": "Not Modified",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "date",
              "value": "Tue, 09 Jun 2015 16:53:05 GMT"
            },
            {
              "name": "x-content-type-options",
              "value": "nosniff"
            },
            {
              "name": "last-modified",
              "value": "Mon, 10 Mar 2014 16:53:18 GMT"
            },
            {
              "name": "Server",
              "value": "Etherpad d11c92c (http://etherpad.org)"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            },
            {
              "name": "content-type",
              "value": "application/javascript; charset=utf-8"
            },
            {
              "name": "cache-control",
              "value": "max-age=21600"
            },
            {
              "name": "X-UA-Compatible",
              "value": "IE=Edge,chrome=1"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "expires",
              "value": "Tue, 09 Jun 2015 22:53:05 GMT"
            }
          ],
          "cookies": [],
          "content": {
            "size": 141778,
            "mimeType": "application/javascript",
            "text": "require.define({\n  \"unorm/lib/unorm.js\": function (require, exports, module) {\n(function (root) {\n   \"use strict\";\n\n/***** unorm.js *****/\n\n/*\n * UnicodeNormalizer 1.0.0\n * Copyright (c) 2008 Matsuza\n * Dual licensed under the MIT (MIT-LICENSE.txt) and GPL (GPL-LICENSE.txt) licenses.\n * $Date: 2008-06-05 16:44:17 +0200 (Thu, 05 Jun 2008) $\n * $Rev: 13309 $\n */\n\n   var DEFAULT_FEATURE = [null, 0, {}];\n   var CACHE_THRESHOLD = 10;\n   var SBase = 0xAC00, LBase = 0x1100, VBase = 0x1161, TBase = 0x11A7, LCount = 19, VCount = 21, TCount = 28;\n   var NCount = VCount * TCount; // 588\n   var SCount = LCount * NCount; // 11172\n\n   var UChar = function(cp, feature){\n      this.codepoint = cp;\n      this.feature = feature;\n   };\n\n   // Strategies\n   var cache = {};\n   var cacheCounter = [];\n   for (var i = 0; i <= 0xFF; ++i){\n      cacheCounter[i] = 0;\n   }\n\n   function fromCache(next, cp, needFeature){\n      var ret = cache[cp];\n      if(!ret){\n         ret = next(cp, needFeature);\n         if(!!ret.feature && ++cacheCounter[(cp >> 8) & 0xFF] > CACHE_THRESHOLD){\n            cache[cp] = ret;\n         }\n      }\n      return ret;\n   }\n\n   function fromData(next, cp, needFeature){\n      var hash = cp & 0xFF00;\n      var dunit = UChar.udata[hash] || {};\n      var f = dunit[cp];\n      return f ? new UChar(cp, f) : new UChar(cp, DEFAULT_FEATURE);\n   }\n   function fromCpOnly(next, cp, needFeature){\n      return !!needFeature ? next(cp, needFeature) : new UChar(cp, null);\n   }\n   function fromRuleBasedJamo(next, cp, needFeature){\n      var j;\n      if(cp < LBase || (LBase + LCount <= cp && cp < SBase) || (SBase + SCount < cp)){\n         return next(cp, needFeature);\n      }\n      if(LBase <= cp && cp < LBase + LCount){\n         var c = {};\n         var base = (cp - LBase) * VCount;\n         for (j = 0; j < VCount; ++j){\n            c[VBase + j] = SBase + TCount * (j + base);\n         }\n         return new UChar(cp, [,,c]);\n      }\n\n      var SIndex = cp - SBase;\n      var TIndex = SIndex % TCount;\n      var feature = [];\n      if(TIndex !== 0){\n         feature[0] = [SBase + SIndex - TIndex, TBase + TIndex];\n      } else {\n         feature[0] = [LBase + Math.floor(SIndex / NCount), VBase + Math.floor((SIndex % NCount) / TCount)];\n         feature[2] = {};\n         for (j = 1; j < TCount; ++j){\n            feature[2][TBase + j] = cp + j;\n         }\n      }\n      return new UChar(cp, feature);\n   }\n   function fromCpFilter(next, cp, needFeature){\n      return cp < 60 || 13311 < cp && cp < 42607 ? new UChar(cp, DEFAULT_FEATURE) : next(cp, needFeature);\n   }\n\n   var strategies = [fromCpFilter, fromCache, fromCpOnly, fromRuleBasedJamo, fromData];\n\n   UChar.fromCharCode = strategies.reduceRight(function (next, strategy) {\n      return function (cp, needFeature) {\n         return strategy(next, cp, needFeature);\n      };\n   }, null);\n\n   UChar.isHighSurrogate = function(cp){\n      return cp >= 0xD800 && cp <= 0xDBFF;\n   };\n   UChar.isLowSurrogate = function(cp){\n      return cp >= 0xDC00 && cp <= 0xDFFF;\n   };\n\n   UChar.prototype.prepFeature = function(){\n      if(!this.feature){\n         this.feature = UChar.fromCharCode(this.codepoint, true).feature;\n      }\n   };\n\n   UChar.prototype.toString = function(){\n      if(this.codepoint < 0x10000){\n         return String.fromCharCode(this.codepoint);\n      } else {\n         var x = this.codepoint - 0x10000;\n         return String.fromCharCode(Math.floor(x / 0x400) + 0xD800, x % 0x400 + 0xDC00);\n      }\n   };\n\n   UChar.prototype.getDecomp = function(){\n      this.prepFeature();\n      return this.feature[0] || null;\n   };\n\n   UChar.prototype.isCompatibility = function(){\n      this.prepFeature();\n      return !!this.feature[1] && (this.feature[1] & (1 << 8));\n   };\n   UChar.prototype.isExclude = function(){\n      this.prepFeature();\n      return !!this.feature[1] && (this.feature[1] & (1 << 9));\n   };\n   UChar.prototype.getCanonicalClass = function(){\n      this.prepFeature();\n      return !!this.feature[1] ? (this.feature[1] & 0xff) : 0;\n   };\n   UChar.prototype.getComposite = function(following){\n      this.prepFeature();\n      if(!this.feature[2]){\n         return null;\n      }\n      var cp = this.feature[2][following.codepoint];\n      return cp ? UChar.fromCharCode(cp) : null;\n   };\n\n   var UCharIterator = function(str){\n      this.str = str;\n      this.cursor = 0;\n   };\n   UCharIterator.prototype.next = function(){\n      if(!!this.str && this.cursor < this.str.length){\n         var cp = this.str.charCodeAt(this.cursor++);\n         var d;\n         if(UChar.isHighSurrogate(cp) && this.cursor < this.str.length && UChar.isLowSurrogate((d = this.str.charCodeAt(this.cursor)))){\n            cp = (cp - 0xD800) * 0x400 + (d -0xDC00) + 0x10000;\n            ++this.cursor;\n         }\n         return UChar.fromCharCode(cp);\n      } else {\n         this.str = null;\n         return null;\n      }\n   };\n\n   var RecursDecompIterator = function(it, cano){\n      this.it = it;\n      this.canonical = cano;\n      this.resBuf = [];\n   };\n\n   RecursDecompIterator.prototype.next = function(){\n      function recursiveDecomp(cano, uchar){\n         var decomp = uchar.getDecomp();\n         if(!!decomp && !(cano && uchar.isCompatibility())){\n            var ret = [];\n            for(var i = 0; i < decomp.length; ++i){\n               var a = recursiveDecomp(cano, UChar.fromCharCode(decomp[i]));\n               //ret.concat(a); //<-why does not this work?\n               //following block is a workaround.\n               for(var j = 0; j < a.length; ++j){\n                  ret.push(a[j]);\n               }\n            }\n            return ret;\n         } else {\n            return [uchar];\n         }\n      }\n      if(this.resBuf.length === 0){\n         var uchar = this.it.next();\n         if(!uchar){\n            return null;\n         }\n         this.resBuf = recursiveDecomp(this.canonical, uchar);\n      }\n      return this.resBuf.shift();\n   };\n\n   var DecompIterator = function(it){\n      this.it = it;\n      this.resBuf = [];\n   };\n\n   DecompIterator.prototype.next = function(){\n      var cc;\n      if(this.resBuf.length === 0){\n         do{\n            var uchar = this.it.next();\n            if(!uchar){\n               break;\n            }\n            cc = uchar.getCanonicalClass();\n            var inspt = this.resBuf.length;\n            if(cc !== 0){\n               for(; inspt > 0; --inspt){\n                  var uchar2 = this.resBuf[inspt - 1];\n                  var cc2 = uchar2.getCanonicalClass();\n                  if(cc2 <= cc){\n                     break;\n                  }\n               }\n            }\n            this.resBuf.splice(inspt, 0, uchar);\n         } while(cc !== 0);\n      }\n      return this.resBuf.shift();\n   };\n\n   var CompIterator = function(it){\n      this.it = it;\n      this.procBuf = [];\n      this.resBuf = [];\n      this.lastClass = null;\n   };\n\n   CompIterator.prototype.next = function(){\n      while(this.resBuf.length === 0){\n         var uchar = this.it.next();\n         if(!uchar){\n            this.resBuf = this.procBuf;\n            this.procBuf = [];\n            break;\n         }\n         if(this.procBuf.length === 0){\n            this.lastClass = uchar.getCanonicalClass();\n            this.procBuf.push(uchar);\n         } else {\n            var starter = this.procBuf[0];\n            var composite = starter.getComposite(uchar);\n            var cc = uchar.getCanonicalClass();\n            if(!!composite && (this.lastClass < cc || this.lastClass === 0)){\n               this.procBuf[0] = composite;\n            } else {\n               if(cc === 0){\n                  this.resBuf = this.procBuf;\n                  this.procBuf = [];\n               }\n               this.lastClass = cc;\n               this.procBuf.push(uchar);\n            }\n         }\n      }\n      return this.resBuf.shift();\n   };\n\n   var createIterator = function(mode, str){\n      switch(mode){\n         case \"NFD\":\n            return new DecompIterator(new RecursDecompIterator(new UCharIterator(str), true));\n         case \"NFKD\":\n            return new DecompIterator(new RecursDecompIterator(new UCharIterator(str), false));\n         case \"NFC\":\n            return new CompIterator(new DecompIterator(new RecursDecompIterator(new UCharIterator(str), true)));\n         case \"NFKC\":\n            return new CompIterator(new DecompIterator(new RecursDecompIterator(new UCharIterator(str), false)));\n      }\n      throw mode + \" is invalid\";\n   };\n   var normalize = function(mode, str){\n      var it = createIterator(mode, str);\n      var ret = \"\";\n      var uchar;\n      while(!!(uchar = it.next())){\n         ret += uchar.toString();\n      }\n      return ret;\n   };\n\n   /* API functions */\n   function nfd(str){\n      return normalize(\"NFD\", str);\n   }\n\n   function nfkd(str){\n      return normalize(\"NFKD\", str);\n   }\n\n   function nfc(str){\n      return normalize(\"NFC\", str);\n   }\n\n   function nfkc(str){\n      return normalize(\"NFKC\", str);\n   }\n\n/* Unicode data */\nUChar.udata={\n0:{60:[,,{824:8814}],61:[,,{824:8800}],62:[,,{824:8815}],65:[,,{768:192,769:193,770:194,771:195,772:256,774:258,775:550,776:196,777:7842,778:197,780:461,783:512,785:514,803:7840,805:7680,808:260}],66:[,,{775:7682,803:7684,817:7686}],67:[,,{769:262,770:264,775:266,780:268,807:199}],68:[,,{775:7690,780:270,803:7692,807:7696,813:7698,817:7694}],69:[,,{768:200,769:201,770:202,771:7868,772:274,774:276,775:278,776:203,777:7866,780:282,783:516,785:518,803:7864,807:552,808:280,813:7704,816:7706}],70:[,,{775:7710}],71:[,,{769:500,770:284,772:7712,774:286,775:288,780:486,807:290}],72:[,,{770:292,775:7714,776:7718,780:542,803:7716,807:7720,814:7722}],73:[,,{768:204,769:205,770:206,771:296,772:298,774:300,775:304,776:207,777:7880,780:463,783:520,785:522,803:7882,808:302,816:7724}],74:[,,{770:308}],75:[,,{769:7728,780:488,803:7730,807:310,817:7732}],76:[,,{769:313,780:317,803:7734,807:315,813:7740,817:7738}],77:[,,{769:7742,775:7744,803:7746}],78:[,,{768:504,769:323,771:209,775:7748,780:327,803:7750,807:325,813:7754,817:7752}],79:[,,{768:210,769:211,770:212,771:213,772:332,774:334,775:558,776:214,777:7886,779:336,780:465,783:524,785:526,795:416,803:7884,808:490}],80:[,,{769:7764,775:7766}],82:[,,{769:340,775:7768,780:344,783:528,785:530,803:7770,807:342,817:7774}],83:[,,{769:346,770:348,775:7776,780:352,803:7778,806:536,807:350}],84:[,,{775:7786,780:356,803:7788,806:538,807:354,813:7792,817:7790}],85:[,,{768:217,769:218,770:219,771:360,772:362,774:364,776:220,777:7910,778:366,779:368,780:467,783:532,785:534,795:431,803:7908,804:7794,808:370,813:7798,816:7796}],86:[,,{771:7804,803:7806}],87:[,,{768:7808,769:7810,770:372,775:7814,776:7812,803:7816}],88:[,,{775:7818,776:7820}],89:[,,{768:7922,769:221,770:374,771:7928,772:562,775:7822,776:376,777:7926,803:7924}],90:[,,{769:377,770:7824,775:379,780:381,803:7826,817:7828}],97:[,,{768:224,769:225,770:226,771:227,772:257,774:259,775:551,776:228,777:7843,778:229,780:462,783:513,785:515,803:7841,805:7681,808:261}],98:[,,{775:7683,803:7685,817:7687}],99:[,,{769:263,770:265,775:267,780:269,807:231}],100:[,,{775:7691,780:271,803:7693,807:7697,813:7699,817:7695}],101:[,,{768:232,769:233,770:234,771:7869,772:275,774:277,775:279,776:235,777:7867,780:283,783:517,785:519,803:7865,807:553,808:281,813:7705,816:7707}],102:[,,{775:7711}],103:[,,{769:501,770:285,772:7713,774:287,775:289,780:487,807:291}],104:[,,{770:293,775:7715,776:7719,780:543,803:7717,807:7721,814:7723,817:7830}],105:[,,{768:236,769:237,770:238,771:297,772:299,774:301,776:239,777:7881,780:464,783:521,785:523,803:7883,808:303,816:7725}],106:[,,{770:309,780:496}],107:[,,{769:7729,780:489,803:7731,807:311,817:7733}],108:[,,{769:314,780:318,803:7735,807:316,813:7741,817:7739}],109:[,,{769:7743,775:7745,803:7747}],110:[,,{768:505,769:324,771:241,775:7749,780:328,803:7751,807:326,813:7755,817:7753}],111:[,,{768:242,769:243,770:244,771:245,772:333,774:335,775:559,776:246,777:7887,779:337,780:466,783:525,785:527,795:417,803:7885,808:491}],112:[,,{769:7765,775:7767}],114:[,,{769:341,775:7769,780:345,783:529,785:531,803:7771,807:343,817:7775}],115:[,,{769:347,770:349,775:7777,780:353,803:7779,806:537,807:351}],116:[,,{775:7787,776:7831,780:357,803:7789,806:539,807:355,813:7793,817:7791}],117:[,,{768:249,769:250,770:251,771:361,772:363,774:365,776:252,777:7911,778:367,779:369,780:468,783:533,785:535,795:432,803:7909,804:7795,808:371,813:7799,816:7797}],118:[,,{771:7805,803:7807}],119:[,,{768:7809,769:7811,770:373,775:7815,776:7813,778:7832,803:7817}],120:[,,{775:7819,776:7821}],121:[,,{768:7923,769:253,770:375,771:7929,772:563,775:7823,776:255,777:7927,778:7833,803:7925}],122:[,,{769:378,770:7825,775:380,780:382,803:7827,817:7829}],160:[[32],256],168:[[32,776],256,{768:8173,769:901,834:8129}],170:[[97],256],175:[[32,772],256],178:[[50],256],179:[[51],256],180:[[32,769],256],181:[[956],256],184:[[32,807],256],185:[[49],256],186:[[111],256],188:[[49,8260,52],256],189:[[49,8260,50],256],190:[[51,8260,52],256],192:[[65,768]],193:[[65,769]],194:[[65,770],,{768:7846,769:7844,771:7850,777:7848}],195:[[65,771]],196:[[65,776],,{772:478}],197:[[65,778],,{769:506}],198:[,,{769:508,772:482}],199:[[67,807],,{769:7688}],200:[[69,768]],201:[[69,769]],202:[[69,770],,{768:7872,769:7870,771:7876,777:7874}],203:[[69,776]],204:[[73,768]],205:[[73,769]],206:[[73,770]],207:[[73,776],,{769:7726}],209:[[78,771]],210:[[79,768]],211:[[79,769]],212:[[79,770],,{768:7890,769:7888,771:7894,777:7892}],213:[[79,771],,{769:7756,772:556,776:7758}],214:[[79,776],,{772:554}],216:[,,{769:510}],217:[[85,768]],218:[[85,769]],219:[[85,770]],220:[[85,776],,{768:475,769:471,772:469,780:473}],221:[[89,769]],224:[[97,768]],225:[[97,769]],226:[[97,770],,{768:7847,769:7845,771:7851,777:7849}],227:[[97,771]],228:[[97,776],,{772:479}],229:[[97,778],,{769:507}],230:[,,{769:509,772:483}],231:[[99,807],,{769:7689}],232:[[101,768]],233:[[101,769]],234:[[101,770],,{768:7873,769:7871,771:7877,777:7875}],235:[[101,776]],236:[[105,768]],237:[[105,769]],238:[[105,770]],239:[[105,776],,{769:7727}],241:[[110,771]],242:[[111,768]],243:[[111,769]],244:[[111,770],,{768:7891,769:7889,771:7895,777:7893}],245:[[111,771],,{769:7757,772:557,776:7759}],246:[[111,776],,{772:555}],248:[,,{769:511}],249:[[117,768]],250:[[117,769]],251:[[117,770]],252:[[117,776],,{768:476,769:472,772:470,780:474}],253:[[121,769]],255:[[121,776]]},\n256:{256:[[65,772]],257:[[97,772]],258:[[65,774],,{768:7856,769:7854,771:7860,777:7858}],259:[[97,774],,{768:7857,769:7855,771:7861,777:7859}],260:[[65,808]],261:[[97,808]],262:[[67,769]],263:[[99,769]],264:[[67,770]],265:[[99,770]],266:[[67,775]],267:[[99,775]],268:[[67,780]],269:[[99,780]],270:[[68,780]],271:[[100,780]],274:[[69,772],,{768:7700,769:7702}],275:[[101,772],,{768:7701,769:7703}],276:[[69,774]],277:[[101,774]],278:[[69,775]],279:[[101,775]],280:[[69,808]],281:[[101,808]],282:[[69,780]],283:[[101,780]],284:[[71,770]],285:[[103,770]],286:[[71,774]],287:[[103,774]],288:[[71,775]],289:[[103,775]],290:[[71,807]],291:[[103,807]],292:[[72,770]],293:[[104,770]],296:[[73,771]],297:[[105,771]],298:[[73,772]],299:[[105,772]],300:[[73,774]],301:[[105,774]],302:[[73,808]],303:[[105,808]],304:[[73,775]],306:[[73,74],256],307:[[105,106],256],308:[[74,770]],309:[[106,770]],310:[[75,807]],311:[[107,807]],313:[[76,769]],314:[[108,769]],315:[[76,807]],316:[[108,807]],317:[[76,780]],318:[[108,780]],319:[[76,183],256],320:[[108,183],256],323:[[78,769]],324:[[110,769]],325:[[78,807]],326:[[110,807]],327:[[78,780]],328:[[110,780]],329:[[700,110],256],332:[[79,772],,{768:7760,769:7762}],333:[[111,772],,{768:7761,769:7763}],334:[[79,774]],335:[[111,774]],336:[[79,779]],337:[[111,779]],340:[[82,769]],341:[[114,769]],342:[[82,807]],343:[[114,807]],344:[[82,780]],345:[[114,780]],346:[[83,769],,{775:7780}],347:[[115,769],,{775:7781}],348:[[83,770]],349:[[115,770]],350:[[83,807]],351:[[115,807]],352:[[83,780],,{775:7782}],353:[[115,780],,{775:7783}],354:[[84,807]],355:[[116,807]],356:[[84,780]],357:[[116,780]],360:[[85,771],,{769:7800}],361:[[117,771],,{769:7801}],362:[[85,772],,{776:7802}],363:[[117,772],,{776:7803}],364:[[85,774]],365:[[117,774]],366:[[85,778]],367:[[117,778]],368:[[85,779]],369:[[117,779]],370:[[85,808]],371:[[117,808]],372:[[87,770]],373:[[119,770]],374:[[89,770]],375:[[121,770]],376:[[89,776]],377:[[90,769]],378:[[122,769]],379:[[90,775]],380:[[122,775]],381:[[90,780]],382:[[122,780]],383:[[115],256,{775:7835}],416:[[79,795],,{768:7900,769:7898,771:7904,777:7902,803:7906}],417:[[111,795],,{768:7901,769:7899,771:7905,777:7903,803:7907}],431:[[85,795],,{768:7914,769:7912,771:7918,777:7916,803:7920}],432:[[117,795],,{768:7915,769:7913,771:7919,777:7917,803:7921}],439:[,,{780:494}],452:[[68,381],256],453:[[68,382],256],454:[[100,382],256],455:[[76,74],256],456:[[76,106],256],457:[[108,106],256],458:[[78,74],256],459:[[78,106],256],460:[[110,106],256],461:[[65,780]],462:[[97,780]],463:[[73,780]],464:[[105,780]],465:[[79,780]],466:[[111,780]],467:[[85,780]],468:[[117,780]],469:[[220,772]],470:[[252,772]],471:[[220,769]],472:[[252,769]],473:[[220,780]],474:[[252,780]],475:[[220,768]],476:[[252,768]],478:[[196,772]],479:[[228,772]],480:[[550,772]],481:[[551,772]],482:[[198,772]],483:[[230,772]],486:[[71,780]],487:[[103,780]],488:[[75,780]],489:[[107,780]],490:[[79,808],,{772:492}],491:[[111,808],,{772:493}],492:[[490,772]],493:[[491,772]],494:[[439,780]],495:[[658,780]],496:[[106,780]],497:[[68,90],256],498:[[68,122],256],499:[[100,122],256],500:[[71,769]],501:[[103,769]],504:[[78,768]],505:[[110,768]],506:[[197,769]],507:[[229,769]],508:[[198,769]],509:[[230,769]],510:[[216,769]],511:[[248,769]],66045:[,220]},\n512:{512:[[65,783]],513:[[97,783]],514:[[65,785]],515:[[97,785]],516:[[69,783]],517:[[101,783]],518:[[69,785]],519:[[101,785]],520:[[73,783]],521:[[105,783]],522:[[73,785]],523:[[105,785]],524:[[79,783]],525:[[111,783]],526:[[79,785]],527:[[111,785]],528:[[82,783]],529:[[114,783]],530:[[82,785]],531:[[114,785]],532:[[85,783]],533:[[117,783]],534:[[85,785]],535:[[117,785]],536:[[83,806]],537:[[115,806]],538:[[84,806]],539:[[116,806]],542:[[72,780]],543:[[104,780]],550:[[65,775],,{772:480}],551:[[97,775],,{772:481}],552:[[69,807],,{774:7708}],553:[[101,807],,{774:7709}],554:[[214,772]],555:[[246,772]],556:[[213,772]],557:[[245,772]],558:[[79,775],,{772:560}],559:[[111,775],,{772:561}],560:[[558,772]],561:[[559,772]],562:[[89,772]],563:[[121,772]],658:[,,{780:495}],688:[[104],256],689:[[614],256],690:[[106],256],691:[[114],256],692:[[633],256],693:[[635],256],694:[[641],256],695:[[119],256],696:[[121],256],728:[[32,774],256],729:[[32,775],256],730:[[32,778],256],731:[[32,808],256],732:[[32,771],256],733:[[32,779],256],736:[[611],256],737:[[108],256],738:[[115],256],739:[[120],256],740:[[661],256]},\n768:{768:[,230],769:[,230],770:[,230],771:[,230],772:[,230],773:[,230],774:[,230],775:[,230],776:[,230,{769:836}],777:[,230],778:[,230],779:[,230],780:[,230],781:[,230],782:[,230],783:[,230],784:[,230],785:[,230],786:[,230],787:[,230],788:[,230],789:[,232],790:[,220],791:[,220],792:[,220],793:[,220],794:[,232],795:[,216],796:[,220],797:[,220],798:[,220],799:[,220],800:[,220],801:[,202],802:[,202],803:[,220],804:[,220],805:[,220],806:[,220],807:[,202],808:[,202],809:[,220],810:[,220],811:[,220],812:[,220],813:[,220],814:[,220],815:[,220],816:[,220],817:[,220],818:[,220],819:[,220],820:[,1],821:[,1],822:[,1],823:[,1],824:[,1],825:[,220],826:[,220],827:[,220],828:[,220],829:[,230],830:[,230],831:[,230],832:[[768],230],833:[[769],230],834:[,230],835:[[787],230],836:[[776,769],230],837:[,240],838:[,230],839:[,220],840:[,220],841:[,220],842:[,230],843:[,230],844:[,230],845:[,220],846:[,220],848:[,230],849:[,230],850:[,230],851:[,220],852:[,220],853:[,220],854:[,220],855:[,230],856:[,232],857:[,220],858:[,220],859:[,230],860:[,233],861:[,234],862:[,234],863:[,233],864:[,234],865:[,234],866:[,233],867:[,230],868:[,230],869:[,230],870:[,230],871:[,230],872:[,230],873:[,230],874:[,230],875:[,230],876:[,230],877:[,230],878:[,230],879:[,230],884:[[697]],890:[[32,837],256],894:[[59]],900:[[32,769],256],901:[[168,769]],902:[[913,769]],903:[[183]],904:[[917,769]],905:[[919,769]],906:[[921,769]],908:[[927,769]],910:[[933,769]],911:[[937,769]],912:[[970,769]],913:[,,{768:8122,769:902,772:8121,774:8120,787:7944,788:7945,837:8124}],917:[,,{768:8136,769:904,787:7960,788:7961}],919:[,,{768:8138,769:905,787:7976,788:7977,837:8140}],921:[,,{768:8154,769:906,772:8153,774:8152,776:938,787:7992,788:7993}],927:[,,{768:8184,769:908,787:8008,788:8009}],929:[,,{788:8172}],933:[,,{768:8170,769:910,772:8169,774:8168,776:939,788:8025}],937:[,,{768:8186,769:911,787:8040,788:8041,837:8188}],938:[[921,776]],939:[[933,776]],940:[[945,769],,{837:8116}],941:[[949,769]],942:[[951,769],,{837:8132}],943:[[953,769]],944:[[971,769]],945:[,,{768:8048,769:940,772:8113,774:8112,787:7936,788:7937,834:8118,837:8115}],949:[,,{768:8050,769:941,787:7952,788:7953}],951:[,,{768:8052,769:942,787:7968,788:7969,834:8134,837:8131}],953:[,,{768:8054,769:943,772:8145,774:8144,776:970,787:7984,788:7985,834:8150}],959:[,,{768:8056,769:972,787:8000,788:8001}],961:[,,{787:8164,788:8165}],965:[,,{768:8058,769:973,772:8161,774:8160,776:971,787:8016,788:8017,834:8166}],969:[,,{768:8060,769:974,787:8032,788:8033,834:8182,837:8179}],970:[[953,776],,{768:8146,769:912,834:8151}],971:[[965,776],,{768:8162,769:944,834:8167}],972:[[959,769]],973:[[965,769]],974:[[969,769],,{837:8180}],976:[[946],256],977:[[952],256],978:[[933],256,{769:979,776:980}],979:[[978,769]],980:[[978,776]],981:[[966],256],982:[[960],256],1008:[[954],256],1009:[[961],256],1010:[[962],256],1012:[[920],256],1013:[[949],256],1017:[[931],256]},\n1024:{1024:[[1045,768]],1025:[[1045,776]],1027:[[1043,769]],1030:[,,{776:1031}],1031:[[1030,776]],1036:[[1050,769]],1037:[[1048,768]],1038:[[1059,774]],1040:[,,{774:1232,776:1234}],1043:[,,{769:1027}],1045:[,,{768:1024,774:1238,776:1025}],1046:[,,{774:1217,776:1244}],1047:[,,{776:1246}],1048:[,,{768:1037,772:1250,774:1049,776:1252}],1049:[[1048,774]],1050:[,,{769:1036}],1054:[,,{776:1254}],1059:[,,{772:1262,774:1038,776:1264,779:1266}],1063:[,,{776:1268}],1067:[,,{776:1272}],1069:[,,{776:1260}],1072:[,,{774:1233,776:1235}],1075:[,,{769:1107}],1077:[,,{768:1104,774:1239,776:1105}],1078:[,,{774:1218,776:1245}],1079:[,,{776:1247}],1080:[,,{768:1117,772:1251,774:1081,776:1253}],1081:[[1080,774]],1082:[,,{769:1116}],1086:[,,{776:1255}],1091:[,,{772:1263,774:1118,776:1265,779:1267}],1095:[,,{776:1269}],1099:[,,{776:1273}],1101:[,,{776:1261}],1104:[[1077,768]],1105:[[1077,776]],1107:[[1075,769]],1110:[,,{776:1111}],1111:[[1110,776]],1116:[[1082,769]],1117:[[1080,768]],1118:[[1091,774]],1140:[,,{783:1142}],1141:[,,{783:1143}],1142:[[1140,783]],1143:[[1141,783]],1155:[,230],1156:[,230],1157:[,230],1158:[,230],1159:[,230],1217:[[1046,774]],1218:[[1078,774]],1232:[[1040,774]],1233:[[1072,774]],1234:[[1040,776]],1235:[[1072,776]],1238:[[1045,774]],1239:[[1077,774]],1240:[,,{776:1242}],1241:[,,{776:1243}],1242:[[1240,776]],1243:[[1241,776]],1244:[[1046,776]],1245:[[1078,776]],1246:[[1047,776]],1247:[[1079,776]],1250:[[1048,772]],1251:[[1080,772]],1252:[[1048,776]],1253:[[1080,776]],1254:[[1054,776]],1255:[[1086,776]],1256:[,,{776:1258}],1257:[,,{776:1259}],1258:[[1256,776]],1259:[[1257,776]],1260:[[1069,776]],1261:[[1101,776]],1262:[[1059,772]],1263:[[1091,772]],1264:[[1059,776]],1265:[[1091,776]],1266:[[1059,779]],1267:[[1091,779]],1268:[[1063,776]],1269:[[1095,776]],1272:[[1067,776]],1273:[[1099,776]]},\n1280:{1415:[[1381,1410],256],1425:[,220],1426:[,230],1427:[,230],1428:[,230],1429:[,230],1430:[,220],1431:[,230],1432:[,230],1433:[,230],1434:[,222],1435:[,220],1436:[,230],1437:[,230],1438:[,230],1439:[,230],1440:[,230],1441:[,230],1442:[,220],1443:[,220],1444:[,220],1445:[,220],1446:[,220],1447:[,220],1448:[,230],1449:[,230],1450:[,220],1451:[,230],1452:[,230],1453:[,222],1454:[,228],1455:[,230],1456:[,10],1457:[,11],1458:[,12],1459:[,13],1460:[,14],1461:[,15],1462:[,16],1463:[,17],1464:[,18],1465:[,19],1466:[,19],1467:[,20],1468:[,21],1469:[,22],1471:[,23],1473:[,24],1474:[,25],1476:[,230],1477:[,220],1479:[,18]},\n1536:{1552:[,230],1553:[,230],1554:[,230],1555:[,230],1556:[,230],1557:[,230],1558:[,230],1559:[,230],1560:[,30],1561:[,31],1562:[,32],1570:[[1575,1619]],1571:[[1575,1620]],1572:[[1608,1620]],1573:[[1575,1621]],1574:[[1610,1620]],1575:[,,{1619:1570,1620:1571,1621:1573}],1608:[,,{1620:1572}],1610:[,,{1620:1574}],1611:[,27],1612:[,28],1613:[,29],1614:[,30],1615:[,31],1616:[,32],1617:[,33],1618:[,34],1619:[,230],1620:[,230],1621:[,220],1622:[,220],1623:[,230],1624:[,230],1625:[,230],1626:[,230],1627:[,230],1628:[,220],1629:[,230],1630:[,230],1631:[,220],1648:[,35],1653:[[1575,1652],256],1654:[[1608,1652],256],1655:[[1735,1652],256],1656:[[1610,1652],256],1728:[[1749,1620]],1729:[,,{1620:1730}],1730:[[1729,1620]],1746:[,,{1620:1747}],1747:[[1746,1620]],1749:[,,{1620:1728}],1750:[,230],1751:[,230],1752:[,230],1753:[,230],1754:[,230],1755:[,230],1756:[,230],1759:[,230],1760:[,230],1761:[,230],1762:[,230],1763:[,220],1764:[,230],1767:[,230],1768:[,230],1770:[,220],1771:[,230],1772:[,230],1773:[,220]},\n1792:{1809:[,36],1840:[,230],1841:[,220],1842:[,230],1843:[,230],1844:[,220],1845:[,230],1846:[,230],1847:[,220],1848:[,220],1849:[,220],1850:[,230],1851:[,220],1852:[,220],1853:[,230],1854:[,220],1855:[,230],1856:[,230],1857:[,230],1858:[,220],1859:[,230],1860:[,220],1861:[,230],1862:[,220],1863:[,230],1864:[,220],1865:[,230],1866:[,230],2027:[,230],2028:[,230],2029:[,230],2030:[,230],2031:[,230],2032:[,230],2033:[,230],2034:[,220],2035:[,230]},\n2048:{2070:[,230],2071:[,230],2072:[,230],2073:[,230],2075:[,230],2076:[,230],2077:[,230],2078:[,230],2079:[,230],2080:[,230],2081:[,230],2082:[,230],2083:[,230],2085:[,230],2086:[,230],2087:[,230],2089:[,230],2090:[,230],2091:[,230],2092:[,230],2093:[,230],2137:[,220],2138:[,220],2139:[,220],2276:[,230],2277:[,230],2278:[,220],2279:[,230],2280:[,230],2281:[,220],2282:[,230],2283:[,230],2284:[,230],2285:[,220],2286:[,220],2287:[,220],2288:[,27],2289:[,28],2290:[,29],2291:[,230],2292:[,230],2293:[,230],2294:[,220],2295:[,230],2296:[,230],2297:[,220],2298:[,220],2299:[,230],2300:[,230],2301:[,230],2302:[,230]},\n2304:{2344:[,,{2364:2345}],2345:[[2344,2364]],2352:[,,{2364:2353}],2353:[[2352,2364]],2355:[,,{2364:2356}],2356:[[2355,2364]],2364:[,7],2381:[,9],2385:[,230],2386:[,220],2387:[,230],2388:[,230],2392:[[2325,2364],512],2393:[[2326,2364],512],2394:[[2327,2364],512],2395:[[2332,2364],512],2396:[[2337,2364],512],2397:[[2338,2364],512],2398:[[2347,2364],512],2399:[[2351,2364],512],2492:[,7],2503:[,,{2494:2507,2519:2508}],2507:[[2503,2494]],2508:[[2503,2519]],2509:[,9],2524:[[2465,2492],512],2525:[[2466,2492],512],2527:[[2479,2492],512]},\n2560:{2611:[[2610,2620],512],2614:[[2616,2620],512],2620:[,7],2637:[,9],2649:[[2582,2620],512],2650:[[2583,2620],512],2651:[[2588,2620],512],2654:[[2603,2620],512],2748:[,7],2765:[,9],68109:[,220],68111:[,230],68152:[,230],68153:[,1],68154:[,220],68159:[,9]},\n2816:{2876:[,7],2887:[,,{2878:2891,2902:2888,2903:2892}],2888:[[2887,2902]],2891:[[2887,2878]],2892:[[2887,2903]],2893:[,9],2908:[[2849,2876],512],2909:[[2850,2876],512],2962:[,,{3031:2964}],2964:[[2962,3031]],3014:[,,{3006:3018,3031:3020}],3015:[,,{3006:3019}],3018:[[3014,3006]],3019:[[3015,3006]],3020:[[3014,3031]],3021:[,9]},\n3072:{3142:[,,{3158:3144}],3144:[[3142,3158]],3149:[,9],3157:[,84],3158:[,91],3260:[,7],3263:[,,{3285:3264}],3264:[[3263,3285]],3270:[,,{3266:3274,3285:3271,3286:3272}],3271:[[3270,3285]],3272:[[3270,3286]],3274:[[3270,3266],,{3285:3275}],3275:[[3274,3285]],3277:[,9]},\n3328:{3398:[,,{3390:3402,3415:3404}],3399:[,,{3390:3403}],3402:[[3398,3390]],3403:[[3399,3390]],3404:[[3398,3415]],3405:[,9],3530:[,9],3545:[,,{3530:3546,3535:3548,3551:3550}],3546:[[3545,3530]],3548:[[3545,3535],,{3530:3549}],3549:[[3548,3530]],3550:[[3545,3551]]},\n3584:{3635:[[3661,3634],256],3640:[,103],3641:[,103],3642:[,9],3656:[,107],3657:[,107],3658:[,107],3659:[,107],3763:[[3789,3762],256],3768:[,118],3769:[,118],3784:[,122],3785:[,122],3786:[,122],3787:[,122],3804:[[3755,3737],256],3805:[[3755,3745],256]},\n3840:{3852:[[3851],256],3864:[,220],3865:[,220],3893:[,220],3895:[,220],3897:[,216],3907:[[3906,4023],512],3917:[[3916,4023],512],3922:[[3921,4023],512],3927:[[3926,4023],512],3932:[[3931,4023],512],3945:[[3904,4021],512],3953:[,129],3954:[,130],3955:[[3953,3954],512],3956:[,132],3957:[[3953,3956],512],3958:[[4018,3968],512],3959:[[4018,3969],256],3960:[[4019,3968],512],3961:[[4019,3969],256],3962:[,130],3963:[,130],3964:[,130],3965:[,130],3968:[,130],3969:[[3953,3968],512],3970:[,230],3971:[,230],3972:[,9],3974:[,230],3975:[,230],3987:[[3986,4023],512],3997:[[3996,4023],512],4002:[[4001,4023],512],4007:[[4006,4023],512],4012:[[4011,4023],512],4025:[[3984,4021],512],4038:[,220]},\n4096:{4133:[,,{4142:4134}],4134:[[4133,4142]],4151:[,7],4153:[,9],4154:[,9],4237:[,220],4348:[[4316],256],69702:[,9],69785:[,,{69818:69786}],69786:[[69785,69818]],69787:[,,{69818:69788}],69788:[[69787,69818]],69797:[,,{69818:69803}],69803:[[69797,69818]],69817:[,9],69818:[,7]},\n4352:{69888:[,230],69889:[,230],69890:[,230],69934:[[69937,69927]],69935:[[69938,69927]],69937:[,,{69927:69934}],69938:[,,{69927:69935}],69939:[,9],69940:[,9],70080:[,9]},\n4864:{4957:[,230],4958:[,230],4959:[,230]},\n5632:{71350:[,9],71351:[,7]},\n5888:{5908:[,9],5940:[,9],6098:[,9],6109:[,230]},\n6144:{6313:[,228]},\n6400:{6457:[,222],6458:[,230],6459:[,220]},\n6656:{6679:[,230],6680:[,220],6752:[,9],6773:[,230],6774:[,230],6775:[,230],6776:[,230],6777:[,230],6778:[,230],6779:[,230],6780:[,230],6783:[,220]},\n6912:{6917:[,,{6965:6918}],6918:[[6917,6965]],6919:[,,{6965:6920}],6920:[[6919,6965]],6921:[,,{6965:6922}],6922:[[6921,6965]],6923:[,,{6965:6924}],6924:[[6923,6965]],6925:[,,{6965:6926}],6926:[[6925,6965]],6929:[,,{6965:6930}],6930:[[6929,6965]],6964:[,7],6970:[,,{6965:6971}],6971:[[6970,6965]],6972:[,,{6965:6973}],6973:[[6972,6965]],6974:[,,{6965:6976}],6975:[,,{6965:6977}],6976:[[6974,6965]],6977:[[6975,6965]],6978:[,,{6965:6979}],6979:[[6978,6965]],6980:[,9],7019:[,230],7020:[,220],7021:[,230],7022:[,230],7023:[,230],7024:[,230],7025:[,230],7026:[,230],7027:[,230],7082:[,9],7083:[,9],7142:[,7],7154:[,9],7155:[,9]},\n7168:{7223:[,7],7376:[,230],7377:[,230],7378:[,230],7380:[,1],7381:[,220],7382:[,220],7383:[,220],7384:[,220],7385:[,220],7386:[,230],7387:[,230],7388:[,220],7389:[,220],7390:[,220],7391:[,220],7392:[,230],7394:[,1],7395:[,1],7396:[,1],7397:[,1],7398:[,1],7399:[,1],7400:[,1],7405:[,220],7412:[,230]},\n7424:{7468:[[65],256],7469:[[198],256],7470:[[66],256],7472:[[68],256],7473:[[69],256],7474:[[398],256],7475:[[71],256],7476:[[72],256],7477:[[73],256],7478:[[74],256],7479:[[75],256],7480:[[76],256],7481:[[77],256],7482:[[78],256],7484:[[79],256],7485:[[546],256],7486:[[80],256],7487:[[82],256],7488:[[84],256],7489:[[85],256],7490:[[87],256],7491:[[97],256],7492:[[592],256],7493:[[593],256],7494:[[7426],256],7495:[[98],256],7496:[[100],256],7497:[[101],256],7498:[[601],256],7499:[[603],256],7500:[[604],256],7501:[[103],256],7503:[[107],256],7504:[[109],256],7505:[[331],256],7506:[[111],256],7507:[[596],256],7508:[[7446],256],7509:[[7447],256],7510:[[112],256],7511:[[116],256],7512:[[117],256],7513:[[7453],256],7514:[[623],256],7515:[[118],256],7516:[[7461],256],7517:[[946],256],7518:[[947],256],7519:[[948],256],7520:[[966],256],7521:[[967],256],7522:[[105],256],7523:[[114],256],7524:[[117],256],7525:[[118],256],7526:[[946],256],7527:[[947],256],7528:[[961],256],7529:[[966],256],7530:[[967],256],7544:[[1085],256],7579:[[594],256],7580:[[99],256],7581:[[597],256],7582:[[240],256],7583:[[604],256],7584:[[102],256],7585:[[607],256],7586:[[609],256],7587:[[613],256],7588:[[616],256],7589:[[617],256],7590:[[618],256],7591:[[7547],256],7592:[[669],256],7593:[[621],256],7594:[[7557],256],7595:[[671],256],7596:[[625],256],7597:[[624],256],7598:[[626],256],7599:[[627],256],7600:[[628],256],7601:[[629],256],7602:[[632],256],7603:[[642],256],7604:[[643],256],7605:[[427],256],7606:[[649],256],7607:[[650],256],7608:[[7452],256],7609:[[651],256],7610:[[652],256],7611:[[122],256],7612:[[656],256],7613:[[657],256],7614:[[658],256],7615:[[952],256],7616:[,230],7617:[,230],7618:[,220],7619:[,230],7620:[,230],7621:[,230],7622:[,230],7623:[,230],7624:[,230],7625:[,230],7626:[,220],7627:[,230],7628:[,230],7629:[,234],7630:[,214],7631:[,220],7632:[,202],7633:[,230],7634:[,230],7635:[,230],7636:[,230],7637:[,230],7638:[,230],7639:[,230],7640:[,230],7641:[,230],7642:[,230],7643:[,230],7644:[,230],7645:[,230],7646:[,230],7647:[,230],7648:[,230],7649:[,230],7650:[,230],7651:[,230],7652:[,230],7653:[,230],7654:[,230],7676:[,233],7677:[,220],7678:[,230],7679:[,220]},\n7680:{7680:[[65,805]],7681:[[97,805]],7682:[[66,775]],7683:[[98,775]],7684:[[66,803]],7685:[[98,803]],7686:[[66,817]],7687:[[98,817]],7688:[[199,769]],7689:[[231,769]],7690:[[68,775]],7691:[[100,775]],7692:[[68,803]],7693:[[100,803]],7694:[[68,817]],7695:[[100,817]],7696:[[68,807]],7697:[[100,807]],7698:[[68,813]],7699:[[100,813]],7700:[[274,768]],7701:[[275,768]],7702:[[274,769]],7703:[[275,769]],7704:[[69,813]],7705:[[101,813]],7706:[[69,816]],7707:[[101,816]],7708:[[552,774]],7709:[[553,774]],7710:[[70,775]],7711:[[102,775]],7712:[[71,772]],7713:[[103,772]],7714:[[72,775]],7715:[[104,775]],7716:[[72,803]],7717:[[104,803]],7718:[[72,776]],7719:[[104,776]],7720:[[72,807]],7721:[[104,807]],7722:[[72,814]],7723:[[104,814]],7724:[[73,816]],7725:[[105,816]],7726:[[207,769]],7727:[[239,769]],7728:[[75,769]],7729:[[107,769]],7730:[[75,803]],7731:[[107,803]],7732:[[75,817]],7733:[[107,817]],7734:[[76,803],,{772:7736}],7735:[[108,803],,{772:7737}],7736:[[7734,772]],7737:[[7735,772]],7738:[[76,817]],7739:[[108,817]],7740:[[76,813]],7741:[[108,813]],7742:[[77,769]],7743:[[109,769]],7744:[[77,775]],7745:[[109,775]],7746:[[77,803]],7747:[[109,803]],7748:[[78,775]],7749:[[110,775]],7750:[[78,803]],7751:[[110,803]],7752:[[78,817]],7753:[[110,817]],7754:[[78,813]],7755:[[110,813]],7756:[[213,769]],7757:[[245,769]],7758:[[213,776]],7759:[[245,776]],7760:[[332,768]],7761:[[333,768]],7762:[[332,769]],7763:[[333,769]],7764:[[80,769]],7765:[[112,769]],7766:[[80,775]],7767:[[112,775]],7768:[[82,775]],7769:[[114,775]],7770:[[82,803],,{772:7772}],7771:[[114,803],,{772:7773}],7772:[[7770,772]],7773:[[7771,772]],7774:[[82,817]],7775:[[114,817]],7776:[[83,775]],7777:[[115,775]],7778:[[83,803],,{775:7784}],7779:[[115,803],,{775:7785}],7780:[[346,775]],7781:[[347,775]],7782:[[352,775]],7783:[[353,775]],7784:[[7778,775]],7785:[[7779,775]],7786:[[84,775]],7787:[[116,775]],7788:[[84,803]],7789:[[116,803]],7790:[[84,817]],7791:[[116,817]],7792:[[84,813]],7793:[[116,813]],7794:[[85,804]],7795:[[117,804]],7796:[[85,816]],7797:[[117,816]],7798:[[85,813]],7799:[[117,813]],7800:[[360,769]],7801:[[361,769]],7802:[[362,776]],7803:[[363,776]],7804:[[86,771]],7805:[[118,771]],7806:[[86,803]],7807:[[118,803]],7808:[[87,768]],7809:[[119,768]],7810:[[87,769]],7811:[[119,769]],7812:[[87,776]],7813:[[119,776]],7814:[[87,775]],7815:[[119,775]],7816:[[87,803]],7817:[[119,803]],7818:[[88,775]],7819:[[120,775]],7820:[[88,776]],7821:[[120,776]],7822:[[89,775]],7823:[[121,775]],7824:[[90,770]],7825:[[122,770]],7826:[[90,803]],7827:[[122,803]],7828:[[90,817]],7829:[[122,817]],7830:[[104,817]],7831:[[116,776]],7832:[[119,778]],7833:[[121,778]],7834:[[97,702],256],7835:[[383,775]],7840:[[65,803],,{770:7852,774:7862}],7841:[[97,803],,{770:7853,774:7863}],7842:[[65,777]],7843:[[97,777]],7844:[[194,769]],7845:[[226,769]],7846:[[194,768]],7847:[[226,768]],7848:[[194,777]],7849:[[226,777]],7850:[[194,771]],7851:[[226,771]],7852:[[7840,770]],7853:[[7841,770]],7854:[[258,769]],7855:[[259,769]],7856:[[258,768]],7857:[[259,768]],7858:[[258,777]],7859:[[259,777]],7860:[[258,771]],7861:[[259,771]],7862:[[7840,774]],7863:[[7841,774]],7864:[[69,803],,{770:7878}],7865:[[101,803],,{770:7879}],7866:[[69,777]],7867:[[101,777]],7868:[[69,771]],7869:[[101,771]],7870:[[202,769]],7871:[[234,769]],7872:[[202,768]],7873:[[234,768]],7874:[[202,777]],7875:[[234,777]],7876:[[202,771]],7877:[[234,771]],7878:[[7864,770]],7879:[[7865,770]],7880:[[73,777]],7881:[[105,777]],7882:[[73,803]],7883:[[105,803]],7884:[[79,803],,{770:7896}],7885:[[111,803],,{770:7897}],7886:[[79,777]],7887:[[111,777]],7888:[[212,769]],7889:[[244,769]],7890:[[212,768]],7891:[[244,768]],7892:[[212,777]],7893:[[244,777]],7894:[[212,771]],7895:[[244,771]],7896:[[7884,770]],7897:[[7885,770]],7898:[[416,769]],7899:[[417,769]],7900:[[416,768]],7901:[[417,768]],7902:[[416,777]],7903:[[417,777]],7904:[[416,771]],7905:[[417,771]],7906:[[416,803]],7907:[[417,803]],7908:[[85,803]],7909:[[117,803]],7910:[[85,777]],7911:[[117,777]],7912:[[431,769]],7913:[[432,769]],7914:[[431,768]],7915:[[432,768]],7916:[[431,777]],7917:[[432,777]],7918:[[431,771]],7919:[[432,771]],7920:[[431,803]],7921:[[432,803]],7922:[[89,768]],7923:[[121,768]],7924:[[89,803]],7925:[[121,803]],7926:[[89,777]],7927:[[121,777]],7928:[[89,771]],7929:[[121,771]]},\n7936:{7936:[[945,787],,{768:7938,769:7940,834:7942,837:8064}],7937:[[945,788],,{768:7939,769:7941,834:7943,837:8065}],7938:[[7936,768],,{837:8066}],7939:[[7937,768],,{837:8067}],7940:[[7936,769],,{837:8068}],7941:[[7937,769],,{837:8069}],7942:[[7936,834],,{837:8070}],7943:[[7937,834],,{837:8071}],7944:[[913,787],,{768:7946,769:7948,834:7950,837:8072}],7945:[[913,788],,{768:7947,769:7949,834:7951,837:8073}],7946:[[7944,768],,{837:8074}],7947:[[7945,768],,{837:8075}],7948:[[7944,769],,{837:8076}],7949:[[7945,769],,{837:8077}],7950:[[7944,834],,{837:8078}],7951:[[7945,834],,{837:8079}],7952:[[949,787],,{768:7954,769:7956}],7953:[[949,788],,{768:7955,769:7957}],7954:[[7952,768]],7955:[[7953,768]],7956:[[7952,769]],7957:[[7953,769]],7960:[[917,787],,{768:7962,769:7964}],7961:[[917,788],,{768:7963,769:7965}],7962:[[7960,768]],7963:[[7961,768]],7964:[[7960,769]],7965:[[7961,769]],7968:[[951,787],,{768:7970,769:7972,834:7974,837:8080}],7969:[[951,788],,{768:7971,769:7973,834:7975,837:8081}],7970:[[7968,768],,{837:8082}],7971:[[7969,768],,{837:8083}],7972:[[7968,769],,{837:8084}],7973:[[7969,769],,{837:8085}],7974:[[7968,834],,{837:8086}],7975:[[7969,834],,{837:8087}],7976:[[919,787],,{768:7978,769:7980,834:7982,837:8088}],7977:[[919,788],,{768:7979,769:7981,834:7983,837:8089}],7978:[[7976,768],,{837:8090}],7979:[[7977,768],,{837:8091}],7980:[[7976,769],,{837:8092}],7981:[[7977,769],,{837:8093}],7982:[[7976,834],,{837:8094}],7983:[[7977,834],,{837:8095}],7984:[[953,787],,{768:7986,769:7988,834:7990}],7985:[[953,788],,{768:7987,769:7989,834:7991}],7986:[[7984,768]],7987:[[7985,768]],7988:[[7984,769]],7989:[[7985,769]],7990:[[7984,834]],7991:[[7985,834]],7992:[[921,787],,{768:7994,769:7996,834:7998}],7993:[[921,788],,{768:7995,769:7997,834:7999}],7994:[[7992,768]],7995:[[7993,768]],7996:[[7992,769]],7997:[[7993,769]],7998:[[7992,834]],7999:[[7993,834]],8000:[[959,787],,{768:8002,769:8004}],8001:[[959,788],,{768:8003,769:8005}],8002:[[8000,768]],8003:[[8001,768]],8004:[[8000,769]],8005:[[8001,769]],8008:[[927,787],,{768:8010,769:8012}],8009:[[927,788],,{768:8011,769:8013}],8010:[[8008,768]],8011:[[8009,768]],8012:[[8008,769]],8013:[[8009,769]],8016:[[965,787],,{768:8018,769:8020,834:8022}],8017:[[965,788],,{768:8019,769:8021,834:8023}],8018:[[8016,768]],8019:[[8017,768]],8020:[[8016,769]],8021:[[8017,769]],8022:[[8016,834]],8023:[[8017,834]],8025:[[933,788],,{768:8027,769:8029,834:8031}],8027:[[8025,768]],8029:[[8025,769]],8031:[[8025,834]],8032:[[969,787],,{768:8034,769:8036,834:8038,837:8096}],8033:[[969,788],,{768:8035,769:8037,834:8039,837:8097}],8034:[[8032,768],,{837:8098}],8035:[[8033,768],,{837:8099}],8036:[[8032,769],,{837:8100}],8037:[[8033,769],,{837:8101}],8038:[[8032,834],,{837:8102}],8039:[[8033,834],,{837:8103}],8040:[[937,787],,{768:8042,769:8044,834:8046,837:8104}],8041:[[937,788],,{768:8043,769:8045,834:8047,837:8105}],8042:[[8040,768],,{837:8106}],8043:[[8041,768],,{837:8107}],8044:[[8040,769],,{837:8108}],8045:[[8041,769],,{837:8109}],8046:[[8040,834],,{837:8110}],8047:[[8041,834],,{837:8111}],8048:[[945,768],,{837:8114}],8049:[[940]],8050:[[949,768]],8051:[[941]],8052:[[951,768],,{837:8130}],8053:[[942]],8054:[[953,768]],8055:[[943]],8056:[[959,768]],8057:[[972]],8058:[[965,768]],8059:[[973]],8060:[[969,768],,{837:8178}],8061:[[974]],8064:[[7936,837]],8065:[[7937,837]],8066:[[7938,837]],8067:[[7939,837]],8068:[[7940,837]],8069:[[7941,837]],8070:[[7942,837]],8071:[[7943,837]],8072:[[7944,837]],8073:[[7945,837]],8074:[[7946,837]],8075:[[7947,837]],8076:[[7948,837]],8077:[[7949,837]],8078:[[7950,837]],8079:[[7951,837]],8080:[[7968,837]],8081:[[7969,837]],8082:[[7970,837]],8083:[[7971,837]],8084:[[7972,837]],8085:[[7973,837]],8086:[[7974,837]],8087:[[7975,837]],8088:[[7976,837]],8089:[[7977,837]],8090:[[7978,837]],8091:[[7979,837]],8092:[[7980,837]],8093:[[7981,837]],8094:[[7982,837]],8095:[[7983,837]],8096:[[8032,837]],8097:[[8033,837]],8098:[[8034,837]],8099:[[8035,837]],8100:[[8036,837]],8101:[[8037,837]],8102:[[8038,837]],8103:[[8039,837]],8104:[[8040,837]],8105:[[8041,837]],8106:[[8042,837]],8107:[[8043,837]],8108:[[8044,837]],8109:[[8045,837]],8110:[[8046,837]],8111:[[8047,837]],8112:[[945,774]],8113:[[945,772]],8114:[[8048,837]],8115:[[945,837]],8116:[[940,837]],8118:[[945,834],,{837:8119}],8119:[[8118,837]],8120:[[913,774]],8121:[[913,772]],8122:[[913,768]],8123:[[902]],8124:[[913,837]],8125:[[32,787],256],8126:[[953]],8127:[[32,787],256,{768:8141,769:8142,834:8143}],8128:[[32,834],256],8129:[[168,834]],8130:[[8052,837]],8131:[[951,837]],8132:[[942,837]],8134:[[951,834],,{837:8135}],8135:[[8134,837]],8136:[[917,768]],8137:[[904]],8138:[[919,768]],8139:[[905]],8140:[[919,837]],8141:[[8127,768]],8142:[[8127,769]],8143:[[8127,834]],8144:[[953,774]],8145:[[953,772]],8146:[[970,768]],8147:[[912]],8150:[[953,834]],8151:[[970,834]],8152:[[921,774]],8153:[[921,772]],8154:[[921,768]],8155:[[906]],8157:[[8190,768]],8158:[[8190,769]],8159:[[8190,834]],8160:[[965,774]],8161:[[965,772]],8162:[[971,768]],8163:[[944]],8164:[[961,787]],8165:[[961,788]],8166:[[965,834]],8167:[[971,834]],8168:[[933,774]],8169:[[933,772]],8170:[[933,768]],8171:[[910]],8172:[[929,788]],8173:[[168,768]],8174:[[901]],8175:[[96]],8178:[[8060,837]],8179:[[969,837]],8180:[[974,837]],8182:[[969,834],,{837:8183}],8183:[[8182,837]],8184:[[927,768]],8185:[[908]],8186:[[937,768]],8187:[[911]],8188:[[937,837]],8189:[[180]],8190:[[32,788],256,{768:8157,769:8158,834:8159}]},\n8192:{8192:[[8194]],8193:[[8195]],8194:[[32],256],8195:[[32],256],8196:[[32],256],8197:[[32],256],8198:[[32],256],8199:[[32],256],8200:[[32],256],8201:[[32],256],8202:[[32],256],8209:[[8208],256],8215:[[32,819],256],8228:[[46],256],8229:[[46,46],256],8230:[[46,46,46],256],8239:[[32],256],8243:[[8242,8242],256],8244:[[8242,8242,8242],256],8246:[[8245,8245],256],8247:[[8245,8245,8245],256],8252:[[33,33],256],8254:[[32,773],256],8263:[[63,63],256],8264:[[63,33],256],8265:[[33,63],256],8279:[[8242,8242,8242,8242],256],8287:[[32],256],8304:[[48],256],8305:[[105],256],8308:[[52],256],8309:[[53],256],8310:[[54],256],8311:[[55],256],8312:[[56],256],8313:[[57],256],8314:[[43],256],8315:[[8722],256],8316:[[61],256],8317:[[40],256],8318:[[41],256],8319:[[110],256],8320:[[48],256],8321:[[49],256],8322:[[50],256],8323:[[51],256],8324:[[52],256],8325:[[53],256],8326:[[54],256],8327:[[55],256],8328:[[56],256],8329:[[57],256],8330:[[43],256],8331:[[8722],256],8332:[[61],256],8333:[[40],256],8334:[[41],256],8336:[[97],256],8337:[[101],256],8338:[[111],256],8339:[[120],256],8340:[[601],256],8341:[[104],256],8342:[[107],256],8343:[[108],256],8344:[[109],256],8345:[[110],256],8346:[[112],256],8347:[[115],256],8348:[[116],256],8360:[[82,115],256],8400:[,230],8401:[,230],8402:[,1],8403:[,1],8404:[,230],8405:[,230],8406:[,230],8407:[,230],8408:[,1],8409:[,1],8410:[,1],8411:[,230],8412:[,230],8417:[,230],8421:[,1],8422:[,1],8423:[,230],8424:[,220],8425:[,230],8426:[,1],8427:[,1],8428:[,220],8429:[,220],8430:[,220],8431:[,220],8432:[,230]},\n8448:{8448:[[97,47,99],256],8449:[[97,47,115],256],8450:[[67],256],8451:[[176,67],256],8453:[[99,47,111],256],8454:[[99,47,117],256],8455:[[400],256],8457:[[176,70],256],8458:[[103],256],8459:[[72],256],8460:[[72],256],8461:[[72],256],8462:[[104],256],8463:[[295],256],8464:[[73],256],8465:[[73],256],8466:[[76],256],8467:[[108],256],8469:[[78],256],8470:[[78,111],256],8473:[[80],256],8474:[[81],256],8475:[[82],256],8476:[[82],256],8477:[[82],256],8480:[[83,77],256],8481:[[84,69,76],256],8482:[[84,77],256],8484:[[90],256],8486:[[937]],8488:[[90],256],8490:[[75]],8491:[[197]],8492:[[66],256],8493:[[67],256],8495:[[101],256],8496:[[69],256],8497:[[70],256],8499:[[77],256],8500:[[111],256],8501:[[1488],256],8502:[[1489],256],8503:[[1490],256],8504:[[1491],256],8505:[[105],256],8507:[[70,65,88],256],8508:[[960],256],8509:[[947],256],8510:[[915],256],8511:[[928],256],8512:[[8721],256],8517:[[68],256],8518:[[100],256],8519:[[101],256],8520:[[105],256],8521:[[106],256],8528:[[49,8260,55],256],8529:[[49,8260,57],256],8530:[[49,8260,49,48],256],8531:[[49,8260,51],256],8532:[[50,8260,51],256],8533:[[49,8260,53],256],8534:[[50,8260,53],256],8535:[[51,8260,53],256],8536:[[52,8260,53],256],8537:[[49,8260,54],256],8538:[[53,8260,54],256],8539:[[49,8260,56],256],8540:[[51,8260,56],256],8541:[[53,8260,56],256],8542:[[55,8260,56],256],8543:[[49,8260],256],8544:[[73],256],8545:[[73,73],256],8546:[[73,73,73],256],8547:[[73,86],256],8548:[[86],256],8549:[[86,73],256],8550:[[86,73,73],256],8551:[[86,73,73,73],256],8552:[[73,88],256],8553:[[88],256],8554:[[88,73],256],8555:[[88,73,73],256],8556:[[76],256],8557:[[67],256],8558:[[68],256],8559:[[77],256],8560:[[105],256],8561:[[105,105],256],8562:[[105,105,105],256],8563:[[105,118],256],8564:[[118],256],8565:[[118,105],256],8566:[[118,105,105],256],8567:[[118,105,105,105],256],8568:[[105,120],256],8569:[[120],256],8570:[[120,105],256],8571:[[120,105,105],256],8572:[[108],256],8573:[[99],256],8574:[[100],256],8575:[[109],256],8585:[[48,8260,51],256],8592:[,,{824:8602}],8594:[,,{824:8603}],8596:[,,{824:8622}],8602:[[8592,824]],8603:[[8594,824]],8622:[[8596,824]],8653:[[8656,824]],8654:[[8660,824]],8655:[[8658,824]],8656:[,,{824:8653}],8658:[,,{824:8655}],8660:[,,{824:8654}]},\n8704:{8707:[,,{824:8708}],8708:[[8707,824]],8712:[,,{824:8713}],8713:[[8712,824]],8715:[,,{824:8716}],8716:[[8715,824]],8739:[,,{824:8740}],8740:[[8739,824]],8741:[,,{824:8742}],8742:[[8741,824]],8748:[[8747,8747],256],8749:[[8747,8747,8747],256],8751:[[8750,8750],256],8752:[[8750,8750,8750],256],8764:[,,{824:8769}],8769:[[8764,824]],8771:[,,{824:8772}],8772:[[8771,824]],8773:[,,{824:8775}],8775:[[8773,824]],8776:[,,{824:8777}],8777:[[8776,824]],8781:[,,{824:8813}],8800:[[61,824]],8801:[,,{824:8802}],8802:[[8801,824]],8804:[,,{824:8816}],8805:[,,{824:8817}],8813:[[8781,824]],8814:[[60,824]],8815:[[62,824]],8816:[[8804,824]],8817:[[8805,824]],8818:[,,{824:8820}],8819:[,,{824:8821}],8820:[[8818,824]],8821:[[8819,824]],8822:[,,{824:8824}],8823:[,,{824:8825}],8824:[[8822,824]],8825:[[8823,824]],8826:[,,{824:8832}],8827:[,,{824:8833}],8828:[,,{824:8928}],8829:[,,{824:8929}],8832:[[8826,824]],8833:[[8827,824]],8834:[,,{824:8836}],8835:[,,{824:8837}],8836:[[8834,824]],8837:[[8835,824]],8838:[,,{824:8840}],8839:[,,{824:8841}],8840:[[8838,824]],8841:[[8839,824]],8849:[,,{824:8930}],8850:[,,{824:8931}],8866:[,,{824:8876}],8872:[,,{824:8877}],8873:[,,{824:8878}],8875:[,,{824:8879}],8876:[[8866,824]],8877:[[8872,824]],8878:[[8873,824]],8879:[[8875,824]],8882:[,,{824:8938}],8883:[,,{824:8939}],8884:[,,{824:8940}],8885:[,,{824:8941}],8928:[[8828,824]],8929:[[8829,824]],8930:[[8849,824]],8931:[[8850,824]],8938:[[8882,824]],8939:[[8883,824]],8940:[[8884,824]],8941:[[8885,824]]},\n8960:{9001:[[12296]],9002:[[12297]]},\n9216:{9312:[[49],256],9313:[[50],256],9314:[[51],256],9315:[[52],256],9316:[[53],256],9317:[[54],256],9318:[[55],256],9319:[[56],256],9320:[[57],256],9321:[[49,48],256],9322:[[49,49],256],9323:[[49,50],256],9324:[[49,51],256],9325:[[49,52],256],9326:[[49,53],256],9327:[[49,54],256],9328:[[49,55],256],9329:[[49,56],256],9330:[[49,57],256],9331:[[50,48],256],9332:[[40,49,41],256],9333:[[40,50,41],256],9334:[[40,51,41],256],9335:[[40,52,41],256],9336:[[40,53,41],256],9337:[[40,54,41],256],9338:[[40,55,41],256],9339:[[40,56,41],256],9340:[[40,57,41],256],9341:[[40,49,48,41],256],9342:[[40,49,49,41],256],9343:[[40,49,50,41],256],9344:[[40,49,51,41],256],9345:[[40,49,52,41],256],9346:[[40,49,53,41],256],9347:[[40,49,54,41],256],9348:[[40,49,55,41],256],9349:[[40,49,56,41],256],9350:[[40,49,57,41],256],9351:[[40,50,48,41],256],9352:[[49,46],256],9353:[[50,46],256],9354:[[51,46],256],9355:[[52,46],256],9356:[[53,46],256],9357:[[54,46],256],9358:[[55,46],256],9359:[[56,46],256],9360:[[57,46],256],9361:[[49,48,46],256],9362:[[49,49,46],256],9363:[[49,50,46],256],9364:[[49,51,46],256],9365:[[49,52,46],256],9366:[[49,53,46],256],9367:[[49,54,46],256],9368:[[49,55,46],256],9369:[[49,56,46],256],9370:[[49,57,46],256],9371:[[50,48,46],256],9372:[[40,97,41],256],9373:[[40,98,41],256],9374:[[40,99,41],256],9375:[[40,100,41],256],9376:[[40,101,41],256],9377:[[40,102,41],256],9378:[[40,103,41],256],9379:[[40,104,41],256],9380:[[40,105,41],256],9381:[[40,106,41],256],9382:[[40,107,41],256],9383:[[40,108,41],256],9384:[[40,109,41],256],9385:[[40,110,41],256],9386:[[40,111,41],256],9387:[[40,112,41],256],9388:[[40,113,41],256],9389:[[40,114,41],256],9390:[[40,115,41],256],9391:[[40,116,41],256],9392:[[40,117,41],256],9393:[[40,118,41],256],9394:[[40,119,41],256],9395:[[40,120,41],256],9396:[[40,121,41],256],9397:[[40,122,41],256],9398:[[65],256],9399:[[66],256],9400:[[67],256],9401:[[68],256],9402:[[69],256],9403:[[70],256],9404:[[71],256],9405:[[72],256],9406:[[73],256],9407:[[74],256],9408:[[75],256],9409:[[76],256],9410:[[77],256],9411:[[78],256],9412:[[79],256],9413:[[80],256],9414:[[81],256],9415:[[82],256],9416:[[83],256],9417:[[84],256],9418:[[85],256],9419:[[86],256],9420:[[87],256],9421:[[88],256],9422:[[89],256],9423:[[90],256],9424:[[97],256],9425:[[98],256],9426:[[99],256],9427:[[100],256],9428:[[101],256],9429:[[102],256],9430:[[103],256],9431:[[104],256],9432:[[105],256],9433:[[106],256],9434:[[107],256],9435:[[108],256],9436:[[109],256],9437:[[110],256],9438:[[111],256],9439:[[112],256],9440:[[113],256],9441:[[114],256],9442:[[115],256],9443:[[116],256],9444:[[117],256],9445:[[118],256],9446:[[119],256],9447:[[120],256],9448:[[121],256],9449:[[122],256],9450:[[48],256]},\n10752:{10764:[[8747,8747,8747,8747],256],10868:[[58,58,61],256],10869:[[61,61],256],10870:[[61,61,61],256],10972:[[10973,824],512]},\n11264:{11388:[[106],256],11389:[[86],256],11503:[,230],11504:[,230],11505:[,230]},\n11520:{11631:[[11617],256],11647:[,9],11744:[,230],11745:[,230],11746:[,230],11747:[,230],11748:[,230],11749:[,230],11750:[,230],11751:[,230],11752:[,230],11753:[,230],11754:[,230],11755:[,230],11756:[,230],11757:[,230],11758:[,230],11759:[,230],11760:[,230],11761:[,230],11762:[,230],11763:[,230],11764:[,230],11765:[,230],11766:[,230],11767:[,230],11768:[,230],11769:[,230],11770:[,230],11771:[,230],11772:[,230],11773:[,230],11774:[,230],11775:[,230]},\n11776:{11935:[[27597],256],12019:[[40863],256]},\n12032:{12032:[[19968],256],12033:[[20008],256],12034:[[20022],256],12035:[[20031],256],12036:[[20057],256],12037:[[20101],256],12038:[[20108],256],12039:[[20128],256],12040:[[20154],256],12041:[[20799],256],12042:[[20837],256],12043:[[20843],256],12044:[[20866],256],12045:[[20886],256],12046:[[20907],256],12047:[[20960],256],12048:[[20981],256],12049:[[20992],256],12050:[[21147],256],12051:[[21241],256],12052:[[21269],256],12053:[[21274],256],12054:[[21304],256],12055:[[21313],256],12056:[[21340],256],12057:[[21353],256],12058:[[21378],256],12059:[[21430],256],12060:[[21448],256],12061:[[21475],256],12062:[[22231],256],12063:[[22303],256],12064:[[22763],256],12065:[[22786],256],12066:[[22794],256],12067:[[22805],256],12068:[[22823],256],12069:[[22899],256],12070:[[23376],256],12071:[[23424],256],12072:[[23544],256],12073:[[23567],256],12074:[[23586],256],12075:[[23608],256],12076:[[23662],256],12077:[[23665],256],12078:[[24027],256],12079:[[24037],256],12080:[[24049],256],12081:[[24062],256],12082:[[24178],256],12083:[[24186],256],12084:[[24191],256],12085:[[24308],256],12086:[[24318],256],12087:[[24331],256],12088:[[24339],256],12089:[[24400],256],12090:[[24417],256],12091:[[24435],256],12092:[[24515],256],12093:[[25096],256],12094:[[25142],256],12095:[[25163],256],12096:[[25903],256],12097:[[25908],256],12098:[[25991],256],12099:[[26007],256],12100:[[26020],256],12101:[[26041],256],12102:[[26080],256],12103:[[26085],256],12104:[[26352],256],12105:[[26376],256],12106:[[26408],256],12107:[[27424],256],12108:[[27490],256],12109:[[27513],256],12110:[[27571],256],12111:[[27595],256],12112:[[27604],256],12113:[[27611],256],12114:[[27663],256],12115:[[27668],256],12116:[[27700],256],12117:[[28779],256],12118:[[29226],256],12119:[[29238],256],12120:[[29243],256],12121:[[29247],256],12122:[[29255],256],12123:[[29273],256],12124:[[29275],256],12125:[[29356],256],12126:[[29572],256],12127:[[29577],256],12128:[[29916],256],12129:[[29926],256],12130:[[29976],256],12131:[[29983],256],12132:[[29992],256],12133:[[30000],256],12134:[[30091],256],12135:[[30098],256],12136:[[30326],256],12137:[[30333],256],12138:[[30382],256],12139:[[30399],256],12140:[[30446],256],12141:[[30683],256],12142:[[30690],256],12143:[[30707],256],12144:[[31034],256],12145:[[31160],256],12146:[[31166],256],12147:[[31348],256],12148:[[31435],256],12149:[[31481],256],12150:[[31859],256],12151:[[31992],256],12152:[[32566],256],12153:[[32593],256],12154:[[32650],256],12155:[[32701],256],12156:[[32769],256],12157:[[32780],256],12158:[[32786],256],12159:[[32819],256],12160:[[32895],256],12161:[[32905],256],12162:[[33251],256],12163:[[33258],256],12164:[[33267],256],12165:[[33276],256],12166:[[33292],256],12167:[[33307],256],12168:[[33311],256],12169:[[33390],256],12170:[[33394],256],12171:[[33400],256],12172:[[34381],256],12173:[[34411],256],12174:[[34880],256],12175:[[34892],256],12176:[[34915],256],12177:[[35198],256],12178:[[35211],256],12179:[[35282],256],12180:[[35328],256],12181:[[35895],256],12182:[[35910],256],12183:[[35925],256],12184:[[35960],256],12185:[[35997],256],12186:[[36196],256],12187:[[36208],256],12188:[[36275],256],12189:[[36523],256],12190:[[36554],256],12191:[[36763],256],12192:[[36784],256],12193:[[36789],256],12194:[[37009],256],12195:[[37193],256],12196:[[37318],256],12197:[[37324],256],12198:[[37329],256],12199:[[38263],256],12200:[[38272],256],12201:[[38428],256],12202:[[38582],256],12203:[[38585],256],12204:[[38632],256],12205:[[38737],256],12206:[[38750],256],12207:[[38754],256],12208:[[38761],256],12209:[[38859],256],12210:[[38893],256],12211:[[38899],256],12212:[[38913],256],12213:[[39080],256],12214:[[39131],256],12215:[[39135],256],12216:[[39318],256],12217:[[39321],256],12218:[[39340],256],12219:[[39592],256],12220:[[39640],256],12221:[[39647],256],12222:[[39717],256],12223:[[39727],256],12224:[[39730],256],12225:[[39740],256],12226:[[39770],256],12227:[[40165],256],12228:[[40565],256],12229:[[40575],256],12230:[[40613],256],12231:[[40635],256],12232:[[40643],256],12233:[[40653],256],12234:[[40657],256],12235:[[40697],256],12236:[[40701],256],12237:[[40718],256],12238:[[40723],256],12239:[[40736],256],12240:[[40763],256],12241:[[40778],256],12242:[[40786],256],12243:[[40845],256],12244:[[40860],256],12245:[[40864],256]},\n12288:{12288:[[32],256],12330:[,218],12331:[,228],12332:[,232],12333:[,222],12334:[,224],12335:[,224],12342:[[12306],256],12344:[[21313],256],12345:[[21316],256],12346:[[21317],256],12358:[,,{12441:12436}],12363:[,,{12441:12364}],12364:[[12363,12441]],12365:[,,{12441:12366}],12366:[[12365,12441]],12367:[,,{12441:12368}],12368:[[12367,12441]],12369:[,,{12441:12370}],12370:[[12369,12441]],12371:[,,{12441:12372}],12372:[[12371,12441]],12373:[,,{12441:12374}],12374:[[12373,12441]],12375:[,,{12441:12376}],12376:[[12375,12441]],12377:[,,{12441:12378}],12378:[[12377,12441]],12379:[,,{12441:12380}],12380:[[12379,12441]],12381:[,,{12441:12382}],12382:[[12381,12441]],12383:[,,{12441:12384}],12384:[[12383,12441]],12385:[,,{12441:12386}],12386:[[12385,12441]],12388:[,,{12441:12389}],12389:[[12388,12441]],12390:[,,{12441:12391}],12391:[[12390,12441]],12392:[,,{12441:12393}],12393:[[12392,12441]],12399:[,,{12441:12400,12442:12401}],12400:[[12399,12441]],12401:[[12399,12442]],12402:[,,{12441:12403,12442:12404}],12403:[[12402,12441]],12404:[[12402,12442]],12405:[,,{12441:12406,12442:12407}],12406:[[12405,12441]],12407:[[12405,12442]],12408:[,,{12441:12409,12442:12410}],12409:[[12408,12441]],12410:[[12408,12442]],12411:[,,{12441:12412,12442:12413}],12412:[[12411,12441]],12413:[[12411,12442]],12436:[[12358,12441]],12441:[,8],12442:[,8],12443:[[32,12441],256],12444:[[32,12442],256],12445:[,,{12441:12446}],12446:[[12445,12441]],12447:[[12424,12426],256],12454:[,,{12441:12532}],12459:[,,{12441:12460}],12460:[[12459,12441]],12461:[,,{12441:12462}],12462:[[12461,12441]],12463:[,,{12441:12464}],12464:[[12463,12441]],12465:[,,{12441:12466}],12466:[[12465,12441]],12467:[,,{12441:12468}],12468:[[12467,12441]],12469:[,,{12441:12470}],12470:[[12469,12441]],12471:[,,{12441:12472}],12472:[[12471,12441]],12473:[,,{12441:12474}],12474:[[12473,12441]],12475:[,,{12441:12476}],12476:[[12475,12441]],12477:[,,{12441:12478}],12478:[[12477,12441]],12479:[,,{12441:12480}],12480:[[12479,12441]],12481:[,,{12441:12482}],12482:[[12481,12441]],12484:[,,{12441:12485}],12485:[[12484,12441]],12486:[,,{12441:12487}],12487:[[12486,12441]],12488:[,,{12441:12489}],12489:[[12488,12441]],12495:[,,{12441:12496,12442:12497}],12496:[[12495,12441]],12497:[[12495,12442]],12498:[,,{12441:12499,12442:12500}],12499:[[12498,12441]],12500:[[12498,12442]],12501:[,,{12441:12502,12442:12503}],12502:[[12501,12441]],12503:[[12501,12442]],12504:[,,{12441:12505,12442:12506}],12505:[[12504,12441]],12506:[[12504,12442]],12507:[,,{12441:12508,12442:12509}],12508:[[12507,12441]],12509:[[12507,12442]],12527:[,,{12441:12535}],12528:[,,{12441:12536}],12529:[,,{12441:12537}],12530:[,,{12441:12538}],12532:[[12454,12441]],12535:[[12527,12441]],12536:[[12528,12441]],12537:[[12529,12441]],12538:[[12530,12441]],12541:[,,{12441:12542}],12542:[[12541,12441]],12543:[[12467,12488],256]},\n12544:{12593:[[4352],256],12594:[[4353],256],12595:[[4522],256],12596:[[4354],256],12597:[[4524],256],12598:[[4525],256],12599:[[4355],256],12600:[[4356],256],12601:[[4357],256],12602:[[4528],256],12603:[[4529],256],12604:[[4530],256],12605:[[4531],256],12606:[[4532],256],12607:[[4533],256],12608:[[4378],256],12609:[[4358],256],12610:[[4359],256],12611:[[4360],256],12612:[[4385],256],12613:[[4361],256],12614:[[4362],256],12615:[[4363],256],12616:[[4364],256],12617:[[4365],256],12618:[[4366],256],12619:[[4367],256],12620:[[4368],256],12621:[[4369],256],12622:[[4370],256],12623:[[4449],256],12624:[[4450],256],12625:[[4451],256],12626:[[4452],256],12627:[[4453],256],12628:[[4454],256],12629:[[4455],256],12630:[[4456],256],12631:[[4457],256],12632:[[4458],256],12633:[[4459],256],12634:[[4460],256],12635:[[4461],256],12636:[[4462],256],12637:[[4463],256],12638:[[4464],256],12639:[[4465],256],12640:[[4466],256],12641:[[4467],256],12642:[[4468],256],12643:[[4469],256],12644:[[4448],256],12645:[[4372],256],12646:[[4373],256],12647:[[4551],256],12648:[[4552],256],12649:[[4556],256],12650:[[4558],256],12651:[[4563],256],12652:[[4567],256],12653:[[4569],256],12654:[[4380],256],12655:[[4573],256],12656:[[4575],256],12657:[[4381],256],12658:[[4382],256],12659:[[4384],256],12660:[[4386],256],12661:[[4387],256],12662:[[4391],256],12663:[[4393],256],12664:[[4395],256],12665:[[4396],256],12666:[[4397],256],12667:[[4398],256],12668:[[4399],256],12669:[[4402],256],12670:[[4406],256],12671:[[4416],256],12672:[[4423],256],12673:[[4428],256],12674:[[4593],256],12675:[[4594],256],12676:[[4439],256],12677:[[4440],256],12678:[[4441],256],12679:[[4484],256],12680:[[4485],256],12681:[[4488],256],12682:[[4497],256],12683:[[4498],256],12684:[[4500],256],12685:[[4510],256],12686:[[4513],256],12690:[[19968],256],12691:[[20108],256],12692:[[19977],256],12693:[[22235],256],12694:[[19978],256],12695:[[20013],256],12696:[[19979],256],12697:[[30002],256],12698:[[20057],256],12699:[[19993],256],12700:[[19969],256],12701:[[22825],256],12702:[[22320],256],12703:[[20154],256]},\n12800:{12800:[[40,4352,41],256],12801:[[40,4354,41],256],12802:[[40,4355,41],256],12803:[[40,4357,41],256],12804:[[40,4358,41],256],12805:[[40,4359,41],256],12806:[[40,4361,41],256],12807:[[40,4363,41],256],12808:[[40,4364,41],256],12809:[[40,4366,41],256],12810:[[40,4367,41],256],12811:[[40,4368,41],256],12812:[[40,4369,41],256],12813:[[40,4370,41],256],12814:[[40,4352,4449,41],256],12815:[[40,4354,4449,41],256],12816:[[40,4355,4449,41],256],12817:[[40,4357,4449,41],256],12818:[[40,4358,4449,41],256],12819:[[40,4359,4449,41],256],12820:[[40,4361,4449,41],256],12821:[[40,4363,4449,41],256],12822:[[40,4364,4449,41],256],12823:[[40,4366,4449,41],256],12824:[[40,4367,4449,41],256],12825:[[40,4368,4449,41],256],12826:[[40,4369,4449,41],256],12827:[[40,4370,4449,41],256],12828:[[40,4364,4462,41],256],12829:[[40,4363,4457,4364,4453,4523,41],256],12830:[[40,4363,4457,4370,4462,41],256],12832:[[40,19968,41],256],12833:[[40,20108,41],256],12834:[[40,19977,41],256],12835:[[40,22235,41],256],12836:[[40,20116,41],256],12837:[[40,20845,41],256],12838:[[40,19971,41],256],12839:[[40,20843,41],256],12840:[[40,20061,41],256],12841:[[40,21313,41],256],12842:[[40,26376,41],256],12843:[[40,28779,41],256],12844:[[40,27700,41],256],12845:[[40,26408,41],256],12846:[[40,37329,41],256],12847:[[40,22303,41],256],12848:[[40,26085,41],256],12849:[[40,26666,41],256],12850:[[40,26377,41],256],12851:[[40,31038,41],256],12852:[[40,21517,41],256],12853:[[40,29305,41],256],12854:[[40,36001,41],256],12855:[[40,31069,41],256],12856:[[40,21172,41],256],12857:[[40,20195,41],256],12858:[[40,21628,41],256],12859:[[40,23398,41],256],12860:[[40,30435,41],256],12861:[[40,20225,41],256],12862:[[40,36039,41],256],12863:[[40,21332,41],256],12864:[[40,31085,41],256],12865:[[40,20241,41],256],12866:[[40,33258,41],256],12867:[[40,33267,41],256],12868:[[21839],256],12869:[[24188],256],12870:[[25991],256],12871:[[31631],256],12880:[[80,84,69],256],12881:[[50,49],256],12882:[[50,50],256],12883:[[50,51],256],12884:[[50,52],256],12885:[[50,53],256],12886:[[50,54],256],12887:[[50,55],256],12888:[[50,56],256],12889:[[50,57],256],12890:[[51,48],256],12891:[[51,49],256],12892:[[51,50],256],12893:[[51,51],256],12894:[[51,52],256],12895:[[51,53],256],12896:[[4352],256],12897:[[4354],256],12898:[[4355],256],12899:[[4357],256],12900:[[4358],256],12901:[[4359],256],12902:[[4361],256],12903:[[4363],256],12904:[[4364],256],12905:[[4366],256],12906:[[4367],256],12907:[[4368],256],12908:[[4369],256],12909:[[4370],256],12910:[[4352,4449],256],12911:[[4354,4449],256],12912:[[4355,4449],256],12913:[[4357,4449],256],12914:[[4358,4449],256],12915:[[4359,4449],256],12916:[[4361,4449],256],12917:[[4363,4449],256],12918:[[4364,4449],256],12919:[[4366,4449],256],12920:[[4367,4449],256],12921:[[4368,4449],256],12922:[[4369,4449],256],12923:[[4370,4449],256],12924:[[4366,4449,4535,4352,4457],256],12925:[[4364,4462,4363,4468],256],12926:[[4363,4462],256],12928:[[19968],256],12929:[[20108],256],12930:[[19977],256],12931:[[22235],256],12932:[[20116],256],12933:[[20845],256],12934:[[19971],256],12935:[[20843],256],12936:[[20061],256],12937:[[21313],256],12938:[[26376],256],12939:[[28779],256],12940:[[27700],256],12941:[[26408],256],12942:[[37329],256],12943:[[22303],256],12944:[[26085],256],12945:[[26666],256],12946:[[26377],256],12947:[[31038],256],12948:[[21517],256],12949:[[29305],256],12950:[[36001],256],12951:[[31069],256],12952:[[21172],256],12953:[[31192],256],12954:[[30007],256],12955:[[22899],256],12956:[[36969],256],12957:[[20778],256],12958:[[21360],256],12959:[[27880],256],12960:[[38917],256],12961:[[20241],256],12962:[[20889],256],12963:[[27491],256],12964:[[19978],256],12965:[[20013],256],12966:[[19979],256],12967:[[24038],256],12968:[[21491],256],12969:[[21307],256],12970:[[23447],256],12971:[[23398],256],12972:[[30435],256],12973:[[20225],256],12974:[[36039],256],12975:[[21332],256],12976:[[22812],256],12977:[[51,54],256],12978:[[51,55],256],12979:[[51,56],256],12980:[[51,57],256],12981:[[52,48],256],12982:[[52,49],256],12983:[[52,50],256],12984:[[52,51],256],12985:[[52,52],256],12986:[[52,53],256],12987:[[52,54],256],12988:[[52,55],256],12989:[[52,56],256],12990:[[52,57],256],12991:[[53,48],256],12992:[[49,26376],256],12993:[[50,26376],256],12994:[[51,26376],256],12995:[[52,26376],256],12996:[[53,26376],256],12997:[[54,26376],256],12998:[[55,26376],256],12999:[[56,26376],256],13000:[[57,26376],256],13001:[[49,48,26376],256],13002:[[49,49,26376],256],13003:[[49,50,26376],256],13004:[[72,103],256],13005:[[101,114,103],256],13006:[[101,86],256],13007:[[76,84,68],256],13008:[[12450],256],13009:[[12452],256],13010:[[12454],256],13011:[[12456],256],13012:[[12458],256],13013:[[12459],256],13014:[[12461],256],13015:[[12463],256],13016:[[12465],256],13017:[[12467],256],13018:[[12469],256],13019:[[12471],256],13020:[[12473],256],13021:[[12475],256],13022:[[12477],256],13023:[[12479],256],13024:[[12481],256],13025:[[12484],256],13026:[[12486],256],13027:[[12488],256],13028:[[12490],256],13029:[[12491],256],13030:[[12492],256],13031:[[12493],256],13032:[[12494],256],13033:[[12495],256],13034:[[12498],256],13035:[[12501],256],13036:[[12504],256],13037:[[12507],256],13038:[[12510],256],13039:[[12511],256],13040:[[12512],256],13041:[[12513],256],13042:[[12514],256],13043:[[12516],256],13044:[[12518],256],13045:[[12520],256],13046:[[12521],256],13047:[[12522],256],13048:[[12523],256],13049:[[12524],256],13050:[[12525],256],13051:[[12527],256],13052:[[12528],256],13053:[[12529],256],13054:[[12530],256]},\n13056:{13056:[[12450,12497,12540,12488],256],13057:[[12450,12523,12501,12449],256],13058:[[12450,12531,12506,12450],256],13059:[[12450,12540,12523],256],13060:[[12452,12491,12531,12464],256],13061:[[12452,12531,12481],256],13062:[[12454,12457,12531],256],13063:[[12456,12473,12463,12540,12489],256],13064:[[12456,12540,12459,12540],256],13065:[[12458,12531,12473],256],13066:[[12458,12540,12512],256],13067:[[12459,12452,12522],256],13068:[[12459,12521,12483,12488],256],13069:[[12459,12525,12522,12540],256],13070:[[12460,12525,12531],256],13071:[[12460,12531,12510],256],13072:[[12462,12460],256],13073:[[12462,12491,12540],256],13074:[[12461,12517,12522,12540],256],13075:[[12462,12523,12480,12540],256],13076:[[12461,12525],256],13077:[[12461,12525,12464,12521,12512],256],13078:[[12461,12525,12513,12540,12488,12523],256],13079:[[12461,12525,12527,12483,12488],256],13080:[[12464,12521,12512],256],13081:[[12464,12521,12512,12488,12531],256],13082:[[12463,12523,12476,12452,12525],256],13083:[[12463,12525,12540,12493],256],13084:[[12465,12540,12473],256],13085:[[12467,12523,12490],256],13086:[[12467,12540,12509],256],13087:[[12469,12452,12463,12523],256],13088:[[12469,12531,12481,12540,12512],256],13089:[[12471,12522,12531,12464],256],13090:[[12475,12531,12481],256],13091:[[12475,12531,12488],256],13092:[[12480,12540,12473],256],13093:[[12487,12471],256],13094:[[12489,12523],256],13095:[[12488,12531],256],13096:[[12490,12494],256],13097:[[12494,12483,12488],256],13098:[[12495,12452,12484],256],13099:[[12497,12540,12475,12531,12488],256],13100:[[12497,12540,12484],256],13101:[[12496,12540,12524,12523],256],13102:[[12500,12450,12473,12488,12523],256],13103:[[12500,12463,12523],256],13104:[[12500,12467],256],13105:[[12499,12523],256],13106:[[12501,12449,12521,12483,12489],256],13107:[[12501,12451,12540,12488],256],13108:[[12502,12483,12471,12455,12523],256],13109:[[12501,12521,12531],256],13110:[[12504,12463,12479,12540,12523],256],13111:[[12506,12477],256],13112:[[12506,12491,12498],256],13113:[[12504,12523,12484],256],13114:[[12506,12531,12473],256],13115:[[12506,12540,12472],256],13116:[[12505,12540,12479],256],13117:[[12509,12452,12531,12488],256],13118:[[12508,12523,12488],256],13119:[[12507,12531],256],13120:[[12509,12531,12489],256],13121:[[12507,12540,12523],256],13122:[[12507,12540,12531],256],13123:[[12510,12452,12463,12525],256],13124:[[12510,12452,12523],256],13125:[[12510,12483,12495],256],13126:[[12510,12523,12463],256],13127:[[12510,12531,12471,12519,12531],256],13128:[[12511,12463,12525,12531],256],13129:[[12511,12522],256],13130:[[12511,12522,12496,12540,12523],256],13131:[[12513,12460],256],13132:[[12513,12460,12488,12531],256],13133:[[12513,12540,12488,12523],256],13134:[[12516,12540,12489],256],13135:[[12516,12540,12523],256],13136:[[12518,12450,12531],256],13137:[[12522,12483,12488,12523],256],13138:[[12522,12521],256],13139:[[12523,12500,12540],256],13140:[[12523,12540,12502,12523],256],13141:[[12524,12512],256],13142:[[12524,12531,12488,12466,12531],256],13143:[[12527,12483,12488],256],13144:[[48,28857],256],13145:[[49,28857],256],13146:[[50,28857],256],13147:[[51,28857],256],13148:[[52,28857],256],13149:[[53,28857],256],13150:[[54,28857],256],13151:[[55,28857],256],13152:[[56,28857],256],13153:[[57,28857],256],13154:[[49,48,28857],256],13155:[[49,49,28857],256],13156:[[49,50,28857],256],13157:[[49,51,28857],256],13158:[[49,52,28857],256],13159:[[49,53,28857],256],13160:[[49,54,28857],256],13161:[[49,55,28857],256],13162:[[49,56,28857],256],13163:[[49,57,28857],256],13164:[[50,48,28857],256],13165:[[50,49,28857],256],13166:[[50,50,28857],256],13167:[[50,51,28857],256],13168:[[50,52,28857],256],13169:[[104,80,97],256],13170:[[100,97],256],13171:[[65,85],256],13172:[[98,97,114],256],13173:[[111,86],256],13174:[[112,99],256],13175:[[100,109],256],13176:[[100,109,178],256],13177:[[100,109,179],256],13178:[[73,85],256],13179:[[24179,25104],256],13180:[[26157,21644],256],13181:[[22823,27491],256],13182:[[26126,27835],256],13183:[[26666,24335,20250,31038],256],13184:[[112,65],256],13185:[[110,65],256],13186:[[956,65],256],13187:[[109,65],256],13188:[[107,65],256],13189:[[75,66],256],13190:[[77,66],256],13191:[[71,66],256],13192:[[99,97,108],256],13193:[[107,99,97,108],256],13194:[[112,70],256],13195:[[110,70],256],13196:[[956,70],256],13197:[[956,103],256],13198:[[109,103],256],13199:[[107,103],256],13200:[[72,122],256],13201:[[107,72,122],256],13202:[[77,72,122],256],13203:[[71,72,122],256],13204:[[84,72,122],256],13205:[[956,8467],256],13206:[[109,8467],256],13207:[[100,8467],256],13208:[[107,8467],256],13209:[[102,109],256],13210:[[110,109],256],13211:[[956,109],256],13212:[[109,109],256],13213:[[99,109],256],13214:[[107,109],256],13215:[[109,109,178],256],13216:[[99,109,178],256],13217:[[109,178],256],13218:[[107,109,178],256],13219:[[109,109,179],256],13220:[[99,109,179],256],13221:[[109,179],256],13222:[[107,109,179],256],13223:[[109,8725,115],256],13224:[[109,8725,115,178],256],13225:[[80,97],256],13226:[[107,80,97],256],13227:[[77,80,97],256],13228:[[71,80,97],256],13229:[[114,97,100],256],13230:[[114,97,100,8725,115],256],13231:[[114,97,100,8725,115,178],256],13232:[[112,115],256],13233:[[110,115],256],13234:[[956,115],256],13235:[[109,115],256],13236:[[112,86],256],13237:[[110,86],256],13238:[[956,86],256],13239:[[109,86],256],13240:[[107,86],256],13241:[[77,86],256],13242:[[112,87],256],13243:[[110,87],256],13244:[[956,87],256],13245:[[109,87],256],13246:[[107,87],256],13247:[[77,87],256],13248:[[107,937],256],13249:[[77,937],256],13250:[[97,46,109,46],256],13251:[[66,113],256],13252:[[99,99],256],13253:[[99,100],256],13254:[[67,8725,107,103],256],13255:[[67,111,46],256],13256:[[100,66],256],13257:[[71,121],256],13258:[[104,97],256],13259:[[72,80],256],13260:[[105,110],256],13261:[[75,75],256],13262:[[75,77],256],13263:[[107,116],256],13264:[[108,109],256],13265:[[108,110],256],13266:[[108,111,103],256],13267:[[108,120],256],13268:[[109,98],256],13269:[[109,105,108],256],13270:[[109,111,108],256],13271:[[80,72],256],13272:[[112,46,109,46],256],13273:[[80,80,77],256],13274:[[80,82],256],13275:[[115,114],256],13276:[[83,118],256],13277:[[87,98],256],13278:[[86,8725,109],256],13279:[[65,8725,109],256],13280:[[49,26085],256],13281:[[50,26085],256],13282:[[51,26085],256],13283:[[52,26085],256],13284:[[53,26085],256],13285:[[54,26085],256],13286:[[55,26085],256],13287:[[56,26085],256],13288:[[57,26085],256],13289:[[49,48,26085],256],13290:[[49,49,26085],256],13291:[[49,50,26085],256],13292:[[49,51,26085],256],13293:[[49,52,26085],256],13294:[[49,53,26085],256],13295:[[49,54,26085],256],13296:[[49,55,26085],256],13297:[[49,56,26085],256],13298:[[49,57,26085],256],13299:[[50,48,26085],256],13300:[[50,49,26085],256],13301:[[50,50,26085],256],13302:[[50,51,26085],256],13303:[[50,52,26085],256],13304:[[50,53,26085],256],13305:[[50,54,26085],256],13306:[[50,55,26085],256],13307:[[50,56,26085],256],13308:[[50,57,26085],256],13309:[[51,48,26085],256],13310:[[51,49,26085],256],13311:[[103,97,108],256]},\n42496:{42607:[,230],42612:[,230],42613:[,230],42614:[,230],42615:[,230],42616:[,230],42617:[,230],42618:[,230],42619:[,230],42620:[,230],42621:[,230],42655:[,230],42736:[,230],42737:[,230]},\n42752:{42864:[[42863],256],43000:[[294],256],43001:[[339],256]},\n43008:{43014:[,9],43204:[,9],43232:[,230],43233:[,230],43234:[,230],43235:[,230],43236:[,230],43237:[,230],43238:[,230],43239:[,230],43240:[,230],43241:[,230],43242:[,230],43243:[,230],43244:[,230],43245:[,230],43246:[,230],43247:[,230],43248:[,230],43249:[,230]},\n43264:{43307:[,220],43308:[,220],43309:[,220],43347:[,9],43443:[,7],43456:[,9]},\n43520:{43696:[,230],43698:[,230],43699:[,230],43700:[,220],43703:[,230],43704:[,230],43710:[,230],43711:[,230],43713:[,230],43766:[,9]},\n43776:{44013:[,9]},\n53504:{119134:[[119127,119141],512],119135:[[119128,119141],512],119136:[[119135,119150],512],119137:[[119135,119151],512],119138:[[119135,119152],512],119139:[[119135,119153],512],119140:[[119135,119154],512],119141:[,216],119142:[,216],119143:[,1],119144:[,1],119145:[,1],119149:[,226],119150:[,216],119151:[,216],119152:[,216],119153:[,216],119154:[,216],119163:[,220],119164:[,220],119165:[,220],119166:[,220],119167:[,220],119168:[,220],119169:[,220],119170:[,220],119173:[,230],119174:[,230],119175:[,230],119176:[,230],119177:[,230],119178:[,220],119179:[,220],119210:[,230],119211:[,230],119212:[,230],119213:[,230],119227:[[119225,119141],512],119228:[[119226,119141],512],119229:[[119227,119150],512],119230:[[119228,119150],512],119231:[[119227,119151],512],119232:[[119228,119151],512]},\n53760:{119362:[,230],119363:[,230],119364:[,230]},\n54272:{119808:[[65],256],119809:[[66],256],119810:[[67],256],119811:[[68],256],119812:[[69],256],119813:[[70],256],119814:[[71],256],119815:[[72],256],119816:[[73],256],119817:[[74],256],119818:[[75],256],119819:[[76],256],119820:[[77],256],119821:[[78],256],119822:[[79],256],119823:[[80],256],119824:[[81],256],119825:[[82],256],119826:[[83],256],119827:[[84],256],119828:[[85],256],119829:[[86],256],119830:[[87],256],119831:[[88],256],119832:[[89],256],119833:[[90],256],119834:[[97],256],119835:[[98],256],119836:[[99],256],119837:[[100],256],119838:[[101],256],119839:[[102],256],119840:[[103],256],119841:[[104],256],119842:[[105],256],119843:[[106],256],119844:[[107],256],119845:[[108],256],119846:[[109],256],119847:[[110],256],119848:[[111],256],119849:[[112],256],119850:[[113],256],119851:[[114],256],119852:[[115],256],119853:[[116],256],119854:[[117],256],119855:[[118],256],119856:[[119],256],119857:[[120],256],119858:[[121],256],119859:[[122],256],119860:[[65],256],119861:[[66],256],119862:[[67],256],119863:[[68],256],119864:[[69],256],119865:[[70],256],119866:[[71],256],119867:[[72],256],119868:[[73],256],119869:[[74],256],119870:[[75],256],119871:[[76],256],119872:[[77],256],119873:[[78],256],119874:[[79],256],119875:[[80],256],119876:[[81],256],119877:[[82],256],119878:[[83],256],119879:[[84],256],119880:[[85],256],119881:[[86],256],119882:[[87],256],119883:[[88],256],119884:[[89],256],119885:[[90],256],119886:[[97],256],119887:[[98],256],119888:[[99],256],119889:[[100],256],119890:[[101],256],119891:[[102],256],119892:[[103],256],119894:[[105],256],119895:[[106],256],119896:[[107],256],119897:[[108],256],119898:[[109],256],119899:[[110],256],119900:[[111],256],119901:[[112],256],119902:[[113],256],119903:[[114],256],119904:[[115],256],119905:[[116],256],119906:[[117],256],119907:[[118],256],119908:[[119],256],119909:[[120],256],119910:[[121],256],119911:[[122],256],119912:[[65],256],119913:[[66],256],119914:[[67],256],119915:[[68],256],119916:[[69],256],119917:[[70],256],119918:[[71],256],119919:[[72],256],119920:[[73],256],119921:[[74],256],119922:[[75],256],119923:[[76],256],119924:[[77],256],119925:[[78],256],119926:[[79],256],119927:[[80],256],119928:[[81],256],119929:[[82],256],119930:[[83],256],119931:[[84],256],119932:[[85],256],119933:[[86],256],119934:[[87],256],119935:[[88],256],119936:[[89],256],119937:[[90],256],119938:[[97],256],119939:[[98],256],119940:[[99],256],119941:[[100],256],119942:[[101],256],119943:[[102],256],119944:[[103],256],119945:[[104],256],119946:[[105],256],119947:[[106],256],119948:[[107],256],119949:[[108],256],119950:[[109],256],119951:[[110],256],119952:[[111],256],119953:[[112],256],119954:[[113],256],119955:[[114],256],119956:[[115],256],119957:[[116],256],119958:[[117],256],119959:[[118],256],119960:[[119],256],119961:[[120],256],119962:[[121],256],119963:[[122],256],119964:[[65],256],119966:[[67],256],119967:[[68],256],119970:[[71],256],119973:[[74],256],119974:[[75],256],119977:[[78],256],119978:[[79],256],119979:[[80],256],119980:[[81],256],119982:[[83],256],119983:[[84],256],119984:[[85],256],119985:[[86],256],119986:[[87],256],119987:[[88],256],119988:[[89],256],119989:[[90],256],119990:[[97],256],119991:[[98],256],119992:[[99],256],119993:[[100],256],119995:[[102],256],119997:[[104],256],119998:[[105],256],119999:[[106],256],120000:[[107],256],120001:[[108],256],120002:[[109],256],120003:[[110],256],120005:[[112],256],120006:[[113],256],120007:[[114],256],120008:[[115],256],120009:[[116],256],120010:[[117],256],120011:[[118],256],120012:[[119],256],120013:[[120],256],120014:[[121],256],120015:[[122],256],120016:[[65],256],120017:[[66],256],120018:[[67],256],120019:[[68],256],120020:[[69],256],120021:[[70],256],120022:[[71],256],120023:[[72],256],120024:[[73],256],120025:[[74],256],120026:[[75],256],120027:[[76],256],120028:[[77],256],120029:[[78],256],120030:[[79],256],120031:[[80],256],120032:[[81],256],120033:[[82],256],120034:[[83],256],120035:[[84],256],120036:[[85],256],120037:[[86],256],120038:[[87],256],120039:[[88],256],120040:[[89],256],120041:[[90],256],120042:[[97],256],120043:[[98],256],120044:[[99],256],120045:[[100],256],120046:[[101],256],120047:[[102],256],120048:[[103],256],120049:[[104],256],120050:[[105],256],120051:[[106],256],120052:[[107],256],120053:[[108],256],120054:[[109],256],120055:[[110],256],120056:[[111],256],120057:[[112],256],120058:[[113],256],120059:[[114],256],120060:[[115],256],120061:[[116],256],120062:[[117],256],120063:[[118],256]},\n54528:{120064:[[119],256],120065:[[120],256],120066:[[121],256],120067:[[122],256],120068:[[65],256],120069:[[66],256],120071:[[68],256],120072:[[69],256],120073:[[70],256],120074:[[71],256],120077:[[74],256],120078:[[75],256],120079:[[76],256],120080:[[77],256],120081:[[78],256],120082:[[79],256],120083:[[80],256],120084:[[81],256],120086:[[83],256],120087:[[84],256],120088:[[85],256],120089:[[86],256],120090:[[87],256],120091:[[88],256],120092:[[89],256],120094:[[97],256],120095:[[98],256],120096:[[99],256],120097:[[100],256],120098:[[101],256],120099:[[102],256],120100:[[103],256],120101:[[104],256],120102:[[105],256],120103:[[106],256],120104:[[107],256],120105:[[108],256],120106:[[109],256],120107:[[110],256],120108:[[111],256],120109:[[112],256],120110:[[113],256],120111:[[114],256],120112:[[115],256],120113:[[116],256],120114:[[117],256],120115:[[118],256],120116:[[119],256],120117:[[120],256],120118:[[121],256],120119:[[122],256],120120:[[65],256],120121:[[66],256],120123:[[68],256],120124:[[69],256],120125:[[70],256],120126:[[71],256],120128:[[73],256],120129:[[74],256],120130:[[75],256],120131:[[76],256],120132:[[77],256],120134:[[79],256],120138:[[83],256],120139:[[84],256],120140:[[85],256],120141:[[86],256],120142:[[87],256],120143:[[88],256],120144:[[89],256],120146:[[97],256],120147:[[98],256],120148:[[99],256],120149:[[100],256],120150:[[101],256],120151:[[102],256],120152:[[103],256],120153:[[104],256],120154:[[105],256],120155:[[106],256],120156:[[107],256],120157:[[108],256],120158:[[109],256],120159:[[110],256],120160:[[111],256],120161:[[112],256],120162:[[113],256],120163:[[114],256],120164:[[115],256],120165:[[116],256],120166:[[117],256],120167:[[118],256],120168:[[119],256],120169:[[120],256],120170:[[121],256],120171:[[122],256],120172:[[65],256],120173:[[66],256],120174:[[67],256],120175:[[68],256],120176:[[69],256],120177:[[70],256],120178:[[71],256],120179:[[72],256],120180:[[73],256],120181:[[74],256],120182:[[75],256],120183:[[76],256],120184:[[77],256],120185:[[78],256],120186:[[79],256],120187:[[80],256],120188:[[81],256],120189:[[82],256],120190:[[83],256],120191:[[84],256],120192:[[85],256],120193:[[86],256],120194:[[87],256],120195:[[88],256],120196:[[89],256],120197:[[90],256],120198:[[97],256],120199:[[98],256],120200:[[99],256],120201:[[100],256],120202:[[101],256],120203:[[102],256],120204:[[103],256],120205:[[104],256],120206:[[105],256],120207:[[106],256],120208:[[107],256],120209:[[108],256],120210:[[109],256],120211:[[110],256],120212:[[111],256],120213:[[112],256],120214:[[113],256],120215:[[114],256],120216:[[115],256],120217:[[116],256],120218:[[117],256],120219:[[118],256],120220:[[119],256],120221:[[120],256],120222:[[121],256],120223:[[122],256],120224:[[65],256],120225:[[66],256],120226:[[67],256],120227:[[68],256],120228:[[69],256],120229:[[70],256],120230:[[71],256],120231:[[72],256],120232:[[73],256],120233:[[74],256],120234:[[75],256],120235:[[76],256],120236:[[77],256],120237:[[78],256],120238:[[79],256],120239:[[80],256],120240:[[81],256],120241:[[82],256],120242:[[83],256],120243:[[84],256],120244:[[85],256],120245:[[86],256],120246:[[87],256],120247:[[88],256],120248:[[89],256],120249:[[90],256],120250:[[97],256],120251:[[98],256],120252:[[99],256],120253:[[100],256],120254:[[101],256],120255:[[102],256],120256:[[103],256],120257:[[104],256],120258:[[105],256],120259:[[106],256],120260:[[107],256],120261:[[108],256],120262:[[109],256],120263:[[110],256],120264:[[111],256],120265:[[112],256],120266:[[113],256],120267:[[114],256],120268:[[115],256],120269:[[116],256],120270:[[117],256],120271:[[118],256],120272:[[119],256],120273:[[120],256],120274:[[121],256],120275:[[122],256],120276:[[65],256],120277:[[66],256],120278:[[67],256],120279:[[68],256],120280:[[69],256],120281:[[70],256],120282:[[71],256],120283:[[72],256],120284:[[73],256],120285:[[74],256],120286:[[75],256],120287:[[76],256],120288:[[77],256],120289:[[78],256],120290:[[79],256],120291:[[80],256],120292:[[81],256],120293:[[82],256],120294:[[83],256],120295:[[84],256],120296:[[85],256],120297:[[86],256],120298:[[87],256],120299:[[88],256],120300:[[89],256],120301:[[90],256],120302:[[97],256],120303:[[98],256],120304:[[99],256],120305:[[100],256],120306:[[101],256],120307:[[102],256],120308:[[103],256],120309:[[104],256],120310:[[105],256],120311:[[106],256],120312:[[107],256],120313:[[108],256],120314:[[109],256],120315:[[110],256],120316:[[111],256],120317:[[112],256],120318:[[113],256],120319:[[114],256]},\n54784:{120320:[[115],256],120321:[[116],256],120322:[[117],256],120323:[[118],256],120324:[[119],256],120325:[[120],256],120326:[[121],256],120327:[[122],256],120328:[[65],256],120329:[[66],256],120330:[[67],256],120331:[[68],256],120332:[[69],256],120333:[[70],256],120334:[[71],256],120335:[[72],256],120336:[[73],256],120337:[[74],256],120338:[[75],256],120339:[[76],256],120340:[[77],256],120341:[[78],256],120342:[[79],256],120343:[[80],256],120344:[[81],256],120345:[[82],256],120346:[[83],256],120347:[[84],256],120348:[[85],256],120349:[[86],256],120350:[[87],256],120351:[[88],256],120352:[[89],256],120353:[[90],256],120354:[[97],256],120355:[[98],256],120356:[[99],256],120357:[[100],256],120358:[[101],256],120359:[[102],256],120360:[[103],256],120361:[[104],256],120362:[[105],256],120363:[[106],256],120364:[[107],256],120365:[[108],256],120366:[[109],256],120367:[[110],256],120368:[[111],256],120369:[[112],256],120370:[[113],256],120371:[[114],256],120372:[[115],256],120373:[[116],256],120374:[[117],256],120375:[[118],256],120376:[[119],256],120377:[[120],256],120378:[[121],256],120379:[[122],256],120380:[[65],256],120381:[[66],256],120382:[[67],256],120383:[[68],256],120384:[[69],256],120385:[[70],256],120386:[[71],256],120387:[[72],256],120388:[[73],256],120389:[[74],256],120390:[[75],256],120391:[[76],256],120392:[[77],256],120393:[[78],256],120394:[[79],256],120395:[[80],256],120396:[[81],256],120397:[[82],256],120398:[[83],256],120399:[[84],256],120400:[[85],256],120401:[[86],256],120402:[[87],256],120403:[[88],256],120404:[[89],256],120405:[[90],256],120406:[[97],256],120407:[[98],256],120408:[[99],256],120409:[[100],256],120410:[[101],256],120411:[[102],256],120412:[[103],256],120413:[[104],256],120414:[[105],256],120415:[[106],256],120416:[[107],256],120417:[[108],256],120418:[[109],256],120419:[[110],256],120420:[[111],256],120421:[[112],256],120422:[[113],256],120423:[[114],256],120424:[[115],256],120425:[[116],256],120426:[[117],256],120427:[[118],256],120428:[[119],256],120429:[[120],256],120430:[[121],256],120431:[[122],256],120432:[[65],256],120433:[[66],256],120434:[[67],256],120435:[[68],256],120436:[[69],256],120437:[[70],256],120438:[[71],256],120439:[[72],256],120440:[[73],256],120441:[[74],256],120442:[[75],256],120443:[[76],256],120444:[[77],256],120445:[[78],256],120446:[[79],256],120447:[[80],256],120448:[[81],256],120449:[[82],256],120450:[[83],256],120451:[[84],256],120452:[[85],256],120453:[[86],256],120454:[[87],256],120455:[[88],256],120456:[[89],256],120457:[[90],256],120458:[[97],256],120459:[[98],256],120460:[[99],256],120461:[[100],256],120462:[[101],256],120463:[[102],256],120464:[[103],256],120465:[[104],256],120466:[[105],256],120467:[[106],256],120468:[[107],256],120469:[[108],256],120470:[[109],256],120471:[[110],256],120472:[[111],256],120473:[[112],256],120474:[[113],256],120475:[[114],256],120476:[[115],256],120477:[[116],256],120478:[[117],256],120479:[[118],256],120480:[[119],256],120481:[[120],256],120482:[[121],256],120483:[[122],256],120484:[[305],256],120485:[[567],256],120488:[[913],256],120489:[[914],256],120490:[[915],256],120491:[[916],256],120492:[[917],256],120493:[[918],256],120494:[[919],256],120495:[[920],256],120496:[[921],256],120497:[[922],256],120498:[[923],256],120499:[[924],256],120500:[[925],256],120501:[[926],256],120502:[[927],256],120503:[[928],256],120504:[[929],256],120505:[[1012],256],120506:[[931],256],120507:[[932],256],120508:[[933],256],120509:[[934],256],120510:[[935],256],120511:[[936],256],120512:[[937],256],120513:[[8711],256],120514:[[945],256],120515:[[946],256],120516:[[947],256],120517:[[948],256],120518:[[949],256],120519:[[950],256],120520:[[951],256],120521:[[952],256],120522:[[953],256],120523:[[954],256],120524:[[955],256],120525:[[956],256],120526:[[957],256],120527:[[958],256],120528:[[959],256],120529:[[960],256],120530:[[961],256],120531:[[962],256],120532:[[963],256],120533:[[964],256],120534:[[965],256],120535:[[966],256],120536:[[967],256],120537:[[968],256],120538:[[969],256],120539:[[8706],256],120540:[[1013],256],120541:[[977],256],120542:[[1008],256],120543:[[981],256],120544:[[1009],256],120545:[[982],256],120546:[[913],256],120547:[[914],256],120548:[[915],256],120549:[[916],256],120550:[[917],256],120551:[[918],256],120552:[[919],256],120553:[[920],256],120554:[[921],256],120555:[[922],256],120556:[[923],256],120557:[[924],256],120558:[[925],256],120559:[[926],256],120560:[[927],256],120561:[[928],256],120562:[[929],256],120563:[[1012],256],120564:[[931],256],120565:[[932],256],120566:[[933],256],120567:[[934],256],120568:[[935],256],120569:[[936],256],120570:[[937],256],120571:[[8711],256],120572:[[945],256],120573:[[946],256],120574:[[947],256],120575:[[948],256]},\n55040:{120576:[[949],256],120577:[[950],256],120578:[[951],256],120579:[[952],256],120580:[[953],256],120581:[[954],256],120582:[[955],256],120583:[[956],256],120584:[[957],256],120585:[[958],256],120586:[[959],256],120587:[[960],256],120588:[[961],256],120589:[[962],256],120590:[[963],256],120591:[[964],256],120592:[[965],256],120593:[[966],256],120594:[[967],256],120595:[[968],256],120596:[[969],256],120597:[[8706],256],120598:[[1013],256],120599:[[977],256],120600:[[1008],256],120601:[[981],256],120602:[[1009],256],120603:[[982],256],120604:[[913],256],120605:[[914],256],120606:[[915],256],120607:[[916],256],120608:[[917],256],120609:[[918],256],120610:[[919],256],120611:[[920],256],120612:[[921],256],120613:[[922],256],120614:[[923],256],120615:[[924],256],120616:[[925],256],120617:[[926],256],120618:[[927],256],120619:[[928],256],120620:[[929],256],120621:[[1012],256],120622:[[931],256],120623:[[932],256],120624:[[933],256],120625:[[934],256],120626:[[935],256],120627:[[936],256],120628:[[937],256],120629:[[8711],256],120630:[[945],256],120631:[[946],256],120632:[[947],256],120633:[[948],256],120634:[[949],256],120635:[[950],256],120636:[[951],256],120637:[[952],256],120638:[[953],256],120639:[[954],256],120640:[[955],256],120641:[[956],256],120642:[[957],256],120643:[[958],256],120644:[[959],256],120645:[[960],256],120646:[[961],256],120647:[[962],256],120648:[[963],256],120649:[[964],256],120650:[[965],256],120651:[[966],256],120652:[[967],256],120653:[[968],256],120654:[[969],256],120655:[[8706],256],120656:[[1013],256],120657:[[977],256],120658:[[1008],256],120659:[[981],256],120660:[[1009],256],120661:[[982],256],120662:[[913],256],120663:[[914],256],120664:[[915],256],120665:[[916],256],120666:[[917],256],120667:[[918],256],120668:[[919],256],120669:[[920],256],120670:[[921],256],120671:[[922],256],120672:[[923],256],120673:[[924],256],120674:[[925],256],120675:[[926],256],120676:[[927],256],120677:[[928],256],120678:[[929],256],120679:[[1012],256],120680:[[931],256],120681:[[932],256],120682:[[933],256],120683:[[934],256],120684:[[935],256],120685:[[936],256],120686:[[937],256],120687:[[8711],256],120688:[[945],256],120689:[[946],256],120690:[[947],256],120691:[[948],256],120692:[[949],256],120693:[[950],256],120694:[[951],256],120695:[[952],256],120696:[[953],256],120697:[[954],256],120698:[[955],256],120699:[[956],256],120700:[[957],256],120701:[[958],256],120702:[[959],256],120703:[[960],256],120704:[[961],256],120705:[[962],256],120706:[[963],256],120707:[[964],256],120708:[[965],256],120709:[[966],256],120710:[[967],256],120711:[[968],256],120712:[[969],256],120713:[[8706],256],120714:[[1013],256],120715:[[977],256],120716:[[1008],256],120717:[[981],256],120718:[[1009],256],120719:[[982],256],120720:[[913],256],120721:[[914],256],120722:[[915],256],120723:[[916],256],120724:[[917],256],120725:[[918],256],120726:[[919],256],120727:[[920],256],120728:[[921],256],120729:[[922],256],120730:[[923],256],120731:[[924],256],120732:[[925],256],120733:[[926],256],120734:[[927],256],120735:[[928],256],120736:[[929],256],120737:[[1012],256],120738:[[931],256],120739:[[932],256],120740:[[933],256],120741:[[934],256],120742:[[935],256],120743:[[936],256],120744:[[937],256],120745:[[8711],256],120746:[[945],256],120747:[[946],256],120748:[[947],256],120749:[[948],256],120750:[[949],256],120751:[[950],256],120752:[[951],256],120753:[[952],256],120754:[[953],256],120755:[[954],256],120756:[[955],256],120757:[[956],256],120758:[[957],256],120759:[[958],256],120760:[[959],256],120761:[[960],256],120762:[[961],256],120763:[[962],256],120764:[[963],256],120765:[[964],256],120766:[[965],256],120767:[[966],256],120768:[[967],256],120769:[[968],256],120770:[[969],256],120771:[[8706],256],120772:[[1013],256],120773:[[977],256],120774:[[1008],256],120775:[[981],256],120776:[[1009],256],120777:[[982],256],120778:[[988],256],120779:[[989],256],120782:[[48],256],120783:[[49],256],120784:[[50],256],120785:[[51],256],120786:[[52],256],120787:[[53],256],120788:[[54],256],120789:[[55],256],120790:[[56],256],120791:[[57],256],120792:[[48],256],120793:[[49],256],120794:[[50],256],120795:[[51],256],120796:[[52],256],120797:[[53],256],120798:[[54],256],120799:[[55],256],120800:[[56],256],120801:[[57],256],120802:[[48],256],120803:[[49],256],120804:[[50],256],120805:[[51],256],120806:[[52],256],120807:[[53],256],120808:[[54],256],120809:[[55],256],120810:[[56],256],120811:[[57],256],120812:[[48],256],120813:[[49],256],120814:[[50],256],120815:[[51],256],120816:[[52],256],120817:[[53],256],120818:[[54],256],120819:[[55],256],120820:[[56],256],120821:[[57],256],120822:[[48],256],120823:[[49],256],120824:[[50],256],120825:[[51],256],120826:[[52],256],120827:[[53],256],120828:[[54],256],120829:[[55],256],120830:[[56],256],120831:[[57],256]},\n60928:{126464:[[1575],256],126465:[[1576],256],126466:[[1580],256],126467:[[1583],256],126469:[[1608],256],126470:[[1586],256],126471:[[1581],256],126472:[[1591],256],126473:[[1610],256],126474:[[1603],256],126475:[[1604],256],126476:[[1605],256],126477:[[1606],256],126478:[[1587],256],126479:[[1593],256],126480:[[1601],256],126481:[[1589],256],126482:[[1602],256],126483:[[1585],256],126484:[[1588],256],126485:[[1578],256],126486:[[1579],256],126487:[[1582],256],126488:[[1584],256],126489:[[1590],256],126490:[[1592],256],126491:[[1594],256],126492:[[1646],256],126493:[[1722],256],126494:[[1697],256],126495:[[1647],256],126497:[[1576],256],126498:[[1580],256],126500:[[1607],256],126503:[[1581],256],126505:[[1610],256],126506:[[1603],256],126507:[[1604],256],126508:[[1605],256],126509:[[1606],256],126510:[[1587],256],126511:[[1593],256],126512:[[1601],256],126513:[[1589],256],126514:[[1602],256],126516:[[1588],256],126517:[[1578],256],126518:[[1579],256],126519:[[1582],256],126521:[[1590],256],126523:[[1594],256],126530:[[1580],256],126535:[[1581],256],126537:[[1610],256],126539:[[1604],256],126541:[[1606],256],126542:[[1587],256],126543:[[1593],256],126545:[[1589],256],126546:[[1602],256],126548:[[1588],256],126551:[[1582],256],126553:[[1590],256],126555:[[1594],256],126557:[[1722],256],126559:[[1647],256],126561:[[1576],256],126562:[[1580],256],126564:[[1607],256],126567:[[1581],256],126568:[[1591],256],126569:[[1610],256],126570:[[1603],256],126572:[[1605],256],126573:[[1606],256],126574:[[1587],256],126575:[[1593],256],126576:[[1601],256],126577:[[1589],256],126578:[[1602],256],126580:[[1588],256],126581:[[1578],256],126582:[[1579],256],126583:[[1582],256],126585:[[1590],256],126586:[[1592],256],126587:[[1594],256],126588:[[1646],256],126590:[[1697],256],126592:[[1575],256],126593:[[1576],256],126594:[[1580],256],126595:[[1583],256],126596:[[1607],256],126597:[[1608],256],126598:[[1586],256],126599:[[1581],256],126600:[[1591],256],126601:[[1610],256],126603:[[1604],256],126604:[[1605],256],126605:[[1606],256],126606:[[1587],256],126607:[[1593],256],126608:[[1601],256],126609:[[1589],256],126610:[[1602],256],126611:[[1585],256],126612:[[1588],256],126613:[[1578],256],126614:[[1579],256],126615:[[1582],256],126616:[[1584],256],126617:[[1590],256],126618:[[1592],256],126619:[[1594],256],126625:[[1576],256],126626:[[1580],256],126627:[[1583],256],126629:[[1608],256],126630:[[1586],256],126631:[[1581],256],126632:[[1591],256],126633:[[1610],256],126635:[[1604],256],126636:[[1605],256],126637:[[1606],256],126638:[[1587],256],126639:[[1593],256],126640:[[1601],256],126641:[[1589],256],126642:[[1602],256],126643:[[1585],256],126644:[[1588],256],126645:[[1578],256],126646:[[1579],256],126647:[[1582],256],126648:[[1584],256],126649:[[1590],256],126650:[[1592],256],126651:[[1594],256]},\n61696:{127232:[[48,46],256],127233:[[48,44],256],127234:[[49,44],256],127235:[[50,44],256],127236:[[51,44],256],127237:[[52,44],256],127238:[[53,44],256],127239:[[54,44],256],127240:[[55,44],256],127241:[[56,44],256],127242:[[57,44],256],127248:[[40,65,41],256],127249:[[40,66,41],256],127250:[[40,67,41],256],127251:[[40,68,41],256],127252:[[40,69,41],256],127253:[[40,70,41],256],127254:[[40,71,41],256],127255:[[40,72,41],256],127256:[[40,73,41],256],127257:[[40,74,41],256],127258:[[40,75,41],256],127259:[[40,76,41],256],127260:[[40,77,41],256],127261:[[40,78,41],256],127262:[[40,79,41],256],127263:[[40,80,41],256],127264:[[40,81,41],256],127265:[[40,82,41],256],127266:[[40,83,41],256],127267:[[40,84,41],256],127268:[[40,85,41],256],127269:[[40,86,41],256],127270:[[40,87,41],256],127271:[[40,88,41],256],127272:[[40,89,41],256],127273:[[40,90,41],256],127274:[[12308,83,12309],256],127275:[[67],256],127276:[[82],256],127277:[[67,68],256],127278:[[87,90],256],127280:[[65],256],127281:[[66],256],127282:[[67],256],127283:[[68],256],127284:[[69],256],127285:[[70],256],127286:[[71],256],127287:[[72],256],127288:[[73],256],127289:[[74],256],127290:[[75],256],127291:[[76],256],127292:[[77],256],127293:[[78],256],127294:[[79],256],127295:[[80],256],127296:[[81],256],127297:[[82],256],127298:[[83],256],127299:[[84],256],127300:[[85],256],127301:[[86],256],127302:[[87],256],127303:[[88],256],127304:[[89],256],127305:[[90],256],127306:[[72,86],256],127307:[[77,86],256],127308:[[83,68],256],127309:[[83,83],256],127310:[[80,80,86],256],127311:[[87,67],256],127338:[[77,67],256],127339:[[77,68],256],127376:[[68,74],256]},\n61952:{127488:[[12411,12363],256],127489:[[12467,12467],256],127490:[[12469],256],127504:[[25163],256],127505:[[23383],256],127506:[[21452],256],127507:[[12487],256],127508:[[20108],256],127509:[[22810],256],127510:[[35299],256],127511:[[22825],256],127512:[[20132],256],127513:[[26144],256],127514:[[28961],256],127515:[[26009],256],127516:[[21069],256],127517:[[24460],256],127518:[[20877],256],127519:[[26032],256],127520:[[21021],256],127521:[[32066],256],127522:[[29983],256],127523:[[36009],256],127524:[[22768],256],127525:[[21561],256],127526:[[28436],256],127527:[[25237],256],127528:[[25429],256],127529:[[19968],256],127530:[[19977],256],127531:[[36938],256],127532:[[24038],256],127533:[[20013],256],127534:[[21491],256],127535:[[25351],256],127536:[[36208],256],127537:[[25171],256],127538:[[31105],256],127539:[[31354],256],127540:[[21512],256],127541:[[28288],256],127542:[[26377],256],127543:[[26376],256],127544:[[30003],256],127545:[[21106],256],127546:[[21942],256],127552:[[12308,26412,12309],256],127553:[[12308,19977,12309],256],127554:[[12308,20108,12309],256],127555:[[12308,23433,12309],256],127556:[[12308,28857,12309],256],127557:[[12308,25171,12309],256],127558:[[12308,30423,12309],256],127559:[[12308,21213,12309],256],127560:[[12308,25943,12309],256],127568:[[24471],256],127569:[[21487],256]},\n63488:{194560:[[20029]],194561:[[20024]],194562:[[20033]],194563:[[131362]],194564:[[20320]],194565:[[20398]],194566:[[20411]],194567:[[20482]],194568:[[20602]],194569:[[20633]],194570:[[20711]],194571:[[20687]],194572:[[13470]],194573:[[132666]],194574:[[20813]],194575:[[20820]],194576:[[20836]],194577:[[20855]],194578:[[132380]],194579:[[13497]],194580:[[20839]],194581:[[20877]],194582:[[132427]],194583:[[20887]],194584:[[20900]],194585:[[20172]],194586:[[20908]],194587:[[20917]],194588:[[168415]],194589:[[20981]],194590:[[20995]],194591:[[13535]],194592:[[21051]],194593:[[21062]],194594:[[21106]],194595:[[21111]],194596:[[13589]],194597:[[21191]],194598:[[21193]],194599:[[21220]],194600:[[21242]],194601:[[21253]],194602:[[21254]],194603:[[21271]],194604:[[21321]],194605:[[21329]],194606:[[21338]],194607:[[21363]],194608:[[21373]],194609:[[21375]],194610:[[21375]],194611:[[21375]],194612:[[133676]],194613:[[28784]],194614:[[21450]],194615:[[21471]],194616:[[133987]],194617:[[21483]],194618:[[21489]],194619:[[21510]],194620:[[21662]],194621:[[21560]],194622:[[21576]],194623:[[21608]],194624:[[21666]],194625:[[21750]],194626:[[21776]],194627:[[21843]],194628:[[21859]],194629:[[21892]],194630:[[21892]],194631:[[21913]],194632:[[21931]],194633:[[21939]],194634:[[21954]],194635:[[22294]],194636:[[22022]],194637:[[22295]],194638:[[22097]],194639:[[22132]],194640:[[20999]],194641:[[22766]],194642:[[22478]],194643:[[22516]],194644:[[22541]],194645:[[22411]],194646:[[22578]],194647:[[22577]],194648:[[22700]],194649:[[136420]],194650:[[22770]],194651:[[22775]],194652:[[22790]],194653:[[22810]],194654:[[22818]],194655:[[22882]],194656:[[136872]],194657:[[136938]],194658:[[23020]],194659:[[23067]],194660:[[23079]],194661:[[23000]],194662:[[23142]],194663:[[14062]],194664:[[14076]],194665:[[23304]],194666:[[23358]],194667:[[23358]],194668:[[137672]],194669:[[23491]],194670:[[23512]],194671:[[23527]],194672:[[23539]],194673:[[138008]],194674:[[23551]],194675:[[23558]],194676:[[24403]],194677:[[23586]],194678:[[14209]],194679:[[23648]],194680:[[23662]],194681:[[23744]],194682:[[23693]],194683:[[138724]],194684:[[23875]],194685:[[138726]],194686:[[23918]],194687:[[23915]],194688:[[23932]],194689:[[24033]],194690:[[24034]],194691:[[14383]],194692:[[24061]],194693:[[24104]],194694:[[24125]],194695:[[24169]],194696:[[14434]],194697:[[139651]],194698:[[14460]],194699:[[24240]],194700:[[24243]],194701:[[24246]],194702:[[24266]],194703:[[172946]],194704:[[24318]],194705:[[140081]],194706:[[140081]],194707:[[33281]],194708:[[24354]],194709:[[24354]],194710:[[14535]],194711:[[144056]],194712:[[156122]],194713:[[24418]],194714:[[24427]],194715:[[14563]],194716:[[24474]],194717:[[24525]],194718:[[24535]],194719:[[24569]],194720:[[24705]],194721:[[14650]],194722:[[14620]],194723:[[24724]],194724:[[141012]],194725:[[24775]],194726:[[24904]],194727:[[24908]],194728:[[24910]],194729:[[24908]],194730:[[24954]],194731:[[24974]],194732:[[25010]],194733:[[24996]],194734:[[25007]],194735:[[25054]],194736:[[25074]],194737:[[25078]],194738:[[25104]],194739:[[25115]],194740:[[25181]],194741:[[25265]],194742:[[25300]],194743:[[25424]],194744:[[142092]],194745:[[25405]],194746:[[25340]],194747:[[25448]],194748:[[25475]],194749:[[25572]],194750:[[142321]],194751:[[25634]],194752:[[25541]],194753:[[25513]],194754:[[14894]],194755:[[25705]],194756:[[25726]],194757:[[25757]],194758:[[25719]],194759:[[14956]],194760:[[25935]],194761:[[25964]],194762:[[143370]],194763:[[26083]],194764:[[26360]],194765:[[26185]],194766:[[15129]],194767:[[26257]],194768:[[15112]],194769:[[15076]],194770:[[20882]],194771:[[20885]],194772:[[26368]],194773:[[26268]],194774:[[32941]],194775:[[17369]],194776:[[26391]],194777:[[26395]],194778:[[26401]],194779:[[26462]],194780:[[26451]],194781:[[144323]],194782:[[15177]],194783:[[26618]],194784:[[26501]],194785:[[26706]],194786:[[26757]],194787:[[144493]],194788:[[26766]],194789:[[26655]],194790:[[26900]],194791:[[15261]],194792:[[26946]],194793:[[27043]],194794:[[27114]],194795:[[27304]],194796:[[145059]],194797:[[27355]],194798:[[15384]],194799:[[27425]],194800:[[145575]],194801:[[27476]],194802:[[15438]],194803:[[27506]],194804:[[27551]],194805:[[27578]],194806:[[27579]],194807:[[146061]],194808:[[138507]],194809:[[146170]],194810:[[27726]],194811:[[146620]],194812:[[27839]],194813:[[27853]],194814:[[27751]],194815:[[27926]]},\n63744:{63744:[[35912]],63745:[[26356]],63746:[[36554]],63747:[[36040]],63748:[[28369]],63749:[[20018]],63750:[[21477]],63751:[[40860]],63752:[[40860]],63753:[[22865]],63754:[[37329]],63755:[[21895]],63756:[[22856]],63757:[[25078]],63758:[[30313]],63759:[[32645]],63760:[[34367]],63761:[[34746]],63762:[[35064]],63763:[[37007]],63764:[[27138]],63765:[[27931]],63766:[[28889]],63767:[[29662]],63768:[[33853]],63769:[[37226]],63770:[[39409]],63771:[[20098]],63772:[[21365]],63773:[[27396]],63774:[[29211]],63775:[[34349]],63776:[[40478]],63777:[[23888]],63778:[[28651]],63779:[[34253]],63780:[[35172]],63781:[[25289]],63782:[[33240]],63783:[[34847]],63784:[[24266]],63785:[[26391]],63786:[[28010]],63787:[[29436]],63788:[[37070]],63789:[[20358]],63790:[[20919]],63791:[[21214]],63792:[[25796]],63793:[[27347]],63794:[[29200]],63795:[[30439]],63796:[[32769]],63797:[[34310]],63798:[[34396]],63799:[[36335]],63800:[[38706]],63801:[[39791]],63802:[[40442]],63803:[[30860]],63804:[[31103]],63805:[[32160]],63806:[[33737]],63807:[[37636]],63808:[[40575]],63809:[[35542]],63810:[[22751]],63811:[[24324]],63812:[[31840]],63813:[[32894]],63814:[[29282]],63815:[[30922]],63816:[[36034]],63817:[[38647]],63818:[[22744]],63819:[[23650]],63820:[[27155]],63821:[[28122]],63822:[[28431]],63823:[[32047]],63824:[[32311]],63825:[[38475]],63826:[[21202]],63827:[[32907]],63828:[[20956]],63829:[[20940]],63830:[[31260]],63831:[[32190]],63832:[[33777]],63833:[[38517]],63834:[[35712]],63835:[[25295]],63836:[[27138]],63837:[[35582]],63838:[[20025]],63839:[[23527]],63840:[[24594]],63841:[[29575]],63842:[[30064]],63843:[[21271]],63844:[[30971]],63845:[[20415]],63846:[[24489]],63847:[[19981]],63848:[[27852]],63849:[[25976]],63850:[[32034]],63851:[[21443]],63852:[[22622]],63853:[[30465]],63854:[[33865]],63855:[[35498]],63856:[[27578]],63857:[[36784]],63858:[[27784]],63859:[[25342]],63860:[[33509]],63861:[[25504]],63862:[[30053]],63863:[[20142]],63864:[[20841]],63865:[[20937]],63866:[[26753]],63867:[[31975]],63868:[[33391]],63869:[[35538]],63870:[[37327]],63871:[[21237]],63872:[[21570]],63873:[[22899]],63874:[[24300]],63875:[[26053]],63876:[[28670]],63877:[[31018]],63878:[[38317]],63879:[[39530]],63880:[[40599]],63881:[[40654]],63882:[[21147]],63883:[[26310]],63884:[[27511]],63885:[[36706]],63886:[[24180]],63887:[[24976]],63888:[[25088]],63889:[[25754]],63890:[[28451]],63891:[[29001]],63892:[[29833]],63893:[[31178]],63894:[[32244]],63895:[[32879]],63896:[[36646]],63897:[[34030]],63898:[[36899]],63899:[[37706]],63900:[[21015]],63901:[[21155]],63902:[[21693]],63903:[[28872]],63904:[[35010]],63905:[[35498]],63906:[[24265]],63907:[[24565]],63908:[[25467]],63909:[[27566]],63910:[[31806]],63911:[[29557]],63912:[[20196]],63913:[[22265]],63914:[[23527]],63915:[[23994]],63916:[[24604]],63917:[[29618]],63918:[[29801]],63919:[[32666]],63920:[[32838]],63921:[[37428]],63922:[[38646]],63923:[[38728]],63924:[[38936]],63925:[[20363]],63926:[[31150]],63927:[[37300]],63928:[[38584]],63929:[[24801]],63930:[[20102]],63931:[[20698]],63932:[[23534]],63933:[[23615]],63934:[[26009]],63935:[[27138]],63936:[[29134]],63937:[[30274]],63938:[[34044]],63939:[[36988]],63940:[[40845]],63941:[[26248]],63942:[[38446]],63943:[[21129]],63944:[[26491]],63945:[[26611]],63946:[[27969]],63947:[[28316]],63948:[[29705]],63949:[[30041]],63950:[[30827]],63951:[[32016]],63952:[[39006]],63953:[[20845]],63954:[[25134]],63955:[[38520]],63956:[[20523]],63957:[[23833]],63958:[[28138]],63959:[[36650]],63960:[[24459]],63961:[[24900]],63962:[[26647]],63963:[[29575]],63964:[[38534]],63965:[[21033]],63966:[[21519]],63967:[[23653]],63968:[[26131]],63969:[[26446]],63970:[[26792]],63971:[[27877]],63972:[[29702]],63973:[[30178]],63974:[[32633]],63975:[[35023]],63976:[[35041]],63977:[[37324]],63978:[[38626]],63979:[[21311]],63980:[[28346]],63981:[[21533]],63982:[[29136]],63983:[[29848]],63984:[[34298]],63985:[[38563]],63986:[[40023]],63987:[[40607]],63988:[[26519]],63989:[[28107]],63990:[[33256]],63991:[[31435]],63992:[[31520]],63993:[[31890]],63994:[[29376]],63995:[[28825]],63996:[[35672]],63997:[[20160]],63998:[[33590]],63999:[[21050]],194816:[[27966]],194817:[[28023]],194818:[[27969]],194819:[[28009]],194820:[[28024]],194821:[[28037]],194822:[[146718]],194823:[[27956]],194824:[[28207]],194825:[[28270]],194826:[[15667]],194827:[[28363]],194828:[[28359]],194829:[[147153]],194830:[[28153]],194831:[[28526]],194832:[[147294]],194833:[[147342]],194834:[[28614]],194835:[[28729]],194836:[[28702]],194837:[[28699]],194838:[[15766]],194839:[[28746]],194840:[[28797]],194841:[[28791]],194842:[[28845]],194843:[[132389]],194844:[[28997]],194845:[[148067]],194846:[[29084]],194847:[[148395]],194848:[[29224]],194849:[[29237]],194850:[[29264]],194851:[[149000]],194852:[[29312]],194853:[[29333]],194854:[[149301]],194855:[[149524]],194856:[[29562]],194857:[[29579]],194858:[[16044]],194859:[[29605]],194860:[[16056]],194861:[[16056]],194862:[[29767]],194863:[[29788]],194864:[[29809]],194865:[[29829]],194866:[[29898]],194867:[[16155]],194868:[[29988]],194869:[[150582]],194870:[[30014]],194871:[[150674]],194872:[[30064]],194873:[[139679]],194874:[[30224]],194875:[[151457]],194876:[[151480]],194877:[[151620]],194878:[[16380]],194879:[[16392]],194880:[[30452]],194881:[[151795]],194882:[[151794]],194883:[[151833]],194884:[[151859]],194885:[[30494]],194886:[[30495]],194887:[[30495]],194888:[[30538]],194889:[[16441]],194890:[[30603]],194891:[[16454]],194892:[[16534]],194893:[[152605]],194894:[[30798]],194895:[[30860]],194896:[[30924]],194897:[[16611]],194898:[[153126]],194899:[[31062]],194900:[[153242]],194901:[[153285]],194902:[[31119]],194903:[[31211]],194904:[[16687]],194905:[[31296]],194906:[[31306]],194907:[[31311]],194908:[[153980]],194909:[[154279]],194910:[[154279]],194911:[[31470]],194912:[[16898]],194913:[[154539]],194914:[[31686]],194915:[[31689]],194916:[[16935]],194917:[[154752]],194918:[[31954]],194919:[[17056]],194920:[[31976]],194921:[[31971]],194922:[[32000]],194923:[[155526]],194924:[[32099]],194925:[[17153]],194926:[[32199]],194927:[[32258]],194928:[[32325]],194929:[[17204]],194930:[[156200]],194931:[[156231]],194932:[[17241]],194933:[[156377]],194934:[[32634]],194935:[[156478]],194936:[[32661]],194937:[[32762]],194938:[[32773]],194939:[[156890]],194940:[[156963]],194941:[[32864]],194942:[[157096]],194943:[[32880]],194944:[[144223]],194945:[[17365]],194946:[[32946]],194947:[[33027]],194948:[[17419]],194949:[[33086]],194950:[[23221]],194951:[[157607]],194952:[[157621]],194953:[[144275]],194954:[[144284]],194955:[[33281]],194956:[[33284]],194957:[[36766]],194958:[[17515]],194959:[[33425]],194960:[[33419]],194961:[[33437]],194962:[[21171]],194963:[[33457]],194964:[[33459]],194965:[[33469]],194966:[[33510]],194967:[[158524]],194968:[[33509]],194969:[[33565]],194970:[[33635]],194971:[[33709]],194972:[[33571]],194973:[[33725]],194974:[[33767]],194975:[[33879]],194976:[[33619]],194977:[[33738]],194978:[[33740]],194979:[[33756]],194980:[[158774]],194981:[[159083]],194982:[[158933]],194983:[[17707]],194984:[[34033]],194985:[[34035]],194986:[[34070]],194987:[[160714]],194988:[[34148]],194989:[[159532]],194990:[[17757]],194991:[[17761]],194992:[[159665]],194993:[[159954]],194994:[[17771]],194995:[[34384]],194996:[[34396]],194997:[[34407]],194998:[[34409]],194999:[[34473]],195000:[[34440]],195001:[[34574]],195002:[[34530]],195003:[[34681]],195004:[[34600]],195005:[[34667]],195006:[[34694]],195007:[[17879]],195008:[[34785]],195009:[[34817]],195010:[[17913]],195011:[[34912]],195012:[[34915]],195013:[[161383]],195014:[[35031]],195015:[[35038]],195016:[[17973]],195017:[[35066]],195018:[[13499]],195019:[[161966]],195020:[[162150]],195021:[[18110]],195022:[[18119]],195023:[[35488]],195024:[[35565]],195025:[[35722]],195026:[[35925]],195027:[[162984]],195028:[[36011]],195029:[[36033]],195030:[[36123]],195031:[[36215]],195032:[[163631]],195033:[[133124]],195034:[[36299]],195035:[[36284]],195036:[[36336]],195037:[[133342]],195038:[[36564]],195039:[[36664]],195040:[[165330]],195041:[[165357]],195042:[[37012]],195043:[[37105]],195044:[[37137]],195045:[[165678]],195046:[[37147]],195047:[[37432]],195048:[[37591]],195049:[[37592]],195050:[[37500]],195051:[[37881]],195052:[[37909]],195053:[[166906]],195054:[[38283]],195055:[[18837]],195056:[[38327]],195057:[[167287]],195058:[[18918]],195059:[[38595]],195060:[[23986]],195061:[[38691]],195062:[[168261]],195063:[[168474]],195064:[[19054]],195065:[[19062]],195066:[[38880]],195067:[[168970]],195068:[[19122]],195069:[[169110]],195070:[[38923]],195071:[[38923]]},\n64000:{64000:[[20999]],64001:[[24230]],64002:[[25299]],64003:[[31958]],64004:[[23429]],64005:[[27934]],64006:[[26292]],64007:[[36667]],64008:[[34892]],64009:[[38477]],64010:[[35211]],64011:[[24275]],64012:[[20800]],64013:[[21952]],64016:[[22618]],64018:[[26228]],64021:[[20958]],64022:[[29482]],64023:[[30410]],64024:[[31036]],64025:[[31070]],64026:[[31077]],64027:[[31119]],64028:[[38742]],64029:[[31934]],64030:[[32701]],64032:[[34322]],64034:[[35576]],64037:[[36920]],64038:[[37117]],64042:[[39151]],64043:[[39164]],64044:[[39208]],64045:[[40372]],64046:[[37086]],64047:[[38583]],64048:[[20398]],64049:[[20711]],64050:[[20813]],64051:[[21193]],64052:[[21220]],64053:[[21329]],64054:[[21917]],64055:[[22022]],64056:[[22120]],64057:[[22592]],64058:[[22696]],64059:[[23652]],64060:[[23662]],64061:[[24724]],64062:[[24936]],64063:[[24974]],64064:[[25074]],64065:[[25935]],64066:[[26082]],64067:[[26257]],64068:[[26757]],64069:[[28023]],64070:[[28186]],64071:[[28450]],64072:[[29038]],64073:[[29227]],64074:[[29730]],64075:[[30865]],64076:[[31038]],64077:[[31049]],64078:[[31048]],64079:[[31056]],64080:[[31062]],64081:[[31069]],64082:[[31117]],64083:[[31118]],64084:[[31296]],64085:[[31361]],64086:[[31680]],64087:[[32244]],64088:[[32265]],64089:[[32321]],64090:[[32626]],64091:[[32773]],64092:[[33261]],64093:[[33401]],64094:[[33401]],64095:[[33879]],64096:[[35088]],64097:[[35222]],64098:[[35585]],64099:[[35641]],64100:[[36051]],64101:[[36104]],64102:[[36790]],64103:[[36920]],64104:[[38627]],64105:[[38911]],64106:[[38971]],64107:[[24693]],64108:[[148206]],64109:[[33304]],64112:[[20006]],64113:[[20917]],64114:[[20840]],64115:[[20352]],64116:[[20805]],64117:[[20864]],64118:[[21191]],64119:[[21242]],64120:[[21917]],64121:[[21845]],64122:[[21913]],64123:[[21986]],64124:[[22618]],64125:[[22707]],64126:[[22852]],64127:[[22868]],64128:[[23138]],64129:[[23336]],64130:[[24274]],64131:[[24281]],64132:[[24425]],64133:[[24493]],64134:[[24792]],64135:[[24910]],64136:[[24840]],64137:[[24974]],64138:[[24928]],64139:[[25074]],64140:[[25140]],64141:[[25540]],64142:[[25628]],64143:[[25682]],64144:[[25942]],64145:[[26228]],64146:[[26391]],64147:[[26395]],64148:[[26454]],64149:[[27513]],64150:[[27578]],64151:[[27969]],64152:[[28379]],64153:[[28363]],64154:[[28450]],64155:[[28702]],64156:[[29038]],64157:[[30631]],64158:[[29237]],64159:[[29359]],64160:[[29482]],64161:[[29809]],64162:[[29958]],64163:[[30011]],64164:[[30237]],64165:[[30239]],64166:[[30410]],64167:[[30427]],64168:[[30452]],64169:[[30538]],64170:[[30528]],64171:[[30924]],64172:[[31409]],64173:[[31680]],64174:[[31867]],64175:[[32091]],64176:[[32244]],64177:[[32574]],64178:[[32773]],64179:[[33618]],64180:[[33775]],64181:[[34681]],64182:[[35137]],64183:[[35206]],64184:[[35222]],64185:[[35519]],64186:[[35576]],64187:[[35531]],64188:[[35585]],64189:[[35582]],64190:[[35565]],64191:[[35641]],64192:[[35722]],64193:[[36104]],64194:[[36664]],64195:[[36978]],64196:[[37273]],64197:[[37494]],64198:[[38524]],64199:[[38627]],64200:[[38742]],64201:[[38875]],64202:[[38911]],64203:[[38923]],64204:[[38971]],64205:[[39698]],64206:[[40860]],64207:[[141386]],64208:[[141380]],64209:[[144341]],64210:[[15261]],64211:[[16408]],64212:[[16441]],64213:[[152137]],64214:[[154832]],64215:[[163539]],64216:[[40771]],64217:[[40846]],195072:[[38953]],195073:[[169398]],195074:[[39138]],195075:[[19251]],195076:[[39209]],195077:[[39335]],195078:[[39362]],195079:[[39422]],195080:[[19406]],195081:[[170800]],195082:[[39698]],195083:[[40000]],195084:[[40189]],195085:[[19662]],195086:[[19693]],195087:[[40295]],195088:[[172238]],195089:[[19704]],195090:[[172293]],195091:[[172558]],195092:[[172689]],195093:[[40635]],195094:[[19798]],195095:[[40697]],195096:[[40702]],195097:[[40709]],195098:[[40719]],195099:[[40726]],195100:[[40763]],195101:[[173568]]},\n64256:{64256:[[102,102],256],64257:[[102,105],256],64258:[[102,108],256],64259:[[102,102,105],256],64260:[[102,102,108],256],64261:[[383,116],256],64262:[[115,116],256],64275:[[1396,1398],256],64276:[[1396,1381],256],64277:[[1396,1387],256],64278:[[1406,1398],256],64279:[[1396,1389],256],64285:[[1497,1460],512],64286:[,26],64287:[[1522,1463],512],64288:[[1506],256],64289:[[1488],256],64290:[[1491],256],64291:[[1492],256],64292:[[1499],256],64293:[[1500],256],64294:[[1501],256],64295:[[1512],256],64296:[[1514],256],64297:[[43],256],64298:[[1513,1473],512],64299:[[1513,1474],512],64300:[[64329,1473],512],64301:[[64329,1474],512],64302:[[1488,1463],512],64303:[[1488,1464],512],64304:[[1488,1468],512],64305:[[1489,1468],512],64306:[[1490,1468],512],64307:[[1491,1468],512],64308:[[1492,1468],512],64309:[[1493,1468],512],64310:[[1494,1468],512],64312:[[1496,1468],512],64313:[[1497,1468],512],64314:[[1498,1468],512],64315:[[1499,1468],512],64316:[[1500,1468],512],64318:[[1502,1468],512],64320:[[1504,1468],512],64321:[[1505,1468],512],64323:[[1507,1468],512],64324:[[1508,1468],512],64326:[[1510,1468],512],64327:[[1511,1468],512],64328:[[1512,1468],512],64329:[[1513,1468],512],64330:[[1514,1468],512],64331:[[1493,1465],512],64332:[[1489,1471],512],64333:[[1499,1471],512],64334:[[1508,1471],512],64335:[[1488,1500],256],64336:[[1649],256],64337:[[1649],256],64338:[[1659],256],64339:[[1659],256],64340:[[1659],256],64341:[[1659],256],64342:[[1662],256],64343:[[1662],256],64344:[[1662],256],64345:[[1662],256],64346:[[1664],256],64347:[[1664],256],64348:[[1664],256],64349:[[1664],256],64350:[[1658],256],64351:[[1658],256],64352:[[1658],256],64353:[[1658],256],64354:[[1663],256],64355:[[1663],256],64356:[[1663],256],64357:[[1663],256],64358:[[1657],256],64359:[[1657],256],64360:[[1657],256],64361:[[1657],256],64362:[[1700],256],64363:[[1700],256],64364:[[1700],256],64365:[[1700],256],64366:[[1702],256],64367:[[1702],256],64368:[[1702],256],64369:[[1702],256],64370:[[1668],256],64371:[[1668],256],64372:[[1668],256],64373:[[1668],256],64374:[[1667],256],64375:[[1667],256],64376:[[1667],256],64377:[[1667],256],64378:[[1670],256],64379:[[1670],256],64380:[[1670],256],64381:[[1670],256],64382:[[1671],256],64383:[[1671],256],64384:[[1671],256],64385:[[1671],256],64386:[[1677],256],64387:[[1677],256],64388:[[1676],256],64389:[[1676],256],64390:[[1678],256],64391:[[1678],256],64392:[[1672],256],64393:[[1672],256],64394:[[1688],256],64395:[[1688],256],64396:[[1681],256],64397:[[1681],256],64398:[[1705],256],64399:[[1705],256],64400:[[1705],256],64401:[[1705],256],64402:[[1711],256],64403:[[1711],256],64404:[[1711],256],64405:[[1711],256],64406:[[1715],256],64407:[[1715],256],64408:[[1715],256],64409:[[1715],256],64410:[[1713],256],64411:[[1713],256],64412:[[1713],256],64413:[[1713],256],64414:[[1722],256],64415:[[1722],256],64416:[[1723],256],64417:[[1723],256],64418:[[1723],256],64419:[[1723],256],64420:[[1728],256],64421:[[1728],256],64422:[[1729],256],64423:[[1729],256],64424:[[1729],256],64425:[[1729],256],64426:[[1726],256],64427:[[1726],256],64428:[[1726],256],64429:[[1726],256],64430:[[1746],256],64431:[[1746],256],64432:[[1747],256],64433:[[1747],256],64467:[[1709],256],64468:[[1709],256],64469:[[1709],256],64470:[[1709],256],64471:[[1735],256],64472:[[1735],256],64473:[[1734],256],64474:[[1734],256],64475:[[1736],256],64476:[[1736],256],64477:[[1655],256],64478:[[1739],256],64479:[[1739],256],64480:[[1733],256],64481:[[1733],256],64482:[[1737],256],64483:[[1737],256],64484:[[1744],256],64485:[[1744],256],64486:[[1744],256],64487:[[1744],256],64488:[[1609],256],64489:[[1609],256],64490:[[1574,1575],256],64491:[[1574,1575],256],64492:[[1574,1749],256],64493:[[1574,1749],256],64494:[[1574,1608],256],64495:[[1574,1608],256],64496:[[1574,1735],256],64497:[[1574,1735],256],64498:[[1574,1734],256],64499:[[1574,1734],256],64500:[[1574,1736],256],64501:[[1574,1736],256],64502:[[1574,1744],256],64503:[[1574,1744],256],64504:[[1574,1744],256],64505:[[1574,1609],256],64506:[[1574,1609],256],64507:[[1574,1609],256],64508:[[1740],256],64509:[[1740],256],64510:[[1740],256],64511:[[1740],256]},\n64512:{64512:[[1574,1580],256],64513:[[1574,1581],256],64514:[[1574,1605],256],64515:[[1574,1609],256],64516:[[1574,1610],256],64517:[[1576,1580],256],64518:[[1576,1581],256],64519:[[1576,1582],256],64520:[[1576,1605],256],64521:[[1576,1609],256],64522:[[1576,1610],256],64523:[[1578,1580],256],64524:[[1578,1581],256],64525:[[1578,1582],256],64526:[[1578,1605],256],64527:[[1578,1609],256],64528:[[1578,1610],256],64529:[[1579,1580],256],64530:[[1579,1605],256],64531:[[1579,1609],256],64532:[[1579,1610],256],64533:[[1580,1581],256],64534:[[1580,1605],256],64535:[[1581,1580],256],64536:[[1581,1605],256],64537:[[1582,1580],256],64538:[[1582,1581],256],64539:[[1582,1605],256],64540:[[1587,1580],256],64541:[[1587,1581],256],64542:[[1587,1582],256],64543:[[1587,1605],256],64544:[[1589,1581],256],64545:[[1589,1605],256],64546:[[1590,1580],256],64547:[[1590,1581],256],64548:[[1590,1582],256],64549:[[1590,1605],256],64550:[[1591,1581],256],64551:[[1591,1605],256],64552:[[1592,1605],256],64553:[[1593,1580],256],64554:[[1593,1605],256],64555:[[1594,1580],256],64556:[[1594,1605],256],64557:[[1601,1580],256],64558:[[1601,1581],256],64559:[[1601,1582],256],64560:[[1601,1605],256],64561:[[1601,1609],256],64562:[[1601,1610],256],64563:[[1602,1581],256],64564:[[1602,1605],256],64565:[[1602,1609],256],64566:[[1602,1610],256],64567:[[1603,1575],256],64568:[[1603,1580],256],64569:[[1603,1581],256],64570:[[1603,1582],256],64571:[[1603,1604],256],64572:[[1603,1605],256],64573:[[1603,1609],256],64574:[[1603,1610],256],64575:[[1604,1580],256],64576:[[1604,1581],256],64577:[[1604,1582],256],64578:[[1604,1605],256],64579:[[1604,1609],256],64580:[[1604,1610],256],64581:[[1605,1580],256],64582:[[1605,1581],256],64583:[[1605,1582],256],64584:[[1605,1605],256],64585:[[1605,1609],256],64586:[[1605,1610],256],64587:[[1606,1580],256],64588:[[1606,1581],256],64589:[[1606,1582],256],64590:[[1606,1605],256],64591:[[1606,1609],256],64592:[[1606,1610],256],64593:[[1607,1580],256],64594:[[1607,1605],256],64595:[[1607,1609],256],64596:[[1607,1610],256],64597:[[1610,1580],256],64598:[[1610,1581],256],64599:[[1610,1582],256],64600:[[1610,1605],256],64601:[[1610,1609],256],64602:[[1610,1610],256],64603:[[1584,1648],256],64604:[[1585,1648],256],64605:[[1609,1648],256],64606:[[32,1612,1617],256],64607:[[32,1613,1617],256],64608:[[32,1614,1617],256],64609:[[32,1615,1617],256],64610:[[32,1616,1617],256],64611:[[32,1617,1648],256],64612:[[1574,1585],256],64613:[[1574,1586],256],64614:[[1574,1605],256],64615:[[1574,1606],256],64616:[[1574,1609],256],64617:[[1574,1610],256],64618:[[1576,1585],256],64619:[[1576,1586],256],64620:[[1576,1605],256],64621:[[1576,1606],256],64622:[[1576,1609],256],64623:[[1576,1610],256],64624:[[1578,1585],256],64625:[[1578,1586],256],64626:[[1578,1605],256],64627:[[1578,1606],256],64628:[[1578,1609],256],64629:[[1578,1610],256],64630:[[1579,1585],256],64631:[[1579,1586],256],64632:[[1579,1605],256],64633:[[1579,1606],256],64634:[[1579,1609],256],64635:[[1579,1610],256],64636:[[1601,1609],256],64637:[[1601,1610],256],64638:[[1602,1609],256],64639:[[1602,1610],256],64640:[[1603,1575],256],64641:[[1603,1604],256],64642:[[1603,1605],256],64643:[[1603,1609],256],64644:[[1603,1610],256],64645:[[1604,1605],256],64646:[[1604,1609],256],64647:[[1604,1610],256],64648:[[1605,1575],256],64649:[[1605,1605],256],64650:[[1606,1585],256],64651:[[1606,1586],256],64652:[[1606,1605],256],64653:[[1606,1606],256],64654:[[1606,1609],256],64655:[[1606,1610],256],64656:[[1609,1648],256],64657:[[1610,1585],256],64658:[[1610,1586],256],64659:[[1610,1605],256],64660:[[1610,1606],256],64661:[[1610,1609],256],64662:[[1610,1610],256],64663:[[1574,1580],256],64664:[[1574,1581],256],64665:[[1574,1582],256],64666:[[1574,1605],256],64667:[[1574,1607],256],64668:[[1576,1580],256],64669:[[1576,1581],256],64670:[[1576,1582],256],64671:[[1576,1605],256],64672:[[1576,1607],256],64673:[[1578,1580],256],64674:[[1578,1581],256],64675:[[1578,1582],256],64676:[[1578,1605],256],64677:[[1578,1607],256],64678:[[1579,1605],256],64679:[[1580,1581],256],64680:[[1580,1605],256],64681:[[1581,1580],256],64682:[[1581,1605],256],64683:[[1582,1580],256],64684:[[1582,1605],256],64685:[[1587,1580],256],64686:[[1587,1581],256],64687:[[1587,1582],256],64688:[[1587,1605],256],64689:[[1589,1581],256],64690:[[1589,1582],256],64691:[[1589,1605],256],64692:[[1590,1580],256],64693:[[1590,1581],256],64694:[[1590,1582],256],64695:[[1590,1605],256],64696:[[1591,1581],256],64697:[[1592,1605],256],64698:[[1593,1580],256],64699:[[1593,1605],256],64700:[[1594,1580],256],64701:[[1594,1605],256],64702:[[1601,1580],256],64703:[[1601,1581],256],64704:[[1601,1582],256],64705:[[1601,1605],256],64706:[[1602,1581],256],64707:[[1602,1605],256],64708:[[1603,1580],256],64709:[[1603,1581],256],64710:[[1603,1582],256],64711:[[1603,1604],256],64712:[[1603,1605],256],64713:[[1604,1580],256],64714:[[1604,1581],256],64715:[[1604,1582],256],64716:[[1604,1605],256],64717:[[1604,1607],256],64718:[[1605,1580],256],64719:[[1605,1581],256],64720:[[1605,1582],256],64721:[[1605,1605],256],64722:[[1606,1580],256],64723:[[1606,1581],256],64724:[[1606,1582],256],64725:[[1606,1605],256],64726:[[1606,1607],256],64727:[[1607,1580],256],64728:[[1607,1605],256],64729:[[1607,1648],256],64730:[[1610,1580],256],64731:[[1610,1581],256],64732:[[1610,1582],256],64733:[[1610,1605],256],64734:[[1610,1607],256],64735:[[1574,1605],256],64736:[[1574,1607],256],64737:[[1576,1605],256],64738:[[1576,1607],256],64739:[[1578,1605],256],64740:[[1578,1607],256],64741:[[1579,1605],256],64742:[[1579,1607],256],64743:[[1587,1605],256],64744:[[1587,1607],256],64745:[[1588,1605],256],64746:[[1588,1607],256],64747:[[1603,1604],256],64748:[[1603,1605],256],64749:[[1604,1605],256],64750:[[1606,1605],256],64751:[[1606,1607],256],64752:[[1610,1605],256],64753:[[1610,1607],256],64754:[[1600,1614,1617],256],64755:[[1600,1615,1617],256],64756:[[1600,1616,1617],256],64757:[[1591,1609],256],64758:[[1591,1610],256],64759:[[1593,1609],256],64760:[[1593,1610],256],64761:[[1594,1609],256],64762:[[1594,1610],256],64763:[[1587,1609],256],64764:[[1587,1610],256],64765:[[1588,1609],256],64766:[[1588,1610],256],64767:[[1581,1609],256]},\n64768:{64768:[[1581,1610],256],64769:[[1580,1609],256],64770:[[1580,1610],256],64771:[[1582,1609],256],64772:[[1582,1610],256],64773:[[1589,1609],256],64774:[[1589,1610],256],64775:[[1590,1609],256],64776:[[1590,1610],256],64777:[[1588,1580],256],64778:[[1588,1581],256],64779:[[1588,1582],256],64780:[[1588,1605],256],64781:[[1588,1585],256],64782:[[1587,1585],256],64783:[[1589,1585],256],64784:[[1590,1585],256],64785:[[1591,1609],256],64786:[[1591,1610],256],64787:[[1593,1609],256],64788:[[1593,1610],256],64789:[[1594,1609],256],64790:[[1594,1610],256],64791:[[1587,1609],256],64792:[[1587,1610],256],64793:[[1588,1609],256],64794:[[1588,1610],256],64795:[[1581,1609],256],64796:[[1581,1610],256],64797:[[1580,1609],256],64798:[[1580,1610],256],64799:[[1582,1609],256],64800:[[1582,1610],256],64801:[[1589,1609],256],64802:[[1589,1610],256],64803:[[1590,1609],256],64804:[[1590,1610],256],64805:[[1588,1580],256],64806:[[1588,1581],256],64807:[[1588,1582],256],64808:[[1588,1605],256],64809:[[1588,1585],256],64810:[[1587,1585],256],64811:[[1589,1585],256],64812:[[1590,1585],256],64813:[[1588,1580],256],64814:[[1588,1581],256],64815:[[1588,1582],256],64816:[[1588,1605],256],64817:[[1587,1607],256],64818:[[1588,1607],256],64819:[[1591,1605],256],64820:[[1587,1580],256],64821:[[1587,1581],256],64822:[[1587,1582],256],64823:[[1588,1580],256],64824:[[1588,1581],256],64825:[[1588,1582],256],64826:[[1591,1605],256],64827:[[1592,1605],256],64828:[[1575,1611],256],64829:[[1575,1611],256],64848:[[1578,1580,1605],256],64849:[[1578,1581,1580],256],64850:[[1578,1581,1580],256],64851:[[1578,1581,1605],256],64852:[[1578,1582,1605],256],64853:[[1578,1605,1580],256],64854:[[1578,1605,1581],256],64855:[[1578,1605,1582],256],64856:[[1580,1605,1581],256],64857:[[1580,1605,1581],256],64858:[[1581,1605,1610],256],64859:[[1581,1605,1609],256],64860:[[1587,1581,1580],256],64861:[[1587,1580,1581],256],64862:[[1587,1580,1609],256],64863:[[1587,1605,1581],256],64864:[[1587,1605,1581],256],64865:[[1587,1605,1580],256],64866:[[1587,1605,1605],256],64867:[[1587,1605,1605],256],64868:[[1589,1581,1581],256],64869:[[1589,1581,1581],256],64870:[[1589,1605,1605],256],64871:[[1588,1581,1605],256],64872:[[1588,1581,1605],256],64873:[[1588,1580,1610],256],64874:[[1588,1605,1582],256],64875:[[1588,1605,1582],256],64876:[[1588,1605,1605],256],64877:[[1588,1605,1605],256],64878:[[1590,1581,1609],256],64879:[[1590,1582,1605],256],64880:[[1590,1582,1605],256],64881:[[1591,1605,1581],256],64882:[[1591,1605,1581],256],64883:[[1591,1605,1605],256],64884:[[1591,1605,1610],256],64885:[[1593,1580,1605],256],64886:[[1593,1605,1605],256],64887:[[1593,1605,1605],256],64888:[[1593,1605,1609],256],64889:[[1594,1605,1605],256],64890:[[1594,1605,1610],256],64891:[[1594,1605,1609],256],64892:[[1601,1582,1605],256],64893:[[1601,1582,1605],256],64894:[[1602,1605,1581],256],64895:[[1602,1605,1605],256],64896:[[1604,1581,1605],256],64897:[[1604,1581,1610],256],64898:[[1604,1581,1609],256],64899:[[1604,1580,1580],256],64900:[[1604,1580,1580],256],64901:[[1604,1582,1605],256],64902:[[1604,1582,1605],256],64903:[[1604,1605,1581],256],64904:[[1604,1605,1581],256],64905:[[1605,1581,1580],256],64906:[[1605,1581,1605],256],64907:[[1605,1581,1610],256],64908:[[1605,1580,1581],256],64909:[[1605,1580,1605],256],64910:[[1605,1582,1580],256],64911:[[1605,1582,1605],256],64914:[[1605,1580,1582],256],64915:[[1607,1605,1580],256],64916:[[1607,1605,1605],256],64917:[[1606,1581,1605],256],64918:[[1606,1581,1609],256],64919:[[1606,1580,1605],256],64920:[[1606,1580,1605],256],64921:[[1606,1580,1609],256],64922:[[1606,1605,1610],256],64923:[[1606,1605,1609],256],64924:[[1610,1605,1605],256],64925:[[1610,1605,1605],256],64926:[[1576,1582,1610],256],64927:[[1578,1580,1610],256],64928:[[1578,1580,1609],256],64929:[[1578,1582,1610],256],64930:[[1578,1582,1609],256],64931:[[1578,1605,1610],256],64932:[[1578,1605,1609],256],64933:[[1580,1605,1610],256],64934:[[1580,1581,1609],256],64935:[[1580,1605,1609],256],64936:[[1587,1582,1609],256],64937:[[1589,1581,1610],256],64938:[[1588,1581,1610],256],64939:[[1590,1581,1610],256],64940:[[1604,1580,1610],256],64941:[[1604,1605,1610],256],64942:[[1610,1581,1610],256],64943:[[1610,1580,1610],256],64944:[[1610,1605,1610],256],64945:[[1605,1605,1610],256],64946:[[1602,1605,1610],256],64947:[[1606,1581,1610],256],64948:[[1602,1605,1581],256],64949:[[1604,1581,1605],256],64950:[[1593,1605,1610],256],64951:[[1603,1605,1610],256],64952:[[1606,1580,1581],256],64953:[[1605,1582,1610],256],64954:[[1604,1580,1605],256],64955:[[1603,1605,1605],256],64956:[[1604,1580,1605],256],64957:[[1606,1580,1581],256],64958:[[1580,1581,1610],256],64959:[[1581,1580,1610],256],64960:[[1605,1580,1610],256],64961:[[1601,1605,1610],256],64962:[[1576,1581,1610],256],64963:[[1603,1605,1605],256],64964:[[1593,1580,1605],256],64965:[[1589,1605,1605],256],64966:[[1587,1582,1610],256],64967:[[1606,1580,1610],256],65008:[[1589,1604,1746],256],65009:[[1602,1604,1746],256],65010:[[1575,1604,1604,1607],256],65011:[[1575,1603,1576,1585],256],65012:[[1605,1581,1605,1583],256],65013:[[1589,1604,1593,1605],256],65014:[[1585,1587,1608,1604],256],65015:[[1593,1604,1610,1607],256],65016:[[1608,1587,1604,1605],256],65017:[[1589,1604,1609],256],65018:[[1589,1604,1609,32,1575,1604,1604,1607,32,1593,1604,1610,1607,32,1608,1587,1604,1605],256],65019:[[1580,1604,32,1580,1604,1575,1604,1607],256],65020:[[1585,1740,1575,1604],256]},\n65024:{65040:[[44],256],65041:[[12289],256],65042:[[12290],256],65043:[[58],256],65044:[[59],256],65045:[[33],256],65046:[[63],256],65047:[[12310],256],65048:[[12311],256],65049:[[8230],256],65056:[,230],65057:[,230],65058:[,230],65059:[,230],65060:[,230],65061:[,230],65062:[,230],65072:[[8229],256],65073:[[8212],256],65074:[[8211],256],65075:[[95],256],65076:[[95],256],65077:[[40],256],65078:[[41],256],65079:[[123],256],65080:[[125],256],65081:[[12308],256],65082:[[12309],256],65083:[[12304],256],65084:[[12305],256],65085:[[12298],256],65086:[[12299],256],65087:[[12296],256],65088:[[12297],256],65089:[[12300],256],65090:[[12301],256],65091:[[12302],256],65092:[[12303],256],65095:[[91],256],65096:[[93],256],65097:[[8254],256],65098:[[8254],256],65099:[[8254],256],65100:[[8254],256],65101:[[95],256],65102:[[95],256],65103:[[95],256],65104:[[44],256],65105:[[12289],256],65106:[[46],256],65108:[[59],256],65109:[[58],256],65110:[[63],256],65111:[[33],256],65112:[[8212],256],65113:[[40],256],65114:[[41],256],65115:[[123],256],65116:[[125],256],65117:[[12308],256],65118:[[12309],256],65119:[[35],256],65120:[[38],256],65121:[[42],256],65122:[[43],256],65123:[[45],256],65124:[[60],256],65125:[[62],256],65126:[[61],256],65128:[[92],256],65129:[[36],256],65130:[[37],256],65131:[[64],256],65136:[[32,1611],256],65137:[[1600,1611],256],65138:[[32,1612],256],65140:[[32,1613],256],65142:[[32,1614],256],65143:[[1600,1614],256],65144:[[32,1615],256],65145:[[1600,1615],256],65146:[[32,1616],256],65147:[[1600,1616],256],65148:[[32,1617],256],65149:[[1600,1617],256],65150:[[32,1618],256],65151:[[1600,1618],256],65152:[[1569],256],65153:[[1570],256],65154:[[1570],256],65155:[[1571],256],65156:[[1571],256],65157:[[1572],256],65158:[[1572],256],65159:[[1573],256],65160:[[1573],256],65161:[[1574],256],65162:[[1574],256],65163:[[1574],256],65164:[[1574],256],65165:[[1575],256],65166:[[1575],256],65167:[[1576],256],65168:[[1576],256],65169:[[1576],256],65170:[[1576],256],65171:[[1577],256],65172:[[1577],256],65173:[[1578],256],65174:[[1578],256],65175:[[1578],256],65176:[[1578],256],65177:[[1579],256],65178:[[1579],256],65179:[[1579],256],65180:[[1579],256],65181:[[1580],256],65182:[[1580],256],65183:[[1580],256],65184:[[1580],256],65185:[[1581],256],65186:[[1581],256],65187:[[1581],256],65188:[[1581],256],65189:[[1582],256],65190:[[1582],256],65191:[[1582],256],65192:[[1582],256],65193:[[1583],256],65194:[[1583],256],65195:[[1584],256],65196:[[1584],256],65197:[[1585],256],65198:[[1585],256],65199:[[1586],256],65200:[[1586],256],65201:[[1587],256],65202:[[1587],256],65203:[[1587],256],65204:[[1587],256],65205:[[1588],256],65206:[[1588],256],65207:[[1588],256],65208:[[1588],256],65209:[[1589],256],65210:[[1589],256],65211:[[1589],256],65212:[[1589],256],65213:[[1590],256],65214:[[1590],256],65215:[[1590],256],65216:[[1590],256],65217:[[1591],256],65218:[[1591],256],65219:[[1591],256],65220:[[1591],256],65221:[[1592],256],65222:[[1592],256],65223:[[1592],256],65224:[[1592],256],65225:[[1593],256],65226:[[1593],256],65227:[[1593],256],65228:[[1593],256],65229:[[1594],256],65230:[[1594],256],65231:[[1594],256],65232:[[1594],256],65233:[[1601],256],65234:[[1601],256],65235:[[1601],256],65236:[[1601],256],65237:[[1602],256],65238:[[1602],256],65239:[[1602],256],65240:[[1602],256],65241:[[1603],256],65242:[[1603],256],65243:[[1603],256],65244:[[1603],256],65245:[[1604],256],65246:[[1604],256],65247:[[1604],256],65248:[[1604],256],65249:[[1605],256],65250:[[1605],256],65251:[[1605],256],65252:[[1605],256],65253:[[1606],256],65254:[[1606],256],65255:[[1606],256],65256:[[1606],256],65257:[[1607],256],65258:[[1607],256],65259:[[1607],256],65260:[[1607],256],65261:[[1608],256],65262:[[1608],256],65263:[[1609],256],65264:[[1609],256],65265:[[1610],256],65266:[[1610],256],65267:[[1610],256],65268:[[1610],256],65269:[[1604,1570],256],65270:[[1604,1570],256],65271:[[1604,1571],256],65272:[[1604,1571],256],65273:[[1604,1573],256],65274:[[1604,1573],256],65275:[[1604,1575],256],65276:[[1604,1575],256]},\n65280:{65281:[[33],256],65282:[[34],256],65283:[[35],256],65284:[[36],256],65285:[[37],256],65286:[[38],256],65287:[[39],256],65288:[[40],256],65289:[[41],256],65290:[[42],256],65291:[[43],256],65292:[[44],256],65293:[[45],256],65294:[[46],256],65295:[[47],256],65296:[[48],256],65297:[[49],256],65298:[[50],256],65299:[[51],256],65300:[[52],256],65301:[[53],256],65302:[[54],256],65303:[[55],256],65304:[[56],256],65305:[[57],256],65306:[[58],256],65307:[[59],256],65308:[[60],256],65309:[[61],256],65310:[[62],256],65311:[[63],256],65312:[[64],256],65313:[[65],256],65314:[[66],256],65315:[[67],256],65316:[[68],256],65317:[[69],256],65318:[[70],256],65319:[[71],256],65320:[[72],256],65321:[[73],256],65322:[[74],256],65323:[[75],256],65324:[[76],256],65325:[[77],256],65326:[[78],256],65327:[[79],256],65328:[[80],256],65329:[[81],256],65330:[[82],256],65331:[[83],256],65332:[[84],256],65333:[[85],256],65334:[[86],256],65335:[[87],256],65336:[[88],256],65337:[[89],256],65338:[[90],256],65339:[[91],256],65340:[[92],256],65341:[[93],256],65342:[[94],256],65343:[[95],256],65344:[[96],256],65345:[[97],256],65346:[[98],256],65347:[[99],256],65348:[[100],256],65349:[[101],256],65350:[[102],256],65351:[[103],256],65352:[[104],256],65353:[[105],256],65354:[[106],256],65355:[[107],256],65356:[[108],256],65357:[[109],256],65358:[[110],256],65359:[[111],256],65360:[[112],256],65361:[[113],256],65362:[[114],256],65363:[[115],256],65364:[[116],256],65365:[[117],256],65366:[[118],256],65367:[[119],256],65368:[[120],256],65369:[[121],256],65370:[[122],256],65371:[[123],256],65372:[[124],256],65373:[[125],256],65374:[[126],256],65375:[[10629],256],65376:[[10630],256],65377:[[12290],256],65378:[[12300],256],65379:[[12301],256],65380:[[12289],256],65381:[[12539],256],65382:[[12530],256],65383:[[12449],256],65384:[[12451],256],65385:[[12453],256],65386:[[12455],256],65387:[[12457],256],65388:[[12515],256],65389:[[12517],256],65390:[[12519],256],65391:[[12483],256],65392:[[12540],256],65393:[[12450],256],65394:[[12452],256],65395:[[12454],256],65396:[[12456],256],65397:[[12458],256],65398:[[12459],256],65399:[[12461],256],65400:[[12463],256],65401:[[12465],256],65402:[[12467],256],65403:[[12469],256],65404:[[12471],256],65405:[[12473],256],65406:[[12475],256],65407:[[12477],256],65408:[[12479],256],65409:[[12481],256],65410:[[12484],256],65411:[[12486],256],65412:[[12488],256],65413:[[12490],256],65414:[[12491],256],65415:[[12492],256],65416:[[12493],256],65417:[[12494],256],65418:[[12495],256],65419:[[12498],256],65420:[[12501],256],65421:[[12504],256],65422:[[12507],256],65423:[[12510],256],65424:[[12511],256],65425:[[12512],256],65426:[[12513],256],65427:[[12514],256],65428:[[12516],256],65429:[[12518],256],65430:[[12520],256],65431:[[12521],256],65432:[[12522],256],65433:[[12523],256],65434:[[12524],256],65435:[[12525],256],65436:[[12527],256],65437:[[12531],256],65438:[[12441],256],65439:[[12442],256],65440:[[12644],256],65441:[[12593],256],65442:[[12594],256],65443:[[12595],256],65444:[[12596],256],65445:[[12597],256],65446:[[12598],256],65447:[[12599],256],65448:[[12600],256],65449:[[12601],256],65450:[[12602],256],65451:[[12603],256],65452:[[12604],256],65453:[[12605],256],65454:[[12606],256],65455:[[12607],256],65456:[[12608],256],65457:[[12609],256],65458:[[12610],256],65459:[[12611],256],65460:[[12612],256],65461:[[12613],256],65462:[[12614],256],65463:[[12615],256],65464:[[12616],256],65465:[[12617],256],65466:[[12618],256],65467:[[12619],256],65468:[[12620],256],65469:[[12621],256],65470:[[12622],256],65474:[[12623],256],65475:[[12624],256],65476:[[12625],256],65477:[[12626],256],65478:[[12627],256],65479:[[12628],256],65482:[[12629],256],65483:[[12630],256],65484:[[12631],256],65485:[[12632],256],65486:[[12633],256],65487:[[12634],256],65490:[[12635],256],65491:[[12636],256],65492:[[12637],256],65493:[[12638],256],65494:[[12639],256],65495:[[12640],256],65498:[[12641],256],65499:[[12642],256],65500:[[12643],256],65504:[[162],256],65505:[[163],256],65506:[[172],256],65507:[[175],256],65508:[[166],256],65509:[[165],256],65510:[[8361],256],65512:[[9474],256],65513:[[8592],256],65514:[[8593],256],65515:[[8594],256],65516:[[8595],256],65517:[[9632],256],65518:[[9675],256]}\n\n};\n\n   /***** Module to export */\n   var unorm = {\n      nfc: nfc,\n      nfd: nfd,\n      nfkc: nfkc,\n      nfkd: nfkd,\n   };\n\n   /*globals module:true,define:true*/\n\n   // CommonJS\n   if (typeof module === \"object\") {\n      module.exports = unorm;\n\n   // AMD\n   } else if (typeof define === \"function\" && define.amd) {\n      define(\"unorm\", function () {\n         return unorm;\n      });\n\n   // Global\n   } else {\n      root.unorm = unorm;\n   }\n\n   /***** Export as shim for String::normalize method *****/\n   /*\n      http://wiki.ecmascript.org/doku.php?id=harmony:specification_drafts#november_8_2013_draft_rev_21\n\n      21.1.3.12 String.prototype.normalize(form=\"NFC\")\n      When the normalize method is called with one argument form, the following steps are taken:\n\n      1. Let O be CheckObjectCoercible(this value).\n      2. Let S be ToString(O).\n      3. ReturnIfAbrupt(S).\n      4. If form is not provided or undefined let form be \"NFC\".\n      5. Let f be ToString(form).\n      6. ReturnIfAbrupt(f).\n      7. If f is not one of \"NFC\", \"NFD\", \"NFKC\", or \"NFKD\", then throw a RangeError Exception.\n      8. Let ns be the String value is the result of normalizing S into the normalization form named by f as specified in Unicode Standard Annex #15, UnicodeNormalizatoin Forms.\n      9. Return ns.\n\n      The length property of the normalize method is 0.\n\n      *NOTE* The normalize function is intentionally generic; it does not require that its this value be a String object. Therefore it can be transferred to other kinds of objects for use as a method.\n   */\n   if (!String.prototype.normalize) {\n      String.prototype.normalize = function(form) {\n         var str = \"\" + this;\n         form =  form === undefined ? \"NFC\" : form;\n\n         if (form === \"NFC\") {\n            return unorm.nfc(str);\n         } else if (form === \"NFD\") {\n            return unorm.nfd(str);\n         } else if (form === \"NFKC\") {\n            return unorm.nfkc(str);\n         } else if (form === \"NFKD\") {\n            return unorm.nfkd(str);\n         } else {\n            throw new RangeError(\"Invalid normalization form: \" + form);\n         }\n      };\n   }\n}(this));\n\n}\n});\n"
          },
          "redirectURL": "",
          "headersSize": 398,
          "bodySize": 0,
          "_transferSize": 398
        },
        "cache": {},
        "timings": {
          "blocked": 13.3999999998196,
          "dns": -1,
          "connect": -1,
          "send": 0.09000000045489998,
          "wait": 21.886999999878704,
          "receive": 5.471999999826949,
          "ssl": -1
        },
        "connection": "3611",
        "pageref": "page_2"
      }
    ]
  }
}